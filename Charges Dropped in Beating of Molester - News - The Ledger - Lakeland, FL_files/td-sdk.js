!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var i in n)("object"==typeof exports?exports:t)[i]=n[i]}}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="./",e(0)}([function(t,e,n){n(64),n(115),t.exports=n(116)},function(t,e,n){var i,r;i=[n(5),n(4),n(2)],r=function(t,e,n){function i(t,e){throw new Error("declare"+(e?" "+e:"")+": "+t)}function r(t,e){for(var n,r,a,o,s,u,l,c,d=[],h=[{cls:0,refs:[]}],f={},p=1,v=t.length,m=0;m<v;++m){for(a=t[m],a?"[object Function]"!=b.call(a)&&i("mixin #"+m+" is not a callable constructor.",e):i("mixin #"+m+" is unknown. Did you use dojo.require to pull it in?",e),r=a._meta?a._meta.bases:[a],o=0,n=r.length-1;n>=0;--n)s=r[n].prototype,s.hasOwnProperty("declaredClass")||(s.declaredClass="uniqName_"+S++),l=s.declaredClass,f.hasOwnProperty(l)||(f[l]={count:0,refs:[],cls:r[n]},++p),u=f[l],o&&o!==u&&(u.refs.push(o),++o.count),o=u;++o.count,h[0].refs.push(o)}for(;h.length;){for(o=h.pop(),d.push(o.cls),--p;c=o.refs,1==c.length;){if(o=c[0],!o||--o.count){o=0;break}d.push(o.cls),--p}if(o)for(m=0,v=c.length;m<v;++m)o=c[m],--o.count||h.push(o)}return p&&i("can't build consistent linearization",e),a=t[0],d[0]=a?a._meta&&a===d[d.length-a._meta.bases.length]?a._meta.bases.length:1:0,d}function a(t,e,n){var r,a,o,s,u,l,c,d,h,f=this._inherited=this._inherited||{};if("string"==typeof t&&(r=t,t=e,e=n),n=0,s=t.callee,r=r||s.nom,r||i("can't deduce a name to call inherited()",this.declaredClass),u=this.constructor._meta,o=u.bases,h=f.p,r!=k){if(f.c!==s&&(h=0,l=o[0],u=l._meta,u.hidden[r]!==s)){a=u.chains,a&&"string"==typeof a[r]&&i("calling chained method with inherited: "+r,this.declaredClass);do if(u=l._meta,c=l.prototype,u&&(c[r]===s&&c.hasOwnProperty(r)||u.hidden[r]===s))break;while(l=o[++h]);h=l?h:-1}if(l=o[++h])if(c=l.prototype,l._meta&&c.hasOwnProperty(r))n=c[r];else{d=A[r];do if(c=l.prototype,n=c[r],n&&(l._meta?c.hasOwnProperty(r):n!==d))break;while(l=o[++h])}n=l&&n||A[r]}else{if(f.c!==s&&(h=0,u=o[0]._meta,u&&u.ctor!==s)){for(a=u.chains,a&&"manual"===a.constructor||i("calling chained constructor with inherited",this.declaredClass);(l=o[++h])&&(u=l._meta,!u||u.ctor!==s););h=l?h:-1}for(;(l=o[++h])&&(u=l._meta,!(n=u?u.ctor:l)););n=l&&n}if(f.c=n,f.p=h,n)return e===!0?n:n.apply(this,e||t)}function o(t,e){return"string"==typeof t?this.__inherited(t,e,!0):this.__inherited(t,!0)}function s(t,e,n){var i=this.getInherited(t,e);if(i)return i.apply(this,n||e||t)}function u(t){for(var e=this.constructor._meta.bases,n=0,i=e.length;n<i;++n)if(e[n]===t)return!0;return this instanceof t}function l(t,i){for(var r in i)r!=k&&i.hasOwnProperty(r)&&(t[r]=i[r]);if(e("bug-for-in-skips-shadowed"))for(var a=n._extraNames,o=a.length;o;)r=a[--o],r!=k&&i.hasOwnProperty(r)&&(t[r]=i[r])}function c(t,i){var r,a;for(r in i)a=i[r],a===A[r]&&r in A||r==k||("[object Function]"==b.call(a)&&(a.nom=r),t[r]=a);if(e("bug-for-in-skips-shadowed"))for(var o=n._extraNames,s=o.length;s;)r=o[--s],a=i[r],a===A[r]&&r in A||r==k||("[object Function]"==b.call(a)&&(a.nom=r),t[r]=a);return t}function d(t){return _.safeMixin(this.prototype,t),this}function h(t,e){return _([this].concat(t),e||{})}function f(t,e){return function(){var n,i,r,a,o=arguments,s=o,u=o[0],l=t.length;if(!(this instanceof o.callee))return y(o);if(e&&(u&&u.preamble||this.preamble))for(a=new Array(t.length),a[0]=o,i=0;u=o[0],u&&(n=u.preamble,n&&(o=n.apply(this,o)||o)),n=t[i].prototype,n=n.hasOwnProperty("preamble")&&n.preamble,n&&(o=n.apply(this,o)||o),++i!=l;)a[i]=o;for(i=l-1;i>=0;--i)n=t[i],r=n._meta,n=r?r.ctor:n,n&&n.apply(this,a?a[i]:o);n=this.postscript,n&&n.apply(this,s)}}function p(t,e){return function(){var n,i=arguments,r=i,a=i[0];return this instanceof i.callee?(e&&(a&&(n=a.preamble,n&&(r=n.apply(this,r)||r)),n=this.preamble,n&&n.apply(this,r)),t&&t.apply(this,i),n=this.postscript,void(n&&n.apply(this,i))):y(i)}}function v(t){return function(){var e,n,i=arguments,r=0;if(!(this instanceof i.callee))return y(i);for(;e=t[r];++r)if(n=e._meta,e=n?n.ctor:e){e.apply(this,i);break}e=this.postscript,e&&e.apply(this,i)}}function m(t,e,n){return function(){var i,r,a,o=0,s=1;for(n&&(o=e.length-1,s=-1);i=e[o];o+=s)r=i._meta,a=(r?r.hidden:i.prototype)[t],a&&a.apply(this,arguments)}}function g(t){T.prototype=t.prototype;var e=new T;return T.prototype=null,e}function y(t){var e=t.callee,n=g(e);return e.apply(n,t),n}function _(t,e,s){"string"!=typeof t&&(s=e,e=t,t=""),s=s||{};var c,y,T,S,w,R,I,L=1,D=e;if("[object Array]"==b.call(e)?(R=r(e,t),T=R[0],L=R.length-T,e=R[L]):(R=[0],e?"[object Function]"==b.call(e)?(T=e._meta,R=R.concat(T?T.bases:e)):i("base class is not a callable constructor.",t):null!==e&&i("unknown base class. Did you use dojo.require to pull it in?",t)),e)for(y=L-1;c=g(e),y;--y)T=R[y],(T._meta?l:E)(c,T.prototype),S=new Function,S.superclass=e,S.prototype=c,e=c.constructor=S;else c={};for(_.safeMixin(c,s),T=s.constructor,T!==A.constructor&&(T.nom=k,c.constructor=T),y=L-1;y;--y)T=R[y]._meta,T&&T.chains&&(I=E(I||{},T.chains));if(c["-chains-"]&&(I=E(I||{},c["-chains-"])),T=!I||!I.hasOwnProperty(k),R[0]=S=I&&"manual"===I.constructor?v(R):1==R.length?p(s.constructor,T):f(R,T),S._meta={bases:R,hidden:s,chains:I,parents:D,ctor:s.constructor},S.superclass=e&&e.prototype,S.extend=d,S.createSubclass=h,S.prototype=c,c.constructor=S,c.getInherited=o,c.isInstanceOf=u,c.inherited=C,c.__inherited=a,t&&(c.declaredClass=t,n.setObject(t,S)),I)for(w in I)c[w]&&"string"==typeof I[w]&&w!=k&&(T=c[w]=m(w,R,"after"===I[w]),T.nom=w);return S}var E=n.mixin,A=Object.prototype,b=A.toString,T=new Function,S=0,k="constructor",C=t.config.isDebug?s:a;return t.safeMixin=_.safeMixin=c,t.declare=_,_}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(5),n(4),n(10)],r=function(t,e){e.add("bug-for-in-skips-shadowed",function(){for(var t in{toString:1})return 0;return 1});var n=e("bug-for-in-skips-shadowed")?"hasOwnProperty.valueOf.isPrototypeOf.propertyIsEnumerable.toLocaleString.toString.constructor".split("."):[],i=n.length,r=function(e,n,i){var r,a=0,o=t.global;if(!i){if(!e.length)return o;r=e[a++];try{i=t.scopeMap[r]&&t.scopeMap[r][1]}catch(t){}i=i||(r in o?o[r]:n?o[r]={}:void 0)}for(;i&&(r=e[a++]);)i=r in i?i[r]:n?i[r]={}:void 0;return i},a=Object.prototype.toString,o=function(t,e,n){return(n||[]).concat(Array.prototype.slice.call(t,e||0))},s=/\{([^\}]+)\}/g,u={_extraNames:n,_mixin:function(t,r,a){var o,s,u,l={};for(o in r)s=r[o],o in t&&(t[o]===s||o in l&&l[o]===s)||(t[o]=a?a(s):s);if(e("bug-for-in-skips-shadowed")&&r)for(u=0;u<i;++u)o=n[u],s=r[o],o in t&&(t[o]===s||o in l&&l[o]===s)||(t[o]=a?a(s):s);return t},mixin:function(t,e){t||(t={});for(var n=1,i=arguments.length;n<i;n++)u._mixin(t,arguments[n]);return t},setObject:function(t,e,n){var i=t.split("."),a=i.pop(),o=r(i,!0,n);return o&&a?o[a]=e:void 0},getObject:function(t,e,n){return r(t.split("."),e,n)},exists:function(t,e){return void 0!==u.getObject(t,!1,e)},isString:function(t){return"string"==typeof t||t instanceof String},isArray:function(t){return t&&(t instanceof Array||"array"==typeof t)},isFunction:function(t){return"[object Function]"===a.call(t)},isObject:function(t){return void 0!==t&&(null===t||"object"==typeof t||u.isArray(t)||u.isFunction(t))},isArrayLike:function(t){return t&&void 0!==t&&!u.isString(t)&&!u.isFunction(t)&&!(t.tagName&&"form"==t.tagName.toLowerCase())&&(u.isArray(t)||isFinite(t.length))},isAlien:function(t){return t&&!u.isFunction(t)&&/\{\s*\[native code\]\s*\}/.test(String(t))},extend:function(t,e){for(var n=1,i=arguments.length;n<i;n++)u._mixin(t.prototype,arguments[n]);return t},_hitchArgs:function(e,n){var i=u._toArray(arguments,2),r=u.isString(n);return function(){var a=u._toArray(arguments),o=r?(e||t.global)[n]:n;return o&&o.apply(e||this,i.concat(a))}},hitch:function(e,n){if(arguments.length>2)return u._hitchArgs.apply(t,arguments);if(n||(n=e,e=null),u.isString(n)){if(e=e||t.global,!e[n])throw['lang.hitch: scope["',n,'"] is null (scope="',e,'")'].join("");return function(){return e[n].apply(e,arguments||[])}}return e?function(){return n.apply(e,arguments||[])}:n},delegate:function(){function t(){}return function(e,n){t.prototype=e;var i=new t;return t.prototype=null,n&&u._mixin(i,n),i}}(),_toArray:e("ie")?function(){function t(t,e,n){for(var i=n||[],r=e||0;r<t.length;r++)i.push(t[r]);return i}return function(e){return(e.item?t:o).apply(this,arguments)}}():o,partial:function(e){var n=[null];return u.hitch.apply(t,n.concat(u._toArray(arguments)))},clone:function(t){if(!t||"object"!=typeof t||u.isFunction(t))return t;if(t.nodeType&&"cloneNode"in t)return t.cloneNode(!0);if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return new RegExp(t);var e,n,i;if(u.isArray(t))for(e=[],n=0,i=t.length;n<i;++n)n in t&&e.push(u.clone(t[n]));else e=t.constructor?new t.constructor:{};return u._mixin(e,t,u.clone)},trim:String.prototype.trim?function(t){return t.trim()}:function(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(t,e,n){return t.replace(n||s,u.isFunction(e)?e:function(t,n){return u.getObject(n,!1,e)})}};return e("extend-dojo")&&u.mixin(t,u),u}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(34),n(5),n(10)],r=function(t,e,n){"use strict";function i(t,e,i,r,a){var o=e.match(/(.*):(.*)/);if(o)return e=o[2],o=o[1],s.selector(o,e).call(a,t,i);if(n("touch")&&(u.test(e)&&(i=T(i)),n("event-orientationchange")||"orientationchange"!=e||(e="resize",t=window,i=T(i))),f&&(i=f(i)),t.addEventListener){var l=e in d,c=l?d[e]:e;return t.addEventListener(c,i,l),{remove:function(){t.removeEventListener(c,i,l)}}}if(e="on"+e,g&&t.attachEvent)return g(t,e,i);throw new Error("Target must be an event emitter")}function r(){this.cancelable=!1,this.defaultPrevented=!0}function a(){this.bubbles=!1}if(n("dom")){var o=window.ScriptEngineMajorVersion;n.add("jscript",o&&o()+ScriptEngineMinorVersion()/10),n.add("event-orientationchange",n("touch")&&!n("android")),n.add("event-stopimmediatepropagation",window.Event&&!!window.Event.prototype&&!!window.Event.prototype.stopImmediatePropagation),n.add("event-focusin",function(t,e,n){return!!n.attachEvent})}var s=function(t,e,n,r){return"function"!=typeof t.on||"function"==typeof e||t.nodeType?s.parse(t,e,n,i,r,this):t.on(e,n)};s.pausable=function(t,e,n,i){var r,a=s(t,e,function(){if(!r)return n.apply(this,arguments)},i);return a.pause=function(){r=!0},a.resume=function(){r=!1},a},s.once=function(t,e,n,i){var r=s(t,e,function(){return r.remove(),n.apply(this,arguments)});return r},s.parse=function(t,e,n,i,r,a){if(e.call)return e.call(a,t,n);if(e.indexOf(",")>-1){for(var o,s=e.split(/\s*,\s*/),u=[],l=0;o=s[l++];)u.push(i(t,o,n,r,a));return u.remove=function(){for(var t=0;t<u.length;t++)u[t].remove()},u}return i(t,e,n,r,a)};var u=/^touch/;s.selector=function(t,n,i){return function(r,a){function o(n){for(u=u&&u.matches?u:e.query;!u.matches(n,t,r);)if(n==r||i===!1||!(n=n.parentNode)||1!=n.nodeType)return;return n}var u="function"==typeof t?{matches:t}:this,l=n.bubble;return l?s(r,l(o),a):s(r,n,function(t){var e=o(t.target);return e&&a.call(e,t)})}};var l=[].slice,c=s.emit=function(t,e,n){var i=l.call(arguments,2),o="on"+e;if("parentNode"in t){var s=i[0]={};for(var u in n)s[u]=n[u];s.preventDefault=r,s.stopPropagation=a,s.target=t,s.type=e,n=s}do t[o]&&t[o].apply(t,i);while(n&&n.bubbles&&(t=t.parentNode));return n&&n.cancelable&&n},d=n("event-focusin")?{}:{focusin:"focus",focusout:"blur"};if(!n("event-stopimmediatepropagation"))var h=function(){this.immediatelyStopped=!0,this.modified=!0},f=function(t){return function(e){if(!e.immediatelyStopped)return e.stopImmediatePropagation=h,t.apply(this,arguments)}};if(n("dom-addeventlistener"))s.emit=function(t,e,n){if(t.dispatchEvent&&document.createEvent){var i=t.ownerDocument.createEvent("HTMLEvents");i.initEvent(e,!!n.bubbles,!!n.cancelable);for(var r in n)r in i||(i[r]=n[r]);return t.dispatchEvent(i)&&i}return c.apply(s,arguments)};else{s._fixEvent=function(t,e){if(!t){var n=e&&(e.ownerDocument||e.document||e).parentWindow||window;t=n.event}if(!t)return t;try{p&&t.type==p.type&&t.srcElement==p.target&&(t=p)}catch(t){}if(!t.target)switch(t.target=t.srcElement,t.currentTarget=e||t.srcElement,"mouseover"==t.type&&(t.relatedTarget=t.fromElement),"mouseout"==t.type&&(t.relatedTarget=t.toElement),t.stopPropagation||(t.stopPropagation=_,t.preventDefault=E),t.type){case"keypress":var i="charCode"in t?t.charCode:t.keyCode;10==i?(i=0,t.keyCode=13):13==i||27==i?i=0:3==i&&(i=99),t.charCode=i,y(t)}return t};var p,v=function(t){this.handle=t};v.prototype.remove=function(){delete _dojoIEListeners_[this.handle]};var m=function(t){return function(e){e=s._fixEvent(e,this);var n=t.call(this,e);return e.modified&&(p||setTimeout(function(){p=null}),p=e),n}},g=function(e,i,r){if(r=m(r),((e.ownerDocument?e.ownerDocument.parentWindow:e.parentWindow||e.window||window)!=top||n("jscript")<5.8)&&!n("config-_allow_leaks")){"undefined"==typeof _dojoIEListeners_&&(_dojoIEListeners_=[]);var a=e[i];if(!a||!a.listeners){var o=a;a=Function("event","var callee = arguments.callee; for(var i = 0; i<callee.listeners.length; i++){var listener = _dojoIEListeners_[callee.listeners[i]]; if(listener){listener.call(this,event);}}"),a.listeners=[],e[i]=a,a.global=this,o&&a.listeners.push(_dojoIEListeners_.push(o)-1)}var s;return a.listeners.push(s=a.global._dojoIEListeners_.push(r)-1),new v(s)}return t.after(e,i,r,!0)},y=function(t){t.keyChar=t.charCode?String.fromCharCode(t.charCode):"",t.charOrCode=t.keyChar||t.keyCode},_=function(){this.cancelBubble=!0},E=s._preventDefault=function(){if(this.bubbledKeyCode=this.keyCode,this.ctrlKey)try{this.keyCode=0}catch(t){}this.defaultPrevented=!0,this.returnValue=!1,this.modified=!0}}if(n("touch"))var A=function(){},b=window.orientation,T=function(t){return function(e){var i=e.corrected;if(!i){var r=e.type;try{delete e.type}catch(t){}if(e.type){if(n("mozilla")){var i={};for(var a in e)i[a]=e[a]}else{A.prototype=e;var i=new A}i.preventDefault=function(){e.preventDefault()},i.stopPropagation=function(){e.stopPropagation()}}else i=e,i.type=r;if(e.corrected=i,"resize"==r)return b==window.orientation?null:(b=window.orientation,i.type="orientationchange",t.call(this,i));"rotation"in i||(i.rotation=0,i.scale=1);var o=i.changedTouches[0];for(var s in o)delete i[s],i[s]=o[s]}return t.call(this,i)}};return s}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(27)],r=function(t){var e={config:function(){return{"config-deferredInstrumentation":0,"config-dojo-loader-catches":0,"config-tlmSiblingOfDojo":0,"dojo-amd-factory-scan":0,"dojo-combo-api":0,"dojo-config-api":1,"dojo-config-require":0,"dojo-debug-messages":0,"dojo-dom-ready-api":1,"dojo-firebug":0,"dojo-guarantee-console":1,"dojo-has-api":1,"dojo-inject-api":1,"dojo-loader":1,"dojo-log-api":0,"dojo-modulePaths":0,"dojo-moduleUrl":0,"dojo-publish-privates":0,"dojo-requirejs-api":0,"dojo-sniff":1,"dojo-sync-loader":0,"dojo-test-sniff":0,"dojo-timeout-api":0,"dojo-trace-api":0,"dojo-undef-api":0,"dojo-v1x-i18n-Api":1,dom:1,"host-browser":1,"extend-dojo":1,touch:0}}},n=t.has||function(){};if(!n("dojo-has-api")){var i="undefined"!=typeof window&&"undefined"!=typeof location&&"undefined"!=typeof document&&window.location==location&&window.document==document,r=this,a=i&&document,o=a&&a.createElement("DiV"),s=e.config&&e.config()||{};n=function(t){return"function"==typeof s[t]?s[t]=s[t](r,a,o):s[t]},n.cache=s,n.add=function(t,e,i,r){return("undefined"==typeof s[t]||r)&&(s[t]=e),i&&n(t)},n.add("host-browser",i),n.add("dom",i),n.add("dojo-dom-ready-api",1),n.add("dojo-sniff",1)}if(n("host-browser")){n.add("dom-addeventlistener",!!document.addEventListener),n.add("touch","ontouchstart"in document||window.navigator.msMaxTouchPoints>0),n.add("device-width",screen.availWidth||innerWidth);var u=document.createElement("form");n.add("dom-attributes-explicit",0==u.attributes.length),n.add("dom-attributes-specified-flag",u.attributes.length>0&&u.attributes.length<40)}return n.clearElement=function(t){return t.innerHTML="",t},n.normalize=function(t,e){var i=t.match(/[\?:]|[^:\?]*/g),r=0,a=function(t){var e=i[r++];return":"==e?0:"?"==i[r++]?!t&&n(e)?a():(a(!0),a(t)):e||0};return t=a(),t&&e(t)},n.load=function(t,e,n){t?e([t],n):n()},n}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;(function(t){i=[n(4),n(77),n(27),t],r=function(t,e,n,i){i={id:"dojo/_base/kernel"};var r,a,o,s={},u={},l={config:e,global:this,dijit:s,dojox:u},c={dojo:["dojo",l],dijit:["dijit",s],dojox:["dojox",u]},d=n.map&&n.map[i.id.match(/[^\/]+/)[0]];for(a in d)c[a]?c[a][0]=d[a]:c[a]=[d[a],{}];for(a in c)o=c[a],o[1]._scopeName=o[0],e.noGlobals||(this[o[0]]=o[1]);l.scopeMap=c,l.baseUrl=l.config.baseUrl=n.baseUrl,l.isAsync=!t("dojo-loader")||n.async,l.locale=e.locale;var h="$Rev: 31379 $".match(/\d+/);if(l.version={major:1,minor:9,patch:0,flag:"",revision:h?+h[0]:NaN,toString:function(){var t=l.version;return t.major+"."+t.minor+"."+t.patch+t.flag+" ("+t.revision+")"}},t.add("extend-dojo",1),Function("d","d.eval = function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(l),t("host-rhino")?l.exit=function(t){quit(t)}:l.exit=function(){},t.add("dojo-guarantee-console",1),t("dojo-guarantee-console")){"undefined"!=typeof console||(console={});var f,p=["assert","count","debug","dir","dirxml","error","group","groupEnd","info","profile","profileEnd","time","timeEnd","trace","warn","log"];for(r=0;f=p[r++];)console[f]||!function(){var t=f+"";console[t]="log"in console?function(){var e=Array.apply({},arguments);e.unshift(t+":"),console.log(e.join(" "))}:function(){},console[t]._fake=!0}()}if(t.add("dojo-debug-messages",!!e.isDebug),l.deprecated=l.experimental=function(){},t("dojo-debug-messages")&&(l.deprecated=function(t,e,n){var i="DEPRECATED: "+t;e&&(i+=" "+e),n&&(i+=" -- will be removed in version: "+n),console.warn(i)},l.experimental=function(t,e){var n="EXPERIMENTAL: "+t+" -- APIs subject to change without notice.";e&&(n+=" "+e),console.warn(n)}),t.add("dojo-modulePaths",1),t("dojo-modulePaths")&&e.modulePaths){l.deprecated("dojo.modulePaths","use paths configuration");var v={};for(a in e.modulePaths)v[a.replace(/\./g,"/")]=e.modulePaths[a];n({paths:v})}return t.add("dojo-moduleUrl",1),t("dojo-moduleUrl")&&(l.moduleUrl=function(t,e){l.deprecated("dojo.moduleUrl()","use require.toUrl","2.0");var i=null;return t&&(i=n.toUrl(t.replace(/\./g,"/")+(e?"/"+e:"")+"/*.*").replace(/\/\*\.\*/,"")+(e?"":"/")),i}),l._hasResource={},l}.apply(e,i),!(void 0!==r&&(t.exports=r))}).call(e,n(29)(t))},function(t,e,n){var i,r;i=[n(5),n(4),n(2)],r=function(t,e,n){function i(t){return s[t]=new Function("item","index","array",t)}function r(t){var e=!t;return function(n,r,a){var o,u=0,l=n&&n.length||0;if(l&&"string"==typeof n&&(n=n.split("")),"string"==typeof r&&(r=s[r]||i(r)),a){for(;u<l;++u)if(o=!r.call(a,n[u],u,n),t^o)return!o}else for(;u<l;++u)if(o=!r(n[u],u,n),t^o)return!o;return e}}function a(t){var e=1,n=0,i=0;return t||(e=n=i=-1),function(r,a,s,l){if(l&&e>0)return u.lastIndexOf(r,a,s);var c,d=r&&r.length||0,h=t?d+i:n;for(s===o?c=t?n:d+i:s<0?(c=d+s,c<0&&(c=n)):c=s>=d?d+i:s,d&&"string"==typeof r&&(r=r.split(""));c!=h;c+=e)if(r[c]==a)return c;return-1}}var o,s={},u={every:r(!1),some:r(!0),indexOf:a(!0),lastIndexOf:a(!1),forEach:function(t,e,n){var r=0,a=t&&t.length||0;if(a&&"string"==typeof t&&(t=t.split("")),"string"==typeof e&&(e=s[e]||i(e)),n)for(;r<a;++r)e.call(n,t[r],r,t);else for(;r<a;++r)e(t[r],r,t)},map:function(t,e,n,r){var a=0,o=t&&t.length||0,u=new(r||Array)(o);if(o&&"string"==typeof t&&(t=t.split("")),"string"==typeof e&&(e=s[e]||i(e)),n)for(;a<o;++a)u[a]=e.call(n,t[a],a,t);else for(;a<o;++a)u[a]=e(t[a],a,t);return u},filter:function(t,e,n){var r,a=0,o=t&&t.length||0,u=[];if(o&&"string"==typeof t&&(t=t.split("")),"string"==typeof e&&(e=s[e]||i(e)),n)for(;a<o;++a)r=t[a],e.call(n,r,a,t)&&u.push(r);else for(;a<o;++a)r=t[a],e(r,a,t)&&u.push(r);return u},clearCache:function(){s={}}};return e("extend-dojo")&&n.mixin(t,u),u}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(10),n(17)],r=function(t,e){if(t("ie")<=7)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(t){}var n={};t("ie")?n.byId=function(t,n){if("string"!=typeof t)return t;var i=n||e.doc,r=t&&i.getElementById(t);if(r&&(r.attributes.id.value==t||r.id==t))return r;var a=i.all[t];a&&!a.nodeName||(a=[a]);for(var o=0;r=a[o++];)if(r.attributes&&r.attributes.id&&r.attributes.id.value==t||r.id==t)return r}:n.byId=function(t,n){return("string"==typeof t?(n||e.doc).getElementById(t):t)||null},n.isDescendant=function(t,e){try{for(t=n.byId(t),e=n.byId(e);t;){if(t==e)return!0;t=t.parentNode}}catch(t){}return!1},t.add("css-user-select",function(t,e,n){if(!n)return!1;var i=n.style,r=["Khtml","O","ms","Moz","Webkit"],a=r.length,o="userSelect";do if("undefined"!=typeof i[o])return o;while(a--&&(o=r[a]+"UserSelect"));return!1});var i=t("css-user-select");return n.setSelectable=i?function(t,e){n.byId(t).style[i]=e?"":"none"}:function(t,e){t=n.byId(t);var i=t.getElementsByTagName("*"),r=i.length;if(e)for(t.removeAttribute("unselectable");r--;)i[r].removeAttribute("unselectable");else for(t.setAttribute("unselectable","on");r--;)i[r].setAttribute("unselectable","on")},n}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i;(function(t,r){(function(){function a(t,e){return t.set(e[0],e[1]),t}function o(t,e){return t.add(e),t}function s(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function u(t,e,n,i){for(var r=-1,a=null==t?0:t.length;++r<a;){var o=t[r];e(i,o,n(o),t)}return i}function l(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&e(t[n],n,t)!==!1;);return t}function c(t,e){for(var n=null==t?0:t.length;n--&&e(t[n],n,t)!==!1;);return t}function d(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function h(t,e){for(var n=-1,i=null==t?0:t.length,r=0,a=[];++n<i;){var o=t[n];e(o,n,t)&&(a[r++]=o)}return a}function f(t,e){var n=null==t?0:t.length;return!!n&&S(t,e,0)>-1}function p(t,e,n){for(var i=-1,r=null==t?0:t.length;++i<r;)if(n(e,t[i]))return!0;return!1}function v(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}function m(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}function g(t,e,n,i){var r=-1,a=null==t?0:t.length;for(i&&a&&(n=t[++r]);++r<a;)n=e(n,t[r],r,t);return n}function y(t,e,n,i){var r=null==t?0:t.length;for(i&&r&&(n=t[--r]);r--;)n=e(n,t[r],r,t);return n}function _(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}function E(t){return t.split("")}function A(t){return t.match(Ve)||[]}function b(t,e,n){var i;return n(t,function(t,n,r){if(e(t,n,r))return i=n,!1}),i}function T(t,e,n,i){for(var r=t.length,a=n+(i?1:-1);i?a--:++a<r;)if(e(t[a],a,t))return a;return-1}function S(t,e,n){return e===e?$(t,e,n):T(t,C,n)}function k(t,e,n,i){for(var r=n-1,a=t.length;++r<a;)if(i(t[r],e))return r;return-1}function C(t){return t!==t}function w(t,e){var n=null==t?0:t.length;return n?P(t,e)/n:Ft}function R(t){return function(e){return null==e?rt:e[t]}}function I(t){return function(e){return null==t?rt:t[e]}}function L(t,e,n,i,r){return r(t,function(t,r,a){n=i?(i=!1,t):e(n,t,r,a)}),n}function D(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function P(t,e){for(var n,i=-1,r=t.length;++i<r;){var a=e(t[i]);a!==rt&&(n=n===rt?a:n+a)}return n}function O(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function M(t,e){return v(e,function(e){return[e,t[e]]})}function N(t){return function(e){return t(e)}}function x(t,e){return v(e,function(e){return t[e]})}function F(t,e){return t.has(e)}function U(t,e){for(var n=-1,i=t.length;++n<i&&S(e,t[n],0)>-1;);return n}function B(t,e){for(var n=t.length;n--&&S(e,t[n],0)>-1;);return n}function G(t,e){for(var n=t.length,i=0;n--;)t[n]===e&&++i;return i}function j(t){return"\\"+ni[t]}function H(t,e){return null==t?rt:t[e]}function V(t){return Yn.test(t)}function W(t){return zn.test(t)}function K(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}function q(t){var e=-1,n=Array(t.size);return t.forEach(function(t,i){n[++e]=[i,t]}),n}function Y(t,e){return function(n){return t(e(n))}}function z(t,e){for(var n=-1,i=t.length,r=0,a=[];++n<i;){var o=t[n];o!==e&&o!==dt||(t[n]=dt,a[r++]=n)}return a}function X(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function Q(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}function $(t,e,n){for(var i=n-1,r=t.length;++i<r;)if(t[i]===e)return i;return-1}function J(t,e,n){for(var i=n+1;i--;)if(t[i]===e)return i;return i}function Z(t){return V(t)?et(t):_i(t)}function tt(t){return V(t)?nt(t):E(t)}function et(t){for(var e=Kn.lastIndex=0;Kn.test(t);)++e;return e}function nt(t){return t.match(Kn)||[]}function it(t){return t.match(qn)||[]}var rt,at="4.17.4",ot=200,st="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",ut="Expected a function",lt="__lodash_hash_undefined__",ct=500,dt="__lodash_placeholder__",ht=1,ft=2,pt=4,vt=1,mt=2,gt=1,yt=2,_t=4,Et=8,At=16,bt=32,Tt=64,St=128,kt=256,Ct=512,wt=30,Rt="...",It=800,Lt=16,Dt=1,Pt=2,Ot=3,Mt=1/0,Nt=9007199254740991,xt=1.7976931348623157e308,Ft=NaN,Ut=4294967295,Bt=Ut-1,Gt=Ut>>>1,jt=[["ary",St],["bind",gt],["bindKey",yt],["curry",Et],["curryRight",At],["flip",Ct],["partial",bt],["partialRight",Tt],["rearg",kt]],Ht="[object Arguments]",Vt="[object Array]",Wt="[object AsyncFunction]",Kt="[object Boolean]",qt="[object Date]",Yt="[object DOMException]",zt="[object Error]",Xt="[object Function]",Qt="[object GeneratorFunction]",$t="[object Map]",Jt="[object Number]",Zt="[object Null]",te="[object Object]",ee="[object Promise]",ne="[object Proxy]",ie="[object RegExp]",re="[object Set]",ae="[object String]",oe="[object Symbol]",se="[object Undefined]",ue="[object WeakMap]",le="[object WeakSet]",ce="[object ArrayBuffer]",de="[object DataView]",he="[object Float32Array]",fe="[object Float64Array]",pe="[object Int8Array]",ve="[object Int16Array]",me="[object Int32Array]",ge="[object Uint8Array]",ye="[object Uint8ClampedArray]",_e="[object Uint16Array]",Ee="[object Uint32Array]",Ae=/\b__p \+= '';/g,be=/\b(__p \+=) '' \+/g,Te=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Se=/&(?:amp|lt|gt|quot|#39);/g,ke=/[&<>"']/g,Ce=RegExp(Se.source),we=RegExp(ke.source),Re=/<%-([\s\S]+?)%>/g,Ie=/<%([\s\S]+?)%>/g,Le=/<%=([\s\S]+?)%>/g,De=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Pe=/^\w*$/,Oe=/^\./,Me=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ne=/[\\^$.*+?()[\]{}|]/g,xe=RegExp(Ne.source),Fe=/^\s+|\s+$/g,Ue=/^\s+/,Be=/\s+$/,Ge=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,je=/\{\n\/\* \[wrapped with (.+)\] \*/,He=/,? & /,Ve=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,We=/\\(\\)?/g,Ke=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,qe=/\w*$/,Ye=/^[-+]0x[0-9a-f]+$/i,ze=/^0b[01]+$/i,Xe=/^\[object .+?Constructor\]$/,Qe=/^0o[0-7]+$/i,$e=/^(?:0|[1-9]\d*)$/,Je=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ze=/($^)/,tn=/['\n\r\u2028\u2029\\]/g,en="\\ud800-\\udfff",nn="\\u0300-\\u036f",rn="\\ufe20-\\ufe2f",an="\\u20d0-\\u20ff",on=nn+rn+an,sn="\\u2700-\\u27bf",un="a-z\\xdf-\\xf6\\xf8-\\xff",ln="\\xac\\xb1\\xd7\\xf7",cn="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",dn="\\u2000-\\u206f",hn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",fn="A-Z\\xc0-\\xd6\\xd8-\\xde",pn="\\ufe0e\\ufe0f",vn=ln+cn+dn+hn,mn="['’]",gn="["+en+"]",yn="["+vn+"]",_n="["+on+"]",En="\\d+",An="["+sn+"]",bn="["+un+"]",Tn="[^"+en+vn+En+sn+un+fn+"]",Sn="\\ud83c[\\udffb-\\udfff]",kn="(?:"+_n+"|"+Sn+")",Cn="[^"+en+"]",wn="(?:\\ud83c[\\udde6-\\uddff]){2}",Rn="[\\ud800-\\udbff][\\udc00-\\udfff]",In="["+fn+"]",Ln="\\u200d",Dn="(?:"+bn+"|"+Tn+")",Pn="(?:"+In+"|"+Tn+")",On="(?:"+mn+"(?:d|ll|m|re|s|t|ve))?",Mn="(?:"+mn+"(?:D|LL|M|RE|S|T|VE))?",Nn=kn+"?",xn="["+pn+"]?",Fn="(?:"+Ln+"(?:"+[Cn,wn,Rn].join("|")+")"+xn+Nn+")*",Un="\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)",Bn="\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)",Gn=xn+Nn+Fn,jn="(?:"+[An,wn,Rn].join("|")+")"+Gn,Hn="(?:"+[Cn+_n+"?",_n,wn,Rn,gn].join("|")+")",Vn=RegExp(mn,"g"),Wn=RegExp(_n,"g"),Kn=RegExp(Sn+"(?="+Sn+")|"+Hn+Gn,"g"),qn=RegExp([In+"?"+bn+"+"+On+"(?="+[yn,In,"$"].join("|")+")",Pn+"+"+Mn+"(?="+[yn,In+Dn,"$"].join("|")+")",In+"?"+Dn+"+"+On,In+"+"+Mn,Bn,Un,En,jn].join("|"),"g"),Yn=RegExp("["+Ln+en+on+pn+"]"),zn=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Xn=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Qn=-1,$n={};$n[he]=$n[fe]=$n[pe]=$n[ve]=$n[me]=$n[ge]=$n[ye]=$n[_e]=$n[Ee]=!0,$n[Ht]=$n[Vt]=$n[ce]=$n[Kt]=$n[de]=$n[qt]=$n[zt]=$n[Xt]=$n[$t]=$n[Jt]=$n[te]=$n[ie]=$n[re]=$n[ae]=$n[ue]=!1;var Jn={};Jn[Ht]=Jn[Vt]=Jn[ce]=Jn[de]=Jn[Kt]=Jn[qt]=Jn[he]=Jn[fe]=Jn[pe]=Jn[ve]=Jn[me]=Jn[$t]=Jn[Jt]=Jn[te]=Jn[ie]=Jn[re]=Jn[ae]=Jn[oe]=Jn[ge]=Jn[ye]=Jn[_e]=Jn[Ee]=!0,Jn[zt]=Jn[Xt]=Jn[ue]=!1;var Zn={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},ti={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ei={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},ni={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ii=parseFloat,ri=parseInt,ai="object"==typeof t&&t&&t.Object===Object&&t,oi="object"==typeof self&&self&&self.Object===Object&&self,si=ai||oi||Function("return this")(),ui="object"==typeof e&&e&&!e.nodeType&&e,li=ui&&"object"==typeof r&&r&&!r.nodeType&&r,ci=li&&li.exports===ui,di=ci&&ai.process,hi=function(){try{return di&&di.binding&&di.binding("util")}catch(t){}}(),fi=hi&&hi.isArrayBuffer,pi=hi&&hi.isDate,vi=hi&&hi.isMap,mi=hi&&hi.isRegExp,gi=hi&&hi.isSet,yi=hi&&hi.isTypedArray,_i=R("length"),Ei=I(Zn),Ai=I(ti),bi=I(ei),Ti=function t(e){function n(t){if(lu(t)&&!Eh(t)&&!(t instanceof E)){if(t instanceof r)return t;if(Ec.call(t,"__wrapped__"))return ao(t);
}return new r(t)}function i(){}function r(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=rt}function E(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ut,this.__views__=[]}function I(){var t=new E(this.__wrapped__);return t.__actions__=Gr(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Gr(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Gr(this.__views__),t}function $(){if(this.__filtered__){var t=new E(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function et(){var t=this.__wrapped__.value(),e=this.__dir__,n=Eh(t),i=e<0,r=n?t.length:0,a=Ia(0,r,this.__views__),o=a.start,s=a.end,u=s-o,l=i?s:o-1,c=this.__iteratees__,d=c.length,h=0,f=Qc(u,this.__takeCount__);if(!n||!i&&r==u&&f==u)return Ar(t,this.__actions__);var p=[];t:for(;u--&&h<f;){l+=e;for(var v=-1,m=t[l];++v<d;){var g=c[v],y=g.iteratee,_=g.type,E=y(m);if(_==Pt)m=E;else if(!E){if(_==Dt)continue t;break t}}p[h++]=m}return p}function nt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Ve(){this.__data__=od?od(null):{},this.size=0}function en(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function nn(t){var e=this.__data__;if(od){var n=e[t];return n===lt?rt:n}return Ec.call(e,t)?e[t]:rt}function rn(t){var e=this.__data__;return od?e[t]!==rt:Ec.call(e,t)}function an(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=od&&e===rt?lt:e,this}function on(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function sn(){this.__data__=[],this.size=0}function un(t){var e=this.__data__,n=On(e,t);if(n<0)return!1;var i=e.length-1;return n==i?e.pop():Mc.call(e,n,1),--this.size,!0}function ln(t){var e=this.__data__,n=On(e,t);return n<0?rt:e[n][1]}function cn(t){return On(this.__data__,t)>-1}function dn(t,e){var n=this.__data__,i=On(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}function hn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function fn(){this.size=0,this.__data__={hash:new nt,map:new(nd||on),string:new nt}}function pn(t){var e=ka(this,t).delete(t);return this.size-=e?1:0,e}function vn(t){return ka(this,t).get(t)}function mn(t){return ka(this,t).has(t)}function gn(t,e){var n=ka(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}function yn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new hn;++e<n;)this.add(t[e])}function _n(t){return this.__data__.set(t,lt),this}function En(t){return this.__data__.has(t)}function An(t){var e=this.__data__=new on(t);this.size=e.size}function bn(){this.__data__=new on,this.size=0}function Tn(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function Sn(t){return this.__data__.get(t)}function kn(t){return this.__data__.has(t)}function Cn(t,e){var n=this.__data__;if(n instanceof on){var i=n.__data__;if(!nd||i.length<ot-1)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new hn(i)}return n.set(t,e),this.size=n.size,this}function wn(t,e){var n=Eh(t),i=!n&&_h(t),r=!n&&!i&&bh(t),a=!n&&!i&&!r&&wh(t),o=n||i||r||a,s=o?O(t.length,fc):[],u=s.length;for(var l in t)!e&&!Ec.call(t,l)||o&&("length"==l||r&&("offset"==l||"parent"==l)||a&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Fa(l,u))||s.push(l);return s}function Rn(t){var e=t.length;return e?t[nr(0,e-1)]:rt}function In(t,e){return eo(Gr(t),Bn(e,0,t.length))}function Ln(t){return eo(Gr(t))}function Dn(t,e,n){(n===rt||Xs(t[e],n))&&(n!==rt||e in t)||Fn(t,e,n)}function Pn(t,e,n){var i=t[e];Ec.call(t,e)&&Xs(i,n)&&(n!==rt||e in t)||Fn(t,e,n)}function On(t,e){for(var n=t.length;n--;)if(Xs(t[n][0],e))return n;return-1}function Mn(t,e,n,i){return yd(t,function(t,r,a){e(i,t,n(t),a)}),i}function Nn(t,e){return t&&jr(e,Wu(e),t)}function xn(t,e){return t&&jr(e,Ku(e),t)}function Fn(t,e,n){"__proto__"==e&&Uc?Uc(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Un(t,e){for(var n=-1,i=e.length,r=oc(i),a=null==t;++n<i;)r[n]=a?rt:ju(t,e[n]);return r}function Bn(t,e,n){return t===t&&(n!==rt&&(t=t<=n?t:n),e!==rt&&(t=t>=e?t:e)),t}function Gn(t,e,n,i,r,a){var o,s=e&ht,u=e&ft,c=e&pt;if(n&&(o=r?n(t,i,r,a):n(t)),o!==rt)return o;if(!uu(t))return t;var d=Eh(t);if(d){if(o=Pa(t),!s)return Gr(t,o)}else{var h=Ld(t),f=h==Xt||h==Qt;if(bh(t))return Rr(t,s);if(h==te||h==Ht||f&&!r){if(o=u||f?{}:Oa(t),!s)return u?Vr(t,xn(o,t)):Hr(t,Nn(o,t))}else{if(!Jn[h])return r?t:{};o=Ma(t,h,Gn,s)}}a||(a=new An);var p=a.get(t);if(p)return p;a.set(t,o);var v=c?u?Aa:Ea:u?Ku:Wu,m=d?rt:v(t);return l(m||t,function(i,r){m&&(r=i,i=t[r]),Pn(o,r,Gn(i,e,n,r,t,a))}),o}function jn(t){var e=Wu(t);return function(n){return Hn(n,t,e)}}function Hn(t,e,n){var i=n.length;if(null==t)return!i;for(t=dc(t);i--;){var r=n[i],a=e[r],o=t[r];if(o===rt&&!(r in t)||!a(o))return!1}return!0}function Kn(t,e,n){if("function"!=typeof t)throw new pc(ut);return Od(function(){t.apply(rt,n)},e)}function qn(t,e,n,i){var r=-1,a=f,o=!0,s=t.length,u=[],l=e.length;if(!s)return u;n&&(e=v(e,N(n))),i?(a=p,o=!1):e.length>=ot&&(a=F,o=!1,e=new yn(e));t:for(;++r<s;){var c=t[r],d=null==n?c:n(c);if(c=i||0!==c?c:0,o&&d===d){for(var h=l;h--;)if(e[h]===d)continue t;u.push(c)}else a(e,d,i)||u.push(c)}return u}function Yn(t,e){var n=!0;return yd(t,function(t,i,r){return n=!!e(t,i,r)}),n}function zn(t,e,n){for(var i=-1,r=t.length;++i<r;){var a=t[i],o=e(a);if(null!=o&&(s===rt?o===o&&!Eu(o):n(o,s)))var s=o,u=a}return u}function Zn(t,e,n,i){var r=t.length;for(n=Cu(n),n<0&&(n=-n>r?0:r+n),i=i===rt||i>r?r:Cu(i),i<0&&(i+=r),i=n>i?0:wu(i);n<i;)t[n++]=e;return t}function ti(t,e){var n=[];return yd(t,function(t,i,r){e(t,i,r)&&n.push(t)}),n}function ei(t,e,n,i,r){var a=-1,o=t.length;for(n||(n=xa),r||(r=[]);++a<o;){var s=t[a];e>0&&n(s)?e>1?ei(s,e-1,n,i,r):m(r,s):i||(r[r.length]=s)}return r}function ni(t,e){return t&&Ed(t,e,Wu)}function ai(t,e){return t&&Ad(t,e,Wu)}function oi(t,e){return h(e,function(e){return au(t[e])})}function ui(t,e){e=Cr(e,t);for(var n=0,i=e.length;null!=t&&n<i;)t=t[no(e[n++])];return n&&n==i?t:rt}function li(t,e,n){var i=e(t);return Eh(t)?i:m(i,n(t))}function di(t){return null==t?t===rt?se:Zt:Fc&&Fc in dc(t)?Ra(t):Xa(t)}function hi(t,e){return t>e}function _i(t,e){return null!=t&&Ec.call(t,e)}function Ti(t,e){return null!=t&&e in dc(t)}function ki(t,e,n){return t>=Qc(e,n)&&t<Xc(e,n)}function Ci(t,e,n){for(var i=n?p:f,r=t[0].length,a=t.length,o=a,s=oc(a),u=1/0,l=[];o--;){var c=t[o];o&&e&&(c=v(c,N(e))),u=Qc(c.length,u),s[o]=!n&&(e||r>=120&&c.length>=120)?new yn(o&&c):rt}c=t[0];var d=-1,h=s[0];t:for(;++d<r&&l.length<u;){var m=c[d],g=e?e(m):m;if(m=n||0!==m?m:0,!(h?F(h,g):i(l,g,n))){for(o=a;--o;){var y=s[o];if(!(y?F(y,g):i(t[o],g,n)))continue t}h&&h.push(g),l.push(m)}}return l}function wi(t,e,n,i){return ni(t,function(t,r,a){e(i,n(t),r,a)}),i}function Ri(t,e,n){e=Cr(e,t),t=$a(t,e);var i=null==t?t:t[no(ko(e))];return null==i?rt:s(i,t,n)}function Ii(t){return lu(t)&&di(t)==Ht}function Li(t){return lu(t)&&di(t)==ce}function Di(t){return lu(t)&&di(t)==qt}function Pi(t,e,n,i,r){return t===e||(null==t||null==e||!lu(t)&&!lu(e)?t!==t&&e!==e:Oi(t,e,n,i,Pi,r))}function Oi(t,e,n,i,r,a){var o=Eh(t),s=Eh(e),u=o?Vt:Ld(t),l=s?Vt:Ld(e);u=u==Ht?te:u,l=l==Ht?te:l;var c=u==te,d=l==te,h=u==l;if(h&&bh(t)){if(!bh(e))return!1;o=!0,c=!1}if(h&&!c)return a||(a=new An),o||wh(t)?ma(t,e,n,i,r,a):ga(t,e,u,n,i,r,a);if(!(n&vt)){var f=c&&Ec.call(t,"__wrapped__"),p=d&&Ec.call(e,"__wrapped__");if(f||p){var v=f?t.value():t,m=p?e.value():e;return a||(a=new An),r(v,m,n,i,a)}}return!!h&&(a||(a=new An),ya(t,e,n,i,r,a))}function Mi(t){return lu(t)&&Ld(t)==$t}function Ni(t,e,n,i){var r=n.length,a=r,o=!i;if(null==t)return!a;for(t=dc(t);r--;){var s=n[r];if(o&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++r<a;){s=n[r];var u=s[0],l=t[u],c=s[1];if(o&&s[2]){if(l===rt&&!(u in t))return!1}else{var d=new An;if(i)var h=i(l,c,u,t,e,d);if(!(h===rt?Pi(c,l,vt|mt,i,d):h))return!1}}return!0}function xi(t){if(!uu(t)||Ha(t))return!1;var e=au(t)?Cc:Xe;return e.test(io(t))}function Fi(t){return lu(t)&&di(t)==ie}function Ui(t){return lu(t)&&Ld(t)==re}function Bi(t){return lu(t)&&su(t.length)&&!!$n[di(t)]}function Gi(t){return"function"==typeof t?t:null==t?Ml:"object"==typeof t?Eh(t)?qi(t[0],t[1]):Ki(t):Hl(t)}function ji(t){if(!Va(t))return zc(t);var e=[];for(var n in dc(t))Ec.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Hi(t){if(!uu(t))return za(t);var e=Va(t),n=[];for(var i in t)("constructor"!=i||!e&&Ec.call(t,i))&&n.push(i);return n}function Vi(t,e){return t<e}function Wi(t,e){var n=-1,i=Qs(t)?oc(t.length):[];return yd(t,function(t,r,a){i[++n]=e(t,r,a)}),i}function Ki(t){var e=Ca(t);return 1==e.length&&e[0][2]?Ka(e[0][0],e[0][1]):function(n){return n===t||Ni(n,t,e)}}function qi(t,e){return Ba(t)&&Wa(e)?Ka(no(t),e):function(n){var i=ju(n,t);return i===rt&&i===e?Vu(n,t):Pi(e,i,vt|mt)}}function Yi(t,e,n,i,r){t!==e&&Ed(e,function(a,o){if(uu(a))r||(r=new An),zi(t,e,o,n,Yi,i,r);else{var s=i?i(t[o],a,o+"",t,e,r):rt;s===rt&&(s=a),Dn(t,o,s)}},Ku)}function zi(t,e,n,i,r,a,o){var s=t[n],u=e[n],l=o.get(u);if(l)return void Dn(t,n,l);var c=a?a(s,u,n+"",t,e,o):rt,d=c===rt;if(d){var h=Eh(u),f=!h&&bh(u),p=!h&&!f&&wh(u);c=u,h||f||p?Eh(s)?c=s:$s(s)?c=Gr(s):f?(d=!1,c=Rr(u,!0)):p?(d=!1,c=Nr(u,!0)):c=[]:gu(u)||_h(u)?(c=s,_h(s)?c=Iu(s):(!uu(s)||i&&au(s))&&(c=Oa(u))):d=!1}d&&(o.set(u,c),r(c,u,i,a,o),o.delete(u)),Dn(t,n,c)}function Xi(t,e){var n=t.length;if(n)return e+=e<0?n:0,Fa(e,n)?t[e]:rt}function Qi(t,e,n){var i=-1;e=v(e.length?e:[Ml],N(Sa()));var r=Wi(t,function(t,n,r){var a=v(e,function(e){return e(t)});return{criteria:a,index:++i,value:t}});return D(r,function(t,e){return Fr(t,e,n)})}function $i(t,e){return Ji(t,e,function(e,n){return Vu(t,n)})}function Ji(t,e,n){for(var i=-1,r=e.length,a={};++i<r;){var o=e[i],s=ui(t,o);n(s,o)&&ur(a,Cr(o,t),s)}return a}function Zi(t){return function(e){return ui(e,t)}}function tr(t,e,n,i){var r=i?k:S,a=-1,o=e.length,s=t;for(t===e&&(e=Gr(e)),n&&(s=v(t,N(n)));++a<o;)for(var u=0,l=e[a],c=n?n(l):l;(u=r(s,c,u,i))>-1;)s!==t&&Mc.call(s,u,1),Mc.call(t,u,1);return t}function er(t,e){for(var n=t?e.length:0,i=n-1;n--;){var r=e[n];if(n==i||r!==a){var a=r;Fa(r)?Mc.call(t,r,1):yr(t,r)}}return t}function nr(t,e){return t+Vc(Zc()*(e-t+1))}function ir(t,e,n,i){for(var r=-1,a=Xc(Hc((e-t)/(n||1)),0),o=oc(a);a--;)o[i?a:++r]=t,t+=n;return o}function rr(t,e){var n="";if(!t||e<1||e>Nt)return n;do e%2&&(n+=t),e=Vc(e/2),e&&(t+=t);while(e);return n}function ar(t,e){return Md(Qa(t,e,Ml),t+"")}function or(t){return Rn(il(t))}function sr(t,e){var n=il(t);return eo(n,Bn(e,0,n.length))}function ur(t,e,n,i){if(!uu(t))return t;e=Cr(e,t);for(var r=-1,a=e.length,o=a-1,s=t;null!=s&&++r<a;){var u=no(e[r]),l=n;if(r!=o){var c=s[u];l=i?i(c,u,s):rt,l===rt&&(l=uu(c)?c:Fa(e[r+1])?[]:{})}Pn(s,u,l),s=s[u]}return t}function lr(t){return eo(il(t))}function cr(t,e,n){var i=-1,r=t.length;e<0&&(e=-e>r?0:r+e),n=n>r?r:n,n<0&&(n+=r),r=e>n?0:n-e>>>0,e>>>=0;for(var a=oc(r);++i<r;)a[i]=t[i+e];return a}function dr(t,e){var n;return yd(t,function(t,i,r){return n=e(t,i,r),!n}),!!n}function hr(t,e,n){var i=0,r=null==t?i:t.length;if("number"==typeof e&&e===e&&r<=Gt){for(;i<r;){var a=i+r>>>1,o=t[a];null!==o&&!Eu(o)&&(n?o<=e:o<e)?i=a+1:r=a}return r}return fr(t,e,Ml,n)}function fr(t,e,n,i){e=n(e);for(var r=0,a=null==t?0:t.length,o=e!==e,s=null===e,u=Eu(e),l=e===rt;r<a;){var c=Vc((r+a)/2),d=n(t[c]),h=d!==rt,f=null===d,p=d===d,v=Eu(d);if(o)var m=i||p;else m=l?p&&(i||h):s?p&&h&&(i||!f):u?p&&h&&!f&&(i||!v):!f&&!v&&(i?d<=e:d<e);m?r=c+1:a=c}return Qc(a,Bt)}function pr(t,e){for(var n=-1,i=t.length,r=0,a=[];++n<i;){var o=t[n],s=e?e(o):o;if(!n||!Xs(s,u)){var u=s;a[r++]=0===o?0:o}}return a}function vr(t){return"number"==typeof t?t:Eu(t)?Ft:+t}function mr(t){if("string"==typeof t)return t;if(Eh(t))return v(t,mr)+"";if(Eu(t))return md?md.call(t):"";var e=t+"";return"0"==e&&1/t==-Mt?"-0":e}function gr(t,e,n){var i=-1,r=f,a=t.length,o=!0,s=[],u=s;if(n)o=!1,r=p;else if(a>=ot){var l=e?null:Cd(t);if(l)return X(l);o=!1,r=F,u=new yn}else u=e?[]:s;t:for(;++i<a;){var c=t[i],d=e?e(c):c;if(c=n||0!==c?c:0,o&&d===d){for(var h=u.length;h--;)if(u[h]===d)continue t;e&&u.push(d),s.push(c)}else r(u,d,n)||(u!==s&&u.push(d),s.push(c))}return s}function yr(t,e){return e=Cr(e,t),t=$a(t,e),null==t||delete t[no(ko(e))]}function _r(t,e,n,i){return ur(t,e,n(ui(t,e)),i)}function Er(t,e,n,i){for(var r=t.length,a=i?r:-1;(i?a--:++a<r)&&e(t[a],a,t););return n?cr(t,i?0:a,i?a+1:r):cr(t,i?a+1:0,i?r:a)}function Ar(t,e){var n=t;return n instanceof E&&(n=n.value()),g(e,function(t,e){return e.func.apply(e.thisArg,m([t],e.args))},n)}function br(t,e,n){var i=t.length;if(i<2)return i?gr(t[0]):[];for(var r=-1,a=oc(i);++r<i;)for(var o=t[r],s=-1;++s<i;)s!=r&&(a[r]=qn(a[r]||o,t[s],e,n));return gr(ei(a,1),e,n)}function Tr(t,e,n){for(var i=-1,r=t.length,a=e.length,o={};++i<r;){var s=i<a?e[i]:rt;n(o,t[i],s)}return o}function Sr(t){return $s(t)?t:[]}function kr(t){return"function"==typeof t?t:Ml}function Cr(t,e){return Eh(t)?t:Ba(t,e)?[t]:Nd(Du(t))}function wr(t,e,n){var i=t.length;return n=n===rt?i:n,!e&&n>=i?t:cr(t,e,n)}function Rr(t,e){if(e)return t.slice();var n=t.length,i=Lc?Lc(n):new t.constructor(n);return t.copy(i),i}function Ir(t){var e=new t.constructor(t.byteLength);return new Ic(e).set(new Ic(t)),e}function Lr(t,e){var n=e?Ir(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}function Dr(t,e,n){var i=e?n(q(t),ht):q(t);return g(i,a,new t.constructor)}function Pr(t){var e=new t.constructor(t.source,qe.exec(t));return e.lastIndex=t.lastIndex,e}function Or(t,e,n){var i=e?n(X(t),ht):X(t);return g(i,o,new t.constructor)}function Mr(t){return vd?dc(vd.call(t)):{}}function Nr(t,e){var n=e?Ir(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function xr(t,e){if(t!==e){var n=t!==rt,i=null===t,r=t===t,a=Eu(t),o=e!==rt,s=null===e,u=e===e,l=Eu(e);if(!s&&!l&&!a&&t>e||a&&o&&u&&!s&&!l||i&&o&&u||!n&&u||!r)return 1;if(!i&&!a&&!l&&t<e||l&&n&&r&&!i&&!a||s&&n&&r||!o&&r||!u)return-1}return 0}function Fr(t,e,n){for(var i=-1,r=t.criteria,a=e.criteria,o=r.length,s=n.length;++i<o;){var u=xr(r[i],a[i]);if(u){if(i>=s)return u;var l=n[i];return u*("desc"==l?-1:1)}}return t.index-e.index}function Ur(t,e,n,i){for(var r=-1,a=t.length,o=n.length,s=-1,u=e.length,l=Xc(a-o,0),c=oc(u+l),d=!i;++s<u;)c[s]=e[s];for(;++r<o;)(d||r<a)&&(c[n[r]]=t[r]);for(;l--;)c[s++]=t[r++];return c}function Br(t,e,n,i){for(var r=-1,a=t.length,o=-1,s=n.length,u=-1,l=e.length,c=Xc(a-s,0),d=oc(c+l),h=!i;++r<c;)d[r]=t[r];for(var f=r;++u<l;)d[f+u]=e[u];for(;++o<s;)(h||r<a)&&(d[f+n[o]]=t[r++]);return d}function Gr(t,e){var n=-1,i=t.length;for(e||(e=oc(i));++n<i;)e[n]=t[n];return e}function jr(t,e,n,i){var r=!n;n||(n={});for(var a=-1,o=e.length;++a<o;){var s=e[a],u=i?i(n[s],t[s],s,n,t):rt;u===rt&&(u=t[s]),r?Fn(n,s,u):Pn(n,s,u)}return n}function Hr(t,e){return jr(t,Rd(t),e)}function Vr(t,e){return jr(t,Id(t),e)}function Wr(t,e){return function(n,i){var r=Eh(n)?u:Mn,a=e?e():{};return r(n,t,Sa(i,2),a)}}function Kr(t){return ar(function(e,n){var i=-1,r=n.length,a=r>1?n[r-1]:rt,o=r>2?n[2]:rt;for(a=t.length>3&&"function"==typeof a?(r--,a):rt,o&&Ua(n[0],n[1],o)&&(a=r<3?rt:a,r=1),e=dc(e);++i<r;){var s=n[i];s&&t(e,s,i,a)}return e})}function qr(t,e){return function(n,i){if(null==n)return n;if(!Qs(n))return t(n,i);for(var r=n.length,a=e?r:-1,o=dc(n);(e?a--:++a<r)&&i(o[a],a,o)!==!1;);return n}}function Yr(t){return function(e,n,i){for(var r=-1,a=dc(e),o=i(e),s=o.length;s--;){var u=o[t?s:++r];if(n(a[u],u,a)===!1)break}return e}}function zr(t,e,n){function i(){var e=this&&this!==si&&this instanceof i?a:t;return e.apply(r?n:this,arguments)}var r=e&gt,a=$r(t);return i}function Xr(t){return function(e){e=Du(e);var n=V(e)?tt(e):rt,i=n?n[0]:e.charAt(0),r=n?wr(n,1).join(""):e.slice(1);return i[t]()+r}}function Qr(t){return function(e){return g(Il(ll(e).replace(Vn,"")),t,"")}}function $r(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=gd(t.prototype),i=t.apply(n,e);return uu(i)?i:n}}function Jr(t,e,n){function i(){for(var a=arguments.length,o=oc(a),u=a,l=Ta(i);u--;)o[u]=arguments[u];var c=a<3&&o[0]!==l&&o[a-1]!==l?[]:z(o,l);if(a-=c.length,a<n)return la(t,e,ea,i.placeholder,rt,o,c,rt,rt,n-a);var d=this&&this!==si&&this instanceof i?r:t;return s(d,this,o)}var r=$r(t);return i}function Zr(t){return function(e,n,i){var r=dc(e);if(!Qs(e)){var a=Sa(n,3);e=Wu(e),n=function(t){return a(r[t],t,r)}}var o=t(e,n,i);return o>-1?r[a?e[o]:o]:rt}}function ta(t){return _a(function(e){var n=e.length,i=n,a=r.prototype.thru;for(t&&e.reverse();i--;){var o=e[i];if("function"!=typeof o)throw new pc(ut);if(a&&!s&&"wrapper"==ba(o))var s=new r([],!0)}for(i=s?i:n;++i<n;){o=e[i];var u=ba(o),l="wrapper"==u?wd(o):rt;s=l&&ja(l[0])&&l[1]==(St|Et|bt|kt)&&!l[4].length&&1==l[9]?s[ba(l[0])].apply(s,l[3]):1==o.length&&ja(o)?s[u]():s.thru(o)}return function(){var t=arguments,i=t[0];if(s&&1==t.length&&Eh(i))return s.plant(i).value();for(var r=0,a=n?e[r].apply(this,t):i;++r<n;)a=e[r].call(this,a);return a}})}function ea(t,e,n,i,r,a,o,s,u,l){function c(){for(var g=arguments.length,y=oc(g),_=g;_--;)y[_]=arguments[_];if(p)var E=Ta(c),A=G(y,E);if(i&&(y=Ur(y,i,r,p)),a&&(y=Br(y,a,o,p)),g-=A,p&&g<l){var b=z(y,E);return la(t,e,ea,c.placeholder,n,y,b,s,u,l-g)}var T=h?n:this,S=f?T[t]:t;return g=y.length,s?y=Ja(y,s):v&&g>1&&y.reverse(),d&&u<g&&(y.length=u),this&&this!==si&&this instanceof c&&(S=m||$r(S)),S.apply(T,y)}var d=e&St,h=e&gt,f=e&yt,p=e&(Et|At),v=e&Ct,m=f?rt:$r(t);return c}function na(t,e){return function(n,i){return wi(n,t,e(i),{})}}function ia(t,e){return function(n,i){var r;if(n===rt&&i===rt)return e;if(n!==rt&&(r=n),i!==rt){if(r===rt)return i;"string"==typeof n||"string"==typeof i?(n=mr(n),i=mr(i)):(n=vr(n),i=vr(i)),r=t(n,i)}return r}}function ra(t){return _a(function(e){return e=v(e,N(Sa())),ar(function(n){var i=this;return t(e,function(t){return s(t,i,n)})})})}function aa(t,e){e=e===rt?" ":mr(e);var n=e.length;if(n<2)return n?rr(e,t):e;var i=rr(e,Hc(t/Z(e)));return V(e)?wr(tt(i),0,t).join(""):i.slice(0,t)}function oa(t,e,n,i){function r(){for(var e=-1,u=arguments.length,l=-1,c=i.length,d=oc(c+u),h=this&&this!==si&&this instanceof r?o:t;++l<c;)d[l]=i[l];for(;u--;)d[l++]=arguments[++e];return s(h,a?n:this,d)}var a=e&gt,o=$r(t);return r}function sa(t){return function(e,n,i){return i&&"number"!=typeof i&&Ua(e,n,i)&&(n=i=rt),e=ku(e),n===rt?(n=e,e=0):n=ku(n),i=i===rt?e<n?1:-1:ku(i),ir(e,n,i,t)}}function ua(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=Ru(e),n=Ru(n)),t(e,n)}}function la(t,e,n,i,r,a,o,s,u,l){var c=e&Et,d=c?o:rt,h=c?rt:o,f=c?a:rt,p=c?rt:a;e|=c?bt:Tt,e&=~(c?Tt:bt),e&_t||(e&=~(gt|yt));var v=[t,e,r,f,d,p,h,s,u,l],m=n.apply(rt,v);return ja(t)&&Pd(m,v),m.placeholder=i,Za(m,t,e)}function ca(t){var e=cc[t];return function(t,n){if(t=Ru(t),n=null==n?0:Qc(Cu(n),292)){var i=(Du(t)+"e").split("e"),r=e(i[0]+"e"+(+i[1]+n));return i=(Du(r)+"e").split("e"),+(i[0]+"e"+(+i[1]-n))}return e(t)}}function da(t){return function(e){var n=Ld(e);return n==$t?q(e):n==re?Q(e):M(e,t(e))}}function ha(t,e,n,i,r,a,o,s){var u=e&yt;if(!u&&"function"!=typeof t)throw new pc(ut);var l=i?i.length:0;if(l||(e&=~(bt|Tt),i=r=rt),o=o===rt?o:Xc(Cu(o),0),s=s===rt?s:Cu(s),l-=r?r.length:0,e&Tt){var c=i,d=r;i=r=rt}var h=u?rt:wd(t),f=[t,e,n,i,r,c,d,a,o,s];if(h&&Ya(f,h),t=f[0],e=f[1],n=f[2],i=f[3],r=f[4],s=f[9]=f[9]===rt?u?0:t.length:Xc(f[9]-l,0),!s&&e&(Et|At)&&(e&=~(Et|At)),e&&e!=gt)p=e==Et||e==At?Jr(t,e,s):e!=bt&&e!=(gt|bt)||r.length?ea.apply(rt,f):oa(t,e,n,i);else var p=zr(t,e,n);var v=h?bd:Pd;return Za(v(p,f),t,e)}function fa(t,e,n,i){return t===rt||Xs(t,gc[n])&&!Ec.call(i,n)?e:t}function pa(t,e,n,i,r,a){return uu(t)&&uu(e)&&(a.set(e,t),Yi(t,e,rt,pa,a),a.delete(e)),t}function va(t){return gu(t)?rt:t}function ma(t,e,n,i,r,a){var o=n&vt,s=t.length,u=e.length;if(s!=u&&!(o&&u>s))return!1;var l=a.get(t);if(l&&a.get(e))return l==e;var c=-1,d=!0,h=n&mt?new yn:rt;for(a.set(t,e),a.set(e,t);++c<s;){var f=t[c],p=e[c];if(i)var v=o?i(p,f,c,e,t,a):i(f,p,c,t,e,a);if(v!==rt){if(v)continue;d=!1;break}if(h){if(!_(e,function(t,e){if(!F(h,e)&&(f===t||r(f,t,n,i,a)))return h.push(e)})){d=!1;break}}else if(f!==p&&!r(f,p,n,i,a)){d=!1;break}}return a.delete(t),a.delete(e),d}function ga(t,e,n,i,r,a,o){switch(n){case de:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case ce:return!(t.byteLength!=e.byteLength||!a(new Ic(t),new Ic(e)));case Kt:case qt:case Jt:return Xs(+t,+e);case zt:return t.name==e.name&&t.message==e.message;case ie:case ae:return t==e+"";case $t:var s=q;case re:var u=i&vt;if(s||(s=X),t.size!=e.size&&!u)return!1;var l=o.get(t);if(l)return l==e;i|=mt,o.set(t,e);var c=ma(s(t),s(e),i,r,a,o);return o.delete(t),c;case oe:if(vd)return vd.call(t)==vd.call(e)}return!1}function ya(t,e,n,i,r,a){var o=n&vt,s=Ea(t),u=s.length,l=Ea(e),c=l.length;if(u!=c&&!o)return!1;for(var d=u;d--;){var h=s[d];if(!(o?h in e:Ec.call(e,h)))return!1}var f=a.get(t);if(f&&a.get(e))return f==e;var p=!0;a.set(t,e),a.set(e,t);for(var v=o;++d<u;){h=s[d];var m=t[h],g=e[h];if(i)var y=o?i(g,m,h,e,t,a):i(m,g,h,t,e,a);if(!(y===rt?m===g||r(m,g,n,i,a):y)){p=!1;break}v||(v="constructor"==h)}if(p&&!v){var _=t.constructor,E=e.constructor;_!=E&&"constructor"in t&&"constructor"in e&&!("function"==typeof _&&_ instanceof _&&"function"==typeof E&&E instanceof E)&&(p=!1)}return a.delete(t),a.delete(e),p}function _a(t){return Md(Qa(t,rt,go),t+"")}function Ea(t){return li(t,Wu,Rd)}function Aa(t){return li(t,Ku,Id)}function ba(t){for(var e=t.name+"",n=ud[e],i=Ec.call(ud,e)?n.length:0;i--;){var r=n[i],a=r.func;if(null==a||a==t)return r.name}return e}function Ta(t){var e=Ec.call(n,"placeholder")?n:t;return e.placeholder}function Sa(){var t=n.iteratee||Nl;return t=t===Nl?Gi:t,arguments.length?t(arguments[0],arguments[1]):t}function ka(t,e){var n=t.__data__;return Ga(e)?n["string"==typeof e?"string":"hash"]:n.map}function Ca(t){for(var e=Wu(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,Wa(r)]}return e}function wa(t,e){var n=H(t,e);return xi(n)?n:rt}function Ra(t){var e=Ec.call(t,Fc),n=t[Fc];try{t[Fc]=rt;var i=!0}catch(t){}var r=Tc.call(t);return i&&(e?t[Fc]=n:delete t[Fc]),r}function Ia(t,e,n){for(var i=-1,r=n.length;++i<r;){var a=n[i],o=a.size;switch(a.type){case"drop":t+=o;break;case"dropRight":e-=o;break;case"take":e=Qc(e,t+o);break;case"takeRight":t=Xc(t,e-o)}}return{start:t,end:e}}function La(t){var e=t.match(je);return e?e[1].split(He):[]}function Da(t,e,n){e=Cr(e,t);for(var i=-1,r=e.length,a=!1;++i<r;){var o=no(e[i]);if(!(a=null!=t&&n(t,o)))break;t=t[o]}return a||++i!=r?a:(r=null==t?0:t.length,!!r&&su(r)&&Fa(o,r)&&(Eh(t)||_h(t)))}function Pa(t){var e=t.length,n=t.constructor(e);return e&&"string"==typeof t[0]&&Ec.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function Oa(t){return"function"!=typeof t.constructor||Va(t)?{}:gd(Dc(t))}function Ma(t,e,n,i){var r=t.constructor;switch(e){case ce:return Ir(t);case Kt:case qt:return new r(+t);case de:return Lr(t,i);case he:case fe:case pe:case ve:case me:case ge:case ye:case _e:case Ee:return Nr(t,i);case $t:return Dr(t,i,n);case Jt:case ae:return new r(t);case ie:return Pr(t);case re:return Or(t,i,n);case oe:return Mr(t)}}function Na(t,e){var n=e.length;if(!n)return t;var i=n-1;return e[i]=(n>1?"& ":"")+e[i],e=e.join(n>2?", ":" "),t.replace(Ge,"{\n/* [wrapped with "+e+"] */\n")}function xa(t){return Eh(t)||_h(t)||!!(Nc&&t&&t[Nc])}function Fa(t,e){return e=null==e?Nt:e,!!e&&("number"==typeof t||$e.test(t))&&t>-1&&t%1==0&&t<e}function Ua(t,e,n){if(!uu(n))return!1;var i=typeof e;return!!("number"==i?Qs(n)&&Fa(e,n.length):"string"==i&&e in n)&&Xs(n[e],t)}function Ba(t,e){if(Eh(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Eu(t))||(Pe.test(t)||!De.test(t)||null!=e&&t in dc(e))}function Ga(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function ja(t){var e=ba(t),i=n[e];if("function"!=typeof i||!(e in E.prototype))return!1;if(t===i)return!0;var r=wd(i);return!!r&&t===r[0]}function Ha(t){return!!bc&&bc in t}function Va(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||gc;return t===n}function Wa(t){return t===t&&!uu(t)}function Ka(t,e){return function(n){return null!=n&&(n[t]===e&&(e!==rt||t in dc(n)))}}function qa(t){var e=Ns(t,function(t){return n.size===ct&&n.clear(),t}),n=e.cache;return e}function Ya(t,e){var n=t[1],i=e[1],r=n|i,a=r<(gt|yt|St),o=i==St&&n==Et||i==St&&n==kt&&t[7].length<=e[8]||i==(St|kt)&&e[7].length<=e[8]&&n==Et;if(!a&&!o)return t;i&gt&&(t[2]=e[2],r|=n&gt?0:_t);var s=e[3];if(s){var u=t[3];t[3]=u?Ur(u,s,e[4]):s,t[4]=u?z(t[3],dt):e[4]}return s=e[5],s&&(u=t[5],t[5]=u?Br(u,s,e[6]):s,t[6]=u?z(t[5],dt):e[6]),s=e[7],s&&(t[7]=s),i&St&&(t[8]=null==t[8]?e[8]:Qc(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=r,t}function za(t){var e=[];if(null!=t)for(var n in dc(t))e.push(n);return e}function Xa(t){return Tc.call(t)}function Qa(t,e,n){return e=Xc(e===rt?t.length-1:e,0),function(){for(var i=arguments,r=-1,a=Xc(i.length-e,0),o=oc(a);++r<a;)o[r]=i[e+r];r=-1;for(var u=oc(e+1);++r<e;)u[r]=i[r];return u[e]=n(o),s(t,this,u)}}function $a(t,e){return e.length<2?t:ui(t,cr(e,0,-1))}function Ja(t,e){for(var n=t.length,i=Qc(e.length,n),r=Gr(t);i--;){var a=e[i];t[i]=Fa(a,n)?r[a]:rt}return t}function Za(t,e,n){var i=e+"";return Md(t,Na(i,ro(La(i),n)))}function to(t){var e=0,n=0;return function(){var i=$c(),r=Lt-(i-n);if(n=i,r>0){if(++e>=It)return arguments[0]}else e=0;return t.apply(rt,arguments)}}function eo(t,e){var n=-1,i=t.length,r=i-1;for(e=e===rt?i:e;++n<e;){var a=nr(n,r),o=t[a];t[a]=t[n],t[n]=o}return t.length=e,t}function no(t){if("string"==typeof t||Eu(t))return t;var e=t+"";return"0"==e&&1/t==-Mt?"-0":e}function io(t){if(null!=t){try{return _c.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function ro(t,e){return l(jt,function(n){var i="_."+n[0];e&n[1]&&!f(t,i)&&t.push(i)}),t.sort()}function ao(t){if(t instanceof E)return t.clone();var e=new r(t.__wrapped__,t.__chain__);return e.__actions__=Gr(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function oo(t,e,n){e=(n?Ua(t,e,n):e===rt)?1:Xc(Cu(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var r=0,a=0,o=oc(Hc(i/e));r<i;)o[a++]=cr(t,r,r+=e);return o}function so(t){for(var e=-1,n=null==t?0:t.length,i=0,r=[];++e<n;){var a=t[e];a&&(r[i++]=a)}return r}function uo(){var t=arguments.length;if(!t)return[];for(var e=oc(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return m(Eh(n)?Gr(n):[n],ei(e,1))}function lo(t,e,n){var i=null==t?0:t.length;return i?(e=n||e===rt?1:Cu(e),cr(t,e<0?0:e,i)):[]}function co(t,e,n){var i=null==t?0:t.length;return i?(e=n||e===rt?1:Cu(e),e=i-e,cr(t,0,e<0?0:e)):[]}function ho(t,e){return t&&t.length?Er(t,Sa(e,3),!0,!0):[]}function fo(t,e){return t&&t.length?Er(t,Sa(e,3),!0):[]}function po(t,e,n,i){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&Ua(t,e,n)&&(n=0,i=r),Zn(t,e,n,i)):[]}function vo(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:Cu(n);return r<0&&(r=Xc(i+r,0)),T(t,Sa(e,3),r)}function mo(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=i-1;return n!==rt&&(r=Cu(n),r=n<0?Xc(i+r,0):Qc(r,i-1)),T(t,Sa(e,3),r,!0)}function go(t){var e=null==t?0:t.length;return e?ei(t,1):[]}function yo(t){var e=null==t?0:t.length;return e?ei(t,Mt):[]}function _o(t,e){var n=null==t?0:t.length;return n?(e=e===rt?1:Cu(e),ei(t,e)):[]}function Eo(t){for(var e=-1,n=null==t?0:t.length,i={};++e<n;){var r=t[e];i[r[0]]=r[1]}return i}function Ao(t){return t&&t.length?t[0]:rt}function bo(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:Cu(n);return r<0&&(r=Xc(i+r,0)),S(t,e,r)}function To(t){var e=null==t?0:t.length;return e?cr(t,0,-1):[]}function So(t,e){return null==t?"":Yc.call(t,e)}function ko(t){var e=null==t?0:t.length;return e?t[e-1]:rt}function Co(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=i;return n!==rt&&(r=Cu(n),r=r<0?Xc(i+r,0):Qc(r,i-1)),e===e?J(t,e,r):T(t,C,r,!0)}function wo(t,e){return t&&t.length?Xi(t,Cu(e)):rt}function Ro(t,e){return t&&t.length&&e&&e.length?tr(t,e):t}function Io(t,e,n){return t&&t.length&&e&&e.length?tr(t,e,Sa(n,2)):t}function Lo(t,e,n){return t&&t.length&&e&&e.length?tr(t,e,rt,n):t}function Do(t,e){var n=[];if(!t||!t.length)return n;var i=-1,r=[],a=t.length;for(e=Sa(e,3);++i<a;){var o=t[i];e(o,i,t)&&(n.push(o),r.push(i))}return er(t,r),n}function Po(t){return null==t?t:td.call(t)}function Oo(t,e,n){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&Ua(t,e,n)?(e=0,n=i):(e=null==e?0:Cu(e),n=n===rt?i:Cu(n)),cr(t,e,n)):[]}function Mo(t,e){return hr(t,e)}function No(t,e,n){return fr(t,e,Sa(n,2))}function xo(t,e){var n=null==t?0:t.length;if(n){var i=hr(t,e);if(i<n&&Xs(t[i],e))return i}return-1}function Fo(t,e){return hr(t,e,!0)}function Uo(t,e,n){return fr(t,e,Sa(n,2),!0)}function Bo(t,e){var n=null==t?0:t.length;if(n){var i=hr(t,e,!0)-1;if(Xs(t[i],e))return i}return-1}function Go(t){return t&&t.length?pr(t):[]}function jo(t,e){return t&&t.length?pr(t,Sa(e,2)):[]}function Ho(t){var e=null==t?0:t.length;return e?cr(t,1,e):[]}function Vo(t,e,n){return t&&t.length?(e=n||e===rt?1:Cu(e),cr(t,0,e<0?0:e)):[]}function Wo(t,e,n){var i=null==t?0:t.length;return i?(e=n||e===rt?1:Cu(e),e=i-e,cr(t,e<0?0:e,i)):[]}function Ko(t,e){return t&&t.length?Er(t,Sa(e,3),!1,!0):[]}function qo(t,e){return t&&t.length?Er(t,Sa(e,3)):[]}function Yo(t){return t&&t.length?gr(t):[]}function zo(t,e){return t&&t.length?gr(t,Sa(e,2)):[]}function Xo(t,e){return e="function"==typeof e?e:rt,t&&t.length?gr(t,rt,e):[]}function Qo(t){if(!t||!t.length)return[];var e=0;return t=h(t,function(t){if($s(t))return e=Xc(t.length,e),!0}),O(e,function(e){return v(t,R(e))})}function $o(t,e){if(!t||!t.length)return[];var n=Qo(t);return null==e?n:v(n,function(t){return s(e,rt,t)})}function Jo(t,e){return Tr(t||[],e||[],Pn)}function Zo(t,e){return Tr(t||[],e||[],ur)}function ts(t){var e=n(t);return e.__chain__=!0,e}function es(t,e){return e(t),t}function ns(t,e){return e(t)}function is(){return ts(this)}function rs(){return new r(this.value(),this.__chain__)}function as(){this.__values__===rt&&(this.__values__=Su(this.value()));var t=this.__index__>=this.__values__.length,e=t?rt:this.__values__[this.__index__++];return{done:t,value:e}}function os(){return this}function ss(t){for(var e,n=this;n instanceof i;){var r=ao(n);r.__index__=0,r.__values__=rt,e?a.__wrapped__=r:e=r;var a=r;n=n.__wrapped__}return a.__wrapped__=t,e}function us(){var t=this.__wrapped__;if(t instanceof E){var e=t;return this.__actions__.length&&(e=new E(this)),e=e.reverse(),e.__actions__.push({func:ns,args:[Po],thisArg:rt}),new r(e,this.__chain__)}return this.thru(Po)}function ls(){return Ar(this.__wrapped__,this.__actions__)}function cs(t,e,n){var i=Eh(t)?d:Yn;return n&&Ua(t,e,n)&&(e=rt),i(t,Sa(e,3))}function ds(t,e){var n=Eh(t)?h:ti;return n(t,Sa(e,3))}function hs(t,e){return ei(ys(t,e),1)}function fs(t,e){return ei(ys(t,e),Mt)}function ps(t,e,n){return n=n===rt?1:Cu(n),ei(ys(t,e),n)}function vs(t,e){var n=Eh(t)?l:yd;return n(t,Sa(e,3))}function ms(t,e){var n=Eh(t)?c:_d;return n(t,Sa(e,3))}function gs(t,e,n,i){t=Qs(t)?t:il(t),n=n&&!i?Cu(n):0;var r=t.length;return n<0&&(n=Xc(r+n,0)),_u(t)?n<=r&&t.indexOf(e,n)>-1:!!r&&S(t,e,n)>-1}function ys(t,e){var n=Eh(t)?v:Wi;return n(t,Sa(e,3))}function _s(t,e,n,i){return null==t?[]:(Eh(e)||(e=null==e?[]:[e]),n=i?rt:n,Eh(n)||(n=null==n?[]:[n]),Qi(t,e,n))}function Es(t,e,n){var i=Eh(t)?g:L,r=arguments.length<3;return i(t,Sa(e,4),n,r,yd)}function As(t,e,n){var i=Eh(t)?y:L,r=arguments.length<3;return i(t,Sa(e,4),n,r,_d)}function bs(t,e){var n=Eh(t)?h:ti;return n(t,xs(Sa(e,3)))}function Ts(t){
var e=Eh(t)?Rn:or;return e(t)}function Ss(t,e,n){e=(n?Ua(t,e,n):e===rt)?1:Cu(e);var i=Eh(t)?In:sr;return i(t,e)}function ks(t){var e=Eh(t)?Ln:lr;return e(t)}function Cs(t){if(null==t)return 0;if(Qs(t))return _u(t)?Z(t):t.length;var e=Ld(t);return e==$t||e==re?t.size:ji(t).length}function ws(t,e,n){var i=Eh(t)?_:dr;return n&&Ua(t,e,n)&&(e=rt),i(t,Sa(e,3))}function Rs(t,e){if("function"!=typeof e)throw new pc(ut);return t=Cu(t),function(){if(--t<1)return e.apply(this,arguments)}}function Is(t,e,n){return e=n?rt:e,e=t&&null==e?t.length:e,ha(t,St,rt,rt,rt,rt,e)}function Ls(t,e){var n;if("function"!=typeof e)throw new pc(ut);return t=Cu(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=rt),n}}function Ds(t,e,n){e=n?rt:e;var i=ha(t,Et,rt,rt,rt,rt,rt,e);return i.placeholder=Ds.placeholder,i}function Ps(t,e,n){e=n?rt:e;var i=ha(t,At,rt,rt,rt,rt,rt,e);return i.placeholder=Ps.placeholder,i}function Os(t,e,n){function i(e){var n=h,i=f;return h=f=rt,y=e,v=t.apply(i,n)}function r(t){return y=t,m=Od(s,e),_?i(t):v}function a(t){var n=t-g,i=t-y,r=e-n;return E?Qc(r,p-i):r}function o(t){var n=t-g,i=t-y;return g===rt||n>=e||n<0||E&&i>=p}function s(){var t=uh();return o(t)?u(t):void(m=Od(s,a(t)))}function u(t){return m=rt,A&&h?i(t):(h=f=rt,v)}function l(){m!==rt&&kd(m),y=0,h=g=f=m=rt}function c(){return m===rt?v:u(uh())}function d(){var t=uh(),n=o(t);if(h=arguments,f=this,g=t,n){if(m===rt)return r(g);if(E)return m=Od(s,e),i(g)}return m===rt&&(m=Od(s,e)),v}var h,f,p,v,m,g,y=0,_=!1,E=!1,A=!0;if("function"!=typeof t)throw new pc(ut);return e=Ru(e)||0,uu(n)&&(_=!!n.leading,E="maxWait"in n,p=E?Xc(Ru(n.maxWait)||0,e):p,A="trailing"in n?!!n.trailing:A),d.cancel=l,d.flush=c,d}function Ms(t){return ha(t,Ct)}function Ns(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new pc(ut);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],a=n.cache;if(a.has(r))return a.get(r);var o=t.apply(this,i);return n.cache=a.set(r,o)||a,o};return n.cache=new(Ns.Cache||hn),n}function xs(t){if("function"!=typeof t)throw new pc(ut);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function Fs(t){return Ls(2,t)}function Us(t,e){if("function"!=typeof t)throw new pc(ut);return e=e===rt?e:Cu(e),ar(t,e)}function Bs(t,e){if("function"!=typeof t)throw new pc(ut);return e=null==e?0:Xc(Cu(e),0),ar(function(n){var i=n[e],r=wr(n,0,e);return i&&m(r,i),s(t,this,r)})}function Gs(t,e,n){var i=!0,r=!0;if("function"!=typeof t)throw new pc(ut);return uu(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),Os(t,e,{leading:i,maxWait:e,trailing:r})}function js(t){return Is(t,1)}function Hs(t,e){return ph(kr(e),t)}function Vs(){if(!arguments.length)return[];var t=arguments[0];return Eh(t)?t:[t]}function Ws(t){return Gn(t,pt)}function Ks(t,e){return e="function"==typeof e?e:rt,Gn(t,pt,e)}function qs(t){return Gn(t,ht|pt)}function Ys(t,e){return e="function"==typeof e?e:rt,Gn(t,ht|pt,e)}function zs(t,e){return null==e||Hn(t,e,Wu(e))}function Xs(t,e){return t===e||t!==t&&e!==e}function Qs(t){return null!=t&&su(t.length)&&!au(t)}function $s(t){return lu(t)&&Qs(t)}function Js(t){return t===!0||t===!1||lu(t)&&di(t)==Kt}function Zs(t){return lu(t)&&1===t.nodeType&&!gu(t)}function tu(t){if(null==t)return!0;if(Qs(t)&&(Eh(t)||"string"==typeof t||"function"==typeof t.splice||bh(t)||wh(t)||_h(t)))return!t.length;var e=Ld(t);if(e==$t||e==re)return!t.size;if(Va(t))return!ji(t).length;for(var n in t)if(Ec.call(t,n))return!1;return!0}function eu(t,e){return Pi(t,e)}function nu(t,e,n){n="function"==typeof n?n:rt;var i=n?n(t,e):rt;return i===rt?Pi(t,e,rt,n):!!i}function iu(t){if(!lu(t))return!1;var e=di(t);return e==zt||e==Yt||"string"==typeof t.message&&"string"==typeof t.name&&!gu(t)}function ru(t){return"number"==typeof t&&qc(t)}function au(t){if(!uu(t))return!1;var e=di(t);return e==Xt||e==Qt||e==Wt||e==ne}function ou(t){return"number"==typeof t&&t==Cu(t)}function su(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Nt}function uu(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function lu(t){return null!=t&&"object"==typeof t}function cu(t,e){return t===e||Ni(t,e,Ca(e))}function du(t,e,n){return n="function"==typeof n?n:rt,Ni(t,e,Ca(e),n)}function hu(t){return mu(t)&&t!=+t}function fu(t){if(Dd(t))throw new uc(st);return xi(t)}function pu(t){return null===t}function vu(t){return null==t}function mu(t){return"number"==typeof t||lu(t)&&di(t)==Jt}function gu(t){if(!lu(t)||di(t)!=te)return!1;var e=Dc(t);if(null===e)return!0;var n=Ec.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&_c.call(n)==Sc}function yu(t){return ou(t)&&t>=-Nt&&t<=Nt}function _u(t){return"string"==typeof t||!Eh(t)&&lu(t)&&di(t)==ae}function Eu(t){return"symbol"==typeof t||lu(t)&&di(t)==oe}function Au(t){return t===rt}function bu(t){return lu(t)&&Ld(t)==ue}function Tu(t){return lu(t)&&di(t)==le}function Su(t){if(!t)return[];if(Qs(t))return _u(t)?tt(t):Gr(t);if(xc&&t[xc])return K(t[xc]());var e=Ld(t),n=e==$t?q:e==re?X:il;return n(t)}function ku(t){if(!t)return 0===t?t:0;if(t=Ru(t),t===Mt||t===-Mt){var e=t<0?-1:1;return e*xt}return t===t?t:0}function Cu(t){var e=ku(t),n=e%1;return e===e?n?e-n:e:0}function wu(t){return t?Bn(Cu(t),0,Ut):0}function Ru(t){if("number"==typeof t)return t;if(Eu(t))return Ft;if(uu(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=uu(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Fe,"");var n=ze.test(t);return n||Qe.test(t)?ri(t.slice(2),n?2:8):Ye.test(t)?Ft:+t}function Iu(t){return jr(t,Ku(t))}function Lu(t){return t?Bn(Cu(t),-Nt,Nt):0===t?t:0}function Du(t){return null==t?"":mr(t)}function Pu(t,e){var n=gd(t);return null==e?n:Nn(n,e)}function Ou(t,e){return b(t,Sa(e,3),ni)}function Mu(t,e){return b(t,Sa(e,3),ai)}function Nu(t,e){return null==t?t:Ed(t,Sa(e,3),Ku)}function xu(t,e){return null==t?t:Ad(t,Sa(e,3),Ku)}function Fu(t,e){return t&&ni(t,Sa(e,3))}function Uu(t,e){return t&&ai(t,Sa(e,3))}function Bu(t){return null==t?[]:oi(t,Wu(t))}function Gu(t){return null==t?[]:oi(t,Ku(t))}function ju(t,e,n){var i=null==t?rt:ui(t,e);return i===rt?n:i}function Hu(t,e){return null!=t&&Da(t,e,_i)}function Vu(t,e){return null!=t&&Da(t,e,Ti)}function Wu(t){return Qs(t)?wn(t):ji(t)}function Ku(t){return Qs(t)?wn(t,!0):Hi(t)}function qu(t,e){var n={};return e=Sa(e,3),ni(t,function(t,i,r){Fn(n,e(t,i,r),t)}),n}function Yu(t,e){var n={};return e=Sa(e,3),ni(t,function(t,i,r){Fn(n,i,e(t,i,r))}),n}function zu(t,e){return Xu(t,xs(Sa(e)))}function Xu(t,e){if(null==t)return{};var n=v(Aa(t),function(t){return[t]});return e=Sa(e),Ji(t,n,function(t,n){return e(t,n[0])})}function Qu(t,e,n){e=Cr(e,t);var i=-1,r=e.length;for(r||(r=1,t=rt);++i<r;){var a=null==t?rt:t[no(e[i])];a===rt&&(i=r,a=n),t=au(a)?a.call(t):a}return t}function $u(t,e,n){return null==t?t:ur(t,e,n)}function Ju(t,e,n,i){return i="function"==typeof i?i:rt,null==t?t:ur(t,e,n,i)}function Zu(t,e,n){var i=Eh(t),r=i||bh(t)||wh(t);if(e=Sa(e,4),null==n){var a=t&&t.constructor;n=r?i?new a:[]:uu(t)&&au(a)?gd(Dc(t)):{}}return(r?l:ni)(t,function(t,i,r){return e(n,t,i,r)}),n}function tl(t,e){return null==t||yr(t,e)}function el(t,e,n){return null==t?t:_r(t,e,kr(n))}function nl(t,e,n,i){return i="function"==typeof i?i:rt,null==t?t:_r(t,e,kr(n),i)}function il(t){return null==t?[]:x(t,Wu(t))}function rl(t){return null==t?[]:x(t,Ku(t))}function al(t,e,n){return n===rt&&(n=e,e=rt),n!==rt&&(n=Ru(n),n=n===n?n:0),e!==rt&&(e=Ru(e),e=e===e?e:0),Bn(Ru(t),e,n)}function ol(t,e,n){return e=ku(e),n===rt?(n=e,e=0):n=ku(n),t=Ru(t),ki(t,e,n)}function sl(t,e,n){if(n&&"boolean"!=typeof n&&Ua(t,e,n)&&(e=n=rt),n===rt&&("boolean"==typeof e?(n=e,e=rt):"boolean"==typeof t&&(n=t,t=rt)),t===rt&&e===rt?(t=0,e=1):(t=ku(t),e===rt?(e=t,t=0):e=ku(e)),t>e){var i=t;t=e,e=i}if(n||t%1||e%1){var r=Zc();return Qc(t+r*(e-t+ii("1e-"+((r+"").length-1))),e)}return nr(t,e)}function ul(t){return Zh(Du(t).toLowerCase())}function ll(t){return t=Du(t),t&&t.replace(Je,Ei).replace(Wn,"")}function cl(t,e,n){t=Du(t),e=mr(e);var i=t.length;n=n===rt?i:Bn(Cu(n),0,i);var r=n;return n-=e.length,n>=0&&t.slice(n,r)==e}function dl(t){return t=Du(t),t&&we.test(t)?t.replace(ke,Ai):t}function hl(t){return t=Du(t),t&&xe.test(t)?t.replace(Ne,"\\$&"):t}function fl(t,e,n){t=Du(t),e=Cu(e);var i=e?Z(t):0;if(!e||i>=e)return t;var r=(e-i)/2;return aa(Vc(r),n)+t+aa(Hc(r),n)}function pl(t,e,n){t=Du(t),e=Cu(e);var i=e?Z(t):0;return e&&i<e?t+aa(e-i,n):t}function vl(t,e,n){t=Du(t),e=Cu(e);var i=e?Z(t):0;return e&&i<e?aa(e-i,n)+t:t}function ml(t,e,n){return n||null==e?e=0:e&&(e=+e),Jc(Du(t).replace(Ue,""),e||0)}function gl(t,e,n){return e=(n?Ua(t,e,n):e===rt)?1:Cu(e),rr(Du(t),e)}function yl(){var t=arguments,e=Du(t[0]);return t.length<3?e:e.replace(t[1],t[2])}function _l(t,e,n){return n&&"number"!=typeof n&&Ua(t,e,n)&&(e=n=rt),(n=n===rt?Ut:n>>>0)?(t=Du(t),t&&("string"==typeof e||null!=e&&!kh(e))&&(e=mr(e),!e&&V(t))?wr(tt(t),0,n):t.split(e,n)):[]}function El(t,e,n){return t=Du(t),n=null==n?0:Bn(Cu(n),0,t.length),e=mr(e),t.slice(n,n+e.length)==e}function Al(t,e,i){var r=n.templateSettings;i&&Ua(t,e,i)&&(e=rt),t=Du(t),e=Ph({},e,r,fa);var a,o,s=Ph({},e.imports,r.imports,fa),u=Wu(s),l=x(s,u),c=0,d=e.interpolate||Ze,h="__p += '",f=hc((e.escape||Ze).source+"|"+d.source+"|"+(d===Le?Ke:Ze).source+"|"+(e.evaluate||Ze).source+"|$","g"),p="//# sourceURL="+("sourceURL"in e?e.sourceURL:"lodash.templateSources["+ ++Qn+"]")+"\n";t.replace(f,function(e,n,i,r,s,u){return i||(i=r),h+=t.slice(c,u).replace(tn,j),n&&(a=!0,h+="' +\n__e("+n+") +\n'"),s&&(o=!0,h+="';\n"+s+";\n__p += '"),i&&(h+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),c=u+e.length,e}),h+="';\n";var v=e.variable;v||(h="with (obj) {\n"+h+"\n}\n"),h=(o?h.replace(Ae,""):h).replace(be,"$1").replace(Te,"$1;"),h="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var m=tf(function(){return lc(u,p+"return "+h).apply(rt,l)});if(m.source=h,iu(m))throw m;return m}function bl(t){return Du(t).toLowerCase()}function Tl(t){return Du(t).toUpperCase()}function Sl(t,e,n){if(t=Du(t),t&&(n||e===rt))return t.replace(Fe,"");if(!t||!(e=mr(e)))return t;var i=tt(t),r=tt(e),a=U(i,r),o=B(i,r)+1;return wr(i,a,o).join("")}function kl(t,e,n){if(t=Du(t),t&&(n||e===rt))return t.replace(Be,"");if(!t||!(e=mr(e)))return t;var i=tt(t),r=B(i,tt(e))+1;return wr(i,0,r).join("")}function Cl(t,e,n){if(t=Du(t),t&&(n||e===rt))return t.replace(Ue,"");if(!t||!(e=mr(e)))return t;var i=tt(t),r=U(i,tt(e));return wr(i,r).join("")}function wl(t,e){var n=wt,i=Rt;if(uu(e)){var r="separator"in e?e.separator:r;n="length"in e?Cu(e.length):n,i="omission"in e?mr(e.omission):i}t=Du(t);var a=t.length;if(V(t)){var o=tt(t);a=o.length}if(n>=a)return t;var s=n-Z(i);if(s<1)return i;var u=o?wr(o,0,s).join(""):t.slice(0,s);if(r===rt)return u+i;if(o&&(s+=u.length-s),kh(r)){if(t.slice(s).search(r)){var l,c=u;for(r.global||(r=hc(r.source,Du(qe.exec(r))+"g")),r.lastIndex=0;l=r.exec(c);)var d=l.index;u=u.slice(0,d===rt?s:d)}}else if(t.indexOf(mr(r),s)!=s){var h=u.lastIndexOf(r);h>-1&&(u=u.slice(0,h))}return u+i}function Rl(t){return t=Du(t),t&&Ce.test(t)?t.replace(Se,bi):t}function Il(t,e,n){return t=Du(t),e=n?rt:e,e===rt?W(t)?it(t):A(t):t.match(e)||[]}function Ll(t){var e=null==t?0:t.length,n=Sa();return t=e?v(t,function(t){if("function"!=typeof t[1])throw new pc(ut);return[n(t[0]),t[1]]}):[],ar(function(n){for(var i=-1;++i<e;){var r=t[i];if(s(r[0],this,n))return s(r[1],this,n)}})}function Dl(t){return jn(Gn(t,ht))}function Pl(t){return function(){return t}}function Ol(t,e){return null==t||t!==t?e:t}function Ml(t){return t}function Nl(t){return Gi("function"==typeof t?t:Gn(t,ht))}function xl(t){return Ki(Gn(t,ht))}function Fl(t,e){return qi(t,Gn(e,ht))}function Ul(t,e,n){var i=Wu(e),r=oi(e,i);null!=n||uu(e)&&(r.length||!i.length)||(n=e,e=t,t=this,r=oi(e,Wu(e)));var a=!(uu(n)&&"chain"in n&&!n.chain),o=au(t);return l(r,function(n){var i=e[n];t[n]=i,o&&(t.prototype[n]=function(){var e=this.__chain__;if(a||e){var n=t(this.__wrapped__),r=n.__actions__=Gr(this.__actions__);return r.push({func:i,args:arguments,thisArg:t}),n.__chain__=e,n}return i.apply(t,m([this.value()],arguments))})}),t}function Bl(){return si._===this&&(si._=kc),this}function Gl(){}function jl(t){return t=Cu(t),ar(function(e){return Xi(e,t)})}function Hl(t){return Ba(t)?R(no(t)):Zi(t)}function Vl(t){return function(e){return null==t?rt:ui(t,e)}}function Wl(){return[]}function Kl(){return!1}function ql(){return{}}function Yl(){return""}function zl(){return!0}function Xl(t,e){if(t=Cu(t),t<1||t>Nt)return[];var n=Ut,i=Qc(t,Ut);e=Sa(e),t-=Ut;for(var r=O(i,e);++n<t;)e(n);return r}function Ql(t){return Eh(t)?v(t,no):Eu(t)?[t]:Gr(Nd(Du(t)))}function $l(t){var e=++Ac;return Du(t)+e}function Jl(t){return t&&t.length?zn(t,Ml,hi):rt}function Zl(t,e){return t&&t.length?zn(t,Sa(e,2),hi):rt}function tc(t){return w(t,Ml)}function ec(t,e){return w(t,Sa(e,2))}function nc(t){return t&&t.length?zn(t,Ml,Vi):rt}function ic(t,e){return t&&t.length?zn(t,Sa(e,2),Vi):rt}function rc(t){return t&&t.length?P(t,Ml):0}function ac(t,e){return t&&t.length?P(t,Sa(e,2)):0}e=null==e?si:Si.defaults(si.Object(),e,Si.pick(si,Xn));var oc=e.Array,sc=e.Date,uc=e.Error,lc=e.Function,cc=e.Math,dc=e.Object,hc=e.RegExp,fc=e.String,pc=e.TypeError,vc=oc.prototype,mc=lc.prototype,gc=dc.prototype,yc=e["__core-js_shared__"],_c=mc.toString,Ec=gc.hasOwnProperty,Ac=0,bc=function(){var t=/[^.]+$/.exec(yc&&yc.keys&&yc.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Tc=gc.toString,Sc=_c.call(dc),kc=si._,Cc=hc("^"+_c.call(Ec).replace(Ne,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),wc=ci?e.Buffer:rt,Rc=e.Symbol,Ic=e.Uint8Array,Lc=wc?wc.allocUnsafe:rt,Dc=Y(dc.getPrototypeOf,dc),Pc=dc.create,Oc=gc.propertyIsEnumerable,Mc=vc.splice,Nc=Rc?Rc.isConcatSpreadable:rt,xc=Rc?Rc.iterator:rt,Fc=Rc?Rc.toStringTag:rt,Uc=function(){try{var t=wa(dc,"defineProperty");return t({},"",{}),t}catch(t){}}(),Bc=e.clearTimeout!==si.clearTimeout&&e.clearTimeout,Gc=sc&&sc.now!==si.Date.now&&sc.now,jc=e.setTimeout!==si.setTimeout&&e.setTimeout,Hc=cc.ceil,Vc=cc.floor,Wc=dc.getOwnPropertySymbols,Kc=wc?wc.isBuffer:rt,qc=e.isFinite,Yc=vc.join,zc=Y(dc.keys,dc),Xc=cc.max,Qc=cc.min,$c=sc.now,Jc=e.parseInt,Zc=cc.random,td=vc.reverse,ed=wa(e,"DataView"),nd=wa(e,"Map"),id=wa(e,"Promise"),rd=wa(e,"Set"),ad=wa(e,"WeakMap"),od=wa(dc,"create"),sd=ad&&new ad,ud={},ld=io(ed),cd=io(nd),dd=io(id),hd=io(rd),fd=io(ad),pd=Rc?Rc.prototype:rt,vd=pd?pd.valueOf:rt,md=pd?pd.toString:rt,gd=function(){function t(){}return function(e){if(!uu(e))return{};if(Pc)return Pc(e);t.prototype=e;var n=new t;return t.prototype=rt,n}}();n.templateSettings={escape:Re,evaluate:Ie,interpolate:Le,variable:"",imports:{_:n}},n.prototype=i.prototype,n.prototype.constructor=n,r.prototype=gd(i.prototype),r.prototype.constructor=r,E.prototype=gd(i.prototype),E.prototype.constructor=E,nt.prototype.clear=Ve,nt.prototype.delete=en,nt.prototype.get=nn,nt.prototype.has=rn,nt.prototype.set=an,on.prototype.clear=sn,on.prototype.delete=un,on.prototype.get=ln,on.prototype.has=cn,on.prototype.set=dn,hn.prototype.clear=fn,hn.prototype.delete=pn,hn.prototype.get=vn,hn.prototype.has=mn,hn.prototype.set=gn,yn.prototype.add=yn.prototype.push=_n,yn.prototype.has=En,An.prototype.clear=bn,An.prototype.delete=Tn,An.prototype.get=Sn,An.prototype.has=kn,An.prototype.set=Cn;var yd=qr(ni),_d=qr(ai,!0),Ed=Yr(),Ad=Yr(!0),bd=sd?function(t,e){return sd.set(t,e),t}:Ml,Td=Uc?function(t,e){return Uc(t,"toString",{configurable:!0,enumerable:!1,value:Pl(e),writable:!0})}:Ml,Sd=ar,kd=Bc||function(t){return si.clearTimeout(t)},Cd=rd&&1/X(new rd([,-0]))[1]==Mt?function(t){return new rd(t)}:Gl,wd=sd?function(t){return sd.get(t)}:Gl,Rd=Wc?function(t){return null==t?[]:(t=dc(t),h(Wc(t),function(e){return Oc.call(t,e)}))}:Wl,Id=Wc?function(t){for(var e=[];t;)m(e,Rd(t)),t=Dc(t);return e}:Wl,Ld=di;(ed&&Ld(new ed(new ArrayBuffer(1)))!=de||nd&&Ld(new nd)!=$t||id&&Ld(id.resolve())!=ee||rd&&Ld(new rd)!=re||ad&&Ld(new ad)!=ue)&&(Ld=function(t){var e=di(t),n=e==te?t.constructor:rt,i=n?io(n):"";if(i)switch(i){case ld:return de;case cd:return $t;case dd:return ee;case hd:return re;case fd:return ue}return e});var Dd=yc?au:Kl,Pd=to(bd),Od=jc||function(t,e){return si.setTimeout(t,e)},Md=to(Td),Nd=qa(function(t){var e=[];return Oe.test(t)&&e.push(""),t.replace(Me,function(t,n,i,r){e.push(i?r.replace(We,"$1"):n||t)}),e}),xd=ar(function(t,e){return $s(t)?qn(t,ei(e,1,$s,!0)):[]}),Fd=ar(function(t,e){var n=ko(e);return $s(n)&&(n=rt),$s(t)?qn(t,ei(e,1,$s,!0),Sa(n,2)):[]}),Ud=ar(function(t,e){var n=ko(e);return $s(n)&&(n=rt),$s(t)?qn(t,ei(e,1,$s,!0),rt,n):[]}),Bd=ar(function(t){var e=v(t,Sr);return e.length&&e[0]===t[0]?Ci(e):[]}),Gd=ar(function(t){var e=ko(t),n=v(t,Sr);return e===ko(n)?e=rt:n.pop(),n.length&&n[0]===t[0]?Ci(n,Sa(e,2)):[]}),jd=ar(function(t){var e=ko(t),n=v(t,Sr);return e="function"==typeof e?e:rt,e&&n.pop(),n.length&&n[0]===t[0]?Ci(n,rt,e):[]}),Hd=ar(Ro),Vd=_a(function(t,e){var n=null==t?0:t.length,i=Un(t,e);return er(t,v(e,function(t){return Fa(t,n)?+t:t}).sort(xr)),i}),Wd=ar(function(t){return gr(ei(t,1,$s,!0))}),Kd=ar(function(t){var e=ko(t);return $s(e)&&(e=rt),gr(ei(t,1,$s,!0),Sa(e,2))}),qd=ar(function(t){var e=ko(t);return e="function"==typeof e?e:rt,gr(ei(t,1,$s,!0),rt,e)}),Yd=ar(function(t,e){return $s(t)?qn(t,e):[]}),zd=ar(function(t){return br(h(t,$s))}),Xd=ar(function(t){var e=ko(t);return $s(e)&&(e=rt),br(h(t,$s),Sa(e,2))}),Qd=ar(function(t){var e=ko(t);return e="function"==typeof e?e:rt,br(h(t,$s),rt,e)}),$d=ar(Qo),Jd=ar(function(t){var e=t.length,n=e>1?t[e-1]:rt;return n="function"==typeof n?(t.pop(),n):rt,$o(t,n)}),Zd=_a(function(t){var e=t.length,n=e?t[0]:0,i=this.__wrapped__,a=function(e){return Un(e,t)};return!(e>1||this.__actions__.length)&&i instanceof E&&Fa(n)?(i=i.slice(n,+n+(e?1:0)),i.__actions__.push({func:ns,args:[a],thisArg:rt}),new r(i,this.__chain__).thru(function(t){return e&&!t.length&&t.push(rt),t})):this.thru(a)}),th=Wr(function(t,e,n){Ec.call(t,n)?++t[n]:Fn(t,n,1)}),eh=Zr(vo),nh=Zr(mo),ih=Wr(function(t,e,n){Ec.call(t,n)?t[n].push(e):Fn(t,n,[e])}),rh=ar(function(t,e,n){var i=-1,r="function"==typeof e,a=Qs(t)?oc(t.length):[];return yd(t,function(t){a[++i]=r?s(e,t,n):Ri(t,e,n)}),a}),ah=Wr(function(t,e,n){Fn(t,n,e)}),oh=Wr(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),sh=ar(function(t,e){if(null==t)return[];var n=e.length;return n>1&&Ua(t,e[0],e[1])?e=[]:n>2&&Ua(e[0],e[1],e[2])&&(e=[e[0]]),Qi(t,ei(e,1),[])}),uh=Gc||function(){return si.Date.now()},lh=ar(function(t,e,n){var i=gt;if(n.length){var r=z(n,Ta(lh));i|=bt}return ha(t,i,e,n,r)}),ch=ar(function(t,e,n){var i=gt|yt;if(n.length){var r=z(n,Ta(ch));i|=bt}return ha(e,i,t,n,r)}),dh=ar(function(t,e){return Kn(t,1,e)}),hh=ar(function(t,e,n){return Kn(t,Ru(e)||0,n)});Ns.Cache=hn;var fh=Sd(function(t,e){e=1==e.length&&Eh(e[0])?v(e[0],N(Sa())):v(ei(e,1),N(Sa()));var n=e.length;return ar(function(i){for(var r=-1,a=Qc(i.length,n);++r<a;)i[r]=e[r].call(this,i[r]);return s(t,this,i)})}),ph=ar(function(t,e){var n=z(e,Ta(ph));return ha(t,bt,rt,e,n)}),vh=ar(function(t,e){var n=z(e,Ta(vh));return ha(t,Tt,rt,e,n)}),mh=_a(function(t,e){return ha(t,kt,rt,rt,rt,e)}),gh=ua(hi),yh=ua(function(t,e){return t>=e}),_h=Ii(function(){return arguments}())?Ii:function(t){return lu(t)&&Ec.call(t,"callee")&&!Oc.call(t,"callee")},Eh=oc.isArray,Ah=fi?N(fi):Li,bh=Kc||Kl,Th=pi?N(pi):Di,Sh=vi?N(vi):Mi,kh=mi?N(mi):Fi,Ch=gi?N(gi):Ui,wh=yi?N(yi):Bi,Rh=ua(Vi),Ih=ua(function(t,e){return t<=e}),Lh=Kr(function(t,e){if(Va(e)||Qs(e))return void jr(e,Wu(e),t);for(var n in e)Ec.call(e,n)&&Pn(t,n,e[n])}),Dh=Kr(function(t,e){jr(e,Ku(e),t)}),Ph=Kr(function(t,e,n,i){jr(e,Ku(e),t,i)}),Oh=Kr(function(t,e,n,i){jr(e,Wu(e),t,i)}),Mh=_a(Un),Nh=ar(function(t){return t.push(rt,fa),s(Ph,rt,t)}),xh=ar(function(t){return t.push(rt,pa),s(jh,rt,t)}),Fh=na(function(t,e,n){t[e]=n},Pl(Ml)),Uh=na(function(t,e,n){Ec.call(t,e)?t[e].push(n):t[e]=[n]},Sa),Bh=ar(Ri),Gh=Kr(function(t,e,n){Yi(t,e,n)}),jh=Kr(function(t,e,n,i){Yi(t,e,n,i)}),Hh=_a(function(t,e){var n={};if(null==t)return n;var i=!1;e=v(e,function(e){return e=Cr(e,t),i||(i=e.length>1),e}),jr(t,Aa(t),n),i&&(n=Gn(n,ht|ft|pt,va));for(var r=e.length;r--;)yr(n,e[r]);return n}),Vh=_a(function(t,e){return null==t?{}:$i(t,e)}),Wh=da(Wu),Kh=da(Ku),qh=Qr(function(t,e,n){return e=e.toLowerCase(),t+(n?ul(e):e)}),Yh=Qr(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),zh=Qr(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),Xh=Xr("toLowerCase"),Qh=Qr(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),$h=Qr(function(t,e,n){return t+(n?" ":"")+Zh(e)}),Jh=Qr(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),Zh=Xr("toUpperCase"),tf=ar(function(t,e){try{return s(t,rt,e)}catch(t){return iu(t)?t:new uc(t)}}),ef=_a(function(t,e){return l(e,function(e){e=no(e),Fn(t,e,lh(t[e],t))}),t}),nf=ta(),rf=ta(!0),af=ar(function(t,e){return function(n){return Ri(n,t,e)}}),of=ar(function(t,e){return function(n){return Ri(t,n,e)}}),sf=ra(v),uf=ra(d),lf=ra(_),cf=sa(),df=sa(!0),hf=ia(function(t,e){return t+e},0),ff=ca("ceil"),pf=ia(function(t,e){return t/e},1),vf=ca("floor"),mf=ia(function(t,e){return t*e},1),gf=ca("round"),yf=ia(function(t,e){return t-e},0);return n.after=Rs,n.ary=Is,n.assign=Lh,n.assignIn=Dh,n.assignInWith=Ph,n.assignWith=Oh,n.at=Mh,n.before=Ls,n.bind=lh,n.bindAll=ef,n.bindKey=ch,n.castArray=Vs,n.chain=ts,n.chunk=oo,n.compact=so,n.concat=uo,n.cond=Ll,n.conforms=Dl,n.constant=Pl,n.countBy=th,n.create=Pu,n.curry=Ds,n.curryRight=Ps,n.debounce=Os,n.defaults=Nh,n.defaultsDeep=xh,n.defer=dh,n.delay=hh,n.difference=xd,n.differenceBy=Fd,n.differenceWith=Ud,n.drop=lo,n.dropRight=co,n.dropRightWhile=ho,n.dropWhile=fo,n.fill=po,n.filter=ds,n.flatMap=hs,n.flatMapDeep=fs,n.flatMapDepth=ps,n.flatten=go,n.flattenDeep=yo,n.flattenDepth=_o,n.flip=Ms,n.flow=nf,n.flowRight=rf,n.fromPairs=Eo,n.functions=Bu,n.functionsIn=Gu,n.groupBy=ih,n.initial=To,n.intersection=Bd,n.intersectionBy=Gd,n.intersectionWith=jd,n.invert=Fh,n.invertBy=Uh,n.invokeMap=rh,n.iteratee=Nl,n.keyBy=ah,n.keys=Wu,n.keysIn=Ku,n.map=ys,n.mapKeys=qu,n.mapValues=Yu,n.matches=xl,n.matchesProperty=Fl,n.memoize=Ns,n.merge=Gh,n.mergeWith=jh,n.method=af,n.methodOf=of,n.mixin=Ul,n.negate=xs,n.nthArg=jl,n.omit=Hh,n.omitBy=zu,n.once=Fs,n.orderBy=_s,n.over=sf,n.overArgs=fh,n.overEvery=uf,n.overSome=lf,n.partial=ph,n.partialRight=vh,n.partition=oh,n.pick=Vh,n.pickBy=Xu,n.property=Hl,n.propertyOf=Vl,n.pull=Hd,n.pullAll=Ro,n.pullAllBy=Io,n.pullAllWith=Lo,n.pullAt=Vd,n.range=cf,n.rangeRight=df,n.rearg=mh,n.reject=bs,n.remove=Do,n.rest=Us,n.reverse=Po,n.sampleSize=Ss,n.set=$u,n.setWith=Ju,n.shuffle=ks,n.slice=Oo,n.sortBy=sh,n.sortedUniq=Go,n.sortedUniqBy=jo,n.split=_l,n.spread=Bs,n.tail=Ho,n.take=Vo,n.takeRight=Wo,n.takeRightWhile=Ko,n.takeWhile=qo,n.tap=es,n.throttle=Gs,n.thru=ns,n.toArray=Su,n.toPairs=Wh,n.toPairsIn=Kh,n.toPath=Ql,n.toPlainObject=Iu,n.transform=Zu,n.unary=js,n.union=Wd,n.unionBy=Kd,n.unionWith=qd,n.uniq=Yo,n.uniqBy=zo,n.uniqWith=Xo,n.unset=tl,n.unzip=Qo,n.unzipWith=$o,n.update=el,n.updateWith=nl,n.values=il,n.valuesIn=rl,n.without=Yd,n.words=Il,n.wrap=Hs,n.xor=zd,n.xorBy=Xd,n.xorWith=Qd,n.zip=$d,n.zipObject=Jo,n.zipObjectDeep=Zo,n.zipWith=Jd,n.entries=Wh,n.entriesIn=Kh,n.extend=Dh,n.extendWith=Ph,Ul(n,n),n.add=hf,n.attempt=tf,n.camelCase=qh,n.capitalize=ul,n.ceil=ff,n.clamp=al,n.clone=Ws,n.cloneDeep=qs,n.cloneDeepWith=Ys,n.cloneWith=Ks,n.conformsTo=zs,n.deburr=ll,n.defaultTo=Ol,n.divide=pf,n.endsWith=cl,n.eq=Xs,n.escape=dl,n.escapeRegExp=hl,n.every=cs,n.find=eh,n.findIndex=vo,n.findKey=Ou,n.findLast=nh,n.findLastIndex=mo,n.findLastKey=Mu,n.floor=vf,n.forEach=vs,n.forEachRight=ms,n.forIn=Nu,n.forInRight=xu,n.forOwn=Fu,n.forOwnRight=Uu,n.get=ju,n.gt=gh,n.gte=yh,n.has=Hu,n.hasIn=Vu,n.head=Ao,n.identity=Ml,n.includes=gs,n.indexOf=bo,n.inRange=ol,n.invoke=Bh,n.isArguments=_h,n.isArray=Eh,n.isArrayBuffer=Ah,n.isArrayLike=Qs,n.isArrayLikeObject=$s,n.isBoolean=Js,n.isBuffer=bh,n.isDate=Th,n.isElement=Zs,n.isEmpty=tu,n.isEqual=eu,n.isEqualWith=nu,n.isError=iu,n.isFinite=ru,n.isFunction=au,n.isInteger=ou,n.isLength=su,n.isMap=Sh,n.isMatch=cu,n.isMatchWith=du,n.isNaN=hu,n.isNative=fu,n.isNil=vu,n.isNull=pu,n.isNumber=mu,n.isObject=uu,n.isObjectLike=lu,n.isPlainObject=gu,n.isRegExp=kh,n.isSafeInteger=yu,n.isSet=Ch,n.isString=_u,n.isSymbol=Eu,n.isTypedArray=wh,n.isUndefined=Au,n.isWeakMap=bu,n.isWeakSet=Tu,n.join=So,n.kebabCase=Yh,n.last=ko,n.lastIndexOf=Co,n.lowerCase=zh,n.lowerFirst=Xh,n.lt=Rh,n.lte=Ih,n.max=Jl,n.maxBy=Zl,n.mean=tc,n.meanBy=ec,n.min=nc,n.minBy=ic,n.stubArray=Wl,n.stubFalse=Kl,n.stubObject=ql,n.stubString=Yl,n.stubTrue=zl,n.multiply=mf,n.nth=wo,n.noConflict=Bl,n.noop=Gl,n.now=uh,n.pad=fl,n.padEnd=pl,n.padStart=vl,n.parseInt=ml,n.random=sl,n.reduce=Es,n.reduceRight=As,n.repeat=gl,n.replace=yl,n.result=Qu,n.round=gf,n.runInContext=t,n.sample=Ts,n.size=Cs,n.snakeCase=Qh,n.some=ws,n.sortedIndex=Mo,n.sortedIndexBy=No,n.sortedIndexOf=xo,n.sortedLastIndex=Fo,n.sortedLastIndexBy=Uo,n.sortedLastIndexOf=Bo,n.startCase=$h,n.startsWith=El,n.subtract=yf,n.sum=rc,n.sumBy=ac,n.template=Al,n.times=Xl,n.toFinite=ku,n.toInteger=Cu,n.toLength=wu,n.toLower=bl,n.toNumber=Ru,n.toSafeInteger=Lu,n.toString=Du,n.toUpper=Tl,n.trim=Sl,n.trimEnd=kl,n.trimStart=Cl,n.truncate=wl,n.unescape=Rl,n.uniqueId=$l,n.upperCase=Jh,n.upperFirst=Zh,n.each=vs,n.eachRight=ms,n.first=Ao,Ul(n,function(){var t={};return ni(n,function(e,i){Ec.call(n.prototype,i)||(t[i]=e)}),t}(),{chain:!1}),n.VERSION=at,l(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){n[t].placeholder=n}),l(["drop","take"],function(t,e){E.prototype[t]=function(n){n=n===rt?1:Xc(Cu(n),0);var i=this.__filtered__&&!e?new E(this):this.clone();return i.__filtered__?i.__takeCount__=Qc(n,i.__takeCount__):i.__views__.push({size:Qc(n,Ut),type:t+(i.__dir__<0?"Right":"")}),i},E.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),l(["filter","map","takeWhile"],function(t,e){var n=e+1,i=n==Dt||n==Ot;E.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Sa(t,3),type:n}),e.__filtered__=e.__filtered__||i,e}}),l(["head","last"],function(t,e){var n="take"+(e?"Right":"");E.prototype[t]=function(){return this[n](1).value()[0]}}),l(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");E.prototype[t]=function(){return this.__filtered__?new E(this):this[n](1)}}),E.prototype.compact=function(){return this.filter(Ml)},E.prototype.find=function(t){return this.filter(t).head()},E.prototype.findLast=function(t){return this.reverse().find(t)},E.prototype.invokeMap=ar(function(t,e){return"function"==typeof t?new E(this):this.map(function(n){return Ri(n,t,e)})}),E.prototype.reject=function(t){return this.filter(xs(Sa(t)))},E.prototype.slice=function(t,e){t=Cu(t);var n=this;return n.__filtered__&&(t>0||e<0)?new E(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==rt&&(e=Cu(e),n=e<0?n.dropRight(-e):n.take(e-t)),n)},E.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},E.prototype.toArray=function(){return this.take(Ut)},ni(E.prototype,function(t,e){var i=/^(?:filter|find|map|reject)|While$/.test(e),a=/^(?:head|last)$/.test(e),o=n[a?"take"+("last"==e?"Right":""):e],s=a||/^find/.test(e);o&&(n.prototype[e]=function(){var e=this.__wrapped__,u=a?[1]:arguments,l=e instanceof E,c=u[0],d=l||Eh(e),h=function(t){var e=o.apply(n,m([t],u));return a&&f?e[0]:e};d&&i&&"function"==typeof c&&1!=c.length&&(l=d=!1);var f=this.__chain__,p=!!this.__actions__.length,v=s&&!f,g=l&&!p;if(!s&&d){e=g?e:new E(this);var y=t.apply(e,u);return y.__actions__.push({func:ns,args:[h],thisArg:rt}),new r(y,f)}return v&&g?t.apply(this,u):(y=this.thru(h),v?a?y.value()[0]:y.value():y)})}),l(["pop","push","shift","sort","splice","unshift"],function(t){var e=vc[t],i=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);n.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var n=this.value();return e.apply(Eh(n)?n:[],t)}return this[i](function(n){return e.apply(Eh(n)?n:[],t)})}}),ni(E.prototype,function(t,e){var i=n[e];if(i){var r=i.name+"",a=ud[r]||(ud[r]=[]);a.push({name:e,func:i})}}),ud[ea(rt,yt).name]=[{name:"wrapper",func:rt}],E.prototype.clone=I,E.prototype.reverse=$,E.prototype.value=et,n.prototype.at=Zd,n.prototype.chain=is,n.prototype.commit=rs,n.prototype.next=as,n.prototype.plant=ss,n.prototype.reverse=us,n.prototype.toJSON=n.prototype.valueOf=n.prototype.value=ls,n.prototype.first=n.prototype.head,xc&&(n.prototype[xc]=os),n},Si=Ti();si._=Si,i=function(){return Si}.call(e,n,e,r),!(i!==rt&&(r.exports=i))}).call(this)}).call(e,function(){return this}(),n(29)(t))},function(t,e,n){var i,r;i=[n(1),n(56)],r=function(t,e){var n=t([],{constructor:function(){"withCredentials"in new XMLHttpRequest?this.corsSupport="xhr":"object"==typeof XDomainRequest||"function"==typeof XDomainRequest?this.corsSupport="xd":console.error("xhrProvider::constructor - CORS in not supported by the browser")},request:function(t,n,i,r,a){if("xd"==this.corsSupport){for(var o in i.query)t+=t.indexOf("?")!=-1?"&":"?",t+=o+"="+i.query[o];i.preventCache&&(t+=t.indexOf("?")!=-1?"&":"?",t+="_cb="+(new Date).getTime());var s=new XDomainRequest;s.open(i.method||"GET",t),s.timeout=0,s.onload=function(){if("json"==i.handleAs.toLowerCase())null!=r&&void 0!=r&&r(n,JSON.parse(s.responseText));else{var t;if(window.DOMParser){var e=new window.DOMParser;t=e.parseFromString(s.responseText,"text/xml")}else t=new ActiveXObject("Microsoft.XMLDOM"),t.async=!1,t.loadXML(s.responseText);null!=r&&void 0!=r&&r(n,t.documentElement||t)}},s.onprogress=function(){},s.ontimeout=function(){},s.onerror=function(){null!=a&&void 0!=a&&a(n,"An unexpected error occurred")},setTimeout(function(){s.send()},250)}else"xhr"==this.corsSupport?e(t,i).then(function(t){null!=r&&void 0!=r&&r(n,t.documentElement||t)},function(t){null!=a&&void 0!=a&&a(n,"An unexpected error occurred: "+t)}):console.error("xhrProvider::request - CORS in not supported by the browser")}});return n}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(4)],r=function(t){if(t("host-browser")){var e=navigator,n=e.userAgent,i=e.appVersion,r=parseFloat(i);if(t.add("ie11",n.indexOf("Trident")>=0),t.add("air",n.indexOf("AdobeAIR")>=0),t.add("msapp",parseFloat(n.split("MSAppHost/")[1])||void 0),t.add("khtml",i.indexOf("Konqueror")>=0?r:void 0),t.add("webkit",parseFloat(n.split("WebKit/")[1])||void 0),t.add("chrome",parseFloat(n.split("Chrome/")[1])||void 0),t.add("safari",i.indexOf("Safari")>=0&&!t("chrome")?parseFloat(i.split("Version/")[1]):void 0),t.add("mac",i.indexOf("Macintosh")>=0),t.add("quirks","BackCompat"==document.compatMode),n.match(/(iPhone|iPod|iPad)/)){var a=RegExp.$1.replace(/P/,"p"),o=n.match(/OS ([\d_]+)/)?RegExp.$1:"1",s=parseFloat(o.replace(/_/,".").replace(/_/g,""));t.add(a,s),t.add("ios",s)}if(t.add("android",parseFloat(n.split("Android ")[1])||void 0),t.add("bb",(n.indexOf("BlackBerry")>=0||n.indexOf("BB10")>=0)&&parseFloat(n.split("Version/")[1])||void 0),t.add("svg","undefined"!=typeof SVGAngle),!t("webkit")){if(n.indexOf("Opera")>=0&&t.add("opera",r>=9.8?parseFloat(n.split("Version/")[1])||r:r),n.indexOf("Gecko")>=0&&!t("khtml")&&!t("webkit")&&t.add("mozilla",r),t("mozilla")&&t.add("ff",parseFloat(n.split("Firefox/")[1]||n.split("Minefield/")[1])||void 0),document.all&&!t("opera")){var u=parseFloat(i.split("MSIE ")[1])||void 0,l=document.documentMode;l&&5!=l&&Math.floor(u)!=l&&(u=l),t.add("ie",u)}t.add("wii","undefined"!=typeof opera&&opera.wiiremote)}}return t}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[e,n(5),n(10),n(17),n(7),n(19)],r=function(t,e,n,i,r,a){function o(t,e){var n=e.parentNode;n&&n.insertBefore(t,e)}function s(t,e){var n=e.parentNode;n&&(n.lastChild==e?n.appendChild(t):n.insertBefore(t,e.nextSibling));
}function u(t){if(t.canHaveChildren)try{return void(t.innerHTML="")}catch(t){}for(var e;e=t.lastChild;)l(e,t)}function l(t,e){t.firstChild&&u(t),e&&(n("ie")&&e.canHaveChildren&&"removeNode"in t?t.removeNode(!1):e.removeChild(t))}var c={option:["select"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","thead","tr"],legend:["fieldset"],caption:["table"],colgroup:["table"],col:["table","colgroup"],li:["ul"]},d=/<\s*([\w\:]+)/,h={},f=0,p="__"+e._scopeName+"ToDomId";for(var v in c)if(c.hasOwnProperty(v)){var m=c[v];m.pre="option"==v?'<select multiple="multiple">':"<"+m.join("><")+">",m.post="</"+m.reverse().join("></")+">"}var g;n("ie")<=8&&(g=function(t){t.__dojo_html5_tested="yes";var e=y("div",{innerHTML:"<nav>a</nav>",style:{visibility:"hidden"}},t.body);1!==e.childNodes.length&&"abbr article aside audio canvas details figcaption figure footer header hgroup mark meter nav output progress section summary time video".replace(/\b\w+\b/g,function(e){t.createElement(e)}),_(e)}),t.toDom=function(t,e){e=e||i.doc;var r=e[p];r||(e[p]=r=++f+"",h[r]=e.createElement("div")),n("ie")<=8&&!e.__dojo_html5_tested&&e.body&&g(e),t+="";var a,o,s,u,l=t.match(d),v=l?l[1].toLowerCase():"",m=h[r];if(l&&c[v])for(a=c[v],m.innerHTML=a.pre+t+a.post,o=a.length;o;--o)m=m.firstChild;else m.innerHTML=t;if(1==m.childNodes.length)return m.removeChild(m.firstChild);for(u=e.createDocumentFragment();s=m.firstChild;)u.appendChild(s);return u},t.place=function(e,n,i){if(n=r.byId(n),"string"==typeof e&&(e=/^\s*</.test(e)?t.toDom(e,n.ownerDocument):r.byId(e)),"number"==typeof i){var a=n.childNodes;!a.length||a.length<=i?n.appendChild(e):o(e,a[i<0?0:i])}else switch(i){case"before":o(e,n);break;case"after":s(e,n);break;case"replace":n.parentNode.replaceChild(e,n);break;case"only":t.empty(n),n.appendChild(e);break;case"first":if(n.firstChild){o(e,n.firstChild);break}default:n.appendChild(e)}return e};var y=t.create=function(e,n,o,s){var u=i.doc;return o&&(o=r.byId(o),u=o.ownerDocument),"string"==typeof e&&(e=u.createElement(e)),n&&a.set(e,n),o&&t.place(e,o,s),e};t.empty=function(t){u(r.byId(t))};var _=t.destroy=function(t){t=r.byId(t),t&&l(t,t.parentNode)}}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1),n(3)],r=function(t,e){var n=t([],{INTERNAL_REQUEST_API_FUNCTIONS:{"get-alternate-content":"_onApiRequestGetAlternateContent","get-vast-instream":"_onApiRequestGetVastInstream"},constructor:function(t,e){this.config=t,this.target=e},emit:function(t,n,i){i&&this.config.playerId!=i.id||e.emit(this.target,t,{data:n,bubbles:!0,cancelable:!0})}});return n}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(34),n(3)],r=function(t,e){"use strict";function n(){}var i=t.after;return n.prototype={on:function(t,n){return e.parse(this,t,n,function(t,e){return i(t,"on"+e,n,!0)})},emit:function(t,n){var i=[this];return i.push.apply(i,arguments),e.emit.apply(e,i)}},n}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){function i(t){var e=r.keys(u);return void 0!=t&&e.indexOf(t)>-1}var r=n(8),a=n(20),o="prod01",s=a.getProtocol(),u={prod01:{liveStream:"playerservices.streamtheworld.com/api/livestream",nowPlayingHistory:s+"//np.tritondigital.com/public/nowplaying",playerWebAdmin:s+"//pwav4.tritondigital.com/jsonconfig.php",coreModuleDir:s+"//sdk.listenlive.co/core/swf/",npe:s+"//npe2.listenlive.co/services/",see:s+"//see-p-elb-01.tritondigital.net/widget/{tenantId}/see.js",UA:"UA-34627310-11"},preprod01:{liveStream:"playerservices.preprod01.streamtheworld.net/api/livestream",nowPlayingHistory:s+"//playerservices.preprod01.streamtheworld.net/public/nowplaying",playerWebAdmin:s+"//pwav4.preprod01.tritondigital.com/jsonconfig.php",coreModuleDir:s+"//sdk.listenlive.co/core/swf/",npe:s+"//nowplaying.preprod01.streamtheworld.net/services/",see:s+"//see-stg-slb.tritondigital.net/widget/{tenantId}/see.js",UA:"UA-34627310-8"}},l=window.TdPlatform=function(t){var e=i(t)?t:o;this.endpoint=u[e]};t.exports=l},function(t,e,n){var i,r;i=[n(5),n(22),n(25),n(24),n(4),n(2),n(93)],r=function(t,e,n,i,r,a,o){var s=function(){},u=Object.freeze||function(){},l=t.Deferred=function(t){function o(t){if(h)throw new Error("This deferred has already been resolved");d=t,h=!0,c()}function c(){for(var t;!t&&g;){var n=g;g=g.next,(t=n.progress==s)&&(h=!1);var i=v?n.error:n.resolved;if(r("config-useDeferredInstrumentation")&&v&&e.instrumentRejected&&e.instrumentRejected(d,!!i),i)try{var o=i(d);if(o&&"function"==typeof o.then){o.then(a.hitch(n.deferred,"resolve"),a.hitch(n.deferred,"reject"),a.hitch(n.deferred,"progress"));continue}var u=t&&void 0===o;t&&!u&&(v=o instanceof Error),n.deferred[u&&v?"reject":"resolve"](u?d:o)}catch(t){n.deferred.reject(t)}else v?n.deferred.reject(d):n.deferred.resolve(d)}}var d,h,f,p,v,m,g,y=this.promise=new n;this.isResolved=y.isResolved=function(){return 0==p},this.isRejected=y.isRejected=function(){return 1==p},this.isFulfilled=y.isFulfilled=function(){return p>=0},this.isCanceled=y.isCanceled=function(){return f},this.resolve=this.callback=function(t){this.fired=p=0,this.results=[t,null],o(t)},this.reject=this.errback=function(t){v=!0,this.fired=p=1,r("config-useDeferredInstrumentation")&&e.instrumentRejected&&e.instrumentRejected(t,!!g),o(t),this.results=[null,t]},this.progress=function(t){for(var e=g;e;){var n=e.progress;n&&n(t),e=e.next}},this.addCallbacks=function(t,e){return this.then(t,e,s),this},y.then=this.then=function(t,e,n){var i=n==s?this:new l(y.cancel),r={resolved:t,error:e,progress:n,deferred:i};return g?m=m.next=r:g=m=r,h&&c(),i.promise};var _=this;y.cancel=this.cancel=function(){if(!h){var e=t&&t(_);h||(e instanceof Error||(e=new i(e)),e.log=!1,_.reject(e))}f=!0},u(y)};return a.extend(l,{addCallback:function(e){return this.addCallbacks(a.hitch.apply(t,arguments))},addErrback:function(e){return this.addCallbacks(null,a.hitch.apply(t,arguments))},addBoth:function(e){var n=a.hitch.apply(t,arguments);return this.addCallbacks(n,n)},fired:-1}),l.when=t.when=o,l}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i=n(8),r=n(113),a={parse:function(t){var e,n;return window.DOMParser?(e=new DOMParser,n=e.parseFromString(t,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(t)),n},textContent:function(t){var e="";return t&&i.forEach(t.childNodes,function(t){switch(t.nodeType){case 3:case 2:case 4:e+=t.nodeValue}}),e},xmlToJson:function(t){var e={mergeCDATA:!0,grokAttr:!0,grokText:!0,normalize:!0,xmlns:!1,namespaceKey:"_ns",textKey:"_text",valueKey:"_value",attrKey:"_attr",cdataKey:"_cdata",attrsAsObject:!0,stripAttrPrefix:!0,stripElemPrefix:!0,childrenAsArray:!1};return r.parseXML(t,e)}};t.exports=a},function(t,e,n){var i,r;i=[n(5),n(2),n(10)],r=function(t,e,n){var i={global:t.global,doc:this.document||null,body:function(e){return e=e||t.doc,e.body||e.getElementsByTagName("body")[0]},setContext:function(e,n){t.global=i.global=e,t.doc=i.doc=n},withGlobal:function(e,n,r,a){var o=t.global;try{return t.global=i.global=e,i.withDoc.call(null,e.document,n,r,a)}finally{t.global=i.global=o}},withDoc:function(e,r,a,o){var s,u,l,c=i.doc,d=n("quirks"),h=n("ie");try{return t.doc=i.doc=e,t.isQuirks=n.add("quirks","BackCompat"==t.doc.compatMode,!0,!0),n("ie")&&(l=e.parentWindow)&&l.navigator&&(s=parseFloat(l.navigator.appVersion.split("MSIE ")[1])||void 0,u=e.documentMode,u&&5!=u&&Math.floor(s)!=u&&(s=u),t.isIE=n.add("ie",s,!0,!0)),a&&"string"==typeof r&&(r=a[r]),r.apply(a,o||[])}finally{t.doc=i.doc=c,t.isQuirks=n.add("quirks",d,!0,!0),t.isIE=n.add("ie",h,!0,!0)}}};return n("extend-dojo")&&e.mixin(t,i),i}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i=n(8),r=function(){if("object"==typeof r.instance)return r.instance;var t="en",e=["en","fr","pt","es"],a=document.getElementsByTagName("script");if(!i.isEmpty(a)){var o=a[a.length-1].getAttribute("tdsdk-lang");i.isEmpty(o)||(t=o)}this.setLocalization=function(e){t=e},this.getLocalization=function(){return i.indexOf(e,t)>-1?n(157)("./"+t+".json"):n(58)},r.instance=this};t.exports=new r},function(t,e,n){var i,r;i=[e,n(10),n(2),n(7),n(23),n(83)],r=function(t,e,n,i,r,a){function o(t,e){var n=t.getAttributeNode&&t.getAttributeNode(e);return n&&n.specified}var s={innerHTML:1,className:1,htmlFor:e("ie"),value:1},u={classname:"class",htmlfor:"for",tabindex:"tabIndex",readonly:"readOnly"};t.has=function(t,e){var n=e.toLowerCase();return s[a.names[n]||e]||o(i.byId(t),u[n]||e)},t.get=function(t,e){t=i.byId(t);var r=e.toLowerCase(),l=a.names[r]||e,c=s[l],d=t[l];if(c&&"undefined"!=typeof d)return d;if("href"!=l&&("boolean"==typeof d||n.isFunction(d)))return d;var h=u[r]||e;return o(t,h)?t.getAttribute(h):null},t.set=function(e,o,l){if(e=i.byId(e),2==arguments.length){for(var c in o)t.set(e,c,o[c]);return e}var d=o.toLowerCase(),h=a.names[d]||o,f=s[h];return"style"==h&&"string"!=typeof l?(r.set(e,l),e):f||"boolean"==typeof l||n.isFunction(l)?a.set(e,o,l):(e.setAttribute(u[d]||o,l),e)},t.remove=function(t,e){i.byId(t).removeAttribute(u[e.toLowerCase()]||e)},t.getNodeProp=function(t,e){t=i.byId(t);var n=e.toLowerCase(),r=a.names[n]||e;if(r in t&&"href"!=r)return t[r];var s=u[n]||e;return o(t,s)?t.getAttribute(s):null}}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e){var n="https:";t.exports={currentProtocolIsHttps:function(){return window.location.protocol===n},getProtocol:function(){return window.location.protocol}}},function(t,e,n){function i(){k.is(S.STOPPED)||k.is(S.PAUSED)||this.emit("html5-playback-status",{type:b.DATA_LOADING,mediaNode:this.audioNode})}function r(){k.is(S.STOPPED)||k.is(S.PAUSED)||this.emit("html5-playback-status",{type:b.LOAD_START,mediaNode:this.audioNode})}function a(){k.is(S.STOPPED)||k.is(S.PAUSED)||null!==this.url&&(this.audioNode.play(),this.emit("html5-playback-status",{type:b.CAN_PLAY,mediaNode:this.audioNode}))}function o(){k.is(S.STOPPED)||k.is(S.PAUSED)||null!==this.url&&(this.audioNode.play(),this.emit("html5-playback-status",{type:b.CAN_PLAY_THROUGH,mediaNode:this.audioNode}))}function s(){k.is(S.STOPPED)||k.is(S.PAUSED)||this.emit("html5-playback-status",{type:b.WAITING,mediaNode:this.audioNode})}function u(){k.is(S.STOPPED)||k.is(S.PAUSED)||this.emit("html5-playback-status",{type:b.EMPTIED,mediaNode:this.audioNode})}function l(){k.is(S.STOPPED)||k.is(S.PAUSED)||this.emit("html5-playback-status",{type:b.ABORT,mediaNode:this.audioNode})}function c(){k.is(S.STOPPED)||this.emit("html5-playback-status",{type:b.ENDED,mediaNode:this.audioNode})}function d(){null!==this.url&&this.emit("html5-playback-status",{type:b.PLAY,mediaNode:this.audioNode})}function h(){k.is(S.STOPPED)?this.emit("html5-playback-status",{type:b.STOP,mediaNode:this.audioNode}):this.emit("html5-playback-status",{type:b.PAUSE,mediaNode:this.audioNode})}function f(){var t=this.audioNode;k.is(S.STOPPED)?this.emit("html5-playback-status",{type:b.STOP,mediaNode:t}):3!=t.readyState?(this.resetAudioNode(),this.emit("html5-playback-status",{type:b.ERROR,mediaNode:t})):this.emit("html5-playback-status",{type:b.STOP,mediaNode:t})}function p(){var t=this.audioNode;this.emit("html5-playback-status",{type:b.ERROR,mediaNode:t})}function v(){k.is(S.STOPPED)||k.is(S.PAUSED)||(this.audioNode.currentTime.toFixed(1)==this.audioNode.duration.toFixed(1)?this.emit("html5-playback-status",{type:b.ENDED,mediaNode:this.audioNode}):this.isLive||this.emit("html5-playback-status",{type:b.TIME_UPDATE,mediaNode:this.audioNode}))}function m(){this.boundOnOffline=p.bind(this),this.audioNode.addEventListener("loadeddata",i.bind(this)),this.audioNode.addEventListener("loadstart",r.bind(this)),this.audioNode.addEventListener("canplay",a.bind(this)),this.audioNode.addEventListener("canplaythrough",o.bind(this)),this.audioNode.addEventListener("waiting",s.bind(this)),this.audioNode.addEventListener("emptied",u.bind(this)),this.audioNode.addEventListener("abort",l.bind(this)),this.audioNode.addEventListener("ended",c.bind(this)),this.audioNode.addEventListener("play",d.bind(this)),this.audioNode.addEventListener("pause",h.bind(this)),this.audioNode.addEventListener("timeupdate",v.bind(this)),this.audioNode.addEventListener("error",f.bind(this)),window.addEventListener("offline",this.boundOnOffline)}function g(){this.audioNode.removeEventListener("loadeddata",i),this.audioNode.removeEventListener("loadstart",r),this.audioNode.removeEventListener("canplay",a),this.audioNode.removeEventListener("canplaythrough",o),this.audioNode.removeEventListener("waiting",s),this.audioNode.removeEventListener("emptied",u),this.audioNode.removeEventListener("abort",l),this.audioNode.removeEventListener("ended",c),this.audioNode.removeEventListener("play",d),this.audioNode.removeEventListener("pause",h),this.audioNode.removeEventListener("timeupdate",v),this.audioNode.removeEventListener("error",f),window.removeEventListener("offline",this.boundOnOffline)}function y(){return this.audioNode||(this.audioNode=new Audio,this.audioNode.autoplay=!1,this.audioNode.preload="none",m.call(this)),this.audioNode}var _=n(8),E=n(100).EventEmitter,A=n(37),b=n(40),T=n(97),S={IDLE:"IDLE",PLAYING:"PLAYING",STOPPED:"STOPPED",PAUSED:"PAUSED"},k=T.create({initial:S.STOPPED,error:function(t,e){console.warn("Event",t,"inappropriate in current state",e)},events:[{name:"play",from:S.STOPPED,to:S.PLAYING},{name:"stop",from:S.PLAYING,to:S.STOPPED},{name:"stop",from:S.PAUSED,to:S.STOPPED},{name:"pause",from:S.PLAYING,to:S.PAUSED},{name:"resume",from:S.PAUSED,to:S.PLAYING}]});t.exports=_.assign(new E,{audioNode:null,init:function(){this.audioNode=y.call(this),this.url=null,this.audioNode.src="";try{this.audioNode.play().catch(function(t){})}catch(t){this.audioNode.play()}this.audioNode.pause()},playAudio:function(t,e,n){if(this.audioNode=y.call(this),this.url=t||this.url,this.isLive=n||this.isLive,this.useHls=e||this.useHls,e){var i=new A;i.loadSource(t),i.attachMedia(this.audioNode)}else this.audioNode.src=t,this.audioNode.load();k.play()},stop:function(){var t=this;k.is(S.STOPPED)||(this.audioNode=y.call(this),k.stop(),this.audioNode.pause(),setTimeout(function(){t.audioNode.src="",t.url=null},300))},pause:function(){k.is(S.PAUSED)||(this.audioNode=y.call(this),this.audioNode.pause(),k.pause())},resume:function(){k.is(S.PAUSED)&&(this.audioNode=y.call(this),this.audioNode.play(),k.resume())},mute:function(){this.audioNode=y.call(this),this.audioNode.muted=!0},unMute:function(){this.audioNode=y.call(this),this.audioNode.muted=!1},setVolume:function(t){this.audioNode=y.call(this),this.audioNode.volume=t},isStopped:function(){return k.is(S.STOPPED)},resetAudioNode:function(){g.call(this),this.audioNode=null,k.can("stop")&&k.stop()}})},function(t,e,n){var i,r;i=[n(4),n(2),n(24),n(25),n(59)],r=function(t,e,n,i,r){"use strict";var a=0,o=1,s=2,u="This deferred has already been fulfilled.",l=Object.freeze||function(){},c=function(e,n,i,r,a){t("config-deferredInstrumentation")&&n===s&&p.instrumentRejected&&0===e.length&&p.instrumentRejected(i,!1,r,a);for(var o=0;o<e.length;o++)d(e[o],n,i,r)},d=function(e,n,i,r){var u=e[n],l=e.deferred;if(u)try{var c=u(i);if(n===a)"undefined"!=typeof c&&f(l,n,c);else{if(c&&"function"==typeof c.then)return e.cancel=c.cancel,void c.then(h(l,o),h(l,s),h(l,a));f(l,o,c)}}catch(t){f(l,s,t)}else f(l,n,i);t("config-deferredInstrumentation")&&n===s&&p.instrumentRejected&&p.instrumentRejected(i,!!u,r,l.promise)},h=function(t,e){return function(n){f(t,e,n)}},f=function(t,e,n){if(!t.isCanceled())switch(e){case a:t.progress(n);break;case o:t.resolve(n);break;case s:t.reject(n)}},p=function(e){var r,h,f,v=this.promise=new i,m=this,g=!1,y=[];t("config-deferredInstrumentation")&&Error.captureStackTrace&&(Error.captureStackTrace(m,p),Error.captureStackTrace(v,p)),this.isResolved=v.isResolved=function(){return r===o},this.isRejected=v.isRejected=function(){return r===s},this.isFulfilled=v.isFulfilled=function(){return!!r},this.isCanceled=v.isCanceled=function(){return g},this.progress=function(t,e){if(r){if(e===!0)throw new Error(u);return v}return c(y,a,t,null,m),v},this.resolve=function(t,e){if(r){if(e===!0)throw new Error(u);return v}return c(y,r=o,h=t,null,m),y=null,v};var _=this.reject=function(e,n){if(r){if(n===!0)throw new Error(u);return v}return t("config-deferredInstrumentation")&&Error.captureStackTrace&&Error.captureStackTrace(f={},_),c(y,r=s,h=e,f,m),y=null,v};this.then=v.then=function(t,e,n){var i=[n,t,e];return i.cancel=v.cancel,i.deferred=new p(function(t){return i.cancel&&i.cancel(t)}),r&&!y?d(i,r,h,f):y.push(i),i.deferred.promise},this.cancel=v.cancel=function(t,i){if(r){if(i===!0)throw new Error(u)}else{if(e){var a=e(t);t="undefined"==typeof a?t:a}if(g=!0,!r)return"undefined"==typeof t&&(t=new n),_(t),t;if(r===s&&h===t)return t}},l(v)};return p.prototype.toString=function(){return"[object Deferred]"},r&&r(p),p}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(10),n(7)],r=function(t,e){function n(e,n,i){if(n=n.toLowerCase(),t("ie")){if("auto"==i){if("height"==n)return e.offsetHeight;if("width"==n)return e.offsetWidth}if("fontweight"==n)switch(i){case 700:return"bold";case 400:default:return"normal"}}return n in c||(c[n]=d.test(n)),c[n]?a(e,i):i}var i,r={};i=t("webkit")?function(t){var e;if(1==t.nodeType){var n=t.ownerDocument.defaultView;e=n.getComputedStyle(t,null),!e&&t.style&&(t.style.display="",e=n.getComputedStyle(t,null))}return e||{}}:t("ie")&&(t("ie")<9||t("quirks"))?function(t){return 1==t.nodeType&&t.currentStyle?t.currentStyle:{}}:function(t){return 1==t.nodeType?t.ownerDocument.defaultView.getComputedStyle(t,null):{}},r.getComputedStyle=i;var a;a=t("ie")?function(t,e){if(!e)return 0;if("medium"==e)return 4;if(e.slice&&"px"==e.slice(-2))return parseFloat(e);var n=t.style,i=t.runtimeStyle,r=t.currentStyle,a=n.left,o=i.left;i.left=r.left;try{n.left=e,e=n.pixelLeft}catch(t){e=0}return n.left=a,i.left=o,e}:function(t,e){return parseFloat(e)||0},r.toPixelValue=a;var o="DXImageTransform.Microsoft.Alpha",s=function(t,e){try{return t.filters.item(o)}catch(t){return e?{}:null}},u=t("ie")<9||t("ie")<10&&t("quirks")?function(t){try{return s(t).Opacity/100}catch(t){return 1}}:function(t){return i(t).opacity},l=t("ie")<9||t("ie")<10&&t("quirks")?function(t,e){""===e&&(e=1);var n=100*e,i=1===e;if(i?(t.style.zoom="",s(t)&&(t.style.filter=t.style.filter.replace(new RegExp("\\s*progid:"+o+"\\([^\\)]+?\\)","i"),""))):(t.style.zoom=1,s(t)?s(t,1).Opacity=n:t.style.filter+=" progid:"+o+"(Opacity="+n+")",s(t,1).Enabled=!0),"tr"==t.tagName.toLowerCase())for(var r=t.firstChild;r;r=r.nextSibling)"td"==r.tagName.toLowerCase()&&l(r,e);return e}:function(t,e){return t.style.opacity=e},c={left:!0,top:!0},d=/margin|padding|width|height|max|min|offset/,h={cssFloat:1,styleFloat:1,float:1};return r.get=function(t,i){var a=e.byId(t),o=arguments.length,s="opacity"==i;if(2==o&&s)return u(a);i=h[i]?"cssFloat"in a.style?"cssFloat":"styleFloat":i;var l=r.getComputedStyle(a);return 1==o?l:n(a,i,l[i]||a.style[i])},r.set=function(t,n,i){var a=e.byId(t),o=arguments.length,s="opacity"==n;if(n=h[n]?"cssFloat"in a.style?"cssFloat":"styleFloat":n,3==o)return s?l(a,i):a.style[n]=i;for(var u in n)r.set(t,u,n[u]);return r.getComputedStyle(a)},r}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(36)],r=function(t){return t("CancelError",null,null,{dojoType:"cancel"})}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(2)],r=function(t){"use strict";function e(){throw new TypeError("abstract")}return t.extend(function(){},{then:function(t,n,i){e()},cancel:function(t,n){e()},isResolved:function(){e()},isRejected:function(){e()},isFulfilled:function(){e()},isCanceled:function(){e()},always:function(t){return this.then(t,t)},otherwise:function(t){return this.then(null,t)},trace:function(){return this},traceRejected:function(){return this},toString:function(){return"[object Promise]"}})}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(13)],r=function(t){var e=new t;return{publish:function(t,n){return e.emit.apply(e,arguments)},subscribe:function(t,n){return e.on.apply(e,arguments)}}}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e){function n(t,e){if(t instanceof Array){var r=t.map(function(t){return n(t)});e&&e.apply(this,r)}else{if(i[t])return i[t];console.error('Dynamic dojo require is not supported. Trying to require "'+t+'"')}}var i={};n.async=!0,n.toUrl=function(t){return t},n.register=function(t,e){return i[t]=e,e},n.unregister=function(t){delete i[t]},t.exports=n},function(t,e,n){var i;(function(t,r){(function(){"use strict";function a(t){return t=String(t),t.charAt(0).toUpperCase()+t.slice(1)}function o(t,e,n){var i={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return e&&n&&/^Win/i.test(t)&&!/^Windows Phone /i.test(t)&&(i=i[/[\d.]+$/.exec(t)])&&(t="Windows "+i),t=String(t),e&&n&&(t=t.replace(RegExp(e,"i"),n)),t=u(t.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}function s(t,e){var n=-1,i=t?t.length:0;if("number"==typeof i&&i>-1&&i<=b)for(;++n<i;)e(t[n],n,t);else l(t,e)}function u(t){return t=p(t),/^(?:webOS|i(?:OS|P))/.test(t)?t:a(t)}function l(t,e){for(var n in t)C.call(t,n)&&e(t[n],n,t)}function c(t){return null==t?a(t):w.call(t).slice(8,-1)}function d(t,e){var n=null!=t?typeof t[e]:"number";return!(/^(?:boolean|number|string|undefined)$/.test(n)||"object"==n&&!t[e])}function h(t){return String(t).replace(/([ -])(?!$)/g,"$1?")}function f(t,e){var n=null;return s(t,function(i,r){n=e(n,i,r,t)}),n}function p(t){return String(t).replace(/^ +| +$/g,"")}function v(t){function e(e){return f(e,function(e,n){return e||RegExp("\\b"+(n.pattern||h(n))+"\\b","i").exec(t)&&(n.label||n)})}function n(e){return f(e,function(e,n,i){return e||(n[X]||n[/^[a-z]+(?: +[a-z]+\b)*/i.exec(X)]||RegExp("\\b"+h(i)+"(?:\\b|\\w*\\d)","i").exec(t))&&i})}function i(e){return f(e,function(e,n){return e||RegExp("\\b"+(n.pattern||h(n))+"\\b","i").exec(t)&&(n.label||n)})}function r(e){return f(e,function(e,n){var i=n.pattern||h(n);return!e&&(e=RegExp("\\b"+i+"(?:/[\\d.]+|[ \\w.]*)","i").exec(t))&&(e=o(e,i,n.label||n)),e})}function a(e){return f(e,function(e,n){var i=n.pattern||h(n);return!e&&(e=RegExp("\\b"+i+" *\\d+[.\\w_]*","i").exec(t)||RegExp("\\b"+i+" *\\w+-[\\w]*","i").exec(t)||RegExp("\\b"+i+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(t))&&((e=String(n.label&&!RegExp(i,"i").test(n.label)?n.label:e).split("/"))[1]&&!/[\d.]+/.test(e[0])&&(e[0]+=" "+e[1]),n=n.label||n,e=u(e[0].replace(RegExp(i,"i"),n).replace(RegExp("; *(?:"+n+"[_-])?","i")," ").replace(RegExp("("+n+")[-_.]?(\\w)","i"),"$1 $2"))),e})}function s(e){return f(e,function(e,n){return e||(RegExp(n+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(t)||0)[1]||null})}function m(){return this.description||""}var _=g,E=t&&"object"==typeof t&&"String"!=c(t);E&&(_=t,t=null);var A=_.navigator||{},b=A.userAgent||"";t||(t=b);var k,C,R=E||S==y,I=E?!!A.likeChrome:/\bChrome\b/.test(t)&&!/internal|\n/i.test(w.toString()),L="Object",D=E?L:"ScriptBridgingProxyObject",P=E?L:"Environment",O=E&&_.java?"JavaPackage":c(_.java),M=E?L:"RuntimeObject",N=/\bJava/.test(O)&&_.java,x=N&&c(_.environment)==P,F=N?"a":"α",U=N?"b":"β",B=_.document||{},G=_.operamini||_.opera,j=T.test(j=E&&G?G["[[Class]]"]:c(G))?j:G=null,H=t,V=[],W=null,K=t==b,q=K&&G&&"function"==typeof G.version&&G.version(),Y=e([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),z=i(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),X=a([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),Q=n({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}}),$=r(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);if(Y&&(Y=[Y]),Q&&!X&&(X=a([Q])),(k=/\bGoogle TV\b/.exec(X))&&(X=k[0]),/\bSimulator\b/i.test(t)&&(X=(X?X+" ":"")+"Simulator"),"Opera Mini"==z&&/\bOPiOS\b/.test(t)&&V.push("running in Turbo/Uncompressed mode"),"IE"==z&&/\blike iPhone OS\b/.test(t)?(k=v(t.replace(/like iPhone OS/,"")),Q=k.manufacturer,X=k.product):/^iP/.test(X)?(z||(z="Safari"),$="iOS"+((k=/ OS ([\d_]+)/i.exec(t))?" "+k[1].replace(/_/g,"."):"")):"Konqueror"!=z||/buntu/i.test($)?Q&&"Google"!=Q&&(/Chrome/.test(z)&&!/\bMobile Safari\b/i.test(t)||/\bVita\b/.test(X))||/\bAndroid\b/.test($)&&/^Chrome/.test(z)&&/\bVersion\//i.test(t)?(z="Android Browser",$=/\bAndroid\b/.test($)?$:"Android"):"Silk"==z?(/\bMobi/i.test(t)||($="Android",V.unshift("desktop mode")),/Accelerated *= *true/i.test(t)&&V.unshift("accelerated")):"PaleMoon"==z&&(k=/\bFirefox\/([\d.]+)\b/.exec(t))?V.push("identifying as Firefox "+k[1]):"Firefox"==z&&(k=/\b(Mobile|Tablet|TV)\b/i.exec(t))?($||($="Firefox OS"),X||(X=k[1])):!z||(k=!/\bMinefield\b/i.test(t)&&/\b(?:Firefox|Safari)\b/.exec(z))?(z&&!X&&/[\/,]|^[^(]+?\)/.test(t.slice(t.indexOf(k+"/")+8))&&(z=null),(k=X||Q||$)&&(X||Q||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test($))&&(z=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test($)?$:k)+" Browser")):"Electron"==z&&(k=(/\bChrome\/([\d.]+)\b/.exec(t)||0)[1])&&V.push("Chromium "+k):$="Kubuntu",q||(q=s(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version",h(z),"(?:Firefox|Minefield|NetFront)"])),(k="iCab"==Y&&parseFloat(q)>3&&"WebKit"||/\bOpera\b/.test(z)&&(/\bOPR\b/.test(t)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(t)&&!/^(?:Trident|EdgeHTML)$/.test(Y)&&"WebKit"||!Y&&/\bMSIE\b/i.test(t)&&("Mac OS"==$?"Tasman":"Trident")||"WebKit"==Y&&/\bPlayStation\b(?! Vita\b)/i.test(z)&&"NetFront")&&(Y=[k]),"IE"==z&&(k=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(t)||0)[1])?(z+=" Mobile",$="Windows Phone "+(/\+$/.test(k)?k:k+".x"),V.unshift("desktop mode")):/\bWPDesktop\b/i.test(t)?(z="IE Mobile",$="Windows Phone 8.x",V.unshift("desktop mode"),q||(q=(/\brv:([\d.]+)/.exec(t)||0)[1])):"IE"!=z&&"Trident"==Y&&(k=/\brv:([\d.]+)/.exec(t))&&(z&&V.push("identifying as "+z+(q?" "+q:"")),z="IE",q=k[1]),K){if(d(_,"global"))if(N&&(k=N.lang.System,H=k.getProperty("os.arch"),$=$||k.getProperty("os.name")+" "+k.getProperty("os.version")),R&&d(_,"system")&&(k=[_.system])[0]){$||($=k[0].os||null);try{k[1]=_.require("ringo/engine").version,q=k[1].join("."),z="RingoJS"}catch(t){k[0].global.system==_.system&&(z="Narwhal")}}else"object"==typeof _.process&&!_.process.browser&&(k=_.process)?"object"==typeof k.versions?"string"==typeof k.versions.electron?(V.push("Node "+k.versions.node),z="Electron",q=k.versions.electron):"string"==typeof k.versions.nw&&(V.push("Chromium "+q,"Node "+k.versions.node),z="NW.js",q=k.versions.nw):(z="Node.js",H=k.arch,$=k.platform,q=/[\d.]+/.exec(k.version),q=q?q[0]:"unknown"):x&&(z="Rhino");else c(k=_.runtime)==D?(z="Adobe AIR",$=k.flash.system.Capabilities.os):c(k=_.phantom)==M?(z="PhantomJS",q=(k=k.version||null)&&k.major+"."+k.minor+"."+k.patch):"number"==typeof B.documentMode&&(k=/\bTrident\/(\d+)/i.exec(t))?(q=[q,B.documentMode],(k=+k[1]+4)!=q[1]&&(V.push("IE "+q[1]+" mode"),Y&&(Y[1]=""),q[1]=k),q="IE"==z?String(q[1].toFixed(1)):q[0]):"number"==typeof B.documentMode&&/^(?:Chrome|Firefox)\b/.test(z)&&(V.push("masking as "+z+" "+q),z="IE",q="11.0",Y=["Trident"],$="Windows");$=$&&u($)}if(q&&(k=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(q)||/(?:alpha|beta)(?: ?\d)?/i.exec(t+";"+(K&&A.appMinorVersion))||/\bMinefield\b/i.test(t)&&"a")&&(W=/b/i.test(k)?"beta":"alpha",q=q.replace(RegExp(k+"\\+?$"),"")+("beta"==W?U:F)+(/\d+\+?/.exec(k)||"")),"Fennec"==z||"Firefox"==z&&/\b(?:Android|Firefox OS)\b/.test($))z="Firefox Mobile";else if("Maxthon"==z&&q)q=q.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(X))"Xbox 360"==X&&($=null),"Xbox 360"==X&&/\bIEMobile\b/.test(t)&&V.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(z)&&(!z||X||/Browser|Mobi/.test(z))||"Windows CE"!=$&&!/Mobi/i.test(t))if("IE"==z&&K)try{null===_.external&&V.unshift("platform preview")}catch(t){V.unshift("embedded")}else(/\bBlackBerry\b/.test(X)||/\bBB10\b/.test(t))&&(k=(RegExp(X.replace(/ +/g," *")+"/([.\\d]+)","i").exec(t)||0)[1]||q)?(k=[k,/BB10/.test(t)],$=(k[1]?(X=null,Q="BlackBerry"):"Device Software")+" "+k[0],q=null):this!=l&&"Wii"!=X&&(K&&G||/Opera/.test(z)&&/\b(?:MSIE|Firefox)\b/i.test(t)||"Firefox"==z&&/\bOS X (?:\d+\.){2,}/.test($)||"IE"==z&&($&&!/^Win/.test($)&&q>5.5||/\bWindows XP\b/.test($)&&q>8||8==q&&!/\bTrident\b/.test(t)))&&!T.test(k=v.call(l,t.replace(T,"")+";"))&&k.name&&(k="ing as "+k.name+((k=k.version)?" "+k:""),T.test(z)?(/\bIE\b/.test(k)&&"Mac OS"==$&&($=null),k="identify"+k):(k="mask"+k,z=j?u(j.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(k)&&($=null),K||(q=null)),Y=["Presto"],V.push(k));else z+=" Mobile";(k=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(t)||0)[1])&&(k=[parseFloat(k.replace(/\.(\d)$/,".0$1")),k],"Safari"==z&&"+"==k[1].slice(-1)?(z="WebKit Nightly",W="alpha",q=k[1].slice(0,-1)):q!=k[1]&&q!=(k[2]=(/\bSafari\/([\d.]+\+?)/i.exec(t)||0)[1])||(q=null),k[1]=(/\bChrome\/([\d.]+)/i.exec(t)||0)[1],537.36==k[0]&&537.36==k[2]&&parseFloat(k[1])>=28&&"WebKit"==Y&&(Y=["Blink"]),K&&(I||k[1])?(Y&&(Y[1]="like Chrome"),k=k[1]||(k=k[0],k<530?1:k<532?2:k<532.05?3:k<533?4:k<534.03?5:k<534.07?6:k<534.1?7:k<534.13?8:k<534.16?9:k<534.24?10:k<534.3?11:k<535.01?12:k<535.02?"13+":k<535.07?15:k<535.11?16:k<535.19?17:k<536.05?18:k<536.1?19:k<537.01?20:k<537.11?"21+":k<537.13?23:k<537.18?24:k<537.24?25:k<537.36?26:"Blink"!=Y?"27":"28")):(Y&&(Y[1]="like Safari"),k=k[0],k=k<400?1:k<500?2:k<526?3:k<533?4:k<534?"4+":k<535?5:k<537?6:k<538?7:k<601?8:"8"),Y&&(Y[1]+=" "+(k+="number"==typeof k?".x":/[.+]/.test(k)?"":"+")),"Safari"==z&&(!q||parseInt(q)>45)&&(q=k)),
"Opera"==z&&(k=/\bzbov|zvav$/.exec($))?(z+=" ",V.unshift("desktop mode"),"zvav"==k?(z+="Mini",q=null):z+="Mobile",$=$.replace(RegExp(" *"+k+"$"),"")):"Safari"==z&&/\bChrome\b/.exec(Y&&Y[1])&&(V.unshift("desktop mode"),z="Chrome Mobile",q=null,/\bOS X\b/.test($)?(Q="Apple",$="iOS 4.3+"):$=null),q&&0==q.indexOf(k=/[\d.]+$/.exec($))&&t.indexOf("/"+k+"-")>-1&&($=p($.replace(k,""))),Y&&!/\b(?:Avant|Nook)\b/.test(z)&&(/Browser|Lunascape|Maxthon/.test(z)||"Safari"!=z&&/^iOS/.test($)&&/\bSafari\b/.test(Y[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(z)&&Y[1])&&(k=Y[Y.length-1])&&V.push(k),V.length&&(V=["("+V.join("; ")+")"]),Q&&X&&X.indexOf(Q)<0&&V.push("on "+Q),X&&V.push((/^on /.test(V[V.length-1])?"":"on ")+X),$&&(k=/ ([\d.+]+)$/.exec($),C=k&&"/"==$.charAt($.length-k[0].length-1),$={architecture:32,family:k&&!C?$.replace(k[0],""):$,version:k?k[1]:null,toString:function(){var t=this.version;return this.family+(t&&!C?" "+t:"")+(64==this.architecture?" 64-bit":"")}}),(k=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(H))&&!/\bi686\b/i.test(H)?($&&($.architecture=64,$.family=$.family.replace(RegExp(" *"+k),"")),z&&(/\bWOW64\b/i.test(t)||K&&/\w(?:86|32)$/.test(A.cpuClass||A.platform)&&!/\bWin64; x64\b/i.test(t))&&V.unshift("32-bit")):$&&/^OS X/.test($.family)&&"Chrome"==z&&parseFloat(q)>=39&&($.architecture=64),t||(t=null);var J={};return J.description=t,J.layout=Y&&Y[0],J.manufacturer=Q,J.name=z,J.prerelease=W,J.product=X,J.ua=t,J.version=z&&q,J.os=$||{architecture:null,family:null,version:null,toString:function(){return"null"}},J.parse=v,J.toString=m,J.version&&V.unshift(q),J.name&&V.unshift(z),$&&z&&($!=String($).split(" ")[0]||$!=z.split(" ")[0]&&!X)&&V.push(X?"("+$+")":"on "+$),V.length&&(J.description=V.join(" ")),J}var m={function:!0,object:!0},g=m[typeof window]&&window||this,y=g,_=m[typeof e]&&e,E=m[typeof t]&&t&&!t.nodeType&&t,A=_&&E&&"object"==typeof r&&r;!A||A.global!==A&&A.window!==A&&A.self!==A||(g=A);var b=Math.pow(2,53)-1,T=/\bOpera/,S=this,k=Object.prototype,C=k.hasOwnProperty,w=k.toString,R=v();g.platform=R,i=function(){return R}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))}).call(this)}).call(e,n(29)(t),function(){return this}())},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e,n){var i,r;i=[],r=function(){var t={VAST_AD:"vastAd",MEDIA_AD:"mediaAd",ANDO_RUN_SPOT:"andoRunSpot",TRITON_AD_PLATFORM:"tap"};return t}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i=n(8);t.exports={toSafeArray:function(t){return t?i.isArray(t)?t:[t]:[]}}},function(t,e,n){var i,r,a=n(41);i=[n(1),n(2),n(6),n(22),n(114)],r=function(t,e,n,i,r){function o(t,i,r){if(e.isArray(r)){var a=!1;return n.forEach(r,function(e,n){s(t,i,e)&&(a=!0)}),a}return s(t,i,r)}function s(t,e,n){return!(!u(t,e)||t[e].toString()!=n.toString())}function u(t,e){return!(!t.hasOwnProperty(e)||null==t[e]||""==t[e].toString()||void 0===t[e])}var l=t([r],{CATEGORY_INIT:"Init",CATEGORY_STREAMING:"Streaming",CATEGORY_AD:"Ad",CATEGORY_ON_DEMAND:"On Demand",CATEGORY_LISTENER:"Listener",CATEGORY_DEFAULT:"Default",ACTION_CONFIG:"Config",ACTION_CONNECTION:"Connection",ACTION_PREROLL:"Preroll",ACTION_PLAY:"Play",ACTION_STOP:"Stop",ACTION_PAUSE:"Pause",ACTION_RESUME:"Resume",ACTION_TRACKING:"Tracking",ACTION_MUTE:"Mute",ACTION_UNMUTE:"Unmute",LABEL_SUCCESS:"Success",LABEL_ERROR:"Error",LABEL_STREAM_ERROR:"Stream Error",LABEL_GEOBLOCKING:"Geoblocking",LABEL_UNAVAILABLE:"Unavailable",LABEL_TRACK:"Track",LABEL_CUSTOM:"Custom",LABEL_SPEECH:"Speech",LABEL_BREAK:"Break",LABEL_END_BREAK:"End Break",LABEL_SMART:"Smart",LABEL_DUMB:"Dumb",constructor:function(){this.inherited(arguments),this.broadcasters=Array()},requestGA:function(t,n,i,r,a){var o=this,s={};if(e.mixin(s,{ec:t}),e.mixin(s,{ea:n}),e.mixin(s,{el:i}),e.mixin(s,{t:"event"}),e.mixin(s,r),e.mixin(s,a),this.validate(s,t,n,i))if(s[this.DIM_STATION]||s[this.DIM_MOUNT])if(this.broadcasters[s[this.DIM_MOUNT]]){var u={};u[this.DIM_BROADCASTER]=this.broadcasters[s[this.DIM_MOUNT]],e.mixin(s,u),this.request(s)}else this._getBroadcaster(s[this.DIM_MOUNT]).then(function(t){o.broadcasters[s[o.DIM_MOUNT]]=t;var n={};n[o.DIM_BROADCASTER]=t,e.mixin(s,n),o.request(s)},function(){o.request(s)});else this.request(s)},_getBroadcaster:function(){var t=new i;return t.reject(),t.promise},validate:function(t,e,n,i){var r=!1;if(this.validateType(t))switch(e){case this.CATEGORY_INIT:r=this.validateInitConfig(t);break;case this.CATEGORY_STREAMING:switch(n){case this.ACTION_CONNECTION:if(this.validateStreamingConnection(t))switch(i){case this.LABEL_SUCCESS:r=this.validateStreamingConnectionSuccess(t);break;case this.LABEL_STREAM_ERROR:r=this.validateStreamingConnectionStreamError(t);break;case this.LABEL_GEOBLOCKING:r=this.validateStreamingConnectionGeoblocking(t);break;default:r=!0}else r=!1}break;case this.CATEGORY_AD:switch(n){case this.ACTION_PREROLL:if(!this.validateAdPreroll(t))return!1;r=!0}break;case this.CATEGORY_ON_DEMAND:r=this.validateOnDemand(t);break;case this.CATEGORY_LISTENER:r=this.validateListener(t);break;case this.CATEGORY_DEFAULT:r=!0}return r},validateType:function(t){return!!o(t,this.TYPE,"event")},validateInitConfig:function(t){return!!o(t,this.CATEGORY,"Init")&&(!!o(t,this.ACTION,"Config")&&(!!o(t,this.LABEL,["Success","Error"])&&(!!o(t,this.DIM_TECH,["Flash","Html5"])&&(!!o(t,this.DIM_ADBLOCK,["true","false"])&&(!!o(t,this.DIM_SBM,["true","false"])&&(!!o(t,this.DIM_HLS,["true","false"])&&(!!o(t,this.DIM_AUDIO_ADAPTIVE,["true","false"])&&(!!o(t,this.DIM_IDSYNC,["true","false"])&&!!u(t,this.METRIC_LOAD_TIME)))))))))},validateStreamingConnectionSuccess:function(t){return!!o(t,this.DIM_MEDIA_TYPE,[a.AUDIO,a.VIDEO])&&(!!o(t,this.DIM_HLS,["true","false"])&&(!!o(t,this.DIM_AUDIO_ADAPTIVE,["true","false"])&&!!u(t,this.METRIC_CONNECTION_TIME)))},validateStreamingConnectionStreamError:function(t){return!!o(t,this.DIM_MEDIA_FORMAT,["AAC","MP3","FLV"])&&(!!o(t,this.DIM_HLS,["true","false"])&&(!!o(t,this.DIM_AUDIO_ADAPTIVE,["true","false"])&&!!u(t,this.METRIC_STREAM_ERROR_TIME)))},validateStreamingConnectionGeoblocking:function(t){return!!u(t,this.DIM_ALTERNATE_CONTENT,["true","false"])},validateStreamingConnection:function(t){return!!o(t,this.CATEGORY,"Streaming")&&(!!o(t,this.ACTION,"Connection")&&(!!o(t,this.LABEL,["Success","Unavailable","Stream Error","Geoblocking","Failed"])&&!(!u(t,this.DIM_MOUNT)&&!u(t,this.DIM_STATION))))},validateAdPreroll:function(t){return!!o(t,this.CATEGORY,"Ad")&&(!!o(t,this.ACTION,"Preroll")&&(!!o(t,this.LABEL,["Success","Error"])&&(!!o(t,this.DIM_AD_SOURCE,["TAP","CM3","Others"])&&(!!o(t,this.DIM_AD_FORMAT,["VAST","DAAST"])&&(!!o(t,this.DIM_AD_PARSER,["IMA","VASTModule","Direct"])&&!!u(t,this.METRIC_CONNECTION_TIME))))))},validateOnDemand:function(t){return!!o(t,this.CATEGORY,"On Demand")&&(!!o(t,this.ACTION,"Play")&&!!o(t,this.LABEL,["Success","Error"]))},validateListener:function(t){return!!o(t,this.CATEGORY,"Listener")&&(!!o(t,this.ACTION,"Tracking")&&(!!o(t,this.LABEL,["Smart","Dumb"])&&!(!u(t,this.DIM_MOUNT)&&!u(t,this.DIM_STATION))))}});return null==this.GAEventRequestInstance&&(this.GAEventRequestInstance=new l),this.GAEventRequestInstance}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r,a=n(14);i=[n(1),n(2),n(6),n(3),n(13)],r=function(t,e,n,i,r){var o=t([r],{constructor:function(t,e){this.data=t,this.platformId=e,this.url=t.staticURL,this.id=t.id,this.listeners=[],this.platform=new a(e),this.alreadyFetched=!1},getStaticUrl:function(){return this.data.staticURL},getDynamicUrl:function(){return this.platform.endpoint.npe},getDynamicArtistUrl:function(t){return this.getDynamicUrl()+"artist/"+t},getDynamicAlbumUrl:function(t){return this.getDynamicUrl()+"album/"+t},getDynamicTrackUrl:function(t){return this.getDynamicUrl()+"track/"+t},getDynamicArtistPictureUrl:function(t,e){return this.getDynamicUrl()+"artist/"+t+"/picture/"+e},getDynamicAlbumPictureUrl:function(t,e){return this.getDynamicUrl()+"album/"+t+"/picture/"+e},notify:function(t,e){this.emit(t,e)},getRequestArgs:function(){return{handleAs:"json",preventCache:!1,headers:{"X-Requested-With":null,"Content-Type":"text/plain; charset=utf-8"}}},addEventListener:function(t,r){var a=-1;n.forEach(this.listeners,function(e,n){e.eventName==t&&e.callback==r&&(a=n)},this),a==-1&&this.listeners.push({eventName:t,callback:r,listener:i(this,t,e.hitch(this,r))})},removeEventListener:function(t,e){var i=-1;n.forEach(this.listeners,function(n,r){n.eventName==t&&n.callback==e&&(i=r)},this),i>-1&&(this.listeners[i].listener.remove(),this.listeners.splice(i,1))}});return o}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[],r=function(){"use strict";function t(t,e,n,r){var a,o=t[e],s="around"==e;if(s){var u=n(function(){return o.advice(this,arguments)});a={remove:function(){u&&(u=t=n=null)},advice:function(t,e){return u?u.apply(t,e):o.advice(t,e)}}}else a={remove:function(){if(a.advice){var i=a.previous,r=a.next;r||i?(i?i.next=r:t[e]=r,r&&(r.previous=i)):delete t[e],t=n=a.advice=null}},id:i++,advice:n,receiveArguments:r};if(o&&!s)if("after"==e){for(;o.next&&(o=o.next););o.next=a,a.previous=o}else"before"==e&&(t[e]=a,a.next=o,o.previous=a);else t[e]=a;return a}function e(e){return function(r,a,o,s){var u,l=r[a];l&&l.target==r||(r[a]=u=function(){for(var t=i,e=arguments,r=u.before;r;)e=r.advice.apply(this,e)||e,r=r.next;if(u.around)var a=u.around.advice(this,e);for(var o=u.after;o&&o.id<t;){if(o.receiveArguments){var s=o.advice.apply(this,e);a=s===n?a:s}else a=o.advice.call(this,a,e);o=o.next}return a},l&&(u.around={advice:function(t,e){return l.apply(t,e)}}),u.target=r);var c=t(u||l,e,o,s);return o=null,c}}var n,i=0,r=e("after"),a=e("before"),o=e("around");return{before:a,around:o,after:r}}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(36)],r=function(t){return t("RequestError",function(t,e){this.response=e})}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(2)],r=function(t){return function(e,n,i,r){i=i||Error;var a=function(t){if(i===Error){Error.captureStackTrace&&Error.captureStackTrace(this,a);var e,r=Error.call(this,t);for(e in r)r.hasOwnProperty(e)&&(this[e]=r[e]);this.message=t,this.stack=r.stack}else i.apply(this,arguments);n&&n.apply(this,arguments)};return a.prototype=t.delegate(i.prototype,r),a.prototype.name=e,a.prototype.constructor=a,a}}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,i;!function(e){t.exports=e()}(function(){var t;return function t(e,n,r){function a(s,u){if(!n[s]){if(!e[s]){var l="function"==typeof i&&i;if(!u&&l)return i(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var d=n[s]={exports:{}};e[s][0].call(d.exports,function(t){var n=e[s][1][t];return a(n?n:t)},d,d.exports,t,e,n,r)}return n[s].exports}for(var o="function"==typeof i&&i,s=0;s<r.length;s++)a(r[s]);return a}({1:[function(t,e,n){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return"function"==typeof t}function a(t){return"number"==typeof t}function o(t){return"object"==typeof t&&null!==t}function s(t){return void 0===t}e.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(t){if(!a(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},i.prototype.emit=function(t){var e,n,i,a,u,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;var c=new Error('Uncaught, unspecified "error" event. ('+e+")");throw c.context=e,c}if(n=this._events[t],s(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(o(n))for(a=Array.prototype.slice.call(arguments,1),l=n.slice(),i=l.length,u=0;u<i;u++)l[u].apply(this,a);return!0},i.prototype.addListener=function(t,e){var n;if(!r(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned&&(n=s(this._maxListeners)?i.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(t,e){function n(){this.removeListener(t,n),i||(i=!0,e.apply(this,arguments))}if(!r(e))throw TypeError("listener must be a function");var i=!1;return n.listener=e,this.on(t,n),this},i.prototype.removeListener=function(t,e){var n,i,a,s;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],a=n.length,i=-1,n===e||r(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(n)){for(s=a;s-- >0;)if(n[s]===e||n[s].listener&&n[s].listener===e){i=s;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},i.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],r(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},i.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},i.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(r(e))return 1;if(e)return e.length}return 0},i.listenerCount=function(t,e){return t.listenerCount(e)}},{}],2:[function(e,n,i){!function(e){var r=/^([^#]*)(.*)$/,a=/^([^\?]*)(.*)$/,o=/^(([a-z]+:\/\/)?[^:\/]+(?::[0-9]+)?)?(\/?.*)$/i,s={buildAbsoluteURL:function(t,e){if(e=e.trim(),/^[a-z]+:/i.test(e))return e;var n=null,i=null,u=r.exec(e);u&&(i=u[2],e=u[1]);var l=a.exec(e);l&&(n=l[2],e=l[1]);var c=r.exec(t);c&&(t=c[1]);var d=a.exec(t);d&&(t=d[1]);var h=o.exec(t);if(!h)throw new Error("Error trying to parse base URL.");var f=h[2]||"",p=h[1]||"",v=h[3];0!==v.indexOf("/")&&""!==p&&(v="/"+v);var m=null;return m=/^\/\//.test(e)?f+s.buildAbsolutePath("",e.substring(2)):/^\//.test(e)?p+"/"+s.buildAbsolutePath("",e.substring(1)):s.buildAbsolutePath(p+v,e),n&&(m+=n),i&&(m+=i),m},buildAbsolutePath:function(t,e){for(var n,i,r=e,a="",o=t.replace(/[^\/]*$/,r.replace(/(\/|^)(?:\.?\/+)+/g,"$1")),s=0;i=o.indexOf("/../",s),i>-1;s=i+n)n=/^\/(?:\.\.\/)*/.exec(o.slice(i))[0].length,a=(a+o.substring(s,i)).replace(new RegExp("(?:\\/+[^\\/]*){0,"+(n-1)/3+"}$"),"/");return a+o.substr(s)}};"object"==typeof i&&"object"==typeof n?n.exports=s:"function"==typeof t&&t.amd?t([],function(){return s}):"object"==typeof i?i.URLToolkit=s:e.URLToolkit=s}(this)},{}],3:[function(t,e,n){var i=arguments[3],r=arguments[4],a=arguments[5],o=JSON.stringify;e.exports=function(t,e){function n(t){m[t]=!0;for(var e in r[t][1]){var i=r[t][1][e];m[i]||n(i)}}for(var s,u=Object.keys(a),l=0,c=u.length;l<c;l++){var d=u[l],h=a[d].exports;if(h===t||h&&h.default===t){s=d;break}}if(!s){s=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var f={},l=0,c=u.length;l<c;l++){var d=u[l];f[d]=d}r[s]=[Function(["require","module","exports"],"("+t+")(self)"),f]}var p=Math.floor(Math.pow(16,8)*Math.random()).toString(16),v={};v[s]=s,r[p]=[Function(["require"],"var f = require("+o(s)+");(f.default ? f.default : f)(self);"),v];var m={};n(p);var g="("+i+")({"+Object.keys(m).map(function(t){return o(t)+":["+r[t][0]+","+o(r[t][1])+"]"}).join(",")+"},{},["+o(p)+"])",y=window.URL||window.webkitURL||window.mozURL||window.msURL,_=new Blob([g],{type:"text/javascript"});if(e&&e.bare)return _;var E=y.createObjectURL(_),A=new Worker(E);return A.objectURL=E,A}},{}],4:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=t(28),l=i(u),c=t(27),d=i(c),h=t(30),f=i(h),p=t(26),v=t(45),m=t(9),g=i(m),y=function(t){function e(t){r(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,l.default.FRAG_LOADING,l.default.FRAG_LOADED,l.default.FRAG_BUFFERED,l.default.ERROR));return n.lastLoadedFragLevel=0,n._autoLevelCapping=-1,n._nextAutoLevel=-1,n.hls=t,n.onCheck=n.abandonRulesCheck.bind(n),n}return o(e,t),s(e,[{key:"destroy",value:function(){this.clearTimer(),d.default.prototype.destroy.call(this)}},{key:"onFragLoading",value:function(t){var e=t.frag;if("main"===e.type){if(this.timer||(this.timer=setInterval(this.onCheck,100)),!this.bwEstimator){var n=this.hls,i=t.frag.level,r=n.levels[i].details.live,a=n.config,o=void 0,s=void 0;r?(o=a.abrEwmaFastLive,s=a.abrEwmaSlowLive):(o=a.abrEwmaFastVoD,s=a.abrEwmaSlowVoD),this.bwEstimator=new g.default(n,s,o,a.abrEwmaDefaultEstimate)}this.fragCurrent=e}}},{key:"abandonRulesCheck",value:function(){var t=this.hls,e=t.media,n=this.fragCurrent,i=n.loader,r=this.minAutoLevel;if(!i||i.stats&&i.stats.aborted)return v.logger.warn("frag loader destroy or aborted, disarm abandonRules"),void this.clearTimer();var a=i.stats;if(e&&(!e.paused&&0!==e.playbackRate||!e.readyState)&&n.autoLevel&&n.level){var o=performance.now()-a.trequest,s=Math.abs(e.playbackRate);if(o>500*n.duration/s){var u=t.levels,c=Math.max(1,a.bw?a.bw/8:1e3*a.loaded/o),d=u[n.level],h=d.realBitrate?Math.max(d.realBitrate,d.bitrate):d.bitrate,p=a.total?a.total:Math.max(a.loaded,Math.round(n.duration*h/8)),m=e.currentTime,g=(p-a.loaded)/c,y=(f.default.bufferInfo(e,m,t.config.maxBufferHole).end-m)/s;if(y<2*n.duration/s&&g>y){var _=void 0,E=void 0;for(E=n.level-1;E>r;E--){var A=u[E].realBitrate?Math.max(u[E].realBitrate,u[E].bitrate):u[E].bitrate;if(_=n.duration*A/(6.4*c),_<y)break}_<g&&(v.logger.warn("loading too slow, abort fragment loading and switch to level "+E+":fragLoadedDelay["+E+"]<fragLoadedDelay["+(n.level-1)+"];bufferStarvationDelay:"+_.toFixed(1)+"<"+g.toFixed(1)+":"+y.toFixed(1)),t.nextLoadLevel=E,this.bwEstimator.sample(o,a.loaded),i.abort(),this.clearTimer(),t.trigger(l.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:n,stats:a}))}}}}},{key:"onFragLoaded",value:function(t){var e=t.frag;if("main"===e.type){this.clearTimer(),this.lastLoadedFragLevel=e.level,this._nextAutoLevel=-1;var n=this.hls.levels[e.level],i=(n.loaded?n.loaded.bytes:0)+t.stats.loaded,r=(n.loaded?n.loaded.duration:0)+t.frag.duration;if(n.loaded={bytes:i,duration:r},n.realBitrate=Math.round(8*i/r),t.frag.bitrateTest){var a=t.stats;a.tparsed=a.tbuffered=a.tload,this.onFragBuffered(t)}}}},{key:"onFragBuffered",value:function(t){var e=t.stats,n=t.frag;if(e.aborted!==!0&&1===n.loadCounter&&"main"===n.type&&(!n.bitrateTest||e.tload===e.tbuffered)){var i=e.tparsed-e.trequest;v.logger.log("latency/loading/parsing/append/kbps:"+Math.round(e.tfirst-e.trequest)+"/"+Math.round(e.tload-e.tfirst)+"/"+Math.round(e.tparsed-e.tload)+"/"+Math.round(e.tbuffered-e.tparsed)+"/"+Math.round(8*e.loaded/(e.tbuffered-e.trequest))),this.bwEstimator.sample(i,e.loaded),n.bitrateTest?this.bitrateTestDelay=i/1e3:this.bitrateTestDelay=0}}},{key:"onError",value:function(t){switch(t.details){case p.ErrorDetails.FRAG_LOAD_ERROR:case p.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}}},{key:"clearTimer",value:function(){this.timer&&(clearInterval(this.timer),this.timer=null)}},{key:"findBestLevel",value:function(t,e,n,i,r,a,o,s,u){for(var l=r;l>=i;l--){var c=u[l],d=c.details,h=d?d.totalduration/d.fragments.length:e,f=!!d&&d.live,p=void 0;p=l<=t?o*n:s*n;var m=u[l].realBitrate?Math.max(u[l].realBitrate,u[l].bitrate):u[l].bitrate,g=m*h/p;if(v.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+l+"/"+Math.round(p)+"/"+m+"/"+h+"/"+a+"/"+g),p>m&&(!g||f||g<a))return l}return-1}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(t){this._autoLevelCapping=t}},{key:"nextAutoLevel",get:function(){var t=this._nextAutoLevel,e=this.bwEstimator,n=this.hls,i=n.levels,r=n.config.minAutoBitrate;if(!(t===-1||e&&e.canEstimate()))return Math.min(t,this.maxAutoLevel);var a=this.nextABRAutoLevel;if(t!==-1&&(a=Math.min(t,a)),void 0!==r)for(var o=i[a].realBitrate?Math.max(i[a].realBitrate,i[a].bitrate):i[a].bitrate;o<r;)a++;return a},set:function(t){this._nextAutoLevel=t}},{key:"minAutoLevel",get:function(){for(var t=this.hls,e=t.levels,n=t.config.minAutoBitrate,i=e?e.length:0,r=0;r<i;r++){var a=e[r].realBitrate?Math.max(e[r].realBitrate,e[r].bitrate):e[r].bitrate;if(a>n)return r}return 0}},{key:"maxAutoLevel",get:function(){var t,e=this.hls.levels,n=this._autoLevelCapping;return t=n===-1&&e&&e.length?e.length-1:n}},{key:"nextABRAutoLevel",get:function(){var t=this.hls,e=this.maxAutoLevel,n=t.levels,i=t.config,r=this.minAutoLevel,a=t.media,o=this.lastLoadedFragLevel,s=this.fragCurrent?this.fragCurrent.duration:0,u=a?a.currentTime:0,l=a&&0!==a.playbackRate?Math.abs(a.playbackRate):1,c=this.bwEstimator?this.bwEstimator.getEstimate():i.abrEwmaDefaultEstimate,d=(f.default.bufferInfo(a,u,i.maxBufferHole).end-u)/l,h=this.findBestLevel(o,s,c,r,e,d,i.abrBandWidthFactor,i.abrBandWidthUpFactor,n);if(h>=0)return h;v.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var p=s?Math.min(s,i.maxStarvationDelay):i.maxStarvationDelay,m=i.abrBandWidthFactor,g=i.abrBandWidthUpFactor;if(0===d){var y=this.bitrateTestDelay;if(y){var _=s?Math.min(s,i.maxLoadingDelay):i.maxLoadingDelay;p=_-y,v.logger.trace("bitrate test took "+Math.round(1e3*y)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*p)+" ms"),m=g=1}}return h=this.findBestLevel(o,s,c,r,e,d+p,m,g,n),Math.max(h,0)}}]),e}(d.default);n.default=y},{26:26,27:27,28:28,30:30,45:45,9:9}],5:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=t(41),c=i(l),d=t(30),h=i(d),f=t(22),p=i(f),v=t(28),m=i(v),g=t(27),y=i(g),_=t(31),E=i(_),A=t(46),b=i(A),T=t(26),S=t(45),k={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS"},C=function(t){function e(t){r(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,m.default.MEDIA_ATTACHED,m.default.MEDIA_DETACHING,m.default.AUDIO_TRACKS_UPDATED,m.default.AUDIO_TRACK_SWITCHING,m.default.AUDIO_TRACK_LOADED,m.default.KEY_LOADED,m.default.FRAG_LOADED,m.default.FRAG_PARSING_INIT_SEGMENT,m.default.FRAG_PARSING_DATA,m.default.FRAG_PARSED,m.default.ERROR,m.default.BUFFER_CREATED,m.default.BUFFER_APPENDED,m.default.BUFFER_FLUSHED,m.default.INIT_PTS_FOUND));return n.config=t.config,n.audioCodecSwap=!1,n.ticks=0,n._state=k.STOPPED,n.ontick=n.tick.bind(n),n.initPTS=[],n.waitingFragment=null,n}return o(e,t),u(e,[{key:"destroy",value:function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),y.default.prototype.destroy.call(this),this.state=k.STOPPED}},{key:"onInitPtsFound",value:function(t){var e=t.id,n=t.cc,i=t.initPTS;"main"===e&&(this.initPTS[n]=i,S.logger.log("InitPTS for cc:"+n+" found from video track:"+i),this.state===k.WAITING_INIT_PTS&&(S.logger.log("sending pending audio frag to demuxer"),this.state=k.FRAG_LOADING,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null))}},{key:"startLoad",value:function(t){if(this.tracks){var e=this.lastCurrentTime;this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.fragLoadError=0,e>0&&t===-1?(S.logger.log("audio:override startPosition with lastCurrentTime @"+e.toFixed(3)),this.state=k.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:t,this.state=k.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=t,this.state=k.STOPPED}},{key:"stopLoad",value:function(){var t=this.fragCurrent;t&&(t.loader&&t.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=k.STOPPED}},{key:"tick",value:function(){this.ticks++,1===this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)}},{key:"doTick",value:function(){var t,e,n,i,r,a,o=this,u=this.hls,l=u.config,d=function(){switch(o.state){case k.ERROR:case k.PAUSED:case k.BUFFER_FLUSHING:break;case k.STARTING:o.state=k.WAITING_TRACK,o.loadedmetadata=!1;break;case k.IDLE:var s=o.tracks;if(!s)break;if(!o.media&&(o.startFragRequested||!l.startFragPrefetch))break;t=o.loadedmetadata?o.media.currentTime:o.nextLoadPosition;var d=o.mediaBuffer?o.mediaBuffer:o.media,f=h.default.bufferInfo(d,t,l.maxBufferHole),p=f.len,v=f.end,g=o.fragPrevious,y=l.maxMaxBufferLength,_=o.audioSwitch,E=o.trackId;if(p<y&&E<s.length){if(n=s[E].details,"undefined"==typeof n){o.state=k.WAITING_TRACK;break}if(!_&&!n.live&&g&&g.sn===n.endSN&&(!o.media.seeking||o.media.duration-v<g.duration/2)){o.hls.trigger(m.default.BUFFER_EOS,{type:"audio"}),o.state=k.ENDED;break}var A=n.fragments,b=A.length,C=A[0].start,w=A[b-1].start+A[b-1].duration,R=void 0;if(_)if(n.live&&!n.PTSKnown)S.logger.log("switching audiotrack, live stream, unknown PTS,load first fragment"),v=0;else if(v=t,n.PTSKnown&&t<C){if(!(f.end>C||f.nextStart))return{v:void 0};S.logger.log("alt audio track ahead of main track, seek to start of alt audio track"),o.media.currentTime=C+.05}if(v<=C){if(R=A[0],n.live&&R.loadIdx&&R.loadIdx===o.fragLoadIdx){var I=f.nextStart?f.nextStart:C;return S.logger.log("no alt audio available @currentTime:"+o.media.currentTime+", seeking @"+(I+.05)),o.media.currentTime=I+.05,{v:void 0}}}else!function(){var t=void 0,e=l.maxFragLookUpTolerance;v<w?(v>w-e&&(e=0),t=c.default.search(A,function(t){return t.start+t.duration-e<=v?1:t.start-e>v?-1:0}),t||S.logger.log("frag not found @bufferEnd/start:"+v+"/"+C)):t=A[b-1],t&&(R=t,C=t.start,g&&R.level===g.level&&R.sn===g.sn&&(R.sn<n.endSN?(R=A[R.sn+1-n.startSN],S.logger.log("SN just loaded, load next one: "+R.sn)):R=null))}();if(R)if(null!=R.decryptdata.uri&&null==R.decryptdata.key)S.logger.log("Loading key for "+R.sn+" of ["+n.startSN+" ,"+n.endSN+"],track "+E),o.state=k.KEY_LOADING,u.trigger(m.default.KEY_LOADING,{frag:R});else{if(S.logger.log("Loading "+R.sn+" of ["+n.startSN+" ,"+n.endSN+"],track "+E+", currentTime:"+t+",bufferEnd:"+v.toFixed(3)),void 0!==o.fragLoadIdx?o.fragLoadIdx++:o.fragLoadIdx=0,R.loadCounter){R.loadCounter++;var L=l.fragLoadingLoopThreshold;if(R.loadCounter>L&&Math.abs(o.fragLoadIdx-R.loadIdx)<L)return u.trigger(m.default.ERROR,{type:T.ErrorTypes.MEDIA_ERROR,details:T.ErrorDetails.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:R}),{v:void 0}}else R.loadCounter=1;R.loadIdx=o.fragLoadIdx,o.fragCurrent=R,o.startFragRequested=!0,o.nextLoadPosition=R.start+R.duration,u.trigger(m.default.FRAG_LOADING,{frag:R}),o.state=k.FRAG_LOADING}}break;case k.WAITING_TRACK:e=o.tracks[o.trackId],e&&e.details&&(o.state=k.IDLE);break;case k.FRAG_LOADING_WAITING_RETRY:i=performance.now(),r=o.retryDate,d=o.media,a=d&&d.seeking,(!r||i>=r||a)&&(S.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"),o.state=k.IDLE);break;case k.WAITING_INIT_PTS:case k.STOPPED:case k.FRAG_LOADING:case k.PARSING:case k.PARSED:case k.ENDED:}}();if("object"===("undefined"==typeof d?"undefined":s(d)))return d.v}},{key:"onMediaAttached",value:function(t){var e=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),e.addEventListener("seeking",this.onvseeking),e.addEventListener("ended",this.onvended);var n=this.config;this.tracks&&n.autoStartLoad&&this.startLoad(n.startPosition)}},{key:"onMediaDetaching",value:function(){var t=this.media;t&&t.ended&&(S.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var e=this.tracks;e&&e.forEach(function(t){t.details&&t.details.fragments.forEach(function(t){t.loadCounter=void 0})}),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()}},{key:"onMediaSeeking",value:function(){this.state===k.ENDED&&(this.state=k.IDLE),this.media&&(this.lastCurrentTime=this.media.currentTime),void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),this.tick()}},{key:"onMediaEnded",value:function(){this.startPosition=this.lastCurrentTime=0}},{key:"onAudioTracksUpdated",value:function(t){S.logger.log("audio tracks updated"),this.tracks=t.audioTracks}},{key:"onAudioTrackSwitching",value:function(t){var e=!!t.url;this.trackId=t.id,this.state=k.IDLE,this.fragCurrent=null,this.state=k.PAUSED,this.waitingFragment=null,e?this.timer||(this.timer=setInterval(this.ontick,100)):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),e&&(this.audioSwitch=!0,this.state=k.IDLE,void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold)),this.tick()}},{key:"onAudioTrackLoaded",value:function(t){var e=t.details,n=t.id,i=this.tracks[n],r=e.totalduration,a=0;if(S.logger.log("track "+n+" loaded ["+e.startSN+","+e.endSN+"],duration:"+r),
e.live){var o=i.details;o&&e.fragments.length>0?(E.default.mergeDetails(o,e),a=e.fragments[0].start,e.PTSKnown?S.logger.log("live audio playlist sliding:"+a.toFixed(3)):S.logger.log("live audio playlist - outdated PTS, unknown sliding")):(e.PTSKnown=!1,S.logger.log("live audio playlist - first load, unknown sliding"))}else e.PTSKnown=!1;if(i.details=e,!this.startFragRequested){if(this.startPosition===-1){var s=e.startTimeOffset;isNaN(s)?this.startPosition=0:(S.logger.log("start time offset found in playlist, adjust startPosition to "+s),this.startPosition=s)}this.nextLoadPosition=this.startPosition}this.state===k.WAITING_TRACK&&(this.state=k.IDLE),this.tick()}},{key:"onKeyLoaded",value:function(){this.state===k.KEY_LOADING&&(this.state=k.IDLE,this.tick())}},{key:"onFragLoaded",value:function(t){var e=this.fragCurrent;if(this.state===k.FRAG_LOADING&&e&&"audio"===t.frag.type&&t.frag.level===e.level&&t.frag.sn===e.sn){this.state=k.PARSING,this.stats=t.stats;var n=this.tracks[this.trackId],i=n.details,r=i.totalduration,a=e.start,o=e.level,s=e.sn,u=e.cc,l=this.config.defaultAudioCodec||n.audioCodec;this.appended=!1,this.demuxer||(this.demuxer=new p.default(this.hls,"audio"));var c=this.initPTS[u];if(void 0!==c){this.pendingBuffering=!0,S.logger.log("Demuxing "+s+" of ["+i.startSN+" ,"+i.endSN+"],track "+o);var d=!1;this.demuxer.push(t.payload,l,null,a,u,o,s,r,e.decryptdata,d,c)}else S.logger.log("unknown video PTS for continuity counter "+u+", waiting for video PTS before demuxing audio frag "+s+" of ["+i.startSN+" ,"+i.endSN+"],track "+o),this.waitingFragment=t,this.state=k.WAITING_INIT_PTS}this.fragLoadError=0}},{key:"onFragParsingInitSegment",value:function(t){var e=this.fragCurrent;if(e&&"audio"===t.id&&t.sn===e.sn&&t.level===e.level&&this.state===k.PARSING){var n=t.tracks,i=void 0;if(n.video&&delete n.video,i=n.audio){i.levelCodec="mp4a.40.2",i.id=t.id,this.hls.trigger(m.default.BUFFER_CODECS,n),S.logger.log("audio track:audio,container:"+i.container+",codecs[level/parsed]=["+i.levelCodec+"/"+i.codec+"]");var r=i.initSegment;if(r){var a={type:"audio",data:r,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[a]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(m.default.BUFFER_APPENDING,a))}this.tick()}}}},{key:"onFragParsingData",value:function(t){var e=this,n=this.fragCurrent;n&&"audio"===t.id&&"audio"===t.type&&t.sn===n.sn&&t.level===n.level&&this.state===k.PARSING&&!function(){var n=e.trackId,i=e.tracks[n],r=e.fragCurrent,a=e.hls;S.logger.log("parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb),E.default.updateFragPTSDTS(i.details,r.sn,t.startPTS,t.endPTS);var o=e.audioSwitch,s=e.media,u=!1;if(o&&s)if(s.readyState){var l=s.currentTime;S.logger.log("switching audio track : currentTime:"+l),l>=t.startPTS&&(S.logger.log("switching audio track : flushing all audio"),e.state=k.BUFFER_FLUSHING,a.trigger(m.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),u=!0,e.audioSwitch=!1,a.trigger(m.default.AUDIO_TRACK_SWITCHED,{id:n}))}else e.audioSwitch=!1,a.trigger(m.default.AUDIO_TRACK_SWITCHED,{id:n});var c=e.pendingData;e.audioSwitch||([t.data1,t.data2].forEach(function(e){e&&c.push({type:t.type,data:e,parent:"audio",content:"data"})}),!u&&c.length&&(c.forEach(function(t){e.pendingBuffering=!0,e.hls.trigger(m.default.BUFFER_APPENDING,t)}),e.pendingData=[],e.appended=!0)),e.tick()}()}},{key:"onFragParsed",value:function(t){var e=this.fragCurrent;e&&"audio"===t.id&&t.sn===e.sn&&t.level===e.level&&this.state===k.PARSING&&(this.stats.tparsed=performance.now(),this.state=k.PARSED,this._checkAppendedParsed())}},{key:"onBufferCreated",value:function(t){var e=t.tracks.audio;e&&(this.mediaBuffer=e.buffer,this.loadedmetadata=!0)}},{key:"onBufferAppended",value:function(t){if("audio"===t.parent){var e=this.state;e!==k.PARSING&&e!==k.PARSED||(this.pendingBuffering=t.pending>0,this._checkAppendedParsed())}}},{key:"_checkAppendedParsed",value:function(){if(!(this.state!==k.PARSED||this.appended&&this.pendingBuffering)){var t=this.fragCurrent,e=this.stats,n=this.hls;if(t){this.fragPrevious=t,e.tbuffered=performance.now(),n.trigger(m.default.FRAG_BUFFERED,{stats:e,frag:t,id:"audio"});var i=this.mediaBuffer?this.mediaBuffer:this.media;S.logger.log("audio buffered : "+b.default.toString(i.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,n.trigger(m.default.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=k.IDLE}this.tick()}}},{key:"onError",value:function(t){var e=t.frag;if(!e||"audio"===e.type)switch(t.details){case T.ErrorDetails.FRAG_LOAD_ERROR:case T.ErrorDetails.FRAG_LOAD_TIMEOUT:if(!t.fatal){var n=this.fragLoadError;n?n++:n=1;var i=this.config;if(n<=i.fragLoadingMaxRetry){this.fragLoadError=n,e.loadCounter=0;var r=Math.min(Math.pow(2,n-1)*i.fragLoadingRetryDelay,i.fragLoadingMaxRetryTimeout);S.logger.warn("audioStreamController: frag loading failed, retry in "+r+" ms"),this.retryDate=performance.now()+r,this.state=k.FRAG_LOADING_WAITING_RETRY}else S.logger.error("audioStreamController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.hls.trigger(m.default.ERROR,t),this.state=k.ERROR}break;case T.ErrorDetails.FRAG_LOOP_LOADING_ERROR:case T.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case T.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case T.ErrorDetails.KEY_LOAD_ERROR:case T.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==k.ERROR&&(this.state=t.fatal?k.ERROR:k.IDLE,S.logger.warn("audioStreamController: "+t.details+" while loading frag,switch to "+this.state+" state ..."))}}},{key:"onBufferFlushed",value:function(){var t=this,e=this.pendingData;e&&e.length?(S.logger.log("appending pending audio data on Buffer Flushed"),e.forEach(function(e){t.hls.trigger(m.default.BUFFER_APPENDING,e)}),this.appended=!0,this.pendingData=[],this.state=k.PARSED):(this.state=k.IDLE,this.fragPrevious=null,this.tick())}},{key:"state",set:function(t){if(this.state!==t){var e=this.state;this._state=t,S.logger.log("audio stream:"+e+"->"+t)}},get:function(){return this._state}}]),e}(y.default);n.default=C},{22:22,26:26,27:27,28:28,30:30,31:31,41:41,45:45,46:46}],6:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=t(28),l=i(u),c=t(27),d=i(c),h=t(45),f=function(t){function e(t){r(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,l.default.MANIFEST_LOADING,l.default.MANIFEST_LOADED,l.default.AUDIO_TRACK_LOADED));return n.ticks=0,n.ontick=n.tick.bind(n),n}return o(e,t),s(e,[{key:"destroy",value:function(){d.default.prototype.destroy.call(this)}},{key:"tick",value:function(){this.ticks++,1===this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)}},{key:"doTick",value:function(){this.updateTrack(this.trackId)}},{key:"onManifestLoading",value:function(){this.tracks=[],this.trackId=-1}},{key:"onManifestLoaded",value:function(t){var e=this,n=t.audioTracks||[],i=!1;this.tracks=n,this.hls.trigger(l.default.AUDIO_TRACKS_UPDATED,{audioTracks:n});var r=0;n.forEach(function(t){return t.default?(e.audioTrack=r,void(i=!0)):void r++}),i===!1&&n.length&&(h.logger.log("no default audio track defined, use first audio track as default"),this.audioTrack=0)}},{key:"onAudioTrackLoaded",value:function(t){t.id<this.tracks.length&&(h.logger.log("audioTrack "+t.id+" loaded"),this.tracks[t.id].details=t.details,t.details.live&&!this.timer&&(this.timer=setInterval(this.ontick,1e3*t.details.targetduration)),!t.details.live&&this.timer&&(clearInterval(this.timer),this.timer=null))}},{key:"setAudioTrackInternal",value:function(t){if(t>=0&&t<this.tracks.length){this.timer&&(clearInterval(this.timer),this.timer=null),this.trackId=t,h.logger.log("switching to audioTrack "+t);var e=this.tracks[t],n=this.hls,i=e.type,r=e.url,a={id:t,type:i,url:r};n.trigger(l.default.AUDIO_TRACK_SWITCH,a),n.trigger(l.default.AUDIO_TRACK_SWITCHING,a);var o=e.details;!r||void 0!==o&&o.live!==!0||(h.logger.log("(re)loading playlist for audioTrack "+t),n.trigger(l.default.AUDIO_TRACK_LOADING,{url:r,id:t}))}}},{key:"updateTrack",value:function(t){if(t>=0&&t<this.tracks.length){this.timer&&(clearInterval(this.timer),this.timer=null),this.trackId=t,h.logger.log("updating audioTrack "+t);var e=this.tracks[t],n=e.url,i=e.details;!n||void 0!==i&&i.live!==!0||(h.logger.log("(re)loading playlist for audioTrack "+t),this.hls.trigger(l.default.AUDIO_TRACK_LOADING,{url:n,id:t}))}}},{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this.trackId},set:function(t){this.trackId===t&&void 0!==this.tracks[t].details||this.setAudioTrackInternal(t)}}]),e}(d.default);n.default=f},{27:27,28:28,45:45}],7:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=t(28),l=i(u),c=t(27),d=i(c),h=t(45),f=t(26),p=function(t){function e(t){r(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,l.default.MEDIA_ATTACHING,l.default.MEDIA_DETACHING,l.default.MANIFEST_PARSED,l.default.BUFFER_RESET,l.default.BUFFER_APPENDING,l.default.BUFFER_CODECS,l.default.BUFFER_EOS,l.default.BUFFER_FLUSHING,l.default.LEVEL_PTS_UPDATED,l.default.LEVEL_UPDATED));return n._msDuration=null,n._levelDuration=null,n.onsbue=n.onSBUpdateEnd.bind(n),n.onsbe=n.onSBUpdateError.bind(n),n.pendingTracks={},n.tracks={},n}return o(e,t),s(e,[{key:"destroy",value:function(){d.default.prototype.destroy.call(this)}},{key:"onLevelPtsUpdated",value:function(t){var e=t.type,n=this.tracks.audio;if("audio"===e&&n&&"audio/mpeg"===n.container){var i=this.sourceBuffer.audio,r=Math.abs(i.timestampOffset-t.start);if(r>.1){var a=i.updating;try{i.abort()}catch(t){a=!0,h.logger.warn("can not abort audio buffer: "+t)}a?this.audioTimestampOffset=t.start:(h.logger.warn("change mpeg audio timestamp offset from "+i.timestampOffset+" to "+t.start),i.timestampOffset=t.start)}}}},{key:"onManifestParsed",value:function(t){var e=t.audio,n=t.video,i=0;t.altAudio&&(e||n)&&(i=(e?1:0)+(n?1:0),h.logger.log(i+" sourceBuffer(s) expected")),this.sourceBufferNb=i}},{key:"onMediaAttaching",value:function(t){var e=this.media=t.media;if(e){var n=this.mediaSource=new MediaSource;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),n.addEventListener("sourceopen",this.onmso),n.addEventListener("sourceended",this.onmse),n.addEventListener("sourceclose",this.onmsc),e.src=URL.createObjectURL(n)}}},{key:"onMediaDetaching",value:function(){h.logger.log("media source detaching");var t=this.mediaSource;if(t){if("open"===t.readyState)try{t.endOfStream()}catch(t){h.logger.warn("onMediaDetaching:"+t.message+" while calling endOfStream")}t.removeEventListener("sourceopen",this.onmso),t.removeEventListener("sourceended",this.onmse),t.removeEventListener("sourceclose",this.onmsc),this.media&&(URL.revokeObjectURL(this.media.src),this.media.removeAttribute("src"),this.media.load()),this.mediaSource=null,this.media=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(l.default.MEDIA_DETACHED)}},{key:"onMediaSourceOpen",value:function(){h.logger.log("media source opened"),this.hls.trigger(l.default.MEDIA_ATTACHED,{media:this.media});var t=this.mediaSource;t&&t.removeEventListener("sourceopen",this.onmso),this.checkPendingTracks()}},{key:"checkPendingTracks",value:function(){var t=this.pendingTracks,e=Object.keys(t).length;e&&(this.sourceBufferNb<=e||0===this.sourceBufferNb)&&(this.createSourceBuffers(t),this.pendingTracks={},this.doAppending())}},{key:"onMediaSourceClose",value:function(){h.logger.log("media source closed")}},{key:"onMediaSourceEnded",value:function(){h.logger.log("media source ended")}},{key:"onSBUpdateEnd",value:function(){if(this.audioTimestampOffset){var t=this.sourceBuffer.audio;h.logger.warn("change mpeg audio timestamp offset from "+t.timestampOffset+" to "+this.audioTimestampOffset),t.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset}this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1;var e=this.parent,n=this.segments.reduce(function(t,n){return n.parent===e?t+1:t},0);this.hls.trigger(l.default.BUFFER_APPENDED,{parent:e,pending:n}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration()}},{key:"onSBUpdateError",value:function(t){h.logger.error("sourceBuffer error:"+t),this.hls.trigger(l.default.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})}},{key:"onBufferReset",value:function(){var t=this.sourceBuffer;for(var e in t){var n=t[e];try{this.mediaSource.removeSourceBuffer(n),n.removeEventListener("updateend",this.onsbue),n.removeEventListener("error",this.onsbe)}catch(t){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}},{key:"onBufferCodecs",value:function(t){if(0===Object.keys(this.sourceBuffer).length){for(var e in t)this.pendingTracks[e]=t[e];var n=this.mediaSource;n&&"open"===n.readyState&&this.checkPendingTracks()}}},{key:"createSourceBuffers",value:function(t){var e=this.sourceBuffer,n=this.mediaSource;for(var i in t)if(!e[i]){var r=t[i],a=r.levelCodec||r.codec,o=r.container+";codecs="+a;h.logger.log("creating sourceBuffer("+o+")");try{var s=e[i]=n.addSourceBuffer(o);s.addEventListener("updateend",this.onsbue),s.addEventListener("error",this.onsbe),this.tracks[i]={codec:a,container:r.container},r.buffer=s}catch(t){h.logger.error("error while trying to add sourceBuffer:"+t.message),this.hls.trigger(l.default.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:t,mimeType:o})}}this.hls.trigger(l.default.BUFFER_CREATED,{tracks:t})}},{key:"onBufferAppending",value:function(t){this._needsFlush||(this.segments?this.segments.push(t):this.segments=[t],this.doAppending())}},{key:"onBufferAppendFail",value:function(t){h.logger.error("sourceBuffer error:",t.event),this.hls.trigger(l.default.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1,frag:this.fragCurrent})}},{key:"onBufferEos",value:function(t){var e=this.sourceBuffer,n=t.type;for(var i in e)n&&i!==n||e[i].ended||(e[i].ended=!0,h.logger.log(i+" sourceBuffer now EOS"));this.checkEos()}},{key:"checkEos",value:function(){var t=this.sourceBuffer,e=this.mediaSource;if(!e||"open"!==e.readyState)return void(this._needsEos=!1);for(var n in t){var i=t[n];if(!i.ended)return;if(i.updating)return void(this._needsEos=!0)}h.logger.log("all media data available, signal endOfStream() to MediaSource and stop loading fragment");try{e.endOfStream()}catch(t){h.logger.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}},{key:"onBufferFlushing",value:function(t){this.flushRange.push({start:t.startOffset,end:t.endOffset,type:t.type}),this.flushBufferCounter=0,this.doFlush()}},{key:"onLevelUpdated",value:function(t){var e=t.details;0!==e.fragments.length&&(this._levelDuration=e.totalduration+e.fragments[0].start,this.updateMediaElementDuration())}},{key:"updateMediaElementDuration",value:function(){var t=this.media,e=this.mediaSource,n=this.sourceBuffer,i=this._levelDuration;if(null!==i&&t&&e&&n&&0!==t.readyState&&"open"===e.readyState){for(var r in n)if(n[r].updating)return;null===this._msDuration&&(this._msDuration=e.duration);var a=t.duration;(i>this._msDuration&&i>a||a===1/0||isNaN(a))&&(h.logger.log("Updating mediasource duration to "+i.toFixed(3)),this._msDuration=e.duration=i)}}},{key:"doFlush",value:function(){for(;this.flushRange.length;){var t=this.flushRange[0];if(!this.flushBuffer(t.start,t.end,t.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var e=0,n=this.sourceBuffer;try{for(var i in n)e+=n[i].buffered.length}catch(t){h.logger.error("error while accessing sourceBuffer.buffered")}this.appended=e,this.hls.trigger(l.default.BUFFER_FLUSHED)}}},{key:"doAppending",value:function(){var t=this.hls,e=this.sourceBuffer,n=this.segments;if(Object.keys(e).length){if(this.media.error)return this.segments=[],void h.logger.error("trying to append although a media error occured, flush segment and abort");if(this.appending)return;if(n&&n.length){var i=n.shift();try{var r=i.type,a=e[r];a?a.updating?n.unshift(i):(a.ended=!1,this.parent=i.parent,a.appendBuffer(i.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(e){h.logger.error("error while trying to append buffer:"+e.message),n.unshift(i);var o={type:f.ErrorTypes.MEDIA_ERROR};if(22===e.code)return this.segments=[],o.details=f.ErrorDetails.BUFFER_FULL_ERROR,o.fatal=!1,void t.trigger(l.default.ERROR,o);if(this.appendError?this.appendError++:this.appendError=1,o.details=f.ErrorDetails.BUFFER_APPEND_ERROR,o.frag=this.fragCurrent,this.appendError>t.config.appendErrorMaxRetry)return h.logger.log("fail "+t.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),n=[],o.fatal=!0,void t.trigger(l.default.ERROR,o);o.fatal=!1,t.trigger(l.default.ERROR,o)}}}}},{key:"flushBuffer",value:function(t,e,n){var i,r,a,o,s,u,l=this.sourceBuffer;if(Object.keys(l).length){if(h.logger.log("flushBuffer,pos/start/end: "+this.media.currentTime.toFixed(3)+"/"+t+"/"+e),this.flushBufferCounter<this.appended){for(var c in l)if(!n||c===n){if(i=l[c],i.ended=!1,i.updating)return h.logger.warn("cannot flush, sb updating in progress"),!1;try{for(r=0;r<i.buffered.length;r++)if(a=i.buffered.start(r),o=i.buffered.end(r),navigator.userAgent.toLowerCase().indexOf("firefox")!==-1&&e===Number.POSITIVE_INFINITY?(s=t,u=e):(s=Math.max(a,t),u=Math.min(o,e)),Math.min(u,o)-s>.5)return this.flushBufferCounter++,h.logger.log("flush "+c+" ["+s+","+u+"], of ["+a+","+o+"], pos:"+this.media.currentTime),i.remove(s,u),!1}catch(t){h.logger.warn("exception while accessing sourcebuffer, it might have been removed from MediaSource")}}}else h.logger.warn("abort flushing too many retries");h.logger.log("buffer flushed")}return!0}}]),e}(d.default);n.default=p},{26:26,27:27,28:28,45:45}],8:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=t(28),l=i(u),c=t(27),d=i(c),h=function(t){function e(t){return r(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,l.default.FPS_DROP_LEVEL_CAPPING,l.default.MEDIA_ATTACHING,l.default.MANIFEST_PARSED))}return o(e,t),s(e,[{key:"destroy",value:function(){this.hls.config.capLevelToPlayerSize&&(this.media=this.restrictedLevels=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer)))}},{key:"onFpsDropLevelCapping",value:function(t){this.restrictedLevels||(this.restrictedLevels=[]),this.isLevelRestricted(t.droppedLevel)||this.restrictedLevels.push(t.droppedLevel)}},{key:"onMediaAttaching",value:function(t){this.media=t.media instanceof HTMLVideoElement?t.media:null}},{key:"onManifestParsed",value:function(t){var e=this.hls;e.config.capLevelToPlayerSize&&(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.levels=t.levels,e.firstLevel=this.getMaxLevel(t.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}},{key:"detectPlayerSize",value:function(){if(this.media){var t=this.levels?this.levels.length:0;if(t){var e=this.hls;e.autoLevelCapping=this.getMaxLevel(t-1),e.autoLevelCapping>this.autoLevelCapping&&e.streamController.nextLevelSwitch(),this.autoLevelCapping=e.autoLevelCapping}}}},{key:"getMaxLevel",value:function(t){var e=0,n=void 0,i=void 0,r=this.mediaWidth,a=this.mediaHeight,o=0,s=0;for(n=0;n<=t&&(i=this.levels[n],!this.isLevelRestricted(n))&&(e=n,o=i.width,s=i.height,!(r<=o||a<=s));n++);return e}},{key:"isLevelRestricted",value:function(t){return!(!this.restrictedLevels||this.restrictedLevels.indexOf(t)===-1)}},{key:"contentScaleFactor",get:function(){var t=1;try{t=window.devicePixelRatio}catch(t){}return t}},{key:"mediaWidth",get:function(){var t=void 0,e=this.media;return e&&(t=e.width||e.clientWidth||e.offsetWidth,t*=this.contentScaleFactor),t}},{key:"mediaHeight",get:function(){var t=void 0,e=this.media;return e&&(t=e.height||e.clientHeight||e.offsetHeight,t*=this.contentScaleFactor),t}}]),e}(d.default);n.default=h},{27:27,28:28}],9:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=t(44),s=i(o),u=function(){function t(e,n,i,a){r(this,t),this.hls=e,this.defaultEstimate_=a,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new s.default(n),this.fast_=new s.default(i)}return a(t,[{key:"sample",value:function(t,e){t=Math.max(t,this.minDelayMs_);var n=8e3*e/t,i=t/1e3;this.fast_.sample(i,n),this.slow_.sample(i,n)}},{key:"canEstimate",value:function(){var t=this.fast_;return t&&t.getTotalWeight()>=this.minWeight_}},{key:"getEstimate",value:function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}},{key:"destroy",value:function(){}}]),t}();n.default=u},{44:44}],10:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=t(28),l=i(u),c=t(27),d=i(c),h=t(45),f=function(t){function e(t){return r(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,l.default.MEDIA_ATTACHING))}return o(e,t),s(e,[{key:"destroy",value:function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1}},{key:"onMediaAttaching",value:function(t){var e=this.hls.config;if(e.capLevelOnFPSDrop){var n=this.video=t.media instanceof HTMLVideoElement?t.media:null;"function"==typeof n.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),e.fpsDroppedMonitoringPeriod)}}},{key:"checkFPS",value:function(t,e,n){var i=performance.now();if(e){if(this.lastTime){var r=i-this.lastTime,a=n-this.lastDroppedFrames,o=e-this.lastDecodedFrames,s=1e3*a/r,u=this.hls;if(u.trigger(l.default.FPS_DROP,{currentDropped:a,currentDecoded:o,totalDroppedFrames:n}),s>0&&a>u.config.fpsDroppedMonitoringThreshold*o){var c=u.currentLevel;h.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+c),c>0&&(u.autoLevelCapping===-1||u.autoLevelCapping>=c)&&(c-=1,u.trigger(l.default.FPS_DROP_LEVEL_CAPPING,{level:c,droppedLevel:u.currentLevel}),u.autoLevelCapping=c,u.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=n,this.lastDecodedFrames=e}}},{key:"checkFPSInterval",value:function(){var t=this.video;if(t)if(this.isVideoPlaybackQualityAvailable){var e=t.getVideoPlaybackQuality();this.checkFPS(t,e.totalVideoFrames,e.droppedVideoFrames)}else this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount)}}]),e}(d.default);n.default=f},{27:27,28:28,45:45}],11:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=t(28),l=i(u),c=t(27),d=i(c),h=t(45),f=t(26),p=t(30),v=i(p),m=function(t){function e(t){r(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,l.default.MANIFEST_LOADED,l.default.LEVEL_LOADED,l.default.FRAG_LOADED,l.default.ERROR));return n.ontick=n.tick.bind(n),n._manualLevel=n._autoLevelCapping=-1,n}return o(e,t),s(e,[{key:"destroy",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=null),this._manualLevel=-1}},{key:"startLoad",value:function(){this.canload=!0;var t=this._levels;t&&t.forEach(function(t){t.loadError=0;var e=t.details;e&&e.live&&(t.details=void 0)}),this.timer&&this.tick()}},{key:"stopLoad",value:function(){this.canload=!1}},{key:"onManifestLoaded",value:function(t){var e,n=[],i=[],r={},a=!1,o=!1,s=this.hls,u=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),c=function(t,e){return MediaSource.isTypeSupported(t+"/mp4;codecs="+e)};if(t.levels.forEach(function(t){t.videoCodec&&(a=!0),u&&t.audioCodec&&t.audioCodec.indexOf("mp4a.40.34")!==-1&&(t.audioCodec=void 0),(t.audioCodec||t.attrs&&t.attrs.AUDIO)&&(o=!0);var e=r[t.bitrate];void 0===e?(r[t.bitrate]=n.length,t.url=[t.url],t.urlId=0,n.push(t)):n[e].url.push(t.url)}),a&&o?n.forEach(function(t){t.videoCodec&&i.push(t)}):i=n,i=i.filter(function(t){var e=t.audioCodec,n=t.videoCodec;return(!e||c("audio",e))&&(!n||c("video",n))}),i.length){e=i[0].bitrate,i.sort(function(t,e){return t.bitrate-e.bitrate}),this._levels=i;for(var d=0;d<i.length;d++)if(i[d].bitrate===e){this._firstLevel=d,h.logger.log("manifest loaded,"+i.length+" level(s) found, first bitrate:"+e);break}s.trigger(l.default.MANIFEST_PARSED,{levels:i,firstLevel:this._firstLevel,stats:t.stats,audio:o,video:a,altAudio:t.audioTracks.length>0})}else s.trigger(l.default.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:s.url,reason:"no level with compatible codecs found in manifest"})}},{key:"setLevelInternal",value:function(t){var e=this._levels;if(t>=0&&t<e.length){this.timer&&(clearTimeout(this.timer),this.timer=null),this._level!==t&&(h.logger.log("switching to level "+t),this._level=t,this.hls.trigger(l.default.LEVEL_SWITCH,{level:t}));var n=e[t],i=n.details;if(!i||i.live===!0){var r=n.urlId;this.hls.trigger(l.default.LEVEL_LOADING,{url:n.url[r],level:t,id:r})}}else this.hls.trigger(l.default.ERROR,{type:f.ErrorTypes.OTHER_ERROR,details:f.ErrorDetails.LEVEL_SWITCH_ERROR,level:t,fatal:!1,reason:"invalid level idx"})}},{key:"onError",value:function(t){if(!t.fatal){var e=t.details,n=this.hls,i=void 0,r=void 0,a=!1,o=n.abrController,s=o.minAutoLevel;switch(e){case f.ErrorDetails.FRAG_LOAD_ERROR:case f.ErrorDetails.FRAG_LOAD_TIMEOUT:case f.ErrorDetails.FRAG_LOOP_LOADING_ERROR:case f.ErrorDetails.KEY_LOAD_ERROR:case f.ErrorDetails.KEY_LOAD_TIMEOUT:i=t.frag.level;break;case f.ErrorDetails.LEVEL_LOAD_ERROR:case f.ErrorDetails.LEVEL_LOAD_TIMEOUT:i=t.context.level,a=!0;break;case f.ErrorDetails.REMUX_ALLOC_ERROR:i=t.level}if(void 0!==i){r=this._levels[i],r.loadError?r.loadError++:r.loadError=1;var u=r.url.length;if(u>1&&r.loadError<u)r.urlId=(r.urlId+1)%u,r.details=void 0,h.logger.warn("level controller,"+e+" for level "+i+": switching to redundant stream id "+r.urlId);else{var c=this._manualLevel===-1&&i;if(c)h.logger.warn("level controller,"+e+": switch-down for next fragment"),o.nextAutoLevel=Math.max(s,i-1);else if(r&&r.details&&r.details.live)h.logger.warn("level controller,"+e+" on live stream, discard"),a&&(this._level=void 0);else if(e===f.ErrorDetails.LEVEL_LOAD_ERROR||e===f.ErrorDetails.LEVEL_LOAD_TIMEOUT){var d=n.media,p=d&&v.default.isBuffered(d,d.currentTime)&&v.default.isBuffered(d,d.currentTime+.5);if(p){var m=n.config.levelLoadingRetryDelay;h.logger.warn("level controller,"+e+", but media buffered, retry in "+m+"ms"),this.timer=setTimeout(this.ontick,m)}else h.logger.error("cannot recover "+e+" error"),this._level=void 0,this.timer&&(clearTimeout(this.timer),this.timer=null),t.fatal=!0,n.trigger(l.default.ERROR,t)}}}}}},{key:"onFragLoaded",value:function(t){var e=t.frag;if(e&&"main"===e.type){var n=this._levels[e.level];n&&(n.loadError=0)}}},{key:"onLevelLoaded",value:function(t){var e=t.level;if(e===this._level){var n=this._levels[e];n.loadError=0;var i=t.details;if(i.live){var r=1e3*(i.averagetargetduration?i.averagetargetduration:i.targetduration),a=n.details;
a&&i.endSN===a.endSN&&(r/=2,h.logger.log("same live playlist, reload twice faster")),r-=performance.now()-t.stats.trequest,r=Math.max(1e3,Math.round(r)),h.logger.log("live playlist, reload in "+r+" ms"),this.timer=setTimeout(this.ontick,r)}else this.timer=null}}},{key:"tick",value:function(){var t=this._level;if(void 0!==t&&this.canload){var e=this._levels[t],n=e.urlId;this.hls.trigger(l.default.LEVEL_LOADING,{url:e.url[n],level:t,id:n})}}},{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this._level},set:function(t){var e=this._levels;e&&e.length>t&&(this._level===t&&void 0!==e[t].details||this.setLevelInternal(t))}},{key:"manualLevel",get:function(){return this._manualLevel},set:function(t){this._manualLevel=t,void 0===this._startLevel&&(this._startLevel=t),t!==-1&&(this.level=t)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(t){this._firstLevel=t}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var t=this.hls.config.startLevel;return void 0!==t?t:this._firstLevel}return this._startLevel},set:function(t){t!==-1&&(t=Math.max(t,this.hls.abrController.minAutoLevel)),this._startLevel=t}},{key:"nextLoadLevel",get:function(){return this._manualLevel!==-1?this._manualLevel:this.hls.abrController.nextAutoLevel},set:function(t){this.level=t,this._manualLevel===-1&&(this.hls.abrController.nextAutoLevel=t)}}]),e}(d.default);n.default=m},{26:26,27:27,28:28,30:30,45:45}],12:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=t(41),l=i(u),c=t(30),d=i(c),h=t(22),f=i(h),p=t(28),v=i(p),m=t(27),g=i(m),y=t(31),_=i(y),E=t(46),A=i(E),b=t(26),T=t(45),S={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_LEVEL:"WAITING_LEVEL",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR"},k=function(t){function e(t){r(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,v.default.MEDIA_ATTACHED,v.default.MEDIA_DETACHING,v.default.MANIFEST_LOADING,v.default.MANIFEST_PARSED,v.default.LEVEL_LOADED,v.default.KEY_LOADED,v.default.FRAG_LOADED,v.default.FRAG_LOAD_EMERGENCY_ABORTED,v.default.FRAG_PARSING_INIT_SEGMENT,v.default.FRAG_PARSING_DATA,v.default.FRAG_PARSED,v.default.ERROR,v.default.AUDIO_TRACK_SWITCHING,v.default.AUDIO_TRACK_SWITCHED,v.default.BUFFER_CREATED,v.default.BUFFER_APPENDED,v.default.BUFFER_FLUSHED));return n.config=t.config,n.audioCodecSwap=!1,n.ticks=0,n._state=S.STOPPED,n.ontick=n.tick.bind(n),n}return o(e,t),s(e,[{key:"destroy",value:function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),g.default.prototype.destroy.call(this),this.state=S.STOPPED}},{key:"startLoad",value:function(t){if(this.levels){var e=this.lastCurrentTime,n=this.hls;if(this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var i=n.startLevel;i===-1&&(i=0,this.bitrateTest=!0),this.level=n.nextLoadLevel=i,this.loadedmetadata=!1}e>0&&t===-1&&(T.logger.log("override startPosition with lastCurrentTime @"+e.toFixed(3)),t=e),this.state=S.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()}else T.logger.warn("cannot start loading as manifest not parsed yet"),this.state=S.STOPPED}},{key:"stopLoad",value:function(){var t=this.fragCurrent;t&&(t.loader&&t.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=S.STOPPED}},{key:"tick",value:function(){this.ticks++,1===this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)}},{key:"doTick",value:function(){switch(this.state){case S.ERROR:break;case S.BUFFER_FLUSHING:this.fragLoadError=0;break;case S.IDLE:if(!this._doTickIdle())return;break;case S.WAITING_LEVEL:var t=this.levels[this.level];t&&t.details&&(this.state=S.IDLE);break;case S.FRAG_LOADING_WAITING_RETRY:var e=performance.now(),n=this.retryDate;(!n||e>=n||this.media&&this.media.seeking)&&(T.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=S.IDLE);break;case S.ERROR:case S.STOPPED:case S.FRAG_LOADING:case S.PARSING:case S.PARSED:case S.ENDED:}this._checkBuffer(),this._checkFragmentChanged()}},{key:"_doTickIdle",value:function(){var t=this.hls,e=t.config,n=this.media;if(void 0!==this.levelLastLoaded&&!n&&(this.startFragRequested||!e.startFragPrefetch))return!0;var i=void 0;i=this.loadedmetadata?n.currentTime:this.nextLoadPosition;var r=t.nextLoadLevel,a=this.levels[r],o=a.bitrate,s=void 0;s=o?Math.max(8*e.maxBufferSize/o,e.maxBufferLength):e.maxBufferLength,s=Math.min(s,e.maxMaxBufferLength);var u=d.default.bufferInfo(this.mediaBuffer?this.mediaBuffer:n,i,e.maxBufferHole),l=u.len;if(l>=s)return!0;T.logger.trace("buffer length of "+l.toFixed(3)+" is below max of "+s.toFixed(3)+". checking for more payload ..."),this.level=t.nextLoadLevel=r;var c=a.details;if("undefined"==typeof c||c.live&&this.levelLastLoaded!==r)return this.state=S.WAITING_LEVEL,!0;var h=this.fragPrevious;if(!c.live&&h&&h.sn===c.endSN&&n.duration-Math.max(u.end,h.start)<=Math.max(.2,h.duration/2)){var f={};return this.altAudio&&(f.type="video"),this.hls.trigger(v.default.BUFFER_EOS,f),this.state=S.ENDED,!0}return this._fetchPayloadOrEos(i,u,c)}},{key:"_fetchPayloadOrEos",value:function(t,e,n){var i=this.fragPrevious,r=this.level,a=n.fragments,o=a.length;if(0===o)return!1;var s=a[0].start,u=a[o-1].start+a[o-1].duration,l=e.end,c=void 0;if(n.live){var d=this.config.initialLiveManifestSize;if(o<d)return T.logger.warn("Can not start playback of a level, reason: not enough fragments "+o+" < "+d),!1;if(c=this._ensureFragmentAtLivePoint(n,l,s,u,i,a,o),null===c)return!1}else l<s&&(c=a[0]);return c||(c=this._findFragment(s,i,o,a,l,u,n)),!c||this._loadFragmentOrKey(c,r,n,t,l)}},{key:"_ensureFragmentAtLivePoint",value:function(t,e,n,i,r,a,o){var s=this.hls.config,u=this.media,l=void 0,c=void 0!==s.liveMaxLatencyDuration?s.liveMaxLatencyDuration:s.liveMaxLatencyDurationCount*t.targetduration;if(e<Math.max(n-s.maxFragLookUpTolerance,i-c)){var d=this.liveSyncPosition=this.computeLivePosition(n,t);T.logger.log("buffer end: "+e.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+d.toFixed(3)),e=d,u&&u.readyState&&u.duration>d&&(u.currentTime=d)}if(t.PTSKnown&&e>i&&u&&u.readyState)return null;if(this.startFragRequested&&!t.PTSKnown){if(r){var h=r.sn+1;h>=t.startSN&&h<=t.endSN&&(l=a[h-t.startSN],T.logger.log("live playlist, switching playlist, load frag with next SN: "+l.sn))}l||(l=a[Math.min(o-1,Math.round(o/2))],T.logger.log("live playlist, switching playlist, unknown, load middle frag : "+l.sn))}return l}},{key:"_findFragment",value:function(t,e,n,i,r,a,o){var s=this.hls.config,u=void 0,c=void 0,d=s.maxFragLookUpTolerance;if(r<a?(r>a-d&&(d=0),c=l.default.search(i,function(t){return t.start+t.duration-d<=r?1:t.start-d>r&&t.start?-1:0})):c=i[n-1],c&&(u=c,t=c.start,e&&u.level===e.level&&u.sn===e.sn))if(u.sn<o.endSN){var h=e.deltaPTS,f=u.sn-o.startSN;h&&h>s.maxBufferHole&&e.dropped&&f?(u=i[f-1],T.logger.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this"),e.loadCounter--):(u=i[f+1],T.logger.log("SN just loaded, load next one: "+u.sn))}else u=null;return u}},{key:"_loadFragmentOrKey",value:function(t,e,n,i,r){var a=this.hls,o=a.config;if(null==t.decryptdata.uri||null!=t.decryptdata.key){if(T.logger.log("Loading "+t.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+e+", currentTime:"+i.toFixed(3)+",bufferEnd:"+r.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,t.loadCounter){t.loadCounter++;var s=o.fragLoadingLoopThreshold;if(t.loadCounter>s&&Math.abs(this.fragLoadIdx-t.loadIdx)<s)return a.trigger(v.default.ERROR,{type:b.ErrorTypes.MEDIA_ERROR,details:b.ErrorDetails.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:t}),!1}else t.loadCounter=1;return t.loadIdx=this.fragLoadIdx,this.fragCurrent=t,this.startFragRequested=!0,this.nextLoadPosition=t.start+t.duration,t.autoLevel=a.autoLevelEnabled,t.bitrateTest=this.bitrateTest,a.trigger(v.default.FRAG_LOADING,{frag:t}),this.demuxer||(this.demuxer=new f.default(a,"main")),this.state=S.FRAG_LOADING,!0}T.logger.log("Loading key for "+t.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+e),this.state=S.KEY_LOADING,a.trigger(v.default.KEY_LOADING,{frag:t})}},{key:"getBufferRange",value:function(t){return l.default.search(this.bufferRange,function(e){return t<e.start?-1:t>e.end?1:0})}},{key:"followingBufferRange",value:function(t){return t?this.getBufferRange(t.end+.5):null}},{key:"_checkFragmentChanged",value:function(){var t,e,n=this.media;if(n&&n.readyState&&n.seeking===!1&&(e=n.currentTime,e>n.playbackRate*this.lastCurrentTime&&(this.lastCurrentTime=e),d.default.isBuffered(n,e)?t=this.getBufferRange(e):d.default.isBuffered(n,e+.1)&&(t=this.getBufferRange(e+.1)),t)){var i=t.frag;i!==this.fragPlaying&&(this.fragPlaying=i,this.hls.trigger(v.default.FRAG_CHANGED,{frag:i}))}}},{key:"immediateLevelSwitch",value:function(){if(T.logger.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var t=this.media,e=void 0;t?(e=t.paused,t.pause()):e=!0,this.previouslyPaused=e}var n=this.fragCurrent;n&&n.loader&&n.loader.abort(),this.fragCurrent=null,this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}},{key:"immediateLevelSwitchEnd",value:function(){var t=this.media;t&&t.buffered.length&&(this.immediateSwitch=!1,d.default.isBuffered(t,t.currentTime)&&(t.currentTime-=1e-4),this.previouslyPaused||t.play())}},{key:"nextLevelSwitch",value:function(){var t=this.media;if(t&&t.readyState){var e=void 0,n=void 0,i=void 0;if(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,n=this.getBufferRange(t.currentTime),n&&n.start>1&&this.flushMainBuffer(0,n.start-1),t.paused)e=0;else{var r=this.hls.nextLoadLevel,a=this.levels[r],o=this.fragLastKbps;e=o&&this.fragCurrent?this.fragCurrent.duration*a.bitrate/(1e3*o)+1:0}if(i=this.getBufferRange(t.currentTime+e),i&&(i=this.followingBufferRange(i))){var s=this.fragCurrent;s&&s.loader&&s.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(i.start,Number.POSITIVE_INFINITY)}}}},{key:"flushMainBuffer",value:function(t,e){this.state=S.BUFFER_FLUSHING;var n={startOffset:t,endOffset:e};this.altAudio&&(n.type="video"),this.hls.trigger(v.default.BUFFER_FLUSHING,n)}},{key:"onMediaAttached",value:function(t){var e=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),e.addEventListener("seeking",this.onvseeking),e.addEventListener("seeked",this.onvseeked),e.addEventListener("ended",this.onvended);var n=this.config;this.levels&&n.autoStartLoad&&this.hls.startLoad(n.startPosition)}},{key:"onMediaDetaching",value:function(){var t=this.media;t&&t.ended&&(T.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var e=this.levels;e&&e.forEach(function(t){t.details&&t.details.fragments.forEach(function(t){t.loadCounter=void 0})}),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("seeked",this.onvseeked),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()}},{key:"onMediaSeeking",value:function(){var t=this.media,e=t?t.currentTime:void 0,n=this.config;if(T.logger.log("media seeking to "+e.toFixed(3)),this.state===S.FRAG_LOADING){var i=this.mediaBuffer?this.mediaBuffer:t,r=d.default.bufferInfo(i,e,this.config.maxBufferHole),a=this.fragCurrent;if(0===r.len&&a){var o=n.maxFragLookUpTolerance,s=a.start-o,u=a.start+a.duration+o;e<s||e>u?(a.loader&&(T.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),a.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=S.IDLE):T.logger.log("seeking outside of buffer but within currently loaded fragment range")}}else this.state===S.ENDED&&(this.state=S.IDLE);t&&(this.lastCurrentTime=e),this.state!==S.FRAG_LOADING&&void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*n.fragLoadingLoopThreshold),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=e),this.tick()}},{key:"onMediaSeeked",value:function(){T.logger.log("media seeked to "+this.media.currentTime.toFixed(3)),this.tick()}},{key:"onMediaEnded",value:function(){T.logger.log("media ended"),this.startPosition=this.lastCurrentTime=0}},{key:"onManifestLoading",value:function(){T.logger.log("trigger BUFFER_RESET"),this.hls.trigger(v.default.BUFFER_RESET),this.bufferRange=[],this.stalled=!1,this.startPosition=this.lastCurrentTime=0}},{key:"onManifestParsed",value:function(t){var e,n=!1,i=!1;t.levels.forEach(function(t){e=t.audioCodec,e&&(e.indexOf("mp4a.40.2")!==-1&&(n=!0),e.indexOf("mp4a.40.5")!==-1&&(i=!0))}),this.audioCodecSwitch=n&&i,this.audioCodecSwitch&&T.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startLevelLoaded=!1,this.startFragRequested=!1;var r=this.config;r.autoStartLoad&&this.hls.startLoad(r.startPosition)}},{key:"onLevelLoaded",value:function(t){var e=t.details,n=t.level,i=this.levels[n],r=e.totalduration,a=0;if(T.logger.log("level "+n+" loaded ["+e.startSN+","+e.endSN+"],duration:"+r),this.levelLastLoaded=n,e.live){var o=i.details;o&&e.fragments.length>0?(_.default.mergeDetails(o,e),a=e.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(a,o),e.PTSKnown?T.logger.log("live playlist sliding:"+a.toFixed(3)):T.logger.log("live playlist - outdated PTS, unknown sliding")):(e.PTSKnown=!1,T.logger.log("live playlist - first load, unknown sliding"))}else e.PTSKnown=!1;if(i.details=e,this.hls.trigger(v.default.LEVEL_UPDATED,{details:e,level:n}),this.startFragRequested===!1){if(this.startPosition===-1||this.lastCurrentTime===-1){var s=e.startTimeOffset;isNaN(s)?e.live?(this.startPosition=this.computeLivePosition(a,e),T.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0:(s<0&&(T.logger.log("negative start time offset "+s+", count from end of last fragment"),s=a+r+s),T.logger.log("start time offset found in playlist, adjust startPosition to "+s),this.startPosition=s),this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===S.WAITING_LEVEL&&(this.state=S.IDLE),this.tick()}},{key:"onKeyLoaded",value:function(){this.state===S.KEY_LOADING&&(this.state=S.IDLE,this.tick())}},{key:"onFragLoaded",value:function(t){var e=this.fragCurrent,n=t.frag;if(this.state===S.FRAG_LOADING&&e&&"main"===n.type&&n.level===e.level&&n.sn===e.sn){var i=t.stats,r=this.levels[e.level],a=r.details;if(T.logger.log("Loaded  "+e.sn+" of ["+a.startSN+" ,"+a.endSN+"],level "+e.level),this.bitrateTest=!1,n.bitrateTest===!0&&this.hls.nextLoadLevel)this.state=S.IDLE,this.startFragRequested=!1,i.tparsed=i.tbuffered=performance.now(),this.hls.trigger(v.default.FRAG_BUFFERED,{stats:i,frag:e,id:"main"}),this.tick();else{this.state=S.PARSING,this.stats=i;var o=a.totalduration,s=isNaN(e.startDTS)?e.start:e.startDTS,u=e.level,l=e.sn,c=this.config.defaultAudioCodec||r.audioCodec;this.audioCodecSwap&&(T.logger.log("swapping playlist audio codec"),void 0===c&&(c=this.lastAudioCodec),c&&(c=c.indexOf("mp4a.40.5")!==-1?"mp4a.40.2":"mp4a.40.5")),this.pendingBuffering=!0,this.appended=!1,T.logger.log("Parsing "+l+" of ["+a.startSN+" ,"+a.endSN+"],level "+u+", cc "+e.cc);var d=this.demuxer;d||(d=this.demuxer=new f.default(this.hls,"main"));var h=this.media,p=h&&h.seeking,m=!p&&(a.PTSKnown||!a.live);d.push(t.payload,c,r.videoCodec,s,e.cc,u,l,o,e.decryptdata,m,null)}}this.fragLoadError=0}},{key:"onFragParsingInitSegment",value:function(t){var e=this.fragCurrent;if(e&&"main"===t.id&&t.sn===e.sn&&t.level===e.level&&this.state===S.PARSING){var n,i,r=t.tracks;if(r.audio&&this.altAudio&&delete r.audio,i=r.audio){var a=this.levels[this.level].audioCodec,o=navigator.userAgent.toLowerCase();a&&this.audioCodecSwap&&(T.logger.log("swapping playlist audio codec"),a=a.indexOf("mp4a.40.5")!==-1?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==i.metadata.channelCount&&o.indexOf("firefox")===-1&&(a="mp4a.40.5"),o.indexOf("android")!==-1&&"audio/mpeg"!==i.container&&(a="mp4a.40.2",T.logger.log("Android: force audio codec to "+a)),i.levelCodec=a,i.id=t.id}if(i=r.video,i&&(i.levelCodec=this.levels[this.level].videoCodec,i.id=t.id),t.unique){var s={codec:"",levelCodec:""};for(n in t.tracks)i=r[n],s.container=i.container,s.codec&&(s.codec+=",",s.levelCodec+=","),i.codec&&(s.codec+=i.codec),i.levelCodec&&(s.levelCodec+=i.levelCodec);r={audiovideo:s}}this.hls.trigger(v.default.BUFFER_CODECS,r);for(n in r){i=r[n],T.logger.log("main track:"+n+",container:"+i.container+",codecs[level/parsed]=["+i.levelCodec+"/"+i.codec+"]");var u=i.initSegment;u&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(v.default.BUFFER_APPENDING,{type:n,data:u,parent:"main",content:"initSegment"}))}this.tick()}}},{key:"onFragParsingData",value:function(t){var e=this,n=this.fragCurrent;if(n&&"main"===t.id&&t.sn===n.sn&&t.level===n.level&&("audio"!==t.type||!this.altAudio)&&this.state===S.PARSING){var i=this.levels[this.level],r=this.fragCurrent;T.logger.log("Parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb+",dropped:"+(t.dropped||0));var a=_.default.updateFragPTSDTS(i.details,r.sn,t.startPTS,t.endPTS,t.startDTS,t.endDTS),o=this.hls;o.trigger(v.default.LEVEL_PTS_UPDATED,{details:i.details,level:this.level,drift:a,type:t.type,start:t.startPTS,end:t.endPTS}),"video"===t.type&&(r.dropped=t.dropped),[t.data1,t.data2].forEach(function(n){n&&(e.appended=!0,e.pendingBuffering=!0,o.trigger(v.default.BUFFER_APPENDING,{type:t.type,data:n,parent:"main",content:"data"}))}),this.tick()}}},{key:"onFragParsed",value:function(t){var e=this.fragCurrent;e&&"main"===t.id&&t.sn===e.sn&&t.level===e.level&&this.state===S.PARSING&&(this.stats.tparsed=performance.now(),this.state=S.PARSED,this._checkAppendedParsed())}},{key:"onAudioTrackSwitching",value:function(t){var e=!!t.url,n=t.id;if(!e){if(this.mediaBuffer!==this.media){T.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var i=this.fragCurrent;i.loader&&(T.logger.log("switching to main audio track, cancel main fragment load"),i.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=S.IDLE}var r=this.hls;r.trigger(v.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),r.trigger(v.default.AUDIO_TRACK_SWITCHED,{id:n}),this.altAudio=!1}}},{key:"onAudioTrackSwitched",value:function(t){var e=t.id,n=!!this.hls.audioTracks[e].url;if(n){var i=this.videoBuffer;i&&this.mediaBuffer!==i&&(T.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=i)}this.altAudio=n,this.tick()}},{key:"onBufferCreated",value:function(t){var e=t.tracks,n=void 0,i=void 0,r=!1;for(var a in e){var o=e[a];"main"===o.id?(i=a,n=o,"video"===a&&(this.videoBuffer=e[a].buffer)):r=!0}r&&n?(T.logger.log("alternate track found, use "+i+".buffered to schedule main fragment loading"),this.mediaBuffer=n.buffer):this.mediaBuffer=this.media}},{key:"onBufferAppended",value:function(t){if("main"===t.parent){var e=this.state;e!==S.PARSING&&e!==S.PARSED||(this.pendingBuffering=t.pending>0,this._checkAppendedParsed())}}},{key:"_checkAppendedParsed",value:function(){var t=this;if(!(this.state!==S.PARSED||this.appended&&this.pendingBuffering)){var e=this.fragCurrent;e&&!function(){var n=t.mediaBuffer?t.mediaBuffer:t.media;T.logger.log("main buffered : "+A.default.toString(n.buffered));var i=t.bufferRange.filter(function(t){return d.default.isBuffered(n,(t.start+t.end)/2)});i.push({type:e.type,start:e.startPTS,end:e.endPTS,frag:e}),t.bufferRange=i.sort(function(t,e){return t.start-e.start}),t.fragPrevious=e;var r=t.stats;r.tbuffered=performance.now(),t.fragLastKbps=Math.round(8*r.total/(r.tbuffered-r.tfirst)),t.hls.trigger(v.default.FRAG_BUFFERED,{stats:r,frag:e,id:"main"}),t.state=S.IDLE}(),this.tick()}}},{key:"onError",value:function(t){var e=t.frag||this.fragCurrent;if(!e||"main"===e.type){var n=this.media,i=n&&d.default.isBuffered(n,n.currentTime)&&d.default.isBuffered(n,n.currentTime+.5);switch(t.details){case b.ErrorDetails.FRAG_LOAD_ERROR:case b.ErrorDetails.FRAG_LOAD_TIMEOUT:case b.ErrorDetails.KEY_LOAD_ERROR:case b.ErrorDetails.KEY_LOAD_TIMEOUT:if(!t.fatal){var r=this.fragLoadError;r?r++:r=1;var a=this.config;if(r<=a.fragLoadingMaxRetry||i||e.autoLevel&&e.level){this.fragLoadError=r,e.loadCounter=0;var o=Math.min(Math.pow(2,r-1)*a.fragLoadingRetryDelay,a.fragLoadingMaxRetryTimeout);T.logger.warn("mediaController: frag loading failed, retry in "+o+" ms"),this.retryDate=performance.now()+o,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.state=S.FRAG_LOADING_WAITING_RETRY}else T.logger.error("mediaController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.hls.trigger(v.default.ERROR,t),this.state=S.ERROR}break;case b.ErrorDetails.FRAG_LOOP_LOADING_ERROR:t.fatal||(i?(this._reduceMaxBufferLength(e.duration),this.state=S.IDLE):e.autoLevel&&0!==e.level||(t.fatal=!0,this.hls.trigger(v.default.ERROR,t),this.state=S.ERROR));break;case b.ErrorDetails.LEVEL_LOAD_ERROR:case b.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==S.ERROR&&(t.fatal?(this.state=S.ERROR,T.logger.warn("streamController: "+t.details+",switch to "+this.state+" state ...")):this.state===S.WAITING_LEVEL&&(this.state=S.IDLE));break;case b.ErrorDetails.BUFFER_FULL_ERROR:this.state!==S.PARSING&&this.state!==S.PARSED||(i?(this._reduceMaxBufferLength(e.duration),this.state=S.IDLE):(T.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}}},{key:"_reduceMaxBufferLength",value:function(t){var e=this.config;e.maxMaxBufferLength>=t&&(e.maxMaxBufferLength/=2,T.logger.warn("reduce max buffer length to "+e.maxMaxBufferLength+"s and switch to IDLE state"),this.fragLoadIdx+=2*e.fragLoadingLoopThreshold)}},{key:"_checkBuffer",value:function(){var t=this.media;if(t&&t.readyState){var e=t.currentTime,n=this.mediaBuffer?this.mediaBuffer:t,i=n.buffered;if(this.loadedmetadata||!i.length||t.seeking)if(this.immediateSwitch)this.immediateLevelSwitchEnd();else{var r=d.default.bufferInfo(t,e,0),a=!(t.paused||t.ended||0===t.buffered.length),o=.5,s=e!==this.lastCurrentTime,u=this.config;if(s)this.stallReported&&(T.logger.warn("playback not stuck anymore @"+e+", after "+Math.round(performance.now()-this.stalled)+"ms"),this.stallReported=!1),this.stalled=void 0,this.nudgeRetry=0;else if(a){var l=performance.now(),c=this.hls;if(this.stalled){var h=l-this.stalled,f=r.len,p=this.nudgeRetry||0;if(f<=o&&h>1e3*u.lowBufferWatchdogPeriod){this.stallReported||(this.stallReported=!0,T.logger.warn("playback stalling in low buffer @"+e),c.trigger(v.default.ERROR,{type:b.ErrorTypes.MEDIA_ERROR,details:b.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:f}));var m=r.nextStart,g=m-e;if(m&&g<u.maxSeekHole&&g>0){this.nudgeRetry=++p;var y=p*u.nudgeOffset;T.logger.log("adjust currentTime from "+t.currentTime+" to next buffered @ "+m+" + nudge "+y),t.currentTime=m+y,this.stalled=void 0,c.trigger(v.default.ERROR,{type:b.ErrorTypes.MEDIA_ERROR,details:b.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,hole:m+y-e})}}else if(f>o&&h>1e3*u.highBufferWatchdogPeriod)if(this.stallReported||(this.stallReported=!0,T.logger.warn("playback stalling in high buffer @"+e),c.trigger(v.default.ERROR,{type:b.ErrorTypes.MEDIA_ERROR,details:b.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:f})),this.stalled=void 0,this.nudgeRetry=++p,p<u.nudgeMaxRetry){var _=t.currentTime,E=_+p*u.nudgeOffset;T.logger.log("adjust currentTime from "+_+" to "+E),t.currentTime=E,c.trigger(v.default.ERROR,{type:b.ErrorTypes.MEDIA_ERROR,details:b.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else T.logger.error("still stuck in high buffer @"+e+" after "+u.nudgeMaxRetry+", raise fatal error"),c.trigger(v.default.ERROR,{type:b.ErrorTypes.MEDIA_ERROR,details:b.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})}else this.stalled=l,this.stallReported=!1}}else{this.loadedmetadata=!0;var A=this.startPosition,S=d.default.isBuffered(n,A);e===A&&S||(T.logger.log("target start position:"+A),S||(A=i.start(0),T.logger.log("target start position not buffered, seek to buffered.start(0) "+A)),T.logger.log("adjust currentTime from "+e+" to "+A),t.currentTime=A)}}}},{key:"onFragLoadEmergencyAborted",value:function(){this.state=S.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()}},{key:"onBufferFlushed",value:function(){var t=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferRange=this.bufferRange.filter(function(e){return d.default.isBuffered(t,(e.start+e.end)/2)}),this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,this.state=S.IDLE,this.fragPrevious=null}},{key:"swapAudioCodec",value:function(){this.audioCodecSwap=!this.audioCodecSwap}},{key:"computeLivePosition",value:function(t,e){var n=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*e.targetduration;return t+Math.max(0,e.totalduration-n)}},{key:"state",set:function(t){if(this.state!==t){var e=this.state;this._state=t,T.logger.log("main stream:"+e+"->"+t),this.hls.trigger(v.default.STREAM_STATE_TRANSITION,{previousState:e,nextState:t})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var t=this.media;if(t){var e=this.getBufferRange(t.currentTime);if(e)return e.frag.level}return-1}},{key:"nextBufferRange",get:function(){var t=this.media;return t?this.followingBufferRange(this.getBufferRange(t.currentTime)):null}},{key:"nextLevel",get:function(){var t=this.nextBufferRange;return t?t.frag.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(t){this._liveSyncPosition=t}}]),e}(g.default);n.default=k},{22:22,26:26,27:27,28:28,30:30,31:31,41:41,45:45,46:46}],13:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=t(28),l=i(u),c=t(27),d=i(c),h=t(42),f=i(h),p=function(t){function e(t){r(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,l.default.MEDIA_ATTACHING,l.default.MEDIA_DETACHING,l.default.FRAG_PARSING_USERDATA,l.default.MANIFEST_LOADING,l.default.FRAG_LOADED,l.default.LEVEL_SWITCH));if(n.hls=t,n.config=t.config,n.enabled=!0,n.Cues=t.config.cueHandler,n.config.enableCEA708Captions){var i=n,o=function(t,e){var n=null;try{n=new window.Event("addtrack")}catch(t){n=document.createEvent("Event"),n.initEvent("addtrack",!1,!1)}n.track=t,e.dispatchEvent(n)},s={newCue:function(t,e,n){if(!i.textTrack1){var r=i.getExistingTrack("1");r?(i.textTrack1=r,i.clearCurrentCues(i.textTrack1),o(i.textTrack1,i.media)):(i.textTrack1=i.createTextTrack("captions","English","en"),i.textTrack1.textTrack1=!0)}i.Cues.newCue(i.textTrack1,t,e,n)}},u={newCue:function(t,e,n){if(!i.textTrack2){var r=i.getExistingTrack("2");r?(i.textTrack2=r,i.clearCurrentCues(i.textTrack2),o(i.textTrack2,i.media)):(i.textTrack2=i.createTextTrack("captions","Spanish","es"),i.textTrack2.textTrack2=!0)}i.Cues.newCue(i.textTrack2,t,e,n)}};n.cea608Parser=new f.default(0,s,u)}return n}return o(e,t),s(e,[{key:"clearCurrentCues",value:function(t){if(t&&t.cues)for(;t.cues.length>0;)t.removeCue(t.cues[0])}},{key:"getExistingTrack",value:function(t){var e=this.media;if(e)for(var n=0;n<e.textTracks.length;n++){var i=e.textTracks[n],r="textTrack"+t;if(i[r]===!0)return i}return null}},{key:"createTextTrack",value:function(t,e,n){if(this.media)return this.media.addTextTrack(t,e,n)}},{key:"destroy",value:function(){d.default.prototype.destroy.call(this)}},{key:"onMediaAttaching",value:function(t){this.media=t.media}},{key:"onMediaDetaching",value:function(){this.clearCurrentCues(this.textTrack1),this.clearCurrentCues(this.textTrack2)}},{key:"onManifestLoading",value:function(){this.lastPts=Number.NEGATIVE_INFINITY}},{key:"onLevelSwitch",value:function(){"NONE"===this.hls.currentLevel.closedCaptions?this.enabled=!1:this.enabled=!0}},{key:"onFragLoaded",value:function(t){if("main"===t.frag.type){var e=t.frag.start;e<=this.lastPts&&(this.clearCurrentCues(this.textTrack1),this.clearCurrentCues(this.textTrack2)),this.lastPts=e}}},{key:"onFragParsingUserdata",value:function(t){if(this.enabled&&this.config.enableCEA708Captions)for(var e=0;e<t.samples.length;e++){var n=this.extractCea608Data(t.samples[e].bytes);this.cea608Parser.addData(t.samples[e].pts,n)}}},{key:"extractCea608Data",value:function(t){for(var e,n,i,r,a,o=31&t[0],s=2,u=[],l=0;l<o;l++)e=t[s++],n=127&t[s++],i=127&t[s++],r=0!==(4&e),a=3&e,0===n&&0===i||r&&0===a&&(u.push(n),u.push(i));return u}}]),e}(d.default);n.default=p},{27:27,28:28,42:42}],14:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(){function t(e,n){i(this,t),this.subtle=e,this.aesIV=n}return r(t,[{key:"decrypt",value:function(t,e){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},e,t)}}]),t}();n.default=a},{}],15:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);
}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(){function t(){i(this,t),this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[],this.subMix[0]=new Uint32Array(256),this.subMix[1]=new Uint32Array(256),this.subMix[2]=new Uint32Array(256),this.subMix[3]=new Uint32Array(256),this.invSubMix=[],this.invSubMix[0]=new Uint32Array(256),this.invSubMix[1]=new Uint32Array(256),this.invSubMix[2]=new Uint32Array(256),this.invSubMix[3]=new Uint32Array(256),this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return r(t,[{key:"uint8ArrayToUint32Array_",value:function(t){for(var e=new DataView(t),n=new Uint32Array(4),i=0;i<n.length;i++)n[i]=e.getUint32(4*i);return n}},{key:"initTable",value:function(){var t=this.sBox,e=this.invSBox,n=this.subMix[0],i=this.subMix[1],r=this.subMix[2],a=this.subMix[3],o=this.invSubMix[0],s=this.invSubMix[1],u=this.invSubMix[2],l=this.invSubMix[3],c=new Uint32Array(256),d=0,h=0,f=0;for(f=0;f<256;f++)f<128?c[f]=f<<1:c[f]=f<<1^283;for(f=0;f<256;f++){var p=h^h<<1^h<<2^h<<3^h<<4;p=p>>>8^255&p^99,t[d]=p,e[p]=d;var v=c[d],m=c[v],g=c[m],y=257*c[p]^16843008*p;n[d]=y<<24|y>>>8,i[d]=y<<16|y>>>16,r[d]=y<<8|y>>>24,a[d]=y,y=16843009*g^65537*m^257*v^16843008*d,o[p]=y<<24|y>>>8,s[p]=y<<16|y>>>16,u[p]=y<<8|y>>>24,l[p]=y,d?(d=v^c[c[c[g^v]]],h^=c[c[h]]):d=h=1}}},{key:"expandKey",value:function(t){for(var e=this.uint8ArrayToUint32Array_(t),n=!0,i=0;i<e.length&&n;)n=e[i]===this.key[i],i++;if(!n){this.key=e;var r=this.keySize=e.length;if(4!==r&&6!==r&&8!==r)throw new Error("Invalid aes key size="+r);var a=this.ksRows=4*(r+6+1),o=void 0,s=void 0,u=this.keySchedule=new Uint32Array(this.ksRows),l=this.invKeySchedule=new Uint32Array(this.ksRows),c=this.sBox,d=this.rcon,h=this.invSubMix[0],f=this.invSubMix[1],p=this.invSubMix[2],v=this.invSubMix[3],m=void 0,g=void 0;for(o=0;o<a;o++)o<r?m=u[o]=e[o]:(g=m,o%r===0?(g=g<<8|g>>>24,g=c[g>>>24]<<24|c[g>>>16&255]<<16|c[g>>>8&255]<<8|c[255&g],g^=d[o/r|0]<<24):r>6&&o%r===4&&(g=c[g>>>24]<<24|c[g>>>16&255]<<16|c[g>>>8&255]<<8|c[255&g]),u[o]=m=(u[o-r]^g)>>>0);for(s=0;s<a;s++)o=a-s,g=3&s?u[o]:u[o-4],s<4||o<=4?l[s]=g:l[s]=h[c[g>>>24]]^f[c[g>>>16&255]]^p[c[g>>>8&255]]^v[c[255&g]],l[s]=l[s]>>>0}}},{key:"networkToHostOrderSwap",value:function(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24}},{key:"decrypt",value:function(t,e,n){for(var i,r,a=this.keySize+6,o=this.invKeySchedule,s=this.invSBox,u=this.invSubMix[0],l=this.invSubMix[1],c=this.invSubMix[2],d=this.invSubMix[3],h=this.uint8ArrayToUint32Array_(n),f=h[0],p=h[1],v=h[2],m=h[3],g=new Int32Array(t),y=new Int32Array(g.length),_=void 0,E=void 0,A=void 0,b=void 0,T=void 0,S=void 0,k=void 0,C=void 0,w=void 0,R=void 0,I=void 0,L=void 0;e<g.length;){for(w=this.networkToHostOrderSwap(g[e]),R=this.networkToHostOrderSwap(g[e+1]),I=this.networkToHostOrderSwap(g[e+2]),L=this.networkToHostOrderSwap(g[e+3]),T=w^o[0],S=L^o[1],k=I^o[2],C=R^o[3],i=4,r=1;r<a;r++)_=u[T>>>24]^l[S>>16&255]^c[k>>8&255]^d[255&C]^o[i],E=u[S>>>24]^l[k>>16&255]^c[C>>8&255]^d[255&T]^o[i+1],A=u[k>>>24]^l[C>>16&255]^c[T>>8&255]^d[255&S]^o[i+2],b=u[C>>>24]^l[T>>16&255]^c[S>>8&255]^d[255&k]^o[i+3],T=_,S=E,k=A,C=b,i+=4;_=s[T>>>24]<<24^s[S>>16&255]<<16^s[k>>8&255]<<8^s[255&C]^o[i],E=s[S>>>24]<<24^s[k>>16&255]<<16^s[C>>8&255]<<8^s[255&T]^o[i+1],A=s[k>>>24]<<24^s[C>>16&255]<<16^s[T>>8&255]<<8^s[255&S]^o[i+2],b=s[C>>>24]<<24^s[T>>16&255]<<16^s[S>>8&255]<<8^s[255&k]^o[i+3],i+=3,y[e]=this.networkToHostOrderSwap(_^f),y[e+1]=this.networkToHostOrderSwap(b^p),y[e+2]=this.networkToHostOrderSwap(A^v),y[e+3]=this.networkToHostOrderSwap(E^m),f=w,p=R,v=I,m=L,e+=4}return y.buffer}},{key:"destroy",value:function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0}}]),t}();n.default=a},{}],16:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=t(14),s=i(o),u=t(17),l=i(u),c=t(15),d=i(c),h=t(26),f=t(45),p=function(){function t(e,n){r(this,t),this.observer=e,this.config=n;try{var i=crypto?crypto:self.crypto;this.subtle=i.subtle||i.webkitSubtle}catch(t){}this.disableWebCrypto=!this.subtle}return a(t,[{key:"decrypt",value:function(t,e,n,i){var r=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){f.logger.log("JS AES decrypt");var a=this.decryptor;a||(this.decryptor=a=new d.default),a.expandKey(e),i(a.decrypt(t,0,n))}else!function(){f.logger.log("WebCrypto AES decrypt");var a=r.subtle;r.key!==e&&(r.key=e,r.fastAesKey=new l.default(a,e)),r.fastAesKey.expandKey().then(function(e){var r=new s.default(a,n);r.decrypt(t,e).then(function(t){i(t)})}).catch(function(a){r.onWebCryptoError(a,t,e,n,i)})}()}},{key:"onWebCryptoError",value:function(t,e,n,i,r){this.config.enableSoftwareAES?(f.logger.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.decrypt(e,n,i,r)):(f.logger.error("decrypting error : "+t.message),this.observer.trigger(Event.ERROR,{type:h.ErrorTypes.MEDIA_ERROR,details:h.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:t.message}))}},{key:"destroy",value:function(){var t=this.decryptor;t&&(t.destroy(),this.decryptor=void 0)}}]),t}();n.default=p},{14:14,15:15,17:17,26:26,45:45}],17:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(){function t(e,n){i(this,t),this.subtle=e,this.key=n}return r(t,[{key:"expandKey",value:function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}]),t}();n.default=a},{}],18:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=t(19),s=i(o),u=t(45),l=t(24),c=i(l),d=function(){function t(e,n,i,a,o){r(this,t),this.observer=e,this.id=n,this.remuxerClass=i,this.config=a,this.remuxer=new this.remuxerClass(e,n,a,o),this.insertDiscontinuity()}return a(t,[{key:"insertDiscontinuity",value:function(){this._aacTrack={container:"audio/adts",type:"audio",id:-1,sequenceNumber:0,isAAC:!0,samples:[],len:0}}},{key:"push",value:function(t,e,n,i,r,a,o,l,d,h){var f,p,v,m,g,y,_,E,A,b,T=new c.default(t),S=90*T.timeStamp,k=!1;for(r!==this.lastCC?(u.logger.log(this.id+" discontinuity detected"),this.lastCC=r,this.insertDiscontinuity(),this.remuxer.switchLevel(),this.remuxer.insertDiscontinuity()):a!==this.lastLevel?(u.logger.log("audio track switch detected"),this.lastLevel=a,this.remuxer.switchLevel(),this.insertDiscontinuity()):o===this.lastSN+1&&(k=!0),f=this._aacTrack,this.lastSN=o,this.lastLevel=a,y=T.length,A=t.length;y<A-1&&(255!==t[y]||240!==(240&t[y+1]));y++);for(f.audiosamplerate||(p=s.default.getAudioConfig(this.observer,t,y,e),f.config=p.config,f.audiosamplerate=p.samplerate,f.channelCount=p.channelCount,f.codec=p.codec,f.manifestCodec=p.manifestCodec,f.duration=l,u.logger.log("parsed codec:"+f.codec+",rate:"+p.samplerate+",nb channel:"+p.channelCount)),g=0,m=9216e4/f.audiosamplerate;y+5<A&&(_=1&t[y+1]?7:9,v=(3&t[y+3])<<11|t[y+4]<<3|(224&t[y+5])>>>5,v-=_,v>0&&y+_+v<=A);)for(E=S+g*m,b={unit:t.subarray(y+_,y+_+v),pts:E,dts:E},f.samples.push(b),f.len+=v,y+=v+_,g++;y<A-1&&(255!==t[y]||240!==(240&t[y+1]));y++);this.remuxer.remux(a,o,r,f,{samples:[]},{samples:[{pts:S,dts:S,unit:T.payload}]},{samples:[]},i,k,d,h)}},{key:"destroy",value:function(){}}],[{key:"probe",value:function(t){var e,n,i=new c.default(t);if(i.hasTimeStamp)for(e=i.length,n=t.length;e<n-1;e++)if(255===t[e]&&240===(240&t[e+1]))return!0;return!1}}]),t}();n.default=d},{19:19,24:24,45:45}],19:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=t(45),o=t(26),s=function(){function t(){i(this,t)}return r(t,null,[{key:"getAudioConfig",value:function(t,e,n,i){var r,s,u,l,c,d=navigator.userAgent.toLowerCase(),h=i,f=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];return r=((192&e[n+2])>>>6)+1,s=(60&e[n+2])>>>2,s>f.length-1?void t.trigger(Event.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+s}):(l=(1&e[n+2])<<2,l|=(192&e[n+3])>>>6,a.logger.log("manifest codec:"+i+",ADTS data:type:"+r+",sampleingIndex:"+s+"["+f[s]+"Hz],channelConfig:"+l),/firefox/i.test(d)?s>=6?(r=5,c=new Array(4),u=s-3):(r=2,c=new Array(2),u=s):d.indexOf("android")!==-1?(r=2,c=new Array(2),u=s):(r=5,c=new Array(4),i&&(i.indexOf("mp4a.40.29")!==-1||i.indexOf("mp4a.40.5")!==-1)||!i&&s>=6?u=s-3:((i&&i.indexOf("mp4a.40.2")!==-1&&s>=6&&1===l||!i&&1===l)&&(r=2,c=new Array(2)),u=s)),c[0]=r<<3,c[0]|=(14&s)>>1,c[1]|=(1&s)<<7,c[1]|=l<<3,5===r&&(c[1]|=(14&u)>>1,c[2]=(1&u)<<7,c[2]|=8,c[3]=0),{config:c,samplerate:f[s],channelCount:l,codec:"mp4a.40."+r,manifestCodec:h})}}]),t}();n.default=s},{26:26,45:45}],20:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=t(28),s=i(o),u=t(26),l=t(16),c=i(l),d=t(18),h=i(d),f=t(25),p=i(f),v=t(38),m=i(v),g=t(39),y=i(g),_=function(){function t(e,n,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;r(this,t),this.hls=e,this.id=n,this.config=this.hls.config||a,this.typeSupported=i}return a(t,[{key:"destroy",value:function(){var t=this.demuxer;t&&t.destroy()}},{key:"push",value:function(t,e,n,i,r,a,o,u,l,d,h){if(t.byteLength>0&&null!=l&&null!=l.key&&"AES-128"===l.method){null==this.decrypter&&(this.decrypter=new c.default(this.hls,this.config));var f,p=this;try{f=performance.now()}catch(t){f=Date.now()}this.decrypter.decrypt(t,l.key.buffer,l.iv.buffer,function(t){var l;try{l=performance.now()}catch(t){l=Date.now()}p.hls.trigger(s.default.FRAG_DECRYPTED,{level:a,sn:o,stats:{tstart:f,tdecrypt:l}}),p.pushDecrypted(new Uint8Array(t),e,n,i,r,a,o,u,d,h)})}else this.pushDecrypted(new Uint8Array(t),e,n,i,r,a,o,u,d,h)}},{key:"pushDecrypted",value:function(t,e,n,i,r,a,o,l,c,d){var f=this.demuxer;if(!f||r!==this.cc&&!f.probe(t)){var v=this.hls,g=this.id,_=this.config,E=this.typeSupported;if(p.default.probe(t))f=this.typeSupported.mp2t===!0?new p.default(v,g,y.default,_,E):new p.default(v,g,m.default,_,E),f.probe=p.default.probe;else{if(!h.default.probe(t))return void v.trigger(s.default.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,id:g,details:u.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});f=new h.default(v,g,m.default,_,E),f.probe=h.default.probe}this.demuxer=f}f.push(t,e,n,i,r,a,o,l,c,d),this.cc=r}}]),t}();n.default=_},{16:16,18:18,25:25,26:26,28:28,38:38,39:39}],21:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var r=t(20),a=i(r),o=t(28),s=i(o),u=t(45),l=t(1),c=i(l),d=function(t){var e=new c.default;e.trigger=function(t){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];e.emit.apply(e,[t,t].concat(i))},e.off=function(t){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];e.removeListener.apply(e,[t].concat(i))};var n=function(e,n){t.postMessage({event:e,data:n})};t.addEventListener("message",function(i){var r=i.data;switch(r.cmd){case"init":var o=JSON.parse(r.config);t.demuxer=new a.default(e,r.id,r.typeSupported,o);try{(0,u.enableLogs)(o.debug===!0)}catch(t){console.warn("demuxerWorker: unable to enable logs")}n("init",null);break;case"demux":t.demuxer.push(r.data,r.audioCodec,r.videoCodec,r.timeOffset,r.cc,r.level,r.sn,r.duration,r.decryptdata,r.accurateTimeOffset,r.defaultInitPTS)}}),e.on(s.default.FRAG_DECRYPTED,n),e.on(s.default.FRAG_PARSING_INIT_SEGMENT,n),e.on(s.default.FRAG_PARSED,n),e.on(s.default.ERROR,n),e.on(s.default.FRAG_PARSING_METADATA,n),e.on(s.default.FRAG_PARSING_USERDATA,n),e.on(s.default.INIT_PTS_FOUND,n),e.on(s.default.FRAG_PARSING_DATA,function(e,n){var i=n.data1.buffer,r=n.data2.buffer;delete n.data1,delete n.data2,t.postMessage({event:e,data:n,data1:i,data2:r},[i,r])})};n.default=d},{1:1,20:20,28:28,45:45}],22:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=t(28),s=i(o),u=t(20),l=i(u),c=t(21),d=i(c),h=t(45),f=t(26),p=function(){function e(n,i){r(this,e),this.hls=n,this.id=i;var a={mp4:MediaSource.isTypeSupported("video/mp4"),mp2t:n.config.enableMP2TPassThrough&&MediaSource.isTypeSupported("video/mp2t"),mpeg:MediaSource.isTypeSupported("audio/mpeg"),mp3:MediaSource.isTypeSupported('audio/mp4; codecs="mp3"')};if(n.config.enableWorker&&"undefined"!=typeof Worker){h.logger.log("demuxing in webworker");var o=void 0;try{var u=t(3);o=this.w=u(d.default),this.onwmsg=this.onWorkerMessage.bind(this),o.addEventListener("message",this.onwmsg),o.onerror=function(t){n.trigger(s.default.ERROR,{type:f.ErrorTypes.OTHER_ERROR,details:f.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:t.message+" ("+t.filename+":"+t.lineno+")"}})},o.postMessage({cmd:"init",typeSupported:a,id:i,config:JSON.stringify(n.config)})}catch(t){h.logger.error("error while initializing DemuxerWorker, fallback on DemuxerInline"),o&&URL.revokeObjectURL(o.objectURL),this.demuxer=new l.default(n,i,a),this.w=void 0}}else this.demuxer=new l.default(n,i,a);this.demuxInitialized=!0}return a(e,[{key:"destroy",value:function(){var t=this.w;if(t)t.removeEventListener("message",this.onwmsg),t.terminate(),this.w=null;else{var e=this.demuxer;e&&(e.destroy(),this.demuxer=null)}}},{key:"push",value:function(t,e,n,i,r,a,o,s,u,l,c){var d=this.w;if(d)d.postMessage({cmd:"demux",data:t,audioCodec:e,videoCodec:n,timeOffset:i,cc:r,level:a,sn:o,duration:s,decryptdata:u,accurateTimeOffset:l,defaultInitPTS:c},[t]);else{var h=this.demuxer;h&&h.push(t,e,n,i,r,a,o,s,u,l,c)}}},{key:"onWorkerMessage",value:function(t){var e=t.data,n=this.hls;switch(e.event){case"init":URL.revokeObjectURL(this.w.objectURL);break;case s.default.FRAG_PARSING_DATA:e.data.data1=new Uint8Array(e.data1),e.data.data2=new Uint8Array(e.data2);default:n.trigger(e.event,e.data)}}}]),e}();n.default=p},{20:20,21:21,26:26,28:28,3:3,45:45}],23:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=t(45),o=function(){function t(e){i(this,t),this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}return r(t,[{key:"loadWord",value:function(){var t=this.data,e=this.bytesAvailable,n=t.byteLength-e,i=new Uint8Array(4),r=Math.min(4,e);if(0===r)throw new Error("no bytes available");i.set(t.subarray(n,n+r)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=8*r,this.bytesAvailable-=r}},{key:"skipBits",value:function(t){var e;this.bitsAvailable>t?(this.word<<=t,this.bitsAvailable-=t):(t-=this.bitsAvailable,e=t>>3,t-=e>>3,this.bytesAvailable-=e,this.loadWord(),this.word<<=t,this.bitsAvailable-=t)}},{key:"readBits",value:function(t){var e=Math.min(this.bitsAvailable,t),n=this.word>>>32-e;return t>32&&a.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=e,this.bitsAvailable>0?this.word<<=e:this.bytesAvailable>0&&this.loadWord(),e=t-e,e>0&&this.bitsAvailable?n<<e|this.readBits(e):n}},{key:"skipLZ",value:function(){var t;for(t=0;t<this.bitsAvailable;++t)if(0!==(this.word&2147483648>>>t))return this.word<<=t,this.bitsAvailable-=t,t;return this.loadWord(),t+this.skipLZ()}},{key:"skipUEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"skipEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"readUEG",value:function(){var t=this.skipLZ();return this.readBits(t+1)-1}},{key:"readEG",value:function(){var t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)}},{key:"readBoolean",value:function(){return 1===this.readBits(1)}},{key:"readUByte",value:function(){return this.readBits(8)}},{key:"readUShort",value:function(){return this.readBits(16)}},{key:"readUInt",value:function(){return this.readBits(32)}},{key:"skipScalingList",value:function(t){var e,n,i=8,r=8;for(e=0;e<t;e++)0!==r&&(n=this.readEG(),r=(i+n+256)%256),i=0===r?i:r}},{key:"readSPS",value:function(){var t,e,n,i,r,a,o,s,u,l=0,c=0,d=0,h=0,f=this.readUByte.bind(this),p=this.readBits.bind(this),v=this.readUEG.bind(this),m=this.readBoolean.bind(this),g=this.skipBits.bind(this),y=this.skipEG.bind(this),_=this.skipUEG.bind(this),E=this.skipScalingList.bind(this);if(f(),t=f(),e=p(5),g(3),n=f(),_(),100===t||110===t||122===t||244===t||44===t||83===t||86===t||118===t||128===t){var A=v();if(3===A&&g(1),_(),_(),g(1),m())for(s=3!==A?8:12,u=0;u<s;u++)m()&&E(u<6?16:64)}_();var b=v();if(0===b)v();else if(1===b)for(g(1),y(),y(),i=v(),u=0;u<i;u++)y();_(),g(1),r=v(),a=v(),o=p(1),0===o&&g(1),g(1),m()&&(l=v(),c=v(),d=v(),h=v());var T=[1,1];if(m()&&m()){var S=f();switch(S){case 1:T=[1,1];break;case 2:T=[12,11];break;case 3:T=[10,11];break;case 4:T=[16,11];break;case 5:T=[40,33];break;case 6:T=[24,11];break;case 7:T=[20,11];break;case 8:T=[32,11];break;case 9:T=[80,33];break;case 10:T=[18,11];break;case 11:T=[15,11];break;case 12:T=[64,33];break;case 13:T=[160,99];break;case 14:T=[4,3];break;case 15:T=[3,2];break;case 16:T=[2,1];break;case 255:T=[f()<<8|f(),f()<<8|f()]}}return{width:Math.ceil(16*(r+1)-2*l-2*c),height:(2-o)*(a+1)*16-(o?2:4)*(d+h),pixelRatio:T}}},{key:"readSliceType",value:function(){return this.readUByte(),this.readUEG(),this.readUEG()}}]),t}();n.default=o},{45:45}],24:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=t(45),o=function(){function t(e){i(this,t),this._hasTimeStamp=!1;for(var n,r,o,s,u,l,c,d,h=0;;)if(c=this.readUTF(e,h,3),h+=3,"ID3"===c)h+=3,n=127&e[h++],r=127&e[h++],o=127&e[h++],s=127&e[h++],u=(n<<21)+(r<<14)+(o<<7)+s,l=h+u,this._parseID3Frames(e,h,l),h=l;else{if("3DI"!==c)return h-=3,d=h,void(d&&(this.hasTimeStamp||a.logger.warn("ID3 tag found, but no timestamp"),this._length=d,this._payload=e.subarray(0,d)));h+=7,a.logger.log("3DI footer found, end: "+h)}}return r(t,[{key:"readUTF",value:function(t,e,n){var i="",r=e,a=e+n;do i+=String.fromCharCode(t[r++]);while(r<a);return i}},{key:"_parseID3Frames",value:function(t,e,n){for(var i,r,o,s,u;e+8<=n;)switch(i=this.readUTF(t,e,4),e+=4,r=t[e++]<<24+t[e++]<<16+t[e++]<<8+t[e++],s=t[e++]<<8+t[e++],o=e,i){case"PRIV":if("com.apple.streaming.transportStreamTimestamp"===this.readUTF(t,e,44)){e+=44,e+=4;var l=1&t[e++];this._hasTimeStamp=!0,u=((t[e++]<<23)+(t[e++]<<15)+(t[e++]<<7)+t[e++])/45,l&&(u+=47721858.84),u=Math.round(u),a.logger.trace("ID3 timestamp found: "+u),this._timeStamp=u}}}},{key:"hasTimeStamp",get:function(){return this._hasTimeStamp}},{key:"timeStamp",get:function(){return this._timeStamp}},{key:"length",get:function(){return this._length}},{key:"payload",get:function(){return this._payload}}]),t}();n.default=o},{45:45}],25:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=t(19),s=i(o),u=t(28),l=i(u),c=t(23),d=i(c),h=t(45),f=t(26),p=function(){function t(e,n,i,a,o){r(this,t),this.observer=e,this.id=n,this.remuxerClass=i,this.config=a,this.typeSupported=o,this.lastCC=0,this.remuxer=new this.remuxerClass(e,n,a,o)}return a(t,[{key:"switchLevel",value:function(){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack={container:"video/mp2t",type:"video",id:-1,sequenceNumber:0,samples:[],len:0,dropped:0},this._audioTrack={container:"video/mp2t",type:"audio",id:-1,sequenceNumber:0,samples:[],len:0,isAAC:!0},this._id3Track={type:"id3",id:-1,sequenceNumber:0,samples:[],len:0},this._txtTrack={type:"text",id:-1,sequenceNumber:0,samples:[],len:0},this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.remuxer.switchLevel()}},{key:"insertDiscontinuity",value:function(){this.switchLevel(),this.remuxer.insertDiscontinuity()}},{key:"push",value:function(t,e,n,i,r,a,o,s,u,c){var d,p,v,m,g,y,_=t.length,E=this.remuxer.passthrough,A=!1;this.audioCodec=e,this.videoCodec=n,this._duration=s,this.contiguous=!1,this.accurateTimeOffset=u,r!==this.lastCC&&(h.logger.log("discontinuity detected"),this.insertDiscontinuity(),this.lastCC=r),a!==this.lastLevel?(h.logger.log("level switch detected"),this.switchLevel(),this.lastLevel=a):o===this.lastSN+1&&(this.contiguous=!0),this.lastSN=o;var b=this.pmtParsed,T=this._avcTrack,S=this._audioTrack,k=this._id3Track,C=T.id,w=S.id,R=k.id,I=this._pmtId,L=T.pesData,D=S.pesData,P=k.pesData,O=this._parsePAT,M=this._parsePMT,N=this._parsePES,x=this._parseAVCPES.bind(this),F=this._parseAACPES.bind(this),U=this._parseMPEGPES.bind(this),B=this._parseID3PES.bind(this);for(_-=_%188,d=0;d<_;d+=188)if(71===t[d]){if(p=!!(64&t[d+1]),v=((31&t[d+1])<<8)+t[d+2],m=(48&t[d+3])>>4,m>1){if(g=d+5+t[d+4],g===d+188)continue}else g=d+4;switch(v){case C:if(p){if(L&&(y=N(L))&&(x(y,!1),E&&T.codec&&(w===-1||S.codec)))return void this.remux(a,o,r,t,i);L={data:[],size:0}}L&&(L.data.push(t.subarray(g,d+188)),L.size+=d+188-g);break;case w:if(p){if(D&&(y=N(D))&&(S.isAAC?F(y):U(y),E&&S.codec&&(C===-1||T.codec)))return void this.remux(a,o,r,t,i);D={data:[],size:0}}D&&(D.data.push(t.subarray(g,d+188)),D.size+=d+188-g);break;case R:p&&(P&&(y=N(P))&&B(y),P={data:[],size:0}),P&&(P.data.push(t.subarray(g,d+188)),P.size+=d+188-g);break;case 0:p&&(g+=t[g]+1),I=this._pmtId=O(t,g);break;case I:p&&(g+=t[g]+1);var G=M(t,g,this.typeSupported.mpeg===!0||this.typeSupported.mp3===!0);C=G.avc,C>0&&(T.id=C),w=G.audio,w>0&&(S.id=w,S.isAAC=G.isAAC),R=G.id3,R>0&&(k.id=R),A&&!b&&(h.logger.log("reparse from beginning"),A=!1,d=-188),b=this.pmtParsed=!0;break;case 17:case 8191:break;default:A=!0}}else this.observer.trigger(l.default.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,id:this.id,details:f.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});L&&(y=N(L))?(x(y,!0),T.pesData=null):T.pesData=L,D&&(y=N(D))?(S.isAAC?F(y):U(y),S.pesData=null):(D&&D.size&&h.logger.log("last AAC PES packet truncated,might overlap between fragments"),S.pesData=D),P&&(y=N(P))?(B(y),k.pesData=null):k.pesData=P,this.remux(a,o,r,null,i,c)}},{key:"remux",value:function(t,e,n,i,r,a){for(var o=this._avcTrack,s=o.samples,u=0,l=0,c=0;c<s.length;c++){for(var d=s[c],h=d.units.units,f=h.length,p=0,v=0;v<f;v++)p+=h[v].data.length;l+=p,u+=f,d.length=p}o.len=l,o.nbNalu=u,this.remuxer.remux(t,e,n,this._audioTrack,this._avcTrack,this._id3Track,this._txtTrack,r,this.contiguous,this.accurateTimeOffset,a,i)}},{key:"destroy",value:function(){this.switchLevel(),this._initPTS=this._initDTS=void 0,this._duration=0}},{key:"_parsePAT",value:function(t,e){return(31&t[e+10])<<8|t[e+11]}},{key:"_parsePMT",value:function(t,e,n){var i,r,a,o,s={audio:-1,avc:-1,id3:-1,isAAC:!0};for(i=(15&t[e+1])<<8|t[e+2],r=e+3+i-4,a=(15&t[e+10])<<8|t[e+11],e+=12+a;e<r;){switch(o=(31&t[e+1])<<8|t[e+2],t[e]){case 15:s.audio===-1&&(s.audio=o);break;case 21:s.id3===-1&&(s.id3=o);break;case 27:s.avc===-1&&(s.avc=o);break;case 3:case 4:n?s.audio===-1&&(s.audio=o,s.isAAC=!1):h.logger.log("MPEG audio found, not supported in this browser for now");break;case 36:h.logger.warn("HEVC stream type found, not supported for now");break;default:h.logger.log("unkown stream type:"+t[e])}e+=((15&t[e+3])<<8|t[e+4])+5}return s}},{key:"_parsePES",value:function(t){var e,n,i,r,a,o,s,u,l,c=0,d=t.data;if(!t||0===t.size)return null;for(;d[0].length<19&&d.length>1;){var f=new Uint8Array(d[0].length+d[1].length);f.set(d[0]),f.set(d[1],d[0].length),d[0]=f,d.splice(1,1)}if(e=d[0],i=(e[0]<<16)+(e[1]<<8)+e[2],1===i){if(r=(e[4]<<8)+e[5],r&&r>t.size-6)return null;n=e[7],192&n&&(s=536870912*(14&e[9])+4194304*(255&e[10])+16384*(254&e[11])+128*(255&e[12])+(254&e[13])/2,s>4294967295&&(s-=8589934592),64&n?(u=536870912*(14&e[14])+4194304*(255&e[15])+16384*(254&e[16])+128*(255&e[17])+(254&e[18])/2,u>4294967295&&(u-=8589934592),s-u>54e5&&(h.logger.warn(Math.round((s-u)/9e4)+"s delta between PTS and DTS, align them"),s=u)):u=s),a=e[8],l=a+9,t.size-=l,o=new Uint8Array(t.size);for(var p=0,v=d.length;p<v;p++){e=d[p];var m=e.byteLength;if(l){if(l>m){l-=m;continue}e=e.subarray(l),m-=l,l=0}o.set(e,c),c+=m}return r&&(r-=a+3),{data:o,pts:s,dts:u,len:r}}return null}},{key:"pushAccesUnit",value:function(t,e){t.units.units.length&&t.frame&&(!this.config.forceKeyFrameOnDiscontinuity||t.key===!0||e.sps&&(e.samples.length||this.contiguous)?e.samples.push(t):e.dropped++),t.debug.length&&h.logger.log(t.pts+"/"+t.dts+":"+t.debug+","+t.units.length)}},{key:"_parseAVCPES",value:function(t,e){var n,i,r,a=this,o=this._avcTrack,s=this._parseAVCNALu(t.data),u=!1,l=this.avcSample;t.data=null,s.forEach(function(e){switch(e.type){case 1:i=!0,u&&l&&(l.debug+="NDR "),l.frame=!0;var s=e.data;if(s.length>4){var c=new d.default(s).readSliceType();2!==c&&4!==c&&7!==c&&9!==c||(l.key=!0)}break;case 5:i=!0,l||(l=a.avcSample=a._createAVCSample(!0,t.pts,t.dts,"")),u&&(l.debug+="IDR "),l.key=!0,l.frame=!0;break;case 6:i=!0,u&&l&&(l.debug+="SEI "),n=new d.default(a.discardEPB(e.data)),n.readUByte();for(var h=0,f=0,p=!1,v=0;!p&&n.bytesAvailable>1;){h=0;do v=n.readUByte(),h+=v;while(255===v);f=0;do v=n.readUByte(),f+=v;while(255===v);if(4===h&&0!==n.bytesAvailable){p=!0;var m=n.readUByte();if(181===m){var g=n.readUShort();if(49===g){var y=n.readUInt();if(1195456820===y){var _=n.readUByte();if(3===_){var E=n.readUByte(),A=n.readUByte(),b=31&E,T=[E,A];for(r=0;r<b;r++)T.push(n.readUByte()),T.push(n.readUByte()),T.push(n.readUByte());a._insertSampleInOrder(a._txtTrack.samples,{type:3,pts:t.pts,bytes:T})}}}}}else if(f<n.bytesAvailable)for(r=0;r<f;r++)n.readUByte()}break;case 7:if(i=!0,u&&l&&(l.debug+="SPS "),!o.sps){n=new d.default(e.data);var S=n.readSPS();o.width=S.width,o.height=S.height,o.pixelRatio=S.pixelRatio,o.sps=[e.data],o.duration=a._duration;var k=e.data.subarray(1,4),C="avc1.";for(r=0;r<3;r++){var w=k[r].toString(16);w.length<2&&(w="0"+w),C+=w}o.codec=C}break;case 8:i=!0,u&&l&&(l.debug+="PPS "),o.pps||(o.pps=[e.data]);break;case 9:i=!1,l&&a.pushAccesUnit(l,o),l=a.avcSample=a._createAVCSample(!1,t.pts,t.dts,u?"AUD ":"");break;case 12:i=!1;break;default:i=!1,l&&(l.debug+="unknown NAL "+e.type+" ")}if(l&&i){var R=l.units;R.units.push(e)}}),e&&l&&(this.pushAccesUnit(l,o),this.avcSample=null)}},{key:"_createAVCSample",value:function(t,e,n,i){return{key:t,pts:e,dts:n,units:{units:[],length:0},debug:i}}},{key:"_insertSampleInOrder",value:function(t,e){var n=t.length;if(n>0){if(e.pts>=t[n-1].pts)t.push(e);else for(var i=n-1;i>=0;i--)if(e.pts<t[i].pts){t.splice(i,0,e);break}}else t.push(e)}},{key:"_getLastNalUnit",value:function(){var t=this.avcSample,e=void 0;if(!t||0===t.units.units.length){var n=this._avcTrack,i=n.samples;t=i[i.length-1]}if(t){var r=t.units.units;e=r[r.length-1]}return e}},{key:"_parseAVCNALu",value:function(t){var e,n,i,r,a,o=0,s=t.byteLength,u=this._avcTrack,l=u.naluState||0,c=l,d=[],h=-1;for(l===-1&&(h=0,a=31&t[0],l=0,o=1);o<s;)if(e=t[o++],l)if(1!==l)if(e)if(1===e){if(h>=0)i={data:t.subarray(h,o-l-1),type:a},d.push(i);else{var f=this._getLastNalUnit();if(f&&(c&&o<=4-c&&f.state&&(f.data=f.data.subarray(0,f.data.byteLength-c)),n=o-l-1,n>0)){var p=new Uint8Array(f.data.byteLength+n);p.set(f.data,0),p.set(t.subarray(0,n),f.data.byteLength),f.data=p}}o<s?(r=31&t[o],h=o,a=r,l=0):l=-1}else l=0;else l=3;else l=e?0:2;else l=e?0:1;if(h>=0&&l>=0&&(i={data:t.subarray(h,s),type:a,state:l},d.push(i)),0===d.length){var v=this._getLastNalUnit();if(v){var m=new Uint8Array(v.data.byteLength+t.byteLength);m.set(v.data,0),m.set(t,v.data.byteLength),v.data=m}}return u.naluState=l,d}},{key:"discardEPB",value:function(t){for(var e,n,i=t.byteLength,r=[],a=1;a<i-2;)0===t[a]&&0===t[a+1]&&3===t[a+2]?(r.push(a+2),a+=2):a++;if(0===r.length)return t;e=i-r.length,n=new Uint8Array(e);var o=0;for(a=0;a<e;o++,a++)o===r[0]&&(o++,r.shift()),n[a]=t[o];return n}},{key:"_parseAACPES",value:function(t){var e,n,i,r,a,o,u,c,d,p=this._audioTrack,v=t.data,m=t.pts,g=0,y=this.aacOverFlow,_=this.aacLastPTS;if(y){var E=new Uint8Array(y.byteLength+v.byteLength);E.set(y,0),E.set(v,y.byteLength),v=E}for(a=g,c=v.length;a<c-1&&(255!==v[a]||240!==(240&v[a+1]));a++);if(a){var A,b;if(a<c-1?(A="AAC PES did not start with ADTS header,offset:"+a,b=!1):(A="no ADTS header found in AAC PES",b=!0),h.logger.warn("parsing error:"+A),this.observer.trigger(l.default.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,id:this.id,details:f.ErrorDetails.FRAG_PARSING_ERROR,fatal:b,reason:A}),b)return}if(!p.audiosamplerate){var T=this.audioCodec;e=s.default.getAudioConfig(this.observer,v,a,T),p.config=e.config,p.audiosamplerate=e.samplerate,p.channelCount=e.channelCount,p.codec=e.codec,p.manifestCodec=e.manifestCodec,p.duration=this._duration,h.logger.log("parsed codec:"+p.codec+",rate:"+e.samplerate+",nb channel:"+e.channelCount)}if(r=0,i=9216e4/p.audiosamplerate,y&&_){var S=_+i;Math.abs(S-m)>1&&(h.logger.log("AAC: align PTS for overlapping frames by "+Math.round((S-m)/90)),m=S)}for(;a+5<c&&(o=1&v[a+1]?7:9,n=(3&v[a+3])<<11|v[a+4]<<3|(224&v[a+5])>>>5,n-=o,n>0&&a+o+n<=c);)for(u=m+r*i,d={unit:v.subarray(a+o,a+o+n),pts:u,dts:u},p.samples.push(d),p.len+=n,a+=n+o,r++;a<c-1&&(255!==v[a]||240!==(240&v[a+1]));a++);y=a<c?v.subarray(a,c):null,
this.aacOverFlow=y,this.aacLastPTS=u}},{key:"_parseMPEGPES",value:function(t){for(var e,n=t.data,i=t.pts,r=n.length,a=0,o=0;o<r&&(e=this._parseMpeg(n,o,r,a++,i))>0;)o+=e}},{key:"_onMpegFrame",value:function(t,e,n,i,r,a){var o=1152/n*1e3,s=a+r*o,u=this._audioTrack;u.config=[],u.channelCount=i,u.audiosamplerate=n,u.duration=this._duration,u.samples.push({unit:t,pts:s,dts:s}),u.len+=t.length}},{key:"_onMpegNoise",value:function(t){h.logger.warn("mpeg audio has noise: "+t.length+" bytes")}},{key:"_parseMpeg",value:function(t,e,n,i,r){var a=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],o=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3];if(e+2>n)return-1;if(255===t[e]||224===(224&t[e+1])){if(e+24>n)return-1;var s=t[e+1]>>3&3,u=t[e+1]>>1&3,l=t[e+2]>>4&15,c=t[e+2]>>2&3,d=!!(2&t[e+2]);if(1!==s&&0!==l&&15!==l&&3!==c){var h=3===s?3-u:3===u?3:4,f=1e3*a[14*h+l-1],p=3===s?0:2===s?1:2,v=o[3*p+c],m=d?1:0,g=t[e+3]>>6===3?1:2,y=3===u?(3===s?12:6)*f/v+m<<2:(3===s?144:72)*f/v+m|0;return e+y>n?-1:(this._onMpegFrame&&this._onMpegFrame(t.subarray(e,e+y),f,v,g,i,r),y)}}for(var _=e+2;_<n;){if(255===t[_-1]&&224===(224&t[_]))return this._onMpegNoise&&this._onMpegNoise(t.subarray(e,_-1)),_-e-1;_++}return-1}},{key:"_parseID3PES",value:function(t){this._id3Track.samples.push(t)}}],[{key:"probe",value:function(t){return t.length>=564&&71===t[0]&&71===t[188]&&71===t[376]}}]),t}();n.default=p},{19:19,23:23,26:26,28:28,45:45}],26:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.ErrorTypes={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},n.ErrorDetails={MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOOP_LOADING_ERROR:"fragLoopLoadingError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException"}},{}],27:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=t(45),u=t(26),l=t(28),c=i(l),d=function(){function t(e){r(this,t),this.hls=e,this.onEvent=this.onEvent.bind(this);for(var n=arguments.length,i=Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];this.handledEvents=i,this.useGenericHandler=!0,this.registerListeners()}return o(t,[{key:"destroy",value:function(){this.unregisterListeners()}},{key:"isEventHandler",value:function(){return"object"===a(this.handledEvents)&&this.handledEvents.length&&"function"==typeof this.onEvent}},{key:"registerListeners",value:function(){this.isEventHandler()&&this.handledEvents.forEach(function(t){if("hlsEventGeneric"===t)throw new Error("Forbidden event name: "+t);this.hls.on(t,this.onEvent)}.bind(this))}},{key:"unregisterListeners",value:function(){this.isEventHandler()&&this.handledEvents.forEach(function(t){this.hls.off(t,this.onEvent)}.bind(this))}},{key:"onEvent",value:function(t,e){this.onEventGeneric(t,e)}},{key:"onEventGeneric",value:function(t,e){var n=function(t,e){var n="on"+t.replace("hls","");if("function"!=typeof this[n])throw new Error("Event "+t+" has no generic handler in this "+this.constructor.name+" class (tried "+n+")");return this[n].bind(this,e)};try{n.call(this,t,e).call()}catch(e){s.logger.error("internal error happened while processing "+t+":"+e.message),this.hls.trigger(c.default.ERROR,{type:u.ErrorTypes.OTHER_ERROR,details:u.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:t,err:e})}}}]),t}();n.default=d},{26:26,28:28,45:45}],28:[function(t,e,n){"use strict";e.exports={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",LEVEL_SWITCH:"hlsLevelSwitch",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCH:"hlsAudioTrackSwitch",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"}},{}],29:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(){function t(){i(this,t)}return r(t,null,[{key:"getSilentFrame",value:function(t,e){switch(t){case"mp4a.40.2":if(1===e)return new Uint8Array([0,200,0,128,35,128]);if(2===e)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===e)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}}]),t}();n.default=a},{}],30:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(){function t(){i(this,t)}return r(t,null,[{key:"isBuffered",value:function(t,e){if(t)for(var n=t.buffered,i=0;i<n.length;i++)if(e>=n.start(i)&&e<=n.end(i))return!0;return!1}},{key:"bufferInfo",value:function(t,e,n){if(t){var i,r=t.buffered,a=[];for(i=0;i<r.length;i++)a.push({start:r.start(i),end:r.end(i)});return this.bufferedInfo(a,e,n)}return{len:0,start:0,end:0,nextStart:void 0}}},{key:"bufferedInfo",value:function(t,e,n){var i,r,a,o,s,u=[];for(t.sort(function(t,e){var n=t.start-e.start;return n?n:e.end-t.end}),s=0;s<t.length;s++){var l=u.length;if(l){var c=u[l-1].end;t[s].start-c<n?t[s].end>c&&(u[l-1].end=t[s].end):u.push(t[s])}else u.push(t[s])}for(s=0,i=0,r=a=e;s<u.length;s++){var d=u[s].start,h=u[s].end;if(e+n>=d&&e<h)r=d,a=h,i=a-e;else if(e+n<d){o=d;break}}return{len:i,start:r,end:a,nextStart:o}}}]),t}();n.default=a},{}],31:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=t(45),o=function(){function t(){i(this,t)}return r(t,null,[{key:"mergeDetails",value:function(e,n){var i,r=Math.max(e.startSN,n.startSN)-n.startSN,o=Math.min(e.endSN,n.endSN)-n.startSN,s=n.startSN-e.startSN,u=e.fragments,l=n.fragments,c=0;if(o<r)return void(n.PTSKnown=!1);for(var d=r;d<=o;d++){var h=u[s+d],f=l[d];f&&h&&(c=h.cc-f.cc,isNaN(h.startPTS)||(f.start=f.startPTS=h.startPTS,f.endPTS=h.endPTS,f.duration=h.duration,i=f))}if(c)for(a.logger.log("discontinuity sliding from playlist, take drift into account"),d=0;d<l.length;d++)l[d].cc+=c;if(i)t.updateFragPTSDTS(n,i.sn,i.startPTS,i.endPTS,i.startDTS,i.endDTS);else if(s>=0&&s<u.length){var p=u[s].start;for(d=0;d<l.length;d++)l[d].start+=p}n.PTSKnown=e.PTSKnown}},{key:"updateFragPTSDTS",value:function(e,n,i,r,a,o){var s,u,l,c;if(!e||n<e.startSN||n>e.endSN)return 0;if(s=n-e.startSN,u=e.fragments,l=u[s],!isNaN(l.startPTS)){var d=Math.abs(l.startPTS-i);isNaN(l.deltaPTS)?l.deltaPTS=d:l.deltaPTS=Math.max(d,l.deltaPTS),i=Math.min(i,l.startPTS),r=Math.max(r,l.endPTS),a=Math.min(a,l.startDTS),o=Math.max(o,l.endDTS)}var h=i-l.start;for(l.start=l.startPTS=i,l.endPTS=r,l.startDTS=a,l.endDTS=o,l.duration=r-i,c=s;c>0;c--)t.updatePTS(u,c,c-1);for(c=s;c<u.length-1;c++)t.updatePTS(u,c,c+1);return e.PTSKnown=!0,h}},{key:"updatePTS",value:function(t,e,n){var i=t[e],r=t[n],o=r.startPTS;isNaN(o)?n>e?r.start=i.start+i.duration:r.start=i.start-r.duration:n>e?(i.duration=o-i.start,i.duration<0&&a.logger.warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!")):(r.duration=i.start-o,r.duration<0&&a.logger.warn("negative duration computed for frag "+r.sn+",level "+r.level+", there should be some duration drift between playlist and fragment!"))}}]),t}();n.default=o},{45:45}],32:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=t(28),s=i(o),u=t(26),l=t(36),c=i(l),d=t(34),h=i(d),f=t(4),p=i(f),v=t(7),m=i(v),g=t(8),y=i(g),_=t(5),E=i(_),A=t(12),b=i(A),T=t(11),S=i(T),k=t(13),C=i(k),w=t(10),R=i(w),I=t(6),L=i(I),D=t(45),P=t(47),O=i(P),M=t(1),N=i(M),x=t(35),F=i(x),U=t(43),B=i(U),G=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);var n=t.DefaultConfig;if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var i in n)i in e||(e[i]=n[i]);if(void 0!==e.liveMaxLatencyDurationCount&&e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==e.liveMaxLatencyDuration&&(e.liveMaxLatencyDuration<=e.liveSyncDuration||void 0===e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');(0,D.enableLogs)(e.debug),this.config=e;var a=this.observer=new N.default;a.trigger=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];a.emit.apply(a,[t,t].concat(n))},a.off=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];a.removeListener.apply(a,[t].concat(n))},this.on=a.on.bind(a),this.off=a.off.bind(a),this.trigger=a.trigger.bind(a),this.playlistLoader=new c.default(this),this.fragmentLoader=new h.default(this),this.levelController=new S.default(this),this.abrController=new e.abrController(this),this.bufferController=new e.bufferController(this),this.capLevelController=new e.capLevelController(this),this.fpsController=new e.fpsController(this),this.streamController=new e.streamController(this),this.audioStreamController=new e.audioStreamController(this),this.timelineController=new e.timelineController(this),this.audioTrackController=new L.default(this),this.keyLoader=new F.default(this)}return a(t,null,[{key:"isSupported",value:function(){return window.MediaSource=window.MediaSource||window.WebKitMediaSource,window.MediaSource&&"function"==typeof window.MediaSource.isTypeSupported&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')}},{key:"version",get:function(){return"0.6.21"}},{key:"Events",get:function(){return s.default}},{key:"ErrorTypes",get:function(){return u.ErrorTypes}},{key:"ErrorDetails",get:function(){return u.ErrorDetails}},{key:"DefaultConfig",get:function(){return t.defaultConfig||(t.defaultConfig={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,maxMaxBufferLength:600,maxSeekHole:2,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.2,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,fragLoadingLoopThreshold:3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:O.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,fetchSetup:void 0,abrController:p.default,bufferController:m.default,capLevelController:y.default,fpsController:R.default,streamController:b.default,audioStreamController:E.default,timelineController:C.default,cueHandler:B.default,enableCEA708Captions:!0,enableMP2TPassThrough:!1,stretchShortVideoTrack:!1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0}),t.defaultConfig},set:function(e){t.defaultConfig=e}}]),a(t,[{key:"destroy",value:function(){D.logger.log("destroy"),this.trigger(s.default.DESTROYING),this.detachMedia(),this.playlistLoader.destroy(),this.fragmentLoader.destroy(),this.levelController.destroy(),this.abrController.destroy(),this.bufferController.destroy(),this.capLevelController.destroy(),this.fpsController.destroy(),this.streamController.destroy(),this.audioStreamController.destroy(),this.timelineController.destroy(),this.audioTrackController.destroy(),this.keyLoader.destroy(),this.url=null,this.observer.removeAllListeners()}},{key:"attachMedia",value:function(t){D.logger.log("attachMedia"),this.media=t,this.trigger(s.default.MEDIA_ATTACHING,{media:t})}},{key:"detachMedia",value:function(){D.logger.log("detachMedia"),this.trigger(s.default.MEDIA_DETACHING),this.media=null}},{key:"loadSource",value:function(t){D.logger.log("loadSource:"+t),this.url=t,this.trigger(s.default.MANIFEST_LOADING,{url:t})}},{key:"startLoad",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;D.logger.log("startLoad("+t+")"),this.levelController.startLoad(),this.streamController.startLoad(t),this.audioStreamController.startLoad(t)}},{key:"stopLoad",value:function(){D.logger.log("stopLoad"),this.levelController.stopLoad(),this.streamController.stopLoad(),this.audioStreamController.stopLoad()}},{key:"swapAudioCodec",value:function(){D.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}},{key:"recoverMediaError",value:function(){D.logger.log("recoverMediaError");var t=this.media;this.detachMedia(),this.attachMedia(t)}},{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(t){D.logger.log("set currentLevel:"+t),this.loadLevel=t,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(t){D.logger.log("set nextLevel:"+t),this.levelController.manualLevel=t,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(t){D.logger.log("set loadLevel:"+t),this.levelController.manualLevel=t}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(t){this.levelController.nextLoadLevel=t}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.abrController.minAutoLevel)},set:function(t){D.logger.log("set firstLevel:"+t),this.levelController.firstLevel=t}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(t){D.logger.log("set startLevel:"+t),this.levelController.startLevel=t}},{key:"autoLevelCapping",get:function(){return this.abrController.autoLevelCapping},set:function(t){D.logger.log("set autoLevelCapping:"+t),this.abrController.autoLevelCapping=t}},{key:"autoLevelEnabled",get:function(){return this.levelController.manualLevel===-1}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"audioTracks",get:function(){return this.audioTrackController.audioTracks}},{key:"audioTrack",get:function(){return this.audioTrackController.audioTrack},set:function(t){this.audioTrackController.audioTrack=t}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}}]),t}();n.default=G},{1:1,10:10,11:11,12:12,13:13,26:26,28:28,34:34,35:35,36:36,4:4,43:43,45:45,47:47,5:5,6:6,7:7,8:8}],33:[function(t,e,n){"use strict";e.exports=t(32).default},{32:32}],34:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=t(28),l=i(u),c=t(27),d=i(c),h=t(26),f=t(45),p=function(t){function e(t){r(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,l.default.FRAG_LOADING));return n.loaders={},n}return o(e,t),s(e,[{key:"destroy",value:function(){var t=this.loaders;for(var e in t){var n=t[e];n&&n.destroy()}this.loaders={},d.default.prototype.destroy.call(this)}},{key:"onFragLoading",value:function(t){var e=t.frag,n=e.type,i=this.loaders[n],r=this.hls.config;e.loaded=0,i&&(f.logger.warn("abort previous fragment loader for type:"+n),i.abort()),i=this.loaders[n]=e.loader="undefined"!=typeof r.fLoader?new r.fLoader(r):new r.loader(r);var a=void 0,o=void 0,s=void 0;a={url:e.url,frag:e,responseType:"arraybuffer",progressData:!1};var u=e.byteRangeStartOffset,l=e.byteRangeEndOffset;isNaN(u)||isNaN(l)||(a.rangeStart=u,a.rangeEnd=l),o={timeout:r.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:r.fragLoadingMaxRetryTimeout},s={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},i.load(a,o,s)}},{key:"loadsuccess",value:function(t,e,n){var i=t.data,r=n.frag;r.loader=void 0,this.loaders[r.type]=void 0,this.hls.trigger(l.default.FRAG_LOADED,{payload:i,frag:r,stats:e})}},{key:"loaderror",value:function(t,e){var n=e.loader;n&&n.abort(),this.loaders[e.type]=void 0,this.hls.trigger(l.default.ERROR,{type:h.ErrorTypes.NETWORK_ERROR,details:h.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:e.frag,response:t})}},{key:"loadtimeout",value:function(t,e){var n=e.loader;n&&n.abort(),this.loaders[e.type]=void 0,this.hls.trigger(l.default.ERROR,{type:h.ErrorTypes.NETWORK_ERROR,details:h.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e.frag})}},{key:"loadprogress",value:function(t,e,n){var i=e.frag;i.loaded=t.loaded,this.hls.trigger(l.default.FRAG_LOAD_PROGRESS,{frag:i,stats:t})}}]),e}(d.default);n.default=p},{26:26,27:27,28:28,45:45}],35:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=t(28),l=i(u),c=t(27),d=i(c),h=t(26),f=t(45),p=function(t){function e(t){r(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,l.default.KEY_LOADING));return n.loaders={},n.decryptkey=null,n.decrypturl=null,n}return o(e,t),s(e,[{key:"destroy",value:function(){for(var t in this.loaders){var e=this.loaders[t];e&&e.destroy()}this.loaders={},d.default.prototype.destroy.call(this)}},{key:"onKeyLoading",value:function(t){var e=t.frag,n=e.type,i=this.loaders[n],r=e.decryptdata,a=r.uri;if(a!==this.decrypturl||null===this.decryptkey){var o=this.hls.config;i&&(f.logger.warn("abort previous key loader for type:"+n),i.abort()),e.loader=this.loaders[n]=new o.loader(o),this.decrypturl=a,this.decryptkey=null;var s=void 0,u=void 0,c=void 0;s={url:a,frag:e,responseType:"arraybuffer"},u={timeout:o.fragLoadingTimeOut,maxRetry:o.fragLoadingMaxRetry,retryDelay:o.fragLoadingRetryDelay,maxRetryDelay:o.fragLoadingMaxRetryTimeout},c={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},e.loader.load(s,u,c)}else this.decryptkey&&(r.key=this.decryptkey,this.hls.trigger(l.default.KEY_LOADED,{frag:e}))}},{key:"loadsuccess",value:function(t,e,n){var i=n.frag;this.decryptkey=i.decryptdata.key=new Uint8Array(t.data),i.loader=void 0,this.loaders[i.type]=void 0,this.hls.trigger(l.default.KEY_LOADED,{frag:i})}},{key:"loaderror",value:function(t,e){var n=e.frag,i=n.loader;i&&i.abort(),this.loaders[e.type]=void 0,this.hls.trigger(l.default.ERROR,{type:h.ErrorTypes.NETWORK_ERROR,details:h.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:n,response:t})}},{key:"loadtimeout",value:function(t,e){var n=e.frag,i=n.loader;i&&i.abort(),this.loaders[e.type]=void 0,this.hls.trigger(l.default.ERROR,{type:h.ErrorTypes.NETWORK_ERROR,details:h.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:n})}}]),e}(d.default);n.default=p},{26:26,27:27,28:28,45:45}],36:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=t(2),l=i(u),c=t(28),d=i(c),h=t(27),f=i(h),p=t(26),v=t(40),m=i(v),g=t(45),y=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,_=/#EXT-X-MEDIA:(.*)/g,E=/#EXTINF:(\d*(?:\.\d+)?)(?:,(.*))?|(?!#)(\S.+)|#EXT-X-BYTERANGE: *(.+)|#EXT-X-PROGRAM-DATE-TIME:(.+)|#.*/g,A=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)(.*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,b=function(){function t(){o(this,t),this.method=null,this.key=null,this.iv=null,this._uri=null}return s(t,[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=l.default.buildAbsoluteURL(this.baseuri,this.reluri)),this._uri}}]),t}(),T=function(){function t(){o(this,t),this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[]}return s(t,[{key:"createInitializationVector",value:function(t){for(var e=new Uint8Array(16),n=12;n<16;n++)e[n]=t>>8*(15-n)&255;return e}},{key:"fragmentDecryptdataFromLevelkey",value:function(t,e){var n=t;return t&&t.method&&t.uri&&!t.iv&&(n=new b,n.method=t.method,n.baseuri=t.baseuri,n.reluri=t.reluri,n.iv=this.createInitializationVector(e)),n}},{key:"cloneObj",value:function(t){return JSON.parse(JSON.stringify(t))}},{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=l.default.buildAbsoluteURL(this.baseurl,this.relurl)),this._url},set:function(t){this._url=t}},{key:"programDateTime",get:function(){return!this._programDateTime&&this.rawProgramDateTime&&(this._programDateTime=new Date(Date.parse(this.rawProgramDateTime))),this._programDateTime}},{key:"byteRange",get:function(){if(!this._byteRange){var t=this._byteRange=[];if(this.rawByteRange){var e=this.rawByteRange.split("@",2);if(1===e.length){var n=this.lastByteRangeEndOffset;t[0]=n?n:0}else t[0]=parseInt(e[1]);t[1]=parseInt(e[0])+t[0]}}return this._byteRange}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata}}]),t}(),S=function(t){function e(t){o(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,d.default.MANIFEST_LOADING,d.default.LEVEL_LOADING,d.default.AUDIO_TRACK_LOADING));return n.loaders={},n}return a(e,t),s(e,[{key:"destroy",value:function(){for(var t in this.loaders){var e=this.loaders[t];e&&e.destroy()}this.loaders={},f.default.prototype.destroy.call(this)}},{key:"onManifestLoading",value:function(t){this.load(t.url,{type:"manifest"})}},{key:"onLevelLoading",value:function(t){this.load(t.url,{type:"level",level:t.level,id:t.id})}},{key:"onAudioTrackLoading",value:function(t){this.load(t.url,{type:"audioTrack",id:t.id})}},{key:"load",value:function(t,e){var n=this.loaders[e.type];if(n){var i=n.context;if(i&&i.url===t)return void g.logger.trace("playlist request ongoing");g.logger.warn("abort previous loader for type:"+e.type),n.abort()}var r=this.hls.config,a=void 0,o=void 0,s=void 0,u=void 0;"manifest"===e.type?(a=r.manifestLoadingMaxRetry,o=r.manifestLoadingTimeOut,s=r.manifestLoadingRetryDelay,u=r.manifestLoadingMaxRetryTimeout):(a=r.levelLoadingMaxRetry,o=r.levelLoadingTimeOut,s=r.levelLoadingRetryDelay,u=r.levelLoadingMaxRetryTimeout,g.logger.log("loading playlist for "+e.type+" "+(e.level||e.id))),n=this.loaders[e.type]=e.loader="undefined"!=typeof r.pLoader?new r.pLoader(r):new r.loader(r),e.url=t,e.responseType="";var l=void 0,c=void 0;l={timeout:o,maxRetry:a,retryDelay:s,maxRetryDelay:u},c={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},n.load(e,l,c)}},{key:"resolve",value:function(t,e){return l.default.buildAbsoluteURL(e,t)}},{key:"parseMasterPlaylist",value:function(t,e){var n=[],i=void 0;for(y.lastIndex=0;null!=(i=y.exec(t));){var r={},a=r.attrs=new m.default(i[1]);r.url=this.resolve(i[2],e);var o=a.decimalResolution("RESOLUTION");o&&(r.width=o.width,r.height=o.height),r.bitrate=a.decimalInteger("AVERAGE-BANDWIDTH")||a.decimalInteger("BANDWIDTH"),r.name=a.NAME;var s=a.CODECS;if(s){s=s.split(/[ ,]+/);for(var u=0;u<s.length;u++){var l=s[u];l.indexOf("avc1")!==-1?r.videoCodec=this.avc1toavcoti(l):r.audioCodec=l}}n.push(r)}return n}},{key:"parseMasterPlaylistMedia",value:function(t,e,n){var i=void 0,r=[];for(_.lastIndex=0;null!=(i=_.exec(t));){var a={},o=new m.default(i[1]);o.TYPE===n&&(a.groupId=o["GROUP-ID"],a.name=o.NAME,a.type=n,a.default="YES"===o.DEFAULT,a.autoselect="YES"===o.AUTOSELECT,a.forced="YES"===o.FORCED,o.URI&&(a.url=this.resolve(o.URI,e)),a.lang=o.LANGUAGE,a.name||(a.name=a.lang),r.push(a))}return r}},{key:"avc1toavcoti",value:function(t){var e,n=t.split(".");return n.length>2?(e=n.shift()+".",e+=parseInt(n.shift()).toString(16),e+=("000"+parseInt(n.shift()).toString(16)).substr(-4)):e=t,e}},{key:"parseLevelPlaylist",value:function(t,e,n,i){var r,a,o=0,s=0,u={
type:null,version:null,url:e,fragments:[],live:!0,startSN:0},l=new b,c=0,d=null,h=new T;for(E.lastIndex=0;null!==(r=E.exec(t));){var f=r[1];if(f){h.duration=parseFloat(f);var p=(" "+r[2]).slice(1);h.title=p?p:null,h.tagList.push(p?["INF",f,p]:["INF",f])}else if(r[3]){if(!isNaN(h.duration)){var v=o++;h.type=i,h.start=s,h.levelkey=l,h.sn=v,h.level=n,h.cc=c,h.baseurl=e,h.relurl=(" "+r[3]).slice(1),u.fragments.push(h),d=h,s+=h.duration,h=new T}}else if(r[4]){if(h.rawByteRange=(" "+r[4]).slice(1),d){var y=d.byteRangeEndOffset;y&&(h.lastByteRangeEndOffset=y)}}else if(r[5])h.rawProgramDateTime=(" "+r[5]).slice(1),h.tagList.push(["PROGRAM-DATE-TIME",h.rawProgramDateTime]);else{for(r=r[0].match(A),a=1;a<r.length&&void 0===r[a];a++);var _=(" "+r[a+1]).slice(1),S=(" "+r[a+2]).slice(1);switch(r[a]){case"#":h.tagList.push(S?[_,S]:[_]);break;case"PLAYLIST-TYPE":u.type=_.toUpperCase();break;case"MEDIA-SEQUENCE":o=u.startSN=parseInt(_);break;case"TARGETDURATION":u.targetduration=parseFloat(_);break;case"VERSION":u.version=parseInt(_);break;case"EXTM3U":break;case"ENDLIST":u.live=!1;break;case"DIS":c++,h.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":c=parseInt(_);break;case"KEY":var k=_,C=new m.default(k),w=C.enumeratedString("METHOD"),R=C.URI,I=C.hexadecimalInteger("IV");w&&(l=new b,R&&"AES-128"===w&&(l.method=w,l.baseuri=e,l.reluri=R,l.key=null,l.iv=I));break;case"START":var L=_,D=new m.default(L),P=D.decimalFloatingPoint("TIME-OFFSET");isNaN(P)||(u.startTimeOffset=P);break;case"MAP":var O=new m.default(_);h.relurl=O.URI,h.rawByteRange=O.BYTERANGE,h.baseurl=e,h.level=n,h.type=i,h.sn="initSegment",u.initSegment=h,h=new T;break;default:g.logger.warn("line parsed but not handled: "+r)}}}return h=d,h&&!h.relurl&&(u.fragments.pop(),s-=h.duration),u.totalduration=s,u.averagetargetduration=s/u.fragments.length,u.endSN=o-1,u}},{key:"loadsuccess",value:function(t,e,n){var i=t.data,r=t.url,a=n.type,o=n.id,s=n.level,u=this.hls;if(this.loaders[a]=void 0,void 0!==r&&0!==r.indexOf("data:")||(r=n.url),e.tload=performance.now(),0===i.indexOf("#EXTM3U"))if(i.indexOf("#EXTINF:")>0){var l="audioTrack"!==a,c=this.parseLevelPlaylist(i,r,(l?s:o)||0,l?"main":"audio");"manifest"===a&&u.trigger(d.default.MANIFEST_LOADED,{levels:[{url:r,details:c}],audioTracks:[],url:r,stats:e}),e.tparsed=performance.now(),c.targetduration?l?u.trigger(d.default.LEVEL_LOADED,{details:c,level:s||0,id:o||0,stats:e}):u.trigger(d.default.AUDIO_TRACK_LOADED,{details:c,id:o,stats:e}):u.trigger(d.default.ERROR,{type:p.ErrorTypes.NETWORK_ERROR,details:p.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:r,reason:"invalid targetduration"})}else{var h=this.parseMasterPlaylist(i,r);if(h.length){var f=this.parseMasterPlaylistMedia(i,r,"AUDIO");if(f.length){var v=!1;f.forEach(function(t){t.url||(v=!0)}),v===!1&&h[0].audioCodec&&!h[0].attrs.AUDIO&&(g.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),f.unshift({type:"main",name:"main"}))}u.trigger(d.default.MANIFEST_LOADED,{levels:h,audioTracks:f,url:r,stats:e})}else u.trigger(d.default.ERROR,{type:p.ErrorTypes.NETWORK_ERROR,details:p.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:r,reason:"no level found in manifest"})}else u.trigger(d.default.ERROR,{type:p.ErrorTypes.NETWORK_ERROR,details:p.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:r,reason:"no EXTM3U delimiter"})}},{key:"loaderror",value:function(t,e){var n,i,r=e.loader;switch(e.type){case"manifest":n=p.ErrorDetails.MANIFEST_LOAD_ERROR,i=!0;break;case"level":n=p.ErrorDetails.LEVEL_LOAD_ERROR,i=!1;break;case"audioTrack":n=p.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,i=!1}r&&(r.abort(),this.loaders[e.type]=void 0),this.hls.trigger(d.default.ERROR,{type:p.ErrorTypes.NETWORK_ERROR,details:n,fatal:i,url:r.url,loader:r,response:t,context:e})}},{key:"loadtimeout",value:function(t,e){var n,i,r=e.loader;switch(e.type){case"manifest":n=p.ErrorDetails.MANIFEST_LOAD_TIMEOUT,i=!0;break;case"level":n=p.ErrorDetails.LEVEL_LOAD_TIMEOUT,i=!1;break;case"audioTrack":n=p.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT,i=!1}r&&(r.abort(),this.loaders[e.type]=void 0),this.hls.trigger(d.default.ERROR,{type:p.ErrorTypes.NETWORK_ERROR,details:n,fatal:i,url:r.url,loader:r,context:e})}}]),e}(f.default);n.default=S},{2:2,26:26,27:27,28:28,40:40,45:45}],37:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(){function t(){i(this,t)}return r(t,null,[{key:"init",value:function(){t.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var e;for(e in t.types)t.types.hasOwnProperty(e)&&(t.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);t.HDLR_TYPES={video:n,audio:i};var r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);t.STTS=t.STSC=t.STCO=a,t.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),t.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),t.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),t.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var o=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),u=new Uint8Array([0,0,0,1]);t.FTYP=t.box(t.types.ftyp,o,u,o,s),t.DINF=t.box(t.types.dinf,t.box(t.types.dref,r))}},{key:"box",value:function(t){for(var e,n=Array.prototype.slice.call(arguments,1),i=8,r=n.length,a=r;r--;)i+=n[r].byteLength;for(e=new Uint8Array(i),e[0]=i>>24&255,e[1]=i>>16&255,e[2]=i>>8&255,e[3]=255&i,e.set(t,4),r=0,i=8;r<a;r++)e.set(n[r],i),i+=n[r].byteLength;return e}},{key:"hdlr",value:function(e){return t.box(t.types.hdlr,t.HDLR_TYPES[e])}},{key:"mdat",value:function(e){return t.box(t.types.mdat,e)}},{key:"mdhd",value:function(e,n){return n*=e,t.box(t.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24,n>>16&255,n>>8&255,255&n,85,196,0,0]))}},{key:"mdia",value:function(e){return t.box(t.types.mdia,t.mdhd(e.timescale,e.duration),t.hdlr(e.type),t.minf(e))}},{key:"mfhd",value:function(e){return t.box(t.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))}},{key:"minf",value:function(e){return"audio"===e.type?t.box(t.types.minf,t.box(t.types.smhd,t.SMHD),t.DINF,t.stbl(e)):t.box(t.types.minf,t.box(t.types.vmhd,t.VMHD),t.DINF,t.stbl(e))}},{key:"moof",value:function(e,n,i){return t.box(t.types.moof,t.mfhd(e),t.traf(i,n))}},{key:"moov",value:function(e){for(var n=e.length,i=[];n--;)i[n]=t.trak(e[n]);return t.box.apply(null,[t.types.moov,t.mvhd(e[0].timescale,e[0].duration)].concat(i).concat(t.mvex(e)))}},{key:"mvex",value:function(e){for(var n=e.length,i=[];n--;)i[n]=t.trex(e[n]);return t.box.apply(null,[t.types.mvex].concat(i))}},{key:"mvhd",value:function(e,n){n*=e;var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24&255,n>>16&255,n>>8&255,255&n,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t.box(t.types.mvhd,i)}},{key:"sdtp",value:function(e){var n,i,r=e.samples||[],a=new Uint8Array(4+r.length);for(i=0;i<r.length;i++)n=r[i].flags,a[i+4]=n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;return t.box(t.types.sdtp,a)}},{key:"stbl",value:function(e){return t.box(t.types.stbl,t.stsd(e),t.box(t.types.stts,t.STTS),t.box(t.types.stsc,t.STSC),t.box(t.types.stsz,t.STSZ),t.box(t.types.stco,t.STCO))}},{key:"avc1",value:function(e){var n,i,r,a=[],o=[];for(n=0;n<e.sps.length;n++)i=e.sps[n],r=i.byteLength,a.push(r>>>8&255),a.push(255&r),a=a.concat(Array.prototype.slice.call(i));for(n=0;n<e.pps.length;n++)i=e.pps[n],r=i.byteLength,o.push(r>>>8&255),o.push(255&r),o=o.concat(Array.prototype.slice.call(i));var s=t.box(t.types.avcC,new Uint8Array([1,a[3],a[4],a[5],255,224|e.sps.length].concat(a).concat([e.pps.length]).concat(o))),u=e.width,l=e.height,c=e.pixelRatio[0],d=e.pixelRatio[1];return t.box(t.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,u>>8&255,255&u,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,t.box(t.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),t.box(t.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,d>>24,d>>16&255,d>>8&255,255&d])))}},{key:"esds",value:function(t){var e=t.config.length;return new Uint8Array([0,0,0,0,3,23+e,0,1,0,4,15+e,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([e]).concat(t.config).concat([6,1,2]))}},{key:"mp4a",value:function(e){var n=e.audiosamplerate;return t.box(t.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]),t.box(t.types.esds,t.esds(e)))}},{key:"mp3",value:function(e){var n=e.audiosamplerate;return t.box(t.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]))}},{key:"stsd",value:function(e){return"audio"===e.type?e.isAAC||"mp3"!==e.codec?t.box(t.types.stsd,t.STSD,t.mp4a(e)):t.box(t.types.stsd,t.STSD,t.mp3(e)):t.box(t.types.stsd,t.STSD,t.avc1(e))}},{key:"tkhd",value:function(e){var n=e.id,i=e.duration*e.timescale,r=e.width,a=e.height;return t.box(t.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,n>>24&255,n>>16&255,n>>8&255,255&n,0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,r>>8&255,255&r,0,0,a>>8&255,255&a,0,0]))}},{key:"traf",value:function(e,n){var i=t.sdtp(e),r=e.id;return t.box(t.types.traf,t.box(t.types.tfhd,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r])),t.box(t.types.tfdt,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n])),t.trun(e,i.length+16+16+8+16+8+8),i)}},{key:"trak",value:function(e){return e.duration=e.duration||4294967295,t.box(t.types.trak,t.tkhd(e),t.mdia(e))}},{key:"trex",value:function(e){var n=e.id;return t.box(t.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}},{key:"trun",value:function(e,n){var i,r,a,o,s,u,l=e.samples||[],c=l.length,d=12+16*c,h=new Uint8Array(d);for(n+=8+d,h.set([0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,255&c,n>>>24&255,n>>>16&255,n>>>8&255,255&n],0),i=0;i<c;i++)r=l[i],a=r.duration,o=r.size,s=r.flags,u=r.cts,h.set([a>>>24&255,a>>>16&255,a>>>8&255,255&a,o>>>24&255,o>>>16&255,o>>>8&255,255&o,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,u>>>24&255,u>>>16&255,u>>>8&255,255&u],12+16*i);return t.box(t.types.trun,h)}},{key:"initSegment",value:function(e){t.types||t.init();var n,i=t.moov(e);return n=new Uint8Array(t.FTYP.byteLength+i.byteLength),n.set(t.FTYP),n.set(i,t.FTYP.byteLength),n}}]),t}();n.default=a},{}],38:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=t(29),s=i(o),u=t(28),l=i(u),c=t(45),d=t(37),h=i(d),f=t(26),p=function(){function t(e,n,i,a){r(this,t),this.observer=e,this.id=n,this.config=i,this.typeSupported=a,this.ISGenerated=!1,this.PES2MP4SCALEFACTOR=4,this.PES_TIMESCALE=9e4,this.MP4_TIMESCALE=this.PES_TIMESCALE/this.PES2MP4SCALEFACTOR}return a(t,[{key:"destroy",value:function(){}},{key:"insertDiscontinuity",value:function(){this._initPTS=this._initDTS=void 0}},{key:"switchLevel",value:function(){this.ISGenerated=!1}},{key:"remux",value:function(t,e,n,i,r,a,o,s,u,c,d){if(this.level=t,this.sn=e,this.ISGenerated||this.generateIS(i,r,s,n),null!==d&&(this._initPTS=this._initDTS=d),this.ISGenerated)if(i.samples.length){var h=this.remuxAudio(i,s,u,c);if(r.samples.length){var f=void 0;h&&(f=h.endPTS-h.startPTS),this.remuxVideo(r,s,u,f)}}else{var p=void 0;r.samples.length&&(p=this.remuxVideo(r,s,u)),p&&i.codec&&this.remuxEmptyAudio(i,s,u,p)}a.samples.length&&this.remuxID3(a,s),o.samples.length&&this.remuxText(o,s),this.observer.trigger(l.default.FRAG_PARSED,{id:this.id,level:this.level,sn:this.sn})}},{key:"generateIS",value:function(t,e,n,i){var r,a,o=this.observer,s=t.samples,u=e.samples,d=this.PES_TIMESCALE,p=this.typeSupported,v="audio/mp4",m={},g={id:this.id,level:this.level,sn:this.sn,tracks:m,unique:!1},y=void 0===this._initPTS;y&&(r=a=1/0),t.config&&s.length&&(t.timescale=t.audiosamplerate,t.timescale*t.duration>Math.pow(2,32)&&!function(){var e=function t(e,n){return n?t(n,e%n):e};t.timescale=t.audiosamplerate/e(t.audiosamplerate,t.isAAC?1024:1152)}(),c.logger.log("audio mp4 timescale :"+t.timescale),t.isAAC||(p.mpeg?(v="audio/mpeg",t.codec=""):p.mp3&&(t.codec="mp3")),m.audio={container:v,codec:t.codec,initSegment:!t.isAAC&&p.mpeg?new Uint8Array:h.default.initSegment([t]),metadata:{channelCount:t.channelCount}},y&&(r=a=s[0].pts-d*n)),e.sps&&e.pps&&u.length&&(e.timescale=this.MP4_TIMESCALE,m.video={container:"video/mp4",codec:e.codec,initSegment:h.default.initSegment([e]),metadata:{width:e.width,height:e.height}},y&&(r=Math.min(r,u[0].pts-d*n),a=Math.min(a,u[0].dts-d*n),this.observer.trigger(l.default.INIT_PTS_FOUND,{id:this.id,initPTS:r,cc:i}))),Object.keys(m).length?(o.trigger(l.default.FRAG_PARSING_INIT_SEGMENT,g),this.ISGenerated=!0,y&&(this._initPTS=r,this._initDTS=a)):o.trigger(l.default.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,id:this.id,details:f.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})}},{key:"remuxVideo",value:function(t,e,n,i){var r,a,o,s,u,d,p,v,m=8,g=this.PES_TIMESCALE,y=this.PES2MP4SCALEFACTOR,_=t.samples,E=[],A=_.length,b=this._PTSNormalize,T=this._initDTS;_.sort(function(t,e){var n=t.dts-e.dts;return n?n:t.pts-e.pts});var S=_.reduce(function(t,e){return Math.max(Math.min(t,e.pts-e.dts),-18e3)},0);if(S<0){c.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(S/90)+" ms to overcome this issue");for(var k=0;k<_.length;k++)_[k].dts+=S}var C=void 0;C=n?this.nextAvcDts:e*g;var w=_[0];u=Math.max(b(w.dts-T,C),0),s=Math.max(b(w.pts-T,C),0);var R=Math.round((u-C)/90);n&&R&&(R>1?c.logger.log("AVC:"+R+" ms hole between fragments detected,filling it"):R<-1&&c.logger.log("AVC:"+-R+" ms overlapping between fragments detected"),u=C,_[0].dts=u+T,s=Math.max(s-R,C),_[0].pts=s+T,c.logger.log("Video/PTS/DTS adjusted: "+Math.round(s/90)+"/"+Math.round(u/90)+",delta:"+R+" ms")),d=u,w=_[_.length-1],v=Math.max(b(w.dts-T,C),0),p=Math.max(b(w.pts-T,C),0),p=Math.max(p,v);var I=navigator.vendor,L=navigator.userAgent,D=I&&I.indexOf("Apple")>-1&&L&&!L.match("CriOS");D&&(r=Math.round((v-u)/(y*(_.length-1))));for(var P=0;P<A;P++){var O=_[P];D?O.dts=u+P*y*r:(O.dts=Math.max(b(O.dts-T,C),u),O.dts=Math.round(O.dts/y)*y),O.pts=Math.max(b(O.pts-T,C),O.dts),O.pts=Math.round(O.pts/y)*y}var M=t.len+4*t.nbNalu+8;try{a=new Uint8Array(M)}catch(t){return void this.observer.trigger(l.default.ERROR,{type:f.ErrorTypes.MUX_ERROR,level:this.level,id:this.id,details:f.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:M,reason:"fail allocating video mdat "+M})}var N=new DataView(a.buffer);N.setUint32(0,M),a.set(h.default.types.mdat,4);for(var x=0;x<A;x++){for(var F=_[x],U=F.units.units,B=0,G=void 0,j=0,H=U.length;j<H;j++){var V=U[j],W=V.data,K=V.data.byteLength;N.setUint32(m,K),m+=4,a.set(W,m),m+=K,B+=4+K}if(D)G=Math.max(0,r*Math.round((F.pts-F.dts)/(y*r)));else{if(x<A-1)r=_[x+1].dts-F.dts;else{var q=this.config,Y=F.dts-_[x>0?x-1:x].dts;if(q.stretchShortVideoTrack){var z=q.maxBufferHole,X=q.maxSeekHole,Q=Math.floor(Math.min(z,X)*g),$=(i?s+i*g:this.nextAudioPts)-F.pts;$>Q?(r=$-Y,r<0&&(r=Y),c.logger.log("It is approximately "+$/90+" ms to the next segment; using duration "+r/90+" ms for the last video frame.")):r=Y}else r=Y}r/=y,G=Math.round((F.pts-F.dts)/y)}E.push({size:B,duration:r,cts:G,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:F.key?2:1,isNonSync:F.key?0:1}})}this.nextAvcDts=v+r*y;var J=t.dropped;if(t.len=0,t.nbNalu=0,t.dropped=0,E.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var Z=E[0].flags;Z.dependsOn=2,Z.isNonSync=0}t.samples=E,o=h.default.moof(t.sequenceNumber++,u/y,t),t.samples=[];var tt={id:this.id,level:this.level,sn:this.sn,data1:o,data2:a,startPTS:s/g,endPTS:(p+y*r)/g,startDTS:u/g,endDTS:this.nextAvcDts/g,type:"video",nb:E.length,dropped:J};return this.observer.trigger(l.default.FRAG_PARSING_DATA,tt),tt}},{key:"remuxAudio",value:function(t,e,n,i){var r,a,o,u,d,p,v,m,g,y,_,E,A,b,T,S,k=this.PES_TIMESCALE,C=t.timescale,w=k/C,R=t.timescale*(t.isAAC?1024:1152)/t.audiosamplerate,I=R*w,L=this._PTSNormalize,D=this._initDTS,P=!t.isAAC&&this.typeSupported.mpeg,O=P?0:8,M=[],N=[];if(t.samples.sort(function(t,e){return t.pts-e.pts}),N=t.samples,S=this.nextAudioPts,n|=N.length&&S&&(Math.abs(e-S/k)<.1||Math.abs(N[0].pts-S-this._initDTS)<20*I),n||(S=e*k),i&&t.isAAC)for(var x=0,F=S;x<N.length;){var U=N[x],B=L(U.pts-D,S),G=B-F;if(G<=-I)c.logger.warn("Dropping 1 audio frame @ "+Math.round(F/90)/1e3+"s due to "+Math.round(Math.abs(G/90))+" ms overlap."),N.splice(x,1),t.len-=U.unit.length;else if(G>=I&&F){var j=Math.round(G/I);c.logger.warn("Injecting "+j+" audio frame @ "+Math.round(F/90)/1e3+"s due to "+Math.round(G/90)+" ms gap.");for(var H=0;H<j;H++)T=F+D,T=Math.max(T,D),b=s.default.getSilentFrame(t.manifestCodec||t.codec,t.channelCount),b||(c.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),b=U.unit.subarray()),N.splice(x,0,{unit:b,pts:T,dts:T}),t.len+=b.length,F+=I,x+=1;U.pts=U.dts=F+D,F+=I,x+=1}else Math.abs(G)>.1*I,F+=I,0===x?U.pts=U.dts=D+S:U.pts=U.dts=N[x-1].pts+I,x+=1}for(var V=0,W=N.length;V<W;V++){if(a=N[V],u=a.unit,y=a.pts-D,_=a.dts-D,void 0!==g)E=L(y,g),A=L(_,g),o.duration=Math.round((A-g)/w);else{E=L(y,S),A=L(_,S);var K=Math.round(1e3*(E-S)/k),q=0;if(n&&t.isAAC&&K){if(K>0)q=Math.round((E-S)/I),c.logger.log(K+" ms hole between AAC samples detected,filling it"),q>0&&(b=s.default.getSilentFrame(t.manifestCodec||t.codec,t.channelCount),b||(b=u.subarray()),t.len+=q*b.length);else if(K<-12){c.logger.log(-K+" ms overlapping between AAC samples detected, drop frame"),t.len-=u.byteLength;continue}E=A=S}if(v=Math.max(0,E),m=Math.max(0,A),!(t.len>0))return;var Y=P?t.len:t.len+8;try{d=new Uint8Array(Y)}catch(t){return void this.observer.trigger(l.default.ERROR,{type:f.ErrorTypes.MUX_ERROR,level:this.level,id:this.id,details:f.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:Y,reason:"fail allocating audio mdat "+Y})}P||(r=new DataView(d.buffer),r.setUint32(0,Y),d.set(h.default.types.mdat,4));for(var z=0;z<q;z++)T=E-(q-z)*I,b=s.default.getSilentFrame(t.manifestCodec||t.codec,t.channelCount),b||(c.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),b=u.subarray()),d.set(b,O),O+=b.byteLength,o={size:b.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},M.push(o)}d.set(u,O);var X=u.byteLength;O+=X,o={size:X,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},M.push(o),g=A}var Q=0,$=M.length;if($>=2&&(Q=M[$-2].duration,o.duration=Q),$){this.nextAudioPts=E+w*Q,t.len=0,t.samples=M,p=P?new Uint8Array:h.default.moof(t.sequenceNumber++,m/w,t),t.samples=[];var J={id:this.id,level:this.level,sn:this.sn,data1:p,data2:d,startPTS:v/k,endPTS:this.nextAudioPts/k,startDTS:m/k,endDTS:(A+w*Q)/k,type:"audio",nb:$};return this.observer.trigger(l.default.FRAG_PARSING_DATA,J),J}return null}},{key:"remuxEmptyAudio",value:function(t,e,n,i){var r=this.PES_TIMESCALE,a=t.timescale?t.timescale:t.audiosamplerate,o=r/a,u=this.nextAudioPts,l=(void 0!==u?u:i.startDTS*r)+this._initDTS,d=i.endDTS*r+this._initDTS,h=1024,f=o*h,p=Math.ceil((d-l)/f),v=s.default.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);if(c.logger.warn("remux empty Audio"),!v)return void c.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!");for(var m=[],g=0;g<p;g++){var y=l+g*f;m.push({unit:v,pts:y,dts:y}),t.len+=v.length}t.samples=m,this.remuxAudio(t,e,n)}},{key:"remuxID3",value:function(t,e){var n,i=t.samples.length;if(i){for(var r=0;r<i;r++)n=t.samples[r],n.pts=(n.pts-this._initPTS)/this.PES_TIMESCALE,n.dts=(n.dts-this._initDTS)/this.PES_TIMESCALE;this.observer.trigger(l.default.FRAG_PARSING_METADATA,{id:this.id,level:this.level,sn:this.sn,samples:t.samples})}t.samples=[],e=e}},{key:"remuxText",value:function(t,e){t.samples.sort(function(t,e){return t.pts-e.pts});var n,i=t.samples.length;if(i){for(var r=0;r<i;r++)n=t.samples[r],n.pts=(n.pts-this._initPTS)/this.PES_TIMESCALE;this.observer.trigger(l.default.FRAG_PARSING_USERDATA,{id:this.id,level:this.level,sn:this.sn,samples:t.samples})}t.samples=[],e=e}},{key:"_PTSNormalize",value:function(t,e){var n;if(void 0===e)return t;for(n=e<t?-8589934592:8589934592;Math.abs(t-e)>4294967296;)t+=n;return t}},{key:"passthrough",get:function(){return!1}}]),t}();n.default=p},{26:26,28:28,29:29,37:37,45:45}],39:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=t(28),s=i(o),u=function(){function t(e,n){r(this,t),this.observer=e,this.id=n,this.ISGenerated=!1}return a(t,[{key:"destroy",value:function(){}},{key:"insertDiscontinuity",value:function(){}},{key:"switchLevel",value:function(){this.ISGenerated=!1}},{key:"remux",value:function(t,e,n,i,r,a){var o=this.observer;if(!this.ISGenerated){var u={},l={id:this.id,tracks:u,unique:!0},c=e,d=c.codec;d&&(l.tracks.video={container:c.container,codec:d,metadata:{width:c.width,height:c.height}}),c=t,d=c.codec,d&&(l.tracks.audio={container:c.container,codec:d,metadata:{channelCount:c.channelCount}}),this.ISGenerated=!0,o.trigger(s.default.FRAG_PARSING_INIT_SEGMENT,l)}o.trigger(s.default.FRAG_PARSING_DATA,{id:this.id,data1:a,startPTS:r,startDTS:r,type:"audiovideo",nb:1,dropped:0})}},{key:"passthrough",get:function(){return!0}}]),t}();n.default=u},{28:28}],40:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=/^(\d+)x(\d+)$/,o=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,s=function(){function t(e){i(this,t),"string"==typeof e&&(e=t.parseAttrList(e));for(var n in e)e.hasOwnProperty(n)&&(this[n]=e[n])}return r(t,[{key:"decimalInteger",value:function(t){var e=parseInt(this[t],10);return e>Number.MAX_SAFE_INTEGER?1/0:e}},{key:"hexadecimalInteger",value:function(t){if(this[t]){var e=(this[t]||"0x").slice(2);e=(1&e.length?"0":"")+e;for(var n=new Uint8Array(e.length/2),i=0;i<e.length/2;i++)n[i]=parseInt(e.slice(2*i,2*i+2),16);return n}return null}},{key:"hexadecimalIntegerAsNumber",value:function(t){var e=parseInt(this[t],16);return e>Number.MAX_SAFE_INTEGER?1/0:e}},{key:"decimalFloatingPoint",value:function(t){return parseFloat(this[t])}},{key:"enumeratedString",value:function(t){return this[t]}},{key:"decimalResolution",value:function(t){var e=a.exec(this[t]);if(null!==e)return{width:parseInt(e[1],10),height:parseInt(e[2],10)}}}],[{key:"parseAttrList",value:function(t){var e,n={};for(o.lastIndex=0;null!==(e=o.exec(t));){var i=e[2],r='"';0===i.indexOf(r)&&i.lastIndexOf(r)===i.length-1&&(i=i.slice(1,-1)),n[e[1]]=i}return n}}]),t}();n.default=s},{}],41:[function(t,e,n){"use strict";var i={search:function(t,e){for(var n=0,i=t.length-1,r=null,a=null;n<=i;){r=(n+i)/2|0,a=t[r];var o=e(a);if(o>0)n=r+1;else{if(!(o<0))return a;i=r-1}}return null}};e.exports=i},{}],42:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},o=function(t){var e=t;return a.hasOwnProperty(t)&&(e=a[t]),String.fromCharCode(e)},s=15,u=32,l={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},c={17:2,18:4,21:6,22:8,23:10,19:13,20:15},d={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},h={25:2,26:4,29:6,30:8,31:10,27:13,28:15},f=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],p={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(t){this.time=t},log:function(t,e){var n=this.verboseFilter[t];this.verboseLevel>=n}},v=function(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n].toString(16));return e},m=function(){function t(e,n,r,a,o){i(this,t),this.foreground=e||"white",this.underline=n||!1,this.italics=r||!1,this.background=a||"black",this.flash=o||!1}return r(t,[{key:"reset",value:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}},{key:"setStyles",value:function(t){for(var e=["foreground","underline","italics","background","flash"],n=0;n<e.length;n++){var i=e[n];t.hasOwnProperty(i)&&(this[i]=t[i])}}},{key:"isDefault",value:function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash}},{key:"equals",value:function(t){return this.foreground===t.foreground&&this.underline===t.underline&&this.italics===t.italics&&this.background===t.background&&this.flash===t.flash}},{key:"copy",value:function(t){this.foreground=t.foreground,this.underline=t.underline,this.italics=t.italics,this.background=t.background,this.flash=t.flash}},{key:"toString",value:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}]),t}(),g=function(){function t(e,n,r,a,o,s){i(this,t),this.uchar=e||" ",this.penState=new m(n,r,a,o,s)}return r(t,[{key:"reset",value:function(){this.uchar=" ",this.penState.reset()}},{key:"setChar",value:function(t,e){this.uchar=t,this.penState.copy(e)}},{key:"setPenState",value:function(t){this.penState.copy(t)}},{key:"equals",value:function(t){return this.uchar===t.uchar&&this.penState.equals(t.penState)}},{key:"copy",value:function(t){this.uchar=t.uchar,this.penState.copy(t.penState)}},{key:"isEmpty",value:function(){return" "===this.uchar&&this.penState.isDefault()}}]),t}(),y=function(){function t(){i(this,t),this.chars=[];for(var e=0;e<u;e++)this.chars.push(new g);this.pos=0,this.currPenState=new m}return r(t,[{key:"equals",value:function(t){for(var e=!0,n=0;n<u;n++)if(!this.chars[n].equals(t.chars[n])){e=!1;break}return e}},{key:"copy",value:function(t){for(var e=0;e<u;e++)this.chars[e].copy(t.chars[e])}},{key:"isEmpty",value:function(){for(var t=!0,e=0;e<u;e++)if(!this.chars[e].isEmpty()){t=!1;break}return t}},{key:"setCursor",value:function(t){this.pos!==t&&(this.pos=t),this.pos<0?(p.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>u&&(p.log("ERROR","Too large cursor position "+this.pos),this.pos=u)}},{key:"moveCursor",value:function(t){var e=this.pos+t;if(t>1)for(var n=this.pos+1;n<e+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(e)}},{key:"backSpace",value:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}},{key:"insertChar",value:function(t){t>=144&&this.backSpace();var e=o(t);return this.pos>=u?void p.log("ERROR","Cannot insert "+t.toString(16)+" ("+e+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(e,this.currPenState),void this.moveCursor(1))}},{key:"clearFromPos",value:function(t){var e;for(e=t;e<u;e++)this.chars[e].reset()}},{key:"clear",value:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}},{key:"clearToEndOfRow",value:function(){this.clearFromPos(this.pos)}},{key:"getTextString",value:function(){for(var t=[],e=!0,n=0;n<u;n++){var i=this.chars[n].uchar;" "!==i&&(e=!1),t.push(i)}return e?"":t.join("")}},{key:"setPenStyles",value:function(t){this.currPenState.setStyles(t);var e=this.chars[this.pos];e.setPenState(this.currPenState)}}]),t}(),_=function(){function t(){i(this,t),this.rows=[];for(var e=0;e<s;e++)this.rows.push(new y);this.currRow=s-1,this.nrRollUpRows=null,this.reset()}return r(t,[{key:"reset",value:function(){for(var t=0;t<s;t++)this.rows[t].clear();this.currRow=s-1}},{key:"equals",value:function(t){for(var e=!0,n=0;n<s;n++)if(!this.rows[n].equals(t.rows[n])){e=!1;break}return e}},{key:"copy",value:function(t){for(var e=0;e<s;e++)this.rows[e].copy(t.rows[e])}},{key:"isEmpty",value:function(){for(var t=!0,e=0;e<s;e++)if(!this.rows[e].isEmpty()){t=!1;break}return t}},{key:"backSpace",value:function(){var t=this.rows[this.currRow];t.backSpace()}},{key:"clearToEndOfRow",value:function(){var t=this.rows[this.currRow];t.clearToEndOfRow()}},{key:"insertChar",value:function(t){var e=this.rows[this.currRow];e.insertChar(t)}},{key:"setPen",value:function(t){var e=this.rows[this.currRow];e.setPenStyles(t)}},{key:"moveCursor",value:function(t){var e=this.rows[this.currRow];e.moveCursor(t)}},{key:"setCursor",value:function(t){p.log("INFO","setCursor: "+t);var e=this.rows[this.currRow];e.setCursor(t)}},{key:"setPAC",value:function(t,e){p.log("INFO","pacData = "+JSON.stringify(t));var n=t.row-1;if(this.nrRollUpRows&&n<this.nrRollUpRows-1&&(n=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==n){for(var i=0;i<s;i++)this.rows[i].clear();var r=this.currRow+1-this.nrRollUpRows,a=e.rows[r].cueStartTime;if(a&&a<p.time)for(i=0;i<this.nrRollUpRows;i++)this.rows[n-this.nrRollUpRows+i+1].copy(e.rows[r+i])}this.currRow=n;var o=this.rows[this.currRow];if(null!==t.indent){var u=t.indent,l=Math.max(u-1,0);o.setCursor(t.indent),t.color=o.chars[l].penState.foreground}var c={foreground:t.color,underline:t.underline,italics:t.italics,background:"black",
flash:!1};this.setPen(c)}},{key:"setBkgData",value:function(t){p.log("INFO","bkgData = "+JSON.stringify(t)),this.backSpace(),this.setPen(t),this.insertChar(32)}},{key:"setRollUpRows",value:function(t){this.nrRollUpRows=t}},{key:"rollUp",value:function(){if(null===this.nrRollUpRows)return void p.log("DEBUG","roll_up but nrRollUpRows not set yet");p.log("TEXT",this.getDisplayText());var t=this.currRow+1-this.nrRollUpRows,e=this.rows.splice(t,1)[0];e.clear(),this.rows.splice(this.currRow,0,e),p.log("INFO","Rolling up")}},{key:"getDisplayText",value:function(t){t=t||!1;for(var e=[],n="",i=-1,r=0;r<s;r++){var a=this.rows[r].getTextString();a&&(i=r+1,t?e.push("Row "+i+": '"+a+"'"):e.push(a.trim()))}return e.length>0&&(n=t?"["+e.join(" | ")+"]":e.join("\n")),n}},{key:"getTextAndFormat",value:function(){return this.rows}}]),t}(),E=function(){function t(e,n){i(this,t),this.chNr=e,this.outputFilter=n,this.mode=null,this.verbose=0,this.displayedMemory=new _,this.nonDisplayedMemory=new _,this.lastOutputScreen=new _,this.currRollUpRow=this.displayedMemory.rows[s-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}return r(t,[{key:"reset",value:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[s-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null}},{key:"getHandler",value:function(){return this.outputFilter}},{key:"setHandler",value:function(t){this.outputFilter=t}},{key:"setPAC",value:function(t){this.writeScreen.setPAC(t,this.lastOutputScreen)}},{key:"setBkgData",value:function(t){this.writeScreen.setBkgData(t)}},{key:"setMode",value:function(t){t!==this.mode&&(this.mode=t,p.log("INFO","MODE="+t),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset(),this.lastOutputScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=t)}},{key:"insertChars",value:function(t){for(var e=0;e<t.length;e++)this.writeScreen.insertChar(t[e]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";p.log("INFO",n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(p.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}},{key:"ccRCL",value:function(){p.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}},{key:"ccBS",value:function(){p.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}},{key:"ccAOF",value:function(){}},{key:"ccAON",value:function(){}},{key:"ccDER",value:function(){p.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}},{key:"ccRU",value:function(t){p.log("INFO","RU("+t+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(t)}},{key:"ccFON",value:function(){p.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})}},{key:"ccRDC",value:function(){p.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}},{key:"ccTR",value:function(){p.log("INFO","TR"),this.setMode("MODE_TEXT")}},{key:"ccRTD",value:function(){p.log("INFO","RTD"),this.setMode("MODE_TEXT")}},{key:"ccEDM",value:function(){p.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()}},{key:"ccCR",value:function(){p.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()}},{key:"ccENM",value:function(){p.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}},{key:"ccEOC",value:function(){if(p.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var t=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=t,this.writeScreen=this.nonDisplayedMemory,p.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()}},{key:"ccTO",value:function(t){p.log("INFO","TO("+t+") - Tab Offset"),this.writeScreen.moveCursor(t)}},{key:"ccMIDROW",value:function(t){var e={flash:!1};if(e.underline=t%2===1,e.italics=t>=46,e.italics)e.foreground="white";else{var n=Math.floor(t/2)-16,i=["white","green","blue","cyan","red","yellow","magenta"];e.foreground=i[n]}p.log("INFO","MIDROW: "+JSON.stringify(e)),this.writeScreen.setPen(e)}},{key:"outputDataUpdate",value:function(){var t=p.time;null!==t&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(t,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))}},{key:"cueSplitAtTime",value:function(t){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.displayedMemory),this.cueStartTime=t))}}]),t}(),A=function(){function t(e,n,r){i(this,t),this.field=e||1,this.outputs=[n,r],this.channels=[new E(1,n),new E(2,r)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}return r(t,[{key:"getHandler",value:function(t){return this.channels[t].getHandler()}},{key:"setHandler",value:function(t,e){this.channels[t].setHandler(e)}},{key:"addData",value:function(t,e){var n,i,r,a=!1;this.lastTime=t,p.setTime(t);for(var o=0;o<e.length;o+=2)if(i=127&e[o],r=127&e[o+1],0!==i||0!==r){if(p.log("DATA","["+v([e[o],e[o+1]])+"] -> ("+v([i,r])+")"),n=this.parseCmd(i,r),n||(n=this.parseMidrow(i,r)),n||(n=this.parsePAC(i,r)),n||(n=this.parseBackgroundAttributes(i,r)),!n&&(a=this.parseChars(i,r)))if(this.currChNr&&this.currChNr>=0){var s=this.channels[this.currChNr-1];s.insertChars(a)}else p.log("WARNING","No channel found yet. TEXT-MODE?");n?this.dataCounters.cmd+=2:a?this.dataCounters.char+=2:(this.dataCounters.other+=2,p.log("WARNING","Couldn't parse cleaned data "+v([i,r])+" orig: "+v([e[o],e[o+1]])))}else this.dataCounters.padding+=2}},{key:"parseCmd",value:function(t,e){var n=null,i=(20===t||28===t)&&32<=e&&e<=47,r=(23===t||31===t)&&33<=e&&e<=35;if(!i&&!r)return!1;if(t===this.lastCmdA&&e===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,p.log("DEBUG","Repeated command ("+v([t,e])+") is dropped"),!0;n=20===t||23===t?1:2;var a=this.channels[n-1];return 20===t||28===t?32===e?a.ccRCL():33===e?a.ccBS():34===e?a.ccAOF():35===e?a.ccAON():36===e?a.ccDER():37===e?a.ccRU(2):38===e?a.ccRU(3):39===e?a.ccRU(4):40===e?a.ccFON():41===e?a.ccRDC():42===e?a.ccTR():43===e?a.ccRTD():44===e?a.ccEDM():45===e?a.ccCR():46===e?a.ccENM():47===e&&a.ccEOC():a.ccTO(e-32),this.lastCmdA=t,this.lastCmdB=e,this.currChNr=n,!0}},{key:"parseMidrow",value:function(t,e){var n=null;if((17===t||25===t)&&32<=e&&e<=47){if(n=17===t?1:2,n!==this.currChNr)return p.log("ERROR","Mismatch channel in midrow parsing"),!1;var i=this.channels[n-1];return i.ccMIDROW(e),p.log("DEBUG","MIDROW ("+v([t,e])+")"),!0}return!1}},{key:"parsePAC",value:function(t,e){var n=null,i=null,r=(17<=t&&t<=23||25<=t&&t<=31)&&64<=e&&e<=127,a=(16===t||24===t)&&64<=e&&e<=95;if(!r&&!a)return!1;if(t===this.lastCmdA&&e===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;n=t<=23?1:2,i=64<=e&&e<=95?1===n?l[t]:d[t]:1===n?c[t]:h[t];var o=this.interpretPAC(i,e),s=this.channels[n-1];return s.setPAC(o),this.lastCmdA=t,this.lastCmdB=e,this.currChNr=n,!0}},{key:"interpretPAC",value:function(t,e){var n=e,i={color:null,italics:!1,indent:null,underline:!1,row:t};return n=e>95?e-96:e-64,i.underline=1===(1&n),n<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(i.italics=!0,i.color="white"):i.indent=4*Math.floor((n-16)/2),i}},{key:"parseChars",value:function(t,e){var n=null,i=null,r=null;if(t>=25?(n=2,r=t-8):(n=1,r=t),17<=r&&r<=19){var a=e;a=17===r?e+80:18===r?e+112:e+144,p.log("INFO","Special char '"+o(a)+"' in channel "+n),i=[a]}else 32<=t&&t<=127&&(i=0===e?[t]:[t,e]);if(i){var s=v(i);p.log("DEBUG","Char codes =  "+s.join(",")),this.lastCmdA=null,this.lastCmdB=null}return i}},{key:"parseBackgroundAttributes",value:function(t,e){var n,i,r,a,o=(16===t||24===t)&&32<=e&&e<=47,s=(23===t||31===t)&&45<=e&&e<=47;return!(!o&&!s)&&(n={},16===t||24===t?(i=Math.floor((e-32)/2),n.background=f[i],e%2===1&&(n.background=n.background+"_semi")):45===e?n.background="transparent":(n.foreground="black",47===e&&(n.underline=!0)),r=t<24?1:2,a=this.channels[r-1],a.setBkgData(n),this.lastCmdA=null,this.lastCmdB=null,!0)}},{key:"reset",value:function(){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].reset();this.lastCmdA=null,this.lastCmdB=null}},{key:"cueSplitAtTime",value:function(t){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].cueSplitAtTime(t)}}]),t}();n.default=A},{}],43:[function(t,e,n){"use strict";var i={newCue:function(t,e,n,i){for(var r,a,o,s,u,l=window.VTTCue||window.TextTrackCue,c=0;c<i.rows.length;c++)if(r=i.rows[c],o=!0,s=0,u="",!r.isEmpty()){for(var d=0;d<r.chars.length;d++)r.chars[d].uchar.match(/\s/)&&o?s++:(u+=r.chars[d].uchar,o=!1);r.cueStartTime=e,a=new l(e,n,u.trim()),s>=16?s--:s++,navigator.userAgent.match(/Firefox\//)?a.line=c+1:a.line=c>7?c-2:c+1,a.align="left",a.position=Math.max(0,Math.min(100,100*(s/32)+(navigator.userAgent.match(/Firefox\//)?50:0))),t.addCue(a)}}};e.exports=i},{}],44:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(){function t(e){i(this,t),this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=0,this.totalWeight_=0}return r(t,[{key:"sample",value:function(t,e){var n=Math.pow(this.alpha_,t);this.estimate_=e*(1-n)+n*this.estimate_,this.totalWeight_+=t}},{key:"getTotalWeight",value:function(){return this.totalWeight_}},{key:"getEstimate",value:function(){if(this.alpha_){var t=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/t}return this.estimate_}}]),t}();n.default=a},{}],45:[function(t,e,n){"use strict";function i(){}function r(t,e){return e="["+t+"] > "+e}function a(t){var e=self.console[t];return e?function(){for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];i[0]&&(i[0]=r(t,i[0])),e.apply(self.console,i)}:i}function o(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];n.forEach(function(e){l[e]=t[e]?t[e].bind(t):a(e)})}Object.defineProperty(n,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u={trace:i,debug:i,log:i,warn:i,info:i,error:i},l=u;n.enableLogs=function(t){if(t===!0||"object"===("undefined"==typeof t?"undefined":s(t))){o(t,"debug","log","info","warn","error");try{l.log()}catch(t){l=u}}else l=u},n.logger=l},{}],46:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(){function t(){i(this,t)}return r(t,null,[{key:"toString",value:function(t){for(var e="",n=t.length,i=0;i<n;i++)e+="["+t.start(i).toFixed(3)+","+t.end(i).toFixed(3)+"]";return e}}]),t}();n.default=a},{}],47:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=t(45),o=function(){function t(e){i(this,t),e&&e.xhrSetup&&(this.xhrSetup=e.xhrSetup)}return r(t,[{key:"destroy",value:function(){this.abort(),this.loader=null}},{key:"abort",value:function(){var t=this.loader;t&&4!==t.readyState&&(this.stats.aborted=!0,t.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null}},{key:"load",value:function(t,e,n){this.context=t,this.config=e,this.callbacks=n,this.stats={trequest:performance.now(),retry:0},this.retryDelay=e.retryDelay,this.loadInternal()}},{key:"loadInternal",value:function(){var t,e=this.context;t="undefined"!=typeof XDomainRequest?this.loader=new XDomainRequest:this.loader=new XMLHttpRequest,t.onreadystatechange=this.readystatechange.bind(this),t.onprogress=this.loadprogress.bind(this),t.open("GET",e.url,!0),e.rangeEnd&&t.setRequestHeader("Range","bytes="+e.rangeStart+"-"+(e.rangeEnd-1)),t.responseType=e.responseType;var n=this.stats;n.tfirst=0,n.loaded=0,this.xhrSetup&&this.xhrSetup(t,e.url),this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),t.send()}},{key:"readystatechange",value:function(t){var e=t.currentTarget,n=e.readyState,i=this.stats,r=this.context,o=this.config;if(!i.aborted&&n>=2)if(window.clearTimeout(this.requestTimeout),0===i.tfirst&&(i.tfirst=Math.max(performance.now(),i.trequest)),4===n){var s=e.status;if(s>=200&&s<300){i.tload=Math.max(i.tfirst,performance.now());var u=void 0,l=void 0;"arraybuffer"===r.responseType?(u=e.response,l=u.byteLength):(u=e.responseText,l=u.length),i.loaded=i.total=l;var c={url:e.responseURL,data:u};this.callbacks.onSuccess(c,i,r)}else i.retry>=o.maxRetry||s>=400&&s<499?(a.logger.error(s+" while loading "+r.url),this.callbacks.onError({code:s,text:e.statusText},r)):(a.logger.warn(s+" while loading "+r.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,o.maxRetryDelay),i.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),o.timeout)}},{key:"loadtimeout",value:function(){a.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context)}},{key:"loadprogress",value:function(t){var e=this.stats;e.loaded=t.loaded,t.lengthComputable&&(e.total=t.total);var n=this.callbacks.onProgress;n&&n(e,this.context,null)}}]),t}();n.default=o},{45:45}]},{},[33])(33)})},function(t,e){var n=function(){function t(){if(!W){try{var t=F.getElementsByTagName("body")[0].appendChild(g("span"));t.parentNode.removeChild(t)}catch(t){return}W=!0;for(var e=G.length,n=0;n<e;n++)G[n]()}}function e(t){W?t():G[G.length]=t}function i(t){if(typeof x.addEventListener!=I)x.addEventListener("load",t,!1);else if(typeof F.addEventListener!=I)F.addEventListener("load",t,!1);else if(typeof x.attachEvent!=I)y(x,"onload",t);else if("function"==typeof x.onload){var e=x.onload;x.onload=function(){e(),t()}}else x.onload=t}function r(){B?a():o()}function a(){var t=F.getElementsByTagName("body")[0],e=g(L);e.setAttribute("type",O);var n=t.appendChild(e);if(n){var i=0;!function(){if(typeof n.GetVariable!=I){var r=n.GetVariable("$version");r&&(r=r.split(" ")[1].split(","),Y.pv=[parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10)])}else if(i<10)return i++,void setTimeout(arguments.callee,10);t.removeChild(e),n=null,o()}()}else o()}function o(){var t=j.length;if(t>0)for(var e=0;e<t;e++){var n=j[e].id,i=j[e].callbackFn,r={success:!1,id:n};if(Y.pv[0]>0){var a=m(n);if(a)if(!_(j[e].swfVersion)||Y.wk&&Y.wk<312)if(j[e].expressInstall&&u()){var o={};o.data=j[e].expressInstall,o.width=a.getAttribute("width")||"0",o.height=a.getAttribute("height")||"0",a.getAttribute("class")&&(o.styleclass=a.getAttribute("class")),a.getAttribute("align")&&(o.align=a.getAttribute("align"));for(var d={},h=a.getElementsByTagName("param"),f=h.length,p=0;p<f;p++)"movie"!=h[p].getAttribute("name").toLowerCase()&&(d[h[p].getAttribute("name")]=h[p].getAttribute("value"));l(o,d,n,i)}else c(a),i&&i(r);else A(n,!0),i&&(r.success=!0,r.ref=s(n),i(r))}else if(A(n,!0),i){var v=s(n);v&&typeof v.SetVariable!=I&&(r.success=!0,r.ref=v),i(r)}}}function s(t){var e=null,n=m(t);if(n&&"OBJECT"==n.nodeName)if(typeof n.SetVariable!=I)e=n;else{var i=n.getElementsByTagName(L)[0];i&&(e=i)}return e}function u(){return!K&&_("6.0.65")&&(Y.win||Y.mac)&&!(Y.wk&&Y.wk<312)}function l(t,e,n,i){K=!0,k=i||null,C={success:!1,id:n};var r=m(n);if(r){"OBJECT"==r.nodeName?(T=d(r),S=null):(T=r,S=n),t.id=M,(typeof t.width==I||!/%$/.test(t.width)&&parseInt(t.width,10)<310)&&(t.width="310"),(typeof t.height==I||!/%$/.test(t.height)&&parseInt(t.height,10)<137)&&(t.height="137"),F.title=F.title.slice(0,47)+" - Flash Player Installation";var a=Y.ie&&Y.win?["Active"].concat("").join("X"):"PlugIn",o="MMredirectURL="+x.location.toString().replace(/&/g,"%26")+"&MMplayerType="+a+"&MMdoctitle="+F.title;if(typeof e.flashvars!=I?e.flashvars+="&"+o:e.flashvars=o,Y.ie&&Y.win&&4!=r.readyState){var s=g("div");n+="SWFObjectNew",s.setAttribute("id",n),r.parentNode.insertBefore(s,r),r.style.display="none",function(){4==r.readyState?r.parentNode.removeChild(r):setTimeout(arguments.callee,10)}()}h(t,e,n)}}function c(t){if(Y.ie&&Y.win&&4!=t.readyState){var e=g("div");t.parentNode.insertBefore(e,t),e.parentNode.replaceChild(d(t),e),t.style.display="none",function(){4==t.readyState?t.parentNode.removeChild(t):setTimeout(arguments.callee,10)}()}else t.parentNode.replaceChild(d(t),t)}function d(t){var e=g("div");if(Y.win&&Y.ie)e.innerHTML=t.innerHTML;else{var n=t.getElementsByTagName(L)[0];if(n){var i=n.childNodes;if(i)for(var r=i.length,a=0;a<r;a++)1==i[a].nodeType&&"PARAM"==i[a].nodeName||8==i[a].nodeType||e.appendChild(i[a].cloneNode(!0))}}return e}function h(t,e,n){var i,r=m(n);if(Y.wk&&Y.wk<312)return i;if(r)if(typeof t.id==I&&(t.id=n),Y.ie&&Y.win){var a="";for(var o in t)t[o]!=Object.prototype[o]&&("data"==o.toLowerCase()?e.movie=t[o]:"styleclass"==o.toLowerCase()?a+=' class="'+t[o]+'"':"classid"!=o.toLowerCase()&&(a+=" "+o+'="'+t[o]+'"'));var s="";for(var u in e)e[u]!=Object.prototype[u]&&(s+='<param name="'+u+'" value="'+e[u]+'" />');r.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+a+">"+s+"</object>",H[H.length]=t.id,i=m(t.id)}else{var l=g(L);l.setAttribute("type",O);for(var c in t)t[c]!=Object.prototype[c]&&("styleclass"==c.toLowerCase()?l.setAttribute("class",t[c]):"classid"!=c.toLowerCase()&&l.setAttribute(c,t[c]));for(var d in e)e[d]!=Object.prototype[d]&&"movie"!=d.toLowerCase()&&f(l,d,e[d]);r.parentNode.replaceChild(l,r),i=l}return i}function f(t,e,n){var i=g("param");i.setAttribute("name",e),i.setAttribute("value",n),t.appendChild(i)}function p(t){var e=m(t);e&&"OBJECT"==e.nodeName&&(Y.ie&&Y.win?(e.style.display="none",function(){4==e.readyState?v(t):setTimeout(arguments.callee,10)}()):e.parentNode.removeChild(e))}function v(t){var e=m(t);if(e){for(var n in e)"function"==typeof e[n]&&(e[n]=null);e.parentNode.removeChild(e)}}function m(t){var e=null;try{e=F.getElementById(t)}catch(t){}return e}function g(t){return F.createElement(t)}function y(t,e,n){t.attachEvent(e,n),V[V.length]=[t,e,n]}function _(t){var e=Y.pv,n=t.split(".");return n[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10)||0,n[2]=parseInt(n[2],10)||0,e[0]>n[0]||e[0]==n[0]&&e[1]>n[1]||e[0]==n[0]&&e[1]==n[1]&&e[2]>=n[2]}function E(t,e,n,i){if(!Y.ie||!Y.mac){var r=F.getElementsByTagName("head")[0];if(r){var a=n&&"string"==typeof n?n:"screen";if(i&&(w=null,R=null),!w||R!=a){var o=g("style");o.setAttribute("type","text/css"),o.setAttribute("media",a),w=r.appendChild(o),Y.ie&&Y.win&&typeof F.styleSheets!=I&&F.styleSheets.length>0&&(w=F.styleSheets[F.styleSheets.length-1]),R=a}Y.ie&&Y.win?w&&typeof w.addRule==L&&w.addRule(t,e):w&&typeof F.createTextNode!=I&&w.appendChild(F.createTextNode(t+" {"+e+"}"))}}}function A(t,e){if(q){var n=e?"visible":"hidden";W&&m(t)?m(t).style.visibility=n:E("#"+t,"visibility:"+n)}}function b(t){var e=/[\\\"<>\.;]/,n=null!=e.exec(t);return n&&typeof encodeURIComponent!=I?encodeURIComponent(t):t}var T,S,k,C,w,R,I="undefined",L="object",D="Shockwave Flash",P="ShockwaveFlash.ShockwaveFlash",O="application/x-shockwave-flash",M="SWFObjectExprInst",N="onreadystatechange",x=window,F=document,U=navigator,B=!1,G=[r],j=[],H=[],V=[],W=!1,K=!1,q=!0,Y=function(){var t=typeof F.getElementById!=I&&typeof F.getElementsByTagName!=I&&typeof F.createElement!=I,e=U.userAgent.toLowerCase(),n=U.platform.toLowerCase(),i=n?/win/.test(n):/win/.test(e),r=n?/mac/.test(n):/mac/.test(e),a=!!/webkit/.test(e)&&parseFloat(e.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),o=!1,s=[0,0,0],u=null;if(typeof U.plugins!=I&&typeof U.plugins[D]==L)u=U.plugins[D].description,!u||typeof U.mimeTypes!=I&&U.mimeTypes[O]&&!U.mimeTypes[O].enabledPlugin||(B=!0,o=!1,u=u.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),s[0]=parseInt(u.replace(/^(.*)\..*$/,"$1"),10),s[1]=parseInt(u.replace(/^.*\.(.*)\s.*$/,"$1"),10),s[2]=/[a-zA-Z]/.test(u)?parseInt(u.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof x[["Active"].concat("Object").join("X")]!=I)try{var l=new(window[["Active"].concat("Object").join("X")])(P);l&&(u=l.GetVariable("$version"),u&&(o=!0,u=u.split(" ")[1].split(","),s=[parseInt(u[0],10),parseInt(u[1],10),parseInt(u[2],10)]))}catch(t){}return{w3:t,pv:s,wk:a,ie:o,win:i,mac:r}}();(function(){Y.w3&&((typeof F.readyState!=I&&"complete"==F.readyState||typeof F.readyState==I&&(F.getElementsByTagName("body")[0]||F.body))&&t(),W||(typeof F.addEventListener!=I&&F.addEventListener("DOMContentLoaded",t,!1),Y.ie&&Y.win&&(F.attachEvent(N,function(){"complete"==F.readyState&&(F.detachEvent(N,arguments.callee),t())}),x==top&&!function(){if(!W){try{F.documentElement.doScroll("left")}catch(t){return void setTimeout(arguments.callee,0)}t()}}()),Y.wk&&!function(){if(!W)return/loaded|complete/.test(F.readyState)?void t():void setTimeout(arguments.callee,0)}(),i(t)))})(),function(){Y.ie&&Y.win&&window.attachEvent("onunload",function(){for(var t=V.length,e=0;e<t;e++)V[e][0].detachEvent(V[e][1],V[e][2]);for(var i=H.length,r=0;r<i;r++)p(H[r]);for(var a in Y)Y[a]=null;Y=null;for(var o in n)n[o]=null;n=null})}();return{registerObject:function(t,e,n,i){if(Y.w3&&t&&e){var r={};r.id=t,r.swfVersion=e,r.expressInstall=n,r.callbackFn=i,j[j.length]=r,A(t,!1)}else i&&i({success:!1,id:t})},getObjectById:function(t){if(Y.w3)return s(t)},embedSWF:function(t,n,i,r,a,o,s,c,d,f){var p={success:!1,id:n};Y.w3&&!(Y.wk&&Y.wk<312)&&t&&n&&i&&r&&a?(A(n,!1),e(function(){i+="",r+="";var e={};if(d&&typeof d===L)for(var v in d)e[v]=d[v];e.data=t,e.width=i,e.height=r;var m={};if(c&&typeof c===L)for(var g in c)m[g]=c[g];if(s&&typeof s===L)for(var y in s)typeof m.flashvars!=I?m.flashvars+="&"+y+"="+s[y]:m.flashvars=y+"="+s[y];if(_(a)){var E=h(e,m,n);e.id==n&&A(n,!0),p.success=!0,p.ref=E}else{if(o&&u())return e.data=o,void l(e,m,n,f);A(n,!0)}f&&f(p)})):f&&f(p)},switchOffAutoHideShow:function(){q=!1},ua:Y,getFlashPlayerVersion:function(){return{major:Y.pv[0],minor:Y.pv[1],release:Y.pv[2]}},hasFlashPlayerVersion:_,createSWF:function(t,e,n){return Y.w3?h(t,e,n):void 0},showExpressInstall:function(t,e,n,i){Y.w3&&u()&&l(t,e,n,i)},removeSWF:function(t){Y.w3&&p(t)},createCSS:function(t,e,n,i){Y.w3&&E(t,e,n,i)},addDomLoadEvent:e,addLoadEvent:i,getQueryParamValue:function(t){var e=F.location.search||F.location.hash;if(e){if(/\?/.test(e)&&(e=e.split("?")[1]),null==t)return b(e);for(var n=e.split("&"),i=0;i<n.length;i++)if(n[i].substring(0,n[i].indexOf("="))==t)return b(n[i].substring(n[i].indexOf("=")+1))}return""},expressInstallCallback:function(){if(K){var t=m(M);t&&T&&(t.parentNode.replaceChild(T,t),S&&(A(S,!0),Y.ie&&Y.win&&(T.style.display="block")),k&&k(C)),K=!1}}}}();t.exports=n},function(t,e,n){var i,r;i=[],r=function(){var t={AD_ID:"adId",AD_TYPE:"adType",CUE_TITLE:"cueTitle",CUE_TIME_DURATION:"cueTimeDuration",AD_URL:"adUrl",AD_VAST_URL:"adVastURL",AD_VAST:"adVast"};return t}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e){t.exports={ABORT:"abort",CAN_PLAY:"canPlay",CAN_PLAY_THROUGH:"canPlayThrough",DATA_LOADING:"dataLoading",EMPTIED:"emptied",ENDED:"ended",ERROR:"error",LOAD_START:"loadStart",PAUSE:"pause",PLAY:"play",PROGRESS:"progress",STALLED:"stalled",STOP:"stop",SUSPEND:"suspend",TIME_UPDATE:"timeupdate",WAITING:"waiting"}},function(t,e){t.exports={AUDIO:"Audio",VIDEO:"Video"}},function(t,e,n){var i,r;i=[n(1),n(3),n(2),n(106),n(105)],r=function(t,e,n,i,r){var a=t([r],{constructor:function(t,e){this.target=t,this.config=e,this.adQuartile=new i,this._defaultSequence=-1,this._adsTrackingProgress=[],this._destroyAdToggle=!1},init:function(){this._destroyAdlisteners(),this.onAdPlaybackStatusListener=this.target.on("ad-playback-status",n.hitch(this,this._onAdPlaybackStatus)),this.inherited(arguments)},destroyAd:function(){this.html5OnDemand&&("function"==typeof this.html5OnDemand.skip&&(this._destroyAdToggle=!0,this.html5OnDemand.skip()),this.html5OnDemand=null)},skipAd:function(){this.html5OnDemand&&("function"==typeof this.html5OnDemand.skip&&this.html5OnDemand.skip(),this.html5OnDemand=null)},initAdListeners:function(t){this.html5OnDemand=t,this.html5OnDemand.initHTMLElementsStyle(this.html5OnDemand.videoNode),this.playbackOnDemandStatushandler=this.html5OnDemand.setPlaybackStatusHandler(n.hitch(this,this._onAdPlaybackStatus)),this.clickTrackingElementClickedHandler=this.html5OnDemand.setClickTrackingElementClickedHandler(n.hitch(this,this._onClickTrackingElementClicked)),this.adPlaybackCompleteHandler=this.target.on("ad-playback-complete",n.hitch(this,this._destroyAdlisteners)),this.adPlaybackDestroyHandler=this.target.on("ad-playback-destroy",n.hitch(this,this._destroyAdlisteners)),this.adPlaybackErrorHandler=this.target.on("ad-playback-error",n.hitch(this,this._destroyAdlisteners))},getVastInlineAd:function(){return null},_onAdPlaybackStatus:function(t){if(this.html5Node=t.html5Node,"MEDIA_STARTED"==t.code)0==this.html5Node.currentTime&&this.emit(this.AD_MODULE_PLAYBACK_START,{id:this.playerNode,type:t.adServerType,error:!1});else if("MEDIA_TIME_UPDATE"==t.code){var e=Math.round(this.html5Node.currentTime),n=Math.round(this.html5Node.duration);this._checkVideoPlaybackQuartile(this._getTimePercent(e,n)),this.emit(this.AD_MODULE_COUNTDOWN,{countDown:n-e})}else"MEDIA_ENDED"!=t.code&&"MEDIA_ERROR"!=t.code||(this.html5OnDemand.stop(),this._destroyAdToggle?this.emit(this.AD_MODULE_PLAYBACK_DESTROY):this.emit(this.AD_MODULE_PLAYBACK_COMPLETE,{id:this.playerNode,type:t.adServerType,error:!1}),this._destroyAdToggle=!1,this._adsTrackingProgress=[],this.onAdPlaybackStatusListener.remove())},_onClickTrackingElementClicked:function(t){this.emit(this.AD_MODULE_CLICK_TRACKING,t)},_getTimePercent:function(t,e){return 0==e?0:(t/e).toFixed(2)},_checkVideoPlaybackQuartile:function(t){var e=Math.floor(4*t);void 0==this._adsTrackingProgress[e]&&(this._adsTrackingProgress[e]=!0,this.emit(this.AD_MODULE_QUARTILE,{id:this.playerNode,adQuartile:this.adQuartile.getQuartileByIndex(e),error:!1}))},_destroyAdlisteners:function(){this.playbackOnDemandStatushandler&&this.playbackOnDemandStatushandler.remove(),this.clickTrackingElementClickedHandler&&this.clickTrackingElementClickedHandler.remove(),this.adPlaybackCompleteHandler&&this.adPlaybackCompleteHandler.remove(),this.adPlaybackErrorHandler&&this.adPlaybackErrorHandler.remove(),this.onAdPlaybackStatusListener&&this.onAdPlaybackStatusListener.remove(),this.adPlaybackDestroyHandler&&this.adPlaybackDestroyHandler.remove()}});return a}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1)],r=function(t){var e=t([],{constructor:function(t){this.id=t,this.inlineAd=null,this.wrapperAd=null}});return e}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1)],r=function(t){var e=t([],{constructor:function(){this.id=null,this.width=null,this.height=null,this.expandedWidth=null,this.expandedHeight=null,this.resourceType=null,this.creativeType=null,this.url=null,this.code=null,this.clickThroughURL=null,this.altText=null,this.adParameters=null,this.creativeView=null}});return e}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1)],r=function(t){var e=t([],{constructor:function(){this.vastAd=null}});return e}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1)],r=function(t){var e=t([],{DELIVERY_STREAMING:"streaming",DELIVERY_PROGRESSIVE:"progressive",constructor:function(){this.url=null,this.id=null,this.delivery=null,this.bitrate=null,this.width=null,this.height=null,this.type=null,this.scalable=!1,this.maintainAspectRatio=!1,this.apiFramework=null,this.minBitrate=null,this.maxBitrate=null,this.codec=null}});return e}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1)],r=function(t){var e=t([],{IFRAME:"iframe",HTML:"html",STATIC:"static",SCRIPT:"script",OTHER:"other",constructor:function(t){this.name=t}});return e}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1)],r=function(t){var e=t([],{constructor:function(){this.urls=[],this.type=null},addUrls:function(t){for(var e=t.length,n=0;n<e;n++)this.urls.push(t[n])}});return e}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1)],r=function(t){var e=t([],{constructor:function(){this.clickThrough=null,this.clickTrackings=[],this.customClicks=[]}});return e}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1)],r=function(t){var e=t([],{constructor:function(){this.vastAdTagURL=null,this.impression=null,this.impressions=[],this.error=null,this.trackingEvents=null,this.creatives=[],this.videoClicks=null},getLinearTrackingEvents:function(t){var t=t;return void 0==t&&(t=-1),null!=this._getLinearElement(t)?this._getLinearElement(t).trackingEvents:this.trackingEvents},_getLinearElement:function(t){var t=t;void 0==t&&(t=-1);for(var e=this.creatives.length,n=0;n<e;n++)if(null!=this.creatives[n].linearElement){if(t==-1)return this.creatives[n].linearElement;if(this.creatives[n].sequence==t)return this.creatives[n].linearElement}},getLinearVideoClick:function(t){var t=t;return void 0==t&&(t=-1),null!=this._getLinearElement(t)?this._getLinearElement(t).videoClick:this.videoClicks}});return e}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[],r=function(){var t={ID:"id",NODEKIND_ELEMENT:"element",INLINE:"InLine",WRAPPER:"Wrapper",AD_SYSTEM:"AdSystem",AD_TITLE:"AdTitle",DESCRIPTION:"Description",ERROR:"Error",IMPRESSION:"Impression",TRACKING_EVENTS:"TrackingEvents",COMPANION_ADS:"CompanionAds",COMPANION_CLICK_THROUGH:"CompanionClickThrough",LINEAR:"Linear",NON_LINEAR_ADS:"NonLinearAds",NON_LINEAR:"NonLinear",NON_LINEAR_CLICK_THROUGH:"NonLinearClickThrough",TRACKING:"Tracking",EVENT:"event",DURATION:"Duration",AD_ID:"AdID",MEDIA_FILES:"MediaFiles",MEDIA_FILE:"MediaFile",VIDEO_CLICKS:"VideoClicks",CLICK_THROUGH:"ClickThrough",CLICK_TRACKING:"ClickTracking",CUSTOM_CLICK:"CustomClick",COMPANION:"Companion",ALT_TEXT:"AltText",AD_PARAMETERS:"AdParameters",BITRATE:"bitrate",MIN_BITRATE:"minBitrate",MAX_BITRATE:"maxBitrate",CODEC:"codec",DELIVERY:"delivery",TYPE:"type",WIDTH:"width",HEIGHT:"height",EXPANDED_WIDTH:"expandedWidth",EXPANDED_HEIGHT:"expandedHeight",CREATIVE_TYPE:"creativeType",SEQUENCE:"sequence",SCALABLE:"scalable",MAINTAIN_ASPECT_RATIO:"maintainAspectRatio",API_FRAMEWORK:"apiFramework",
IFRAME_RESOURCE:"IFrameResource",HTML_RESOURCE:"HTMLResource",STATIC_RESOURCE:"StaticResource",CREATIVE_VIEW:"creativeView",MIN_SUGGESTED_DURATION:"minSuggestedDuration",EXPIRES:"Expires",CATEGORY:"Category",SURVEY:"Survey",ADVERTISER:"Advertiser",AUDIO_INTERACTIONS:"AudioInteractions",LOGO_TILE:"logoTile",LOGO_TITLE:"logoTitle",LOGO_ARTIST:"logoArtist",LOGO_URL:"logoURL"};return t}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r,a=n(16);i=[n(1)],r=function(t){var e=t([],{constructor:function(t){this.target=t},getTagValue:function(t,e){return 0==t.getElementsByTagName(e).length?null:a.textContent(t.getElementsByTagName(e)[0])},getDataAsArray:function(t,e,n){if(0==t.getElementsByTagName(e).length)return null;for(var i=t.getElementsByTagName(e)[0].childNodes,r=[],o=0;o<i.length;o++)i[o].nodeName==n&&r.push(a.textContent(i[o]));return r},trim:function(t){return void 0==t?null:t.replace(/^\s+|\s+$/g,"")}});return e}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(2)],r=function(t){var e={};return{objectToQuery:function(n){var i=encodeURIComponent,r=[];for(var a in n){var o=n[a];if(o!=e[a]){var s=i(a)+"=";if(t.isArray(o))for(var u=0,l=o.length;u<l;++u)r.push(s+i(o[u]));else r.push(s+i(o))}}return r.join("&")},queryToObject:function(e){for(var n,i,r,a=decodeURIComponent,o=e.split("&"),s={},u=0,l=o.length;u<l;++u)if(r=o[u],r.length){var c=r.indexOf("=");c<0?(n=a(r),i=""):(n=a(r.slice(0,c)),i=a(r.slice(c+1))),"string"==typeof s[n]&&(s[n]=[s[n]]),t.isArray(s[n])?s[n].push(i):s[n]=i}return s}}}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(56)],r=function(t){return t}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[e,n(35),n(24),n(22),n(53),n(6),n(2),n(25)],r=function(t,e,n,i,r,a,o,s){function u(t){return c(t)}function l(t){return t.data||t.text}t.deepCopy=function(e,n){for(var i in n){var r=e[i],a=n[i];r!==a&&(r&&"object"==typeof r&&a&&"object"==typeof a?t.deepCopy(r,a):e[i]=a)}return e},t.deepCreate=function(e,n){n=n||{};var i,r,a=o.delegate(e);for(i in e)r=e[i],r&&"object"==typeof r&&(a[i]=t.deepCreate(r,n[i]));return t.deepCopy(a,n)};var c=Object.freeze||function(t){return t};t.deferred=function(r,a,d,h,f,p){function v(t){throw t.response=r,t}var m=new i(function(t){return a&&a(m,r),t&&(t instanceof e||t instanceof n)?t:new n("Request canceled",r)});m.response=r,m.isValid=d,m.isReady=h,m.handleResponse=f;var g=m.then(u).otherwise(v);t.notify&&g.then(o.hitch(t.notify,"emit","load"),o.hitch(t.notify,"emit","error"));var y=g.then(l),_=new s;for(var E in y)y.hasOwnProperty(E)&&(_[E]=y[E]);return _.response=g,c(_),p&&m.then(function(t){p.call(m,t)},function(t){p.call(m,r,t)}),m.promise=_,m.then=_.then,m},t.addCommonMethods=function(t,e){a.forEach(e||["GET","POST","PUT","DELETE"],function(e){t[("DELETE"===e?"DEL":e).toLowerCase()]=function(n,i){return i=o.delegate(i||{}),i.method=e,t(n,i)}})},t.parseArgs=function(t,e,n){var i=e.data,a=e.query;return i&&!n&&"object"==typeof i&&(e.data=r.objectToQuery(i)),a?("object"==typeof a&&(a=r.objectToQuery(a)),e.preventCache&&(a+=(a?"&":"")+"request.preventCache="+ +new Date)):e.preventCache&&(a="request.preventCache="+ +new Date),t&&a&&(t+=(~t.indexOf("?")?"&":"?")+a),{url:t,options:e,getHeader:function(t){return null}}},t.checkStatus=function(t){return t=t||0,t>=200&&t<300||304===t||1223===t||!t}}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(35),n(91),n(90),n(55),n(4)],r=function(t,e,n,i,r){function a(e,r){var a=e.xhr;if(e.status=e.xhr.status,e.text=a.responseText,"xml"===e.options.handleAs&&(e.data=a.responseXML),!r)try{n(e)}catch(t){r=t}r?this.reject(r):i.checkStatus(a.status)?this.resolve(e):(r=new t("Unable to load "+e.url+" status: "+a.status,e),this.reject(r))}function o(t){return this.xhr.getResponseHeader(t)}function s(n,p,v){var m=i.parseArgs(n,i.deepCreate(f,p),r("native-formdata")&&p&&p.data&&p.data instanceof FormData);n=m.url,p=m.options;var g,y=function(){g&&g()},_=i.deferred(m,d,u,l,a,y),E=m.xhr=s._create();if(!E)return _.cancel(new t("XHR was not created")),v?_:_.promise;m.getHeader=o,c&&(g=c(E,_,m));var A=p.data,b=!p.sync,T=p.method;try{E.open(T,n,b,p.user||h,p.password||h),p.withCredentials&&(E.withCredentials=p.withCredentials);var S=p.headers,k="application/x-www-form-urlencoded";if(S)for(var C in S)"content-type"===C.toLowerCase()?k=S[C]:S[C]&&E.setRequestHeader(C,S[C]);k&&k!==!1&&E.setRequestHeader("Content-Type",k),S&&"X-Requested-With"in S||E.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.notify&&i.notify.emit("send",m,_.promise.cancel),E.send(A)}catch(t){_.reject(t)}return e(_),E=null,v?_:_.promise}r.add("native-xhr",function(){return"undefined"!=typeof XMLHttpRequest}),r.add("dojo-force-activex-xhr",function(){return r("activex")&&!document.addEventListener&&"file:"===window.location.protocol}),r.add("native-xhr2",function(){if(r("native-xhr")){var t=new XMLHttpRequest;return"undefined"!=typeof t.addEventListener&&("undefined"==typeof opera||"undefined"!=typeof t.upload)}}),r.add("native-formdata",function(){return"function"==typeof FormData});var u,l,c,d;r("native-xhr2")?(u=function(t){return!this.isFulfilled()},d=function(t,e){e.xhr.abort()},c=function(e,n,i){function r(t){n.handleResponse(i)}function a(e){var r=e.target,a=new t("Unable to load "+i.url+" status: "+r.status,i);n.handleResponse(i,a)}function o(t){t.lengthComputable&&(i.loaded=t.loaded,i.total=t.total,n.progress(i))}return e.addEventListener("load",r,!1),e.addEventListener("error",a,!1),e.addEventListener("progress",o,!1),function(){e.removeEventListener("load",r,!1),e.removeEventListener("error",a,!1),e.removeEventListener("progress",o,!1),e=null}}):(u=function(t){return t.xhr.readyState},l=function(t){return 4===t.xhr.readyState},d=function(t,e){var n=e.xhr,i=typeof n.abort;"function"!==i&&"object"!==i&&"unknown"!==i||n.abort()});var h,f={data:null,query:null,sync:!1,method:"GET"};if(s._create=function(){throw new Error("XMLHTTP not available")},r("native-xhr")&&!r("dojo-force-activex-xhr"))s._create=function(){return new XMLHttpRequest};else if(r("activex"))try{new ActiveXObject("Msxml2.XMLHTTP"),s._create=function(){return new ActiveXObject("Msxml2.XMLHTTP")}}catch(t){try{new ActiveXObject("Microsoft.XMLHTTP"),s._create=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}catch(t){}}return i.addCommonMethods(s),s}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(4),n(27)],r=function(t,e){"use strict";var n=document.createElement("div");t.add("dom-qsa2.1",!!n.querySelectorAll),t.add("dom-qsa3",function(){try{return n.innerHTML="<p class='TEST'></p>",1==n.querySelectorAll(".TEST:empty").length}catch(t){}});var i,r="./acme",a="./lite";return{load:function(n,o,s,u){var l=e;if(n="default"==n?t("config-selectorEngine")||"css3":n,n="css2"==n||"lite"==n?a:"css2.1"==n?t("dom-qsa2.1")?a:r:"css3"==n?t("dom-qsa3")?a:r:"acme"==n?r:(l=o)&&n,"?"==n.charAt(n.length-1)){n=n.substring(0,n.length-1);var c=!0}return c&&(t("dom-compliant-qsa")||i)?s(i):void l([n],function(t){"./lite"!=n&&(i=t),s(t)})}}}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e){t.exports={gettingStationInformation:"Getting station information...",paused:"Paused",onAir:"On Air",disconnected:"Disconnected",streamUnavailable:"Stream unavailable",buffering:"Buffering",connecting:"Live stream connection in progress...",reconnecting:"Live stream connection in progress...",seekfailed:"Seek failed",seekinvalidtime:"Impossible to seek due to invalid time",ended:"Ended",pause:"Paused",play:"Playing",stop:"Stopped",error:"Error",streamGeoBlocked:"Sorry, this content is not available in your area",stationNotFound:"Station not found",flashPluginOutOfDate:"Your Flash plugin version detected is out of date. Minimum version required is: 10.2.0",browserNotSupported:"Your browser does not support HTML5 feature",embedFailed:"The embed failed!"}},function(t,e){t.exports=void 0},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function r(t){if(c===setTimeout)return setTimeout(t,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function a(t){if(d===clearTimeout)return clearTimeout(t);if((d===i||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(t);try{return d(t)}catch(e){try{return d.call(null,t)}catch(e){return d.call(this,t)}}}function o(){v&&f&&(v=!1,f.length?p=f.concat(p):m=-1,p.length&&s())}function s(){if(!v){var t=r(o);v=!0;for(var e=p.length;e;){for(f=p,p=[];++m<e;)f&&f[m].run();m=-1,e=p.length}f=null,v=!1,a(t)}}function u(t,e){this.fun=t,this.array=e}function l(){}var c,d,h=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(t){c=n}try{d="function"==typeof clearTimeout?clearTimeout:i}catch(t){d=i}}();var f,p=[],v=!1,m=-1;h.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];p.push(new u(t,e)),1!==p.length||v||r(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=l,h.addListener=l,h.once=l,h.off=l,h.removeListener=l,h.removeAllListeners=l,h.emit=l,h.prependListener=l,h.prependOnceListener=l,h.listeners=function(t){return[]},h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(t,e,n){var i,r,a=n(20),o=a.getProtocol();i=[n(1)],r=function(t){var e=t([],{ENDPOINT:o+"//runspot4.tritondigital.com/RunSpotV4.svc/GetVASTAd?&StationID={sid}&MediaFormat={mediaformat}&RecordImpressionOnCall={recordimpressiononcall}&AdMinimumDuration={adminimumduration}&AdMaximumDuration={admaximumduration}&AdLevelPlacement={adlevelplacement}&AdCategory={adcategory}",mediaAdBlankFiles:["blank.flv","9483.mp3"],getVastUri:function(t,e,n,i,r,a,o,s){var n=void 0!=n?n:"21",i=void 0!=i?i:"1",r=void 0!=r&&r,a=void 0!=a?a:"0",o=void 0!=o?o:"900",s=void 0!=s?s:"1",u=void 0!=t?t:this.ENDPOINT;return u=u.replace("{sid}",e),u=u.replace("{mediaformat}",parseInt(n)),u=u.replace("{adlevelplacement}",parseInt(i)),u=u.replace("{recordimpressiononcall}",r),u=u.replace("{adminimumduration}",parseInt(a)),u=u.replace("{admaximumduration}",parseInt(o)),u=u.replace("{adcategory}",parseInt(s))}});return e}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[],r=function(){var t={HLS_TRACK_ID:"hlsTrackId",HLS_SEGMENT_ID:"hlsSegmentId"};return t}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[],r=function(){var t={CUE_TITLE:"cueTitle",ARTIST_NAME:"artistName",ALBUM_NAME:"albumName",PROGRAM_ID:"trackID",CUE_TIME_DURATION:"cueTimeDuration",CUE_TIME_START:"cueTimeStart",TRACK_ID:"trackID",NOW_PLAYING_URL:"nowplayingURL",TRACK_COVER_URL:"coverURL"};return t}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e){/** @license
	 * eventsource.js
	 * Available under MIT License (MIT)
	 * https://github.com/Yaffle/EventSource/
	 */
!function(t){function e(){this.data={}}function n(){this.listeners=new e}function i(t){c(function(){throw t},0)}function r(t){this.type=t,this.target=void 0}function a(t,e){r.call(this,t),this.data=e.data,this.lastEventId=e.lastEventId}function o(t,e){var n=t;return n!==n&&(n=e),n<C?C:n>w?w:n}function s(t,e,n){try{"function"==typeof e&&e.call(t,n)}catch(t){i(t)}}function u(e,i){function u(){j=_,void 0!=F&&(F.abort(),F=void 0),0!==U&&(d(U),U=0),0!==B&&(d(B),B=0),O.readyState=_}function l(t){var n="";if(j===y||j===g)try{n=F.responseText}catch(t){}var i=void 0,l=!1;if(j===g){var h=0,f="",p=void 0;if("contentType"in F)""!==t&&"error"!==t&&(h=200,f="OK",p=F.contentType);else try{h=F.status,f=F.statusText,p=F.getResponseHeader("Content-Type")}catch(t){h=0,f="",p=void 0}if(void 0==p&&(p=""),0===h&&""===f&&"load"===t&&""!==n&&(h=200,f="OK",""===p)){var v=/^data\:([^,]*?)(?:;base64)?,[\S]*$/.exec(e);void 0!=v&&(p=v[1])}if(200===h&&k.test(p)){if(j=y,N=!0,M=L,O.readyState=y,i=new r("open"),O.dispatchEvent(i),s(O,O.onopen,i),j===_)return}else if(0!==h&&(200!==h||""!==p)){var C="";C=200!==h?"EventSource's response has a status "+h+" "+f.replace(/\s+/g," ")+" that is not 200. Aborting the connection.":"EventSource's response has a Content-Type specifying an unsupported type: "+p.replace(/\s+/g," ")+". Aborting the connection.",c(function(){throw new Error(C)},0),l=!0}}if(j===y){n.length>G&&(N=!0);for(var R=G-1,I=n.length,x="\n";++R<I;)if(x=n.charAt(R),q===E&&"\n"===x)q=A;else if(q===E&&(q=A),"\r"===x||"\n"===x){if("data"===Y?H.push(z):"id"===Y?V=z:"event"===Y?W=z:"retry"===Y?(L=o(Number(z),L),M=L):"heartbeatTimeout"===Y&&(D=o(Number(z),D),0!==U&&(d(U),U=c(K,D))),z="",Y="",q===A){if(0!==H.length&&(P=V,""===W&&(W="message"),i=new a(W,{data:H.join("\n"),lastEventId:V}),O.dispatchEvent(i),"message"===W&&s(O,O.onmessage,i),j===_))return;H.length=0,W=""}q="\r"===x?E:A}else q===A&&(q=b),q===b?":"===x?q=T:Y+=x:q===T?(" "!==x&&(z+=x),q=S):q===S&&(z+=x);G=I}j!==y&&j!==g||!("load"===t||"error"===t||l||G>1048576||0===U&&!N)?0===U&&(N=!1,U=c(K,D)):(l?u():(""!==t||0!==U||N||c(function(){throw new Error("No activity within "+D+" milliseconds. Reconnecting.")},0),j=m,F.abort(),0!==U&&(d(U),U=0),M>16*L&&(M=16*L),M>w&&(M=w),U=c(K,M),M=2*M+1,O.readyState=g),i=new r("error"),O.dispatchEvent(i),s(O,O.onerror,i))}function h(){l("progress")}function f(){l("load")}function C(){l("error")}function R(){l(4===F.readyState?0===F.status?"error":"load":"progress")}e=e.toString();var I=p&&void 0!=i&&Boolean(i.withCredentials),L=o(1e3,0),D=o(6e10,0),P="",O=this,M=L,N=!1,x=void 0!=i&&void 0!=i.Transport?i.Transport:v,F=new x,U=0,B=0,G=0,j=m,H=[],V="",W="",K=void 0,q=A,Y="",z="";"readyState"in F&&void 0!=t.opera&&(B=c(function t(){3===F.readyState&&l("progress"),B=c(t,500)},0)),K=function(){if(U=0,j!==m)return void l("");if((!("ontimeout"in F)||"sendAsBinary"in F||"mozAnon"in F)&&void 0!=t.document&&void 0!=t.document.readyState&&"complete"!==t.document.readyState)return void(U=c(K,4));F.onload=f,F.onerror=C,"onabort"in F&&(F.onabort=C),"onprogress"in F&&(F.onprogress=h),"onreadystatechange"in F&&(F.onreadystatechange=R),N=!1,U=c(K,D),G=0,j=g,H.length=0,W="",V=P,z="",Y="",q=A;var n=e.slice(0,5);n="data:"!==n&&"blob:"!==n?e+((e.indexOf("?",0)===-1?"?":"&")+"lastEventId="+encodeURIComponent(P)+"&r="+(Math.random()+1).toString().slice(2)):e,F.open("GET",n,!0),"withCredentials"in F&&(F.withCredentials=I),"responseType"in F&&(F.responseType="text"),"setRequestHeader"in F&&F.setRequestHeader("Accept","text/event-stream"),F.send(void 0)},n.call(this),this.close=u,this.url=e,this.readyState=g,this.withCredentials=I,this.onopen=void 0,this.onmessage=void 0,this.onerror=void 0,K()}function l(){this.CONNECTING=g,this.OPEN=y,this.CLOSED=_}var c=t.setTimeout,d=t.clearTimeout;e.prototype.get=function(t){return this.data[t+"~"]},e.prototype.set=function(t,e){this.data[t+"~"]=e},e.prototype.delete=function(t){delete this.data[t+"~"]},n.prototype.dispatchEvent=function(t){t.target=this;var e=t.type.toString(),n=this.listeners,r=n.get(e);if(void 0!=r)for(var a=r.length,o=-1,s=void 0;++o<a;){s=r[o];try{s.call(this,t)}catch(t){i(t)}}},n.prototype.addEventListener=function(t,e){t=t.toString();var n=this.listeners,i=n.get(t);void 0==i&&(i=[],n.set(t,i));for(var r=i.length;--r>=0;)if(i[r]===e)return;i.push(e)},n.prototype.removeEventListener=function(t,e){t=t.toString();var n=this.listeners,i=n.get(t);if(void 0!=i){for(var r=i.length,a=[],o=-1;++o<r;)i[o]!==e&&a.push(i[o]);0===a.length?n.delete(t):n.set(t,a)}},a.prototype=r.prototype;var h=t.XMLHttpRequest,f=t.XDomainRequest,p=void 0!=h&&void 0!=(new h).withCredentials,v=p||void 0!=h&&void 0==f?h:f,m=-1,g=0,y=1,_=2,E=3,A=4,b=5,T=6,S=7,k=/^text\/event\-stream;?(\s*charset\=utf\-8)?$/i,C=1e3,w=18e6;l.prototype=n.prototype,u.prototype=new l,l.call(u),p&&(u.prototype.withCredentials=void 0);var R=function(){return void 0!=t.EventSource&&"withCredentials"in t.EventSource.prototype};void 0!=v&&(void 0==t.EventSource||p&&!R())&&(t.NativeEventSource=t.EventSource,t.EventSource=u)}("undefined"!=typeof window?window:this)},function(t,e,n){var i,r,a=n(16),o=n(14);i=[n(1),n(2),n(12),n(63),n(39),n(9),n(15)],r=function(t,e,n,i,r,s,u){var l=t([n],{cuePointMap:{timestamp:"timestamp",type:"type",cue_title:i.CUE_TITLE,track_artist_name:i.ARTIST_NAME,track_album_name:i.ALBUM_NAME,program_id:i.PROGRAM_ID,cue_time_duration:i.CUE_TIME_DURATION,cue_time_start:i.CUE_TIME_START,track_id:i.TRACK_ID,track_nowplaying_url:i.NOW_PLAYING_URL,track_cover_url:i.TRACK_COVER_URL,ad_id:r.AD_ID,ad_type:r.AD_TYPE,cue_title:r.CUE_TITLE,cue_time_duration:r.CUE_TIME_DURATION,ad_url:r.AD_URL},constructor:function(t,e){this.inherited(arguments),this.platform=new o(t.platformId)},start:function(){this.emit("module-ready",{id:"NowPlayingApi",module:this})},load:function(t){var n=new u,i=this._getRequestArgs(t.hd?t.mount+"AAC":t.mount,t.numberToFetch,t.eventType||"track",t.mode),r=new s;return r.request(this.platform.endpoint.nowPlayingHistory,{mount:t.mount,mode:t.mode||"songHistory",deferred:n},i,e.hitch(this,this._onLoadComplete),e.hitch(this,this._onLoadError)),n},_onLoadError:function(t,e){return console.error("nowPlayingApi::_onLoadError - mount="+t.mount+" - error="+e),this.emit("nowplaying-api-error",{mount:t.mount,error:t.error}),t.deferred.reject({mount:t.mount,error:t.error})},_onLoadComplete:function(t,e){e=e.getElementsByTagName("nowplaying-info");for(var n,i,r,o,s,u,l=[],c=0;c<e.length;c++){s=e[c].getAttribute("type"),u=e[c].getAttribute("timestamp"),i=e[c].childNodes,n={parameters:{}},n[this.cuePointMap.type]=s,n[this.cuePointMap.timestamp]=parseInt(u);for(var d=0;d<i.length;d++)r=i[d].getAttribute("name"),o=a.textContent(i[d]),void 0!=this.cuePointMap[r]&&(n[this.cuePointMap[r]]=o),n.parameters[r]=o;l.push(n)}l=l.sort(function(t,e){return t.cueTimeStart-e.cueTimeStart}).reverse(),this._emitNotificationByMode(t.mount,t.mode,l),t.deferred.resolve({mount:t.mount,list:l})},_emitNotificationByMode:function(t,e,n){switch(e){case"songHistory":this._emitSongHistoryNotification(t,n);break;case"nowPlaying":this._emitNowPlayingNotification(t,n)}},_emitSongHistoryNotification:function(t,e){e.length>0?this.emit("list-loaded",{mount:t,list:e}):this.emit("list-empty",{mount:t})},_emitNowPlayingNotification:function(t,e){e.length>0?this.emit("cue-point",{mount:t,cuePoint:e[0]}):this.emit("cue-point-empty",{mount:t})},_getRequestArgs:function(t,e,n,i){return{handleAs:"xml",preventCache:!0,headers:{"X-Requested-With":null,"Content-Type":"text/plain; charset=utf-8"},query:{mountName:t,numberToFetch:"nowPlaying"==i?1:e,eventType:n}}}});return l}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1)],r=function(t){var e=t([],{constructor:function(){this.id=null,this.adID=null,this.sequence=null,this.linearElement=null,this.companionAds=[],this.nonLinearAds=[]}});return e}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1)],r=function(t){var e=t([],{constructor:function(){this.creatives=[],this.inherited(arguments)},addWrapperLinearTrackingEvents:function(t){var e=this._getLinearElement();null!=e&&(e.trackingEvents=e.trackingEvents.concat(t))},addWrapperLinearVideoClickTracking:function(t){var e=this._getLinearElement();null!=e&&null!=e.videoClick&&(e.videoClick.clickTrackings=e.videoClick.clickTrackings.concat(t))},addImpressions:function(t){null!=t&&(this.impressions=this.impressions.concat(t))},addCustomClicks:function(t){var e=this._getLinearElement();null!=e&&null!=e.videoClick&&(e.videoClick.customClicks=e.videoClick.customClicks.concat(t))},getLinearTrackingEvents:function(t){var t=t;return void 0==t&&(t=-1),null!=this._getLinearElement()?this._getLinearElement().trackingEvents:null},getCompanionAdUrl:function(t,e,n,i){var r=this.getCompanionAds(i);if(null==r)return null;for(var a=!1,o=r.length,s=0;s<o;s++)if(a=r[s].width==t&&r[s].height==e,1!=a){if(null==n)return r[s];if(companionAd.resourceType==n)return r[s]}return null},getCompanionAds:function(t){var t=t;void 0==t&&(t=-1);for(var e=this.creatives.length,n=0;n<e;n++)if(this.creatives[n].companionAds.length>0){if(t==-1)return this.creatives[n].companionAds;if(this.creatives[n].sequence==t)return this.creatives[n].companionAds}},getLinearMediaFiles:function(t){var t=t;return void 0==t&&(t=-1),null!=this._getLinearElement(t)?this._getLinearElement(t).mediaFiles:null},getLinearMediaFileByIndex:function(t,e){var e=e;void 0==e&&(e=-1);var t=t;return void 0==t&&(t=0),null!=this._getLinearElement(e).mediaFiles[t]?this._getLinearElement(e).mediaFiles[t]:null},getLinearVideoClick:function(t){var t=t;return void 0==t&&(t=-1),null!=this._getLinearElement(t).videoClick?this._getLinearElement(t).videoClick:null},getNonLinearAds:function(t){var t=t;void 0==t&&(t=-1);for(var e=this.creatives.length,n=0;n<e;n++)if(this.creatives[n].nonLinearAds.length>0){if(t==-1)return this.creatives[n].nonLinearAds;if(this.creatives[n].sequence==t)return this.creatives[n].nonLinearAds}},getLinearDuration:function(t){var t=t;return void 0==t&&(t=-1),null!=this._getLinearElement(t).duration?this._getLinearElement(t).duration:null},_getLinearElement:function(t){var t=t;void 0==t&&(t=-1);for(var e=this.creatives.length,n=0;n<e;n++)if(null!=this.creatives[n].linearElement){if(t==-1)return this.creatives[n].linearElement;if(this.creatives[n].sequence==t)return this.creatives[n].linearElement}}});return e}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1)],r=function(t){var e=t([],{constructor:function(){this.duration=null,this.trackingEvents=[],this.videoClick=null,this.mediaFiles=[]}});return e}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1)],r=function(t){var e=t([],{constructor:function(){this.id=null,this.width=0,this.height=0,this.expandedWidth=0,this.expandedHeight=0,this.resourceType=null,this.creativeType=null,this.url=null,this.code=null,this.clickThroughURL=null,this.adParameters=null,this.scalable=!1,this.maintainAspectRatio=!1,this.apiFramework=null,this.minSuggestedDuration=null}});return e}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r,a=n(18);i=[n(1)],r=function(t){var e=t([],{constructor:function(){var t=a.getLocalization();this.flashModuleMap={flashPluginOutOfDate:{code:100,message:t.flashPluginOutOfDate}},this.html5ModuleMap={browserNotSupported:{code:101,message:t.browserNotSupported}}}});return e}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1),n(2),n(4),n(3),n(7),n(12),n(26),n(53),n(32)],r=function(t,e,n,i,r,a,o,s,u){var l=t([a],{TIME_OUT_MESSAGE_DELAY:3e4,constructor:function(t,e,n){this.type=n,this.volume=1,this.connection=null,this._track=null,this._currentLiveApiParams=null,this.isLiveStream=!1,this.lowActivated=!1,this.playAdCalled=!1,this.mount=null,this.station=null,this.__resetBackOff(),t&&t.playerId&&(this.playerNode=r.byId(t.playerId,document)),t&&t.mount&&(this.mount=t.mount),t&&t.station&&(this.station=t.station),this.hls=void 0==t.hls||t.hls,this.audioAdaptive=void 0!=t.audioAdaptive&&t.audioAdaptive,this.__initSbmConfig(t),this._playConnectionTime=0,this._playConnectionTimeIntervall=null},start:function(){i(this.target,"stream-start",e.hitch(this,this.__onStreamStart)),i(this.target,"stream-stop",e.hitch(this,this.__onStreamStop)),i(this.target,"stream-fail",e.hitch(this,this.__onStreamFailed)),i(this.target,"media-playback-started",e.hitch(this,this._onMediaPlaybackStarted)),i(this.target,"media-playback-error",e.hitch(this,this._onMediaPlaybackError)),i(this.target,"ad-break-cue-point",e.hitch(this,this.__onAdBreakCuePoint))},play:function(t){return void 0!=t.file&&""!=t.file?(this.isLiveStream=!1,void this.__playMedia(t)):(this._currentLiveApiParams=t,void(this.connectionIterator?(this.isLiveStream=!0,this.__connect(this.connectionIterator.current())):console.error("techModule::play - connectionIterator is not defined")))},setConnectionIterator:function(t){this.connectionIterator=t},currentConnection:function(){return this.connection},currentTrack:function(){return this._track},setCurrentTrack:function(t){this._track=t},_onMediaPlaybackStarted:function(t){u.requestGA(u.CATEGORY_ON_DEMAND,u.ACTION_PLAY,u.LABEL_SUCCESS)},_onMediaPlaybackError:function(){u.requestGA(u.CATEGORY_ON_DEMAND,u.ACTION_PLAY,u.LABEL_ERROR)},__onStreamStart:function(){this.__resetBackOff(),this._currentLiveApiParams&&this._currentLiveApiParams.connectionTimeOut>0&&(this.connectionTimeOutTimer=setInterval(e.hitch(this,this.__onTimeOutAlert),6e4*this._currentLiveApiParams.connectionTimeOut));var t={};this.connection&&(t[u.DIM_MEDIA_TYPE]=this.connection.type,t[u.DIM_MOUNT]=this.connection.mount?this.connection.mount:"",t[u.DIM_STATION]=this._currentLiveApiParams.station?this._currentLiveApiParams.station:"",t[u.DIM_HLS]=this.hls,t[u.DIM_AUDIO_ADAPTIVE]=this.audioAdaptive);var n={};n[u.METRIC_CONNECTION_TIME]=this._playConnectionTime,u.requestGA(u.CATEGORY_STREAMING,u.ACTION_CONNECTION,u.LABEL_SUCCESS,t,n)},__onStreamStop:function(){this.breakTimer&&clearInterval(this.breakTimer),this.connectionTimeOutTimer&&clearInterval(this.connectionTimeOutTimer)},__onStreamFailed:function(){console.error("techModule::__onStreamFailed"),this.__reconnect()},__reconnect:function(){if(!this.connectionIterator)return void console.error("techModule::__reconnect - connectionIterator is not defined");if(this.connectionIterator.hasLooped()){var t=Math.min(this.backOffDelay<<this.backOffRetry++,6e4);if(t>=6e4){var n={};n[u.DIM_MOUNT]=this.connection.mount?this.connection.mount:"",n[u.DIM_STATION]=this._currentLiveApiParams.station?this._currentLiveApiParams.station:"",u.requestGA(u.CATEGORY_STREAMING,u.ACTION_CONNECTION,u.LABEL_UNAVAILABLE,n)}this.backOffTimer=setTimeout(e.hitch(this,this.__onBackOffTimeOut),t)}else this.__connect(this.connectionIterator.next())},__onBackOffTimeOut:function(){this.connectionIterator.reset(),this.__connect(this.connectionIterator.next())},__resetBackOff:function(){this.backOffRetry=0,this.backOffDelay=4e3*Math.random()+1e3,this.backOffTimer&&clearTimeout(this.backOffTimer)},__playMedia:function(t){null!=t&&(1==this.config.adStitcher&&t.trackingParameters&&(t.file+=(t.file.indexOf("?")!=-1?"&":"?")+s.objectToQuery(t.trackingParameters).replace(/\./g,"%2E")),this.playMedia({url:t.file}))},__connect:function(t){if(null!=t){var e=this;if(this.connection=t,null!=this.connection&&(this.mount=this.connection.mount?this.connection.mount:null),null!=this._currentLiveApiParams&&(this.station=this._currentLiveApiParams.station?this._currentLiveApiParams.station:null),this.connection.isGeoBlocked&&this.connection.alternateContent){o.publish("api/request","get-alternate-content",this.connection.alternateContent);var n={};return n[u.DIM_MOUNT]=this.connection.mount?this.connection.mount:"",n[u.DIM_STATION]=this._currentLiveApiParams.station?this._currentLiveApiParams.station:"",n[u.DIM_ALTERNATE_CONTENT]=!0,void u.requestGA(u.CATEGORY_STREAMING,u.ACTION_CONNECTION,u.LABEL_GEOBLOCKING,n)}if(this.connection.isGeoBlocked){var n={};n[u.DIM_MOUNT]=this.connection.mount?this.connection.mount:"",n[u.DIM_STATION]=this._currentLiveApiParams.station?this._currentLiveApiParams.station:"",n[u.DIM_ALTERNATE_CONTENT]=!1,u.requestGA(u.CATEGORY_STREAMING,u.ACTION_CONNECTION,u.LABEL_GEOBLOCKING,n)}var i=this._currentLiveApiParams.trackingParameters||{};this.lowActivated&&this.connection.isAudioAdaptive&&(i.utags="low-bw");var r=this.connection.mimeType,a=this.connection.url;i&&(a=a+"?"+s.objectToQuery(i)),this.emit("stream-select"),this._playConnectionTime=0,this._playConnectionTimeIntervall||(this._playConnectionTimeIntervall=setInterval(function(){e._playConnectionTime+=10},10)),this.playStream({url:a,mimeType:r,format:this.connection.format,timeShift:this._currentLiveApiParams.timeShift,uuidEnabled:this.connection.uuidEnabled,sendPageUrl:this.connection.sendPageUrl,hasVideo:this.connection.hasVideo,type:this.connection.type,mount:this.connection.mount,sbmConfig:this.__getSbmData(),isHLS:this.connection.isHLS,isHLSTS:this.connection.isHLSTS})}},__getSbmData:function(){return null!=this._sbmConfig&&this._sbmConfig.active&&null!=this.connection.metadata&&null!=this.connection.metadata.sseSideband?(this._sbmConfig.info=this.connection.metadata.sseSideband,this._sbmConfig):this._sbmConfig},__onAdBreakCuePoint:function(t){var e=t.data.adBreakData;this.breakTimer&&clearInterval(this.breakTimer),e.duration>0&&this.__initBreakTimer(e.duration)},__initBreakTimer:function(t){this.breakTimer=setInterval(e.hitch(this,this.__onBreakTimerComplete),t)},__onBreakTimerComplete:function(){this.breakTimer&&clearInterval(this.breakTimer),this.emit("ad-break-cue-point-complete")},__initSbmConfig:function(t){t.sbm&&!t.sbm.active?this._sbmConfig={active:!1,aSyncCuePointFallback:void 0==t.sbm.aSyncCuePointFallback||t.sbm.aSyncCuePointFallback}:t.sbm&&t.sbm.active?this._sbmConfig={active:!0,aSyncCuePointFallback:void 0==t.sbm.aSyncCuePointFallback||t.sbm.aSyncCuePointFallback}:"Html5"==this.type?this._sbmConfig={active:!0,aSyncCuePointFallback:!0}:this._sbmConfig=null},prepare:function(t){"adModule"===t&&(this.playAdCalled=!0)},playStream:function(t){},pause:function(){var t={};null!=this.mount&&(t[u.DIM_MOUNT]=this.mount),null!=this.station&&(t[u.DIM_STATION]=this.station),1==this.isLiveStream?this.pauseStream():this.pauseMedia(),u.requestGA(u.CATEGORY_DEFAULT,u.ACTION_PAUSE,u.LABEL_SUCCESS,t)},stop:function(){this.isLiveStream?(this.__resetBackOff(),this.stopStream()):this.stopMedia();var t={};null!=this.mount&&(t[u.DIM_MOUNT]=this.mount),null!=this.station&&(t[u.DIM_STATION]=this.station),u.requestGA(u.CATEGORY_DEFAULT,u.ACTION_STOP,u.LABEL_SUCCESS,t)},resume:function(){var t={};null!=this.mount&&(t[u.DIM_MOUNT]=this.mount),null!=this.station&&(t[u.DIM_STATION]=this.station),1==this.isLiveStream?this.resumeStream():this.resumeMedia(),u.requestGA(u.CATEGORY_DEFAULT,u.ACTION_RESUME,u.LABEL_SUCCESS,t)},seek:function(t){1==this.isLiveStream?this.seekStream(t):this.seekMedia(t)},seekLive:function(){},restartConnectionTimeOut:function(){this.connectionTimeOutTimer&&clearInterval(this.connectionTimeOutTimer),this._currentLiveApiParams.connectionTimeOut>0&&(this.connectionTimeOutTimer=setInterval(e.hitch(this,this.__onTimeOutAlert),6e4*this._currentLiveApiParams.connectionTimeOut))},setVolume:function(t){this.volume=t},getVolume:function(){return this.volume},mute:function(){var t={};null!=this.mount&&(t[u.DIM_MOUNT]=this.mount),null!=this.station&&(t[u.DIM_STATION]=this.station),u.requestGA(u.CATEGORY_DEFAULT,u.ACTION_MUTE,u.LABEL_SUCCESS,t)},unMute:function(){var t={};null!=this.mount&&(t[u.DIM_MOUNT]=this.mount),null!=this.station&&(t[u.DIM_STATION]=this.station),u.requestGA(u.CATEGORY_DEFAULT,u.ACTION_UNMUTE,u.LABEL_SUCCESS,t)},playAd:function(t,e){this.playAdCalled=!0},skipAd:function(){},destroyAd:function(){},__onTimeOutAlert:function(){this.connectionTimeOutTimer&&clearInterval(this.connectionTimeOutTimer),this.connectionTimeOutTimer=setInterval(e.hitch(this,this.__onTimeOutReached),this.TIME_OUT_MESSAGE_DELAY),this.emit("timeout-alert")},__onTimeOutReached:function(){this.connectionTimeOutTimer&&clearInterval(this.connectionTimeOutTimer),this.stopStream(),this.emit("timeout-reach")}});return l}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r,a=(n(28),n(37),n(40));n(21);i=[n(1),n(3),n(13),n(6),n(2),n(19),n(88),n(4)],r=function(t,e,n,i,r,o,s,u){var l=t([n],{MAX_CONNECTION_LATENCY:5e3,constructor:function(){this.inherited(arguments),this.mediaNode=null,this.audioSource=null,this.isStopped=!0,this.isPaused=!0,this.listeners=[],this.volume=1,this._onCanPlayHandler=r.hitch(this,this._onCanPlay),this._onCanPlayThroughHandler=r.hitch(this,this._onCanPlayThrough),this._onLoadDataHandler=r.hitch(this,this._onLoadData),this._onLoadStartHandler=r.hitch(this,this._onLoadStart),this._onWaitingHandler=r.hitch(this,this._onWaiting),this._onEmptiedHandler=r.hitch(this,this._onEmptied),this._onAbortHandler=r.hitch(this,this._onAbort),this._onErrorHandler=r.hitch(this,this._onError),this._onLoadedMetadataHandler=r.hitch(this,this._onLoadedmetadata),this._onTimeUpdateHandler=r.hitch(this,this._onTimeupdate),this._onEndedHandler=r.hitch(this,this._onEnded),this._onPlayHandler=r.hitch(this,this._onPlay),this._onPauseHandler=r.hitch(this,this._onPause),this._onProgressHandler=r.hitch(this,this._onProgress),this._onStalledHandler=r.hitch(this,this._onStalled),this._onSuspendHandler=r.hitch(this,this._onSuspend)},play:function(t){this.mediaNode=t.mediaNode,this.isStopped=!1,this.isPaused=!1,this._loadMedia(t)},stop:function(){this.isStopped=!0,this.isPaused=!1,void 0!=this.mediaNode&&(this.mediaNode.pause(),this._emptyMediaNode())},skip:function(){this.isStopped=!0,this.isPaused=!1,void 0!=this.mediaNode&&(this.emit("html5-playback-status",{type:a.ENDED}),this.mediaNode.pause())},pause:function(){this.isPaused=!0,void 0!=this.mediaNode&&this.mediaNode.pause()},resume:function(){this.isPaused=!1,void 0!=this.mediaNode&&this.mediaNode.paused&&this.mediaNode.play()},seek:function(t){void 0!=this.mediaNode&&(this.mediaNode.currentTime=t,this.isPaused&&this.resume())},setVolume:function(t){void 0!=this.mediaNode&&(this.volume=t,this.mediaNode.volume=t)},mute:function(){void 0!=this.mediaNode&&(this.mediaNode.volume=0,this.mediaNode.muted=!0)},unMute:function(){void 0!=this.mediaNode&&(this.mediaNode.volume=this.volume,this.mediaNode.muted=!1)},_loadMedia:function(t){this.mediaNode.src=t.url,this._initMediaListeners(t.isLive),this.mediaNode.load()},_emptyMediaNode:function(){this.mediaNode.src=""},_removeMediaSource:function(){o.has(this.audioSource,"src")&&o.remove(this.audioSource,"src"),o.has(this.mediaNode,"src")&&o.remove(this.mediaNode,"src")},_onLoadData:function(){this.isStopped||this.isPaused||(u("mozilla")&&this.mediaNode&&this.mediaNode.paused&&this.mediaNode.play(),this.emit("html5-playback-status",{type:a.DATA_LOADING,mediaNode:this.mediaNode}))},_onCanPlay:function(){this.isStopped||this.isPaused||(this.emit("html5-playback-status",{type:a.CAN_PLAY,mediaNode:this.mediaNode}),this.mediaNode&&this.mediaNode.paused&&this.mediaNode.play())},_onCanPlayThrough:function(){this.isStopped||this.isPaused||(this.emit("html5-playback-status",{type:a.CAN_PLAY_THROUGH,mediaNode:this.mediaNode}),this.mediaNode&&this.mediaNode.paused&&this.mediaNode.play())},_onWaiting:function(){this.isStopped||this.isPaused||this.emit("html5-playback-status",{type:a.WAITING,mediaNode:this.mediaNode})},_onEmptied:function(){this.isStopped||this.isPaused||this.emit("html5-playback-status",{type:a.EMPTIED,mediaNode:this.mediaNode})},_onAbort:function(){this.isStopped||this.isPaused||this.emit("html5-playback-status",{type:a.ABORT,mediaNode:this.mediaNode})},_onError:function(t){return this._removeMediaListeners(),this.isStopped||this.isPaused?void this.emit("html5-playback-status",{type:a.STOP,mediaNode:this.mediaNode}):void this.emit("html5-playback-status",{type:3==this.mediaNode.readyState?a.STOP:a.ERROR,mediaNode:this.mediaNode})},_onLoadedmetadata:function(){this.isStopped||this.isPaused||this.emit("html5-playback-status",{type:a.EMPTIED,mediaNode:this.mediaNode})},_onTimeupdate:function(){this.isStopped||this.isPaused||(this.mediaNode.currentTime.toFixed(1)==this.mediaNode.duration.toFixed(1)?(this.isStopped=!0,this.emit("html5-playback-status",{type:a.ENDED,mediaNode:this.mediaNode})):this.emit("html5-playback-status",{type:a.TIME_UPDATE,mediaNode:this.mediaNode}))},_onLoadStart:function(){this.isStopped||this.isPaused||this.emit("html5-playback-status",{type:a.LOAD_START,mediaNode:this.mediaNode})},_onEnded:function(){this.isStopped||(this._removeMediaListeners(),this.emit("html5-playback-status",{type:a.ENDED,mediaNode:this.mediaNode}))},_onPlay:function(){this.emit("html5-playback-status",{type:a.PLAY,mediaNode:this.mediaNode})},_onPause:function(){this.isStopped?this.emit("html5-playback-status",{type:a.STOP,mediaNode:this.mediaNode}):this.emit("html5-playback-status",{type:a.PAUSE,mediaNode:this.mediaNode})},_initMediaListeners:function(t){this._errorHandler=e(this.mediaNode,"error",this._onErrorHandler),this._loadDataHandler=e(this.mediaNode,"loadeddata",this._onLoadDataHandler),this._loadStartHandler=e(this.mediaNode,"loadstart",this._onLoadStartHandler),this._canPlayHandler=e(this.mediaNode,"canplay",this._onCanPlayHandler),this._canPlayThroughHandler=e(this.mediaNode,"canplaythrough",this._onCanPlayThroughHandler),this._waitingHandler=e(this.mediaNode,"waiting",this._onWaitingHandler),this._emptiedHandler=e(this.mediaNode,"emptied",this._onEmptiedHandler),this._abortHandler=e(this.mediaNode,"abort",this._onAbortHandler),this._endedHandler=e(this.mediaNode,"ended",this._onEndedHandler),this._playHandler=e(this.mediaNode,"play",this._onPlayHandler),this._pauseHandler=e(this.mediaNode,"pause",this._onPauseHandler),this._loadedMetadataHandler=e(this.mediaNode,"loadedmetadata",this._onLoadedMetadataHandler),this._timeUpdateHandler=t?null:e(this.mediaNode,"timeupdate",this._onTimeUpdateHandler)},_removeMediaListeners:function(){this._errorHandler.remove(),this._loadDataHandler.remove(),this._loadStartHandler.remove(),this._canPlayHandler.remove(),this._canPlayThroughHandler.remove(),this._waitingHandler.remove(),this._emptiedHandler.remove(),this._abortHandler.remove(),this._endedHandler.remove(),this._playHandler.remove(),this._pauseHandler.remove(),this._loadedMetadataHandler.remove(),this._timeUpdateHandler&&this._timeUpdateHandler.remove()}});return l}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){function i(t,e,n){return"string"==typeof e&&(e=[e]),h.isUndefined(n)&&(n=!1),t.filter(function(t){return!(h.isEmpty(t.tags)&&n)||h.some(e,function(e){return t.tags.indexOf(e)!==-1})})}function r(t){return h.sortBy(t,function(t){return t.mediaFormat.isAudioAdaptive?0:1},function(t){return t.mediaFormat.audioTracks[0].isAAC?0:1})}function a(t){var e=h.groupBy(t,function(t){var e;return e=t.mediaFormat.isAudioAdaptive?"audioAdaptive":t.mediaFormat.audioTracks[0].isAAC?"aac":"mp3"}),n=h.keys(e);return h.flatMap(n,function(t){var n=e[t];return h.orderBy(n,"bitRate","desc")})}function o(t,e){return h.isArray(e)||(e=[e]),h.forEach(t,function(t){var n=t.transports.filter(function(n){return!h.some(e,function(e){return e.transport===n.transport&&t.mediaFormat.audioTracks[0].codec.indexOf(e.codec)>-1})});t.transports=n}),t.filter(function(t){return!h.isEmpty(t.transports)})}function s(t){return h.filter(t,function(t){return!t.mediaFormat.isAudioAdaptive})}function u(t){return o(t,[{transport:"hls",codec:"aac"},{transport:"hlsts",codec:"aac"}])}function l(t,e){return t=s(t),o(t,[{transport:e?"hls":"hlsts",codec:"aac"},{transport:"http",codec:"aac"},{transport:"http",codec:"mp3"}])}function c(t,e){var n=h.map(e,function(t){return function(e){return e.transport===t?0:1}});return h.forEach(t,function(t){var e=t.transports,i=h.sortBy(e,n);t.transports=i}),t}function d(t,e,n){if("flash"==n.toLowerCase())t=s(t),t=o(t,[{transport:"hlsts",codec:"aac"},{transport:"hls",codec:"aac"}]);else switch(e.os.family){case"iOS":t=o(t,{transport:"hlsts",codec:"aac"}),"Chrome Mobile"===e.name&&(t=o(t,[{transport:"hls",codec:"aac"}])),t=c(t,["hls","http"]);break;case"Android":t=c(t,["hlsts","http"]);break;default:switch(e.name){case"Safari":t=o(t,{transport:"hlsts",codec:"aac"}),t=c(t,["hls","http"]);break;case"IE":t="11.0"===e.version&&parseInt(e.os.version)>7?o(t,[{transport:"http",codec:"aac"},{transport:"hlsts",codec:"aac"}]):o(t,[{transport:"hls",codec:"aac"},{transport:"http",codec:"aac"},{transport:"hlsts",codec:"aac"}]),t=c(t,["hls","http"]);break;case"Microsoft Edge":t=o(t,[{transport:"hlsts",codec:"aac"}]),t=c(t,["hls","http"]);break;default:t=o(t,[{transport:"hlsts",codec:"aac"},{transport:"hls",codec:"aac"}]),t=c(t,["hls","http"])}}return t}var h=n(8);t.exports={filterMountPoints:function(t,e,n,o,c,h,f,p,v){return!h||p||v||(t=u(t)),f&&(t=s(t)),t=i(t,o,c),t=p?l(t):v?l(t,!0):d(t,e,n),t=a(t),t=r(t)},filterByTag:i,sortMountpoints:r}},function(t,e,n){var i,r;i=[n(1),n(6),n(2),n(9),n(33),n(76),n(75),n(3)],r=function(t,e,n,i,r,a,o,s){var u=t([r],{constructor:function(t,e){this.albumData=null,this.inherited(arguments)},getArtists:function(){return this.albumData.artists},getArtistId:function(){return this.getArtists()[0].id},getDuration:function(){return this.albumData.duration},getGenres:function(){for(var t=[],e=0;e<this.albumData.genres.length;e++)t.push(this.albumData.genres[e].name);return t},getTitle:function(){return null!=this.albumData?this.albumData.title:this.data.title},getLabel:function(){return this.data.label},getReleaseDate:function(){return null!=this.albumData?this.albumData.release:this.data.release},getReview:function(){return this.albumData.review},getReviewAuthor:function(){return this.albumData.reviewAuthor},getBuyUrl:function(){return null!=this.albumData?this.albumData.buyURL:this.data.buyURL},getRating:function(){return null!=this.albumData?this.albumData.rating:this.data.rating},getCoverArtOriginal:function(){var t=null!=this.albumData?this.albumData.cover:this.data.cover;return null!=t||void 0!=t?{url:t.originalSourceUrl,width:t.width,height:t.height,id:t.id}:null},getCoverArtPicture:function(){return this.coverArtPicture},fetchCoverArtPicture:function(){if(this.coverArtPicture)return void this.notify("cover-complete",this.coverArtPicture);var t=null!=this.albumData?this.albumData.cover:this.data.cover;return null==t?void this.notify("cover-complete"):(t.albumId=this.id,this.coverArtPicture=new o(t,this.platformId),this.coverArtPicture.successCallback&&this.coverArtPicture.successCallback.remove(),this.coverArtPicture.errorCallback&&this.coverArtPicture.errorCallback.remove(),this.coverArtPicture.successCallback=s(this.coverArtPicture,"picture-complete",n.hitch(this,this._onCoverArtPictureComplete)),this.coverArtPicture.errorCallback=s(this.coverArtPicture,"picture-error",n.hitch(this,this._onCoverArtPictureComplete)),void this.coverArtPicture.fetchData())},_onCoverArtPictureComplete:function(t,e){this.notify("cover-complete",this.coverArtPicture)},getTracks:function(){if(null==this.tracks){this.tracks=[];var t;e.forEach(this.albumData.tracks,function(e,n){t=new a(e,this.platformId),this.tracks.push(t)},this)}return this.tracks},getTrackById:function(t){var n=-1;return e.forEach(this.getTracks(),function(e,i){e.id==t&&(n=i)},this),n>-1?this.getTracks()[n]:null},fetchData:function(t){if(t=void 0!=t&&t,t&&(this.url=this.getDynamicAlbumUrl(this.id)),null==this.url)return console.error("album::fetchData - The album url is undefined for album title="+this.getTitle()),void this.notify("album-error",{albumId:this.id});if(0==this.alreadyFetched){var e=new i;e.request(this.url,{albumId:this.id,isDynamicCall:t},this.getRequestArgs(),n.hitch(this,this._onLoadComplete),n.hitch(this,this._onLoadError))}else this.notify("album-complete",{albumId:this.id})},fetchTrackByIds:function(t){"string"==typeof t&&(t=[t]),this.tracksQueue=n.clone(t);for(var e,i=0;i<t.length;i++)e=this.getTrackById(t[i]),
e.successCallback&&e.successCallback.remove(),e.errorCallback&&e.errorCallback.remove(),e.successCallback=s(e,"track-complete",n.hitch(this,this._onTrackComplete)),e.errorCallback=s(e,"track-error",n.hitch(this,this._onTrackComplete)),e.fetchData()},_onLoadError:function(t,e){console.error(e),0==t.isDynamicCall?this.fetchData(!0):this.notify("album-error",{albumId:t.albumId})},_onLoadComplete:function(t,e){this.albumData=e.album,this.alreadyFetched=!0,this.notify("album-complete",{albumId:t.albumId})},_onTrackComplete:function(t,e){this._removeTrackFromQueue(t.trackId),0==this.tracksQueue.length&&this.notify("track-complete",this.tracks)},_removeTrackFromQueue:function(t){var n=-1;e.forEach(this.tracksQueue,function(e,i){e==t&&(n=i)},this),n>-1&&this.tracksQueue.splice(n,1)}});return u}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1),n(2),n(9),n(33)],r=function(t,e,n,i){var r=t([i],{constructor:function(t,e){this.pictureData=null,this.albumId=t.albumId?t.albumId:null,this.artistId=t.artistId?t.artistId:null,this.inherited(arguments)},getOriginalSourceUrl:function(){return this.data.originalSourceUrl},getOriginalWidth:function(){return this.data.width},getOriginalHeight:function(){return this.data.height},getFiles:function(){return null!=this.pictureData&&void 0!=this.pictureData.files&&this.pictureData.files.length>0?this.pictureData.files:null},fetchData:function(t){if(t=void 0!=t&&t,t?null!=this.albumId?this.url=this.getDynamicAlbumPictureUrl(this.albumId,this.id):this.url=this.getDynamicArtistPictureUrl(this.artistId,this.id):null!=this.albumId?this.url+=this.url.indexOf("?")!=-1?"&":"?rewrite_id="+this.albumId:this.url+=this.url.indexOf("?")!=-1?"&":"?rewrite_id="+this.artistId,0==this.alreadyFetched){var i=new n;i.request(this.url,{pictureId:this.id,isDynamicCall:t},this.getRequestArgs(),e.hitch(this,this._onLoadComplete),e.hitch(this,this._onLoadError))}else this.notify("picture-complete",{pictureId:this.id})},_onLoadError:function(t,e){console.error(e),0==t.isDynamicCall?this.fetchData(!0):this.notify("picture-error",{pictureId:t.pictureId})},_onLoadComplete:function(t,e){this.pictureData=e.picture,this.alreadyFetched=!0,this.notify("picture-complete",{pictureId:t.pictureId})}});return r}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1),n(2),n(9),n(33)],r=function(t,e,n,i){var r=t([i],{constructor:function(t,e){this.trackData=null,this.inherited(arguments)},getBuyUrl:function(){return null!=this.trackData?this.trackData.buyURL:this.data.buyURL},getDuration:function(){return this.data.duration},getSampleUrl:function(){return null!=this.trackData?this.trackData.sampleURL:this.data.sampleURL},getTitle:function(){return null!=this.trackData?this.trackData.title:this.data.title},getArtists:function(){return this.trackData.artists},getReview:function(){return this.trackData.review},getReviewAuthor:function(){return this.trackData.reviewAuthor},getDisc:function(){return this.data.disc},fetchData:function(t){if(t=void 0!=t&&t,t&&(this.url=this.getDynamicTrackUrl(this.id)),0==this.alreadyFetched){var i=new n;i.request(this.url,{trackId:this.id,isDynamicCall:t},this.getRequestArgs(),e.hitch(this,this._onLoadComplete),e.hitch(this,this._onLoadError))}else this.notify("track-complete",{trackId:this.id})},_onLoadError:function(t,e){console.error(e),0==t.isDynamicCall?this.fetchData(!0):this.notify("track-error",{trackId:t.trackId})},_onLoadComplete:function(t,e){this.trackData=e.track,this.alreadyFetched=!0,this.notify("track-complete",{trackId:t.trackId})}});return r}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(4),n(27)],r=function(t,e){var n={};if(t("dojo-config-api")){var i,r=e.rawConfig;for(i in r)n[i]=r[i]}else{var a=function(e,n,r){for(i in e)"has"!=i&&t.add(n+i,e[i],0,r)};n=t("dojo-loader")?e.rawConfig:this.dojoConfig||this.djConfig||{},a(n,"config",1),a(n.has,"",1)}return n.locale||(n.locale=(navigator.language||navigator.userLanguage).toLowerCase()),n}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(5),n(3),n(26),n(34),n(79),n(87),n(80),n(2),n(86)],r=function(t,e,n,i,r,a,o,s){function u(n,r,o,u,l){if(u=s.hitch(o,u),!n||!n.addEventListener&&!n.attachEvent)return i.after(n||t.global,r,u,!0);if("string"==typeof r&&"on"==r.substring(0,2)&&(r=r.substring(2)),n||(n=t.global),!l)switch(r){case"keypress":r=c;break;case"mouseenter":r=a.enter;break;case"mouseleave":r=a.leave}return e(n,r,u,l)}function l(t){t.keyChar=t.charCode?String.fromCharCode(t.charCode):"",t.charOrCode=t.keyChar||t.keyCode}o.add("events-keypress-typed",function(){var t={charCode:0};try{t=document.createEvent("KeyboardEvent"),(t.initKeyboardEvent||t.initKeyEvent).call(t,"keypress",!0,!0,null,!1,!1,!1,!1,9,3)}catch(t){}return 0==t.charCode&&!o("opera")});var c,d={106:42,111:47,186:59,187:43,188:44,189:45,190:46,191:47,192:96,219:91,220:92,221:93,222:39,229:113},h=o("mac")?"metaKey":"ctrlKey",f=function(t,e){var n=s.mixin({},t,e);return l(n),n.preventDefault=function(){t.preventDefault()},n.stopPropagation=function(){t.stopPropagation()},n};if(o("events-keypress-typed")){var p=function(t,e){try{return t.keyCode=e}catch(t){return 0}};c=function(t,n){var i=e(t,"keydown",function(t){var e=t.keyCode,i=13!=e&&32!=e&&(27!=e||!o("ie"))&&(e<48||e>90)&&(e<96||e>111)&&(e<186||e>192)&&(e<219||e>222)&&229!=e;if(i||t.ctrlKey){var r=i?0:e;if(t.ctrlKey){if(3==e||13==e)return n.call(t.currentTarget,t);r>95&&r<106?r-=48:!t.shiftKey&&r>=65&&r<=90?r+=32:r=d[r]||r}var a=f(t,{type:"keypress",faux:!0,charCode:r});n.call(t.currentTarget,a),o("ie")&&p(t,a.keyCode)}}),r=e(t,"keypress",function(t){var e=t.charCode;return e=e>=32?e:0,t=f(t,{charCode:e,faux:!0}),n.call(this,t)});return{remove:function(){i.remove(),r.remove()}}}}else c=o("opera")?function(t,n){return e(t,"keypress",function(t){var e=t.which;return 3==e&&(e=99),e=e<32&&!t.shiftKey?0:e,t.ctrlKey&&!t.shiftKey&&e>=65&&e<=90&&(e+=32),n.call(this,f(t,{charCode:e}))})}:function(t,n){return e(t,"keypress",function(t){return l(t),n.call(this,t)})};var v={_keypress:c,connect:function(t,e,n,i,r){var a=arguments,o=[],s=0;o.push("string"==typeof a[0]?null:a[s++],a[s++]);var l=a[s+1];o.push("string"==typeof l||"function"==typeof l?a[s++]:null,a[s++]);for(var c=a.length;s<c;s++)o.push(a[s]);return u.apply(this,o)},disconnect:function(t){t&&t.remove()},subscribe:function(t,e,i){return n.subscribe(t,s.hitch(e,i))},publish:function(t,e){return n.publish.apply(n,[t].concat(e))},connectPublisher:function(t,e,n){var i=function(){v.publish(t,arguments)};return n?v.connect(e,n,i):v.connect(e,i)},isCopyKey:function(t){return t[h]}};return v.unsubscribe=v.disconnect,o("extend-dojo")&&s.mixin(t,v),v}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(5),n(3),n(4),n(82)],r=function(t,e,n,i){if(e._fixEvent){var r=e._fixEvent;e._fixEvent=function(t,e){return t=r(t,e),t&&i.normalizeEvent(t),t}}var a={fix:function(t,n){return e._fixEvent?e._fixEvent(t,n):t},stop:function(t){n("dom-addeventlistener")||t&&t.preventDefault?(t.preventDefault(),t.stopPropagation()):(t=t||window.event,t.cancelBubble=!0,e._preventDefault.call(t))}};return n("extend-dojo")&&(t.fixEvent=a.fix,t.stopEvent=a.stop),a}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(5),n(2),n(10)],r=function(t,e,n){return n("host-browser")?(t._name="browser",e.mixin(t,{isBrowser:!0,isFF:n("ff"),isIE:n("ie"),isKhtml:n("khtml"),isWebKit:n("webkit"),isMozilla:n("mozilla"),isMoz:n("mozilla"),isOpera:n("opera"),isSafari:n("safari"),isChrome:n("chrome"),isMac:n("mac"),isIos:n("ios"),isAndroid:n("android"),isWii:n("wii"),isQuirks:n("quirks"),isAir:n("air")}),n):n}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(5),n(89)],r=function(t,e){return t.cookie=function(t,n,i){var r,a=document.cookie;if(1==arguments.length){var o=a.match(new RegExp("(?:^|; )"+e.escapeString(t)+"=([^;]*)"));r=o?decodeURIComponent(o[1]):void 0}else{i=i||{};var s=i.expires;if("number"==typeof s){var u=new Date;u.setTime(u.getTime()+24*s*60*60*1e3),s=i.expires=u}s&&s.toUTCString&&(i.expires=s.toUTCString()),n=encodeURIComponent(n);var l,c=t+"="+n;for(l in i){c+="; "+l;var d=i[l];d!==!0&&(c+="="+d)}document.cookie=c}return r},t.cookie.isSupported=function(){return"cookieEnabled"in navigator||(this("__djCookieTest__","CookiesAllowed"),navigator.cookieEnabled="CookiesAllowed"==this("__djCookieTest__"),navigator.cookieEnabled&&this("__djCookieTest__","",{expires:-1})),navigator.cookieEnabled},t.cookie}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(10),n(17),n(7),n(23)],r=function(t,e,n,i){function r(t,e,n,i,r,a){a=a||"px";var o=t.style;isNaN(e)||(o.left=e+a),isNaN(n)||(o.top=n+a),i>=0&&(o.width=i+a),r>=0&&(o.height=r+a)}function a(t){return"button"==t.tagName.toLowerCase()||"input"==t.tagName.toLowerCase()&&"button"==(t.getAttribute("type")||"").toLowerCase()}function o(t){return"border-box"==s.boxModel||"table"==t.tagName.toLowerCase()||a(t)}var s={};s.boxModel="content-box",t("ie")&&(s.boxModel="BackCompat"==document.compatMode?"border-box":"content-box"),s.getPadExtents=function(t,e){t=n.byId(t);var r=e||i.getComputedStyle(t),a=i.toPixelValue,o=a(t,r.paddingLeft),s=a(t,r.paddingTop),u=a(t,r.paddingRight),l=a(t,r.paddingBottom);return{l:o,t:s,r:u,b:l,w:o+u,h:s+l}};var u="none";s.getBorderExtents=function(t,e){t=n.byId(t);var r=i.toPixelValue,a=e||i.getComputedStyle(t),o=a.borderLeftStyle!=u?r(t,a.borderLeftWidth):0,s=a.borderTopStyle!=u?r(t,a.borderTopWidth):0,l=a.borderRightStyle!=u?r(t,a.borderRightWidth):0,c=a.borderBottomStyle!=u?r(t,a.borderBottomWidth):0;return{l:o,t:s,r:l,b:c,w:o+l,h:s+c}},s.getPadBorderExtents=function(t,e){t=n.byId(t);var r=e||i.getComputedStyle(t),a=s.getPadExtents(t,r),o=s.getBorderExtents(t,r);return{l:a.l+o.l,t:a.t+o.t,r:a.r+o.r,b:a.b+o.b,w:a.w+o.w,h:a.h+o.h}},s.getMarginExtents=function(t,e){t=n.byId(t);var r=e||i.getComputedStyle(t),a=i.toPixelValue,o=a(t,r.marginLeft),s=a(t,r.marginTop),u=a(t,r.marginRight),l=a(t,r.marginBottom);return{l:o,t:s,r:u,b:l,w:o+u,h:s+l}},s.getMarginBox=function(e,r){e=n.byId(e);var a,o=r||i.getComputedStyle(e),l=s.getMarginExtents(e,o),c=e.offsetLeft-l.l,d=e.offsetTop-l.t,h=e.parentNode,f=i.toPixelValue;if(t("mozilla")){var p=parseFloat(o.left),v=parseFloat(o.top);isNaN(p)||isNaN(v)?h&&h.style&&(a=i.getComputedStyle(h),"visible"!=a.overflow&&(c+=a.borderLeftStyle!=u?f(e,a.borderLeftWidth):0,d+=a.borderTopStyle!=u?f(e,a.borderTopWidth):0)):(c=p,d=v)}else(t("opera")||8==t("ie")&&!t("quirks"))&&h&&(a=i.getComputedStyle(h),c-=a.borderLeftStyle!=u?f(e,a.borderLeftWidth):0,d-=a.borderTopStyle!=u?f(e,a.borderTopWidth):0);return{l:c,t:d,w:e.offsetWidth+l.w,h:e.offsetHeight+l.h}},s.getContentBox=function(e,r){e=n.byId(e);var a,o=r||i.getComputedStyle(e),u=e.clientWidth,l=s.getPadExtents(e,o),c=s.getBorderExtents(e,o);return u?(a=e.clientHeight,c.w=c.h=0):(u=e.offsetWidth,a=e.offsetHeight),t("opera")&&(l.l+=c.l,l.t+=c.t),{l:l.l,t:l.t,w:u-l.w-c.w,h:a-l.h-c.h}},s.setContentSize=function(t,e,i){t=n.byId(t);var a=e.w,u=e.h;if(o(t)){var l=s.getPadBorderExtents(t,i);a>=0&&(a+=l.w),u>=0&&(u+=l.h)}r(t,NaN,NaN,a,u)};var l={l:0,t:0,w:0,h:0};return s.setMarginBox=function(e,u,c){e=n.byId(e);var d=c||i.getComputedStyle(e),h=u.w,f=u.h,p=o(e)?l:s.getPadBorderExtents(e,d),v=s.getMarginExtents(e,d);if(t("webkit")&&a(e)){var m=e.style;h>=0&&!m.width&&(m.width="4px"),f>=0&&!m.height&&(m.height="4px")}h>=0&&(h=Math.max(h-p.w-v.w,0)),f>=0&&(f=Math.max(f-p.h-v.h,0)),r(e,u.l,u.t,h,f)},s.isBodyLtr=function(t){return t=t||e.doc,"ltr"==(e.body(t).dir||t.documentElement.dir||"ltr").toLowerCase()},s.docScroll=function(n){n=n||e.doc;var i=e.doc.parentWindow||e.doc.defaultView;return"pageXOffset"in i?{x:i.pageXOffset,y:i.pageYOffset}:(i=t("quirks")?e.body(n):n.documentElement)&&{x:s.fixIeBiDiScrollLeft(i.scrollLeft||0,n),y:i.scrollTop||0}},t("ie")&&(s.getIeDocumentElementOffset=function(n){n=n||e.doc;var i=n.documentElement;if(t("ie")<8){var r=i.getBoundingClientRect(),a=r.left,o=r.top;return t("ie")<7&&(a+=i.clientLeft,o+=i.clientTop),{x:a<0?0:a,y:o<0?0:o}}return{x:0,y:0}}),s.fixIeBiDiScrollLeft=function(n,i){i=i||e.doc;var r=t("ie");if(r&&!s.isBodyLtr(i)){var a=t("quirks"),o=a?e.body(i):i.documentElement,u=e.global;return 6==r&&!a&&u.frameElement&&o.scrollHeight>o.clientHeight&&(n+=o.clientLeft),r<8||a?n+o.clientWidth-o.scrollWidth:-n}return n},s.position=function(i,r){i=n.byId(i);var a=e.body(i.ownerDocument),o=i.getBoundingClientRect();if(o={x:o.left,y:o.top,w:o.right-o.left,h:o.bottom-o.top},t("ie")<9){var u=s.getIeDocumentElementOffset(i.ownerDocument);o.x-=u.x+(t("quirks")?a.clientLeft+a.offsetLeft:0),o.y-=u.y+(t("quirks")?a.clientTop+a.offsetTop:0)}if(r){var l=s.docScroll(i.ownerDocument);o.x+=l.x,o.y+=l.y}return o},s.getMarginSize=function(t,e){t=n.byId(t);var r=s.getMarginExtents(t,e||i.getComputedStyle(t)),a=t.getBoundingClientRect();return{w:a.right-a.left+r.w,h:a.bottom-a.top+r.h}},s.normalizeEvent=function(e){if("layerX"in e||(e.layerX=e.offsetX,e.layerY=e.offsetY),!t("dom-addeventlistener")){var n=e.target,i=n&&n.ownerDocument||document,r=t("quirks")?i.body:i.documentElement,a=s.getIeDocumentElementOffset(i);e.pageX=e.clientX+s.fixIeBiDiScrollLeft(r.scrollLeft||0,i)-a.x,e.pageY=e.clientY+(r.scrollTop||0)-a.y}},s}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[e,n(5),n(10),n(2),n(7),n(23),n(11),n(78)],r=function(t,e,n,i,r,a,o,s){var u={},l=0,c=e._scopeName+"attrid";t.names={class:"className",for:"htmlFor",tabindex:"tabIndex",readonly:"readOnly",colspan:"colSpan",frameborder:"frameBorder",rowspan:"rowSpan",valuetype:"valueType"},t.get=function(e,n){e=r.byId(e);var i=n.toLowerCase(),a=t.names[i]||n;return e[a]},t.set=function(e,d,h){e=r.byId(e);var f=arguments.length;if(2==f&&"string"!=typeof d){for(var p in d)t.set(e,p,d[p]);return e}var v=d.toLowerCase(),m=t.names[v]||d;if("style"==m&&"string"!=typeof h)return a.set(e,h),e;if("innerHTML"==m)return n("ie")&&e.tagName.toLowerCase()in{col:1,colgroup:1,table:1,tbody:1,tfoot:1,thead:1,tr:1,title:1}?(o.empty(e),e.appendChild(o.toDom(h,e.ownerDocument))):e[m]=h,e;if(i.isFunction(h)){var g=e[c];g||(g=l++,e[c]=g),u[g]||(u[g]={});var y=u[g][m];if(y)s.disconnect(y);else try{delete e[m]}catch(t){}return h?u[g][m]=s.connect(e,m,h):e[m]=null,e}return e[m]=h,e}}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(36),n(35)],r=function(t,e){return t("RequestTimeoutError",null,e,{dojoType:"timeout"})}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(4)],__WEBPACK_AMD_DEFINE_RESULT__=function(has){"use strict";var hasJSON="undefined"!=typeof JSON;if(has.add("json-parse",hasJSON),has.add("json-stringify",hasJSON&&'{"a":1}'==JSON.stringify({a:0},function(t,e){return e||1})),has("json-stringify"))return JSON;var escapeString=function(t){return('"'+t.replace(/(["\\])/g,"\\$1")+'"').replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")};return{parse:has("json-parse")?JSON.parse:function(str,strict){if(strict&&!/^([\s\[\{]*(?:"(?:\\.|[^"])*"|-?\d[\d\.]*(?:[Ee][+-]?\d+)?|null|true|false|)[\s\]\}]*(?:,|:|$))+$/.test(str))throw new SyntaxError("Invalid characters in JSON");return eval("("+str+")")},stringify:function(t,e,n){function i(t,a,o){e&&(t=e(o,t));var s,u=typeof t;if("number"==u)return isFinite(t)?t+"":"null";if("boolean"==u)return t+"";if(null===t)return"null";if("string"==typeof t)return escapeString(t);if("function"==u||"undefined"==u)return r;if("function"==typeof t.toJSON)return i(t.toJSON(o),a,o);if(t instanceof Date)return'"{FullYear}-{Month+}-{Date}T{Hours}:{Minutes}:{Seconds}Z"'.replace(/\{(\w+)(\+)?\}/g,function(e,n,i){var r=t["getUTC"+n]()+(i?1:0);return r<10?"0"+r:r});if(t.valueOf()!==t)return i(t.valueOf(),a,o);var l=n?a+n:"",c=n?" ":"",d=n?"\n":"";if(t instanceof Array){var h=t.length,f=[];for(o=0;o<h;o++){var p=t[o];s=i(p,l,o),"string"!=typeof s&&(s="null"),f.push(d+l+s)}return"["+f.join(",")+d+a+"]"}var v=[];for(o in t){var m;if(t.hasOwnProperty(o)){if("number"==typeof o)m='"'+o+'"';else{if("string"!=typeof o)continue;m=escapeString(o)}if(s=i(t[o],l,o),"string"!=typeof s)continue;v.push(d+l+m+":"+c+s)}}return"{"+v.join(",")+d+a+"}"}var r;return"string"==typeof e&&(n=e,e=null),i(t,"","")}}}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},function(t,e,n){var i,r;i=[n(5),n(10)],r=function(t,e){return t.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:e("webkit")?91:224,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,NUMPAD_MINUS:109,NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,UP_DPAD:175,DOWN_DPAD:176,LEFT_DPAD:177,RIGHT_DPAD:178,copyKey:e("mac")&&!e("air")?e("safari")?91:224:17}}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(5),n(3),n(4),n(7),n(17)],r=function(t,e,n,i,r){function a(t,n){var r=function(r,a){return e(r,t,function(t){return n?n(t,a):i.isDescendant(t.relatedTarget,r)?void 0:a.call(this,t)})};return r.bubble=function(e){return a(t,function(t,n){var i=e(t.target),r=t.relatedTarget;if(i&&i!=(r&&1==r.nodeType&&e(r)))return n.call(i,t)})},r}n.add("dom-quirks",r.doc&&"BackCompat"==r.doc.compatMode),n.add("events-mouseenter",r.doc&&"onmouseenter"in r.doc.createElement("div")),n.add("events-mousewheel",r.doc&&"onmousewheel"in r.doc);var o;o=n("dom-quirks")&&n("ie")||!n("dom-addeventlistener")?{LEFT:1,MIDDLE:4,RIGHT:2,isButton:function(t,e){return t.button&e},isLeft:function(t){return 1&t.button},isMiddle:function(t){return 4&t.button},isRight:function(t){return 2&t.button}}:{LEFT:0,MIDDLE:1,RIGHT:2,isButton:function(t,e){return t.button==e},isLeft:function(t){return 0==t.button},isMiddle:function(t){return 1==t.button},isRight:function(t){return 2==t.button}},t.mouseButtons=o;var s;return s=n("events-mousewheel")?"mousewheel":function(t,n){return e(t,"DOMMouseScroll",function(t){t.wheelDelta=-t.detail,n.call(this,t)})},{_eventHandler:a,enter:a("mouseover"),leave:a("mouseout"),wheel:s,isLeft:o.isLeft,isMiddle:o.isMiddle,isRight:o.isRight}}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(5),n(4),n(7),n(3),n(6),n(2),n(57),n(92)],r=function(t,e,n,i,r,a,o,s){"use strict";function u(t,e){var i=function(i,r){if("string"==typeof r&&(r=n.byId(r),!r))return new e([]);var a="string"==typeof i?t(i,r):i?i.end&&i.on?i:[i]:[];return a.end&&a.on?a:new e(a)};if(i.matches=t.match||function(t,e,n){return i.filter([t],e,n).length>0},i.filter=t.filter||function(t,e,n){return i(e,n).filter(function(e){return r.indexOf(t,e)>-1})},"function"!=typeof t){var a=t.search;t=function(t,e){return a(e||document,t)}}return i}e.add("array-extensible",function(){return 1==a.delegate([],{length:1}).length&&!e("bug-for-in-skips-shadowed")});var l=Array.prototype,c=l.slice,d=l.concat,h=r.forEach,f=function(t,e,n){var i=new(n||this._NodeListCtor||E)(t);return e?i._stash(e):i},p=function(e,n,i){return n=[0].concat(c.call(n,0)),i=i||t.global,function(t){return n[0]=t,e.apply(i,n)}},v=function(t,e){return function(){return this.forEach(p(t,arguments,e)),this}},m=function(t,e){return function(){return this.map(p(t,arguments,e))}},g=function(t,e){return function(){return this.filter(p(t,arguments,e))}},y=function(e,n,i){return function(){var r=arguments,a=p(e,r,i);return n.call(i||t.global,r)?this.map(a):(this.forEach(a),this)}},_=function(t){var n=this instanceof E&&e("array-extensible");"number"==typeof t&&(t=Array(t));var i=t&&"length"in t?t:arguments;if(n||!i.sort){for(var r=n?this:[],o=r.length=i.length,s=0;s<o;s++)r[s]=i[s];if(n)return r;i=r}return a._mixin(i,A),i._NodeListCtor=function(t){return E(t)},i},E=_,A=E.prototype=e("array-extensible")?[]:{};E._wrap=A._wrap=f,E._adaptAsMap=m,E._adaptAsForEach=v,E._adaptAsFilter=g,E._adaptWithCondition=y,h(["slice","splice"],function(t){var e=l[t];A[t]=function(){return this._wrap(e.apply(this,arguments),"slice"==t?this:null)}}),h(["indexOf","lastIndexOf","every","some"],function(e){var n=r[e];A[e]=function(){return n.apply(t,[this].concat(c.call(arguments,0)))}}),a.extend(_,{constructor:E,_NodeListCtor:E,toString:function(){return this.join(",")},_stash:function(t){return this._parent=t,this},on:function(t,e){var n=this.map(function(n){return i(n,t,e)});return n.remove=function(){for(var t=0;t<n.length;t++)n[t].remove()},n},end:function(){return this._parent?this._parent:new this._NodeListCtor(0)},concat:function(t){var e=c.call(this,0),n=r.map(arguments,function(t){return c.call(t,0)});return this._wrap(d.apply(e,n),this)},map:function(t,e){return this._wrap(r.map(this,t,e),this)},forEach:function(t,e){return h(this,t,e),this},filter:function(t){var e=arguments,n=this,i=0;if("string"==typeof t){if(n=b._filterResult(this,e[0]),1==e.length)return n._stash(this);i=1}return this._wrap(r.filter(n,e[i],e[i+1]),this)},instantiate:function(t,e){var n=a.isFunction(t)?t:a.getObject(t);return e=e||{},this.forEach(function(t){new n(e,t)})},at:function(){var t=new this._NodeListCtor(0);return h(arguments,function(e){e<0&&(e=this.length+e),this[e]&&t.push(this[e])},this),t._stash(this)}});var b=u(s,_);return t.query=u(s,function(t){return _(t)}),b.load=function(t,e,n){o.load(t,e,function(t){n(u(t,_))})},t._filterQueryResult=b._filterResult=function(t,e,n){return new _(b.filter(t,e,n))},t.NodeList=b.NodeList=_,b}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(5),n(2)],r=function(t,e){var n={};return e.setObject("dojo.regexp",n),n.escapeString=function(t,e){return t.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(t){return e&&e.indexOf(t)!=-1?t:"\\"+t})},n.buildGroupRE=function(t,e,i){if(!(t instanceof Array))return e(t);for(var r=[],a=0;a<t.length;a++)r.push(e(t[a]));return n.group(r.join("|"),i)},n.group=function(t,e){return"("+(e?"?:":"")+t+")"},n}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(85),n(5),n(6),n(4),n(57)],r=function(t,e,n,i){function r(t){var e=s[t.options.handleAs];return t.data=e?e(t):t.data||t.text,t}i.add("activex","undefined"!=typeof ActiveXObject),i.add("dom-parser",function(t){return"DOMParser"in t});var a;if(i("activex")){var o=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","MSXML.DOMDocument"];a=function(t){var e=t.data;if(e&&i("dom-qsa2.1")&&!e.querySelectorAll&&i("dom-parser")&&(e=(new DOMParser).parseFromString(t.text,"application/xml")),!e||!e.documentElement){var r=t.text;n.some(o,function(t){try{var n=new ActiveXObject(t);n.async=!1,n.loadXML(r),e=n}catch(t){return!1}return!0})}return e}}var s={javascript:function(t){return e.eval(t.text||"")},json:function(e){return t.parse(e.text||null)},xml:a};return r.register=function(t,e){s[t]=e},r}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(55),n(84),n(24),n(6),n(17),n(59)],r=function(t,e,n,i,r,a){function o(){for(var t,n=+new Date,i=0;i<l.length&&(t=l[i]);i++){var r=t.response,a=r.options;t.isCanceled&&t.isCanceled()||t.isValid&&!t.isValid(r)?(l.splice(i--,1),s._onAction&&s._onAction()):t.isReady&&t.isReady(r)?(l.splice(i--,1),t.handleResponse(r),s._onAction&&s._onAction()):t.startTime&&t.startTime+(a.timeout||0)<n&&(l.splice(i--,1),t.cancel(new e("Timeout exceeded",r)),s._onAction&&s._onAction())}s._onInFlight&&s._onInFlight(t),l.length||(clearInterval(u),u=null)}function s(t){t.response.options.timeout&&(t.startTime=+new Date),t.isFulfilled()||(l.push(t),u||(u=setInterval(o,50)),t.response.options.sync&&o())}var u=null,l=[];return s.cancelAll=function(){try{i.forEach(l,function(t){try{t.cancel(new n("All requests canceled."))}catch(t){}})}catch(t){}},r&&a&&r.doc.attachEvent&&a(r.global,"unload",function(){s.cancelAll()}),s}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(4),n(5)],r=function(t,e){"use strict";var n=document.createElement("div"),i=n.matchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector,r=n.querySelectorAll,a=/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g;t.add("dom-matches-selector",!!i),t.add("dom-qsa",!!r);var o=function(t,n){if(l&&t.indexOf(",")>-1)return l(t,n);var i=n?n.ownerDocument||n:e.doc||document,a=(r?/^([\w]*)#([\w\-]+$)|^(\.)([\w\-\*]+$)|^(\w+$)/:/^([\w]*)#([\w\-]+)(?:\s+(.*))?$|(?:^|(>|.+\s+))([\w\-\*]+)(\S*$)/).exec(t);if(n=n||i,a){if(a[2]){var c=e.byId?e.byId(a[2],i):i.getElementById(a[2]);if(!c||a[1]&&a[1]!=c.tagName.toLowerCase())return[];if(n!=i)for(var d=c;d!=n;)if(d=d.parentNode,!d)return[];return a[3]?o(a[3],c):[c]}if(a[3]&&n.getElementsByClassName)return n.getElementsByClassName(a[4]);var c;if(a[5]){if(c=n.getElementsByTagName(a[5]),!a[4]&&!a[6])return c;t=(a[4]||"")+a[6]}}if(r)return 1===n.nodeType&&"object"!==n.nodeName.toLowerCase()?s(n,t,n.querySelectorAll):n.querySelectorAll(t);c||(c=n.getElementsByTagName("*"));for(var h=[],f=0,p=c.length;f<p;f++){var v=c[f];1==v.nodeType&&u(v,t,n)&&h.push(v)}return h},s=function(t,e,n){var i=t,r=t.getAttribute("id"),o=r||"__dojo__",s=t.parentNode,u=/^\s*[+~]/.test(e);if(u&&!s)return[];r?o=o.replace(/'/g,"\\$&"):t.setAttribute("id",o),u&&s&&(t=t.parentNode);for(var l=e.match(a),c=0;c<l.length;c++)l[c]="[id='"+o+"'] "+l[c];e=l.join(",");try{return n.call(t,e)}finally{r||i.removeAttribute("id")}};if(!t("dom-matches-selector"))var u=function(){function t(t,e,n){var i=e.charAt(0);'"'!=i&&"'"!=i||(e=e.slice(1,-1)),e=e.replace(/\\/g,"");var r=s[n||""];return function(n){var i=n.getAttribute(t);return i&&r(i,e)}}function e(t){return function(e,n){for(;(e=e.parentNode)!=n;)if(t(e,n))return!0}}function i(t){return function(e,n){return e=e.parentNode,t?e!=n&&t(e,n):e==n}}function r(t,e){return t?function(n,i){return e(n)&&t(n,i)}:e}var a="div"==n.tagName?"toLowerCase":"toUpperCase",o={"":function(t){return t=t[a](),function(e){return e.tagName==t}},".":function(t){var e=" "+t+" ";return function(n){return n.className.indexOf(t)>-1&&(" "+n.className+" ").indexOf(e)>-1}},"#":function(t){return function(e){return e.id==t}}},s={"^=":function(t,e){return 0==t.indexOf(e)},"*=":function(t,e){return t.indexOf(e)>-1},"$=":function(t,e){return t.substring(t.length-e.length,t.length)==e},"~=":function(t,e){return(" "+t+" ").indexOf(" "+e+" ")>-1},"|=":function(t,e){return 0==(t+"-").indexOf(e+"-")},"=":function(t,e){return t==e},"":function(t,e){return!0}},u={};return function(n,a,s){var l=u[a];if(!l){if(a.replace(/(?:\s*([> ])\s*)|(#|\.)?((?:\\.|[\w-])+)|\[\s*([\w-]+)\s*(.?=)?\s*("(?:\\.|[^"])+"|'(?:\\.|[^'])+'|(?:\\.|[^\]])*)\s*\]/g,function(n,a,s,u,c,d,h){return u?l=r(l,o[s||""](u.replace(/\\/g,""))):a?l=(" "==a?e:i)(l):c&&(l=r(l,t(c,h,d))),""}))throw new Error("Syntax error in query");if(!l)return!0;u[a]=l}return l(n,s)}}();if(!t("dom-qsa"))var l=function(t,e){for(var n=t.match(a),i=[],r=0;r<n.length;r++){t=new String(n[r].replace(/\s*$/,"")),t.indexOf=escape;for(var s=o(t,e),u=0,l=s.length;u<l;u++){var c=s[u];i[c.sourceIndex]=c}}var d=[];for(r in i)d.push(i[r]);return d};return o.match=i?function(t,e,n){return n&&9!=n.nodeType?s(n,e,function(e){return i.call(t,e)}):i.call(t,e)}:u,o}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(22),n(25)],r=function(t,e){"use strict";return function(n,i,r,a){var o=n&&"function"==typeof n.then,s=o&&n instanceof e;if(!o)return arguments.length>1?i?i(n):n:(new t).resolve(n);if(!s){var u=new t(n.cancel);n.then(u.resolve,u.reject,u.progress),n=u.promise}return i||r||a?n.then(i,r,a):n}}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e){t.exports={gettingStationInformation:"Obteniendo información de la estación...",paused:"Pausado",onAir:"En el aire",disconnected:"Desconectado",streamUnavailable:"Transmisión no disponible",buffering:"Buffering",connecting:"Conexión de transmisión en vivo en progreso...",reconnecting:"Conexión de transmisión en vivo en progreso...",seekfailed:"Operación imposible",seekinvalidtime:"Operación imposible: tiempo no válido",ended:"Terminado",pause:"Pausado",play:"En vivo",stop:"Desconectado",error:"Erro",streamGeoBlocked:"Lo sentimos, este contenido no está disponible en su área",stationNotFound:"No se encontró la estación",flashPluginOutOfDate:"Su versión Flash plugin detectada es obsoleta. La versión mínima requerida es: 10.2.0",browserNotSupported:"Su navegador no es compatible con la función HTML5"}},function(t,e){t.exports={gettingStationInformation:"Chargement des informations de la station...",paused:"En pause",onAir:"En ondes",disconnected:"Déconnecté",streamUnavailable:"Flux indisponible",buffering:"Mise en mémoire tampon",connecting:"Connexion en cours...",reconnecting:"Connexion en cours...",seekfailed:"Opération impossible",seekinvalidtime:"Opération impossible : temps invalide",ended:"Terminé",pause:"En pause",play:"En lecture",stop:"Déconnecté",error:"Erreur",streamGeoBlocked:"Désolé, ce flux n'est pas disponible dans votre région",stationNotFound:"Station inexistante",flashPluginOutOfDate:"La version de votre plugin Flash est obsolète. La version minimale requise est: 10.2.0",browserNotSupported:"Votre navigateur ne supporte pas HTML5"}},function(t,e){t.exports={gettingStationInformation:"Obtendo informações da estação...",paused:"Em Pausa",onAir:"No Ar",disconnected:"Desconectado",streamUnavailable:"Streaming não disponível",buffering:"Em Buffer",connecting:"Conexão com stream ao vivo em andamento...",reconnecting:"Conexão com stream ao vivo em andamento...",seekfailed:"Operação impossível",seekinvalidtime:"Operação impossível: hora inválida",ended:"Terminou",pause:"Pausa",play:"Tocando",stop:"Interrompido",error:"Erro",streamGeoBlocked:"Infelizmente, este conteúdo não está disponível na sua área",stationNotFound:"Estação não encontrada",flashPluginOutOfDate:"A versão detectada do seu plug-in Flash está desatualizada. A versão mínima necessária é: 10.2.0",browserNotSupported:"Seu navegador não oferece suporte para o recurso HTML5"}},function(t,e,n){!function(){var n={VERSION:"2.4.0",Result:{SUCCEEDED:1,NOTRANSITION:2,CANCELLED:3,PENDING:4},Error:{INVALID_TRANSITION:100,PENDING_TRANSITION:200,INVALID_CALLBACK:300},WILDCARD:"*",ASYNC:"async",create:function(t,e){var i="string"==typeof t.initial?{state:t.initial}:t.initial,r=t.terminal||t.final,a=e||t.target||{},o=t.events||[],s=t.callbacks||{},u={},l={},c=function(t){var e=Array.isArray(t.from)?t.from:t.from?[t.from]:[n.WILDCARD];u[t.name]=u[t.name]||{};for(var i=0;i<e.length;i++)l[e[i]]=l[e[i]]||[],l[e[i]].push(t.name),u[t.name][e[i]]=t.to||e[i];t.to&&(l[t.to]=l[t.to]||[])};i&&(i.event=i.event||"startup",c({name:i.event,from:"none",to:i.state}));for(var d=0;d<o.length;d++)c(o[d]);for(var h in u)u.hasOwnProperty(h)&&(a[h]=n.buildEvent(h,u[h]));for(var h in s)s.hasOwnProperty(h)&&(a[h]=s[h]);return a.current="none",a.is=function(t){return Array.isArray(t)?t.indexOf(this.current)>=0:this.current===t},a.can=function(t){return!this.transition&&void 0!==u[t]&&(u[t].hasOwnProperty(this.current)||u[t].hasOwnProperty(n.WILDCARD))},a.cannot=function(t){return!this.can(t)},a.transitions=function(){return(l[this.current]||[]).concat(l[n.WILDCARD]||[])},a.isFinished=function(){return this.is(r)},a.error=t.error||function(t,e,n,i,r,a,o){throw o||a},a.states=function(){return Object.keys(l).sort()},i&&!i.defer&&a[i.event](),a},doCallback:function(t,e,i,r,a,o){if(e)try{return e.apply(t,[i,r,a].concat(o))}catch(e){return t.error(i,r,a,o,n.Error.INVALID_CALLBACK,"an exception occurred in a caller-provided callback function",e)}},beforeAnyEvent:function(t,e,i,r,a){
return n.doCallback(t,t.onbeforeevent,e,i,r,a)},afterAnyEvent:function(t,e,i,r,a){return n.doCallback(t,t.onafterevent||t.onevent,e,i,r,a)},leaveAnyState:function(t,e,i,r,a){return n.doCallback(t,t.onleavestate,e,i,r,a)},enterAnyState:function(t,e,i,r,a){return n.doCallback(t,t.onenterstate||t.onstate,e,i,r,a)},changeState:function(t,e,i,r,a){return n.doCallback(t,t.onchangestate,e,i,r,a)},beforeThisEvent:function(t,e,i,r,a){return n.doCallback(t,t["onbefore"+e],e,i,r,a)},afterThisEvent:function(t,e,i,r,a){return n.doCallback(t,t["onafter"+e]||t["on"+e],e,i,r,a)},leaveThisState:function(t,e,i,r,a){return n.doCallback(t,t["onleave"+i],e,i,r,a)},enterThisState:function(t,e,i,r,a){return n.doCallback(t,t["onenter"+r]||t["on"+r],e,i,r,a)},beforeEvent:function(t,e,i,r,a){if(!1===n.beforeThisEvent(t,e,i,r,a)||!1===n.beforeAnyEvent(t,e,i,r,a))return!1},afterEvent:function(t,e,i,r,a){n.afterThisEvent(t,e,i,r,a),n.afterAnyEvent(t,e,i,r,a)},leaveState:function(t,e,i,r,a){var o=n.leaveThisState(t,e,i,r,a),s=n.leaveAnyState(t,e,i,r,a);return!1!==o&&!1!==s&&(n.ASYNC===o||n.ASYNC===s?n.ASYNC:void 0)},enterState:function(t,e,i,r,a){n.enterThisState(t,e,i,r,a),n.enterAnyState(t,e,i,r,a)},buildEvent:function(t,e){return function(){var i=this.current,r=e[i]||(e[n.WILDCARD]!=n.WILDCARD?e[n.WILDCARD]:i)||i,a=Array.prototype.slice.call(arguments);if(this.transition)return this.error(t,i,r,a,n.Error.PENDING_TRANSITION,"event "+t+" inappropriate because previous transition did not complete");if(this.cannot(t))return this.error(t,i,r,a,n.Error.INVALID_TRANSITION,"event "+t+" inappropriate in current state "+this.current);if(!1===n.beforeEvent(this,t,i,r,a))return n.Result.CANCELLED;if(i===r)return n.afterEvent(this,t,i,r,a),n.Result.NOTRANSITION;var o=this;this.transition=function(){return o.transition=null,o.current=r,n.enterState(o,t,i,r,a),n.changeState(o,t,i,r,a),n.afterEvent(o,t,i,r,a),n.Result.SUCCEEDED},this.transition.cancel=function(){o.transition=null,n.afterEvent(o,t,i,r,a)};var s=n.leaveState(this,t,i,r,a);return!1===s?(this.transition=null,n.Result.CANCELLED):n.ASYNC===s?n.Result.PENDING:this.transition?this.transition():void 0}}};"undefined"!=typeof t&&t.exports&&(e=t.exports=n),e.StateMachine=n}()},function(t,e,n){(function(e,n){/*!
	 *
	 * Copyright 2009-2017 Kris Kowal under the terms of the MIT
	 * license found at https://github.com/kriskowal/q/blob/v1/LICENSE
	 *
	 * With parts by Tyler Close
	 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
	 * at http://www.opensource.org/licenses/mit-license.html
	 * Forked at ref_send.js version: 2009-05-11
	 *
	 * With parts by Mark Miller
	 * Copyright (C) 2011 Google Inc.
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 *
	 */
!function(e){"use strict";if("function"==typeof bootstrap)bootstrap("promise",e);else{t.exports=e()}}(function(){"use strict";function t(t){return function(){return X.apply(t,arguments)}}function i(t){return t===Object(t)}function r(t){return"[object StopIteration]"===rt(t)||t instanceof K}function a(t,e){if(V&&e.stack&&"object"==typeof t&&null!==t&&t.stack){for(var n=[],i=e;i;i=i.source)i.stack&&(!t.__minimumStackCounter__||t.__minimumStackCounter__>i.stackCounter)&&(et(t,"__minimumStackCounter__",{value:i.stackCounter,configurable:!0}),n.unshift(i.stack));n.unshift(t.stack);var r=n.join("\n"+at+"\n"),a=o(r);et(t,"stack",{value:a,configurable:!0})}}function o(t){for(var e=t.split("\n"),n=[],i=0;i<e.length;++i){var r=e[i];l(r)||s(r)||!r||n.push(r)}return n.join("\n")}function s(t){return t.indexOf("(module.js:")!==-1||t.indexOf("(node.js:")!==-1}function u(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(n)return[n[1],Number(n[2])];var i=/.*@(.+):(\d+)$/.exec(t);return i?[i[1],Number(i[2])]:void 0}function l(t){var e=u(t);if(!e)return!1;var n=e[0],i=e[1];return n===W&&i>=q&&i<=dt}function c(){if(V)try{throw new Error}catch(i){var t=i.stack.split("\n"),e=t[0].indexOf("@")>0?t[1]:t[2],n=u(e);if(!n)return;return W=n[0],n[1]}}function d(t,e,n){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e+" is deprecated, use "+n+" instead.",new Error("").stack),t.apply(t,arguments)}}function h(t){return t instanceof m?t:E(t)?I(t):R(t)}function f(){function t(t){e=t,h.longStackSupport&&V&&(a.source=t),$(n,function(e,n){h.nextTick(function(){t.promiseDispatch.apply(t,n)})},void 0),n=void 0,i=void 0}var e,n=[],i=[],r=tt(f.prototype),a=tt(m.prototype);if(a.promiseDispatch=function(t,r,a){var o=Q(arguments);n?(n.push(o),"when"===r&&a[1]&&i.push(a[1])):h.nextTick(function(){e.promiseDispatch.apply(e,o)})},a.valueOf=function(){if(n)return a;var t=y(e);return _(t)&&(e=t),t},a.inspect=function(){return e?e.inspect():{state:"pending"}},h.longStackSupport&&V)try{throw new Error}catch(t){a.stack=t.stack.substring(t.stack.indexOf("\n")+1),a.stackCounter=ot++}return r.promise=a,r.resolve=function(n){e||t(h(n))},r.fulfill=function(n){e||t(R(n))},r.reject=function(n){e||t(w(n))},r.notify=function(t){e||$(i,function(e,n){h.nextTick(function(){n(t)})},void 0)},r}function p(t){if("function"!=typeof t)throw new TypeError("resolver must be a function.");var e=f();try{t(e.resolve,e.reject,e.notify)}catch(t){e.reject(t)}return e.promise}function v(t){return p(function(e,n){for(var i=0,r=t.length;i<r;i++)h(t[i]).then(e,n)})}function m(t,e,n){void 0===e&&(e=function(t){return w(new Error("Promise does not support operation: "+t))}),void 0===n&&(n=function(){return{state:"unknown"}});var i=tt(m.prototype);if(i.promiseDispatch=function(n,r,a){var o;try{o=t[r]?t[r].apply(i,a):e.call(i,r,a)}catch(t){o=w(t)}n&&n(o)},i.inspect=n,n){var r=n();"rejected"===r.state&&(i.exception=r.reason),i.valueOf=function(){var t=n();return"pending"===t.state||"rejected"===t.state?i:t.value}}return i}function g(t,e,n,i){return h(t).then(e,n,i)}function y(t){if(_(t)){var e=t.inspect();if("fulfilled"===e.state)return e.value}return t}function _(t){return t instanceof m}function E(t){return i(t)&&"function"==typeof t.then}function A(t){return _(t)&&"pending"===t.inspect().state}function b(t){return!_(t)||"fulfilled"===t.inspect().state}function T(t){return _(t)&&"rejected"===t.inspect().state}function S(){st.length=0,ut.length=0,ct||(ct=!0)}function k(t,n){ct&&("object"==typeof e&&"function"==typeof e.emit&&h.nextTick.runAfter(function(){J(ut,t)!==-1&&(e.emit("unhandledRejection",n,t),lt.push(t))}),ut.push(t),n&&"undefined"!=typeof n.stack?st.push(n.stack):st.push("(no stack) "+n))}function C(t){if(ct){var n=J(ut,t);n!==-1&&("object"==typeof e&&"function"==typeof e.emit&&h.nextTick.runAfter(function(){var i=J(lt,t);i!==-1&&(e.emit("rejectionHandled",st[n],t),lt.splice(i,1))}),ut.splice(n,1),st.splice(n,1))}}function w(t){var e=m({when:function(e){return e&&C(this),e?e(t):this}},function(){return this},function(){return{state:"rejected",reason:t}});return k(e,t),e}function R(t){return m({when:function(){return t},get:function(e){return t[e]},set:function(e,n){t[e]=n},delete:function(e){delete t[e]},post:function(e,n){return null===e||void 0===e?t.apply(void 0,n):t[e].apply(t,n)},apply:function(e,n){return t.apply(e,n)},keys:function(){return it(t)}},void 0,function(){return{state:"fulfilled",value:t}})}function I(t){var e=f();return h.nextTick(function(){try{t.then(e.resolve,e.reject,e.notify)}catch(t){e.reject(t)}}),e.promise}function L(t){return m({isDef:function(){}},function(e,n){return x(t,e,n)},function(){return h(t).inspect()})}function D(t,e,n){return h(t).spread(e,n)}function P(t){return function(){function e(t,e){var o;if("undefined"==typeof StopIteration){try{o=n[t](e)}catch(t){return w(t)}return o.done?h(o.value):g(o.value,i,a)}try{o=n[t](e)}catch(t){return r(t)?h(t.value):w(t)}return g(o,i,a)}var n=t.apply(this,arguments),i=e.bind(e,"next"),a=e.bind(e,"throw");return i()}}function O(t){h.done(h.async(t)())}function M(t){throw new K(t)}function N(t){return function(){return D([this,F(arguments)],function(e,n){return t.apply(e,n)})}}function x(t,e,n){return h(t).dispatch(e,n)}function F(t){return g(t,function(t){var e=0,n=f();return $(t,function(i,r,a){var o;_(r)&&"fulfilled"===(o=r.inspect()).state?t[a]=o.value:(++e,g(r,function(i){t[a]=i,0===--e&&n.resolve(t)},n.reject,function(t){n.notify({index:a,value:t})}))},void 0),0===e&&n.resolve(t),n.promise})}function U(t){if(0===t.length)return h.resolve();var e=h.defer(),n=0;return $(t,function(i,r,a){function o(t){e.resolve(t)}function s(t){if(n--,0===n){var i=t||new Error(""+t);i.message="Q can't get fulfillment value from any promise, all promises were rejected. Last error message: "+i.message,e.reject(i)}}function u(t){e.notify({index:a,value:t})}var l=t[a];n++,g(l,o,s,u)},void 0),e.promise}function B(t){return g(t,function(t){return t=Z(t,h),g(F(Z(t,function(t){return g(t,Y,Y)})),function(){return t})})}function G(t){return h(t).allSettled()}function j(t,e){return h(t).then(void 0,void 0,e)}function H(t,e){return h(t).nodeify(e)}var V=!1;try{throw new Error}catch(t){V=!!t.stack}var W,K,q=c(),Y=function(){},z=function(){function t(){for(var t,e;r.next;)r=r.next,t=r.task,r.task=void 0,e=r.domain,e&&(r.domain=void 0,e.enter()),i(t,e);for(;l.length;)t=l.pop(),i(t);o=!1}function i(e,n){try{e()}catch(e){if(u)throw n&&n.exit(),setTimeout(t,0),n&&n.enter(),e;setTimeout(function(){throw e},0)}n&&n.exit()}var r={task:void 0,next:null},a=r,o=!1,s=void 0,u=!1,l=[];if(z=function(t){a=a.next={task:t,domain:u&&e.domain,next:null},o||(o=!0,s())},"object"==typeof e&&"[object process]"===e.toString()&&e.nextTick)u=!0,s=function(){e.nextTick(t)};else if("function"==typeof n)s="undefined"!=typeof window?n.bind(window,t):function(){n(t)};else if("undefined"!=typeof MessageChannel){var c=new MessageChannel;c.port1.onmessage=function(){s=d,c.port1.onmessage=t,t()};var d=function(){c.port2.postMessage(0)};s=function(){setTimeout(t,0),d()}}else s=function(){setTimeout(t,0)};return z.runAfter=function(t){l.push(t),o||(o=!0,s())},z}(),X=Function.call,Q=t(Array.prototype.slice),$=t(Array.prototype.reduce||function(t,e){var n=0,i=this.length;if(1===arguments.length)for(;;){if(n in this){e=this[n++];break}if(++n>=i)throw new TypeError}for(;n<i;n++)n in this&&(e=t(e,this[n],n));return e}),J=t(Array.prototype.indexOf||function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return e;return-1}),Z=t(Array.prototype.map||function(t,e){var n=this,i=[];return $(n,function(r,a,o){i.push(t.call(e,a,o,n))},void 0),i}),tt=Object.create||function(t){function e(){}return e.prototype=t,new e},et=Object.defineProperty||function(t,e,n){return t[e]=n.value,t},nt=t(Object.prototype.hasOwnProperty),it=Object.keys||function(t){var e=[];for(var n in t)nt(t,n)&&e.push(n);return e},rt=t(Object.prototype.toString);K="undefined"!=typeof ReturnValue?ReturnValue:function(t){this.value=t};var at="From previous event:";h.resolve=h,h.nextTick=z,h.longStackSupport=!1;var ot=1;"object"==typeof e&&e&&e.env&&e.env.Q_DEBUG&&(h.longStackSupport=!0),h.defer=f,f.prototype.makeNodeResolver=function(){var t=this;return function(e,n){e?t.reject(e):arguments.length>2?t.resolve(Q(arguments,1)):t.resolve(n)}},h.Promise=p,h.promise=p,p.race=v,p.all=F,p.reject=w,p.resolve=h,h.passByCopy=function(t){return t},m.prototype.passByCopy=function(){return this},h.join=function(t,e){return h(t).join(e)},m.prototype.join=function(t){return h([this,t]).spread(function(t,e){if(t===e)return t;throw new Error("Q can't join: not the same: "+t+" "+e)})},h.race=v,m.prototype.race=function(){return this.then(h.race)},h.makePromise=m,m.prototype.toString=function(){return"[object Promise]"},m.prototype.then=function(t,e,n){function i(e){try{return"function"==typeof t?t(e):e}catch(t){return w(t)}}function r(t){if("function"==typeof e){a(t,s);try{return e(t)}catch(t){return w(t)}}return w(t)}function o(t){return"function"==typeof n?n(t):t}var s=this,u=f(),l=!1;return h.nextTick(function(){s.promiseDispatch(function(t){l||(l=!0,u.resolve(i(t)))},"when",[function(t){l||(l=!0,u.resolve(r(t)))}])}),s.promiseDispatch(void 0,"when",[void 0,function(t){var e,n=!1;try{e=o(t)}catch(t){if(n=!0,!h.onerror)throw t;h.onerror(t)}n||u.notify(e)}]),u.promise},h.tap=function(t,e){return h(t).tap(e)},m.prototype.tap=function(t){return t=h(t),this.then(function(e){return t.fcall(e).thenResolve(e)})},h.when=g,m.prototype.thenResolve=function(t){return this.then(function(){return t})},h.thenResolve=function(t,e){return h(t).thenResolve(e)},m.prototype.thenReject=function(t){return this.then(function(){throw t})},h.thenReject=function(t,e){return h(t).thenReject(e)},h.nearer=y,h.isPromise=_,h.isPromiseAlike=E,h.isPending=A,m.prototype.isPending=function(){return"pending"===this.inspect().state},h.isFulfilled=b,m.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},h.isRejected=T,m.prototype.isRejected=function(){return"rejected"===this.inspect().state};var st=[],ut=[],lt=[],ct=!0;h.resetUnhandledRejections=S,h.getUnhandledReasons=function(){return st.slice()},h.stopUnhandledRejectionTracking=function(){S(),ct=!1},S(),h.reject=w,h.fulfill=R,h.master=L,h.spread=D,m.prototype.spread=function(t,e){return this.all().then(function(e){return t.apply(void 0,e)},e)},h.async=P,h.spawn=O,h.return=M,h.promised=N,h.dispatch=x,m.prototype.dispatch=function(t,e){var n=this,i=f();return h.nextTick(function(){n.promiseDispatch(i.resolve,t,e)}),i.promise},h.get=function(t,e){return h(t).dispatch("get",[e])},m.prototype.get=function(t){return this.dispatch("get",[t])},h.set=function(t,e,n){return h(t).dispatch("set",[e,n])},m.prototype.set=function(t,e){return this.dispatch("set",[t,e])},h.del=h.delete=function(t,e){return h(t).dispatch("delete",[e])},m.prototype.del=m.prototype.delete=function(t){return this.dispatch("delete",[t])},h.mapply=h.post=function(t,e,n){return h(t).dispatch("post",[e,n])},m.prototype.mapply=m.prototype.post=function(t,e){return this.dispatch("post",[t,e])},h.send=h.mcall=h.invoke=function(t,e){return h(t).dispatch("post",[e,Q(arguments,2)])},m.prototype.send=m.prototype.mcall=m.prototype.invoke=function(t){return this.dispatch("post",[t,Q(arguments,1)])},h.fapply=function(t,e){return h(t).dispatch("apply",[void 0,e])},m.prototype.fapply=function(t){return this.dispatch("apply",[void 0,t])},h.try=h.fcall=function(t){return h(t).dispatch("apply",[void 0,Q(arguments,1)])},m.prototype.fcall=function(){return this.dispatch("apply",[void 0,Q(arguments)])},h.fbind=function(t){var e=h(t),n=Q(arguments,1);return function(){return e.dispatch("apply",[this,n.concat(Q(arguments))])}},m.prototype.fbind=function(){var t=this,e=Q(arguments);return function(){return t.dispatch("apply",[this,e.concat(Q(arguments))])}},h.keys=function(t){return h(t).dispatch("keys",[])},m.prototype.keys=function(){return this.dispatch("keys",[])},h.all=F,m.prototype.all=function(){return F(this)},h.any=U,m.prototype.any=function(){return U(this)},h.allResolved=d(B,"allResolved","allSettled"),m.prototype.allResolved=function(){return B(this)},h.allSettled=G,m.prototype.allSettled=function(){return this.then(function(t){return F(Z(t,function(t){function e(){return t.inspect()}return t=h(t),t.then(e,e)}))})},h.fail=h.catch=function(t,e){return h(t).then(void 0,e)},m.prototype.fail=m.prototype.catch=function(t){return this.then(void 0,t)},h.progress=j,m.prototype.progress=function(t){return this.then(void 0,void 0,t)},h.fin=h.finally=function(t,e){return h(t).finally(e)},m.prototype.fin=m.prototype.finally=function(t){if(!t||"function"!=typeof t.apply)throw new Error("Q can't apply finally callback");return t=h(t),this.then(function(e){return t.fcall().then(function(){return e})},function(e){return t.fcall().then(function(){throw e})})},h.done=function(t,e,n,i){return h(t).done(e,n,i)},m.prototype.done=function(t,n,i){var r=function(t){h.nextTick(function(){if(a(t,o),!h.onerror)throw t;h.onerror(t)})},o=t||n||i?this.then(t,n,i):this;"object"==typeof e&&e&&e.domain&&(r=e.domain.bind(r)),o.then(void 0,r)},h.timeout=function(t,e,n){return h(t).timeout(e,n)},m.prototype.timeout=function(t,e){var n=f(),i=setTimeout(function(){e&&"string"!=typeof e||(e=new Error(e||"Timed out after "+t+" ms"),e.code="ETIMEDOUT"),n.reject(e)},t);return this.then(function(t){clearTimeout(i),n.resolve(t)},function(t){clearTimeout(i),n.reject(t)},n.notify),n.promise},h.delay=function(t,e){return void 0===e&&(e=t,t=void 0),h(t).delay(e)},m.prototype.delay=function(t){return this.then(function(e){var n=f();return setTimeout(function(){n.resolve(e)},t),n.promise})},h.nfapply=function(t,e){return h(t).nfapply(e)},m.prototype.nfapply=function(t){var e=f(),n=Q(t);return n.push(e.makeNodeResolver()),this.fapply(n).fail(e.reject),e.promise},h.nfcall=function(t){var e=Q(arguments,1);return h(t).nfapply(e)},m.prototype.nfcall=function(){var t=Q(arguments),e=f();return t.push(e.makeNodeResolver()),this.fapply(t).fail(e.reject),e.promise},h.nfbind=h.denodeify=function(t){if(void 0===t)throw new Error("Q can't wrap an undefined function");var e=Q(arguments,1);return function(){var n=e.concat(Q(arguments)),i=f();return n.push(i.makeNodeResolver()),h(t).fapply(n).fail(i.reject),i.promise}},m.prototype.nfbind=m.prototype.denodeify=function(){var t=Q(arguments);return t.unshift(this),h.denodeify.apply(void 0,t)},h.nbind=function(t,e){var n=Q(arguments,2);return function(){function i(){return t.apply(e,arguments)}var r=n.concat(Q(arguments)),a=f();return r.push(a.makeNodeResolver()),h(i).fapply(r).fail(a.reject),a.promise}},m.prototype.nbind=function(){var t=Q(arguments,0);return t.unshift(this),h.nbind.apply(void 0,t)},h.nmapply=h.npost=function(t,e,n){return h(t).npost(e,n)},m.prototype.nmapply=m.prototype.npost=function(t,e){var n=Q(e||[]),i=f();return n.push(i.makeNodeResolver()),this.dispatch("post",[t,n]).fail(i.reject),i.promise},h.nsend=h.nmcall=h.ninvoke=function(t,e){var n=Q(arguments,2),i=f();return n.push(i.makeNodeResolver()),h(t).dispatch("post",[e,n]).fail(i.reject),i.promise},m.prototype.nsend=m.prototype.nmcall=m.prototype.ninvoke=function(t){var e=Q(arguments,1),n=f();return e.push(n.makeNodeResolver()),this.dispatch("post",[t,e]).fail(n.reject),n.promise},h.nodeify=H,m.prototype.nodeify=function(t){return t?void this.then(function(e){h.nextTick(function(){t(null,e)})},function(e){h.nextTick(function(){t(e)})}):this},h.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var dt=c();return h})}).call(e,n(60),n(101).setImmediate)},function(t,e,n){var i,r;/*!
	  * $script.js JS loader & dependency manager
	  * https://github.com/ded/script.js
	  * (c) Dustin Diaz 2014 | License MIT
	  */
!function(a,o){"undefined"!=typeof t&&t.exports?t.exports=o():(i=o,r="function"==typeof i?i.call(e,n,e,t):i,!(void 0!==r&&(t.exports=r)))}("$script",function(){function t(t,e){for(var n=0,i=t.length;n<i;++n)if(!e(t[n]))return u;return 1}function e(e,n){t(e,function(t){return!n(t)})}function n(a,o,s){function u(t){return t.call?t():h[t]}function c(){if(!--y){h[g]=1,m&&m();for(var n in p)t(n.split("|"),u)&&!e(p[n],u)&&(p[n]=[])}}a=a[l]?a:[a];var d=o&&o.call,m=d?o:s,g=d?a.join(""):o,y=a.length;return setTimeout(function(){e(a,function t(e,n){return null===e?c():(n||/^https?:\/\//.test(e)||!r||(e=e.indexOf(".js")===-1?r+e+".js":r+e),v[e]?(g&&(f[g]=1),2==v[e]?c():setTimeout(function(){t(e,!0)},0)):(v[e]=1,g&&(f[g]=1),void i(e,c)))})},0),n}function i(t,e){var n,i=o.createElement("script");i.onload=i.onerror=i[d]=function(){i[c]&&!/^c|loade/.test(i[c])||n||(i.onload=i[d]=null,n=1,v[t]=2,e())},i.async=1,i.src=a?t+(t.indexOf("?")===-1?"?":"&")+a:t,s.insertBefore(i,s.lastChild)}var r,a,o=document,s=o.getElementsByTagName("head")[0],u=!1,l="push",c="readyState",d="onreadystatechange",h={},f={},p={},v={};return n.get=i,n.order=function(t,e,i){!function r(a){a=t.shift(),t.length?n(a,r):n(a,e,i)}()},n.path=function(t){r=t},n.urlArgs=function(t){a=t},n.ready=function(i,r,a){i=i[l]?i:[i];var o=[];return!e(i,function(t){h[t]||o[l](t)})&&t(i,function(t){return h[t]})?r():!function(t){p[t]=p[t]||[],p[t][l](r),a&&a(o)}(i.join("|")),n},n.done=function(t){n([null],t)},n})},function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function r(t){return"number"==typeof t}function a(t){return"object"==typeof t&&null!==t}function o(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!r(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,r,s,u,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;var c=new Error('Uncaught, unspecified "error" event. ('+e+")");throw c.context=e,c}if(n=this._events[t],o(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(a(n))for(s=Array.prototype.slice.call(arguments,1),l=n.slice(),r=l.length,u=0;u<r;u++)l[u].apply(this,s);return!0},n.prototype.addListener=function(t,e){var r;if(!i(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?a(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,a(this._events[t])&&!this._events[t].warned&&(r=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function n(){this.removeListener(t,n),r||(r=!0,e.apply(this,arguments))}if(!i(e))throw TypeError("listener must be a function");var r=!1;return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var n,r,o,s;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],o=n.length,r=-1,n===e||i(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(a(n)){for(s=o;s-- >0;)if(n[s]===e||n[s].listener&&n[s].listener===e){r=s;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],i(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(i(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,n){function i(t,e){this._id=t,this._clearFn=e}var r=Function.prototype.apply;e.setTimeout=function(){return new i(r.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new i(r.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(102),e.setImmediate=setImmediate,e.clearImmediate=clearImmediate},function(t,e,n){(function(t,e){!function(t,n){"use strict";function i(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var i={callback:t,args:e};return v[p]=i,f(p),p++}function r(t){delete v[t]}function a(t){var e=t.callback,i=t.args;switch(i.length){case 0:e();break;case 1:e(i[0]);break;case 2:e(i[0],i[1]);break;case 3:e(i[0],i[1],i[2]);break;default:e.apply(n,i)}}function o(t){if(m)setTimeout(o,0,t);else{var e=v[t];if(e){m=!0;try{a(e)}finally{r(t),m=!1}}}}function s(){f=function(t){e.nextTick(function(){o(t)})}}function u(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}function l(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(e)&&o(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),f=function(n){t.postMessage(e+n,"*")}}function c(){var t=new MessageChannel;t.port1.onmessage=function(t){var e=t.data;o(e)},f=function(e){t.port2.postMessage(e)}}function d(){var t=g.documentElement;f=function(e){var n=g.createElement("script");n.onreadystatechange=function(){o(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}function h(){f=function(t){setTimeout(o,0,t)}}if(!t.setImmediate){var f,p=1,v={},m=!1,g=t.document,y=Object.getPrototypeOf&&Object.getPrototypeOf(t);y=y&&y.setTimeout?y:t,"[object process]"==={}.toString.call(t.process)?s():u()?l():t.MessageChannel?c():g&&"onreadystatechange"in g.createElement("script")?d():h(),y.setImmediate=i,y.clearImmediate=r}}("undefined"==typeof self?"undefined"==typeof t?this:t:self)}).call(e,function(){return this}(),n(60))},function(t,e,n){!function(t,n){n(e)}(this,function(t){"use strict";function e(t){return t&&DataView.prototype.isPrototypeOf(t)}function n(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function i(t){return"string"!=typeof t&&(t=String(t)),t}function r(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return _.iterable&&(e[Symbol.iterator]=function(){return e}),e}function a(t){this.map={},t instanceof a?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function o(t){return t.bodyUsed?Promise.reject(new TypeError("Already read")):void(t.bodyUsed=!0)}function s(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function u(t){var e=new FileReader,n=s(e);return e.readAsArrayBuffer(t),n}function l(t){var e=new FileReader,n=s(e);return e.readAsText(t),n}function c(t){for(var e=new Uint8Array(t),n=new Array(e.length),i=0;i<e.length;i++)n[i]=String.fromCharCode(e[i]);return n.join("")}function d(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function h(){return this.bodyUsed=!1,this._initBody=function(t){this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:_.blob&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:_.formData&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:_.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():_.arrayBuffer&&_.blob&&e(t)?(this._bodyArrayBuffer=d(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):_.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||A(t))?this._bodyArrayBuffer=d(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):_.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},_.blob&&(this.blob=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(u)}),this.text=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return l(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(c(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},_.formData&&(this.formData=function(){return this.text().then(v)}),this.json=function(){return this.text().then(JSON.parse)},this}function f(t){var e=t.toUpperCase();return b.indexOf(e)>-1?e:t}function p(t,e){e=e||{};var n=e.body;if(t instanceof p){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new a(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,n||null==t._bodyInit||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new a(e.headers)),this.method=f(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function v(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),i=n.shift().replace(/\+/g," "),r=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(i),decodeURIComponent(r))}}),e}function m(t){var e=new a,n=t.replace(/\r?\n[\t ]+/g," ");return n.split(/\r?\n/).forEach(function(t){var n=t.split(":"),i=n.shift().trim();if(i){var r=n.join(":").trim();e.append(i,r)}}),e}function g(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new a(e.headers),this.url=e.url||"",this._initBody(t)}function y(e,n){return new Promise(function(i,r){function a(){s.abort()}var o=new p(e,n);if(o.signal&&o.signal.aborted)return r(new t.DOMException("Aborted","AbortError"));var s=new XMLHttpRequest;s.onload=function(){var t={status:s.status,statusText:s.statusText,headers:m(s.getAllResponseHeaders()||"")};t.url="responseURL"in s?s.responseURL:t.headers.get("X-Request-URL");var e="response"in s?s.response:s.responseText;i(new g(e,t))},s.onerror=function(){r(new TypeError("Network request failed"))},s.ontimeout=function(){r(new TypeError("Network request failed"))},s.onabort=function(){r(new t.DOMException("Aborted","AbortError"))},s.open(o.method,o.url,!0),"include"===o.credentials?s.withCredentials=!0:"omit"===o.credentials&&(s.withCredentials=!1),"responseType"in s&&_.blob&&(s.responseType="blob"),o.headers.forEach(function(t,e){s.setRequestHeader(e,t)}),o.signal&&(o.signal.addEventListener("abort",a),s.onreadystatechange=function(){4===s.readyState&&o.signal.removeEventListener("abort",a)}),s.send("undefined"==typeof o._bodyInit?null:o._bodyInit)})}var _={searchParams:"URLSearchParams"in self,iterable:"Symbol"in self&&"iterator"in Symbol,blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self};if(_.arrayBuffer)var E=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],A=ArrayBuffer.isView||function(t){return t&&E.indexOf(Object.prototype.toString.call(t))>-1};a.prototype.append=function(t,e){t=n(t),e=i(e);var r=this.map[t];this.map[t]=r?r+", "+e:e},a.prototype.delete=function(t){delete this.map[n(t)]},a.prototype.get=function(t){return t=n(t),this.has(t)?this.map[t]:null},a.prototype.has=function(t){return this.map.hasOwnProperty(n(t))},a.prototype.set=function(t,e){this.map[n(t)]=i(e)},a.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},a.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),r(t)},a.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),r(t)},a.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),r(t)},_.iterable&&(a.prototype[Symbol.iterator]=a.prototype.entries);var b=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];p.prototype.clone=function(){return new p(this,{body:this._bodyInit})},h.call(p.prototype),h.call(g.prototype),g.prototype.clone=function(){return new g(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new a(this.headers),url:this.url})},g.error=function(){var t=new g(null,{status:0,statusText:""});return t.type="error",t};var T=[301,302,303,307,308];g.redirect=function(t,e){if(T.indexOf(e)===-1)throw new RangeError("Invalid status code");return new g(null,{status:e,headers:{location:t}})},t.DOMException=self.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(t,e){this.message=t,this.name=e;var n=Error(t);this.stack=n.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}y.polyfill=!0,self.fetch||(self.fetch=y,self.Headers=a,self.Request=p,self.Response=g),t.Headers=a,t.Request=p,t.Response=g,t.fetch=y,Object.defineProperty(t,"__esModule",{value:!0})})},function(t,e,n){var i,r;i=[n(12),n(6),n(1),n(15),n(2),n(3),n(133),n(111),n(32),n(120),n(117),n(65),n(118),n(119),n(121),n(122)],r=function(t,e,n,i,r,a,o,s,u,l,c,d,h,f,p,v){var m=n([t],{constructor:function(t,e){this.coreModules=[],this.modulesQueue=this.config&&this.config.coreModules?r.clone(this.config.coreModules):[],this.moduleReadyHandler=a(this.target,"module-ready",r.hitch(this,this._onModuleComplete)),this.moduleErrorHandler=a(this.target,"module-error",r.hitch(this,this._onModuleComplete)),this.inherited(arguments),this.analyticsLoadTime=0,this.hasLoadModuleError=!1},loadModules:function(){var t=this;if(0!=this.modulesQueue.length){this.analyticsLoadTimeInterval=setInterval(function(){t.analyticsLoadTime+=10},10);for(var e=0;e<this.config.coreModules.length;e++)this.loadModule(this.config.coreModules[e].id,this._getModuleConfigById(this.config.coreModules[e].id))}},loadModule:function(t,e){var n=null;switch(t){case"SyncBanners":n=l;break;case"MediaPlayer":n=c;break;case"Npe":n=h;break;case"NowPlayingApi":n=d;break;case"PlayerWebAdmin":n=f;break;case"TargetSpot":n=p;break;case"UserRegistration":n=v}n&&this._instanciateCurrentModule(n,t,e)},getModuleById:function(t){var n=null;return e.forEach(this.coreModules,function(e,i){e.id==t&&(n=e.module)},this),n},_instanciateCurrentModule:function(t,e,n){var i=new t(n,this.target);this.coreModules.push({id:e,module:i}),i.start()},_removeCurrentModuleFromQueue:function(t){var n=-1;e.forEach(this.modulesQueue,function(e,i){e.id==t&&(n=i)},this),n>-1&&this.modulesQueue.splice(n,1)},_onModuleComplete:function(t){this._removeCurrentModuleFromQueue(t.data.id);var e,n,i=this;if(0==this.modulesQueue.length){if(this.moduleReadyHandler.remove(),this.moduleErrorHandler.remove(),this.getModuleById("UserRegistration")&&this.getModuleById("MediaPlayer")){new o(r.hitch(this,this.getModuleById),this.target)}var a=this.getModuleById("MediaPlayer"),l=function(t){a&&(e={},e[u.DIM_HLS]=!!a&&a.hls,e[u.DIM_SBM]=!a.config.sbm||!a.config.sbm.active||a.config.sbm.active,e[u.DIM_TECH]=a.tech.type,e[u.DIM_ADBLOCK]=i.config.adBlockerDetected,e[u.DIM_AUDIO_ADAPTIVE]=a.audioAdaptive,e[u.DIM_IDSYNC]=!!a.config.idSync,n={},n[u.METRIC_LOAD_TIME]=i.analyticsLoadTime,u.requestGA(u.CATEGORY_INIT,u.ACTION_CONFIG,t,e,n)),clearInterval(i.analyticsLoadTimeInterval)};if(void 0==a||"Html5"!=a.tech.type||this.config.adBlockerDetected)this.emit("player-ready"),l(a&&!this.hasLoadModuleError?u.LABEL_SUCCESS:u.LABEL_ERROR);else{var c=new s,d=c.init();d.then(function(){i.emit("player-ready"),l(this.hasLoadModuleError?u.LABEL_ERROR:u.LABEL_SUCCESS)},function(t){i.emit("player-ready"),l(this.hasLoadModuleError?u.LABEL_ERROR:u.LABEL_SUCCESS)})}this.config.adBlockerDetected&&this.emit("ad-blocker-detected",{message:"Ad Blocker is activated"})}},_getModuleConfigById:function(t){var n={};return this.config&&this.config.coreModules&&e.forEach(this.config.coreModules,function(e){e.id==t&&(n=e)},this),n}});return m}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1),n(3)],r=function(t,e){var n=t([],{AD_MODULE_PLAYBACK_START:"ad-module-playback-start",AD_MODULE_PLAYBACK_COMPLETE:"ad-module-playback-complete",AD_MODULE_PLAYBACK_DESTROY:"ad-module-playback-destroy",AD_MODULE_PLAYBACK_ERROR:"ad-module-playback-error",AD_MODULE_COUNTDOWN:"ad-module-countdown",AD_MODULE_MEDIA_READY:"ad-module-media-ready",AD_MODULE_MEDIA_EMPTY:"ad-module-media-empty",AD_MODULE_QUARTILE:"ad-module-quartile",AD_MODULE_COMPANIONS:"ad-module-companions",AD_MODULE_CLICK_TRACKING:"ad-module-click-tracking",AD_MODULE_VAST_ERROR:"ad-module-vast-error",AD_MODULE_VAST_EMPTY:"ad-module-vast-empty",AD_MODULE_VAST_PROCESS_COMPLETE:"ad-module-vast-process-complete",emit:function(t,n,i){i&&this.config.playerId!=i.id||e.emit(this.target,t,{data:n,bubbles:!0,cancelable:!0})}});return n}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1)],r=function(t){var e=t([],{quartileMap:["start","firstQuartile","midpoint","thirdQuartile","complete"],constructor:function(){},getQuartileByIndex:function(t){return this.quartileMap[t]},isValidType:function(t){for(var e=0;e<this.length();e++)if(this.quartileMap[e]==t)return!0;return!1},length:function(){return this.quartileMap.length}});return e}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[],r=function(){return["970x250","120x60","300x600","728x90","970x100","300x250","88x31","300x1050","970x90","180x150","320x480","300x50","320x50","300x300","970x66","160x600"]}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r,a=n(20),o=a.getProtocol();i=[n(1)],r=function(t){var e=t([],{ENDPOINT:o+"//{host}/ondemand/ars?type={type}",getVastUri:function(t){if(void 0==t.host||void 0==t.type||void 0==t.stationName&&void 0==t.stationId)return null;var e=this.ENDPOINT;return e=e.replace("{host}",t.host),e=e.replace("{type}",t.type),void 0!=t.format&&(e=e+"&fmt="+t.format),void 0!=t.stationName?e=e+"&stn="+t.stationName:void 0!=t.stationId&&(e=e+"&stid="+parseInt(t.stationId)),void 0!=t.maxAds&&(e=e+"&Max_ads="+parseInt(t.maxAds)),void 0!=t.assetType&&(e=e+"&at="+t.assetType),void 0!=t.minFileSize&&(e=e+"&minsz="+parseInt(t.minFileSize)),void 0!=t.maxFileSize&&(e=e+"&maxsz="+parseInt(t.maxFileSize)),void 0!=t.fileFormat&&(e=e+"&cntnr="+t.fileFormat),void 0!=t.minDuration&&(e=e+"&mindur="+parseInt(t.minDuration)),void 0!=t.maxDuration&&(e=e+"&maxdur="+parseInt(t.maxDuration)),void 0!=t.minBitrate&&(e=e+"&minbr="+parseInt(t.minBitrate)),void 0!=t.maxBitrate&&(e=e+"&maxbr="+parseInt(t.maxBitrate)),void 0!=t.minWidth&&(e=e+"&minw="+parseInt(t.minWidth)),void 0!=t.maxWidth&&(e=e+"&maxw="+parseInt(t.maxWidth)),void 0!=t.minHeight&&(e=e+"&minh="+parseInt(t.minHeight)),void 0!=t.maxHeight&&(e=e+"&maxh="+parseInt(t.maxHeight)),void 0!=t.audioCodec&&(e=e+"&acodec="+t.audioCodec),void 0!=t.audioMinChannels&&(e=e+"&minach="+parseInt(t.audioMinChannels)),void 0!=t.audioMaxChannels&&(e=e+"&maxach="+parseInt(t.audioMaxChannels)),void 0!=t.audioSampleRates&&(e=e+"&asr="+t.audioSampleRates),void 0!=t.videoCodec&&(e=e+"&vcodec="+t.videoCodec),void 0!=t.videoAspectRatio&&(e=e+"&vaspect="+t.videoAspectRatio),void 0!=t.minFrameRate&&(e=e+"&minfps="+parseFloat(t.minFrameRate)),void 0!=t.maxFrameRate&&(e=e+"&maxfps="+parseFloat(t.maxFrameRate)),void 0!=t.excludedCategories&&(e=e+"&iab-categories-to-exclude="+t.excludedCategories),e}});return e}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r,a=n(28);i=[n(1)],r=function(t){var e=!0,n="FuckAdBlock",i=function(){var t=this,n={};this.errors={throwError:function(t,e,n){throw'Argument "'+t+'" of method "'+e+'" is not an "'+n+'"'},isObject:function(t,e,n){"object"==typeof t&&Array.isArray(t)!==!0&&null!==t||this.throwError(e,n,"object")},isArray:function(t,e,n){Array.isArray(t)===!1&&this.throwError(e,n,"array")},isFunction:function(t,e,n){"function"!=typeof t&&this.throwError(e,n,"function")},isString:function(t,e,n){"string"!=typeof t&&this.throwError(e,n,"string")},isBoolean:function(t,e,n){"boolean"!=typeof t&&this.throwError(e,n,"boolean")}},this.options={set:function(e){t.errors.isObject(e,"optionsList","options.set");for(var i in e)n[i]=e[i],t.debug.log("options.set",'Set "'+i+'" to "'+e[i]+'"');return t},get:function(t){return n[t]}},this.debug={set:function(n){return e=n,t.debug.log("debug.set",'Set debug to "'+e+'"'),t},isEnable:function(){return e},log:function(n,i){e===!0&&(t.errors.isString(n,"method","debug.log"),t.errors.isString(i,"message","debug.log"))}},this.versionToInt=function(t){for(var e="",n=0;n<3;n++){var i=t[n]||0;1===(""+i).length&&(i="0"+i),e+=i}return parseInt(e)}},r=function(){i.apply(this);var t=null,e=null;this.setDetected=function(e){return t=e,this},this.callDetected=function(){return null!==t&&(t(),t=null,!0)},this.setUndetected=function(t){return e=t,this},this.callUndetected=function(){return null!==e&&(e(),e=null,!0)}},o=function(){i.apply(this),this.options.set({timeout:200});var t=this,e=[4,0,0,"beta",3],r={},o={};this.getVersion=function(t){return t!==!0?e:void this.versionToInt(e)},this.addEvent=function(t,e){return this.errors.isString(t,"name","addEvent"),this.errors.isFunction(e,"callback","addEvent"),void 0===r[t]&&(r[t]=[]),r[t].push(e),this.debug.log("set",'Event "'+t+'" added'),this},this.on=function(t,e){return this.errors.isBoolean(t,"detected","on"),this.errors.isFunction(e,"callback","on"),this.addEvent(t===!0?"detected":"undetected",e)},this.onDetected=function(t){return this.errors.isFunction(t,"callback","onDetected"),this.addEvent("detected",t)},this.onNotDetected=function(t){return this.errors.isFunction(t,"callback","onNotDetected"),this.addEvent("undetected",t)};var l=function(e){var n=r[e];if(t.debug.isEnable()===!0){var i=void 0!==n?n.length:0;t.debug.log("dispatchEvent",'Starts dispatch of events "'+e+'" (0/'+i+")")}if(void 0!==n)for(var a in n)t.debug.isEnable()===!0&&t.debug.log("dispatchEvent",'Dispatch event "'+e+'" ('+(parseInt(a)+1)+"/"+i+")"),n[a]();return this};this.check=function(e,n){e instanceof Array==!1&&void 0===n&&(n=e,e=void 0),void 0===e&&(e=Object.keys(o)),void 0===n&&(n={}),this.errors.isArray(e,"pluginsList","check"),this.errors.isObject(n,"optionsList","check"),this.debug.log("check","Starting check");var i={},r=e.length,a=0,s=function(e,n,o){if(a++,t.debug.log("check",(n===!0?"Positive":"Negative")+'" check of plugin "'+e+'"'),o===!0||n===!0||a===r){clearTimeout(h);for(var s in i)i[s].instance.stop();l(n===!0?"detected":"undetected")}};if(this.debug.log("check","Starting loading plugins (0/"+r+") ("+e.join()+")"),0===r)return s("#NoPlugin",!1,!0),this;for(var u in e){var c=e[u];this.debug.log("check",'Load plugin "'+c+'" ('+(parseInt(u)+1)+"/"+r+")");var d=i[c]={name:c,instance:new o[c],detected:null};void 0!==n[c]&&d.instance.options.set(n[c]),function(t,e){e.instance.setDetected(function(){e.detected=!0,t(e.name,!0)}).setUndetected(function(){e.detected=!1,t(e.name,!1)})}(s,d)}for(var c in i)i[c].instance.start();var h=setTimeout(function(){s("#Timeout",!1,!0)},this.options.get("timeout"));return this},this.registerPlugin=function(t){if(this.errors.isFunction(t,"pluginClass","registerPlugin"),this.errors.isString(t.pluginName,"pluginClass.pluginName","registerPlugin"),this.errors.isArray(t.versionMin,"pluginClass.versionMin","registerPlugin"),3!==t.versionMin.length&&this.errors.throwError("pluginClass.versionMin","registerPlugin","array with 3 values"),void 0===o[t.pluginName]){if(this.versionToInt(e)>=this.versionToInt(t.versionMin))return o[t.pluginName]=t,this.debug.log("registerPlugin",'Plugin "'+t.pluginName+'" registered'),!0;throw'The plugin "'+t.pluginName+'" ('+t.versionMin.join(".")+") is too recent for this version of "+n+" ("+e.join(".")+")"}throw'The plugin "'+t.pluginName+'" is already registered'},"iOS"===a.os.family?this.registerPlugin(u):this.registerPlugin(s)};o.getPluginClass=function(){return r};var s=function(){o.getPluginClass().apply(this,arguments),this.options.set({loopTime:50,baitElement:null,baitClass:"pub_300x250 pub_300x250m pub_728x90 text-ad textAd text_ad text_ads text-ads text-ad-links",baitStyle:"width:1px!important;height:1px!important;position:absolute!important;left:-10000px!important;top:-1000px!important;",baitParent:null});var t={};this.start=function(){var e=this;if(null===this.options.get("baitElement")){t.bait=this.createBait({class:this.options.get("baitClass"),style:this.options.get("baitStyle")});var n=this.options.get("baitParent");null===n?window.document.body.appendChild(t.bait):n.appendChild(t.bait)}else t.bait=this.options.get("baitElement");var i=function(){e.checkBait(t.bait,!0)===!0&&e.callDetected()};return t.loopTimeout=setTimeout(i,1),t.loopInterval=setInterval(i,this.options.get("loopTime")),this},this.stop=function(){clearInterval(t.loopTimeout),clearInterval(t.loopInterval);var e=this.options.get("baitParent");return null===e?window.document.body.removeChild(t.bait):e.removeChild(t.bait),this},this.createBait=function(t){var e=window.document.createElement("div");return e.setAttribute("class",t.class),e.setAttribute("style",t.style),e.offsetParent,e.offsetHeight,e.offsetLeft,e.offsetTop,e.offsetWidth,e.clientHeight,e.clientWidth,e},this.checkBait=function(t,e){var n=!1;if(e===!0&&null!==window.document.body.getAttribute("abp")||null===t.offsetParent||0==t.offsetHeight||0==t.offsetLeft||0==t.offsetTop||0==t.offsetWidth||0==t.clientHeight||0==t.clientWidth)n=!0;else{var i=window.getComputedStyle(t);"none"!=i.getPropertyValue("display")&&"hidden"!=i.getPropertyValue("visibility")||(n=!0)}return n}};s.pluginName="html",s.version=[1,0,0],s.versionMin=[4,0,0];var u=function(){o.getPluginClass().apply(this,arguments),this.options.set({baitMode:"ajax",baitUrl:"https://sdk.listenlive.co/ad/banner/_adsense_/_adserver/_adview_.ad.json?adzone=top&adsize=300x250&advid={RANDOM}"});var t={};this.start=function(){var e=this;t.end=!1;var n=this.options.get("baitUrl").replace(/\{RANDOM\}/g,function(){return parseInt(1e8*Math.random())});return this._urlCheck(n,this.options.get("baitMode"),function(){t.end===!1&&(t.end=!0,e.callDetected())},function(){t.end===!1&&(t.end=!0,e.callUndetected())}),this},this.stop=function(){return t.end=!0,this},this._urlCheck=function(t,e,n,i){var r=!1,a=function(t){r===!1&&(r=!0,t===!0?n():i())};if("ajax"===e){var o=[!1,!1,!1,!1],s=null,u=function(t){if(void 0!==t)a(t);else{if(0===s)return void a(!0);for(var e=0;e<4;e++)if(o[e]===!1&&404!=s)return void a(!0);a(!1)}},l=new XMLHttpRequest;l.onreadystatechange=function(){o[l.readyState-1]=!0;try{s=l.status}catch(t){}4===l.readyState&&u()};try{l.open("GET",t,!0),l.send()}catch(t){"2153644038"==t.result&&u(!0)}}else if("import"===e){var c=document.createElement("script");c.src=t,c.onerror=function(){a(!0),window.document.body.removeChild(c)},c.onload=function(){a(!1),window.document.body.removeChild(c)},window.document.body.appendChild(c)}else a(!1)}};u.pluginName="http",s.version=[1,0,0],u.versionMin=[4,0,0];var l=t([],{constructor:function(){this.fab=new o}});return l}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;(function(a){i=[n(1),n(2),n(3),n(13),n(6),n(7),n(11),n(54),n(9)],r=function(t,e,i,r,o,s,u,l,c){var d=(n(103),window.TdCompanions=t([r],{JS_BANNER_URL:"https://player.tritondigital.com/tpl/default/jsbanner.php",constructor:function(){this.listeners=[]},loadCompanionIframe:function(t,e,n,i){var r=s.byId(t,document);u.empty(r),u.create("iframe",{src:e,width:n,height:i,scrolling:"no",frameborder:0,marginheight:0,marginwidth:0,allowtransparency:!0,style:{margin:0,padding:0}},r)},loadCompanionStatic:function(t,e,n,i,r,o,l){o=o||"",l=l||"";var c=s.byId(t,document);u.empty(c);var d=e.substring(e.lastIndexOf(".")+1).toLowerCase();if("application/x-shockwave-flash"==l||"swf"==d){if(!a.getFlashPlayerVersion().major>0)return console.error("companions::loadCompanionStatic - SWF file embed error: Flash is not available. containerId="+t+", adSpotUrl="+e),void this.emit("companion-load-error",{containerId:t,adSpotUrl:e});e=e+(e.indexOf("?")>-1?"&":"?")+"cb_"+(new Date).getTime();var h=({expressInstall:!0,path:e,width:n,height:i,allowScriptAccess:"always",allowfullscreen:!0,allowNetworking:"all",minimumVersion:"10.2.0",vars:{clickTAG:encodeURIComponent(r)},params:{scale:"showall",wmode:"opaque",allowScriptAccess:"always",allowNetworking:"all"}},"td_flash_companions");u.create("div",{id:h},c),a.embedSWF(e,h,n,i,"10.2.0",!1,{clickTAG:encodeURIComponent(r)},{scale:"showall",wmode:"opaque",allowScriptAccess:"always",allowNetworking:"all"},!1,!1)}else{var f="";void 0!=r&&(f='<a href="'+r+'" target="_blank">'),f+='<img src="'+e+'" width="'+n+'" height="'+i+'" title="'+o+'" border="0"/>',void 0!=r&&(f+="</a>"),c.innerHTML=f}},loadVASTCompanionAd:function(t,e){if(e.content)return void(s.byId(t,document).innerHTML=e.content);switch(e.resourceType.name){case"html":e.code.indexOf("document.write")>-1?(e.resourceType.name="iframe",e.url=this.JS_BANNER_URL+"?code="+encodeURIComponent(e.code),this.loadVASTCompanionAd(t,e)):s.byId(t,document).innerHTML=e.code;break;case"iframe":this.loadCompanionIframe(t,e.url,e.width,e.height);break;case"static":"text/javascript"==e.creativeType?(e.resourceType.name="iframe",e.url=this.JS_BANNER_URL+"?url="+encodeURIComponent(e.url),this.loadVASTCompanionAd(t,e)):this.loadCompanionStatic(t,e.url,e.width,e.height,e.clickThroughURL,e.altText,e.creativeType);
}e.creativeView&&e.creativeView.length&&e.creativeView.forEach(function(t){window.fetch(t,{mode:"no-cors"})})},addEventListener:function(t,n){var r=-1;o.forEach(this.listeners,function(e,i){e.eventName==t&&e.callback==n&&(r=i)},this),r==-1&&this.listeners.push({eventName:t,callback:n,listener:i(this,t,e.hitch(this,n))})},removeEventListener:function(t,e){var n=-1;o.forEach(this.listeners,function(i,r){i.eventName==t&&i.callback==e&&(n=r)},this),n>-1&&(this.listeners[n].listener.remove(),this.listeners.splice(n,1))}}));return d}.apply(e,i),!(void 0!==r&&(t.exports=r))}).call(e,n(38))},function(t,e,n){var i,r,a=n(99);i=[n(1),n,n(15)],r=function(t,e,n){var i=t([],{constructor:function(){},init:function(){var t="//imasdk.googleapis.com/js/sdkloader/ima3.js",e=new n;return a(t,function(){e.resolve()}),e}});return i}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e){var n=function(t){function e(e,n){var i,r=t.createElement(e);for(i in n)n.hasOwnProperty(i)&&r.setAttribute(i,n[i]);return r}function n(t){var e,n,i=l[t];i&&(e=i.callback,n=i.urls,n.shift(),c=0,n.length||(e&&e.call(i.context,i.obj),l[t]=null,d[t].length&&r(t)))}function i(){var e=navigator.userAgent;s={async:t.createElement("script").async===!0},(s.webkit=/AppleWebKit\//.test(e))||(s.ie=/MSIE|Trident/.test(e))||(s.opera=/Opera/.test(e))||(s.gecko=/Gecko\//.test(e))||(s.unknown=!0)}function r(r,c,h,f,p){var v,m,g,y,_,E,A=function(){n(r)},b="css"===r,T=[];if(s||i(),c)if(c="string"==typeof c?[c]:c.concat(),b||s.async||s.gecko||s.opera)d[r].push({urls:c,callback:h,obj:f,context:p});else for(v=0,m=c.length;v<m;++v)d[r].push({urls:[c[v]],callback:v===m-1?h:null,obj:f,context:p});if(!l[r]&&(y=l[r]=d[r].shift())){for(u||(u=t.head||t.getElementsByTagName("head")[0]),_=y.urls.concat(),v=0,m=_.length;v<m;++v)E=_[v],b?g=s.gecko?e("style"):e("link",{href:E,rel:"stylesheet"}):(g=e("script",{src:E}),g.async=!1),g.className="lazyload",g.setAttribute("charset","utf-8"),s.ie&&!b&&"onreadystatechange"in g&&!("draggable"in g)?g.onreadystatechange=function(){/loaded|complete/.test(g.readyState)&&(g.onreadystatechange=null,A())}:b&&(s.gecko||s.webkit)?s.webkit?(y.urls[v]=g.href,o()):(g.innerHTML='@import "'+E+'";',a(g)):g.onload=g.onerror=A,T.push(g);for(v=0,m=T.length;v<m;++v)u.appendChild(T[v])}}function a(t){var e;try{e=!!t.sheet.cssRules}catch(i){return c+=1,void(c<200?setTimeout(function(){a(t)},50):e&&n("css"))}n("css")}function o(){var t,e=l.css;if(e){for(t=h.length;--t>=0;)if(h[t].href===e.urls[0]){n("css");break}c+=1,e&&(c<200?setTimeout(o,50):n("css"))}}var s,u,l={},c=0,d={css:[],js:[]},h=t.styleSheets;return{css:function(t,e,n,i){r("css",t,e,n,i)},js:function(t,e,n,i){r("js",t,e,n,i)}}};t.exports=new n(window.document)},function(t,e,n){var i;(function(t){var r=function(){this.version="1.3";var t={mergeCDATA:!0,grokAttr:!0,grokText:!0,normalize:!0,xmlns:!0,namespaceKey:"_ns",textKey:"_text",valueKey:"_value",attrKey:"_attr",cdataKey:"_cdata",attrsAsObject:!0,stripAttrPrefix:!0,stripElemPrefix:!0,childrenAsArray:!0},e=new RegExp(/(?!xmlns)^.*:/),n=new RegExp(/^\s+|\s+$/g);return this.grokType=function(t){return/^\s*$/.test(t)?null:/^(?:true|false)$/i.test(t)?"true"===t.toLowerCase():isFinite(t)?parseFloat(t):t},this.parseString=function(t,e){return this.parseXML(this.stringToXML(t),e)},this.parseXML=function(i,a){for(var o in a)t[o]=a[o];var s={},u=0,l="";if(t.xmlns&&i.namespaceURI&&(s[t.namespaceKey]=i.namespaceURI),i.attributes&&i.attributes.length>0){var c={};for(u;u<i.attributes.length;u++){var d=i.attributes.item(u);v={};var h="";h=t.stripAttrPrefix?d.name.replace(e,""):d.name,t.grokAttr?v[t.valueKey]=this.grokType(d.value.replace(n,"")):v[t.valueKey]=d.value.replace(n,""),t.xmlns&&d.namespaceURI&&(v[t.namespaceKey]=d.namespaceURI),t.attrsAsObject?c[h]=v:s[t.attrKey+h]=v}t.attrsAsObject&&(s[t.attrKey]=c)}if(i.hasChildNodes())for(var f,p,v,m=0;m<i.childNodes.length;m++)f=i.childNodes.item(m),4===f.nodeType?t.mergeCDATA?l+=f.nodeValue:s.hasOwnProperty(t.cdataKey)?(s[t.cdataKey].constructor!==Array&&(s[t.cdataKey]=[s[t.cdataKey]]),s[t.cdataKey].push(f.nodeValue)):t.childrenAsArray?(s[t.cdataKey]=[],s[t.cdataKey].push(f.nodeValue)):s[t.cdataKey]=f.nodeValue:3===f.nodeType?l+=f.nodeValue:1===f.nodeType&&(0===u&&(s={}),p=t.stripElemPrefix?f.nodeName.replace(e,""):f.nodeName,v=r.parseXML(f),s.hasOwnProperty(p)?(s[p].constructor!==Array&&(s[p]=[s[p]]),s[p].push(v)):(t.childrenAsArray?(s[p]=[],s[p].push(v)):s[p]=v,u++));else l||(t.childrenAsArray?(s[t.textKey]=[],s[t.textKey].push(null)):s[t.textKey]=null);if(l)if(t.grokText){var g=this.grokType(l.replace(n,""));null!==g&&void 0!==g&&(s[t.textKey]=g)}else t.normalize?s[t.textKey]=l.replace(n,"").replace(/\s+/g," "):s[t.textKey]=l.replace(n,"");return s},this.xmlToString=function(t){try{var e=t.xml?t.xml:(new XMLSerializer).serializeToString(t);return e}catch(t){return null}},this.stringToXML=function(t){try{var e=null;if(window.DOMParser){var n=new DOMParser;return e=n.parseFromString(t,"text/xml")}return e=new ActiveXObject("Microsoft.XMLDOM"),e.async=!1,e.loadXML(t),e}catch(t){return null}},this}.call({});"undefined"!=typeof t&&null!==t&&t.exports?t.exports=r:(i=function(){return r}.call(e,n,e,t),!(void 0!==i&&(t.exports=i)))}).call(e,n(29)(t))},function(t,e,n){var i,r,a=n(14);i=[n(1),n(2),n(81),n(9)],r=function(t,e,n,i){function r(t){var e=o(),i=new Date,r=365;i.setTime(i.getTime()+24*r*60*60*1e3);var a="expires="+i.toUTCString();return n(t,e,{expires:a,path:"/"}),e}function o(){var t=(new Date).getTime(),e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:7&n|8).toString(16)});return e}function s(t){var e=Math.random();if("undefined"!=typeof Storage){if(null!==sessionStorage.getItem("tracksession"))return"true"==sessionStorage.getItem("tracksession");if(e<=t)return sessionStorage.setItem("tracksession","true"),!0;sessionStorage.setItem("tracksession","false")}return!1}var u=t([],{GA_ENDPOINT:"https://www.google-analytics.com/collect?",GA_ENDPOINT_DEBUG:"https://www.google-analytics.com/debug/collect?",COOKIE_NAME:"sdk_cid",TYPE:"t",SAMPLE_RATE:.05,CATEGORY:"ec",ACTION:"ea",LABEL:"el",DIM_TECH:"cd1",DIM_MEDIA_TYPE:"cd2",DIM_MOUNT:"cd3",DIM_STATION:"cd4",DIM_BROADCASTER:"cd5",DIM_MEDIA_FORMAT:"cd6",DIM_AD_SOURCE:"cd8",DIM_AD_FORMAT:"cd9",DIM_AD_PARSER:"cd10",DIM_ADBLOCK:"cd11",DIM_SBM:"cd12",DIM_HLS:"cd13",DIM_AUDIO_ADAPTIVE:"cd14",DIM_IDSYNC:"cd15",DIM_ALTERNATE_CONTENT:"cd16",DIM_AD_COMPANIONS_TYPE:"cd17",DIM_ERROR_MESSAGE:"cd18",METRIC_CONNECTION_TIME:"cm1",METRIC_STREAM_ERROR_TIME:"cm2",METRIC_LOAD_TIME:"cm3",active:!0,constructor:function(){this.tid=null,this.v=1,this.cid=null,this.an="web-sdk",this.av=null,this.aid=null,this.aiid="custom",this.active=!0,this.debug=!1},setActive:function(t){this.active=t,t?this.cid=this.getCookie():this.delete_cookie()},setPlatform:function(t){"localhost"===window.location.hostname||window.location.hostname.search("10.100")>-1?this.platform=new a("dev01"):this.platform=new a(t),this.tid=this.platform.endpoint.UA},request:function(t){if(this.active&&(this.debug||s(this.SAMPLE_RATE))){var e=this.constructUrl(t),n=new i,r=this.debug?this.GA_ENDPOINT_DEBUG:this.GA_ENDPOINT;n.request(r+e,null,{method:"POST",handleAs:"text",headers:{"X-Requested-With":null,"Content-Type":"text/plain; charset=utf-8"}})}},constructUrl:function(t){e.mixin(t,{tid:this.tid}),e.mixin(t,{v:this.v}),e.mixin(t,{cid:this.cid}),e.mixin(t,{an:this.an}),e.mixin(t,{av:this.av}),e.mixin(t,{aid:this.aid}),e.mixin(t,{aiid:this.aiid});var n="";for(var i in t)""!=n&&(n+="&"),n+=i+"="+encodeURIComponent(t[i]);return n},delete_cookie:function(t){n(this.COOKIE_NAME,"",{expires:"Thu, 01 Jan 1970 00:00:01 GMT",path:"/"})},getCookie:function(){for(var t=this.COOKIE_NAME,e=t+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var a=n[i];" "==a.charAt(0);)a=a.substring(1);if(0==a.indexOf(e))return a.substring(e.length,a.length)}return r(this.COOKIE_NAME)}});return u}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e){var n=function(){function t(){if(!W){try{var t=F.getElementsByTagName("body")[0].appendChild(g("span"));t.parentNode.removeChild(t)}catch(t){return}W=!0;for(var e=G.length,n=0;n<e;n++)G[n]()}}function e(t){W?t():G[G.length]=t}function i(t){if(typeof x.addEventListener!=I)x.addEventListener("load",t,!1);else if(typeof F.addEventListener!=I)F.addEventListener("load",t,!1);else if(typeof x.attachEvent!=I)y(x,"onload",t);else if("function"==typeof x.onload){var e=x.onload;x.onload=function(){e(),t()}}else x.onload=t}function r(){B?a():o()}function a(){var t=F.getElementsByTagName("body")[0],e=g(L);e.setAttribute("type",O);var n=t.appendChild(e);if(n){var i=0;!function(){if(typeof n.GetVariable!=I){var r=n.GetVariable("$version");r&&(r=r.split(" ")[1].split(","),Y.pv=[parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10)])}else if(i<10)return i++,void setTimeout(arguments.callee,10);t.removeChild(e),n=null,o()}()}else o()}function o(){var t=j.length;if(t>0)for(var e=0;e<t;e++){var n=j[e].id,i=j[e].callbackFn,r={success:!1,id:n};if(Y.pv[0]>0){var a=m(n);if(a)if(!_(j[e].swfVersion)||Y.wk&&Y.wk<312)if(j[e].expressInstall&&u()){var o={};o.data=j[e].expressInstall,o.width=a.getAttribute("width")||"0",o.height=a.getAttribute("height")||"0",a.getAttribute("class")&&(o.styleclass=a.getAttribute("class")),a.getAttribute("align")&&(o.align=a.getAttribute("align"));for(var d={},h=a.getElementsByTagName("param"),f=h.length,p=0;p<f;p++)"movie"!=h[p].getAttribute("name").toLowerCase()&&(d[h[p].getAttribute("name")]=h[p].getAttribute("value"));l(o,d,n,i)}else c(a),i&&i(r);else A(n,!0),i&&(r.success=!0,r.ref=s(n),i(r))}else if(A(n,!0),i){var v=s(n);v&&typeof v.SetVariable!=I&&(r.success=!0,r.ref=v),i(r)}}}function s(t){var e=null,n=m(t);if(n&&"OBJECT"==n.nodeName)if(typeof n.SetVariable!=I)e=n;else{var i=n.getElementsByTagName(L)[0];i&&(e=i)}return e}function u(){return!K&&_("6.0.65")&&(Y.win||Y.mac)&&!(Y.wk&&Y.wk<312)}function l(t,e,n,i){K=!0,k=i||null,C={success:!1,id:n};var r=m(n);if(r){"OBJECT"==r.nodeName?(T=d(r),S=null):(T=r,S=n),t.id=M,(typeof t.width==I||!/%$/.test(t.width)&&parseInt(t.width,10)<310)&&(t.width="310"),(typeof t.height==I||!/%$/.test(t.height)&&parseInt(t.height,10)<137)&&(t.height="137"),F.title=F.title.slice(0,47)+" - Flash Player Installation";var a=Y.ie&&Y.win?"ActiveX":"PlugIn",o="MMredirectURL="+x.location.toString().replace(/&/g,"%26")+"&MMplayerType="+a+"&MMdoctitle="+F.title;if(typeof e.flashvars!=I?e.flashvars+="&"+o:e.flashvars=o,Y.ie&&Y.win&&4!=r.readyState){var s=g("div");n+="SWFObjectNew",s.setAttribute("id",n),r.parentNode.insertBefore(s,r),r.style.display="none",function(){4==r.readyState?r.parentNode.removeChild(r):setTimeout(arguments.callee,10)}()}h(t,e,n)}}function c(t){if(Y.ie&&Y.win&&4!=t.readyState){var e=g("div");t.parentNode.insertBefore(e,t),e.parentNode.replaceChild(d(t),e),t.style.display="none",function(){4==t.readyState?t.parentNode.removeChild(t):setTimeout(arguments.callee,10)}()}else t.parentNode.replaceChild(d(t),t)}function d(t){var e=g("div");if(Y.win&&Y.ie)e.innerHTML=t.innerHTML;else{var n=t.getElementsByTagName(L)[0];if(n){var i=n.childNodes;if(i)for(var r=i.length,a=0;a<r;a++)1==i[a].nodeType&&"PARAM"==i[a].nodeName||8==i[a].nodeType||e.appendChild(i[a].cloneNode(!0))}}return e}function h(t,e,n){var i,r=m(n);if(Y.wk&&Y.wk<312)return i;if(r)if(typeof t.id==I&&(t.id=n),Y.ie&&Y.win){var a="";for(var o in t)t[o]!=Object.prototype[o]&&("data"==o.toLowerCase()?e.movie=t[o]:"styleclass"==o.toLowerCase()?a+=' class="'+t[o]+'"':"classid"!=o.toLowerCase()&&(a+=" "+o+'="'+t[o]+'"'));var s="";for(var u in e)e[u]!=Object.prototype[u]&&(s+='<param name="'+u+'" value="'+e[u]+'" />');r.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+a+">"+s+"</object>",H[H.length]=t.id,i=m(t.id)}else{var l=g(L);l.setAttribute("type",O);for(var c in t)t[c]!=Object.prototype[c]&&("styleclass"==c.toLowerCase()?l.setAttribute("class",t[c]):"classid"!=c.toLowerCase()&&l.setAttribute(c,t[c]));for(var d in e)e[d]!=Object.prototype[d]&&"movie"!=d.toLowerCase()&&f(l,d,e[d]);r.parentNode.replaceChild(l,r),i=l}return i}function f(t,e,n){var i=g("param");i.setAttribute("name",e),i.setAttribute("value",n),t.appendChild(i)}function p(t){var e=m(t);e&&"OBJECT"==e.nodeName&&(Y.ie&&Y.win?(e.style.display="none",function(){4==e.readyState?v(t):setTimeout(arguments.callee,10)}()):e.parentNode.removeChild(e))}function v(t){var e=m(t);if(e){for(var n in e)"function"==typeof e[n]&&(e[n]=null);e.parentNode.removeChild(e)}}function m(t){var e=null;try{e=F.getElementById(t)}catch(t){}return e}function g(t){return F.createElement(t)}function y(t,e,n){t.attachEvent(e,n),V[V.length]=[t,e,n]}function _(t){var e=Y.pv,n=t.split(".");return n[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10)||0,n[2]=parseInt(n[2],10)||0,e[0]>n[0]||e[0]==n[0]&&e[1]>n[1]||e[0]==n[0]&&e[1]==n[1]&&e[2]>=n[2]}function E(t,e,n,i){if(!Y.ie||!Y.mac){var r=F.getElementsByTagName("head")[0];if(r){var a=n&&"string"==typeof n?n:"screen";if(i&&(w=null,R=null),!w||R!=a){var o=g("style");o.setAttribute("type","text/css"),o.setAttribute("media",a),w=r.appendChild(o),Y.ie&&Y.win&&typeof F.styleSheets!=I&&F.styleSheets.length>0&&(w=F.styleSheets[F.styleSheets.length-1]),R=a}Y.ie&&Y.win?w&&typeof w.addRule==L&&w.addRule(t,e):w&&typeof F.createTextNode!=I&&w.appendChild(F.createTextNode(t+" {"+e+"}"))}}}function A(t,e){if(q){var n=e?"visible":"hidden";W&&m(t)?m(t).style.visibility=n:E("#"+t,"visibility:"+n)}}function b(t){var e=/[\\\"<>\.;]/,n=null!=e.exec(t);return n&&typeof encodeURIComponent!=I?encodeURIComponent(t):t}var T,S,k,C,w,R,I="undefined",L="object",D="Shockwave Flash",P="ShockwaveFlash.ShockwaveFlash",O="application/x-shockwave-flash",M="SWFObjectExprInst",N="onreadystatechange",x=window,F=document,U=navigator,B=!1,G=[r],j=[],H=[],V=[],W=!1,K=!1,q=!0,Y=function(){var t=typeof F.getElementById!=I&&typeof F.getElementsByTagName!=I&&typeof F.createElement!=I,e=U.userAgent.toLowerCase(),n=U.platform.toLowerCase(),i=n?/win/.test(n):/win/.test(e),r=n?/mac/.test(n):/mac/.test(e),a=!!/webkit/.test(e)&&parseFloat(e.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),o=!1,s=[0,0,0],u=null;if(typeof U.plugins!=I&&typeof U.plugins[D]==L)u=U.plugins[D].description,!u||typeof U.mimeTypes!=I&&U.mimeTypes[O]&&!U.mimeTypes[O].enabledPlugin||(B=!0,o=!1,u=u.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),s[0]=parseInt(u.replace(/^(.*)\..*$/,"$1"),10),s[1]=parseInt(u.replace(/^.*\.(.*)\s.*$/,"$1"),10),s[2]=/[a-zA-Z]/.test(u)?parseInt(u.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof x.ActiveXObject!=I)try{var l=new ActiveXObject(P);l&&(u=l.GetVariable("$version"),u&&(o=!0,u=u.split(" ")[1].split(","),s=[parseInt(u[0],10),parseInt(u[1],10),parseInt(u[2],10)]))}catch(t){}return{w3:t,pv:s,wk:a,ie:o,win:i,mac:r}}();(function(){Y.w3&&((typeof F.readyState!=I&&"complete"==F.readyState||typeof F.readyState==I&&(F.getElementsByTagName("body")[0]||F.body))&&t(),W||(typeof F.addEventListener!=I&&F.addEventListener("DOMContentLoaded",t,!1),Y.ie&&Y.win&&(F.attachEvent(N,function(){"complete"==F.readyState&&(F.detachEvent(N,arguments.callee),t())}),x==top&&!function(){if(!W){try{F.documentElement.doScroll("left")}catch(t){return void setTimeout(arguments.callee,0)}t()}}()),Y.wk&&!function(){if(!W)return/loaded|complete/.test(F.readyState)?void t():void setTimeout(arguments.callee,0)}(),i(t)))})(),function(){Y.ie&&Y.win&&window.attachEvent("onunload",function(){for(var t=V.length,e=0;e<t;e++)V[e][0].detachEvent(V[e][1],V[e][2]);for(var i=H.length,r=0;r<i;r++)p(H[r]);for(var a in Y)Y[a]=null;Y=null;for(var o in n)n[o]=null;n=null})}();return{registerObject:function(t,e,n,i){if(Y.w3&&t&&e){var r={};r.id=t,r.swfVersion=e,r.expressInstall=n,r.callbackFn=i,j[j.length]=r,A(t,!1)}else i&&i({success:!1,id:t})},getObjectById:function(t){if(Y.w3)return s(t)},embedSWF:function(t,n,i,r,a,o,s,c,d,f){var p={success:!1,id:n};Y.w3&&!(Y.wk&&Y.wk<312)&&t&&n&&i&&r&&a?(A(n,!1),e(function(){i+="",r+="";var e={};if(d&&typeof d===L)for(var v in d)e[v]=d[v];e.data=t,e.width=i,e.height=r;var m={};if(c&&typeof c===L)for(var g in c)m[g]=c[g];if(s&&typeof s===L)for(var y in s)typeof m.flashvars!=I?m.flashvars+="&"+y+"="+s[y]:m.flashvars=y+"="+s[y];if(_(a)){var E=h(e,m,n);e.id==n&&A(n,!0),p.success=!0,p.ref=E}else{if(o&&u())return e.data=o,void l(e,m,n,f);A(n,!0)}f&&f(p)})):f&&f(p)},switchOffAutoHideShow:function(){q=!1},ua:Y,getFlashPlayerVersion:function(){return{major:Y.pv[0],minor:Y.pv[1],release:Y.pv[2]}},hasFlashPlayerVersion:_,createSWF:function(t,e,n){return Y.w3?h(t,e,n):void 0},showExpressInstall:function(t,e,n,i){Y.w3&&u()&&l(t,e,n,i)},removeSWF:function(t){Y.w3&&p(t)},createCSS:function(t,e,n,i){Y.w3&&E(t,e,n,i)},addDomLoadEvent:e,addLoadEvent:i,getQueryParamValue:function(t){var e=F.location.search||F.location.hash;if(e){if(/\?/.test(e)&&(e=e.split("?")[1]),null==t)return b(e);for(var n=e.split("&"),i=0;i<n.length;i++)if(n[i].substring(0,n[i].indexOf("="))==t)return b(n[i].substring(n[i].indexOf("=")+1))}return""},expressInstallCallback:function(){if(K){var t=m(M);t&&T&&(t.parentNode.replaceChild(T,t),S&&(A(S,!0),Y.ie&&Y.win&&(T.style.display="block")),k&&k(C)),K=!1}}}}()},function(t,e,n){(function(t){var e=n(1),i=n(2),r=n(3),a=n(13),o=n(6),s=n(104),u=n(107),l=n(109),c=n(32),d=n(18),h=n(21),f=!1,p=function(){f||(document.removeEventListener("touchend",p,!1),document.removeEventListener("touchmove",v,!1),h.init()),f=!1},v=function(){f=!0};document.addEventListener("touchend",p,!1),document.addEventListener("touchmove",v,!1),window.TDSdk=e([],{NAME:"TDSdk",constructor:function(t){this.listeners=[],this.target=new a,this.abBlockProcessFinish=!1,this.MediaElement=h,this._initGoogleAnalytics(),r(this.target,"module-ready",i.hitch(this,this._onModuleReady));var e=new l;"undefined"==typeof e.fab?this._onAdBlock(t,!0):(e.fab.onDetected(i.hitch(this,this._onAdBlock,t,!0)),e.fab.onNotDetected(i.hitch(this,this._onAdBlock,t,!1)),e.fab.check()),t.playerReady&&this.addEventListener("player-ready",t.playerReady),t.configurationError&&this.addEventListener("configuration-error",t.configurationError),t.moduleError&&this.addEventListener("module-error",t.moduleError),t.adBlockerDetected&&this.addEventListener("ad-blocker-detected",t.adBlockerDetected),this.loadModules()},getGAEventRequest:function(){return c},_parseConfig:function(t,e){if(!t||!t.coreModules)return{coreModules:[]};var n=[],i={},r=o.filter(t.coreModules,function(t){return"SyncBanners"==t.id});if(r.length&&!e){var a=r[0];i=a,o.forEach(a.elements,function(t){if(void 0!=t.width&&void 0!=t.height){var e=t.width+"x"+t.height;o.indexOf(u,e)!=-1&&n.push(e)}},this)}if(r=o.filter(t.coreModules,function(t){return"MediaPlayer"==t.id}),r.length){var s=r[0];s.adBlockerDetected=e,s.adBlockerDetected&&void 0!=s.plugins&&(this._removeMediaplayerPlugins("vastAd",s.plugins),this._removeMediaplayerPlugins("mediaAd",s.plugins)),s.companionAdSelectionSettings=i,void 0==s.defaultTrackingParameters&&(s.defaultTrackingParameters={}),s.defaultTrackingParameters.banners=void 0!=s.defaultTrackingParameters.banners?this._unique(s.defaultTrackingParameters.banners.concat(n)):n,s.defaultTrackingParameters.log={},s.defaultTrackingParameters.log.tdsdk="js-"+this.version.value.substring(0,3),s.defaultTrackingParameters.log.pname=this.NAME,s.defaultTrackingParameters.log.pversion=this.version.value.substring(0,3)}return"object"==typeof t.analytics?(t.analytics.active===!1?c.setActive(!1):c.setActive(!0),t.analytics.debug===!0&&(c.debug=!0),t.analytics.aiid&&(c.aiid=t.analytics.aiid),t.analytics.platformId&&c.setPlatform(t.analytics.platformId)):(c.setActive(!0),c.setPlatform("prod01")),"string"==typeof t.locale&&d.setLocalization(t.locale),t},_removeMediaplayerPlugins:function(t,e){o.forEach(e,function(n,i){n&&n.id==t&&e.splice(i,1)})},_onModuleReady:function(t){t.data.module.api&&e.safeMixin(this,t.data.module.api),this[t.data.id]=t.data.module},_onAdBlock:function(t,e){t&&(this.abBlockProcessFinish=!0,t.adBlockerDetected=e,this.moduleManager=new s(this._parseConfig(t,e),this.target),this.loadModulesCalled&&this.moduleManager.loadModules())},loadModules:function(){this.abBlockProcessFinished?this.moduleManager.loadModules():this.loadModulesCalled=!0},loadModule:function(t,e){this.moduleManager.loadModule(t,e)},getModuleById:function(t){return this.moduleManager.getModuleById(t)},_initGoogleAnalytics:function(){c.av=this.version.value+"."+this.version.build,c.aid=this.version.value},addEventListener:function(t,e){var n=-1;o.forEach(this.listeners,function(i,r){i.eventName==t&&i.callback==e&&(n=r)},this),n==-1&&this.listeners.push({eventName:t,callback:e,listener:r(this.target,t,i.hitch(this,e))})},removeEventListener:function(t,e){var n=-1;o.forEach(this.listeners,function(i,r){i.eventName==t&&i.callback==e&&(n=r)},this),n>-1&&(this.listeners[n].listener.remove(),this.listeners.splice(n,1))},_unique:function(t){var e={};return o.filter(t,function(t){return!e[t]&&(e[t]=!0)})},version:{value:"2.9.31",build:"250",codename:"bitter lime"},flash:{available:t.getFlashPlayerVersion().major>0,version:t.getFlashPlayerVersion()}})}).call(e,n(38))},function(t,e,n){var i,r,a=(n(73),n(28)),o=n(18),s=n(141),u=n(142),l=n(20),c=n(21),d=n(8);i=[n(6),n(1),n(15),n(2),n(4),n(3),n(26),n(17),n(7),n(11),n(19),n(123),n(12),n(135),n(134)],r=function(t,e,n,i,r,h,f,p,v,m,g,y,_,E,A){var b=e([_],{LIVE_PLAYING:"livePlaying",LIVE_STOPPED:"liveStopped",statusMap:{GETTING_STATION_INFORMATION:{status:"gettingStationInformation",code:"GETTING_STATION_INFORMATION"},STREAM_GEO_BLOCKED:{status:"streamGeoBlocked",code:"STREAM_GEO_BLOCKED"},STATION_NOT_FOUND:{status:"stationNotFound",code:"STATION_NOT_FOUND"}},constructor:function(t,e){this.inherited(arguments);var n=this;"function"==typeof __cmp?__cmp("getConsentData",null,function(t){n.consentData=t,void 0!=n.config.idSync&&n._loadIdSync(n.config.idSync)}):void 0!=this.config.idSync&&this._loadIdSync(this.config.idSync),this.liveStreamConfig=null,this.streamingConnections=null,this.liveStreamConfiguration=null,this.tech=null,this.techErrors=[],this.techPriority=this.config.techPriority&&this.config.techPriority.length>0?this.config.techPriority:["Html5","Flash"],(r("ios")||r("android")||r("bb")||r("safari")>7||l.currentProtocolIsHttps())&&(this.techPriority=["Html5"]),this.geoTargeting=void 0!=this.config.geoTargeting?this.config.geoTargeting:{desktop:{isActive:!0},iOS:{isActive:!1},android:{isActive:!1}},this.isGeoTargetingActive=!1,this.position=null,this.geoTargeting&&this._initGeoTargeting(),this.hls=void 0==t.hls||t.hls,this.audioAdaptive=void 0!=t.audioAdaptive&&t.audioAdaptive,this.adManager=null,this._lowActivated=!1,this._isPlaying=!1,this.fallbackTried=!1,this.api={play:i.hitch(this,this._play),pause:i.hitch(this,this._pause),stop:i.hitch(this,this._stop),resume:i.hitch(this,this._resume),seek:i.hitch(this,this._seek),seekLive:i.hitch(this,this.seekLive),restartConnectionTimeOut:i.hitch(this,this.restartConnectionTimeOut),setVolume:i.hitch(this,this.setVolume),getVolume:i.hitch(this,this.getVolume),mute:i.hitch(this,this.mute),unMute:i.hitch(this,this.unMute),playAd:i.hitch(this,this.playAd),skipAd:i.hitch(this,this.skipAd),destroyAd:i.hitch(this,this.destroyAd),initMediaElement:i.hitch(this,this._initMediaElement)},f.subscribe("api/request",i.hitch(this,this._onApiInternalRequest))},start:function(){h(this.target,"tech-ready",i.hitch(this,this._onTechReady)),h(this.target,"tech-error",i.hitch(this,this._onTechError)),this._loadTech(this.techPriority[0])},_onApiInternalRequest:function(){var t=arguments[0],e=i.hitch(this,this.INTERNAL_REQUEST_API_FUNCTIONS[t]);"function"==typeof e&&e(arguments[1])},_onApiRequestGetAlternateContent:function(t){if(t){var e=this._getCurrentLiveApiParams();t.mount?(e.station=null,e.mount=t.mount,this._play(e)):t.url&&(e.station=null,e.mount=null,e.url=t.url,this.tech.isLiveStream=!0,this.tech.play({file:e.url}))}},_onApiRequestGetVastInstream:function(t){null!=t.vastUrl?this._getAdManager().playAd("vastAd",{url:t.vastUrl,skipMediaAdPlayback:!0,adBreak:!0}):null!=t.adVast&&this._getAdManager().playAd("vastAd",{rawXML:t.adVast,skipMediaAdPlayback:!0,adBreak:!0})},_hqTags:[],addHqTag:function(e){t.indexOf(this._hqTags,e)==-1&&this._hqTags.push(e)},removeHqTag:function(e){var n=t.indexOf(this._hqTags,e);n!=-1&&this._hqTags.splice(n,1)},_lowTags:["low-bw"],addLowTag:function(e){t.indexOf(this._lowTags,e)==-1&&this._lowTags.push(e)},removeLowTag:function(e){var n=t.indexOf(this._lowTags,e);n!=-1&&this._lowTags.splice(n,1)},_hqEnabled:!1,enableHQ:function(){this._hqEnabled=!0,!this.isHQ()&&this.isPlaying()&&(this._stop(),this._play(this._getCurrentLiveApiParams()))},disableHQ:function(){this._hqEnabled=!1,this.isHQ()&&this.isPlaying()&&(this._stop(),this._play(this._getCurrentLiveApiParams()))},_lowEnabled:!0,enableLow:function(){this._lowEnabled=!0,this._refreshConnectionIterator()},disableLow:function(){this._lowEnabled=!1,this.isLow()&&this.isPlaying()&&(this._stop(),this._play(this._getCurrentLiveApiParams()))},activateLow:function(){this._lowEnabled&&(this._lowActivated=!0,!this.isLow()&&this.isPlaying()?(this._stop(),this._play(this._getCurrentLiveApiParams())):this._refreshConnectionIterator())},deactivateLow:function(){this._lowActivated=!1,this.isLow()&&this.isPlaying()?(this._stop(),this._play(this._getCurrentLiveApiParams())):this._refreshConnectionIterator()},_refreshConnectionIterator:function(t){if(t){if(t.length>0)return this.emit("stream-config-ready"),this.tech.setConnectionIterator(new s(t)),!0;this.emit("stream-config-error",{errors:this.liveStreamConfig.mountPointsError}),this.tech.setConnectionIterator(null);var e=!1,n=!1;return d.forEach(this.liveStreamConfig.mountPointsError,function(t){t.status.isGeoBlocked&&t.alternateContent&&(e=!0,n=t.alternateContent)}),e?(this._emitStreamStatusByCode(this.statusMap.STREAM_GEO_BLOCKED),n&&f.publish("api/request","get-alternate-content",n)):this._emitStreamStatusByCode(this.statusMap.STATION_NOT_FOUND),!1}},_loadTech:function(t){i.hitch(this,this._techLoaded),i.hitch(this,this._techLoadingError);switch(t){case"Html5":this._techLoaded(E,t);break;case"Flash":this._techLoaded(A,t)}},_techLoaded:function(t,e){this.tech=new t(this.config,this.target,e),this.tech.start()},_techLoadingError:function(t){console.error("mediaPlayer::_techError - "+t),this.emit("module-error",{id:"MediaPlayer",error:t})},_onTechReady:function(t){this.liveStreamConfig=new u(this.config.platformId,a,this.tech.type,this.config.hls,this.config.audioAdaptive,this.config.forceHls,this.config.forceHslts,this.config.playerServicesRegion),h(this.target,"stream-start",i.hitch(this,this._onStreamStart)),h(this.target,"stream-stop",i.hitch(this,this._onStreamStop)),this.emit("module-ready",{id:"MediaPlayer",module:this})},_onStreamStart:function(){this._isPlaying=!0},_onStreamStop:function(){this._isPlaying=!1},_onTechError:function(t){console.error("mediaPlayer::_onTechError"),this.techPriority.length>1&&0==this.fallbackTried?(this.techErrors.push(t),this.fallbackTried=!0,this._loadTech(this.techPriority[1])):(this.techErrors.push(t),this.emit("module-error",{id:"MediaPlayer",errors:this.techErrors}))},_initGeoTargeting:function(){void 0!=r("ios")&&void 0!=this.geoTargeting.iOS&&void 0!=this.geoTargeting.iOS.isActive&&1==this.geoTargeting.iOS.isActive?this.isGeoTargetingActive=!0:void 0!=r("android")&&void 0!=this.geoTargeting.android&&void 0!=this.geoTargeting.android.isActive&&1==this.geoTargeting.android.isActive?this.isGeoTargetingActive=!0:void 0==r("ios")&&void 0==r("android")&&void 0!=this.geoTargeting.desktop&&void 0!=this.geoTargeting.desktop.isActive&&1==this.geoTargeting.desktop.isActive&&(this.isGeoTargetingActive=!0),1==this.isGeoTargetingActive&&this._getLocation()},_play:function(t){if(void 0!=t){this.tech.prepare(),this._initMediaElement();var e=this;if(t.trackingParameters=this._getFinalTrackingParameters(t.trackingParameters),void 0!=t.file&&""!=t.file)e.tech.play(t);else{this._emitStreamStatusByCode(this.statusMap.GETTING_STATION_INFORMATION),this._liveApiParams=t;var n=("Flash"==this.tech.type?this.liveStreamConfig.RTMP_TRANSPORTS:[]).concat(this.liveStreamConfig.DEFAULT_TRANSPORTS),i={station:t.station,mount:t.mount,transports:n},r=[];this._hqEnabled&&(r=r.concat(this._hqTags)),this._lowEnabled&&(r=r.concat(this._lowTags)),this.liveStreamConfig.getStreamingConnections(i,r).then(function(n){this.streamingConnections=n,e._refreshConnectionIterator(n)&&e.tech.play(t)}).catch(function(t){e.emit("stream-config-load-error",{error:t})})}}},isPlaying:function(){return this._isPlaying},hasHQ:function(){var t=this;return d.some(this._hqTags,function(e){t.tagsToLookup(e,t.streamingConnections)})},tagsToLookup:function(t,e){return d.some(e,function(e){return d.some(e.tags,function(e){return e.name===t})})},isHQ:function(){var t=this;return!!this.tech.currentConnection()&&(null!=this.tech.currentConnection()&&d.some(this._hqTags,function(e){t.tagsToLookup(e,[t.tech.currentConnection()])}))},hasLow:function(){var t=this;return d.some(this._lowTags,function(e){t.tagsToLookup(e,t.streamingConnections)})},isLow:function(){var t=this;return!!this.tech.currentConnection()&&(null!=this.tech.currentConnection()&&d.some(this._lowTags,function(e){t.tagsToLookup(e,[t.tech.currentConnection()])}))},_pause:function(){this.tech.pause()},_stop:function(){this.tech.stop()},_resume:function(){this.tech.resume()},_seek:function(t){this.tech.seek(t)},seekLive:function(){this.tech.seekLive()},restartConnectionTimeOut:function(){this.tech.restartConnectionTimeOut()},setVolume:function(t){this.tech.setVolume(t)},getVolume:function(){return this.tech.getVolume()},mute:function(){this.tech.mute()},unMute:function(){this.tech.unMute()},playAd:function(t,e){e.trackingParameters=this._getFinalTrackingParameters(e.trackingParameters),this._getAdManager().playAd(t,e),this.tech.playAdCalled=!0},skipAd:function(){this._getAdManager().skipAd()},destroyAd:function(){this._getAdManager().destroyAd(!0)},_initMediaElement:function(){c.init()},_getAdManager:function(){return null==this.adManager&&(this.adManager=new y(this.tech,this.tech.type,this.target,this.config)),this.adManager},_emitStreamStatusByCode:function(t){var e=o;void 0!=e&&e[t.status]&&this.emit("stream-status",{code:t.code,status:e[t.status]})},_getLocation:function(){window.navigator.geolocation&&window.navigator.geolocation.getCurrentPosition(i.hitch(this,this._setPosition),i.hitch(this,this._getPositionErrorHandler),{enableHighAccuracy:!0,timeout:2e3})},_setPosition:function(t){this.position=void 0!=t&&void 0!=t.coords.latitude&&void 0!=t.coords.longitude?t:null},_getPositionErrorHandler:function(t){console.info("mediaPlayer::_getPositionErrorHandler, code : "+t.code+", message : "+t.message),this.position=null},_getGeoTargetingPos:function(t){return null!=this.position&&void 0!=this.position&&void 0!=this.position.coords.latitude&&void 0!=this.position.coords.longitude?void 0!=t?(t.lat=parseFloat(this.position.coords.latitude.toFixed(1)),t.long=parseFloat(this.position.coords.longitude.toFixed(1)),t):{lat:parseFloat(this.position.coords.latitude.toFixed(1)),long:parseFloat(this.position.coords.longitude.toFixed(1))}:t},_getFinalTrackingParameters:function(e){void 0==e&&(e={}),e.tdsdk=this.config.defaultTrackingParameters.log.tdsdk,this.isGeoTargetingActive&&(e=this._getGeoTargetingPos(e)),d.isEmpty(this.config.defaultTrackingParameters.banners)&&(this.config.defaultTrackingParameters.banners=[],this.config.defaultTrackingParameters.banners.push("none")),"Flash"!=this.tech.type||this.config.adBlockerDetected||this.config.defaultTrackingParameters.banners.indexOf("none")!==-1||(t.indexOf(this.config.defaultTrackingParameters.banners,"swf")==-1&&this.config.defaultTrackingParameters.banners.push("swf"),t.indexOf(this.config.defaultTrackingParameters.banners,"vpaid")==-1&&this.config.defaultTrackingParameters.banners.push("vpaid")),e.pname||(e.pname=this.config.defaultTrackingParameters.log.pname,
e.pversion=this.config.defaultTrackingParameters.log.pversion),void 0!=this.config.defaultTrackingParameters.banners&&this.config.defaultTrackingParameters.banners.length&&(void 0!=e.banners&&e.banners.length&&e.banners.indexOf(this.config.defaultTrackingParameters.banners.join())==-1?e.banners+=","+this.config.defaultTrackingParameters.banners.join():e.banners=this.config.defaultTrackingParameters.banners.join());for(var n in this.config.defaultTrackingParameters.user)e[n]=this.config.defaultTrackingParameters.user[n];return e},_getCurrentLiveApiParams:function(){return this._liveApiParams},_loadIdSync:function(t){var e=this._getIdSyncQueryParam(t);switch(v.byId("idSyncScript",document)&&m.destroy(v.byId("idSyncScript",document)),scriptTag=m.create("script",{id:"idSyncScript"},v.byId(this.config.playerId,document)),g.set(scriptTag,"type","text/javascript"),this.config.platformId){case"dev01":g.set(scriptTag,"src","//playerservices.dev01.stw:8082/api/idsync.js?"+e);break;case"preprod01":g.set(scriptTag,"src","//playerservices.preprod01.streamtheworld.net/api/idsync.js?"+e);break;case"preprodsecured01":g.set(scriptTag,"src","https://playerservices.preprod01.streamtheworld.net/api/idsync.js?"+e);break;default:g.set(scriptTag,"src","//playerservices.live.streamtheworld.com/api/idsync.js?"+e)}document.getElementsByTagName("body")[0].appendChild(scriptTag)},_getIdSyncQueryParam:function(t){var e;if(t.station?e="station="+t.station:t.stationId?e="stationId="+t.stationId:t.mount&&(e="mount="+t.mount),void 0!=e){this.consentData&&(t.gdpr=this.consentData.gdprApplies?1:0,t.gdpr_consent=this.consentData.consentData),e=t.gdpr&&t.gdpr.toString().match(/^[0,1]$/g)?e+"&gdpr="+t.gdpr:e,e=t.gdpr_consent?e+"&gdpr_consent="+t.gdpr_consent:e;var n=t.dob&&!isNaN(Date.parse(t.dob))?new Date(t.dob.replace(/-/g,"/")):null;if(n){var i=n.getFullYear(),r=n.getMonth()+1<10?"0"+(n.getMonth()+1):n.getMonth()+1,a=n.getDate()<10?"0"+n.getDate():n.getDate();e=n?e+"&dob="+i+"-"+r+"-"+a:e}return e=t.yob&&!isNaN(t.yob)&&e.indexOf("dob")===-1?e+"&yob="+t.yob:e,e=t.age&&!isNaN(t.age)&&t.age>0&&t.age<=125&&e.indexOf("dob")===-1&&e.indexOf("yob")===-1?e+"&age="+t.age:e,e=t.gender&&t.gender.match(/[m,f]/g)&&1===t.gender.length?e+"&gender="+t.gender:e,e=t.ip&&t.ip.match(/^(?!0)(?!.*\.$)((1?\d?\d|25[0-5]|2[0-4]\d)(\.|$)){4}$/g)?e+"&ip="+t.ip:e}}});return b}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r,a=n(14);i=[n(1),n(15),n(2),n(9),n(12),n(156)],r=function(t,e,n,i,r,o){var s=t([r],{constructor:function(t,e){this.platform=new a(t.platformId),this.library=[],this.inherited(arguments)},start:function(){this.emit("module-ready",{id:"Npe",module:this})},loadNpeMetadata:function(t,n,i){var r=this._urlToNPEId(t),a=this.getSongByNpeId(r);if(null!=a){this.emit("npe-song",{song:a});var o=new e;return o.resolve({song:a}),o}return this._fetchData(!1,r,t,n,i,new e)},getSongByNpeId:function(t){for(var e=this.library.length,n=0;n<e;n++)if(this.library[n].npeId==t)return this.library[n];return null},getDynamicUrl:function(){return this.platform.endpoint.npe},_getDynamicSongUrl:function(t,e){return this.getDynamicUrl()+"song?artist="+encodeURIComponent(t)+"&title="+encodeURIComponent(e)},_fetchData:function(t,e,r,a,o,s){t&&(r=this._getDynamicSongUrl(a,o));var u=new i;return u.request(r,{npeId:e,npUrl:r,isDynamicCall:t,artist:a,title:o,deferred:s},this._getRequestArgs(),n.hitch(this,this._onLoadComplete),n.hitch(this,this._onLoadError)),s},_onLoadError:function(t,e){return console.error("npe::_onLoadError - npUrl="+t.npUrl+" - error="+e),0!=t.isDynamicCall?(this.emit("npe-song-error",{npeId:this._urlToNPEId(t.npUrl)}),t.deferred.reject({npeId:this._urlToNPEId(t.npUrl)})):void this._fetchData(!0,t.npeId,null,t.artist,t.title,t.deferred)},_onLoadComplete:function(t,e){var n=new o(e.song,this._urlToNPEId(t.npUrl),this.config.platformId);return this.library.push(n),this.emit("npe-song",{song:n}),t.deferred.resolve({song:n})},_getRequestArgs:function(){return{handleAs:"json",preventCache:!1,headers:{"X-Requested-With":null,"Content-Type":"text/plain; charset=utf-8"}}},_urlToNPEId:function(t){if(null==t||void 0==t||""==t)return null;var e=t.lastIndexOf("/");return t.substr(e-2,2)+t.substring(e+1,t.lastIndexOf("."))}});return s}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r,a=n(14);i=[n(1),n(2),n(12),n(9)],r=function(t,e,n,i){var r=t([n],{constructor:function(t,e){this.platform=new a(t.platformId),this.inherited(arguments)},start:function(){this.emit("module-ready",{id:"PlayerWebAdmin",module:this})},load:function(t,n){var r=e.hitch(this,this._onLoadComplete),a=e.hitch(this,this._onLoadError),o=new i,s=this._getRequestArgs(t,n);o.request(this.platform.endpoint.playerWebAdmin,s.query,{handleAs:"xml",preventCache:!0,query:s.query,headers:{"X-Requested-With":null,"Content-Type":"text/plain; charset=utf-8"}},function(e,n){r(t,JSON.parse(n))},function(e,n){a(t,"An unexpected error occurred: "+n)})},_onLoadError:function(t,e){console.error("playerWebAdmin::_onLoadError - mount="+t+" - error="+e),this.emit("pwa-data-error",{mount:t,error:e})},_onLoadComplete:function(t,e){this.emit("pwa-data-loaded",{mount:t,config:e})},_getRequestArgs:function(t,e){return{jsonp:"callback",preventCache:!0,query:{callsign:t,streamid:e}}}});return r}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1),n(2),n(6),n(7),n(3),n(11),n(12),n(110)],r=function(t,e,n,i,r,a,o,s){var u=t([o],{LEGACY:"legacy",VAST:"vast",constructor:function(t,e){this.inherited(arguments),this._vastCompanionPriority=t.vastCompanionPriority||["static","iframe","html"],this.companions=new s},start:function(){this.config.elements&&(r(this.target,"vast-process-complete",e.hitch(this,this._onVastProcessComplete)),r(this.target,"vast-companions-ready",e.hitch(this,this._onVastCompanionsReady)),r(this.target,"ad-break-cue-point",e.hitch(this,this._onAdBreakCuePoint)),r(this.target,"ad-break-cue-point-complete",e.hitch(this,this._onAdBreakCuePointComplete)),r(this.target,"stream-stop",e.hitch(this,this._onStreamStop))),this.emit("module-ready",{id:"SyncBanners",module:this})},getSyncedElementBySize:function(t,e){var i=null;return n.forEach(this.config.elements,function(n){n.width==t&&n.height==e&&(i=n)},this),i},_onAdBreakCuePoint:function(t){var n=t.data.adBreakData,i=n.url;if(n.isVastInStream)this._cleanAdVastListeners(),this.vastProcessCompleteListener=r(this.target,"vast-process-complete",e.hitch(this,this._onVastProcessComplete)),this.vastErrorListener=r(this.target,"ad-playback-error",e.hitch(this,this._onVastAdPlaybackError));else if(i&&i.length>1&&i.indexOf("|")!=-1){var a=i.split("|")[1],o=i.split("|")[0];a&&a.length>1&&null!=this.getSyncedElementBySize(300,250)&&(this.emit("ad-break-synced-element",{type:this.LEGACY,id:this.getSyncedElementBySize(300,250).id,url:a}),this._loadElementIframe(this.getSyncedElementBySize(300,250).id,a,300,250)),o&&o.length>1&&null!=this.getSyncedElementBySize(728,90)&&(this.emit("ad-break-synced-element",{type:this.LEGACY,id:this.getSyncedElementBySize(728,90).id,url:o}),this._loadElementIframe(this.getSyncedElementBySize(728,90).id,o,728,90))}},_onAdBreakCuePointComplete:function(t){this.config.keepElementsVisible||this._hideElements()},_onStreamStop:function(){this._hideElements()},_hideElements:function(){var t=this.getSyncedElementBySize(300,250);null!=t&&null!=i.byId(t.id,document)&&a.empty(i.byId(t.id,document));var e=this.getSyncedElementBySize(728,90);null!=e&&null!=i.byId(e.id,document)&&a.empty(i.byId(e.id,document))},_loadElementIframe:function(t,e,n,r){var o=i.byId(t,document);null!=o&&(a.empty(o),a.create("iframe",{src:e,width:n,height:r,scrolling:"no",frameborder:0,marginheight:0,marginwidth:0,allowtransparency:!0,style:{margin:0,padding:0}},o))},_showVastCompanions:function(t){this._cleanAdVastListeners();var e=this._filterCompanionAds(t.data.companions);e&&e.length&&n.forEach(e,function(t,n){var r=this.getSyncedElementBySize(t.width,t.height);null!=r&&null!=i.byId(r.id,document)&&(this.emit("ad-break-synced-element",{type:this.VAST,id:r.id,data:e[n]}),this.companions.loadVASTCompanionAd(r.id,e[n]))},this)},_onVastProcessComplete:function(t){this._showVastCompanions(t)},_onVastCompanionsReady:function(t){this._showVastCompanions(t)},_onVastAdPlaybackError:function(t){console.error("syncBanners::_onVastAdPlaybackError"),console.error(t),this._cleanAdVastListeners()},_cleanAdVastListeners:function(){this.vastProcessCompleteListener&&this.vastProcessCompleteListener.remove(),this.vastErrorListener&&this.vastErrorListener.remove()},_filterCompanionAds:function(t){if(!t||!t.length)return t;var e=[],i=[];return n.forEach(this._vastCompanionPriority,function(r){n.forEach(t,function(t){var a=t.width+t.height;t.resourceType.name==r&&n.indexOf(i,a)<0&&(e.push(t),i.push(a))},this)},this),e}});return u}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1),n(2),n(12),n(7),n(11)],r=function(t,e,n,i,r){var a=t([n],{constructor:function(t,e){this.inherited(arguments)},start:function(){this.emit("module-ready",{id:"TargetSpot",module:this})},embed:function(t,n,a,o){var s=r.create("div",{id:"tsWrapper"},i.byId(t,document));window.ts_ready=e.hitch(this,this._tsReady);try{window.ts_swf_embed(s.id,this._getComponentSettings(n,a,o))}catch(t){this.emit("module-error",{id:"TargetSpot",error:"Error in targetSpot::embed: "+t.message})}},_getComponentSettings:function(t,e,n){return{w:300,h:250,prl:n,pageDomain:"player.tritondigital.com",htmlBanner:0,s:t,v:e}},playAd:function(t){window.ts_streamEvent({eventType:"playAd",eventDuration:t})},playPreroll:function(){window.ts_streamEvent({eventType:"tsPlayPreroll"})},interruptAd:function(){window.ts_streamEvent({eventType:"interruptAd"})},setStationId:function(t){window.ts_setStation({stationId:t})},setVolume:function(t){window.ts_setVolume({volume:t})},ts_setTargeting:function(t,e){window.ts_setTargeting({eventType:t,eventData:e})},_tsReady:function(){window.ts_mutePlayer=e.hitch(this,this._ts_mutePlayer),window.ts_unmutePlayer=e.hitch(this,this._ts_unmutePlayer),window.ts_noAds=e.hitch(this,this._ts_noAds),window.ts_noPreRoll=e.hitch(this,this._ts_noPreRoll),window.ts_adStarted=e.hitch(this,this._ts_adStarted),window.ts_adFinished=e.hitch(this,this._ts_adFinished),this.emit("targetspot-ready")},_ts_mutePlayer:function(t){this.emit("targetspot-mute")},_ts_unmutePlayer:function(){this.emit("targetspot-unmute")},_ts_noAds:function(){this.emit("targetspot-no-ads")},_ts_noPreRoll:function(){this.emit("targetspot-no-preroll")},_ts_adStarted:function(t){this.emit("targetspot-ad-started")},_ts_adFinished:function(t){this.emit("targetspot-ad-finished")}});return a}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r,a=n(112),o=n(14);i=[n(1),n(2),n(15),n(12)],r=function(t,e,n,i){var r=t([i],{constructor:function(t,e){this.inherited(arguments),this.see=null,this.seeRegApi=null,this.seeMetaApi=null,this.tenantId=t.tenantId,this.seeApiUrl=t.seeApiUrl,this.platform=new o(t.platformId)},start:function(){this.emit("module-ready",{id:"UserRegistration",module:this})},init:function(){var t=(void 0!=this.seeApiUrl?this.seeApiUrl:this.platform.endpoint.see).replace("{tenantId}",this.tenantId),i=new n;a.js(t,function(){i.resolve()});var r=e.hitch(this,this._seeApiLoaded),o=e.hitch(this,this._seeApiError);i.then(function(){window._See.bindEvent("RegApiReady",r)},function(t){o()},function(t){})},_seeApiLoaded:function(){this.see=window._See,this.seeRegApi=window._See?window._See.regApi:void 0,this.seeMetaApi=window._See?window._See.metaApi:void 0,this.see.source="StreamingPlayer",void 0!=this.see?this.see.bindOrFireEvent("metaApiReady",e.hitch(this,function(){this.emit("see-api-loaded"),this.isLoggedIn()&&this.emit("user-logged-in")})):this._seeApiError()},_seeApiError:function(){this.emit("see-api-error")},login:function(t){if(void 0==this.seeRegApi)return void this.emit("see-regapi-not-ready");switch(t.method){case"Userpwd":this.seeRegApi.login(t.username,t.password,t.persist,e.hitch(this,this._onLoginHandler));break;case"Facebook":this.seeRegApi.loginFacebook(e.hitch(this,this._onLoginHandler));break;case"Google":this.seeRegApi.loginGoogle(e.hitch(this,this._onLoginHandler))}},connectSocial:function(t){if(void 0==this.seeRegApi)return void this.emit("see-regapi-not-ready");switch(t){case"Facebook":this.seeRegApi.loginFacebook(e.hitch(this,this._onConnectSocialHandler));break;case"Google":this.seeRegApi.loginGoogle(e.hitch(this,this._onConnectSocialHandler))}},removeSocial:function(t){if(void 0==this.seeRegApi)return void this.emit("see-regapi-not-ready");switch(t){case"Facebook":this.seeRegApi.removeSocial("facebook",e.hitch(this,this._onRemoveSocialHandler));break;case"Google":this.seeRegApi.removeSocial("google",e.hitch(this,this._onRemoveSocialHandler))}},isLoggedIn:function(){return this.see.config.user.is_loggedin},logout:function(){return void 0==this.seeRegApi?void this.emit("see-regapi-not-ready"):void this.seeRegApi.logout(e.hitch(this,this._onLogoutHandler))},forgotPassword:function(t,n){return void 0==this.seeRegApi?void this.emit("see-regapi-not-ready"):void this.seeRegApi.forgotPassword(t,e.hitch(this,this._onForgotPasswordHandler),n)},resetPassword:function(t,n){return void 0==this.seeRegApi?void this.emit("see-regapi-not-ready"):void this.seeRegApi.resetPassword(t,n,e.hitch(this,this._onResetPasswordHandler))},getUserDetails:function(t){return void 0==this.seeRegApi?void this.emit("see-regapi-not-ready"):void this.seeRegApi.getUserDetails(e.hitch(this,this._onGetUserDetailsHandler),t)},registerFields:function(){return void 0==this.seeRegApi?void this.emit("see-regapi-not-ready"):void this.seeRegApi.registerFields(e.hitch(this,this._onRegisterFieldsHandler))},registerUser:function(t,n){return void 0==this.seeRegApi?void this.emit("see-regapi-not-ready"):void this.seeRegApi.registerUser(t,n,e.hitch(this,this._onRegisterUserHandler))},updateUser:function(t){return void 0==this.seeRegApi?void this.emit("see-regapi-not-ready"):void this.seeRegApi.updateUser(t,e.hitch(this,this._onUpdateUserHandler))},completeRegisterUser:function(t){return void 0==this.seeRegApi?void this.emit("see-regapi-not-ready"):void this.seeRegApi.completeRegister(t,e.hitch(this,this._onLoginHandler))},setLanguage:function(t){this.see.setLanguage(t,e.hitch(this,this._onSetLanguageHandler))},getStatusLevel:function(t,n){return void 0==this.seeRegApi?void this.emit("see-regapi-not-ready"):void this.seeRegApi.getStatusLevel(t,n,e.hitch(this,this._onGetStatusLevel))},getLadderStatusLevels:function(t){return void 0==this.seeRegApi?void this.emit("see-regapi-not-ready"):void this.seeRegApi.getLadderStatusLevels(t,e.hitch(this,this._onGetLadderStatusLevels))},metaSet:function(t,n,i){return this.seeMetaApi?(i="object"==typeof i?i:{},i.callback=e.hitch(this,this._onMetaSetHandler),void this.seeMetaApi.set(t,n,i)):void this.emit("see-metaapi-not-ready")},metaGet:function(t,n){return this.seeMetaApi?(n="object"==typeof n?n:{},n.callback=e.hitch(this,this._onMetaGetHandler),void this.seeMetaApi.get(t,n)):void this.emit("see-metaapi-not-ready")},metaUpdate:function(t,n){if(!this.seeMetaApi)return void this.emit("see-metaapi-not-ready");var i={callback:e.hitch(this,this._onMetaUpdateHandler)};this.seeMetaApi.update(t,n,i)},metaDelete:function(t){if(!this.seeMetaApi)return void this.emit("see-metaapi-not-ready");var n={callback:e.hitch(this,this._onMetaDeleteHandler)};this.seeMetaApi.del(t,n)},metaClear:function(t){if(!this.seeMetaApi)return void this.emit("see-metaapi-not-ready");var n={callback:e.hitch(this,this._onMetaClearHandler)};this.seeMetaApi.clear(t,n)},metaList:function(t,n){return this.seeMetaApi?(n="object"==typeof n?n:{},n.callback=e.hitch(this,this._onMetaListHandler),void this.seeMetaApi.list(t,n)):void this.emit("see-metaapi-not-ready")},triggerEvent:function(t){return this.see?void this.see.triggerEvent(t):void this.emit("see-not-ready")},bindEvent:function(t,e,n){return this.see?void this.see.bindEvent(t,e,n):void this.emit("see-not-ready")},bindOrFireEvent:function(t,e,n){return this.see?void this.see.bindOrFireEvent(t,e,n):void this.emit("see-not-ready")},cookieTest:function(){return this.see?(callback=e.hitch(this,this._onCookieTest),void this.see.cookieTest(callback)):void this.emit("see-not-ready")},isGamesEnabled:function(){return this.see?this.see.config.tenant.playerShowGames:(this.emit("see-not-ready"),!1)},getUserConfig:function(){return this.see?this.see.config.user:(this.emit("see-not-ready"),!1)},getConfig:function(){return this.see?this.see.config:(this.emit("see-not-ready"),!1)},initWidgets:function(t){return this.see?void this.see.initWidgets(t):(this.emit("see-not-ready"),!1)},_onLoginHandler:function(t){switch(t.status){case"PASS":this.emit("user-logged-in",t.context);break;case"FAIL":this.emit("user-login-error",t.context);break;case"DELAY":}},_onConnectSocialHandler:function(t){switch(t.status){case"PASS":this.emit("social-connect",t.context);break;case"FAIL":this.emit("social-connect-error",t.context);break;case"DELAY":}},_onRemoveSocialHandler:function(t){switch(t.status){case"PASS":this.emit("social-remove",t.context);break;case"FAIL":this.emit("social-remove-error",t.context);break;case"DELAY":}},_onLogoutHandler:function(t){switch(t.status){case"PASS":this.emit("user-logged-out",t.context);break;case"FAIL":this.emit("user-logout-error",t.context);break;case"DELAY":}},_onForgotPasswordHandler:function(t){switch(t.status){case"PASS":this.emit("forgot-password",t.context);break;case"FAIL":this.emit("forgot-password-error",t.context);break;case"DELAY":}},_onResetPasswordHandler:function(t){switch(t.status){case"PASS":this.emit("reset-password",t.context);break;case"FAIL":this.emit("reset-password-error",t.context);break;case"DELAY":}},_onGetUserDetailsHandler:function(t){switch(t.status){case"PASS":this.emit("user-details",t.context);break;case"FAIL":this.emit("user-details-error",t.context);break;case"DELAY":}},_onRegisterFieldsHandler:function(t){switch(t.status){case"PASS":this.emit("register-fields",t.context);break;case"FAIL":this.emit("register-fields-error",t.context);break;case"DELAY":}},_onRegisterUserHandler:function(t){switch(t.status){case"PASS":this.emit("register-user",t.context);break;case"FAIL":this.emit("register-user-error",t.context);break;case"DELAY":}},_onUpdateUserHandler:function(t){switch(t.status){case"PASS":this.emit("user-update",t.context);break;case"FAIL":this.emit("user-update-error",t.context);break;case"DELAY":}},_onSetLanguageHandler:function(t){switch(t.status){case"PASS":this.emit("language-change-success",t.context);break;case"FAIL":this.emit("language-change-error",t.context)}},_onGetStatusLevel:function(t){switch(t.status){case"PASS":this.emit("user-status",t.context);break;case"FAIL":this.emit("user-status-error",t.context);break;case"DELAY":}},_onGetLadderStatusLevels:function(t){switch(t.status){case"PASS":this.emit("status-levels",t.context);break;case"FAIL":this.emit("status-levels-error",t.context);break;case"DELAY":}},_onMetaSetHandler:function(t){switch(t.status){case"PASS":this.emit("meta-set",t.context);break;case"FAIL":this.emit("meta-set-error",t.context)}},_onMetaGetHandler:function(t){switch(t.status){case"PASS":this.emit("meta-get",t.context);break;case"FAIL":this.emit("meta-get-error",t.context)}},_onMetaUpdateHandler:function(t){switch(t.status){case"PASS":this.emit("meta-update",t.context);break;case"FAIL":this.emit("meta-update-error",t.context)}},_onMetaDeleteHandler:function(t){switch(t.status){case"PASS":this.emit("meta-delete",t.context);break;case"FAIL":this.emit("meta-delete-error",t.context)}},_onMetaClearHandler:function(t){switch(t.status){case"PASS":this.emit("meta-clear",t.context);break;case"FAIL":this.emit("meta-clear-error",t.context)}},_onMetaListHandler:function(t){switch(t.status){case"PASS":this.emit("meta-list",t.context);break;case"FAIL":this.emit("meta-list-error",t.context)}},_onCookieTest:function(t){switch(t.status){case"PASS":this.emit("cookie-test-pass");break;case"FAIL":this.emit("cookie-test-fail")}}});return r}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r,a=n(21);i=[n(1),n(2),n,n(15),n(3),n(11),n(7),n(30),n(108),n(9),n(124),n(126),n(125),n(32)],r=function(t,e,n,i,r,o,s,u,l,c,d,h,f,p){var v=t([],{AD_PLAYBACK_START:"ad-playback-start",AD_PLAYBACK_COMPLETE:"ad-playback-complete",AD_PLAYBACK_DESTROY:"ad-playback-destroy",AD_PLAYBACK_ERROR:"ad-playback-error",AD_COUNTDOWN:"ad-countdown",AD_QUARTILE:"ad-quartile",VAST_COMPANIONS_READY:"vast-companions-ready",VAST_COMPANIONS_VPAID:"vast-companions-vpaid",AD_BLOCKER_DETECTED:"ad-blocker-detected",STREAMING_GUIDE_VERSION:"1.5.1",constructor:function(t,n,i,a){this.target=i,this.config=a,this.playerNode=s.byId(this.config.playerId,document),this.tech=t,this.techType=n,this.adModules=[],this.currentAdModule=null,this.xhrProv=new c,a.adBlockerDetected||(this.imaSdkModule=new d(i,a),this.VASTAdModule=new h(i,a),this.mediaAdModule=new f(i,a)),this.inherited(arguments),this._adPrerollTime=0,this._adPrerollTimeIntervall=null,this._adParser=null,this._adSource=null,this._adFormat=null,r(this.target,"ad-playback-start",e.hitch(this,this._onAdPlaybackStart)),r(this.target,"ad-playback-error",e.hitch(this,this._onAdPlaybackError))},playAd:function(t,e){var n=this;if(e.adBreak!==!0&&a.init(),this.config.adBlockerDetected)return void(1!=e.adBreak&&this.target.emit(this.AD_BLOCKER_DETECTED,{data:{message:"playAd function has been disabled because Ad Blocker is activated"}}));if(n._adPrerollTime=0,this._adPrerollTimeIntervall=setInterval(function(){n._adPrerollTime+=10},10),this.destroyAd(!1),t==u.TRITON_AD_PLATFORM&&(t=u.VAST_AD,e=this._convertTAPConfigToVast(e)),e.url&&(e.url=this._generateUrl(e)),null==e.url&&void 0==e.mediaUrl&&void 0==e.rawXML&&void 0==e.sid)return void this.target.emit(this.AD_PLAYBACK_ERROR,{data:{type:null,error:!0}});if(e.url?(e.fallbackToVastPlugin=e.url.toLowerCase().indexOf("daast")>-1||e.url.toLowerCase().indexOf("/ondemand/ars")>-1,this._adFormat=e.url.toLowerCase().indexOf("daast")>-1?"DAAST":"VAST",this._adSource=e.url.toLowerCase().indexOf("daast")>-1?"TAP":e.sid?"CM3":"Others"):e.rawXML&&(e.fallbackToVastPlugin=e.rawXML.toLowerCase().indexOf("daast")>-1,this._adFormat=e.rawXML.toLowerCase().indexOf("daast")>-1?"DAAST":"VAST",this._adSource=e.rawXML.toLowerCase().indexOf("daast")>-1?"TAP":e.sid?"CM3":"Others"),"Flash"==this.techType)return void this.tech.playAd(t,e);switch(this.tech.prepare("adModule"),t){case u.VAST_AD:e.adBreak||e.fallbackToVastPlugin?(this._initAdModule(this.VASTAdModule,e),this._adParser="VASTModule"):(this._initAdModule(this.imaSdkModule,e),this._adParser="IMA");break;case u.MEDIA_AD:this._initAdModule(this.mediaAdModule,e),this._adParser="Direct";break;default:this.target.emit(this.AD_PLAYBACK_COMPLETE,{data:{type:null,error:!1}})}},skipAd:function(){return"Flash"==this.techType?void this.tech.skipAd():void(this.currentAdModule&&this.currentAdModule.skipAd())},destroyAd:function(t){return"Flash"==this.techType?void this.tech.destroyAd(t):void(this.currentAdModule&&this.currentAdModule.destroyAd(t))},_initAdModule:function(t,n){this._removeListeners(),this.currentAdModule=t,this._mediaAdReadyHandler=r(this.target,this.currentAdModule.AD_MODULE_MEDIA_READY,e.hitch(this,this._onMediaAdReady)),this._mediaAdEmptyHandler=r(this.target,this.currentAdModule.AD_MODULE_MEDIA_EMPTY,e.hitch(this,this._onMediaAdEmpty)),this._adCountdownHandler=r(this.target,this.currentAdModule.AD_MODULE_COUNTDOWN,e.hitch(this,this._onAdModuleCountdown)),this._adModulePlaybackStartHandler=r(this.target,this.currentAdModule.AD_MODULE_PLAYBACK_START,e.hitch(this,this._onAdModulePlaybackStart)),this._adModulePlaybackCompleteHandler=r(this.target,this.currentAdModule.AD_MODULE_PLAYBACK_COMPLETE,e.hitch(this,this._onAdModulePlaybackComplete)),this._adModulePlaybackDestroyHandler=r(this.target,this.currentAdModule.AD_MODULE_PLAYBACK_DESTROY,e.hitch(this,this._onAdModulePlaybackDestroy)),this._adModulePlaybackErrorHandler=r(this.target,this.currentAdModule.AD_MODULE_PLAYBACK_ERROR,e.hitch(this,this._onAdModulePlaybackError)),this._adModuleQuartileHandler=r(this.target,this.currentAdModule.AD_MODULE_QUARTILE,e.hitch(this,this._onAdModuleQuartile)),this._adModuleCompanionsHandler=r(this.target,this.currentAdModule.AD_MODULE_COMPANIONS,e.hitch(this,this._onAdModuleCompanions)),this._adModuleClickTrackingHandler=r(this.target,this.currentAdModule.AD_MODULE_CLICK_TRACKING,e.hitch(this,this._onAdModuleClickTracking)),this._adModuleVastEmptyHandler=r(this.target,this.currentAdModule.AD_MODULE_VAST_EMPTY,e.hitch(this,this._onAdError)),this._adModuleVastErrorHandler=r(this.target,this.currentAdModule.AD_MODULE_VAST_ERROR,e.hitch(this,this._onAdError)),this.currentAdModule.init(n),this.currentAdModule.initAdListeners(this.tech.html5OnDemand)},_onAdPlaybackStart:function(t){var e={};e[p.DIM_AD_SOURCE]=this._adSource,e[p.DIM_AD_FORMAT]=this._adFormat,e[p.DIM_AD_PARSER]=this._adParser?this._adParser:t.data&&t.data.playerData&&t.data.playerData.adParser?t.data.playerData.adParser:"";var n={};n[p.METRIC_CONNECTION_TIME]=this._adPrerollTime,p.requestGA(p.CATEGORY_AD,p.ACTION_PREROLL,p.LABEL_SUCCESS,e,n),clearInterval(this._adPrerollTimeIntervall)},_onAdPlaybackError:function(t){var e={};e[p.DIM_AD_SOURCE]=this._adSource,e[p.DIM_AD_FORMAT]=this._adFormat,e[p.DIM_AD_PARSER]=this._adParser?this._adParser:t.data&&t.data.playerData&&t.data.playerData.adParser?t.data.playerData.adParser:"";var n={};n[p.METRIC_CONNECTION_TIME]=this._adPrerollTime,p.requestGA(p.CATEGORY_AD,p.ACTION_PREROLL,p.LABEL_ERROR,e,n),clearInterval(this._adPrerollTimeIntervall)},_onAdModuleCompanions:function(t){this.currentAdModule.emit(this.VAST_COMPANIONS_READY,t.data)},_onAdModulePlaybackStart:function(t){this._callImpressions(),this.currentAdModule.emit(this.AD_PLAYBACK_START,{type:t.data.type})},_onAdModulePlaybackComplete:function(t){this._removeListeners(),this.currentAdModule.emit(this.AD_PLAYBACK_COMPLETE,{type:t.data.type})},_onAdModulePlaybackDestroy:function(t){this._removeListeners(),this.currentAdModule.emit(this.AD_PLAYBACK_DESTROY)},_onAdModulePlaybackError:function(t){this._removeListeners(),this.currentAdModule.emit(this.AD_PLAYBACK_ERROR,{type:t.data.type})},_onAdModuleCountdown:function(t){this.currentAdModule.emit(this.AD_COUNTDOWN,{countDown:t.data.countDown})},_onAdModuleClickTracking:function(t){if(null!=t&&void 0!=t.data){var e=void 0!=t.data.clickThrough?t.data.clickThrough:null,n=void 0!=t.data.clickTrackings?t.data.clickTrackings:null,i=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/,r=i.test(e);if(null!=e&&1==r&&window.open(e),n)for(var a=n.length,o=0;o<a;o++)this.xhrProv.request(n[o],null,{method:"GET",handleAs:"text",headers:{"X-Requested-With":null,"Content-Type":"text/plain; charset=utf-8"}})}},_onAdModuleQuartile:function(t){if(this.currentAdModule.getVastInlineAd())for(var e=this.currentAdModule.getVastInlineAd().getLinearTrackingEvents(this.currentAdModule._defaultSequence),n=e.length,i=0;i<n;i++)if(e[i].type==t.adQuartile)for(var r=e[i].urls,a=r.length,o=0;o<a;o++)this.xhrProv.request(r[o],null,{method:"GET",handleAs:"text",headers:{"X-Requested-With":null,"Content-Type":"text/plain; charset=utf-8"}})},_onMediaAdReady:function(t){var e=t.data,n=this._getSupportedMediaFile(e);null!=n?this.tech.html5OnDemand.playAd({adServerType:e.adServerType,mediaUrl:n.url,mediaFormat:n.format,clickThrough:e.clickThrough,clickTrackings:e.clickTrackings}):this.target.emit(this.AD_PLAYBACK_ERROR,{data:{type:e.adServerType,error:!1}})},_onMediaAdEmpty:function(t){var e=t.data;this._removeListeners(),this.currentAdModule.emit(this.AD_PLAYBACK_COMPLETE,{type:e.adServerType,error:!1})},_onAdError:function(t){var e=t.data;this._removeListeners(),this.currentAdModule.emit(this.AD_PLAYBACK_ERROR,{type:e.adServerType,error:!1})},_removeListeners:function(){this._mediaAdReadyHandler&&this._mediaAdReadyHandler.remove(),this._mediaAdEmptyHandler&&this._mediaAdEmptyHandler.remove(),this._adCountdownHandler&&this._adCountdownHandler.remove(),this._adModulePlaybackStartHandler&&this._adModulePlaybackStartHandler.remove(),this._adModulePlaybackCompleteHandler&&this._adModulePlaybackCompleteHandler.remove(),this._adModulePlaybackErrorHandler&&this._adModulePlaybackErrorHandler.remove(),this._adModuleQuartileHandler&&this._adModuleQuartileHandler.remove(),this._adModuleClickTrackingHandler&&this._adModuleClickTrackingHandler.remove(),this._adModuleVastEmptyHandler&&this._adModuleVastEmptyHandler.remove(),this._adModuleVastErrorHandler&&this._adModuleVastErrorHandler.remove(),this._adModuleVastProcessCompleteHandler&&this._adModuleVastProcessCompleteHandler.remove(),this._adModuleCompanionsHandler&&this._adModuleCompanionsHandler.remove(),this._adModulePlaybackDestroyHandler&&this._adModulePlaybackDestroyHandler.remove()},_callImpressions:function(){if(this.currentAdModule.getVastInlineAd()){var t=this.currentAdModule.getVastInlineAd().impressions;if(t){var e=t.length;if(0==e)return;for(var n=0;n<e;n++)this.xhrProv.request(t[n],null,{method:"GET",handleAs:"text",headers:{"X-Requested-With":null,"Content-Type":"text/plain; charset=utf-8"}})}}},_getAdModuleById:function(t,e){var n=this.adModules.length;if(0==n){var i=new t(this.target,this.config);return this.adModules.push({moduleId:e,module:i}),i}for(var r=0;r<n;r++)if(this.adModules[r].moduleId==e)return this.adModules[r].module;var i=new t(this.target,this.config);return this.adModules.push({moduleId:e,module:i}),i},_getSupportedMediaFile:function(t){if(null==t)return null;switch(t.adServerType){case u.VAST_AD:case u.MEDIA_AD:if(null==t.mediaFiles||0==t.mediaFiles.length)return null;for(var e=t.mediaFiles,n=e.length,i=0;i<n;i++){this._isTypeSupported("video","video/mp4;");if(("audio/aac"==e[i].type||"aac"==e[i].url.split(".").pop())&&this._isTypeSupported("audio","audio/aac;"))return{url:e[i].url,format:"audio"};if(("audio/mp4"==e[i].type||"m4a"==e[i].url.split(".").pop())&&this._isTypeSupported("audio","audio/mp4;"))return{url:e[i].url,format:"audio"};if(("audio/mpeg"==e[i].type||"mp3"==e[i].url.split(".").pop())&&this._isTypeSupported("audio","audio/mpeg;"))return{url:e[i].url,format:"audio"};if(("audio/wav"==e[i].type||"wav"==e[i].url.split(".").pop())&&this._isTypeSupported("audio","audio/wav;"))return{url:e[i].url,format:"audio"};if(("audio/ogg"==e[i].type||"oga"==e[i].url.split(".").pop()||"ogg"==e[i].url.split(".").pop())&&this._isTypeSupported("audio","audio/ogg;"))return{url:e[i].url,format:"audio"};if("audio/webm"==e[i].type&&this._isTypeSupported("audio","audio/webm;"))return{url:e[i].url,format:"audio"};if(("video/mp4"==e[i].type||"mp4"==e[i].url.split(".").pop()||"m4v"==e[i].url.split(".").pop())&&this._isTypeSupported("video","video/mp4;"))return console.log({url:e[i].url,format:"video"}),{url:e[i].url,format:"video"};if(("video/ogg"==e[i].type||"ogv"==e[i].url.split(".").pop())&&this._isTypeSupported("video","video/ogg;"))return{url:e[i].url,format:"video"};if(("video/webm"==e[i].type||"webm"==e[i].url.split(".").pop())&&this._isTypeSupported("video","video/webm;"))return{url:e[i].url,format:"video"}}return null;default:return null}},_isTypeSupported:function(t,e){var n=s.byId("tdplayer_od_videonode",document);return!!n.canPlayType&&n.canPlayType(e)},_convertTAPConfigToVast:function(t){var e=new l;return t.url=e.getVastUri(t),t},_generateUrl:function(t){if(void 0!=t&&void 0!=t.url){if(t.url.indexOf("/ondemand/ars")>-1&&void 0!=t.trackingParameters){var n;void 0!=t.trackingParameters.tdsdk&&(n=t.url.indexOf("?")>-1?"&":"?",t.url+=n+"tdsdk="+t.trackingParameters.tdsdk),void 0!=t.trackingParameters.position&&void 0!=t.trackingParameters.position.coords.latitude&&void 0!=t.trackingParameters.position.coords&&void 0!=t.trackingParameters.position.coords.longitude&&(n=t.url.indexOf("?")>-1?"&":"?",t.url+=n+"lat="+parseFloat(t.trackingParameters.position.coords.latitude.toFixed(1))+"&long="+parseFloat(t.trackingParameters.position.coords.longitude.toFixed(1))),
void 0!=t.trackingParameters.banners&&(n=t.url.indexOf("?")>-1?"&":"?",t.url+=n+"banners="+t.trackingParameters.banners);var i=e.clone(t.trackingParameters);delete i.tdsdk,delete i.position,delete i.banners,delete i.pname,delete i.pversion;for(var r in i)n=t.url.indexOf("?")>-1?"&":"?",t.url+=n+r+"="+encodeURIComponent(i[r]);return t.url+=n+"version="+this.STREAMING_GUIDE_VERSION,t.url}return t.url}}});return v}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1),n(2),n(42),n(61),n(30),n(4)],r=function(t,e,n,i,r,a){var o=t([n],{VAST_COMPANIONS_PRIORITY:["static","iframe","html"],IMA_LIBRARY_URL:"//imasdk.googleapis.com/js/sdkloader/ima3.js",_videoContent:null,_countdownTimer:null,_adDisplayContainer:null,_currentAd:null,_adsLoader:null,_adsRequest:null,_adsManager:null,_currentAdConfig:null,constructor:function(t,e){this.config=e,this._imaSdkLoaded=!1},init:function(t){this._destroy(),this._currentAdConfig=t,this.createAdDisplayContainer()},destroyAd:function(t){this._destroy(t),0!=t&&this.emit(this.AD_MODULE_PLAYBACK_DESTROY)},skipAd:function(){this._adsManager&&this._adsManager.getAdSkippableState()?this._adsManager.skip():this.emit(this.AD_MODULE_SKIPPABLE_STATE,{state:this._adsManager.getAdSkippableState()})},createAdDisplayContainer:function(){this._videoContent=document.getElementById("tdplayer_od_videonode"),this._adDisplayContainer||(this._adDisplayContainer=new google.ima.AdDisplayContainer(document.getElementById(this.config.playerId),this._videoContent),this._adDisplayContainer.initialize()),this.requestAds()},requestAds:function(){if(this._adsLoader=new google.ima.AdsLoader(this._adDisplayContainer),this._adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,e.hitch(this,this._onAdsManagerLoaded),!1),this._adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,e.hitch(this,this._onAdError),!1),this._adsRequest=new google.ima.AdsRequest,void 0!==this._currentAdConfig.url)this._adsRequest.adTagUrl=this._currentAdConfig.url+(void 0==this.config.allowPersonalisedAds||this.config.allowPersonalisedAds?"":"&npa=1");else if(void 0!==this._currentAdConfig.sid){var t=new i,n=t.getVastUri(t.ENDPOINT,this._currentAdConfig.sid,this._currentAdConfig.mediaformat);this._adsRequest.adTagUrl=n}else void 0!==this._currentAdConfig.rawXML&&(this._adsRequest.adsResponse=this._currentAdConfig.rawXML);this._adsLoader.requestAds(this._adsRequest)},_onAdsManagerLoaded:function(t){var n=this,i=new google.ima.AdsRenderingSettings;if(this._adsManager=t.getAdsManager(this._videoContent,i),void 0!==this._adsManager){this._adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,e.hitch(this,this._onCompanionsReady)),this._adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,e.hitch(this,this._onStarted)),this._adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,e.hitch(this,this._onAllAdsCompleted)),this._adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,e.hitch(this,this._onContentResumeRequested)),this._adsManager.addEventListener(google.ima.AdEvent.Type.RESUMED,e.hitch(this,this._onResumed)),this._adsManager.addEventListener(google.ima.AdEvent.Type.PAUSED,e.hitch(this,this._onAdPaused)),this._adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,e.hitch(this,this._onQuartileEvent)),this._adsManager.addEventListener(google.ima.AdEvent.Type.FIRST_QUARTILE,e.hitch(this,this._onQuartileEvent)),this._adsManager.addEventListener(google.ima.AdEvent.Type.MIDPOINT,e.hitch(this,this._onQuartileEvent)),this._adsManager.addEventListener(google.ima.AdEvent.Type.THIRD_QUARTILE,e.hitch(this,this._onQuartileEvent)),this._adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETED,e.hitch(this,this._onQuartileEvent)),this._adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,e.hitch(this,this._onAdError));var r=document.getElementById(this.config.playerId).offsetWidth,a=document.getElementById(n.config.playerId).offsetHeight;this.resizeHandler=setInterval(function(){r!=document.getElementById(n.config.playerId).offsetWidth&&(r=document.getElementById(n.config.playerId).offsetWidth,a=document.getElementById(n.config.playerId).offsetHeight,n._adsManager.resize(r,a,google.ima.ViewMode.NORMAL),n._resizeVideoTag(r,a))},250),this._resizeVideoTag(r,a);try{var o=document.getElementById(this.config.playerId).offsetWidth,s=document.getElementById(this.config.playerId).offsetHeight;this._adsManager.init(o,s,google.ima.ViewMode.NORMAL),this._adsManager.start()}catch(t){}}},_resizeVideoTag:function(t,e){var n=document.getElementById("tdplayer_od_videonode");void 0!=a("ios")&&n?(n.width=t,n.height=e):n&&(n.style.width="0px",n.style.height="0px")},_onAdPaused:function(){this._removeCountdownTimer(),this._adsManager.resume()},_onResumed:function(t){var e=this;this._adsManager&&(this._countdownTimer=setInterval(function(){var t=parseInt(e._adsManager.getRemainingTime());e._onRemainingTimeChanged(t)},250))},_onStarted:function(t){var e=this;this._removeCountdownTimer(),this._currentAd=t.getAd(),this._countdownTimer=setInterval(function(){var t=parseInt(e._adsManager.getRemainingTime());e._onRemainingTimeChanged(t)},250),this.emit(this.AD_MODULE_PLAYBACK_START,{type:r.VAST_AD})},_onAllAdsCompleted:function(t){this._destroy(),this.emit(this.AD_MODULE_PLAYBACK_COMPLETE,{type:r.VAST_AD})},_onRemainingTimeChanged:function(t){this.emit(this.AD_MODULE_COUNTDOWN,{countDown:t})},_onContentResumeRequested:function(t){this._removeCountdownTimer()},_removeCountdownTimer:function(){this._countdownTimer&&clearInterval(this._countdownTimer)},_onAdError:function(t){this.emit(this.AD_MODULE_PLAYBACK_ERROR,{error:{message:t.getError().getMessage(),code:t.getError().getErrorCode()}}),this._destroy()},_onCompanionsReady:function(t){if(void 0!=this.config.companionAdSelectionSettings&&void 0!=this.config.companionAdSelectionSettings.elements){for(var e=new google.ima.CompanionAdSelectionSettings,n=void 0!==this.config.companionAdSelectionSettings.vastCompanionPriority?this.config.companionAdSelectionSettings.vastCompanionPriority:this.VAST_COMPANIONS_PRIORITY,i=[],r=0;r<this.config.companionAdSelectionSettings.elements.length;r++)for(var a=this.config.companionAdSelectionSettings.elements[r],o=0;o<n.length;o++){var s=n[o];switch(e.creativeType=google.ima.CompanionAdSelectionSettings.CreativeType.ALL,e.sizeCriteria=google.ima.CompanionAdSelectionSettings.SizeCriteria.SELECT_EXACT_MATCH,s){case"static":e.resourceType=google.ima.CompanionAdSelectionSettings.ResourceType.STATIC;break;case"html":e.resourceType=google.ima.CompanionAdSelectionSettings.ResourceType.HTML;break;case"iframe":e.resourceType=google.ima.CompanionAdSelectionSettings.ResourceType.IFRAME}var u=t.getAd().getCompanionAds(a.width,a.height,e);if(u.length>0){var l=new Object;l.width=a.width,l.height=a.height,l.content=u[0].getContent(),l.resourceType=new Object,l.resourceType.name=s,i.push(l);break}}i.length>0&&this.emit(this.AD_MODULE_COMPANIONS,{companions:i})}},_onQuartileEvent:function(t){switch(t.type){case google.ima.AdEvent.Type.STARTED:this.emit(this.AD_MODULE_QUARTILE,{adQuartile:this.adQuartile.getQuartileByIndex(0),error:!1});break;case google.ima.AdEvent.Type.FIRST_QUARTILE:this.emit(this.AD_MODULE_QUARTILE,{adQuartile:this.adQuartile.getQuartileByIndex(1),error:!1});break;case google.ima.AdEvent.Type.MIDPOINT:this.emit(this.AD_MODULE_QUARTILE,{adQuartile:this.adQuartile.getQuartileByIndex(2),error:!1});break;case google.ima.AdEvent.Type.THIRD_QUARTILE:this.emit(this.AD_MODULE_QUARTILE,{adQuartile:this.adQuartile.getQuartileByIndex(3),error:!1});break;case google.ima.AdEvent.Type.COMPLETED:this.emit(this.AD_MODULE_QUARTILE,{adQuartile:this.adQuartile.getQuartileByIndex(4),error:!1})}},_destroy:function(t){t&&(this._adDisplayContainer&&this._adDisplayContainer.destroy(),this._adsLoader&&this._adsLoader.destroy(),this._adsManager&&this._adsManager.destroy()),this.resizeHandler&&clearInterval(this.resizeHandler),this._resizeVideoTag(0,0),this._videoContent&&("function"==typeof this._videoContent.exitFullscreen?this._videoContent.exitFullscreen():"function"==typeof this._videoContent.webkitExitFullscreen?this._videoContent.webkitExitFullscreen():"function"==typeof this._videoContent.mozCancelFullScreen?this._videoContent.mozCancelFullScreen():"function"==typeof this._videoContent.msExitFullscreen&&this._videoContent.msExitFullscreen()),this._removeCountdownTimer()}});return o}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1),n(2),n(42),n(30)],r=function(t,e,n,i){var r=t([n],{constructor:function(t,e){this.target=t,this.config=e},init:function(t){this.inherited(arguments),void 0!=t.mediaUrl?this.playAdUrl(t):this.emit(this.AD_MODULE_MEDIA_EMPTY,{adServerType:i.MEDIA_AD})},playAdUrl:function(t){var e=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/,n=e.test(t.mediaUrl);if(1==n){var r=void 0!=t.linkUrl?t.linkUrl:null;this.emit(this.AD_MODULE_MEDIA_READY,{adServerType:i.MEDIA_AD,mediaFiles:[{url:t.mediaUrl}],clickThrough:r,clickTrackings:null})}else this.emit(this.AD_MODULE_MEDIA_EMPTY,{adServerType:i.MEDIA_AD})}});return r}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r,a=n(16);i=[n(1),n(2),n(6),n(54),n(9),n(42),n(131),n(132),n(130),n(30),n(61)],r=function(t,e,n,i,r,o,s,u,l,c,d){var h=t([o],{VAST_1_ROOT:"VideoAdServingTemplate",VAST_2_ROOT:"VAST",DAAST_ROOT:"DAAST",VERSION_1_0:"1.0",VERSION_2_0:"2.0",DAAST_VERSION_1_0:"DAAST_1.0",constructor:function(t,e){this.target=t,this._mediaAdBlankFiles=null,this._skipMediaAdPlayback=!1,this._adBreak=!1,this._defaultSequence=-1,this._vastWrapperAd=null,this._wrapperCachedData=null,this.vastParser=null,this.vastDocument=null,this.onPlaybackStartHandler=null,this.onQuartileReachedHandler=null,this.onClickTrackingElementClickedHandler=null,this.xhrProv=new r},init:function(t){this.inherited(arguments),this._adBreak=!!t.adBreak,this._skipMediaAdPlayback=void 0!=t.skipMediaAdPlayback&&t.skipMediaAdPlayback,this._defaultSequence=void 0!=t.sequence?t.sequence:-1,this.loadVast(t)},loadVast:function(t){if(void 0!=t.rawXML)this._parseVast(a.parse(t.rawXML).documentElement);else if(void 0!=t.url)this.setMediaAdBlankFiles(null),this.xhrProv.request(t.url,t.url,this._getRequestArgs(),e.hitch(this,this._onVastLoadComplete),e.hitch(this,this._onVastLoadError));else if(void 0!=t.sid){var n=new d,i=n.getVastUri(n.ENDPOINT,this.config.sid,t.mediaformat);this.setMediaAdBlankFiles(n.mediaAdBlankFiles),this.xhrProv.request(i,i,this._getRequestArgs(),e.hitch(this,this._onVastLoadComplete),e.hitch(this,this._onVastLoadError))}},setMediaAdBlankFiles:function(t){this._mediaAdBlankFiles=t},getVastInlineAd:function(){return this.vastDocument.vastAd.inlineAd},_onVastLoadComplete:function(t,e){this._parseVast(e)},_onVastLoadError:function(t,e){console.error("vastAdModule::_onVastLoadError - url ="+t+" - error="+e),null!=this._vastWrapperAd&&(null!=this._vastWrapperAd.error&&""!=this._vastWrapperAd.error&&this.xhrProv.request(this._vastWrapperAd.error,this._vastWrapperAd.error,this._getRequestArgs(),null,null),this._vastWrapperAd=null),0==this._adBreak&&this.emit(this.AD_MODULE_VAST_ERROR,{error:e})},_parseVast:function(t){if(this.vastDocument=null,this.vastParser=null,void 0==t||void 0==t.nodeName)return void this.emit(this.AD_MODULE_VAST_EMPTY,{adServerType:c.VAST_AD});var e=this._getVersion(t.nodeName);if(this.vastParser=this._getVastParser(e),null!=this.vastParser&&(this.vastDocument=this.vastParser.parse(t)),null!=this.vastDocument)if(this._needToLoadVASTWrapper(this.vastDocument.vastAd))this._vastWrapperAd=this.vastDocument.vastAd.wrapperAd,this._cacheWrapperData(this._vastWrapperAd),this.loadVast({url:this.vastDocument.vastAd.wrapperAd.vastAdTagURL,skipMediaAdPlayback:this._skipMediaAdPlayback,sequence:this._defaultSequence});else{if(null!=this._vastWrapperAd&&(this.vastDocument.vastAd.inlineAd.addWrapperLinearTrackingEvents(this._wrapperCachedData.wrapperTrackingEvents),this.vastDocument.vastAd.inlineAd.addImpressions(this._wrapperCachedData.wrapperImpressions),this.vastDocument.vastAd.inlineAd.addWrapperLinearVideoClickTracking(this._wrapperCachedData.wrapperVideoClickTracking),this._vastWrapperAd=null,this._wrapperCachedData=null),this._vastWrapperAd=null,void 0!=this.vastDocument.vastAd.inlineAd.getCompanionAds(this._defaultSequence)&&this.vastDocument.vastAd.inlineAd.getCompanionAds(this._defaultSequence).length>0&&this.emit(this.AD_MODULE_COMPANIONS,{companions:this.vastDocument.vastAd.inlineAd.getCompanionAds(this._defaultSequence)}),1==this._skipMediaAdPlayback)return;var n=this._checkMediaAdBlankFiles(this.vastDocument.vastAd.inlineAd.getLinearMediaFiles(this._defaultSequence));if(null!=n){var i=this.vastDocument.vastAd.inlineAd.getLinearVideoClick(this._defaultSequence),r=null!=i?i.clickThrough:null,a=null!=i?i.clickTrackings:null;this.emit(this.AD_MODULE_MEDIA_READY,{adServerType:c.VAST_AD,mediaFiles:n,clickThrough:r,clickTrackings:a})}else this.emit(this.AD_MODULE_MEDIA_EMPTY,{adServerType:c.VAST_AD})}else this.emit(this.AD_MODULE_VAST_EMPTY,{adServerType:c.VAST_AD})},_getVersion:function(t){switch(t){case this.VAST_1_ROOT:return this.VERSION_1_0;case this.VAST_2_ROOT:return this.VERSION_2_0;case this.DAAST_ROOT:return this.DAAST_VERSION_1_0}return null},_cacheWrapperData:function(t){null==this._wrapperCachedData&&(this._wrapperCachedData={wrapperImpressions:[],wrapperTrackingEvents:[],wrapperVideoClickTracking:[]});var e=this._vastWrapperAd.getLinearTrackingEvents(this._defaultSequence);null!=e&&e.length>0&&(this._wrapperCachedData.wrapperTrackingEvents=this._wrapperCachedData.wrapperTrackingEvents.concat(e));var n=this._vastWrapperAd.impressions;null!=n&&n.length>0&&(this._wrapperCachedData.wrapperImpressions=this._wrapperCachedData.wrapperImpressions.concat(n));var i=this._vastWrapperAd.getLinearVideoClick(this._defaultSequence);null!=i&&i.clickTrackings.length>0&&(this._wrapperCachedData.wrapperVideoClickTracking=this._wrapperCachedData.wrapperVideoClickTracking.concat(i.clickTrackings))},_needToLoadVASTWrapper:function(t){return null!=t.wrapperAd&&null!=t.wrapperAd.vastAdTagURL},_getVastParser:function(t){switch(t){case this.VERSION_1_0:return null==this.vastParser&&(this.vastParser=new s(this.target)),this.vastParser;case this.VERSION_2_0:return null==this.vastParser&&(this.vastParser=new u(this.target)),this.vastParser;case this.DAAST_VERSION_1_0:return null==this.vastParser&&(this.vastParser=new l(this.target)),this.vastParser}return null},_checkMediaAdBlankFiles:function(t){if(null==t)return null;for(var e=[],n=t.length,i=0;i<n;i++)this._isMediaAdBlankFile(t[i].url)||e.push(t[i]);return e},_isMediaAdBlankFile:function(t){if(null==this._mediaAdBlankFiles||0==this._mediaAdBlankFiles.length)return!1;for(var e=t.substr(t.lastIndexOf("/")+1),n=this._mediaAdBlankFiles.length,i=0;i<n;i++)if(this._mediaAdBlankFiles[i]==e)return!0;return!1},_getRequestArgs:function(){return{handleAs:"xml",preventCache:!1,withCredentials:!0,headers:{"X-Requested-With":null,"Content-Type":"text/plain; charset=utf-8"}}}});return h}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1),n(44)],r=function(t,e){var n=t(e,{constructor:function(){this.logoTile=null,this.logoTitle=null,this.logoArtist=null,this.logoURL=null}});return n}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1)],r=function(t){var e=t([],{constructor:function(){this.trackingEvents=[],this.companionAds=[],this.nonLinearAds=[],this.video=null,this.inherited(arguments)},addWrapperLinearTrackingEvents:function(t){this.trackingEvents=this.trackingEvents.concat(t)},addWrapperLinearVideoClickTracking:function(t){null!=this.video&&(this.video.videoClick.clickTrackings=this.video.videoClick.clickTrackings.concat(t))},addImpression:function(t){this.impressions.push(t)},addImpressions:function(t){null!=t&&(this.impressions=this.impressions.concat(t))},getLinearTrackingEvents:function(t){var t=t;return void 0==t&&(t=-1),this.trackingEvents},getCompanionAdUrl:function(t,e,n,i){var r=this.getCompanionAds(i);if(null==r)return null;for(var a=!1,o=r.length,s=0;s<o;s++)if(a=r[s].width==t&&r[s].height==e,1!=a){if(null==n)return r[s];if(r[s].resourceType==n)return r[s]}return null},getCompanionAds:function(t){var t=t;return void 0==t&&(t=-1),this.companionAds},getLinearMediaFiles:function(t){var t=t;return void 0==t&&(t=-1),this.video.mediaFiles},getLinearMediaFileByIndex:function(t,e){var e=e;void 0==e&&(e=-1);var t=t;return void 0==t&&(t=0),null!=this.video&&null!=this.video.mediaFiles[t]?this.video.mediaFiles[t]:null},getLinearVideoClick:function(t){var t=t;return void 0==t&&(t=-1),this.video.videoClick},getNonLinearAds:function(t){var t=t;return void 0==t&&(t=-1),this.nonLinearAds},getLinearDuration:function(t){var t=t;return void 0==t&&(t=-1),this.video.duration},addCompanionAd:function(t){this.companionAds.push(t)},addNonLinearAd:function(t){this.nonLinearAds.push(t)}});return e}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1)],r=function(t){var e=t([],{constructor:function(){this.duration=null,this.adID=null,this.videoClick=null,this.mediaFiles=[]}});return e}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r,a=n(16);i=[n(1),n(52),n(51),n(45),n(43),n(67),n(50),n(66),n(68),n(69),n(127),n(48),n(49),n(46),n(47)],r=function(t,e,n,i,r,o,s,u,l,c,d,h,f,p,v){var m=t([e],{AD:"Ad",IMPRESSION:"Impression",DAAST_AD_TAG_URI:"DAASTAdTagURI",CREATIVES:"Creatives",CREATIVE:"Creative",constructor:function(){this.vastDocument=null,this.inherited(arguments)},parse:function(t){this.vastDocument=new i;var e=t.getElementsByTagName(this.AD);if(void 0==e[0])return null;var a=e[0].getAttribute(n.ID),o=new r(a);return this.vastDocument.vastAd=o,this._parseAdTag(e),this.vastDocument},_parseAdTag:function(t){for(var e=t.length,i=0;i<e;i++)t[i].getElementsByTagName(n.INLINE).length>0?this.vastDocument.vastAd.inlineAd=this._parseInLineTag(t[i].getElementsByTagName(n.INLINE)):t[i].getElementsByTagName(n.WRAPPER).length>0?this.vastDocument.vastAd.wrapperAd=this._parseWrapperTag(t[i].getElementsByTagName(n.WRAPPER)):console.error("VAST - parseAdTag() - Unsupported VAST tag")},_parseInLineTag:function(t){for(var e=new o,i=t[0].childNodes,r=i.length,s=0;s<r;s++)i[s].nodeName==n.AD_SYSTEM?e.adSystem=a.textContent(i[s]):i[s].nodeName==n.AD_TITLE?e.adTitle=a.textContent(i[s]):i[s].nodeName==n.ERROR?e.errorURL=this.trim(a.textContent(i[s])):i[s].nodeName==n.DESCRIPTION?e.description=a.textContent(i[s]):i[s].nodeName==n.EXPIRES?e.expires=a.textContent(i[s]):i[s].nodeName==n.CATEGORY?e.category=a.textContent(i[s]):i[s].nodeName==n.SURVEY?e.survey=a.textContent(i[s]):i[s].nodeName==n.ADVERTISER&&(e.advertiser=a.textContent(i[s]));return e.impressions=this._parseImpressionTag(t[0].getElementsByTagName(this.IMPRESSION)),e.creatives=this._parseCreatives(t[0].getElementsByTagName(this.CREATIVES)),e},_parseWrapperTag:function(t){for(var e=new s,i=t[0].childNodes,r=i.length,o=0;o<r;o++)i[o].nodeName==this.DAAST_AD_TAG_URI?e.vastAdTagURL=this.trim(a.textContent(i[o])):i[o].nodeName==n.ERROR&&(e.error=this.trim(a.textContent(i[o])));return e.impressions=this._parseImpressionTag(t[0].getElementsByTagName(this.IMPRESSION)),e.creatives=this._parseCreatives(t[0].getElementsByTagName(this.CREATIVES)),e},_parseImpressionTag:function(t){var e=[];if(void 0==t)return e;for(var n=t.length,i=0;i<n;i++)e.push(this.trim(a.textContent(t[i])));return e},_parseCreatives:function(t){var e=[];if(void 0==t[0]||void 0==t[0].getElementsByTagName(this.CREATIVE))return e;for(var n=t[0].getElementsByTagName(this.CREATIVE).length,i=t[0].getElementsByTagName(this.CREATIVE),r=0;r<n;r++){var a=this._parseCreative(i[r]);e.push(a)}return e},_parseCreative:function(t){var e=new u;return e.adID=t.getAttribute(n.AD_ID),e.id=t.getAttribute(n.ID),e.sequence=t.getAttribute(n.SEQUENCE),0!=t.getElementsByTagName(n.LINEAR).length?e.linearElement=this._parseCreativeLinear(t.getElementsByTagName(n.LINEAR)):0!=t.getElementsByTagName(n.NON_LINEAR_ADS).length?e.nonLinearAds=this._parseCreativeNonLinearAds(t.getElementsByTagName(n.NON_LINEAR_ADS)):0!=t.getElementsByTagName(n.COMPANION_ADS).length&&(e.companionAds=this._parseCreativeCompanionAds(t.getElementsByTagName(n.COMPANION_ADS))),e},_parseCreativeLinear:function(t){for(var e=new l,i=t[0].childNodes,r=i.length,o=0;o<r;o++)i[o].nodeName==n.DURATION?e.duration=a.textContent(i[o]):i[o].nodeName==n.TRACKING_EVENTS?e.trackingEvents=this._parseTrackingEvents(i[o]):i[o].nodeName==n.AUDIO_INTERACTIONS?e.videoClick=this._parseVideoClick(i[o]):i[o].nodeName==n.MEDIA_FILES&&(e.mediaFiles=this._parseMediaFiles(i[o]));return e},_parseCreativeNonLinearAds:function(t){for(var e=[],i=t[0].getElementsByTagName(n.NON_LINEAR),r=i.length,o=0;o<r;o++){var s=new c;s.id=i[o].getAttribute(n.ID),s.width=i[o].getAttribute(n.WIDTH),s.height=i[o].getAttribute(n.HEIGHT),s.expandedWidth=i[o].getAttribute(n.EXPANDED_WIDTH),s.expandedHeight=i[o].getAttribute(n.EXPANDED_HEIGHT),s.scalable="true"==i[o].getAttribute(n.SCALABLE),s.maintainAspectRatio="true"==i[o].getAttribute(n.MAINTAIN_ASPECT_RATIO),s.apiFramework=i[o].getAttribute(n.API_FRAMEWORK),s.minSuggestedDuration=i[o].getAttribute(n.MIN_SUGGESTED_DURATION);for(var u=i[o].childNodes,l=u.length,d=0;d<l;d++)if(u[d].nodeName==n.AD_PARAMETERS)s.adParameters=a.textContent(u[d]);else if(u[d].nodeName==n.NON_LINEAR_CLICK_THROUGH)s.clickThroughURL=this.trim(a.textContent(u[d]));else if(u[d].nodeName==n.IFRAME_RESOURCE){var h=new v;h.name=h.IFRAME,s.resourceType=h,s.url=this.trim(a.textContent(u[d]))}else if(u[d].nodeName==n.HTML_RESOURCE){var h=new v;h.name=h.HTML,s.resourceType=h,s.code=a.textContent(u[d])}else if(u[d].nodeName==n.STATIC_RESOURCE){var h=new v;h.name=h.STATIC,s.resourceType=h,s.creativeType=u[d].getAttribute(n.CREATIVE_TYPE),s.url=this.trim(a.textContent(u[d]))}e.push(s)}return s},_parseCreativeCompanionAds:function(t){for(var e=[],i=t[0].getElementsByTagName(n.COMPANION),r=i.length,o=0;o<r;o++){var s=new d;s.id=i[o].getAttribute(n.ID),s.width=i[o].getAttribute(n.WIDTH),s.height=i[o].getAttribute(n.HEIGHT),s.expandedWidth=i[o].getAttribute(n.EXPANDED_WIDTH),s.expandedHeight=i[o].getAttribute(n.EXPANDED_HEIGHT),s.logoTile=i[o].getAttribute(n.LOGO_TILE),s.logoTitle=i[o].getAttribute(n.LOGO_TITLE),s.logoArtist=i[o].getAttribute(n.LOGO_ARTIST),s.logoTile=i[o].getAttribute(n.LOGO_TILE);for(var u=i[o].childNodes,l=u.length,c=0;c<l;c++)if(u[c].nodeName==n.AD_PARAMETERS)s.adParameters=a.textContent(u[c]);else if(u[c].nodeName==n.ALT_TEXT)s.altText=a.textContent(u[c]);else if(u[c].nodeName==n.COMPANION_CLICK_THROUGH)s.clickThroughURL=this.trim(a.textContent(u[c]));else if(u[c].nodeName==n.IFRAME_RESOURCE){var h=new v;h.name=h.IFRAME,s.resourceType=h,s.url=this.trim(a.textContent(u[c]))}else if(u[c].nodeName==n.HTML_RESOURCE){var h=new v;h.name=h.HTML,s.resourceType=h,s.code=a.textContent(u[c])}else if(u[c].nodeName==n.STATIC_RESOURCE){var h=new v;h.name=h.STATIC,s.resourceType=h,s.creativeType=u[c].getAttribute(n.CREATIVE_TYPE),s.url=this.trim(a.textContent(u[c]))}else if(u[c].nodeName==n.TRACKING_EVENTS){var f=u[c].getElementsByTagName(n.TRACKING),p=f.length;if(p>0){var m=f[0].getAttribute(n.EVENT);m==n.CREATIVE_VIEW&&(s.creativeView=this.trim(a.textContent(u[c])))}}e.push(s)}return e},_parseTrackingEvents:function(t){for(var e=[],i=t.getElementsByTagName(n.TRACKING),r=i.length,o=0;o<r;o++){var s=new h;s.urls.push(a.textContent(i[o])),s.type=i[o].getAttribute(n.EVENT),e.push(s)}return e},_parseVideoClick:function(t){for(var e=new f,i=t.childNodes,r=i.length,o=0;o<r;o++)i[o].nodeName==n.CLICK_THROUGH?e.clickThrough=this.trim(a.textContent(i[o])):i[o].nodeName==n.CLICK_TRACKING?e.clickTrackings.push(this.trim(a.textContent(i[o]))):i[o].nodeName==n.CUSTOM_CLICK&&e.customClicks.push(this.trim(a.textContent(i[o])));return e},_parseMediaFiles:function(t){for(var e=[],i=t.getElementsByTagName(n.MEDIA_FILE),r=i.length,o=0;o<r;o++){var s=new p;s.id=i[o].getAttribute(n.ID),s.bitrate=i[o].getAttribute(n.BITRATE),s.minbitrate=i[o].getAttribute(n.MIN_BITRATE),s.maxbitrate=i[o].getAttribute(n.MAX_BITRATE),s.codec=i[o].getAttribute(n.CODEC),s.height=i[o].getAttribute(n.HEIGHT),s.width=i[o].getAttribute(n.WIDTH),s.delivery=i[o].getAttribute(n.DELIVERY),s.type=i[o].getAttribute(n.TYPE),s.scalable="true"==i[o].getAttribute(n.SCALABLE),s.maintainAspectRatio="true"==i[o].getAttribute(n.MAINTAIN_ASPECT_RATIO),s.apiFramework=i[o].getAttribute(n.API_FRAMEWORK),s.url=this.trim(a.textContent(i[o])),e.push(s)}return e}});return m}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r,a=n(16);i=[n(1),n(52),n(51),n(45),n(43),n(128),n(50),n(129),n(49),n(48),n(44),n(46),n(47)],r=function(t,e,n,i,r,o,s,u,l,c,d,h,f){var p=t([e],{AD:"Ad",VAST_AD_TAG_URL:"VASTAdTagURL",VIDEO:"Video",URL:"URL",CODE:"Code",RESOURCE_TYPE:"resourceType",constructor:function(){this.vastDocument=null,this.inherited(arguments)},parse:function(t){this.vastDocument=new i;var e=t.getElementsByTagName(this.AD);if(void 0==e[0])return null;var a=e[0].getAttribute(n.ID),o=new r(a);return this.vastDocument.vastAd=o,this._parseAdTag(e),this.vastDocument},_parseAdTag:function(t){for(var e=t.length,i=0;i<e;i++)t[i].getElementsByTagName(n.INLINE).length>0?this.vastDocument.vastAd.inlineAd=this._parseInLineTag(t[i].getElementsByTagName(n.INLINE)):t[i].getElementsByTagName(n.WRAPPER).length>0?this.vastDocument.vastAd.wrapperAd=this._parseWrapperTag(t[i].getElementsByTagName(n.WRAPPER)):console.error("VAST - parseAdTag() - Unsupported VAST tag")},_parseInLineTag:function(t){for(var e=new o,i=t[0].childNodes,r=i.length,s=0;s<r;s++)i[s].nodeName==n.AD_SYSTEM?e.adSystem=a.textContent(i[s]):i[s].nodeName==n.AD_TITLE?e.adTitle=a.textContent(i[s]):i[s].nodeName==n.ERROR&&(e.errorURL=this.trim(a.textContent(i[s])));e.video=this._parseVideo(t[0].getElementsByTagName(this.VIDEO)),e.impressions=this._parseImpressions(t[0].getElementsByTagName(n.IMPRESSION));var u=t[0].getElementsByTagName(n.TRACKING_EVENTS);return void 0!=u&&u.length>0&&(e.trackingEvents=this._parseTrackingEvents(u[0])),e.companionAds=this._parseCompanionsAds(t[0].getElementsByTagName(n.COMPANION_ADS)),e.nonLinearAds=this._parseNonLinearAds(t[0].getElementsByTagName(n.NON_LINEAR_ADS)),e},_parseImpressions:function(t){var e=[];if(void 0==t||0==t.length)return e;for(var n=t[0].getElementsByTagName(this.URL).length,i=t[0].getElementsByTagName(this.URL),r=0;r<n;r++)e.push(a.textContent(i[r]));return e},_parseVideo:function(t){for(var e=new u,i=t[0].childNodes,r=i.length,o=0;o<r;o++)i[o].nodeName==n.DURATION?e.duration=a.textContent(i[o]):i[o].nodeName==n.AD_ID?e.adID=a.textContent(i[o]):i[o].nodeName==n.VIDEO_CLICKS?e.videoClick=this._parseVideoClick(i[o]):i[o].nodeName==n.MEDIA_FILES&&(e.mediaFiles=this._parseMediaFiles(i[o]));return e},_parseVideoClick:function(t){for(var e=new l,i=t.childNodes,r=i.length,a=null,o=0;o<r;o++)i[o].nodeName==n.CLICK_THROUGH?(a=this._parseURLTags(i[o]),a.length>0&&(e.clickThrough=a[0])):i[o].nodeName==n.CLICK_TRACKING?e.clickTrackings=this._parseURLTags(i[o]):i[o].nodeName==n.CUSTOM_CLICK&&(e.customClicks=this._parseURLTags(i[o]));return e},_parseMediaFiles:function(t){for(var e,i=[],r=t.getElementsByTagName(n.MEDIA_FILE),a=r.length,o=0;o<a;o++)e=new h,e.id=r[o].getAttribute(n.ID),e.bitrate=r[o].getAttribute(n.BITRATE),e.height=r[o].getAttribute(n.HEIGHT),e.width=r[o].getAttribute(n.WIDTH),e.delivery=r[o].getAttribute(n.DELIVERY),e.type=r[o].getAttribute(n.TYPE),e.url=this.trim(this.getTagValue(r[o],"URL")),i.push(e);return i},_parseTrackingEvents:function(t){for(var e,i,r,o=[],s=t.getElementsByTagName(n.TRACKING),u=s.length,l=0;l<u;l++){e=new c,i=s[l].getElementsByTagName(this.URL),r=i.length;for(var d=0;d<r;d++)e.urls.push(this.trim(a.textContent(i[d])));e.type=s[l].getAttribute(n.EVENT),o.push(e)}return o},_parseCompanionsAds:function(t){for(var e,i,r=[],o=t[0].getElementsByTagName(n.COMPANION),s=o.length,u=null,l=0;l<s;l++){i=new d,i.id=o[l].getAttribute(n.ID),i.width=o[l].getAttribute(n.WIDTH),i.height=o[l].getAttribute(n.HEIGHT),i.expandedWidth=o[l].getAttribute(n.EXPANDED_WIDTH),i.expandedHeight=o[l].getAttribute(n.EXPANDED_HEIGHT);var c=new f;c.name=o[l].getAttribute(this.RESOURCE_TYPE).toLowerCase(),i.resourceType=c,i.creativeType=o[l].getAttribute(n.CREATIVE_TYPE),u=o[l].childNodes,e=u.length;for(var h=0;h<e;h++)u[h].nodeName==n.AD_PARAMETERS?i.adParameters=a.textContent(u[h]):u[h].nodeName==n.ALT_TEXT?i.altText=a.textContent(u[h]):u[h].nodeName==n.COMPANION_CLICK_THROUGH?i.clickThroughURL=this.trim(a.textContent(u[h])):u[h].nodeName==this.URL?i.url=this.trim(a.textContent(u[h])):u[h].nodeName==this.CODE&&(i.code=this.trim(a.textContent(u[h])));r.push(i)}return r},_parseNonLinearAds:function(t){return null},_parseWrapperTag:function(t){for(var e=new s,i=t[0].childNodes,r=i.length,o=0;o<r;o++)i[o].nodeName==this.VAST_AD_TAG_URL?e.vastAdTagURL=this.trim(a.textContent(i[o])):i[o].nodeName==n.VIDEO_CLICKS?e.videoClicks=this._parseVideoClick(i[o]):i[o].nodeName==n.ERROR?e.error=this.trim(a.textContent(i[o])):i[o].nodeName==n.TRACKING_EVENTS&&(e.trackingEvents=this._parseTrackingEvents(i[o]));return e.impressions=this._parseImpressions(t[0].getElementsByTagName(n.IMPRESSION)),e},_parseURLTags:function(t){for(var e=[],n=t.childNodes,i=n.length,r=0;r<i;r++)n[r].nodeName==this.URL&&e.push(this.trim(a.textContent(n[r])));return e}});return p}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r,a=n(16);i=[n(1),n(52),n(51),n(45),n(43),n(67),n(50),n(66),n(68),n(69),n(44),n(48),n(49),n(46),n(47)],r=function(t,e,n,i,r,o,s,u,l,c,d,h,f,p,v){var m=t([e],{AD:"Ad",IMPRESSION:"Impression",VAST_AD_TAG_URI:"VASTAdTagURI",CREATIVES:"Creatives",CREATIVE:"Creative",constructor:function(){this.vastDocument=null,this.inherited(arguments)},parse:function(t){this.vastDocument=new i;var e=t.getElementsByTagName(this.AD);if(void 0==e[0])return null;var a=e[0].getAttribute(n.ID),o=new r(a);return this.vastDocument.vastAd=o,this._parseAdTag(e),this.vastDocument},_parseAdTag:function(t){for(var e=t.length,i=0;i<e;i++)t[i].getElementsByTagName(n.INLINE).length>0?this.vastDocument.vastAd.inlineAd=this._parseInLineTag(t[i].getElementsByTagName(n.INLINE)):t[i].getElementsByTagName(n.WRAPPER).length>0?this.vastDocument.vastAd.wrapperAd=this._parseWrapperTag(t[i].getElementsByTagName(n.WRAPPER)):console.error("VAST - parseAdTag() - Unsupported VAST tag")},_parseInLineTag:function(t){for(var e=new o,i=t[0].childNodes,r=i.length,s=0;s<r;s++)i[s].nodeName==n.AD_SYSTEM?e.adSystem=a.textContent(i[s]):i[s].nodeName==n.AD_TITLE?e.adTitle=a.textContent(i[s]):i[s].nodeName==n.ERROR?e.errorURL=this.trim(a.textContent(i[s])):i[s].nodeName==n.DESCRIPTION&&(e.description=a.textContent(i[s]));return e.impressions=this._parseImpressionTag(t[0].getElementsByTagName(this.IMPRESSION)),e.creatives=this._parseCreatives(t[0].getElementsByTagName(this.CREATIVES)),e},_parseWrapperTag:function(t){for(var e=new s,i=t[0].childNodes,r=i.length,o=0;o<r;o++)i[o].nodeName==this.VAST_AD_TAG_URI?e.vastAdTagURL=this.trim(a.textContent(i[o])):i[o].nodeName==n.ERROR&&(e.error=this.trim(a.textContent(i[o])));return e.impressions=this._parseImpressionTag(t[0].getElementsByTagName(this.IMPRESSION)),e.creatives=this._parseCreatives(t[0].getElementsByTagName(this.CREATIVES)),e},_parseImpressionTag:function(t){var e=[];if(void 0==t)return e;for(var n=t.length,i=0;i<n;i++)e.push(this.trim(a.textContent(t[i])));return e},_parseCreatives:function(t){var e=[];if(void 0==t[0]||void 0==t[0].getElementsByTagName(this.CREATIVE))return e;for(var n=t[0].getElementsByTagName(this.CREATIVE).length,i=t[0].getElementsByTagName(this.CREATIVE),r=0;r<n;r++){var a=this._parseCreative(i[r]);e.push(a)}return e},_parseCreative:function(t){var e=new u;return e.adID=t.getAttribute(n.AD_ID),e.id=t.getAttribute(n.ID),e.sequence=t.getAttribute(n.SEQUENCE),0!=t.getElementsByTagName(n.LINEAR).length?e.linearElement=this._parseCreativeLinear(t.getElementsByTagName(n.LINEAR)):0!=t.getElementsByTagName(n.NON_LINEAR_ADS).length?e.nonLinearAds=this._parseCreativeNonLinearAds(t.getElementsByTagName(n.NON_LINEAR_ADS)):0!=t.getElementsByTagName(n.COMPANION_ADS).length&&(e.companionAds=this._parseCreativeCompanionAds(t.getElementsByTagName(n.COMPANION_ADS))),
e},_parseCreativeLinear:function(t){for(var e=new l,i=t[0].childNodes,r=i.length,o=0;o<r;o++)i[o].nodeName==n.DURATION?e.duration=a.textContent(i[o]):i[o].nodeName==n.TRACKING_EVENTS?e.trackingEvents=this._parseTrackingEvents(i[o]):i[o].nodeName==n.VIDEO_CLICKS?e.videoClick=this._parseVideoClick(i[o]):i[o].nodeName==n.MEDIA_FILES&&(e.mediaFiles=this._parseMediaFiles(i[o]));return e},_parseCreativeNonLinearAds:function(t){for(var e=[],i=t[0].getElementsByTagName(n.NON_LINEAR),r=i.length,o=0;o<r;o++){var s=new c;s.id=i[o].getAttribute(n.ID),s.width=i[o].getAttribute(n.WIDTH),s.height=i[o].getAttribute(n.HEIGHT),s.expandedWidth=i[o].getAttribute(n.EXPANDED_WIDTH),s.expandedHeight=i[o].getAttribute(n.EXPANDED_HEIGHT),s.scalable="true"==i[o].getAttribute(n.SCALABLE),s.maintainAspectRatio="true"==i[o].getAttribute(n.MAINTAIN_ASPECT_RATIO),s.apiFramework=i[o].getAttribute(n.API_FRAMEWORK),s.minSuggestedDuration=i[o].getAttribute(n.MIN_SUGGESTED_DURATION);for(var u=i[o].childNodes,l=u.length,d=0;d<l;d++)if(u[d].nodeName==n.AD_PARAMETERS)s.adParameters=a.textContent(u[d]);else if(u[d].nodeName==n.NON_LINEAR_CLICK_THROUGH)s.clickThroughURL=this.trim(a.textContent(u[d]));else if(u[d].nodeName==n.IFRAME_RESOURCE){var h=new v;h.name=h.IFRAME,s.resourceType=h,s.url=this.trim(a.textContent(u[d]))}else if(u[d].nodeName==n.HTML_RESOURCE){var h=new v;h.name=h.HTML,s.resourceType=h,s.code=a.textContent(u[d])}else if(u[d].nodeName==n.STATIC_RESOURCE){var h=new v;h.name=h.STATIC,s.resourceType=h,s.creativeType=u[d].getAttribute(n.CREATIVE_TYPE),s.url=this.trim(a.textContent(u[d]))}e.push(s)}return s},_parseCreativeCompanionAds:function(t){for(var e=[],i=t[0].getElementsByTagName(n.COMPANION),r=i.length,o=0;o<r;o++){var s=new d;s.id=i[o].getAttribute(n.ID),s.width=i[o].getAttribute(n.WIDTH),s.height=i[o].getAttribute(n.HEIGHT),s.expandedWidth=i[o].getAttribute(n.EXPANDED_WIDTH),s.expandedHeight=i[o].getAttribute(n.EXPANDED_HEIGHT);for(var u=i[o].childNodes,l=u.length,c=0;c<l;c++)if(u[c].nodeName==n.AD_PARAMETERS)s.adParameters=a.textContent(u[c]);else if(u[c].nodeName==n.ALT_TEXT)s.altText=a.textContent(u[c]);else if(u[c].nodeName==n.COMPANION_CLICK_THROUGH)s.clickThroughURL=this.trim(a.textContent(u[c]));else if(u[c].nodeName==n.IFRAME_RESOURCE){var h=new v;h.name=h.IFRAME,s.resourceType=h,s.url=this.trim(a.textContent(u[c]))}else if(u[c].nodeName==n.HTML_RESOURCE){var h=new v;h.name=h.HTML,s.resourceType=h,s.code=a.textContent(u[c])}else if(u[c].nodeName==n.STATIC_RESOURCE){var h=new v;h.name=h.STATIC,s.resourceType=h,s.creativeType=u[c].getAttribute(n.CREATIVE_TYPE),s.url=this.trim(a.textContent(u[c]))}else if(u[c].nodeName==n.TRACKING_EVENTS){var f=u[c].getElementsByTagName(n.TRACKING),p=f.length;if(p>0){s.creativeView=[];for(var m=0;m<p;m++){var g=f[m].getAttribute(n.EVENT);g==n.CREATIVE_VIEW&&s.creativeView.push(this.trim(a.textContent(f[m])))}}}e.push(s)}return e},_parseTrackingEvents:function(t){for(var e=[],i=t.getElementsByTagName(n.TRACKING),r=i.length,o=0;o<r;o++){var s=new h;s.urls.push(a.textContent(i[o])),s.type=i[o].getAttribute(n.EVENT),e.push(s)}return e},_parseVideoClick:function(t){for(var e=new f,i=t.childNodes,r=i.length,o=0;o<r;o++)i[o].nodeName==n.CLICK_THROUGH?e.clickThrough=this.trim(a.textContent(i[o])):i[o].nodeName==n.CLICK_TRACKING?e.clickTrackings.push(this.trim(a.textContent(i[o]))):i[o].nodeName==n.CUSTOM_CLICK&&e.customClicks.push(this.trim(a.textContent(i[o])));return e},_parseMediaFiles:function(t){for(var e=[],i=t.getElementsByTagName(n.MEDIA_FILE),r=i.length,o=0;o<r;o++){var s=new p;s.id=i[o].getAttribute(n.ID),s.bitrate=i[o].getAttribute(n.BITRATE),s.height=i[o].getAttribute(n.HEIGHT),s.width=i[o].getAttribute(n.WIDTH),s.delivery=i[o].getAttribute(n.DELIVERY),s.type=i[o].getAttribute(n.TYPE),s.scalable="true"==i[o].getAttribute(n.SCALABLE),s.maintainAspectRatio="true"==i[o].getAttribute(n.MAINTAIN_ASPECT_RATIO),s.apiFramework=i[o].getAttribute(n.API_FRAMEWORK),s.url=this.trim(a.textContent(i[o])),e.push(s)}return e}});return m}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1),n(2),n(3)],r=function(t,e,n){var i=t([],{TDAS_REG_ONLY:"tdas-reg-only",constructor:function(t,i){this.mediaPlayer=t("MediaPlayer"),this.userRegistration=t("UserRegistration"),this.mediaPlayer.addHqTag(this.TDAS_REG_ONLY),n(i,"stream-start",e.hitch(this,this._onStreamStarted)),n(i,"stream-stop",e.hitch(this,this._onStreamStopped)),n(i,"user-logged-out",e.hitch(this,this._onUserLoggedOut)),n(i,"user-details",e.hitch(this,this._onUserDetails)),this.inherited(arguments)},_onStreamStarted:function(){this.userRegistration.triggerEvent("playerStart")},_onStreamStopped:function(){this.userRegistration.triggerEvent("playerStop")},_onUserLoggedOut:function(t){this._removeUserParameters(),this.mediaPlayer.disableHQ()},_onUserDetails:function(t){if(t.data||t.data){var e={};if(t.data.dob){var n=t.data.dob.split("/");e.dob=n[2]+"-"+n[0]+"-"+n[1]}t.data.gender&&(e.gender=t.data.gender.substr(0,1).toLowerCase()),t.data.zip&&(e.postalcode=t.data.zip),t.data.country&&(e.country=t.data.country),t.data.vid&&(e["tdas-vid"]=this.userRegistration.tenantId.toString()+"."+t.data.vid.toString()),t.data.tdas&&(e["tdas-utags"]=t.data.tdas["user-tags"],e["tdas-utcheck"]=t.data.tdas["user-tags-hash"]),void 0==this.mediaPlayer.config.defaultTrackingParameters&&(this.mediaPlayer.config.defaultTrackingParameters={}),this.mediaPlayer.config.defaultTrackingParameters.user=e,this.mediaPlayer.enableHQ()}},_removeUserParameters:function(){this.mediaPlayer.config.defaultTrackingParameters.user={}}});return i}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;(function(a){var o=n(18),s=n(14);i=[n(1),n(2),n(7),n(70),n(71),n(11)],r=function(t,e,n,i,r,u){var l=t([r],{eventMap:{onPlayerReady:"tech-ready",onStreamStarted:"stream-start",onStreamStopped:"stream-stop",onStreamFailed:"stream-fail",onStreamStatus:"_onStreamStatus",onTrackCuePoint:"_onTrackCuePoint",onSpeechCuePoint:"_onSpeechCuePoint",onCustomCuePoint:"_onCustomCuePoint",onTargetSpot:"targetspot-cue-point",onAdBreak:"_onAdBreakCuePoint",onSeekFailed:"seek-fail",onSeekInvalidTime:"seek-invalid-time",onTimeShiftPlaybackModeChanged:"time-shift-playback-mode-change",onTimeShiftStreamStart:"time-shift-stream-start",onTimeShiftPlayheadUpdate:"time-shift-playhead-update",onAdPlaybackStart:"ad-playback-start",onAdPlaybackComplete:"ad-playback-complete",onAdPlaybackError:"_onAdPlaybackError",onAdPlaybackSkippableState:"ad-playback-skippable-state",onAdCountdown:"ad-countdown",onAdQuartile:"ad-quartile",onVastProcessComplete:"vast-process-complete",onVastCompanionsReady:"vast-companions-ready",onConfigurationError:"configuration-error",onVideoMidRollPlaybackStart:"video-mid-roll-playback-start",onVideoMidRollPlaybackComplete:"video-mid-roll-playback-complete",onVpaidAdCompanions:"vpaid-ad-companions",onMediaLoadingStatus:"media-loading-status",onMediaPlaybackStatus:"_onMediaPlaybackStatus",onMediaPlaybackTimeUpdate:"media-playback-timeupdate",onMediaPlaybackMetadata:"media-playback-metadata",onMediaError:"_onMediaError"},statusMap:{LIVE_PAUSE:"paused",LIVE_PLAYING:"onAir",LIVE_STOP:"disconnected",LIVE_FAILED:"streamUnavailable",LIVE_BUFFERING:"buffering",LIVE_CONNECTING:"connecting",LIVE_RECONNECTING:"reconnecting",MEDIA_TIME_UPDATE:"timeupdate",MEDIA_SEEK_FAILED:"seekfailed",MEDIA_SEEK_INVALID_TIME:"seekinvalidtime",MEDIA_ENDED:"ended",MEDIA_PAUSED:"pause",MEDIA_STARTED:"play",MEDIA_STOPPED:"stop",MEDIA_RESUMED:"play",MEDIA_SEEKED:"play",MEDIA_BUFFERING:"buffering"},minimumVersionRequired:{major:10,minor:2,rev:0},CDN_URL:"sdk.listenlive.co",constructor:function(t,e,n){this.errorCode=new i,this.config.platformId=void 0!=this.config.platformId&&""!=this.config.platformId?this.config.platformId:"prod01";var r=new s(this.config.platformId);this.config.moduleDir=r.endpoint.coreModuleDir,this._isAdBreak=!1,this.inherited(arguments)},start:function(){return this.isMinimalRequiredVersion(this.minimumVersionRequired.major,this.minimumVersionRequired.minor,this.minimumVersionRequired.rev)?(this.inherited(arguments),this.swfPath=this.config.tdPlayerPath||this._getApiSwfUrl(),void this._embedFlash()):void this._onError(this.errorCode.flashModuleMap.flashPluginOutOfDate)},_getApiSwfUrl:function(){var t=this.CDN_URL;return"preprod01"==this.config.platformId?t="playercore.preprod01.streamtheworld.net":"dev01"==this.config.platformId&&(t="playerservices.dev01.stw:8082"),"//"+t+"/tdplayerapi/swf/tdplayer-api-6.0.swf"},_onReady:function(){},_onError:function(t){console.error("flash::_onError - code : "+t.code+", message : "+t.message),this.emit("tech-error",{error:t})},prepare:function(t){this.inherited(arguments)},playStream:function(t){this.inherited(arguments),"function"==typeof this.flashMovie.tdPlayer_playStream&&this.flashMovie.tdPlayer_playStream(t)},pauseStream:function(){this.inherited(arguments),this.flashMovie.tdPlayer_pauseStream()},stopStream:function(){this.inherited(arguments),"function"==typeof this.flashMovie.tdPlayer_stopStream&&this.flashMovie.tdPlayer_stopStream()},resumeStream:function(){this.inherited(arguments),"function"==typeof this.flashMovie.tdPlayer_resumeStream&&this.flashMovie.tdPlayer_resumeStream()},seekStream:function(t){this.inherited(arguments),"function"==typeof this.flashMovie.tdPlayer_seekStream&&this.flashMovie.tdPlayer_seekStream(t)},seekLive:function(){this.inherited(arguments),"function"==typeof this.flashMovie.tdPlayer_seekLive&&this.flashMovie.tdPlayer_seekLive()},setVolume:function(t){this.inherited(arguments),"function"==typeof this.flashMovie.tdPlayer_setVolume&&this.flashMovie.tdPlayer_setVolume(t)},mute:function(){this.inherited(arguments),"function"==typeof this.flashMovie.tdPlayer_mute&&this.flashMovie.tdPlayer_mute()},unMute:function(){this.inherited(arguments),"function"==typeof this.flashMovie.tdPlayer_unMute&&this.flashMovie.tdPlayer_unMute()},playAd:function(t,e){this.inherited(arguments),e.companionAdSelectionSettings=this.config.companionAdSelectionSettings,"function"==typeof this.flashMovie.tdPlayer_playAd&&this.flashMovie.tdPlayer_playAd(t,e)},skipAd:function(){this.inherited(arguments),"function"==typeof this.flashMovie.tdPlayer_skipAd&&this.flashMovie.tdPlayer_skipAd()},destroyAd:function(t){this.inherited(arguments),"function"==typeof this.flashMovie.tdPlayer_destroyAd&&this.flashMovie.tdPlayer_destroyAd(),0!=t&&this.emit("ad-playback-destroy")},playMedia:function(t){this.inherited(arguments),"function"==typeof this.flashMovie.tdPlayer_playMedia&&this.flashMovie.tdPlayer_playMedia({url:t.url,autoStart:!0})},pauseMedia:function(){this.inherited(arguments),"function"==typeof this.flashMovie.tdPlayer_pauseMedia&&this.flashMovie.tdPlayer_pauseMedia()},resumeMedia:function(){this.inherited(arguments),"function"==typeof this.flashMovie.tdPlayer_resumeMedia&&this.flashMovie.tdPlayer_resumeMedia()},stopMedia:function(){this.inherited(arguments),"function"==typeof this.flashMovie.tdPlayer_stopMedia&&this.flashMovie.tdPlayer_stopMedia()},seekMedia:function(t){this.inherited(arguments),0==t&&(t=.001),"function"==typeof this.flashMovie.tdPlayer_seekMedia&&this.flashMovie.tdPlayer_seekMedia(t)},_onStreamStatus:function(t){var e=n.byId(t.id,document);if(e){var i=o.getLocalization(),r=this.statusMap[t.code];r&&i[r]&&(t.status=i[r]),this.emit("stream-status",t,e)}},_onMediaPlaybackStatus:function(t){var e=n.byId(t.id,document);if(e){var i=o.getLocalization(),r=this.statusMap[t.code];r&&i[r]&&(t.status=i[r]),"MEDIA_STARTED"===t.code&&this.emit("media-playback-started"),this.emit("media-playback-status",t,e)}},_onMediaError:function(t){var e=n.byId(t.id,document);if(e){var i=o.getLocalization();i.error&&(t.error=i.error),this.emit("media-playback-error",t,e)}},_onTrackCuePoint:function(t){t.cuePoint&&this.connection.mount&&(t.cuePoint.mount=this.connection.mount),this.emit("track-cue-point",t)},_onSpeechCuePoint:function(t){t.cuePoint&&(t.cuePoint.mount=this.connection.mount),this.emit("speech-cue-point",t)},_onCustomCuePoint:function(t){t.cuePoint&&(t.cuePoint.mount=this.connection.mount),this.emit("custom-cue-point",t)},_onAdBreakCuePoint:function(t){this._adBreak=!!t.adBreakData.isVastInStream,this.emit("ad-break-cue-point",t)},_onAdPlaybackError:function(t){this._adBreak||this.emit("ad-playback-error",t)},_tdPlayerEvents:function(t,i){var r=n.byId(i.id,document);if("_"==this.eventMap[t].substr(0,1)){var a=e.hitch(this,this.eventMap[t]);a(i,t)}else r&&this.eventMap[t]&&this.emit(this.eventMap[t],i,r)},_embedFlash:function(){window.tdPlayerEvents=e.hitch(this,this._tdPlayerEvents);var t=o.getLocalization(),n=[{id:"directLiveStream"}];n[0].timeshift=this.config.timeShift?{active:this.config.timeShift.active||0,max_listening_time:this.config.timeShift.max_listening_time||30}:{active:0},void 0!=this.config.plugins&&this.config.plugins.length>0&&(n=n.concat(this.config.plugins));var i={playercore:{platform_id:this.config.platformId,plugins:n}};null!=this.config.moduleDir&&(i.playercore.module_dir=this.config.moduleDir),document.getElementById(this.config.playerId).innerHTML="";var r="flash_content";u.create("div",{id:r},document.getElementById(this.config.playerId)),a.embedSWF(this.swfPath,r,"100%","100%",this.minimumVersionRequired.major+"."+this.minimumVersionRequired.minor+"."+this.minimumVersionRequired.rev,!1,{isDebug:this.config.isDebug,config:encodeURIComponent(JSON.stringify(i)),id:this.playerNode.id},{scale:"showall",wmode:"transparent",allowScriptAccess:"always",allowNetworking:"all",hasPriority:"true"},!1,e.hitch(this,function(e){e.success?(this.flashMovie=e.ref,this._onReady()):this._onError({message:t.embedFailed})}))},isMinimalRequiredVersion:function(t,e,n){var i=a.getFlashPlayerVersion();return t<i.major||!(t>i.major)&&(0==e||e<i.minor||!(e>i.minor)&&(0==n||n<i.rev||!(n>i.rev)))}});return l}.apply(e,i),!(void 0!==r&&(t.exports=r))}).call(e,n(38))},function(t,e,n){var i,r;i=[n(1),n(2),n(26),n(11),n(70),n(71),n(62),n(39),n(137),n(138)],r=function(t,e,n,i,r,a,o,s,u,l){var c=t([a],{constructor:function(t,e,n){this.errorCode=new r,this.playbackStatus=null,this.html5CheckerNode=null,this.target=e,this.inherited(arguments)},start:function(){return this._isHTML5Supported()?(this.inherited(arguments),this.html5Live=new u(this.playerNode,this.config),this.html5Live.setPlaybackStatusHandler(e.hitch(this,this._onPlaybackStatus)),this.html5Live.setCuePointHandler(e.hitch(this,this._onTrackCuePoint)),this.html5Live.setAdBreakHandler(e.hitch(this,this._onAdBreak)),this.html5Live.setHlsCuePointHandler(e.hitch(this,this._onHlsCuePoint)),this.html5Live.setSpeechCuePointHandler(e.hitch(this,this._onSpeechCuePoint)),this.html5Live.setCustomCuePointHandler(e.hitch(this,this._onCustomCuePoint)),this.html5Live.setStreamStartHandler(e.hitch(this,this._onStreamStart)),this.html5Live.setStreamStopHandler(e.hitch(this,this._onStreamStop)),this.html5Live.setStreamFailedHandler(e.hitch(this,this._onStreamFailed)),this.html5OnDemand=new l(this.playerNode),this._isMediaTagInitialized=!1,void this.emit("tech-ready",{id:this.playerNode})):void this.emit("tech-error",{error:this.errorCode.html5ModuleMap.browserNotSupported})},prepare:function(t){this.inherited(arguments),this._initMediaTag()},playStream:function(t){this.inherited(arguments),this._isMediaTagInitialized||this._initMediaTag(),this.html5OnDemand.clean(),this.html5Live.play(t)},pauseStream:function(){this.inherited(arguments),this.html5Live.pause()},stopStream:function(){this.inherited(arguments),this.html5Live.stop()},resumeStream:function(){this.inherited(arguments),this.html5Live.resume()},seekStream:function(t){this.inherited(arguments)},seekLive:function(){this.inherited(arguments)},setVolume:function(t){this.inherited(arguments),this.html5Live.setVolume(t),this.html5OnDemand.setVolume(t)},mute:function(){this.inherited(arguments),this.html5Live.mute(),this.html5OnDemand.mute()},unMute:function(){this.inherited(arguments),this.html5Live.unMute(),this.html5OnDemand.unMute()},playMedia:function(t){void 0!=this.html5OnDemand&&(this.inherited(arguments),this.playbackOnDemandStatushandler=this.html5OnDemand.setPlaybackStatusHandler(e.hitch(this,this._onMediaPlaybackStatus)),this.html5OnDemand.play({mediaUrl:t.url,mediaFormat:"audio"}))},pauseMedia:function(t){void 0!=this.html5OnDemand&&(this.inherited(arguments),this.html5OnDemand.pause())},resumeMedia:function(t){void 0!=this.html5OnDemand&&(this.inherited(arguments),this.html5OnDemand.resume())},stopMedia:function(t){void 0!=this.html5OnDemand&&(this.inherited(arguments),this.html5OnDemand.stop())},seekMedia:function(t){this.inherited(arguments),this.html5OnDemand.seek(t)},_initMediaTag:function(){this.html5OnDemand.initMediaTag(),this._isMediaTagInitialized=!0},_onTrackCuePoint:function(t){t.cuePoint&&this.connection.mount&&(t.cuePoint.mount=this.connection.mount),this.emit("track-cue-point",t)},_onSpeechCuePoint:function(t){t.cuePoint&&this.connection.mount&&(t.cuePoint.mount=this.connection.mount),this.emit("speech-cue-point",t)},_onCustomCuePoint:function(t){t.cuePoint&&this.connection.mount&&(t.cuePoint.mount=this.connection.mount),this.emit("custom-cue-point",t)},_onHlsCuePoint:function(t){if(this.emit("hls-cue-point",t),t.cuePoint&&t.cuePoint.hlsTrackId){var e=this.connection.mountpoint.mediaFormat.audioTracks;e&&e.length&&e.length>=t.cuePoint.hlsTrackId&&this._currentBitrate!=e[t.cuePoint.hlsTrackId].bitRate&&(this._currentBitrate=e[t.cuePoint.hlsTrackId].bitRate,this.setCurrentTrack(e[t.cuePoint.hlsTrackId]),t.cuePoint.audioTrack=e[t.cuePoint.hlsTrackId],this.emit("stream-track-change",t))}},_onAdBreak:function(t){void 0!=t.cuePoint&&(t.adBreakData={},t.adBreakData.adVast=void 0!=t.cuePoint[s.AD_VAST]&&""!=t.cuePoint[s.AD_VAST]?t.cuePoint[s.AD_VAST]:null,t.adBreakData.cueID=void 0!=t.cuePoint[s.AD_ID]&&""!=t.cuePoint[s.AD_ID]?t.cuePoint[s.AD_ID]:null,t.adBreakData.cueTitle=void 0!=t.cuePoint[s.CUE_TITLE]&&""!=t.cuePoint[s.CUE_TITLE]?t.cuePoint[s.CUE_TITLE]:null,t.adBreakData.duration=void 0!=t.cuePoint[s.CUE_TIME_DURATION]&&""!=t.cuePoint[s.CUE_TIME_DURATION]?t.cuePoint[s.CUE_TIME_DURATION]:null,t.adBreakData.isVastInStream=!!(void 0!=t.cuePoint[s.AD_VAST_URL]&&""!=t.cuePoint[s.AD_VAST_URL]||t.cuePoint[s.AD_VAST]&&""!=t.cuePoint[s.AD_VAST]),t.adBreakData.url=void 0!=t.cuePoint[s.AD_URL]&&""!=t.cuePoint[s.AD_URL]?t.cuePoint[s.AD_URL]:null,t.adBreakData.vastUrl=void 0!=t.cuePoint[s.AD_VAST_URL]&&""!=t.cuePoint[s.AD_VAST_URL]?t.cuePoint[s.AD_VAST_URL]:null),1==t.adBreakData.isVastInStream&&(t.adBreakData.adVast||t.adBreakData.vastUrl)&&n.publish("api/request","get-vast-instream",t.adBreakData),this.emit("ad-break-cue-point",t)},_onPlaybackStatus:function(t){this.playbackStatus!=t.code&&(this.playbackStatus=t.code,this.emit("stream-status",t))},_onMediaPlaybackStatus:function(t){return"Error"==t.type?void this.emit("media-playback-error",{error:t.type,mediaElement:t.html5Node}):"timeupdate"==t.type?void this.emit("media-playback-timeupdate",{status:t.type,code:t.code,duration:parseInt(t.html5Node.duration),playedTime:parseInt(t.html5Node.currentTime),remainingTime:parseInt(t.html5Node.duration-t.html5Node.currentTime),percent:(t.html5Node.currentTime/t.html5Node.duration).toFixed(2)}):(this.emit("media-playback-status",{status:t.type,mediaElement:t.html5Node}),"play"==t.type&&this.emit("media-playback-started"),void("Ended"==t.type&&this.html5OnDemand.stop()))},_onMediaLoadingStatus:function(t){this.emit("media-loading-status",{percent:t.percent,mediaElement:t.html5Node})},_onStreamStart:function(){this._currentBitrate=null,this.setCurrentTrack(null),this.emit("stream-start")},_onStreamStop:function(){this.setCurrentTrack(null),this.emit("stream-stop")},_onStreamFailed:function(){this.setCurrentTrack(null),this.emit("stream-fail")},_isHTML5Supported:function(){this.html5CheckerNode=i.create("audio",{id:"testHtml5Node"},this.playerNode,"first");var t=!!this.html5CheckerNode.canPlayType;return null!=this.html5CheckerNode&&i.destroy(this.html5CheckerNode),t}});return c}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1),n(3),n(13),n(2),n(65)],r=function(t,e,n,i,r){var a=t([],{POLLING_DELAY:5e3,constructor:function(t){this.mount=null,this._cuePoint=[],this._adBreaks=[],this._npChecker=0,this._npTimerId=null,this._init(t)},_init:function(t){var a=null;this.nowPlayingApi=new r(t,new n),a=this.nowPlayingApi.target,this._onCuePointHandler=i.hitch(this,this._onCuePoint),this._onEmptyCuePointHandler=i.hitch(this,this._onEmptyCuePoint),null!=a&&(e(a,"cue-point",this._onCuePointHandler),e(a,"cue-point-empty",this._onEmptyCuePointHandler))},startCuePointsListener:function(t){this.mount=t,this._getNowPlaying(this.mount),this._npTimerId=setInterval(i.hitch(this,function(){i.hitch(this,this._getNowPlaying(this.mount))}),this.POLLING_DELAY)},stopCuePointsListener:function(){clearInterval(this._npTimerId),this._cuePoint.length>0&&this._cuePoint.pop()},setTrackCuePointCallback:function(t){this._trackCuePointCallback=t},setAdBreakCuePointCallback:function(t){this._adBreakCuePointCallback=t},_getNowPlaying:function(t){this.nowPlayingApi.load({mount:t,hd:!1,numberToFetch:1,eventType:"track",mode:"nowPlaying"})},_onCuePoint:function(t){this.currentCuePoint=t.data.cuePoint,this.currentCuePoint.adUrl=null,this.currentCuePoint.cueTimeDuration=parseInt(this.currentCuePoint.cueTimeDuration)>0?parseInt(this.currentCuePoint.cueTimeDuration):15e3,this.currentMount=t.data.mount;var e=this.currentCuePoint.type,n=this.currentCuePoint.timestamp;if("ad"==e){if("endbreak"==this.currentCuePoint.adType)return;this._onAdBreak(n)}else{var i=this.currentCuePoint.artistName,r=this.currentCuePoint.cueTitle;if(this._cuePoint.length>0)for(var a=0;a<this._cuePoint.length;a++)if(this._cuePoint[a].artist==i&&this._cuePoint[a].title==r)return;void 0!=i&&void 0!=r&&this._onTrack(i,r)}},_onTrack:function(t,e){this._cuePoint.length>1&&this._cuePoint.shift(),this._cuePoint.push({artist:t,title:e}),this._trackCuePointCallback({mount:this.currentMount,cuePoint:this.currentCuePoint})},_onEmptyCuePoint:function(){this._npChecker+=1,3==this._npChecker&&(clearInterval(this._npTimerId),this._npChecker=0)},_onAdBreak:function(t){var e=this._adBreakChecker(t);0==e&&this._adBreakCuePointCallback({mount:this.currentMount,cuePoint:this.currentCuePoint})},_adBreakChecker:function(t){if(0==this._adBreaks.length)return this._adBreaks.push({timestamp:t}),0==this._cuePoint.length;for(var e=0;e<this._adBreaks.length;e++)if(this._adBreaks[e].timestamp==t)return!0;return this._adBreaks.length>2&&this._adBreaks.shift(),this._adBreaks.push({timestamp:t}),!1}});return a}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r,a=n(18),o=n(28),s=n(37),u=(n(41),n(21));i=[n(1),n(13),n(2),n(11),n(19),n(7),n(40),n(72),n(153),n(136)],r=function(t,e,n,i,r,l,c,d,h,f){var p=t([e],{statusMap:{abort:{status:"connecting",code:"LIVE_CONNECTING"},canPlay:{status:"buffering",code:"LIVE_BUFFERING"},canPlayThrough:{status:"onAir",code:"LIVE_PLAYING"},dataLoading:{status:"buffering",code:"LIVE_BUFFERING"},emptied:{status:"connecting",code:"LIVE_CONNECTING"},ended:{status:"disconnected",code:"LIVE_STOP"},error:{status:"streamUnavailable",code:"LIVE_FAILED"},loadStart:{status:"connecting",code:"LIVE_CONNECTING"},pause:{status:"paused",code:"LIVE_PAUSE"},play:{status:"onAir",code:"LIVE_PLAYING"},progress:{status:"onAir",code:"LIVE_PLAYING"},reconnecting:{status:"reconnecting",code:"LIVE_RECONNECTING"},stalled:{status:"disconnected",code:"LIVE_STOP"},stop:{status:"disconnected",code:"LIVE_STOP"},suspend:{status:"connecting",code:"LIVE_CONNECTING"},waiting:{status:"buffering",code:"LIVE_BUFFERING"}},constructor:function(t,e){this.playerNode=t,this.cfg=e,this.html5Node=null,this.audioNode=null,this.connections=null,this._playbackStatusCallback=null,this._cuePointCallback=null,this._adBreakCallback=null,this._hlsCuePointCallback=null,this._speechCuePointCallback=null,this._customCuePointCallback=null,this._streamStartCallback=null,this._streamStopCallback=null,this._streamFailedCallback=null,this.isPaused=!1,this.audioEventListenersAttached=!1},setPlaybackStatusHandler:function(t){this._playbackStatusCallback=t},setCuePointHandler:function(t){this._cuePointCallback=t},setAdBreakHandler:function(t){this._adBreakCallback=t},setHlsCuePointHandler:function(t){this._hlsCuePointCallback=t},setSpeechCuePointHandler:function(t){this._speechCuePointCallback=t},setCustomCuePointHandler:function(t){this._customCuePointCallback=t},setStreamStartHandler:function(t){this._streamStartCallback=t},setStreamStopHandler:function(t){this._streamStopCallback=t},setStreamFailedHandler:function(t){this._streamFailedCallback=t},play:function(t){this._liveApiParams=t,this.mount=this._liveApiParams.mount,this.__isSidebandMetadataActivated()?(this.sidebandMetadata&&this.sidebandMetadata.destroy(),this.__activateSidebandMetadata()):this.__isASyncCuePointDispatcherActivated()&&this.__activateAsyncCuePointDispatcher(),this.__initAudioElement(),s.isSupported()&&this._liveApiParams.isHLS&&"Safari"!==o.name?u.playAudio(this._liveApiParams.url,!0,!0):u.playAudio(this._liveApiParams.url,!1,!0)},pause:function(){this.isPaused=!1,u.stop()},stop:function(){u.stop()},resume:function(){u.resume()},seekStream:function(t){},seekLive:function(){},setVolume:function(t){u.setVolume(t)},mute:function(){u.mute()},unMute:function(){u.unMute()},__initAudioElement:function(){0==this.audioEventListenersAttached&&(u.on("html5-playback-status",n.hitch(this,this.__onHTML5PlayerStatus)),this.audioEventListenersAttached=!0)},__onHTML5PlayerStatus:function(t){this.__emitPlaybackStatus(t),t.type==c.PLAY?(!this.isPaused&&this.__isSidebandMetadataActivated()&&this.sidebandMetadata?this.sidebandMetadata.init(this._liveApiParams):this.aSyncCuePointDispatcher&&this.aSyncCuePointDispatcher.startCuePointsListener(this.mount),this.isPaused=!1,this._streamStartCallback()):t.type!=c.STOP&&t.type!=c.PAUSE&&t.type!=c.ERROR&&t.type!=c.ABORT&&t.type!=c.ENDED||(this.aSyncCuePointDispatcher&&this.aSyncCuePointDispatcher.stopCuePointsListener(),t.type!=c.STOP&&t.type!=c.ERROR&&t.type!=c.ABORT||(this.__isSidebandMetadataActivated()&&this.sidebandMetadata&&this.sidebandMetadata.destroy(),this._streamStopCallback()),t.type!=c.ERROR&&t.type!=c.ENDED||this._streamFailedCallback())},__isSidebandMetadataActivated:function(){return void 0!=this._liveApiParams&&void 0!=this._liveApiParams.sbmConfig&&null!==this._liveApiParams.sbmConfig&&this._liveApiParams.sbmConfig.active&&this._liveApiParams.sbmConfig.info.active},__isASyncCuePointDispatcherActivated:function(){return void 0!=this._liveApiParams&&this._liveApiParams.sbmConfig&&this._liveApiParams.sbmConfig.aSyncCuePointFallback},__onCuePoint:function(t){this._cuePointCallback(t)},__onHlsCuePoint:function(t){this._hlsCuePointCallback(t)},__onSpeechCuePoint:function(t){this._speechCuePointCallback(t)},__onCustomCuePoint:function(t){this._customCuePointCallback(t)},__onAdBreak:function(t){this._adBreakCallback(t)},__activateSidebandMetadata:function(){this.sidebandMetadata||(this.sidebandMetadata=new h(this.audioNode)),this._liveApiParams.url=this.sidebandMetadata.getStreamConnectionUrl(this._liveApiParams.url),this.sidebandMetadata.setTrackCuePointCallback(n.hitch(this,this.__onCuePoint)),this.sidebandMetadata.setAdBreakCuePointCallback(n.hitch(this,this.__onAdBreak)),this.sidebandMetadata.setHlsCuePointCallback(n.hitch(this,this.__onHlsCuePoint)),this.sidebandMetadata.setSpeechCuePointCallback(n.hitch(this,this.__onSpeechCuePoint)),this.sidebandMetadata.setCustomCuePointCallback(n.hitch(this,this.__onCustomCuePoint)),this._liveApiParams.sbmConfig.aSyncCuePointFallback&&this.sidebandMetadata.setErrorCallback(n.hitch(this,this.__onSidebandMetadataError))},__activateAsyncCuePointDispatcher:function(){void 0==this.aSyncCuePointDispatcher&&(this.aSyncCuePointDispatcher=new f(this.cfg),this.aSyncCuePointDispatcher.setTrackCuePointCallback(n.hitch(this,this.__onCuePoint)),this.aSyncCuePointDispatcher.setAdBreakCuePointCallback(n.hitch(this,this.__onAdBreak)))},__onSidebandMetadataError:function(){u.isStopped()||(this.aSyncCuePointDispatcher||this.__activateAsyncCuePointDispatcher(),this.aSyncCuePointDispatcher.startCuePointsListener(this.mount))},__emitPlaybackStatus:function(t){if(null!=this._playbackStatusCallback){var e=a.getLocalization();if(void 0==e)return;var n=this.statusMap[t.type];n&&e[n.status]&&this._playbackStatusCallback({status:e[n.status],code:n.code})}}});return p}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r,a=n(18);i=[n(1),n(2),n(3),n(13),n(11),n(19),n(23),n(4),n(72)],r=function(t,e,n,i,r,o,s,u,l){var c=t([i],{constructor:function(t){this.playerNode=t,this.html5Player=new l,this.html5Player.on("html5-playback-status",e.hitch(this,this.__onHTML5PlayerStatus)),this.html5OnDemandNode=this.__createHTML5Elements(),this._playbackStatusCallback=null,this._clickTrackingElementClickedCallback=null,this._adServerType=null,this._clickThrough=null,this._clickTrackings=null,this.onVideoNodeClickHandler=n(this.html5OnDemandNode,"click",e.hitch(this,this.__onVideoNodeClick)),this.onVideoNodeTouchHandler=n(this.html5OnDemandNode,"touchstart",e.hitch(this,this.__onVideoNodeClick))},play:function(t){this._adServerType=null,this.html5Player.play({url:t.mediaUrl,type:t.mediaFormat,mediaNode:this.audioNode,isLive:!1})},playAd:function(t){this.__initHtml5AdPlayer(this.videoNode),this._clickThrough=t.clickThrough,this._clickTrackings=t.clickTrackings,this._adServerType=t.adServerType,this.html5Player.play({url:t.mediaUrl,type:t.mediaFormat,mediaNode:this.videoNode,isLive:!1})},skip:function(){void 0!=this.html5Player&&(this.html5Player.skip(),this.__resetHTML5ElementsStyle(this.mediaNode))},stop:function(){void 0!=this.html5Player&&this.html5Player.stop()},pause:function(){void 0!=this.html5Player&&this.html5Player.pause()},resume:function(){void 0!=this.html5Player&&this.html5Player.resume()},seek:function(t){void 0!=this.html5Player&&this.html5Player.seek(t)},setVolume:function(t){null!=this.html5Player&&this.html5Player.setVolume(t)},mute:function(){null!=this.html5Player&&this.html5Player.mute()},unMute:function(){null!=this.html5Player&&this.html5Player.unMute()},initMediaTag:function(){this.audioNode||(this.audioNode=this.__createMediaTag("audio")),this.videoNode||(this.videoNode=this.__createMediaTag("video"))},setPlaybackStatusHandler:function(t){this._playbackStatusCallback=t},setClickTrackingElementClickedHandler:function(t){this._clickTrackingElementClickedCallback=t},clean:function(){null!=this.audioNode&&(u("ie11")?(r.destroy(this.audioNode),this.audioNode=null):(o.has(this.audioNode,"src")&&o.remove(this.audioNode,"src"),"function"==typeof this.audioNode.webkitExitFullScreen&&this.audioNode.webkitExitFullScreen())),null!=this.videoNode&&(u("ie11")?(r.destroy(this.videoNode),this.videoNode=null):(o.has(this.videoNode,"src")&&o.remove(this.videoNode,"src"),"function"==typeof window.document.exitFullscreen&&window.document.fullscreen&&window.document.exitFullscreen(),this.__resetHTML5ElementsStyle(this.videoNode))),this.__createHTML5Elements()},__onHTML5PlayerStatus:function(t){t.adServerType=this._adServerType,this.__emitPlaybackStatus(t)},__emitPlaybackStatus:function(t){if(null!=this._playbackStatusCallback){var e=a.getLocalization();if(void 0==e)return;this._adServerType||"canPlayThrough"!=t.type||(t.type="play");var n=this.statusMap[t.type];n&&(statusMsg=e[n.status]?e[n.status]:n.status,codeMsg=e[n.code]?e[n.code]:n.code,this._playbackStatusCallback({type:statusMsg,code:codeMsg,html5Node:t.mediaNode,adServerType:t.adServerType}))}},__createHTML5Elements:function(){if(null==this.html5OnDemandNode){var t=r.create("div",{id:"tdplayer_ondemand"},this.playerNode,"first");return t}},__createMediaTag:function(t){if(t){var e=r.create(t,{id:"tdplayer_od_"+t+"node",type:t},this.html5OnDemandNode,"first");o.set(e,"height","0%"),o.set(e,"width","0%"),o.set(e,"x-webkit-airplay","allow");var n=r.create("source",{
id:"tdplayer_od"+t+"source"},e,"first");o.set(n,"src",""),o.set(e,"playsinline","");try{e.play().catch(function(t){}),e.pause()}catch(t){}return e}},__initHtml5AdPlayer:function(t){this.initHTMLElementsStyle(t),this.isVideoClicked=!1},__resetHTML5ElementsStyle:function(t){t&&(s.set(t,"width","0px"),s.set(t,"height","0px"),s.set(t,"display","none"))},initHTMLElementsStyle:function(t){t&&(s.set(t,"width","100%"),s.set(t,"height","100%"),s.set(t,"display","block"),s.set(this.html5OnDemandNode,"width","100%"),s.set(this.html5OnDemandNode,"height","100%"),s.set(this.html5OnDemandNode,"background-color","#000000"),s.set(this.html5OnDemandNode,"display","block"))},__onVideoNodeClick:function(t){null!=this._clickThrough&&("touchstart"==t.type&&this.onVideoNodeClickHandler.remove(),this._clickTrackingElementClickedCallback({clickThrough:this._clickThrough,clickTrackings:this._clickTrackings}))},statusMap:{canPlay:{status:"buffering",code:"MEDIA_BUFFERING"},canPlayThrough:{status:"buffering",code:"MEDIA_BUFFERING"},dataLoading:{status:"buffering",code:"MEDIA_BUFFERING"},emptied:{status:"buffering",code:"MEDIA_BUFFERING"},ended:{status:"ended",code:"MEDIA_ENDED"},error:{status:"error",code:"MEDIA_ERROR"},loadStart:{status:"buffering",code:"MEDIA_BUFFERING"},pause:{status:"pause",code:"MEDIA_PAUSED"},play:{status:"play",code:"MEDIA_STARTED"},stalled:{status:"stop",code:"MEDIA_STOPPED"},stop:{status:"stop",code:"MEDIA_STOPPED"},suspend:{status:"buffering",code:"MEDIA_BUFFERING"},waiting:{status:"buffering",code:"MEDIA_BUFFERING"},timeupdate:{status:"timeupdate",code:"MEDIA_TIME_UPDATE"}}});return c}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e){function n(t){function e(t,e){t.url=e.url?e.url._text:null,t.mount=e.mount?e.mount._text:null}this.url=null,this.mount=null,e(this,t)}t.exports=n},function(t,e){function n(t){function e(t,e){t.index=parseInt(e._attr.index._value),t.codec=e._attr.codec._value,t.bitRate=parseInt(e._attr.bitrate._value),t.sampleRate=parseInt(e._attr.samplerate._value),t.codec=e._attr.codec._value,t.channels=parseInt(e._attr.channels._value),t.isMP3=t.codec.indexOf("mp3")!==-1,t.isAAC=t.codec.indexOf("aac")!==-1}this.index=null,this.codec=null,this.bitRate=null,this.sampleRate=null,this.codec=null,this.channels=null,e(this,t)}t.exports=n},function(t,e,n){function i(t){if(this.streamingConnections=t,this.totalIteration=1,this.first=!1,this.last=!1,this.streamingConnectionIndex=0,r.isEmpty(this.streamingConnections))throw new Error("ConnectionIterator::constructor At least one connection is needed.");this.reset=function(){this.streamingConnectionIndex=0},this.current=function(){return this.streamingConnections[this.streamingConnectionIndex]},this.next=function(){return this.first=!1,this.streamingConnectionIndex++,this.last=r.last(this.streamingConnections)===this.streamingConnections[this.streamingConnectionIndex],this.current()},this.hasLooped=function(){return this.last},this.isLastConnectionByMount=function(){var t=r.groupBy(this.streamingConnections,"mount"),e=t[this.current().mount].length;return this.totalIteration===e?(this.totalIteration=1,!0):(this.totalIteration++,!1)},this.reset()}var r=n(8);t.exports=i},function(t,e,n){function i(t,e,n,i,c,h,f,p){function v(t,e){return r.flatMap(t,function(t){return r.flatMap(t.servers,function(n){return t.transports.map(function(i){var a=m(t),o=y(t);return{url:n+"/"+t.mount+(i.mountSuffix?i.mountSuffix:"")+("html5"===e.toLowerCase()?a:""),mount:t.mount,isGeoBlocked:t.status.isGeoBlocked,isAudioAdaptive:t.mediaFormat.isAudioAdaptive,alternateContent:t.alternateContent,mimeType:o,format:t.format,uuidEnabled:r.some(t.metrics,function(t){return"uuid"===t.name}),sendPageUrl:t.sendPageURL,hasVideo:t.mediaFormat.hasVideo,type:t.mediaFormat.type,metadata:t.metadata,tags:t.tags,mountpoint:t,isHLS:!!i.transport&&"hls"===i.transport.toLowerCase(),isHLSTS:!!i.transport&&"hlsts"===i.transport.toLowerCase()}})})})}function m(t){return t.mediaFormat.audioTracks[0].isMP3?".mp3":g(t)}function g(t){return!t.mediaFormat.audioTracks[0].isAAC||t.isAudioAdaptive||t.hasHLS()||t.hasHLSTS()?"":".aac"}function y(t){var e=null;return t.hasHLS()||t.mediaFormat.isAudioAdaptive?e="application/x-mpegURL":t.mediaFormat.audioTracks[0].isAAC?e="audio/mp4":t.mediaFormat.audioTracks[0].isMP3&&(e="audio/mpeg;codecs=mp3"),e}this.DEFAULT_TRANSPORTS=["http","hls","hlsts"],this.RTMP_TRANSPORTS=["rtmpe","rtmpte","rtmp","rtmpt"],this.mountPointsError=[];var _=new a(t),E=p?d+"//"+p+"-"+_.endpoint.liveStream:d+"//"+_.endpoint.liveStream,A=this;this.getStreamingConnections=function(t,r,a){var d=new o(E);return d.getLiveStreamConfig(t).then(function(t){var o=l.toSafeArray(t.mountpoints.mountpoint).filter(function(t){return t.status["status-code"]._text>=300&&A.mountPointsError.push(new s(t)),t.status["status-code"]._text<300}).map(function(t){return new s(t)});return o=u.filterMountPoints(o,e,n,r,a,!i,!c,h,f),v(o,n)})}}var r=n(8),a=n(14),o=n(143),s=n(146),u=n(73),l=n(31),c=n(20),d=c.getProtocol();t.exports=i},function(t,e,n){function i(t,e){return o.Promise(function(n,i,r){var a=new l;a.request(t,e,{handleAs:"xml",preventCache:!0,query:e,headers:{"X-Requested-With":null,"Content-Type":"text/plain; charset=utf-8"}},function(t,e){t.station||t.mount,n(e)},function(t,e){t.station?console.error("liveStreamAPI::_onLoadError - station:"+t.station):t.mount&&console.error("liveStreamAPI::_onLoadError - mount:"+t.mount),i(e)})})}function r(t){var e=s.assign({},t);if(void 0==e||null==e)throw new Error("liveStreamAPI::getLiveStreamConfig() A query must be provided.");if("string"==typeof e&&(e={station:e}),"object"!=typeof e)throw new Error("liveStreamAPI::getLiveStreamConfig() A query object must be provided.");if(!e.station&&!e.mount)throw new Error("liveStreamAPI::getLiveStreamConfig(): A query must contain at least a station or mount parameter.");return e.transports&&0!=e.transports.length||(e.transports=c),e.transports&&(e.transports=e.transports.join(",")),e}function a(t){var e=this;this.configs=[],this._requestProvisioningData=i,this.getConfig=function(t){var e;return t.station?e=this.configs[t.station]:delete t.station,t.mount?e=this.configs[t.mount+"_MOUNT"]:delete t.mount,e},this.getLiveStreamConfig=function(n){return o.Promise(function(i,a){try{var o=r(n)}catch(t){a(t)}var s=e.getConfig(o);s&&s.lastRefreshTime+d>=(new Date).getTime()?i(s):(o.version=h,e._requestProvisioningData(t,o).then(function(t){var n=u.xmlToJson(t);o.station?(e.configs[o.station]=n,e.configs[o.station].lastRefreshTime=(new Date).getTime()):o.mount&&(e.configs[o.mount+"_MOUNT"]=n,e.configs[o.mount+"_MOUNT"].lastRefreshTime=(new Date).getTime()),i(n)}))})}}var o=n(98),s=n(8),u=n(16),l=n(9),c=["http","hls","hlsts"],d=6e4,h=1.9;t.exports=a},function(t,e,n){function i(t){function e(t,e){t.container=e._attr.container._value,t.cuePoints=e._attr.cuepoints._value,t.trackScheme=e._attr.trackScheme._value;var n=a.toSafeArray(e.audio);t.audioTracks=n.map(function(t){return new o(t)});var i=a.toSafeArray(e.video);t.videoTracks=i.map(function(t){return new s(t)}),t.isAudioAdaptive=t.trackScheme===l,t.hasAudio=!r.isEmpty(t.audioTracks),t.hasVideo=!r.isEmpty(t.videoTracks),t.type=t.hasVideo?u.VIDEO:u.AUDIO}this.container=null,this.cuePoints=null,this.trackScheme=null,this.audioTracks=null,this.videoTracks=null,this.hasAudio=null,this.hasVideo=null,this.type=null,this.isAudioAdaptive=null,e(this,t)}var r=n(8),a=n(31),o=n(140),s=n(152),u=n(41),l="audio-adaptive";t.exports=i},function(t,e){function n(t){function e(t,e){t.shoutcastV1=e["shoutcast-v1"]?{active:e["shoutcast-v1"]._attr.enabled._value,mountSuffix:e["shoutcast-v1"]._attr.mountSuffix._value}:null,t.shoutcastV2=e["shoutcast-v2"]?{active:e["shoutcast-v2"]._attr.enabled._value,mountSuffix:e["shoutcast-v2"]._attr.mountSuffix._value}:null,t.sseSideband=e["sse-sideband"]?{active:e["sse-sideband"]._attr.enabled._value,streamSuffix:e["sse-sideband"]._attr.streamSuffix._value,metadataSuffix:e["sse-sideband"]._attr.metadataSuffix._value}:null}this.shoutcastV1=null,this.shoutcastV2=null,this.sseSideband=null,e(this,t)}t.exports=n},function(t,e,n){function i(t){function e(t,e){t.alternateContent=e["alternate-content"]?new o(e["alternate-content"]):null,t.mount=e.mount._text||null,t.status=new s(e.status),e.status["status-code"]._text<300&&(t.tags=!e._attr||e._attr.tags||""===e._attr.tags._value?[]:e._attr.tags._value.split(",").map(function(t){return new u(t)}),t.transports=a.toSafeArray(e.transports.transport).map(function(t){return new l(t)}),t.metadata=new c(e.metadata),t.servers=new d(e.servers).servers,t.mediaFormat=new h(e["media-format"]),t.metrics=!e.metrics||r.isEmpty(e.metrics.tag)?[]:a.toSafeArray(e.metrics.tag).map(function(t){return new u(t)}),t.format=e.format._text||null,t.bitRate=r.toSafeInteger(e.bitrate._text),t.authentication=!!e.authentication&&!!parseInt(e.authentication._text),t.timeout=e.timeout?r.toSafeInteger(e.timeout._text):0,t.sendPageURL=!!e["send-page-url"]&&!!parseInt(e["send-page-url"]._text),t.isAvailable=!t.status.isError&&!t.status.isGeoBlocked&&!r.isEmpty(t.servers))}f.call(this),e(this,t),this.hasTag=function(t){return r.some(this.tags,function(e){return e.name==t})},this.hasMetric=function(t){return r.some(this.metrics,function(e){return e.name===t})}}var r=n(8),a=n(31),o=n(139),s=n(149),u=n(150),l=n(151),c=n(145),d=n(148),h=n(144),f=n(147);t.exports=i},function(t,e,n){function i(){this.hasHLS=function(t){return t||(t=this),r.some(t.transports,function(t){return"hls"===t.transport})},this.hasHLSTS=function(t){return t||(t=this),r.some(t.transports,function(t){return"hlsts"===t.transport})}}var r=n(8);t.exports=i},function(t,e,n){function i(t){function e(t,e){t.servers=r.flatMap(a.toSafeArray(e.server),function(t){var e=t.ip._text;return a.toSafeArray(t.ports.port).map(function(t){var n=t._attr.type._value,i=t._text;return n+"://"+e+":"+i})})}this.servers=null,e(this,t)}var r=n(8),a=n(31);t.exports=i},function(t,e){function n(t){function e(t,e){t.statusCode=e["status-code"]?e["status-code"]._text:-1,t.message=e["status-message"]?e["status-message"]._text:null,t.isError=t.statusCode>=300||t.statusCode===-1,t.isGeoBlocked=453===t.statusCode}this.statusCode=null,this.message=null,this.isError=!1,this.isGeoBlocked=!1,e(this,t)}t.exports=n},function(t,e){function n(t){function e(t,e){t.name=e?e:null}this.name=null,e(this,t)}t.exports=n},function(t,e){function n(t){function e(t,e){t.mountSuffix=e._attr?e._attr.mountSuffix._value:null,t.transport=e._text||null}this.mountSuffix=null,this.transport=null,e(this,t)}t.exports=n},function(t,e){function n(t){function e(t,e){t.index=parseInt(e._attr.index._value),t.codec=e._attr.codec._value,t.bitRate=parseInt(e._attr.bitrate._value),t.frameRate=parseFloat(e._attr.framerate._value),t.width=parseInt(e._attr.width._value),t.height=parseInt(e._attr.height._value),t.aspect=parseFloat(e._attr.aspect._value),t.keyframeInterval=parseInt(e._attr["keyframe-interval"]._value)}this.index=null,this.codec=null,this.bitRate=null,this.frameRate=null,this.width=null,this.height=null,this.aspect=null,this.keyframeInterval=null,e(this,t)}t.exports=n},function(t,e,n){var i,r;i=[n(1),n(3),n(2),n(154)],r=function(t,e,n,i){var r=t([],{constructor:function(t){this._sessionId=null,this._mediaNode=t,this._streamTimer=null,this._timer=0,this._connectionTime=0,this._onPlayHandler=n.hitch(this,this.__onTimeUpdate)},init:function(t){this._connectionTime=(new Date).getTime(),this._streamTimer=setInterval(this._onPlayHandler,250),this.sidebandMetadataConnector=new i,this.sidebandMetadataConnector.setSidebandMetadataFallbackCallback(n.hitch(this,this.__onSidebandMetadataFallback)),this.sidebandMetadataConnector.connect(this.__getMetadataConnectionUrl(t.url,t.mount,t.sbmConfig))},destroy:function(){this.onTimeUpdateListener&&this.onTimeUpdateListener.remove(),clearInterval(this._streamTimer),this._timer=0,this._connectionTime=0,this.sidebandMetadataConnector&&this.sidebandMetadataConnector.destroy(),delete this.sidebandMetadataConnector},getStreamConnectionUrl:function(t){return t+(t.indexOf("?")!=-1?"&":"?")+"sbmid="+this.__generateSessionId()},setTrackCuePointCallback:function(t){this._trackCuePointCallback=t},setAdBreakCuePointCallback:function(t){this._adBreakCuePointCallback=t},setHlsCuePointCallback:function(t){this._hlsCuePointCallback=t},setSpeechCuePointCallback:function(t){this._speechCuePointCallback=t},setCustomCuePointCallback:function(t){this._customCuePointCallback=t},setErrorCallback:function(t){this._errorCallback=t},__getMetadataConnectionUrl:function(t,e,n){return t&&e&&null!==n&&null!==n.info?t.split("/")[0]+"//"+t.split("/")[2]+"/"+e+n.info.metadataSuffix+"?sbmid="+this._sessionId:null},__generateSessionId:function(){var t=(new Date).getTime();return this._sessionId="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:7&n|8).toString(16)}),this._sessionId},__onSidebandMetadataFallback:function(){this.destroy(),this._errorCallback({})},__onTimeUpdate:function(){this._timer=(new Date).getTime()-this._connectionTime,this.isStopped||this.isPaused||this.sidebandMetadataConnector&&this.sidebandMetadataConnector.getCurrentCuePoint()&&this._timer>=this.sidebandMetadataConnector.getCurrentCuePoint().timestamp&&("track"===this.sidebandMetadataConnector.getCurrentCuePoint().type?this._trackCuePointCallback({cuePoint:this.sidebandMetadataConnector.getCurrentCuePoint()}):"ad"===this.sidebandMetadataConnector.getCurrentCuePoint().type?this._adBreakCuePointCallback({cuePoint:this.sidebandMetadataConnector.getCurrentCuePoint()}):"hls"===this.sidebandMetadataConnector.getCurrentCuePoint().type?this._hlsCuePointCallback({cuePoint:this.sidebandMetadataConnector.getCurrentCuePoint()}):"speech"===this.sidebandMetadataConnector.getCurrentCuePoint().type?this._speechCuePointCallback({cuePoint:this.sidebandMetadataConnector.getCurrentCuePoint()}):"custom"===this.sidebandMetadataConnector.getCurrentCuePoint().type&&this._customCuePointCallback({cuePoint:this.sidebandMetadataConnector.getCurrentCuePoint()}),this.sidebandMetadataConnector.shiftCuePointQueue())}});return r}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1),n(3),n(6),n(2),n(64),n(63),n(39),n(62)],r=function(t,e,n,i,r,a,o,s){var u=t([],{SUPPORTED_EVENTS:["onMetaData","onCuePoint","onCuePointPreview","onCuePointPreviewExpired"],MAX_BACKOFF_RETRY:3,cuePointMap:{timestamp:"timestamp",type:"name",cue_title:a.CUE_TITLE,track_artist_name:a.ARTIST_NAME,track_album_name:a.ALBUM_NAME,program_id:a.PROGRAM_ID,cue_time_duration:a.CUE_TIME_DURATION,cue_time_start:a.CUE_TIME_START,track_id:a.TRACK_ID,track_nowplaying_url:a.NOW_PLAYING_URL,track_cover_url:a.TRACK_COVER_URL,ad_id:o.AD_ID,ad_type:o.AD_TYPE,cue_title:o.CUE_TITLE,cue_time_duration:o.CUE_TIME_DURATION,ad_url:o.AD_URL,ad_vast_url:o.AD_VAST_URL,ad_vast:o.AD_VAST,hls_track_id:s.HLS_TRACK_ID,hls_segment_id:s.HLS_SEGMENT_ID},constructor:function(){this._eventSource=null,this._eventQueue=[],this._currentSbmUrl=null,this._backOffRetry=0,this.__onMessageHandler=i.hitch(this,this.__onMessage),this.__onOpenHandler=i.hitch(this,this.__onOpen),this.__onErrorHandler=i.hitch(this,this.__onError)},connect:function(t){this._currentSbmUrl=t,this.__subscribe(t),this.__resetBackOff()},destroy:function(){this.__unlisten(),this.__close()},getCurrentCuePoint:function(){return this._eventQueue.length>0?this._eventQueue[0]:null},shiftCuePointQueue:function(){this._eventQueue.length&&this._eventQueue.shift()},setSidebandMetadataFallbackCallback:function(t){this._sidebandMetadataFallbackCallback=t},__subscribe:function(t){null!=this._eventSource&&(this._eventSource.close(),this._eventSource=null),"undefined"!=typeof EventSource&&(this._eventSource=new EventSource(t),this.__listen())},__listen:function(){this._messageListener=e(this._eventSource,"message",this.__onMessageHandler),this._openListener=e(this._eventSource,"open",this.__onOpenHandler),this._errorListener=e(this._eventSource,"error",this.__onErrorHandler)},__unlisten:function(){this._messageListener&&this._messageListener.remove(),this._openListener&&this._openListener.remove(),this._errorListener&&this._errorListener.remove()},__close:function(){this._currentSbmUrl=null,null!=this._eventSource&&(this._eventSource.close(),this._eventSource=null)},__onMessage:function(t){var e=JSON.parse(t.data);if(void 0==e.type||this.__isSupportedEvent(e)){var n={};switch(e.type){case"onMetaData":this.__onMetadata(e);break;case"onCuePoint":n=this.__onCuePoint(e);break;case"onCuePointPreview":n=this.__onCuePointPreview(e);break;case"onCuePointPreviewExpired":n=this.__onCuePointPreviewExpired(e)}this._eventQueue.push(n)}},__onCuePoint:function(t){var e={};e.parameters=t.parameters,e.timestamp=t.timestamp,e.type=t.name;for(var n in t.parameters)this.cuePointMap[n]&&(e[this.cuePointMap[n]]=t.parameters[n]);return"ad"==e.type&&(e.isVastInStream=!!(void 0!=e[o.AD_VAST_URL]&&""!=e[o.AD_VAST_URL]||e[o.AD_VAST]&&""!=e[o.AD_VAST])),e},__onMetadata:function(t){},__onCuePointPreview:function(t){},__onCuePointPreviewExpired:function(t){},__onOpen:function(t){this.__resetBackOff()},__onError:function(t){console.error("sidebandMetadataConnector:error"),this._backOffRetry==this.MAX_BACKOFF_RETRY?this._sidebandMetadataFallbackCallback():this.__reconnect()},__isSupportedEvent:function(t){return n.indexOf(this.SUPPORTED_EVENTS,t.type)!=-1},__reconnect:function(){this._backOffRetry++,null!=this._currentSbmUrl&&this.__subscribe(this._currentSbmUrl)},__resetBackOff:function(){this._backOffRetry=0}});return u}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1),n(2),n(9),n(33),n(6),n(74),n(75),n(3)],r=function(t,e,n,i,r,a,o,s){var u=t([i],{constructor:function(t,e){this.artistData=null,this.inherited(arguments)},getName:function(){return null!=this.artistData?this.artistData.name:this.data.name},getBiography:function(){return this.artistData.biography},getBirthDate:function(){return this.artistData.beginDate},getEndDate:function(){return this.artistData.endDate},getBeginPlace:function(){return this.artistData.beginPlace},getEndPlace:function(){return this.artistData.endPlace},getIsGroup:function(){return this.artistData.isGroup},getCountry:function(){return this.artistData.country},getGenres:function(){for(var t=[],e=0;e<this.artistData.genres.length;e++)t.push(this.artistData.genres[e].name);return t},getSimilar:function(){return this.artistData.similars},getMembers:function(){return this.artistData.members},getWebsite:function(){return this.artistData.website},getTwitterUsername:function(){return this.artistData.twitter},getFacebookUrl:function(){return this.artistData.facebook},getAlbums:function(){if(null==this.albums){this.albums=[];var t;r.forEach(this.artistData.albums,function(e,n){t=new a(e,this.platformId),this.albums.push(t)},this)}return this.albums},getAlbumById:function(t){var e=-1;return r.forEach(this.getAlbums(),function(n,i){n.id==t&&(e=i)},this),e>-1?this.getAlbums()[e]:null},getPictures:function(){if(null==this.pictures){this.pictures=[];var t;r.forEach(this.artistData.pictures,function(e,n){e.artistId=this.id,t=new o(e,this.platformId),this.pictures.push(t)},this)}return this.pictures},getPictureById:function(t){var e=-1;return r.forEach(this.getPictures(),function(n,i){n.id==t&&(e=i)},this),e>-1?this.getPictures()[e]:null},fetchData:function(t){if(t=void 0!=t&&t,t&&(this.url=this.getDynamicArtistUrl(this.id)),0==this.alreadyFetched){var i=new n;i.request(this.url,{isDynamicCall:t},this.getRequestArgs(),e.hitch(this,this._onLoadComplete),e.hitch(this,this._onLoadError))}else this.notify("artist-complete",{artistId:this.id})},fetchAlbumByIds:function(t){"string"==typeof t&&(t=[t]),this.albumsQueue=e.clone(t);for(var n,i=0;i<t.length;i++)n=this.getAlbumById(t[i]),n.successCallback&&n.successCallback.remove(),n.errorCallback&&n.errorCallback.remove(),n.successCallback=s(n,"album-complete",e.hitch(this,this._onAlbumComplete)),n.errorCallback=s(n,"album-error",e.hitch(this,this._onAlbumComplete)),n.fetchData()},fetchPictureByIds:function(t){"string"==typeof t&&(t=[t]),this.picturesQueue=e.clone(t);for(var n,i=0;i<t.length;i++)n=this.getPictureById(t[i]),n.successCallback&&n.successCallback.remove(),n.errorCallback&&n.errorCallback.remove(),n.successCallback=s(n,"picture-complete",e.hitch(this,this._onPictureComplete)),n.errorCallback=s(n,"picture-error",e.hitch(this,this._onPictureComplete)),n.fetchData()},_onLoadError:function(t,e){console.error(e),0==t.isDynamicCall?this.fetchData(!0):this.notify("artist-error",{artistId:this.id})},_onLoadComplete:function(t,e){this.artistData=e.artist,this.alreadyFetched=!0,this.notify("artist-complete",{artistId:this.id})},_onAlbumComplete:function(t,e){this._removeAlbumFromQueue(t.albumId),0==this.albumsQueue.length&&this.notify("album-complete",this.albums)},_removeAlbumFromQueue:function(t){var e=-1;r.forEach(this.albumsQueue,function(n,i){n==t&&(e=i)},this),e>-1&&this.albumsQueue.splice(e,1)},_onPictureComplete:function(t,e){this._removePictureFromQueue(t.pictureId),0==this.picturesQueue.length&&this.notify("picture-complete",this.pictures)},_removePictureFromQueue:function(t){var e=-1;r.forEach(this.picturesQueue,function(n,i){n==t&&(e=i)},this),e>-1&&this.picturesQueue.splice(e,1)}});return u}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1),n(76),n(155),n(74)],r=function(t,e,n,i){var r=t([],{constructor:function(t,e,n){this.songData=t,this.npeId=e,this.platformId=n,this.trackInstance=null,this.albumInstance=null,this.artistInstance=null,this.inherited(arguments)},track:function(){return void 0==this.songData.track?null:(null==this.trackInstance&&(this.trackInstance=new e(this.songData.track,this.platformId)),this.trackInstance)},artist:function(){return void 0==this.songData.artists?null:(null==this.artistInstance&&(this.artistInstance=new n(this.songData.artists[0],this.platformId)),this.artistInstance)},album:function(){return void 0==this.songData.album?null:(null==this.albumInstance&&(this.albumInstance=new i(this.songData.album,this.platformId)),this.albumInstance)}});return r}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){function i(t){return n(r(t))}function r(t){return a[t]||function(){throw new Error("Cannot find module '"+t+"'.")}()}var a={"./en.json":58,"./es.json":94,"./fr.json":95,"./pt.json":96};i.keys=function(){return Object.keys(a)},i.resolve=r,t.exports=i,i.id=157}])});
//# sourceMappingURL=td-sdk.min.js.map