

vx.show({"env":{"d":"us-west-2b","h":"i-0ffe4af00ef71e957","u":"0ba5e5a4-5c8e-4902-ac87-cfbc88d8aba8","v":"f78e4a53-fb4e-461e-9e57-f5028a5afa5e","vl":"20191103.0332","vt":"20191103.0332","vs":"20190508","vc":"20191008","st":"20191103.043902","i":"087b2a18-e53e-4d06-b37d-0d23d1579398","f":"https:\/\/www.theledger.com\/article\/LK\/20040714\/News\/608115346\/LL\/","q":"4b639558-3fbc-4258-9a50-7f63b107659e","m":"22342","b":"436","g":"941","t":"5292","c":"5347","l":"12168","z":"11397","s":"4982","p":"22315","w":"news","gc":"US","gr":"CA","gd":"862","gn":"Corporate","ne":"im","n":0,"nd":"im","nn":0,"sd":"theledger.com","nf":"iv","qp":50,"qt":2500,"pn":"1076","vn":"1138654"},"client":{"bg":9,"bn":"firefox","bv":"70","ip":"192.109.75.31","lt":"38.646500","lg":"-120.964104","gc":"US","gr":"CA","gd":"862","gn":"Corporate","gdpr":0},"content":{"body":{"short":"","long":"<div id=\"ds_player_container\" style=\"border:none !important;padding:0 !important;margin:0 auto !important;position:relative !important\">\r\n<script data-ds-pbase=\"true\" class=\"dsscript\" type=\"text\/dsscript\" src=\"\/\/c5x8i7c7.ssl.hwcdn.net\/vplayer-parallel\/20190312_1329\/ds_vplayer_detached.min.js\"><\/script>\r\n<script src=\"\/\/c5x8i7c7.ssl.hwcdn.net\/comscore\/comscore.streaming.5.4.0.161011.min.js\" class=\"dsscript\" type=\"text\/dsscript\"><\/script>\r\n<div id=\"ds_content_frame_parent\" style=\"position:relative\">\r\n   <div id=\"ds_ad_container\" style=\"text-align:center !important;margin:0 auto !important;position:absolute !important;top:0 !important;left:0 !important;background-color:black !important;z-index:-1\">&nbsp;<\/div>\r\n   <iframe frameborder=\"0\" id=\"ds_content_frame\" allow=\"autoplay\" scrolling=\"no\" src=\"\" style=\"margin:0 !important;padding:0 !important;border:0 !important;outline:0 !important;position:absolute !important;top:0 !important;left:0 !important;\"><\/iframe>\r\n   <div id=\"ds_float_close\">X<\/div>\r\n   <style type=\"text\/css\">\r\n      .ds_float{position:fixed!important;z-index:1000000!important;border:1px solid #888}\r\n      .ds_float.tl{top:10px;left:5px}.ds_float.tr{top:10px;right:10px}\r\n      .ds_float.bl{bottom:5px;left:5px}.ds_float.br{bottom:5px;right:10px}\r\n      #ds_float_close{display:none;width:22px;height:22px;padding:0;position:absolute;top:-12px;right:-12px;color:#fff;background-color:#222;border:1px solid #fff;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:10px;line-height:22px;font-family:Arial;text-shadow:#000 0 1px 0;text-align:center;vertical-align:middle;border-radius:12px;opacity:.85;cursor:pointer;z-index:1000000;transition:all .2s ease}\r\n   <\/style>\r\n<\/div>\r\n<script class=\"dsscript\" type=\"text\/dsscript\">\r\n(function() {\r\nfunction init() {\r\n\tvar zindex_base=parseInt(vx.nvl(vx.dvp_zindex_base,20));\r\n\tvar title_trim=parseInt(vx.nvl(vx.dvp_title_trim,60));\r\n\tvar desc_trim=parseInt(vx.nvl(vx.dvp_desc_trim,120));\r\n\tvar mute_ad=1;\r\n\tvar click_target=vx.nvl(vx.dvp_click_target,\"_blank\");\r\n\tvar friendly_iframe=parseInt(vx.nvl(vx.dvp_friendly_iframe,0));\r\n\tvar persistentMute = (vx.dvp_persistent_mute === 1 || vx.dvp_persistent_mute === \"1\");\r\n\tvar minVol = 0;\r\n\tvar reelOverlay = vx.nvl(vx.dvp_reelOverlay, \"\");\r\n\tvar reelMovement = vx.nvl(vx.dvp_reelMovement, \"scroll\");\r\n\tvar reelThumbs = parseInt(vx.nvl(vx.dvp_reelThumbs, \"3\"));\r\n\tvar reelClickout = parseInt(vx.nvl(vx.dvp_reelClickout,0));\r\n\tvar reelShowTinyImg = parseInt(vx.nvl(vx.dvp_reelShowTinyImg,0));\r\n\tvar ds_sbase=\"\/\/c5x8i7c7.ssl.hwcdn.net\/vplayer-parallel\/20190405_1722\/videojs\/show.html\";\r\n    var dvp_meta = {\"width\":\"0\",\"height\":\"0\",\"loopcount\":\"30\",\"adtags\":{\"1\":[\"gatehouse_desktop\",\"googled\",\"rubicon_dt_html5\",\"tremor_html5\",\"appnexus_html5\"],\"2\":[\"googled\",\"rubicon_dt_html5\",\"tremor_html5\",\"pubmatic_desktop\",\"appnexus_html5\"],\"3\":[\"googled\",\"rubicon_dt_html5\",\"tremor_html5\",\"pubmatic_desktop\",\"appnexus_html5\"],\"4\":[\"googled\",\"rubicon_dt_html5\",\"tremor_html5\",\"pubmatic_desktop\",\"appnexus_html5\"],\"5\":[\"googled\",\"rubicon_dt_html5\",\"tremor_html5\",\"pubmatic_desktop\",\"appnexus_html5\"],\"6\":[\"googled\",\"rubicon_dt_html5\",\"tremor_html5\",\"pubmatic_desktop\",\"appnexus_html5\"],\"7\":[\"googled\",\"rubicon_dt_html5\",\"tremor_html5\",\"pubmatic_desktop\",\"appnexus_html5\"]},\"adtagdefs\":{\"gatehouse_desktop\":{\"cp\":\"tp\",\"url\":\"https:\\\/\\\/pubads.g.doubleclick.net\\\/gampad\\\/ads?correlator=[timestamp]&iu=\\\/11564835\\\/theledger.com\\\/Video\\\/Distroscale&env=vp&gdfp_req=1&output=vast&sz=480x360|480x361|640x480&description_url={{pageurl[enc=url]}}&tfcd=0&npa=0&vpmute=1&vpa=1&vad_format=linear&url={{pageurl[enc=url]}}&unviewed_position_start=1\",\"wt\":\"361\",\"sdk\":\"ima_html5\"},\"googled\":{\"cp\":\"gg\",\"url\":\"\\\/\\\/googleads.g.doubleclick.net\\\/pagead\\\/ads?client=ca-video-pub-3851171199385532&slotname=3087495546&ad_type=standardvideo&description_url={{pageurl[enc=url]}}&max_ad_duration=60000&videoad_start_delay=0\",\"wt\":\"44\",\"sdk\":\"ima_html5\"},\"rubicon_dt_html5\":{\"cp\":\"rb\",\"url\":\"\\\/\\\/video-ads.rubiconproject.com\\\/video\\\/16578\\\/135988\\\/1301760\\\/201\\\/vast.xml?tg_c.language=en&width=__DYN_WIDTH__&height=__DYN_HEIGHT__&rf={{pageurl[enc=url]}}&x_source.pchain=distroscale.com:8569321769\",\"wt\":\"185\",\"sdk\":\"ima_html5\"},\"tremor_html5\":{\"cp\":\"tm\",\"url\":\"\\\/\\\/5gn07.ads.tremorhub.com\\\/ad\\\/tag?adCode=5ew8d-7u6lt&playerWidth=__DYN_WIDTH__&playerHeight=__DYN_HEIGHT__&srcPageUrl={{pageurl[enc=url]}}&mediaId=distroscale&schain=1.0,1!distroscale.com,8569321769,1,,,\",\"wt\":\"61\",\"sdk\":\"ima_html5\"},\"appnexus_html5\":{\"cp\":\"an\",\"url\":\"\\\/\\\/ib.adnxs.com\\\/ptv?id=11589530&promo_sizes=__DYN_WIDTH__x__DYN_HEIGHT__&promo_alignment=center&cb={{random}}&referrer={{pageurl[enc=url]}}&schain=1.0,1!distroscale.com,8569321769,1,,,\",\"wt\":\"188\",\"sdk\":\"ima_html5\"},\"pubmatic_desktop\":{\"cp\":\"pm\",\"url\":\"\\\/\\\/vpaid.pubmatic.com\\\/ads\\\/video\\\/vadtag.html?adtype=13&pubId=158001&siteId=549260&adId=2035658&vadFmt=3&vapi=2&vminl=1&vmaxl=60&vh=__DYN_HEIGHT__&vw=__DYN_WIDTH__&placement=1&vtype=1&vpos=1&vplay=2&vskip=0&vcom=0&vfmt=1+5+6+7&gdpr=&gdpr_consent=&sec=1&kadpageurl={{pageurl[enc=url]}}&schain=1.0,1!distroscale.com,8569321769,1,,,\",\"wt\":\"414\",\"sdk\":\"ima_html5\"}},\"vid\":{\"id\":\"1138654\",\"title\":\"Trending Articles\",\"description\":\"\",\"video\":\"\\\/\\\/c5x8i7c7.ssl.hwcdn.net\\\/videos\\\/dgv_theledger\\\/20191103023026_5dbe1ae68453d\\\/dgv_theledger_trending_articles_20191103023026_5dbe1ae68453d_new.mp4\",\"thumbnail\":\"\\\/\\\/c5x8i7c7.ssl.hwcdn.net\\\/videos\\\/dgv_theledger\\\/20191103023026_5dbe1ae68453d\\\/dgv_theledger_trending_articles_20191103023026_5dbe1ae68453d_new.jpg\",\"link\":null,\"signature\":null,\"caption\":{\"0\":{\"title\":\"North Carolina redistricting cases could offer map to others\",\"desc\":\"RALEIGH, N.C. &#8212; When the U.S. Supreme Court this year declared federal judges had no business deciding cases about political gerrymandering, it also said state courts had every right to address the issue &#8212; and have they ever in North Carolina.Within four months, state judges hearing two separate cases struck down dozens of North Carolina legislative districts and stopped the use of the congressional district map in 2020 elections. In both cases, judges said evidence [...]\",\"link\":\"https:\\\/\\\/www.theledger.com\\\/news\\\/20191102\\\/north-carolina-redistricting-cases-could-offer-map-to-others?rssfeed=true\",\"credit\":\"\",\"file\":\"img_0.png\"},\"5\":{\"title\":\"Airbnb bans 'party houses' after California shooting kills 5\",\"desc\":\"ORINDA, Calif. &#8212; Airbnb's CEO said the company was taking actions against unauthorized parties in the wake of a deadly shooting at a Halloween party held at an Airbnb rental home in California.In a series of tweets, Brian Chesky said Saturday the San Francisco-based company is expanding manual screening of \\\"high risk\\\" reservations and will remove guests who fail to comply with policies banning parties at Airbnb rental homes.He also said the company is forming a [...]\",\"link\":\"https:\\\/\\\/www.theledger.com\\\/news\\\/20191102\\\/airbnb-bans-party-houses-after-california-shooting-kills-5?rssfeed=true\",\"credit\":\"\",\"file\":\"img_1.png\"},\"10\":{\"title\":\"How 'do us a favor' led to Trump impeachment inquiry\",\"desc\":\"WASHINGTON &#8212; The words from one president to another, somewhat casual in tone, were not casual at all in meaning: \\\"I would like you to do us a favor, though.\\\"Those words have now prompted deployment of the ultimate political weapon, an impeachment process enshrined in the Constitution as a means other than the ballot to remove a president from office.When history writes the story, the seemingly innocent request from President Donald Trump to his Ukrainian [...]\",\"link\":\"https:\\\/\\\/www.theledger.com\\\/news\\\/20191102\\\/how-do-us-favor-led-to-trump-impeachment-inquiry?rssfeed=true\",\"credit\":\"\",\"file\":\"img_2.png\"},\"15\":{\"title\":\"Americans spend billions on Halloween holiday\",\"desc\":\"With an estimated $8.8 billion spent on candy, costumes, decorations and greeting cards this year, according to the National Retail Federation\\u2019s annual survey, 2019 will feature the third-highest money spent in the survey\\u2019s 15-year history.\",\"link\":\"https:\\\/\\\/www.theledger.com\\\/videos\",\"credit\":\"\",\"file\":\"img_3.png\"},\"74\":{\"title\":\"Reddout: Talbot House 'is a place of hope'\",\"desc\":\"Brenda Reddout is executive director of Talbot House in Lakeland, which serves more than 1,400 homeless people per year.\",\"link\":\"https:\\\/\\\/www.theledger.com\\\/news\\\/20191102\\\/reddout-talbot-house-is-place-of-hope?rssfeed=true\",\"credit\":\"\",\"file\":\"img_4.png\"},\"79\":{\"title\":\"Baker Acting students on rise in Polk County school district\",\"desc\":\"One parent went on a crusade against Polk County Public Schools after his autistic son was Baker Acted. He now has filed a civil rights complaint with the U.S. Department of Education against the school district.\",\"link\":\"https:\\\/\\\/www.theledger.com\\\/news\\\/20191102\\\/baker-acting-students-on-rise-in-polk-county-school-district?rssfeed=true\",\"credit\":\"\",\"file\":\"img_5.png\"}},\"duration\":84},\"playlist\":null,\"player\":null};\r\n\r\n\tdvp_meta.width=parseInt(vx.nvl(vx.dvp_width,400));\r\n\tdvp_meta.height=parseInt(vx.nvl(vx.dvp_height,225));\r\n\r\n\tvar bodyClass=document.body.className;\r\n\tbodyClass = bodyClass.replace(\/^ *\/,'').replace(\/\\s.*\/,'');\r\n\tfor (var key in dvp_meta.vid.caption) {\r\n\t\tif (dvp_meta.vid.caption[key].link) {\r\n\t\t\tdvp_meta.vid.caption[key].link = dvp_meta.vid.caption[key].link.replace(\/__BODY_CLASS__\/g,bodyClass);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction altGGParam(tag) {\r\n\t\tvar lentargets={\"s4458\":15000};  \/\/ millisec\r\n\t\tif ('s{{env.s}}' in lentargets) {\r\n\t\t\ttag=tag.replace(\/max_ad_duration=\\d+\/,\"max_ad_duration=\"+lentargets['s{{env.s}}']).replace(\/sdmax=\\d+\/,\"sdmax=\"+lentargets['s{{env.s}}']);\r\n\t\t}\r\n\t\treturn tag;\r\n\t}\r\nfunction gdprMacros(tag,cp) {\r\n  var isGdpr=0;\r\n  var consentStr='';\r\n  var vendorBit='';\r\n  if ('_{{client.gdpr}}'=='_1') {\r\n    isGdpr=1;\r\n  } else if ('_{{env.gc}}' in {'_AT':1,'_BE':1,'_BG':1,'_HR':1,'_CY':1,'_CZ':1,'_DK':1,'_EE':1,'_FI':1,'_FR':1,'_DE':1,'_GR':1,'_HU':1,'_IE':1,'_IT':1,'_LV':1,'_LT':1,'_LU':1,'_MT':1,'_NL':1,'_PL':1,'_PT':1,'_RO':1,'_SK':1,'_SI':1,'_ES':1,'_SE':1,'_GB':1,'_UK':1}) {\r\n    isGdpr=1;\r\n  }\r\n  if (vx.gdpr && 'apply' in vx.gdpr && vx.gdpr['apply']===0) {\r\n    isGdpr=0;\r\n  }\r\n  tag=tag.replace(\/__IS_GDPR__\/g,isGdpr);\r\n  if (isGdpr==1) {\r\n    if (vx.gdpr && vx.gdpr['data']) {\r\n      consentStr=vx.gdpr['data'];\r\n    }\r\n  }\r\n  tag=tag.replace(\/__GDPR_CONSENT__\/g,consentStr);\r\n  if (isGdpr==1) {\r\n    vendorBit=0;\r\n    if (vx.gdpr && vx.gdpr[cp]) {\r\n      vendorBit=1;\r\n    }\r\n  }\r\n  tag=tag.replace(\/__GDPR_VENDOR__\/g,vendorBit);\r\n  return tag;\r\n}\r\nvx.dvptrack('ww', gdprMacros('{\"ww\":\"GDPR:__IS_GDPR__:__GDPR_CONSENT__\"}','ww'));\r\n\tvar frtargets={\"s1180\":95,\"s1003\":95,\"s995\":95,\"s3663\":95,\"s597\":95,\"s1032\":95,\"s596\":95,\"s1874\":95,\"s1684\":95,\"s593\":95,\"s594\":95,\"s199\":95,\"s261\":95,\"s260\":95,\"s1109\":95,\"s417\":95,\"s1040\":95,\"s262\":95,\"s254\":95,\"s988\":95,\"s3111\":95,\"s3709\":95,\"s253\":95,\"s626\":95,\"s1685\":95,\"s3940\":50,\"s296\":50,\"s383\":50,\"s3419\":50};  \/\/ 0%~100% friendly\r\n\tvar gfrdly=0;\r\n\tif ('s{{env.s}}' in frtargets) {\r\n\t\tvar frspec=frtargets['s{{env.s}}'];\r\n\t\tvar randnumber=(Math.random()*100);\r\n\t\tif (randnumber<frspec) {\r\n\t\t\tgfrdly=1;\r\n\t\t}\r\n\t}\r\n\t\/\/window.dsGGvaldiator=function(){\r\n\t\/\/\treturn 1;\r\n\t\/\/};\r\n\tfor (var tagdef in dvp_meta.adtagdefs) {\r\n\t\tif (dvp_meta.adtagdefs[tagdef].url) {\r\n\t\t\tdvp_meta.adtagdefs[tagdef].url=dvp_meta.adtagdefs[tagdef].url.replace(\/__DYN_WIDTH__\/g,dvp_meta.width).replace(\/__DYN_HEIGHT__\/g,dvp_meta.height);\r\n            dvp_meta.adtagdefs[tagdef].url=gdprMacros(dvp_meta.adtagdefs[tagdef].url, dvp_meta.adtagdefs[tagdef].cp);\r\n\t\t\tif(dvp_meta.adtagdefs[tagdef].url.indexOf(\"ca-video-pub-3851171199385532\") !== -1) {\r\n\t\t\t\tif (gfrdly==1) {\r\n\t\t\t\t\tdvp_meta.adtagdefs[tagdef].friendly=true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdvp_meta.adtagdefs[tagdef].friendly=false;\r\n\t\t\t\t}\r\n\t\t\t\tdvp_meta.adtagdefs[tagdef].validator=\"dsGGvaldiator\";\r\n\t\t\t\tdvp_meta.adtagdefs[tagdef].sdk=\"ima_html5\";\r\n\t\t\t\tdvp_meta.adtagdefs[tagdef].url=dvp_meta.adtagdefs[tagdef].url.replace(\/slotname=\\d+\/,\"slotname=1769524866\");  \/\/ Desktop B tag for testing\r\n\t\t\t\tdvp_meta.adtagdefs[tagdef].url=altGGParam(dvp_meta.adtagdefs[tagdef].url);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (dvp_meta.adtagdefs[tagdef].cp && dvp_meta.adtagdefs[tagdef].cp in {'uf':1,'an':1}) {\r\n\t\t\tdvp_meta.adtagdefs[tagdef].friendly=true;\r\n\t\t}\r\n\t\tif (dvp_meta.adtagdefs[tagdef].cp && dvp_meta.adtagdefs[tagdef].cp=='tm' && 'gc{{env.gc}}' in {'gcPH':1,'gcIN':1,'gcES':1}) {\r\n\t\t\tdelete dvp_meta.adtagdefs[tagdef];\r\n\t\t}\r\n\t}\r\n\r\n\tfor (var grp in dvp_meta.adtags) {\r\n\t\tvar tarr = dvp_meta.adtags[grp];\r\n\t\tfor (var i=0;i<tarr.length;i++){\r\n\t\t\tif (!(tarr[i] in dvp_meta.adtagdefs)) {\r\n\t\t\t\ttarr.splice(i,1);\r\n\t\t\t}\r\n\t\t}\r\n\t\tdvp_meta.adtags[grp]=tarr;\r\n\t}\r\n\r\n\tvar dvpTrackName = \"dvptrack\";\r\n\r\n\tvx.dvptrack('wf', '{\"wf\":\"01: post runtime started\"}');\r\n\r\n\tfunction truncate(str, len, useWordBoundary, filler){\r\n\t\tif (filler==null) { filler='&hellip;'; }\r\n\t\tvar isTooLong = str.length > len;\r\n\t\tvar s_ = isTooLong ? str.substr(0,len-1) : str;\r\n\t\ts_ = (useWordBoundary && isTooLong) ? s_.substr(0,s_.lastIndexOf(' ')) : s_;\r\n\t\treturn isTooLong ? s_ + filler : s_;\r\n\t}\r\n\r\n\tvar contDiv = document.getElementById(\"ds_player_container\");\r\n\tvar adContDiv = document.getElementById(\"ds_ad_container\");\r\n\tif (adContDiv && adContDiv.style) {\r\n\t\tif (!vx.dockFirstResize) {\r\n\t\t\tadContDiv.style.overflow = \"hidden\";\r\n\t\t\tadContDiv.style.width = dvp_meta.width + \"px\";\r\n\t\t\tadContDiv.style.height = dvp_meta.height + \"px\";\r\n\t\t}\r\n\t}\r\n\r\n\tvx.whenAvailable2(window, 'vxvideojsinit', function() {\r\n\t\tvx.dvptrack('wf', '{\"wf\":\"03: init function available\"}');\r\n\r\n\t\tvar ctFrm = document.getElementById(\"ds_content_frame\");\r\n\t\tif (!vx.dockFirstResize) {\r\n\t\t    ctFrm.parentNode.style.width = \"\" + dvp_meta.width + \"px\";\r\n\t\t    ctFrm.parentNode.style.height = \"\" + dvp_meta.height + \"px\";\r\n\t\t    ctFrm.style.width = \"\" + dvp_meta.width + \"px\";\r\n\t\t    ctFrm.style.height = \"\" + dvp_meta.height + \"px\";\r\n\t    }\r\n\t\tctFrm.style.top = \"0px\";\r\n\t\tctFrm.style.left = \"0px\";\r\n\t\tctFrm.style.position = \"absolute\";\r\n\t\tctFrm.style.zIndex = zindex_base;\r\n\r\n\t\tctFrm.src = ds_sbase+'?controls=1&loop=' + dvp_meta.loopcount + '&autoplay=0&tracker={{env.i}}&height=' + dvp_meta.height + '&width=' + dvp_meta.width + '&vurl=' + encodeURIComponent(dvp_meta.vid.video) + '&poster=' + encodeURIComponent(dvp_meta.vid.thumbnail);\r\n\r\n        \/\/ monitor cfp for inview\r\n\t\tvar contentFrameParent = document.getElementById(\"ds_content_frame_parent\");\r\n\t\tif (contentFrameParent) {\r\n\t\t\tvx.inview2.trackEl(contentFrameParent, vx.ww, function(countq, count){\r\n\t\t\t\tif (countq==1) {\r\n\t\t\t\t\tvx.dvptrack('iv2');\r\n\t\t\t\t}\r\n\t\t\t},{\r\n\t\t\t\tpercent: {{env.qp}},\r\n\t\t\t\ttime: {{env.qt}},\r\n\t\t\t\tnofocus: 1\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t\/\/ thumbnail reel start =================================\r\n\t\ttry {\r\n\t\t\tvar vidUrl = dvp_meta.vid.video;\r\n\t\t\tvar baseImgUrl = (function() {\r\n\t\t\t\tfor (var i = vidUrl.length - 1; i >= 0; i--) {\r\n\t\t\t\t\tif (vidUrl[i] === \"\/\") {\r\n\t\t\t\t\t\treturn vidUrl.slice(0, i);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})();\r\n\t\t\tvar mouseOnReel;\r\n\t\t\tvar mouseClickedOnReel;\r\n\t\t\tvar currentThumbFromCaption;\r\n\t\t\tvar numOfThumbnails;\r\n\t\t\tvar captionKeys = [];\r\n\t\t\tvar imgFileType = \".png\";\r\n\t\t\t\r\n\t\t\tvar cpp = document.getElementById(\"ds_cpp\");\r\n\t\t\tvar playerContainer = document.getElementById(\"ds_player_container\"); \r\n\t\t\tvar cfp = document.getElementById(\"ds_content_frame_parent\");\r\n\t\t\t\/\/var titleBar;\r\n\t\t\tvar allThumbLi = [];\r\n\t\t\tvar allThumbUl = [];\r\n\t\t\t\r\n\t\t\tvar adText;\r\n\r\n\t\t\tvar thumbReel = document.getElementById(\"ds_thumbnail_reel\")\r\n\t\t\tvar thumbReelContainer = thumbReel.querySelector(\".ds_thumb_container\")\r\n\t\t\tvar thumbReelLi = thumbReel.querySelector(\".ds_thumb_li\")\r\n\t\t\twhile (thumbReelContainer.firstChild) {\r\n\t\t\t\tthumbReelContainer.removeChild(thumbReelContainer.firstChild);\r\n\t\t\t}\r\n\t\t\twhile (thumbReel.firstChild) {\r\n\t\t\t\tthumbReel.removeChild(thumbReel.firstChild);\r\n\t\t\t}\r\n\r\n\t\t\t\/\/ get timestamps\r\n\t\t\tfor (var key in dvp_meta.vid.caption) {\r\n\t\t\t\tcaptionKeys.push(key);\r\n\t\t\t}\r\n\t\t\tnumOfThumbnails = captionKeys.length;\r\n\r\n\t\t\tcreateThumbReel();\r\n\t\t\t\/\/createTitleBar();\r\n\r\n\t\t\tvx.addListener(thumbReel, \"mouseenter\", function() {\r\n\t\t\t\tmouseOnReel = true;\r\n\t\t\t});\r\n\t\t\tvx.addListener(thumbReel, \"mouseleave\", function() {\r\n\t\t\t\tmouseOnReel = false;\r\n\t\t\t});\r\n\t\r\n\t\t\tsetThumbReelSize();\r\n\r\n\t\t\t\/\/ function createTitleBar() {\r\n\t\t\/\/\t\ttitleBar = document.createElement(\"div\");\r\n\t\t\t\/\/\ttitleBar.id = \"ds_titlebar\";\r\n\t\t\t\/\/\tplayerContainer.insertBefore(titleBar, thumbReel);\r\n\t\t\/\/\t}\r\n\r\n\t\t\tfunction createThumbReel() {\r\n\t\t\t\t\/\/ thumbReel = document.createElement(\"div\");\r\n\t\t\t\t\/\/ thumbReel.id = \"ds_thumbnail_reel\";\r\n\t\t\t\t\r\n\t\t\t\tadText = document.createElement(\"span\");\r\n\t\t\t\tadText.innerHTML = \"Advertisement\";\r\n\t\t\t\r\n\t\t\t\tvar ds_body = vx.ww.document.querySelector(\"ds_body\");\r\n\r\n\t\t\t\t\/\/ if (reelMovement === \"scroll\" && (reelPosition === \"right\" || reelPosition === \"left\")) {\r\n\t\t\t\t\/\/ \tcreateThumbUl();\r\n\t\t\t\t\/\/ \tfor (var i = 1; i <= numOfThumbnails; i++) {\r\n\t\t\t\t\/\/ \t\t(function(newI) {\r\n\t\t\t\t\/\/ \t\t\tvar thumbListItem = createThumbLi(newI);\r\n\t\t\t\t\/\/ \t\t\tallThumbUl[0].appendChild(thumbListItem);\t\t\t\r\n\t\t\t\t\/\/ \t\t\tvar thumburl = baseImgUrl + \"\/images\/img_\" + (newI-1) + imgFileType;\r\n\t\t\t\t\/\/ \t\t\tthumbListItem.style.backgroundImage = \"url(\" + thumburl + \")\";\r\n\t\t\t\t\/\/ \t\t\t\/\/ thumbListItem.childNodes[0].style.display = \"none\";\r\n\t\t\t\t\/\/ \t\t\tthumbListItem.querySelector(\".ds_thumb_img_lowlight\").style.opacity = \"0\";\r\n\t\t\t\t\/\/ \t\t\tvx.addListener(thumbListItem, \"click\", function() {\r\n\t\t\t\t\/\/ \t\t\t\tctFrmSkip(captionKeys[newI-1]);\r\n\t\t\t\t\/\/ \t\t\t\tmouseClickedOnReel = true;\r\n\t\t\t\t\/\/ \t\t\t});\r\n\t\t\t\t\/\/ \t\t\tvx.addListener(thumbListItem, \"mouseenter\", function() {\r\n\t\t\t\t\/\/ \t\t\t\tsetCurrentThumb(newI);\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\/\/ \t\t\t});\r\n\t\t\t\t\/\/ \t\t\tvx.addListener(thumbListItem, \"mouseleave\", function() {\r\n\t\t\t\t\/\/ \t\t\t\tsetCurrentThumb(currentThumbFromCaption);\t\r\n\t\t\t\t\/\/ \t\t\t});\r\n\t\t\t\t\/\/ \t\t\tdvp_meta.vid.caption[captionKeys[newI-1]].order = newI;\r\n\t\t\t\t\/\/ \t\t\tallThumbLi.push(thumbListItem);\r\n\t\t\t\t\/\/ \t\t})(i);\r\n\t\t\t\t\/\/ \t}\r\n\t\t\t\t\/\/ \tthumbReel.style.overflow = \"scroll\";\r\n\t\t\t\t\/\/ } else {\r\n\t\t\t\t\tfor (var i = 1; i <= numOfThumbnails; i++) {\r\n\t\t\t\t\t\t(function(newI) {\r\n\t\t\t\t\t\t\tvar thumbListItem = createThumbLi(newI, dvp_meta.vid.caption[captionKeys[newI-1]]);\r\n\t\t\t\t\t\t\tif (reelThumbs <= 0) return;\r\n\t\t\t\t\t\t\tif (allThumbUl.length === 0) {\r\n\t\t\t\t\t\t\t\tcreateThumbUl(null, true);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar allThumbUlLength = allThumbUl.length\r\n\t\t\t\t\t\t\tfor (var j = 0; j < allThumbUlLength; j++) {\r\n\t\t\t\t\t\t\t\tif (allThumbUl[j].querySelectorAll('.ds_thumb_li').length < reelThumbs) {\r\n\t\t\t\t\t\t\t\t\tallThumbUl[j].appendChild(thumbListItem);\r\n\t\t\t\t\t\t\t\t} else if (j === allThumbUl.length -1) {\r\n\t\t\t\t\t\t\t\t\tcreateThumbUl(thumbListItem, true);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\/\/ var thumburl = baseImgUrl + \"\/images\/img_\" + (newI-1) + imgFileType;\r\n\t\t\t\t\t\t\t\/\/ thumbListItem.style.backgroundImage = \"url(\" + thumburl + \")\";\r\n\t\t\t\t\t\t\t\/\/ thumbListItem.childNodes[0].style.display = \"none\";\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\/\/ thumbListItem.childNodes[0].style.opacity = \"0\";\r\n\t\t\t\t\t\t\/\/\tthumbListItem.querySelector(\".ds_thumb_img_lowlight\").style.opacity = \"0\"\r\n\r\n\t\t\t\t\t\t\tif (reelClickout) {\r\n\t\t\t\t\t\t\t\tvar captionLink = dvp_meta.vid.caption[captionKeys[newI-1]].link;\r\n\t\t\t\t\t\t\t\tif (captionLink) {\r\n\t\t\t\t\t\t\t\t\tvar onclickStr = \"ds_ctwrap\" + Math.floor(1000000 * Math.random());\r\n\t\t\t\t\t\t\t\t\twindow[onclickStr] = function() {\r\n\t\t\t\t\t\t\t\t\t\tvar ctfuncUrl = {{ctfunc}}(captionLink);\r\n\t\t\t\t\t\t\t\t\t\twindow.open(ctfuncUrl,click_target);\r\n\t\t\t\t\t\t\t\t\t\tctFrm.contentWindow.postMessage('mute', '*');\r\n\t\t\t\t\t\t\t\t\t\tif (player) {\r\n\t\t\t\t\t\t\t\t\t\t\tplayer.setMute(true);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\tthumbListItem.setAttribute(\"onclick\", onclickStr+\"();\");\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tvx.addListener(thumbListItem, \"click\", function() {\r\n\t\t\t\t\t\t\t\t\tctFrmSkip(captionKeys[newI-1]);\r\n\t\t\t\t\t\t\t\t\tmouseClickedOnReel = true;\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\/\/ vx.addListener(thumbListItem, \"mouseenter\", function() {\r\n\t\t\t\t\t\t\t\/\/ \tsetCurrentThumb(newI);\t\r\n\t\t\t\t\t\t\t\/\/ });\r\n\t\t\t\t\t\t\t\/\/ vx.addListener(thumbListItem, \"mouseleave\", function() {\r\n\t\t\t\t\t\t\t\/\/ \tsetCurrentThumb(currentThumbFromCaption);\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\/\/ });\r\n\t\t\t\t\t\t\tdvp_meta.vid.caption[captionKeys[newI-1]].order = newI;\r\n\t\t\t\t\t\t\tallThumbLi.push(thumbListItem);\r\n\t\t\t\t\t\t})(i);\r\n\t\t\t\t\t}\r\n\t\t\t\t\/\/ }\r\n\t\t\t}\r\n\t\r\n\t\t\tfunction setThumbReelSize() {\t\t\r\n\t\t\t\tfor (var i = 0; i < allThumbLi.length; i++) {\r\n\t\t\t\t\t\/\/ allThumbLi[i].style.height = vx.dvp_thumb_height + \"px\";\r\n\t\t\t\t\tallThumbLi[i].style.width = \"100%\";\r\n\t\t\t\t}\r\n\t\t\t\/\/\tthumbReel.style.height = vx.dvp_reel_height + \"px\";\r\n\t\t\t\/\/\tthumbReel.style.width = vx.dvp_reel_width + \"px\";\r\n\r\n\t\t\t\tfor (var j = 0; j < allThumbUl.length; j++) {\r\n\t\t\t\t\tallThumbUl[j].style.display = \"block\";\r\n\t\t\t\t}\r\n\t\t\t\tif (!vx.dockFirstResize) {\r\n\t\t\t\t\tcfp.style.width = vx.dvp_width + \"px\";\r\n\t\t\t\t\tcfp.style.height = vx.dvp_height + \"px\";\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\r\n\t\t\tfunction reelScrollTo(num) {\r\n\t\t\t\tif (num > numOfThumbnails - reelThumbs + 1) num = numOfThumbnails - reelThumbs + 1;\r\n\t\t\t\tif (mouseOnReel && mouseClickedOnReel) {\r\n\t\t\t\t\tmouseClickedOnReel = false;\r\n\t\t\t\t} else if (mouseOnReel) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n                if (num < 1) num = 1;\r\n\t\t\t\tvar thumbSelected = allThumbLi[num-1];\r\n\t\t\t\tvar newScrolltop = thumbReel.scrollTop + thumbSelected.getBoundingClientRect().top - thumbReel.getBoundingClientRect().top;\r\n\t\t\t\tvar comparison = newScrolltop > thumbReel.scrollTop ? \"scrolldown\" : newScrolltop < thumbReel.scrollTop ? \"scrollup\" : '';\r\n\t\t\t\tvar currentJump = 10;\r\n\t\t\t\tvar lastThumbReelScrollTop;\r\n\t\r\n\t\t\t\tfunction scroll() {\r\n\t\t\t\t\tif (comparison === \"scrolldown\") {\r\n\t\t\t\t\t\tif (newScrolltop > thumbReel.scrollTop) {\r\n\t\t\t\t\t\t\tlastThumbReelScrollTop = thumbReel.scrollTop += currentJump;\r\n\t\t\t\t\t\t\tthumbReel.scrollTop += currentJump;\r\n\t\t\t\t\t\t\tcurrentJump += 10;\r\n\t\t\t\t\t\t\trequestAnimationFrame(scroll);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthumbReel.scrollTop = newScrolltop;\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (comparison === \"scrollup\") {\r\n\t\t\t\t\t\tif (newScrolltop < thumbReel.scrollTop) {\r\n\t\t\t\t\t\t\tthumbReel.scrollTop -= currentJump\r\n\t\t\t\t\t\t\tlastThumbReelScrollTop = thumbReel.scrollTop;\r\n\t\t\t\t\t\t\tcurrentJump += 10;\r\n\t\t\t\t\t\t\trequestAnimationFrame(scroll);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthumbReel.scrollTop = newScrolltop;\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tscroll();\r\n\t\t\t}\r\n\t\r\n\t\t\tfunction createThumbUl(li, selectall) {\r\n\t\t\t\t\/\/ var thumbCont = document.createElement(\"ul\");\r\n\t\t\t\t\/\/ thumbCont.className = \"ds_thumb_container\";\r\n\t\t\t\tvar thumbCont = thumbReelContainer.cloneNode(true)\r\n\t\t\t\tif (li) thumbCont.appendChild(li);\r\n\t\t\t\tthumbReel.appendChild(thumbCont);\r\n\r\n\t\t\t\tallThumbUl.push(thumbCont);\r\n\t\t\t}\r\n\t\r\n\t\t\tfunction createThumbLi(num, itemData) {\r\n\t\t\t\t\/\/ var thumbImg = document.createElement(\"li\");\r\n\t\t\t\t\/\/ thumbImg.id = \"ds_thumb_img\" + num;\r\n\t\t\t\t\/\/ thumbImg.className = \"ds_asset_type_\" + itemData.credit;\r\n\t\t\t\t\/\/ var thumbImgLowlight = document.createElement(\"div\");\r\n\t\t\t\t\/\/ thumbImgLowlight.id = \"ds_thumb_img_lowlight\" + num;\r\n\t\t\t\t\/\/ thumbImgLowlight.className = \"ds_thumb_img_lowlight\";\r\n\t\t\t\t\/\/ var thumbImgSpan = document.createElement(\"span\");\r\n\t\t\t\t\/\/ thumbImgSpan.id = \"ds_thumb_img_lowlight_text\" + num;\r\n\t\t\t\t\/\/ thumbImgSpan.className = \"ds_thumb_img_lowlight_text\";\r\n\t\t\t\t\/\/ var thumbTitleSpan = document.createElement(\"span\");\r\n\t\t\t\t\/\/ thumbTitleSpan.id = \"ds_thumb_title\" + num;\r\n\t\t\t\t\/\/ thumbTitleSpan.className = \"ds_thumb_title\";\r\n\t\t\t\t\/\/ thumbTitleSpan.innerHTML = itemData.title;\r\n\r\n\t\t\t\tvar thumbImg = thumbReelLi.cloneNode(true)\r\n\t\t\t\tthumbImg.id = \"ds_thumb_img\" + num;\r\n\t\t\t\tvar thumbImgLowlight = thumbImg.querySelector('.ds_thumb_img_lowlight');\r\n\t\t\t\tthumbImgLowlight.id = \"ds_thumb_img_lowlight\" + num;\r\n\t\t\t\tvar thumbImgSpan = thumbImg.querySelector(\".ds_thumb_img_lowlight_text\");\r\n\t\t\t\tthumbImgSpan.id = \"ds_thumb_img_lowlight_text\" + num;\r\n\t\t\t\tvar thumbTitleSpan = thumbImg.querySelector(\".ds_thumb_title\");\r\n\t\t\t\tthumbTitleSpan.id = \"ds_thumb_title\" + num;\r\n\t\t\t\tthumbTitleSpan.innerHTML = itemData.title;\r\n\r\n\t\t\t\t\/\/ category and date\r\n\t\t\t\tvar dvpDesc = itemData.desc;\r\n\t\t\t\tvar dvpDescSplit = dvpDesc.split(\"|\");\r\n\t\t\t\tif (dvpDescSplit.length === 2) {\r\n\t\t\t\t\tvar categoryDom = thumbImg.querySelector(\".ds_category\");\r\n\t\t\t\t\tvar dateDom = thumbImg.querySelector(\".ds_date\");\r\n\t\t\t\t\tif (categoryDom) {\r\n\t\t\t\t\t\tcategoryDom.textContent = dvpDescSplit[0]\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (dateDom) {\r\n\t\t\t\t\t\tdateDom.textContent = dvpDescSplit[1]\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar thumbTinyImg = null;\r\n\t\t\t\tif (reelShowTinyImg) {\r\n\t\t\t\t\tthumbTinyImg = document.createElement('img');\r\n\t\t\t\t\tthumbTinyImg.id = \"ds_thumb_tiny_img\" + num;\r\n\t\t\t\t\tthumbTinyImg.className = \"ds_thumb_tiny_img\";\r\n\t\t\t\t\tthumbTinyImg.src = baseImgUrl + \"\/images\/img_\" + (num-1) + imgFileType ;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tswitch (reelOverlay) {\r\n\t\t\t\t\tcase \"title\":\r\n\t\t\t\t\t\tthumbImgSpan.innerHTML = truncate(dvp_meta.vid.caption[captionKeys[num-1]].title, 50, true);\r\n\t\t\t\t\t\tthumbImgSpan.className += \" ds_reel_overlay_title\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tthumbImgSpan.innerHTML = num;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t\/\/ thumbImgLowlight.appendChild(thumbImgSpan);\r\n\t\t\t\t\/\/ thumbImg.appendChild(thumbImgLowlight);\r\n\t\t\t\tif (reelShowTinyImg && thumbTinyImg) {\r\n\t\t\t\t\tthumbImg.appendChild(thumbTinyImg);\r\n\t\t\t\t}\r\n\t\t\t\t\/\/ thumbImg.appendChild(thumbTitleSpan);\r\n\r\n\t\t\t\treturn thumbImg;\r\n\t\t\t}\r\n\t\r\n\t\t\tfunction setCurrentThumb(num, fromMessage) {\r\n\t\t\t\t\/\/ titleBar.innerHTML = truncate(dvp_meta.vid.caption[captionKeys[num-1]].title, 72, true)\r\n\t\t\t\t\/\/ if (mouseOnReel && fromMessage) return;\r\n\t\t\t\tfor (var i = 1; i <= numOfThumbnails; i++) {\r\n\t\t\t\t\tif (i === +num) {\r\n\t\t\t\t\t\t\/\/ allThumbLi[i-1].childNodes[0].style.display = \"block\";\r\n\t\t\t\t\t\t\/\/ allThumbLi[i-1].childNodes[0].style.opacity = \"1\";\r\n\t\t\t\t\t\tallThumbLi[i-1].className = allThumbLi[i-1].className + \" ds_thumb_selected\";\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\/\/ allThumbLi[i-1].childNodes[0].style.display = \"none\";\r\n\t\t\t\t\t\t\/\/ allThumbLi[i-1].childNodes[0].style.opacity = \"0\";\r\n\t\t\t\t\t\tallThumbLi[i-1].className=allThumbLi[i-1].className?allThumbLi[i-1].className.replace(new RegExp('(^|\\\\b)(ds_thumb_selected)(\\\\b|$)','gi'),' '):'';\r\n\t\t\t\t\t\t\/\/ allThumbLi[i-1].className = \"\";\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\r\n\t\t\t \r\n\t\r\n\t\r\n\t\t\t\/\/ function recalcHeight() {\r\n\t\t\t\/\/ \tvar dscppRect = cpp.getBoundingClientRect();\r\n\t\t\t\/\/ \tvar cppInner = document.getElementById(\"ds_cpp_inner\");\r\n\t\t\t\/\/ \tvar cppInnerRect = cppInner.getBoundingClientRect();\r\n\t\r\n\t\t\t\/\/ \tif (cppInnerRect.height > currentMaxCppHeight) {\r\n\t\t\t\/\/ \t\tcurrentMaxCppHeight = cppInnerRect.height;\r\n\t\t\t\/\/ \t\tcpp.style.height = currentMaxCppHeight + \"px\";\r\n\t\t\t\/\/ \t}\r\n\t\t\t\/\/ }\r\n\t\r\n\t\t\tfunction insertAfter(newNode, referenceNode) {\r\n\t\t\t\treferenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tvx.debug(e);\r\n\t\t}\r\n\r\n\t\tvx.addListener(window, \"resize\", function() {\r\n\t\t\ttry {\r\n\t\t\t\tvx.adManager.sendMessage(vx.adManager.activeAd.ifr, \"resizeMe\", {\r\n\t\t\t\t\t\"width\": document.getElementById(\"ds_cpp\").getBoundingClientRect().width,\r\n\t\t\t\t\t\"height\": dvp_meta.height\r\n\t\t\t\t});\r\n\t\t\t} catch (e) {\r\n\t\t\t\tvx.debug(\"failed to resize\");\r\n\t\t\t}\t\t\t\t\t\t\r\n\t\t});\r\n\r\n\t\t\/\/ thumbnail reel end ========================================\r\n\r\n\t\tvar actionDiv=document.createElement('div');\r\n\t\tactionDiv.setAttribute(\"style\",\"width:100%;height:\"+(dvp_meta.height-32)+\"px;z-index:\"+(zindex_base+5)+\";position:absolute;top:0;left:0;\");\r\n\t\tctFrm.parentNode.insertBefore(actionDiv,ctFrm);\r\n\r\n\t\tvar capIdxLast=null;\r\n\t\tvar seekPosNext=null;\r\n\t\tvar seekPosPrev=null;\r\n\t\tfunction ctFrmSkip(pos) {\r\n\t\t\tif (pos==null) { return; }\r\n\t\t\tctFrm.contentWindow.postMessage(\"skip\"+pos, \"*\");\r\n\t\t\tvx.debug('next slide:' + pos);\r\n\t\t}\r\n\t\twindow.ds_dvp_next=function(){ ctFrmSkip(seekPosNext); };\r\n\t\twindow.ds_dvp_previous=function(){ ctFrmSkip(seekPosPrev); };\r\n\t\tfunction setSlideCaption(pos) {\r\n\t\t\tif (pos>=0 && dvp_meta.vid.caption) {\r\n\t\t\t\tvar capmeta=dvp_meta.vid.caption;\r\n\t\t\t\tvar idx=null;\r\n\t\t\t\tvar curr=0;\r\n\t\t\t\tvar total=0;\r\n\t\t\t\tvar found=0;\r\n\t\t\t\tvar keys=[];\r\n\t\t\t\tfor (var key in capmeta) {\r\n\t\t\t\t\tif (capmeta.hasOwnProperty(key) && !isNaN(tmpval=parseFloat(key)) && tmpval>=0) {\r\n\t\t\t\t\t\ttotal++;\r\n\t\t\t\t\t\tkeys.push(key);\r\n\t\t\t\t\t\tif (found==0) {\r\n\t\t\t\t\t\t\tif (pos<tmpval) {\r\n\t\t\t\t\t\t\t\tfound++;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tcurr++;\r\n\t\t\t\t\t\t\t\tidx=key;\r\n\t\t\t\t\t\t\t\tif (pos==tmpval) {\r\n\t\t\t\t\t\t\t\t\tfound++;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tseekPosNext=null;\r\n\t\t\t\tseekPosPrev=null;\r\n\t\t\t\tif (idx!==null && keys.length>0) {\r\n\t\t\t\t\tseekPosNext=keys[curr%keys.length];\r\n\t\t\t\t\tseekPosPrev=keys[(curr-2+keys.length)%keys.length];\r\n\t\t\t\t}\r\n\t\t\t\tif (idx!==null&&idx!=capIdxLast) {\r\n\t\t\t\t\t\/\/ found new caption\r\n\t\t\t\t\tcapIdxLast=idx;\r\n\t\t\t\t\tif (allThumbLi && allThumbLi.length > 0) {\r\n\t\t\t\t\t\tsetCurrentThumb(capmeta[idx]['order'], true);\r\n\t\t\t\t\t\tcurrentThumbFromCaption = capmeta[idx]['order'];\r\n\t\t\t\t\t\tvar currentThumbParent = allThumbLi[currentThumbFromCaption-1].parentNode;\r\n\t\t\t\t\t\tif (reelMovement === \"scroll\") reelScrollTo(currentThumbFromCaption);\r\n\t\t\t\t\t\tfor (var i = 0; i < numOfThumbnails; i++) {\r\n\t\t\t\t\t\t\tif (allThumbLi[i].parentNode !== currentThumbParent) {\r\n\t\t\t\t\t\t\t\tallThumbLi[i].parentNode.style.display = \"none\";\r\n\t\t\t\t\t\t\t\tallThumbLi[capmeta[idx]['order'] - 1].parentNode.style.display = \"block\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar el_curr=vx.ww.document.querySelector(\".ds_slide_curr\");\r\n\t\t\t\t\tif (el_curr) {\r\n\t\t\t\t\t\tel_curr.innerHTML=curr;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar el_total=vx.ww.document.querySelector(\".ds_slide_total\");\r\n\t\t\t\t\tif (el_total) {\r\n\t\t\t\t\t\tel_total.innerHTML=total;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar el_title=vx.ww.document.querySelectorAll(\".ds_title\");\r\n\t\t\t\t\tif (el_title && el_title.length > 0) {\r\n\t\t\t\t\t\tfor (var i = 0; i < el_title.length; i++) {\r\n\t\t\t\t\t\t\tel_title[i].innerHTML=truncate(capmeta[idx]['title'], title_trim, true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar el_desc=vx.ww.document.querySelector(\".ds_summary\");\r\n\t\t\t\t\tif (el_desc) {\r\n\t\t\t\t\t\tel_desc.innerHTML=truncate(capmeta[idx]['desc'], desc_trim, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar el_credit=vx.ww.document.querySelector(\".ds_credit\");\r\n\t\t\t\t\tif (el_credit) {\r\n\t\t\t\t\t\tel_credit.innerHTML=capmeta[idx]['credit'];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar el_goto=vx.ww.document.querySelector(\".ds_goto\");\r\n\t\t\t\t\tvar link=capmeta[idx]['link'];\r\n\t\t\t\t\tif (!link) {\r\n\t\t\t\t\t\tlink=dvp_meta.vid.link;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (link) {\r\n\t\t\t\t\t\tvar onclickStr = \"ds_ctwrap\" + Math.floor(1000000 * Math.random());\r\n\t\t\t\t\t\twindow[onclickStr] = function() {\r\n\t\t\t\t\t\t\t\tvar ctfuncUrl = {{ctfunc}}(link);\r\n\t\t\t\t\t\t\twindow.open(ctfuncUrl,click_target);\r\n\t\t\t\t\t\t\tctFrm.contentWindow.postMessage('mute', '*');\r\n\t\t\t\t\t\t\tplayer.setMute(true);\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tonclickStr = onclickStr+\"();\";\r\n\t\t\t\t\t\t\t\tactionDiv.setAttribute(\"onclick\", onclickStr);\r\n\t\t\t\t\t\tactionDiv.style.cursor=\"pointer\";\r\n\t\t\t\t\t\tif (el_title && el_title.length > 0) {\r\n\t\t\t\t\t\t\tfor (var i = 0; i < el_title.length; i++) {\r\n\t\t\t\t\t\t\t\tel_title[i].setAttribute(\"onclick\",onclickStr);\r\n\t\t\t\t\t\t\t\tel_title[i].style.cursor=\"pointer\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (el_desc) {\r\n\t\t\t\t\t\t\tel_desc.setAttribute(\"onclick\",onclickStr);\r\n\t\t\t\t\t\t\tel_desc.style.cursor=\"pointer\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (el_goto) {\r\n\t\t\t\t\t\t\tel_goto.setAttribute(\"onclick\",onclickStr);\r\n\t\t\t\t\t\t\tel_goto.style.cursor=\"pointer\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tactionDiv.removeAttribute(\"onclick\");\r\n\t\t\t\t\t\tactionDiv.style.cursor=\"auto\";\r\n\t\t\t\t\t\tif (el_title && el_title.length > 0) {\r\n\t\t\t\t\t\t\tfor (var i = 0; i < el_title.length; i++) {\r\n\t\t\t\t\t\t\t\tel_title[i].removeAttribute(\"onclick\");\r\n\t\t\t\t\t\t\t\tel_title[i].style.cursor=\"auto\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (el_desc) {\r\n\t\t\t\t\t\t\tel_desc.removeAttribute(\"onclick\");\r\n\t\t\t\t\t\t\tel_desc.style.cursor=\"auto\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (el_goto) {\r\n\t\t\t\t\t\t\tel_goto.removeAttribute(\"onclick\");\r\n\t\t\t\t\t\t\tel_goto.style.cursor=\"auto\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (vx.captionUpdated && typeof vx.captionUpdated == \"function\") vx.captionUpdated();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tsetSlideCaption(0);\r\n\r\n\t\tvar comscore=null;\r\n\t\tvar playfirst=0;\r\n\t\tvar adTimerStartAllowed=1;\r\n\t\tvx.addListener(window, 'message', function(event) {\r\n\t\t\tif (!event.origin.match(\/^https?:\\\/\\\/c5x8i7c7\\.ssl\\.hwcdn\\.net\/)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\/\/vx.debug('ds_playerframe_message:' + event.origin + \":\" + event.data);\r\n\t\t\tif (event.data && event.data.match && event.data.match(\/^playerpos[\\d\\.]+$\/)) {\r\n\t\t\t\tvar position=event.data.substr(9);\r\n\t\t\t\tif (position>=0) {\r\n\t\t\t\t\tsetSlideCaption(position);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (event.data && event.data.match && event.data.match(\/^playerstate[\\w\\.]+$\/)) {\r\n\t\t\t\tvar state=event.data.substr(11);\r\n\t\t\t\tvx.debug(\"playerstate: \"+ state);\r\n\t\t\t\tif (state=='loop') {\r\n\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\tif(comscore){\r\n\t\t\t\t\t\t\tcomscore.stop();\r\n\t\t\t\t\t\t\tvx.debug(\"comscore>>stop\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (window.ns_ && window.ns_.ReducedRequirementsStreamingAnalytics) {\r\n\t\t\t\t\t\t\tcomscore = new window.ns_.ReducedRequirementsStreamingAnalytics({publisherId:'22807838'});\r\n\t\t\t\t\t\t\tvx.debug(\"comscore>>refresh\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(comscore){\r\n\t\t\t\t\t\t\tcomscore.playVideoContentPart({ns_st_ci:dvp_meta.vid.id,ns_st_cl:parseInt(parseFloat(dvp_meta.vid.duration)*1000),ns_st_pu:\"distroscale\",c3:\"{{env.w}}\",c4:\"*null\",distroscale_guid:\"c_{{env.t}}_{{env.s}}_{{env.i}}\",c6:\"*null\",ns_st_ge:\"*null\",ns_st_ia:\"*null\",ns_st_ce:\"*null\",ns_st_ddt:\"*null\",ns_st_tdt:\"*null\"},ns_.ReducedRequirementsStreamingAnalytics.ContentType.ShortFormOnDemand);\r\n\t\t\t\t\t\t\tvx.dvptrack('cm', '{\"cm\":\"playContent\"}');\r\n\t\t\t\t\t\t\tsetTimeout(function(){vx.quantcastSegment(\"cm.content\")},1);\r\n\t\t\t\t\t\t\tvx.debug(\"comscore>>playContent\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},1);\r\n\t\t\t\t} else if (state=='pause') {\r\n\t\t\t\t\tif ('s{{env.s}}'=='s4921') {\r\n\t\t\t\t\t\t\/\/ for certain sites, stop ads when content is paused\r\n\t\t\t\t\t\tadTimerStartAllowed=0;\r\n\t\t\t\t\t\tplayer.stopAdbreakTimer(); \r\n\t\t\t\t\t}\r\n\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\tif(comscore){\r\n\t\t\t\t\t\t\tcomscore.stop();\r\n\t\t\t\t\t\t\tvx.debug(\"comscore>>stop\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},1);\r\n\t\t\t\t} else if (state=='play') {\r\n\t\t\t\t\tif (playfirst<=0) {\r\n\t\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\t\tif (!comscore && window.ns_ && window.ns_.ReducedRequirementsStreamingAnalytics) {\r\n\t\t\t\t\t\t\t\tcomscore = new window.ns_.ReducedRequirementsStreamingAnalytics({publisherId:'22807838'});\r\n\t\t\t\t\t\t\t\tvx.debug(\"comscore>>refresh\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(comscore){\r\n\t\t\t\t\t\t\t\tcomscore.playVideoContentPart({ns_st_ci:dvp_meta.vid.id,ns_st_cl:parseInt(parseFloat(dvp_meta.vid.duration)*1000),ns_st_pu:\"distroscale\",c3:\"{{env.w}}\",c4:\"*null\",distroscale_guid:\"c_{{env.t}}_{{env.s}}_{{env.i}}\",c6:\"*null\",ns_st_ge:\"*null\",ns_st_ia:\"*null\",ns_st_ce:\"*null\",ns_st_ddt:\"*null\",ns_st_tdt:\"*null\"},ns_.ReducedRequirementsStreamingAnalytics.ContentType.ShortFormOnDemand);\r\n\t\t\t\t\t\t\t\tvx.dvptrack('cm', '{\"cm\":\"playContent\"}');\r\n\t\t\t\t\t\t\t\tsetTimeout(function(){vx.quantcastSegment(\"cm.content\")},1);\r\n\t\t\t\t\t\t\t\tvx.debug(\"comscore>>playContent\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},1);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tplayfirst--;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (state=='end') {\r\n\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\tif(comscore){\r\n\t\t\t\t\t\t\tcomscore.stop();\r\n\t\t\t\t\t\t\tvx.debug(\"comscore>>stop\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (window.ns_ && window.ns_.ReducedRequirementsStreamingAnalytics) {\r\n\t\t\t\t\t\t\tcomscore = new window.ns_.ReducedRequirementsStreamingAnalytics({publisherId:'22807838'});\r\n\t\t\t\t\t\t\tvx.debug(\"comscore>>refresh\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tvar player = null; \/\/ holds data from callback\r\n\t\tvar rollcount=0;\r\n\t\tvar ppEl=null;\r\n\t\tvar options = {\r\n\t\t\tminVol: minVol,\r\n\t\t\tpersistentMute: persistentMute,\r\n\t\t\treuseIframe: '1',\r\n\t\t\tplayerContainer: 'ds_player_container',\r\n\t\t\tadContainer: 'ds_ad_container',\r\n\t\t\twidth: dvp_meta.width,\r\n\t\t\theight: dvp_meta.height,\r\n\t\t\tplaylist: dvp_meta,\r\n\t\t\ttracker: dvpTrackName,\r\n\t\t\tzIndex: zindex_base,\r\n\t\t\tadCounterMax: 1, \/\/Use \"adLimit\" to use slot data-dvp value\t\t\r\n            serial: true,\r\n            alltags: false,\r\n\t\t\tvolumeBehavior: (mute_ad ? 'mute' : 'volume'),\r\n\t\t\tfriendlyIframe: friendly_iframe,\r\n\t\t\tcontentMute: function() {\r\n\t\t\t\tvx.debug(\"client - mute fn\");\r\n\t\t\t\tctFrm.contentWindow.postMessage(\"mute\", \"*\");\r\n\t\t\t},\r\n\t\t\tcontentUnmute: function() {\r\n\t\t\t\tvx.debug(\"client - unmute fn\");\r\n\t\t\t\tctFrm.contentWindow.postMessage(\"unmute\", \"*\");\r\n\t\t\t},\r\n\t\t\tcontentPause: function(adManager) {\r\n\t\t\t\tvx.debug(\"client - pause fn\");\r\n\t\t\t\tvx.adManager = adManager;\r\n\t\t\t\tvx.adPlaying = 1;\r\n\t\t\t\tif (ppEl) {\r\n\t\t\t\t\tppEl.style.display='block';\r\n\t\t\t\t\tppEl.setAttribute('data-adpp_status','play');\r\n\t\t\t\t}\r\n\t\t\t\tif (vx.floatOnAdStart){\r\n\t\t\t\t\tvx.floatOnAdStart();\r\n\t\t\t\t}\r\n\t\t\t\tadContDiv.style.zIndex = zindex_base+7;\r\n\t\t\t\tctFrm.contentWindow.postMessage(\"pause\", \"*\");\r\n\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\tif (vx.adPlaying) {\r\n\t\t\t\t\t\tvar covers=vx.ww.document.querySelectorAll(\".ds_advert_cover\");\r\n\t\t\t\t\t\tif (covers && covers.length > 0) {\r\n\t\t\t\t\t\t\tfor (var i = 0; i < covers.length; i++) {\r\n\t\t\t\t\t\t\t\tcovers[i].style.display=\"block\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},1000);\r\n\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\tif(comscore){\r\n\t\t\t\t\t\tcomscore.stop();\r\n\t\t\t\t\t\tvx.debug(\"comscore>>stop\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!comscore && window.ns_ && window.ns_.ReducedRequirementsStreamingAnalytics) {\r\n\t\t\t\t\t\tcomscore = new window.ns_.ReducedRequirementsStreamingAnalytics({publisherId:'22807838'});\r\n\t\t\t\t\t\tvx.debug(\"comscore>>refresh\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(comscore){\r\n\t\t\t\t\t\trollcount++;\r\n\t\t\t\t\t\tcomscore.playVideoAdvertisement({ns_st_cl:\"0\",c4:\"*null\",distroscale_guid:\"a_{{env.t}}_{{env.s}}_{{env.i}}\"},rollcount>1?ns_.ReducedRequirementsStreamingAnalytics.AdType.LinearOnDemandMidRoll:ns_.ReducedRequirementsStreamingAnalytics.AdType.LinearOnDemandPreRoll);\r\n\t\t\t\t\t\tvx.dvptrack('cm', '{\"cm\":\"playAd\"}');\r\n\t\t\t\t\t\tsetTimeout(function(){vx.quantcastSegment(\"cm.ad\")},1);\r\n\t\t\t\t\t\tvx.debug(\"comscore>>playAd\");\r\n\t\t\t\t\t}\r\n\t\t\t\t},1);\r\n\t\t\t\tif (vx.pushHalfUp && typeof vx.pushHalfUp === \"function\") {\r\n\t\t\t\t\tvx.pushHalfUp();\r\n\t\t\t\t}\r\n\t\t\t    if (vx.dockCheckInview && typeof vx.dockCheckInview === \"function\") {\r\n\t\t\t\t    vx.dockCheckInview(\"contentpause\");\r\n\t\t\t    }\r\n\t\t\t\t \r\n\t\t\t},\r\n\t\t\tcontentPlay: function() {\r\n\t\t\t\tvx.debug(\"client - play fn\");\r\n\t\t\t\tvx.adPlaying = 0;\r\n\t\t\t\tif (ppEl) {\r\n\t\t\t\t\tppEl.style.display='none';\r\n\t\t\t\t\tppEl.setAttribute('data-adpp_status','');\r\n\t\t\t\t}\r\n\t\t\t\tadContDiv.style.zIndex = -1;\r\n\t\t\t\tctFrm.contentWindow.postMessage(\"play\", \"*\");\r\n\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\tif (vx.adPlaying==0) {\r\n\t\t\t\t\t\tvar covers=vx.ww.document.querySelectorAll(\".ds_advert_cover\");\r\n\t\t\t\t\t\tif (covers && covers.length > 0) {\r\n\t\t\t\t\t\t\tfor (var i = 0; i < covers.length; i++) {\r\n\t\t\t\t\t\t\t\tcovers[i].style.display=\"none\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},1);\r\n\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\tif(comscore){\r\n\t\t\t\t\t\tcomscore.stop();\r\n\t\t\t\t\t\tvx.debug(\"comscore>>stop\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!comscore && window.ns_ && window.ns_.ReducedRequirementsStreamingAnalytics) {\r\n\t\t\t\t\t\tcomscore = new window.ns_.ReducedRequirementsStreamingAnalytics({publisherId:'22807838'});\r\n\t\t\t\t\t\tvx.debug(\"comscore>>refresh\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(comscore){\r\n\t\t\t\t\t\tcomscore.playVideoContentPart({ns_st_ci:dvp_meta.vid.id,ns_st_cl:parseInt(parseFloat(dvp_meta.vid.duration)*1000),ns_st_pu:\"distroscale\",c3:\"{{env.w}}\",c4:\"*null\",distroscale_guid:\"c_{{env.t}}_{{env.s}}_{{env.i}}\",c6:\"*null\",ns_st_ge:\"*null\",ns_st_ia:\"*null\",ns_st_ce:\"*null\",ns_st_ddt:\"*null\",ns_st_tdt:\"*null\"},ns_.ReducedRequirementsStreamingAnalytics.ContentType.ShortFormOnDemand);\r\n\t\t\t\t\t\tvx.dvptrack('cm', '{\"cm\":\"playContent\"}');\r\n\t\t\t\t\t\tsetTimeout(function(){vx.quantcastSegment(\"cm.content\")},1);\r\n\t\t\t\t\t\tvx.debug(\"comscore>>playContent\");\r\n\t\t\t\t\t}\r\n\t\t\t\t},1);\r\n\t\t\t    if (vx.dockCheckInview && typeof vx.dockCheckInview === \"function\") {\r\n\t\t\t\t    vx.dockCheckInview(\"contentplay\");\r\n\t\t\t    }\r\n\t\t\t\t \r\n\t\t\t},\r\n\t\t\tcontentSetVolume: function(vol) {\r\n\t\t\t\tvx.debug(\"client - set volume:\" + vol);\r\n\t\t\t\tctFrm.contentWindow.postMessage(\"setVolume:\" + vol, \"*\");\r\n\t\t\t},\r\n\t\t\tadFinished: function() {\r\n\t\t\t\t\/\/ this needs to be called after an ad finishes\r\n\t\t\t\t\/\/ or after an error\r\n\t\t\t\tvx.debug(\"***AdBreak finished\");\r\n\t\t\t\tvx.adPlaying = 0;\r\n\t\t\t},\r\n\t\t\tplaylistFinished: function() {\r\n\t\t\t\tvx.adPlaying = 0;\r\n\t\t\t\tvx.debug(\"***AdBreak playlist over\");\r\n\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\tif(comscore){\r\n\t\t\t\t\t\tcomscore.stop();\r\n\t\t\t\t\t\tvx.debug(\"comscore>>stop\");\r\n\t\t\t\t\t}\r\n\t\t\t\t},1);\r\n\t\t\t}\r\n\t\t};\r\n\t\tsetTimeout(function(){\r\n\t\t\tif (!comscore && window.ns_ && window.ns_.ReducedRequirementsStreamingAnalytics) {\r\n\t\t\t\tcomscore = new window.ns_.ReducedRequirementsStreamingAnalytics({publisherId:'22807838'});\r\n\t\t\t\tvx.debug(\"comscore>>refresh\");\r\n\t\t\t}\r\n\t\t\tif(comscore){\r\n\t\t\t\tplayfirst++;\r\n\t\t\t\tcomscore.playVideoContentPart({ns_st_ci:dvp_meta.vid.id,ns_st_cl:parseInt(parseFloat(dvp_meta.vid.duration)*1000),ns_st_pu:\"distroscale\",c3:\"{{env.w}}\",c4:\"*null\",distroscale_guid:\"c_{{env.t}}_{{env.s}}_{{env.i}}\",c6:\"*null\",ns_st_ge:\"*null\",ns_st_ia:\"*null\",ns_st_ce:\"*null\",ns_st_ddt:\"*null\",ns_st_tdt:\"*null\"},ns_.ReducedRequirementsStreamingAnalytics.ContentType.ShortFormOnDemand);\r\n\t\t\t\tvx.dvptrack('cm', '{\"cm\":\"playContent\"}');\r\n\t\t\t\tsetTimeout(function(){vx.quantcastSegment(\"cm.content\")},1);\r\n\t\t\t\tvx.debug(\"comscore>>playContent\");\r\n\t\t\t}\r\n\t\t},1);\r\n\t\twindow.vxvideojsinit(options, function(po) {\r\n\t\t\tvx.debug(\"vxvideojsinit callback invoked!\");\r\n\t\t\tvx.debug(po);\r\n\t\t\tplayer = po;\r\n\r\n            player.setAdWillAutoPlay(true);\r\n\t\t    player.setAdWillPlayMuted(true);\r\n\r\n\t\t\t\/\/ configurable - time in seconds between ad breaks\r\n\t\t\tif (adTimerStartAllowed) { player.startAdbreakTimer(15); }\r\n\r\n\t\t\t\/\/ Float the unit\r\n\t\t\tvar floatSpec = null;\r\n\t\t\tif(vx.dvp_float_spec){\r\n\t\t\t\tfloatSpec = vx.dvp_float_spec;\r\n\t\t\t}\r\n\t\t\tvar floatSpecFirst = null;\r\n\t\t\tif(vx.dvp_float_spec_first){\r\n\t\t\t\tfloatSpecFirst = vx.dvp_float_spec_first;\r\n\t\t\t}\r\n\t\t\tvar closeScope = null;\r\n\t\t\tif(vx.dvp_close_scope){\r\n\t\t\t\tcloseScope=vx.dvp_close_scope;\r\n\t\t\t}\r\n\r\n\t\t\tvar needClose=0; \/\/ Need explicit close, interstitial\r\n\t\t\tvar canFloat=0; \/\/ whether to allow automatic float\r\n\t\t\tvar fpEl=document.getElementById(\"ds_content_frame_parent\");\r\n\t\t\tif (fpEl) {\r\n\t\t\t\twindow.ds_float_close=function(id){\r\n\t\t\t\t\tvar el=document.getElementById(id);\r\n\t\t\t\t\tif (el) {\r\n\t\t\t\t\t\tendFloat(el);\r\n\t\t\t\t\t\tif (closeScope==\"pageview\") {\r\n\t\t\t\t\t\t\tcanFloat=-1;  \/\/ disable the whole forever\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcanFloat=0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tfunction endFloat(el) {\r\n\t\t\t\t\tel.className=el.className?el.className.replace(new RegExp('(^|\\\\b)(ds_float)(\\\\b|$)','gi'),' '):'';\r\n\t\t\t\t\tel.className=el.className?el.className.replace(new RegExp('(^|\\\\b)(tl|tr|bl|br|ct)(\\\\b|$)','gi'),' '):'';\r\n\t\t\t\t\tel.style.width=dvp_meta.width+\"px\";\r\n\t\t\t\t\tel.style.height=dvp_meta.height+\"px\";\r\n\t\t\t\t\tvar adEl=document.getElementById(\"ds_ad_container\");\r\n\t\t\t\t\tif (adEl) {\r\n\t\t\t\t\t\tadEl.style.width=dvp_meta.width+\"px\";\r\n\t\t\t\t\t\tadEl.style.height=dvp_meta.height+\"px\";\r\n\t\t\t\t\t\tif(vx.adManager && vx.adManager.activeAd && vx.adManager.activeAd.ifr){\r\n\r\n\t\t\t\t\t\t\tvx.adManager.sendMessage(vx.adManager.activeAd.ifr, \"resizeMe\", {\r\n\t\t\t\t\t\t\t\t\"width\": dvp_meta.width,\r\n\t\t\t\t\t\t\t\t\"height\": dvp_meta.height\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar ctEl=document.getElementById(\"ds_content_frame\");\r\n\t\t\t\t\tif (ctEl) {\r\n\t\t\t\t\t\tctEl.style.width=dvp_meta.width+\"px\";\r\n\t\t\t\t\t\tctEl.style.height=dvp_meta.height+\"px\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar clsEl=document.getElementById(\"ds_float_close\");\r\n\t\t\t\t\tif (clsEl) {\r\n\t\t\t\t\t\tclsEl.style.display=\"none\";\r\n\t\t\t\t\t\tclsEl.setAttribute(\"onclick\",\"\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfunction startFloat(el,style) {\r\n\t\t\t\t\tif (canFloat!=1) { return; }\r\n\t\t\t\t\tvar styleArr=style.split('\/');\r\n\t\t\t\t\tel.className=el.className?(el.className+' ds_float '+styleArr[0]):'ds_float '+styleArr[0];\r\n\t\t\t\t\tel.style.width=styleArr[1]+\"px\";\r\n\t\t\t\t\tel.style.height=styleArr[2]+\"px\";\r\n\t\t\t\t\tvar adEl=document.getElementById(\"ds_ad_container\");\r\n\t\t\t\t\tif (adEl) {\r\n\t\t\t\t\t\tadEl.style.width=styleArr[1]+\"px\";\r\n\t\t\t\t\t\tadEl.style.height=styleArr[2]+\"px\";\r\n\t\t\t\t\t\tif(vx.adManager && vx.adManager.activeAd && vx.adManager.activeAd.ifr){\r\n\t\t\t\t\t\t\tvx.adManager.sendMessage(vx.adManager.activeAd.ifr, \"resizeMe\", {\r\n\t\t\t\t\t\t\t\t\"width\": styleArr[1],\r\n\t\t\t\t\t\t\t\t\"height\": styleArr[2]\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar ctEl=document.getElementById(\"ds_content_frame\");\r\n\t\t\t\t\tif (ctEl) {\r\n\t\t\t\t\t\tctEl.style.width=styleArr[1]+\"px\";\r\n\t\t\t\t\t\tctEl.style.height=styleArr[2]+\"px\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar clsEl=document.getElementById(\"ds_float_close\");\r\n\t\t\t\t\tif (clsEl) {\r\n\t\t\t\t\t\tclsEl.style.display=\"block\";\r\n\t\t\t\t\t\tclsEl.setAttribute(\"onclick\",\"ds_float_close('ds_content_frame_parent')\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (floatSpec) {\r\n\t\t\t\t\tvx.inview2.trackEl(\"ds_player_container\",window,null,{\r\n\t\t\t\t\t\tcbqualify: function(countq, count){ },\r\n\t\t\t\t\t\tcbenter: function(count){\r\n\t\t\t\t\t\t\tif (needClose === 0) {\r\n\t\t\t\t\t\t\t\tendFloat(fpEl);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcbleave: function(count){\r\n\t\t\t\t\t\t\tif (canFloat==1) {\r\n\t\t\t\t\t\t\t\tstartFloat(fpEl,floatSpec);\r\n\t\t\t\t\t\t\t} else if (canFloat === 0) {\r\n\t\t\t\t\t\t\t\tif (vx.adPlaying==1) {\r\n\t\t\t\t\t\t\t\t\tcanFloat=1;\r\n\t\t\t\t\t\t\t\t\tstartFloat(fpEl,floatSpec);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tvx.floatOnAdStart=function(){\r\n\t\t\t\t\t\t\t\t\t\tvx.floatOnAdStart=function(){};\r\n\t\t\t\t\t\t\t\t\t\tcanFloat=1;\r\n\t\t\t\t\t\t\t\t\t\tstartFloat(fpEl,floatSpec);\r\n\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tnofocus: 1,\r\n\t\t\t\t\t\tpercent: 50,\r\n\t\t\t\t\t\ttime: 1\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tif (floatSpecFirst) {\r\n\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\tcanFloat=1;\r\n\t\t\t\t\t\tstartFloat(fpEl,floatSpecFirst);\r\n\t\t\t\t\t\tif (floatSpecFirst.match(\/ct\\\/\/)) {\r\n\t\t\t\t\t\t\tneedClose=1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},100);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\t\/\/ trigger ad call when unit comes into view\r\n\t\t\tvar trackDiv=document.createElement(\"div\");\r\n\t\t\ttrackDiv.id=\"ds_player_sensor\";\r\n\t\t\ttrackDiv.setAttribute(\"style\",\"width:1px;height:1px;padding:0;margin:0;border:none;background:none;position:relative;top:-300px\");\r\n\t\t\tcontDiv.parentNode.insertBefore(trackDiv,contDiv);\r\n\t\t\tvar immediateAdFired = false;\r\n\t\t\tvx.inview2.trackEl(trackDiv, window, function () {\r\n\t\t\t\tif (!immediateAdFired) {\r\n\t\t\t\t\timmediateAdFired = true;\r\n\t\t\t\t\tvx.dvptrack('wf', '{\"wf\":\"99: inview ad call\"}');\r\n\t\t\t\t\tvar ggyurl=\"\/\/googleads.g.doubleclick.net\/pagead\/ads?client=ca-video-pub-3851171199385532&slotname=6241611906&ad_type=standardvideo&description_url={{pageurl[enc=url]}}&max_ad_duration=60000&videoad_start_delay=0\"; \/\/ TestY\r\n\t\t\t\t\tggyurl=altGGParam(ggyurl);\r\n\t\t\t\t\tvar nowtag=[{\r\n\t\t\t\t\t\tcp:\"gg\",\r\n\t\t\t\t\t\twt:\"0\",\r\n\t\t\t\t\t\tsdk:\"ima_html5\",\r\n\t\t\t\t\t\turl:ggyurl\r\n\t\t\t\t\t}];\r\n\t\t\t\t\t\/\/var gdtargets={\"s3316\":1,\"s4073\":1};\r\n\t\t\t\t\t\/\/if ((typeof gdtargets !== \"undefined\") && gdtargets && ('s{{env.s}}' in gdtargets)) {\r\n\t\t\t\t\t\tnowtag.push({\r\n\t\t\t\t\t\t\tcp:\"ox\",\r\n\t\t\t\t\t\t\twt:\"0\",\r\n\t\t\t\t\t\t\tsdk:\"ima_html5\",\r\n\t\t\t\t\t\t\turl:\"\/\/distroscale-d.openx.net\/v\/1.0\/av?auid=538673374&url={{pageurl[enc=url]}}&cb={{random}}&vht={{height}}&vwd={{width}}\"\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\/\/}\r\n\t\t\t\t\t\/\/ if (adTimerStartAllowed) { player.startAdBreak(nowtag, 'mr'); }\r\n\t\t\t\t} \/\/ firedTest\r\n\t\t\t}, {\r\n\t\t\t\tpercent: 1,  \/\/ percent of player viewable\r\n\t\t\t\ttime: 1  \/\/ time in ms to be visible\r\n\t\t\t});\r\n\r\n\t\t\t\/\/ configure mouse enter\/leave to unmute\/mute\r\n\t\t\tif (!mute_ad) {\r\n\t\t\t\tvx.addListener(contDiv, \"mouseenter\", function(event) {\r\n\t\t\t\t\tvx.debug(\"mouseenter,unmute\");\r\n\t\t\t\t\tplayer.setMute(false);\r\n\t\t\t\t});\r\n\t\t\t\tvx.addListener(contDiv, \"mouseleave\", function(event) {\r\n\t\t\t\t\tvx.debug(\"mouseleave, mute\");\r\n\t\t\t\t\tplayer.setMute(true);\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tvar muteEl=document.getElementById('ds_mute');\r\n\t\t\t\tif (muteEl) {\r\n\t\t\t\t\t\/\/ clone muteEl to peel\r\n\t\t\t\t\tppEl=muteEl.cloneNode(true);\r\n\t\t\t\t\tppEl.id='ds_adpp';\r\n\t\t\t\t\tppEl.className='';\r\n\t\t\t\t\tppEl.style.display='none';\r\n\t\t\t\t\tppEl.style.backgroundImage='url(data:image\/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAAAXNSR0IArs4c6QAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KTMInWQAAAk5JREFUSA3dlLuKFUEURa9PTERRMDAzUgYRQ0MNRMTEeNBAcSIzMxMz\/8BIEMQ\/EMTIzNhA\/QFB8YGOICi+H2t1166pafrC7cFEN+yuU6dOnVdV12z2v2HTBgvazL7s\/Y38q\/iZp69htiDJRaCzIQyawO1a1VWhrMZJMmw3KWtvBfsKGWYf4HMFsBfuh+7\/BJ\/BdbjO7EKj2drIEZPEERTvoc6+QwOfggZ\/U+bfyniOsUKn76AbbsA43IbcIsEvodT2B0yga8gniv5nWdPmNuygU9ux2k9nlxkfwYNQJ55bAiN2UC90lBZ\/RTawaPWfe9Wak2T\/hYWj8Ak8D81OZ6kGsR66CUqRhJWHenU1W7MQ26EZO96BN6FOzDbJIE7HsC160KFV6HwFPoaHYG0D8mSMBdKJetvl7TkMn8KLUKRd\/WzBb9v7sS220MoMfAvaYq\/2ZMyrqHWk89i9RV70BWl9VAfrlGViAC+GZ+aPeBLeg7vhZCTT4Ubb5VkY5D5cgg+g8MpPxlggq8jZXUU+Az2XHVD8lctgJV6AF3AZPoT5AV0T+ecytrrOYOxjRTpKOwxyF3qlDWLrRJ6aftZ\/DdQGy5q2sa\/rBjJIDvgK8lno028Q21iNkUVunesmJmx1WqocfUZtOqzwPd6L3YY4K6puyHkeYOYP7FV\/DV\/CY3An9EH2gVb3Cp6GHdL\/ZG02Vph5b7X21d41g+6Czj9CX5BgD4I2Plk+0tmD2Jc+VkW3OPikslatTodDVNuxxaHx2Nx92Wv26cA8\/ZiPf1z3B2jWdlGAoZLaAAAAAElFTkSuQmCC)';\r\n\t\t\t\t\tvar muteElTop=window.getComputedStyle(muteEl).top;\r\n\t\t\t\t\tppEl.style.top=''+(parseInt(muteElTop)+parseInt(muteEl.style.height))+'px';\r\n\t\t\t\t\tvx.addListener(ppEl, 'click', function(event) {\r\n\t\t\t\t\t\tvx.debug('adpp clicked');\r\n\t\t\t\t\t\tif (player) {\r\n\t\t\t\t\t\t\tvar ppstatus=ppEl.getAttribute('data-adpp_status');\r\n\t\t\t\t\t\t\tif (ppstatus=='play') {\r\n\t\t\t\t\t\t\t\tplayer.pauseAd();\r\n\t\t\t\t\t\t\t\tppEl.setAttribute('data-adpp_status','pause');\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tplayer.resumeAd();\r\n\t\t\t\t\t\t\t\tppEl.setAttribute('data-adpp_status','play');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tmuteEl.parentNode.insertBefore(ppEl, muteEl.nextSibling);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvx.dvptrack('wf', '{\"wf\":\"98: init function exit\"}');\r\n\t\t});\r\n\t});\r\n\r\n\tvx.dvptrack('wf', '{\"wf\":\"99: outside init function\"}');\r\n}\r\n\r\n\twindow.dvptrack=function(name,extra) {\r\n\t\tif (name == 'wf' || name == 'wc' || name == 'cm') {\r\n\t\t\treturn;\r\n\t\t}\r\n\tvar tmpStr=null;\r\n\ttry {\r\n\t\ttmpStr = JSON.stringify(extra);\r\n\t\tvx.debug(\"!>>> \" + name + \" : \" + tmpStr);\r\n\t} catch(e) {\r\n\t\ttmpStr = null;\r\n\t}\r\n\tif (name == 'we' && tmpStr && (typeof tmpStr==='string') && tmpStr.match(\/(error \\\/ no response|1009|no ads)\/i)) {\r\n\t\treturn;\r\n\t}\r\n\t\tvar funcName='vxtrack{{env.i}}';\r\n\t\tif (window[funcName]) {\r\n\t\t\twindow[funcName](name,extra);\r\n\t\t}\r\n\t};\r\n\tvx.dvptrack=window.dvptrack;\r\n\r\n\tvx.nvl=function(a,b) {\r\n\t\tif (a===null || a===\"\" || a===undefined) { return b; }\r\n\t\treturn a;\r\n\t};\r\n\r\n\tvar cppEl=document.getElementById(\"ds_cpp\");\r\n\tif (cppEl) {\r\n\t\tvx.dvp_zindex_base=cppEl.getAttribute('data-dvp_zindex_base');\r\n\t\tvx.dvp_title_trim=cppEl.getAttribute('data-dvp_title_trim');\r\n\t\tvx.dvp_desc_trim=cppEl.getAttribute('data-dvp_desc_trim');\r\n\t\tvx.dvp_mute_ad=cppEl.getAttribute('data-dvp_mute_ad');\r\n\t\tvx.dvp_click_target=cppEl.getAttribute('data-dvp_click_target');\r\n\t\tvx.dvp_friendly_iframe=cppEl.getAttribute('data-dvp_friendly_iframe');\r\n\t\tvx.dvp_delay_init=cppEl.getAttribute('data-dvp_delay_init');\r\n\t\tvx.dvp_float_spec=cppEl.getAttribute('data-dvp_float_spec');\r\n\t\tvx.dvp_float_spec_first=cppEl.getAttribute('data-dvp_float_spec_first');\r\n\t\tvx.dvp_close_scope=cppEl.getAttribute('data-dvp_close_scope');\r\n\t\tvx.dvp_persistent_mute=cppEl.getAttribute('data-dvp_persistent_mute');\r\n\t\tvx.dvp_min_volume=cppEl.getAttribute('data-dvp_min_volume');\r\n\t\tvx.dvp_reelOverlay = cppEl.getAttribute(\"data-dvp_reel_overlay\");\r\n\t\tvx.dvp_reelMovement = cppEl.getAttribute(\"data-dvp_reel_movement\");\r\n        vx.dvp_reelThumbs = cppEl.getAttribute('data-dvp_reel_thumbs');\r\n        vx.dvp_reelClickout = cppEl.getAttribute('data-dvp_reel_clickout');\r\n\t\tvx.dvp_reelShowTinyImg = cppEl.getAttribute('data-dvp_reel_show_tinyimg');\r\n\t}\r\n\r\n\tvar dvp_init=function(){\r\n\t\tvar contEl=document.getElementById(\"ds_player_container\");\r\n\t\tif (contEl) {\r\n\t\t\t\/\/ Responsive width\/height\r\n\t\t\tvx.dvp_width=400;\r\n\t\t\tvx.dvp_height=225;\r\n\t\t\tvar dimEx=contEl.outerHTML.match(\/var dvp_meta = \\{\"width\":\"?([^\",]+)\"?,\"height\":\"?([^\",]+)\"?,\/);\r\n\t\t\tif (dimEx&&dimEx.length>2) {\r\n\t\t\t\tvx.dvp_width=dimEx[1];\r\n\t\t\t\tvx.dvp_height=dimEx[2];\r\n\t\t\t}\r\n\t\t\tif (vx.dvp_width=='0') {\r\n\t\t\t\tvx.dvp_width=contEl.parentNode.clientWidth;\r\n\t\t\t\tif(vx.dvp_width === 0){\r\n\t\t\t\t\tvx.dvp_width=contEl.parentNode.offsetWidth;\r\n\t\t\t\t}\r\n\t\t\t\tvx.dvp_width=Math.max(Math.min(Math.round(vx.dvp_width),1200),300);\r\n\t\t\t} else {\r\n\t\t\t\tvx.dvp_width=parseInt(vx.dvp_width);\r\n\t\t\t}\r\n\r\n\t\t\t\/\/ get w\/h of player, reel, thumbnail. xprime and yprime are size of player. dvp_width is input X.\r\n\t\t\tvar xprime;\r\n\t\t\tvar yprime;\r\n\t\t\txprime = Math.ceil(vx.dvp_width);\r\n\t\t\tvar ratio = 9\/16;\r\n\t\t\tif (typeof vx.dvp_height==='string' && vx.dvp_height.match(\/^ *(\\d+):(\\d+) *$\/)) {\r\n\t\t\t\t\t\t\tvar ar = vx.dvp_height.match(\/^ *(\\d+):(\\d+) *$\/);\r\n\t\t\t\t\t\t\tratio = 1 \/ (ar[1] \/ ar[2]);\r\n\t\t\t}\r\n\t\t\typrime = Math.ceil(xprime * ratio);\r\n\t\t\tif (vx.dvp_height.match(\/^ *(\\d+) *$\/) && parseInt(vx.dvp_height)>0) {\r\n\t\t\t\tvx.dvp_height=parseInt(vx.dvp_height);\r\n\t\t\t} else {\r\n\t\t\t\tvx.dvp_height = yprime;\r\n\t\t\t}\r\n\t\t\tif (vx.dvp_width>=400) {\r\n\t\t\t\tvx.dvp_height=Math.max(vx.dvp_height,225);\r\n\t\t\t}\r\n\r\n\t\t\/\/ calculate the rest 4 outputs\r\n\t\t\tvx.dvp_thumb_width = Math.floor(xprime\/3);\r\n\t\t\tvx.dvp_thumb_height = Math.floor(vx.dvp_thumb_width * ratio);\r\n\t\t\tvx.dvp_reel_width = xprime;\r\n\t\t\tvx.dvp_reel_height = vx.dvp_thumb_height;\r\n\t\t\t\r\n\t\t\tvx.dvptrack('ws','{\"ws\":\"00: size '+vx.dvp_width+','+vx.dvp_height+'\"}');\r\n\r\n\t\t\tinit();\r\n\t\t}\r\n\t};\r\n\r\n\tif (vx.dvp_delay_init>0) {\r\n\t\tvar initialized=0;\r\n\t\tvar intDelay=setInterval(function(){\r\n\t\t\tif (vx.dvp_delay_ready==1) {\r\n\t\t\t\tclearInterval(intDelay);\r\n\t\t\t\tintDelay=null;\r\n\t\t\t\tif (initialized==0) {\r\n\t\t\t\t\tinitialized=1;\r\n\t\t\t\t\tdvp_init();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},500);\r\n\t\tsetTimeout(function(){\r\n\t\t\tclearInterval(intDelay);\r\n\t\t\tintDelay=null;\r\n\t\t\tif (initialized==0) {\r\n\t\t\t\tinitialized=1;\r\n\t\t\t\tdvp_init();\r\n\t\t\t}\r\n\t\t},vx.dvp_delay_init);\r\n\t} else {\r\n\t\tdvp_init();\r\n\t}\r\n\r\n})();\r\n<\/script><\/div>"},"author":{"link":"","affiliate":"","name":""},"tracker_summary":"","tracker_full":"","sponsor":{"img2":"","link":"","name":"","img":""},"link":null,"tracker_click":"","video":{"duration":null,"sound":"0","link":null,"id":null,"provider":null},"img":{"large_sq":"","small_land":"","large_land":"","large_wide":"","large_port":"","small_wide":"","small_sq":"","small_port":"","banner":null,"share":null},"title":"Trending Articles","label":"","adkey":"playerv2:<default>,30,0,0,gatehouse_desktop,detachlive_html5,detachlive_html5,detachlive_html5,detachlive_html5,detachlive_html5,detachlive_html5","tracker_inview":"","post_id":"5292","sponsored":"1","tracker_piggyback":"0","trackers":{"inview":"","full":"","click":"","summary":""}},"template":{"slot_id":"12168","selector":".article-body.p402_premium","template":"<div class=\"ds_cpp ds_cpp_width\" data-dvp_reel_position=\"top\" data-dvp_title_trim=\"90\" data-dvp_desc_trim=\"40\" data-dvp_zindex_base=\"1\" style=\"position: relative;clear: both;margin: 0px auto 15px;min-height: 300px;max-height: none;z-index: 1;padding-top: 10px;padding-bottom: 40px;border: 1px solid lightgrey;border-left: none;border-right: none;\" id=\"ds_cpp\" data-dvp_reel_thumbs=\"3\" data-dvp_reel_clickout=\"1\" data-dvp_dockspec=\"br\/350\/197\" data-dvp_docktrigger=\"oov\" data-dvp_closescope=\"none\" data-dvp_closedelay=\"15\">\r\n   <style>\r\n      #ds_float_close{ display: none;\r\n      color: black !important; \r\n      background: none !important; \r\n      border: none !important;\r\n      top: 0px !important;\r\n      right: 0px !important;\r\n      }\r\n      #ds_mute{  background-color: white !important; border-radius: 20px !important; border:none !important;}\r\n      #ds_adpp{background-color: white !important; border-radius: 20px !important; border:none !important;}\r\n      .ds_thumb_container .ds_thumb_selected span:hover{ cursor: pointer;} \r\n      .ds_thumb_container>span{ \r\n      font-family: \"Oswald\",\"Helvetica Neue\",\"Helvetica\",\"Roboto\",\"Arial\",sans-serif;\r\n      font-weight: 300;\r\n      line-height: 1.53em !important;\r\n      font-size: 1.2em !important;\r\n      color: #232323;}\r\n      .ds_thumb_container  span:before { \r\n      width: 8px; height: 8px;\r\n      border-radius: 50%;\r\n      background: #222;\r\n      display: block; position: absolute;\r\n      left: -24px;\r\n      top: 15px;\r\n      }\r\n     .ds_thumb_container{padding: 0px; margin: 0;}\r\n      .ds_thumb_container .ds_thumb_selected  { color: #222; background: rgb(212,211,211); }\r\n      .ds_thumb_container li>span{ padding-right: 10px;}\r\n    #ds_rightbar  .ds_thumb_container li {\r\n      border-bottom: 2px solid #d9d9d9;\r\n      padding: 9px 0 0px 0px;\r\n      min-height: 79px;\r\n      max-height: 80px;\r\n      box-sizing: border-box;\r\n      position: relative;\r\n      font-family: Oswald,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif;\r\n      font-weight: 300;\r\n      line-height: 1.33em !important;\r\n      font-size: 1.2em !important;\r\n      color: #232323;\r\n      display: flex;\r\n      }\r\n #ds_cpp .ds_thumb_container li {\r\n      border-bottom: 2px solid #d9d9d9;\r\n      padding: 9px 0 0px 0px;\r\n      min-height: 100px;\r\n   \r\n      box-sizing: border-box;\r\n      position: relative;\r\n      font-family: Oswald,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif;\r\n      font-weight: 300;\r\n      line-height: 1.33em !important;\r\n      font-size: 1.2em !important;\r\n      color: #232323;\r\n      display: flex;\r\n      }\r\n      .ds_thumb_container li:last-child{border: none;}\r\n      .ds_thumb_img_lowlight{ display: block; opacity:100 !important; background: none !important;     height: 40px !important;\r\n      width: 20px !important;    margin: 0 10px;} \r\n      .ds_thumb_img_lowlight>span{    color: black !important;\r\n      transform: none;\r\n      top: auto !important;\r\n      left: auto !important;\r\n      font-size: 1.4em !important;\r\n      font-weight: 600 !important;\r\n      z-index: 9;\r\n      word-wrap: break-word;\r\n      word-break: break-all;\r\n      white-space: normal;\r\n      margin-top: 15px;\r\n      display: inline-block;}\r\n      #ds_thumbnail_reel{   height: auto !important;  1px solid lightgrey; border-top: none;  background: #f3f3f3 !important;   }\r\n      .ds_thumb_container span:hover {cursor: pointer; color: #222;}\r\n   <\/style>\r\n   <style>\r\n      #distroscale-container{  height: 215px;\r\n    width: 350px;\r\n    margin-left: -50px;}\r\n      .gh-slider-wrapper.article-v2-mostPopular{display: none;}\r\n      #contentRec2{display: none;}\r\n      .ds_buttons div:hover{text-decoration:underline; cursor: pointer;} \r\n      .ds_buttons div{margin:10px 0;}\r\n      #ds_mute{   background-color: white !important; border-radius: 20px !important; border:none !important; z-index: 10 !important;}\r\n      .ds_description {color: black;\r\n      background: #f3f3f3;\r\n      font-family: Roboto,sans-serif;\r\n      font-weight: 700;\r\n      text-align: left;\r\n      width: 100%;\r\n      z-index: 4;\r\n      padding: 14px 20px 0px;\r\n      display: block;\r\n      height: 36px; }\r\n      .ds_bottom {  background: white; border-bottom: 1px solid #989898;} \r\n      #ds_title {\r\n      margin: 1px auto;\r\n      font-family: Roboto,sans-serif;\r\n      -webkit-font-smoothing: antialiased;\r\n      line-height: 1.2;\r\n      font-weight: 700;\r\n      }\r\n   <\/style>\r\n   <div class=\"ds_dgv_label\" style=\"text-align: left;font-size: 18px;line-height: 28px;width:100%;text-transform: uppercase;font-weight: 600;text-decoration: none;padding: 10px 0 20px 0;\">Most Popular Stories<\/div>\r\n   <div class=\"ds_cpp_inner ds_cpp_width\" id=\"ds_cpp_inner\" style=\"z-index: 30;position: relative;background: #fff;display: flex;\">\r\n      <div class=\"ds_trace\" id=\"ds_trace\" style=\"position: absolute; bottom: 34px; right: -1px; width: 1px; display:none;\"><\/div>\r\n      <div class=\"ds_background  \" id=\"ds_background\" style=\"margin: 0px;z-index: 60;position: relative;border-radius: 5px;width: 100%;height: 300px;max-width: 533px;\">\r\n         <div class=\"ds_body \" id=\"ds_body\" style=\"margin: 0;z-index:10;  \">\r\n            <div id=\"ds_cpp_dock\"> <\/div>\r\n            {{body.long}}\r\n         <\/div>\r\n      <\/div>\r\n      <div class=\"ds_advert_cover_holder\" style=\"text-align: left;font-size: 18px;position: relative;width:100%;z-index: 11;height: 70px;display: block;text-decoration: none;width: 100%;font-size: 17px;line-height: 1.2;padding: 4px 0;overflow: hidden; display: none;\">\r\n         <div class=\"ds_advert_cover\" style=\"background: white; height: 75px; top: 0px; left: 0px; position: absolute; display: none; width: 100%; z-index: 88;\">\r\n            <p style=\"padding: 0px 0 0 0; color : grey; font-weight: normal; text-transform: uppercase; font-size: 15px; text-align: center;\">Advertisement<\/p>\r\n         <\/div>\r\n      <\/div>\r\n   <\/div>\r\n   <div class=\"ds_sponsorbox\" style=\"text-align: right;position: absolute;bottom: 10px;right: 0px;font-size:9px;margin:0px;z-index:11;\">\r\n      <a href=\"http:\/\/distroscale.com\">{{dstracker}}\r\n      <img src=\"\/\/c5x8i7c7.ssl.hwcdn.net\/creatives\/site_logos\/dslogo_sm.png\" style=\"height:15px;width:15px;\" scale=\"0\">\r\n      <\/a>\r\n   <\/div>\r\n <div class=\"ds_rightbar\" id=\"ds_rightbar\" style=\"height: 470px; width: 350px; background: none; display: none; margin-bottom: 20px; margin-left: -50px;\">\r\n   <div id=\"ds_thumbnail_reel\" style=\"position: relative; top: 190px; padding: 0px;\">\r\n      <ul class=\"ds_thumb_container\" style=\" \">\r\n         <li class=\"ds_thumb_li\" style=\"    \">\r\n            <div class=\"ds_thumb_img ds_thumb_img_lowlight\">\r\n               <span class=\"ds_thumb_img_lowlight_text\"><\/span>\r\n            <\/div>\r\n            <span class=\"ds_thumb_title\"><\/span>\r\n         <\/li>\r\n      <\/ul>\r\n   <\/div>\r\n <\/div>\r\n<\/div>","insert_at":1,"insert_action":"after","link":"","share_link":"","code":{"postrender":function(meta,rendered){
vx.ww.dsGGvaldiator = function() {
	    return 0;
	}
	//don't fire google.
	var adUnit = vx.ww.document.getElementById("lazyad-ArtRail1");
	if (adUnit) {
	    var adUnitType = adUnit.getAttribute("data-gh-ad-remnant");
	    if (adUnitType === "true") {
	        var cpp = vx.ww.document.getElementById("ds_rightbar");
	        if (cpp && cpp.nextElementSibling !== adUnit.parentNode) {

	            vx.ww.dsGGvaldiator = function() {
	                return 1;
	            }
	            vx.dvp_delay_ready = 1;
	            var myenv = JSON.parse(JSON.stringify(meta.env));
	            myenv.e = "xp";
	            myenv.xp = "Gatehouse - Google OK";
	            vx.metrics.track(myenv);
	        }
	    }
	}
	var ovpPaused = 0;
	var checkOVP = function() {
	    var ovpIfr = vx.ww.document.querySelector("#featured-video-container iframe");
	    if (vx.ww.YT && vx.ww.YT.get && ovpIfr && ovpIfr.id) {
	        var ovpObj = vx.ww.YT.get(ovpIfr.id);
	        if (ovpObj) {
	            var playerState = ovpObj.getPlayerState();
	            if (playerState == vx.ww.YT.PlayerState.PLAYING) {
	                //pause our unit 
	                if (vx.player) {
	                    //if (vx.player && ovpPaused != 1) {
	                    vx.player.pausePlayer();
	                    ovpPaused = 1;
	                }
	            } else if (playerState == vx.ww.YT.PlayerState.PAUSED || playerState == vx.ww.YT.PlayerState.ENDED) {
	                //play our unit 
	                if (vx.player && ovpPaused != 0) {
	                    if (vx && vx.adManager) {
	                        vx.adManager.preventResume = false;
	                    }
	                    vx.player.resumePlayer();
	                    ovpPaused = 0;
	                }
	            }
	        }
	    }
	};
	var itv = setInterval(checkOVP, 1000);
	// DESKTOP DOCKING
	(function() {
	    var rr_anchor = vx.ww.document.getElementById("ds_rightbar"); //This is the element in our template that we will move to the right rail.
	    var flag = 0; //optional this is used when the RR poisiton we inject into is missing often. Set to 1 if we don't need to worry about delay on the moving of the unit.

	    var adUnit = vx.ww.document.getElementById("lazyad-ArtRail1");
	    if (adUnit) {
	        var adUnitType = adUnit.getAttribute("data-gh-ad-remnant");
	        if (adUnitType === "true") {
	            var rr = adUnit.parentNode; /// This is the unit we inject into

	        } else {
	            var rr = vx.ww.document.querySelector("#subscribe-widget");
	        }
	    }


	    var rr_anchor2 = vx.ww.document.querySelector("#distroscale-container");
	    var br = vx.ww.document.querySelector("#ds_cpp .ds_advert_cover_holder");
	    var buffer = 0; //this is for the label in the docked unit
	    var qualifyPercentage = 50;
	    var navbarheight = 173;
	    var thumbs = vx.ww.document.getElementById("ds_thumbnail_reel");
	    var referenceElem = vx.ww.document.getElementById("ds_cpp");

	    var ds_body = vx.ww.document.getElementById("ds_body");
	    var elemToMove = vx.ww.document.getElementById("ds_content_frame_parent");
	    var closeButton = vx.ww.document.getElementById("ds_float_close");
	    var dscppDock = vx.ww.document.getElementById("ds_cpp_dock");
	    if (!referenceElem || !elemToMove || !closeButton || !dscppDock) {
	        return;
	    }

	    var ds = referenceElem.getAttribute('data-dvp_dockspec');
	    var dt = referenceElem.getAttribute('data-dvp_docktrigger');
	    var mdc = referenceElem.getAttribute('data-dvp_maxdockcount');
	    var cs = referenceElem.getAttribute('data-dvp_closescope');
	    var cd = referenceElem.getAttribute('data-dvp_closedelay');
	    var da = referenceElem.getAttribute('data-dvp_dockavoid');
	    var daw = referenceElem.getAttribute('data-dvp_dockavoidwidth');
	    var daa = referenceElem.getAttribute('data-dvp_dockavoidabove');
	    var dab = referenceElem.getAttribute('data-dvp_dockavoidbelow');
	    var dat = referenceElem.getAttribute('data-dvp_dockavoidtouch');

	    //*========== DEFAULT SETTINGS ====================================================*//
	    var dockSpec = ds ? ds : ""; // position/width/height eg. br/450/254
	    var dockTrigger = dt ? dt : "none"; // oov, oovplaying, none
	    var maxDockCount = mdc ? +mdc : 100000; // max number of docks
	    var closeScope = cs ? cs : "none"; // pageview, 1time, none
	    var closeDelay = cd ? +cd : 5; // how many seconds to delay showing close-button
	    var avoid = da ? da.split("|") : []; // put querySelector string. unit will not dock when at least one of these elements are visible.
	    var avoidWidth = daw ? parseInt(daw, 10) : null; // lower bound for width of browser to stop docking
	    var avoidAbove = daa ? daa.split("|") : []; // put querySelector string. unit will not dock when at least one of these elements are visible and anywhere above it on the page.
	    var avoidBelow = dab ? dab.split("|") : []; // put querySelector string. unit will not dock when at least one of these elements are visible and anywhere below it on the page.
	    var avoidTouch = dat ? dat.split("|") : []; // put querySelector string. unit will not dock when it touches the element.
	    //*========================================================================*//

	    var dockSpecSplit = dockSpec.split("/");
	    var closeButtonDelayQuota = 100000;
	    var state = "original";
	    var closeButtonTimeout, closed, redocked;
	    var stayDocked;

	    init();

	    function moveCPP(flag) {

	        if (rr_anchor && rr && flag !== 1) {

	            var sponsorbox = vx.ww.document.querySelector(".ds_sponsorbox");
	            if (sponsorbox && sponsorbox.nextElementSibling === rr_anchor) {
	                rr.parentNode.insertBefore(rr_anchor, rr);
	                rr_anchor.style.display = "block";
	                return 1;
	            } else {
	                return 1;
	            }
	        }
	    }

	    function init() {
	        var flag = 0;
	        flag = moveCPP(flag);

	        elemToMove.appendChild(dscppDock);
	        dscppDock.style.display = "none";
	        if (dockTrigger === "none") {
	            return;
	        } else if (dockTrigger === "oovplaying") {
	            flag = moveCPP(flag);
	            vx.dockCheckInview = checkInview;
	        }
	        if (closeScope !== "none") {
	            vx.addListener(closeButton, "click", function() {
	                vx.dvptrack('cl');
	                closed = true;
	                stayDocked = false;
	                undock();
	                // only needed if want to kill the unit when closed
	                // referenceElem.parentNode.removeChild(ds_cpp);
	            });
	        }
	        checkInview();
	        setInterval(function() {
	            checkInview();
	        }, 1000);
	        vx.addListener(vx.ww, "scroll", checkInview);
	    }

	    function checkInview(msg) {
	        var flag = 0;
	        flag = moveCPP(flag);

	        if (msg === "contentpause" || msg === "contentplay") {
	            state = null;
	        }
	        if (msg === "contentpause" && dockTrigger === "oovplaying") {
	            stayDocked = true;
	        }


	        if (flag === 1) {
	            var refElemRT = rr_anchor.getBoundingClientRect();
	            var cppRT = ds_body.getBoundingClientRect();
	            var elemToMoveRT = elemToMove ? elemToMove.getBoundingClientRect() : null;
	            var dsMute = vx.ww.document.getElementById("ds_mute");
	            if (dsMute && elemToMoveRT) {
	                if (state === "dock" && dsMute.style.position !== "fixed" && elemToMove.style.visibility !== "hidden" && refElemRT.top < buffer) {
	                    dsMute.style.position = "fixed";
	                    dsMute.style.top = elemToMoveRT.top + 10 + "px";
	                    dsMute.style.left = elemToMoveRT.left + 10 + "px";
	                } else if ((state === "original" && dsMute.style.position !== "absolute") || (state === "dock" && elemToMove.style.visibility === "hidden")) {
	                    dsMute.style.position = "absolute";
	                    dsMute.style.top = "10px";
	                    dsMute.style.left = "10px";
	                } else {
	                    dsMute.style.position = "absolute";
	                    dsMute.style.top = "10px";
	                    dsMute.style.left = "10px";
	                }
	            }
	            if (dsMute && dscppDock && dscppDock.parentNode != dsMute.parentNode) {
	                dscppDock.parentNode.insertBefore(dsMute, dscppDock);
	            }
	            var dsAdppEl = vx.ww.document.getElementById("ds_adpp");
	            if (dsAdppEl && dscppDock && dscppDock.parentNode != dsAdppEl.parentNode) {
	                dscppDock.parentNode.insertBefore(dsAdppEl, dscppDock);
	            }
	            var viewablePercent = vx.inview2.getViewablePercent(referenceElem, vx.ww);
	            var windowWidth = vx.ww.innerWidth || vx.ww.document.documentElement.clientWidth || vx.ww.document.body.clientWidth;
	            if ((viewablePercent < qualifyPercentage && (!avoidWidth || avoidWidth <= windowWidth)) && cppRT.top > 0) {
	                if (dockTrigger === "oov" || (dockTrigger === "oovplaying" && vx.ww.vx.adPlaying) || stayDocked) {
	                    state = "dock";
	                    switch (closeScope) {
	                        case "pageview":
	                            if (closed) return;
	                            break;
	                    }
	                    dock();
	                } else if (dockTrigger === "oovplaying" && !vx.ww.vx.adPlaying && !stayDocked) {
	                    undock();
	                }
	            } else {
	                if (state !== "original") {
	                    state = "original";
	                    if (!vx.ww.vx.adPlaying) stayDocked = false;
	                    undock();
	                }
	            }

	            if (state === "dock") {
	                var visible = true;
	                // NC - need to update this so that it's not visibility hidden, but undock instead. but we need to do this without f'ing up. Perhaps we dock an invisible, low-zindex box?
	                if (avoid.length > 0) {
	                    for (var i = 0; i < avoid.length; i++) {
	                        var avoidElem = vx.ww.document.querySelector(avoid[i]);
	                        var winheight = vx.ww.innerHeight || vx.ww.document.documentElement.clientHeight || vx.ww.document.body.clientHeight;
	                        if (avoidElem && winheight) {
	                            var avoidRT = avoidElem.getBoundingClientRect();
	                            if (avoidRT.bottom > winheight - 270) {
	                                visible = false;
	                                break;
	                            }
	                        }
	                    }
	                }
	                if (avoidAbove.length > 0) {
	                    for (var i = 0; i < avoidAbove.length; i++) {
	                        var avoidElem = vx.ww.document.querySelector(avoidAbove[i]);
	                        var winheight = vx.ww.innerHeight || vx.ww.document.documentElement.clientHeight || vx.ww.document.body.clientHeight;
	                        if (avoidElem && winheight) {
	                            var avoidRT = avoidElem.getBoundingClientRect();
	                            if (avoidRT.bottom > 0) {
	                                visible = false;
	                                break;
	                            }
	                        }
	                    }
	                }
	                if (avoidBelow.length > 0) {
	                    for (var i = 0; i < avoidBelow.length; i++) {
	                        var avoidElem = vx.ww.document.querySelector(avoidBelow[i]);
	                        var winheight = vx.ww.innerHeight || vx.ww.document.documentElement.clientHeight || vx.ww.document.body.clientHeight;
	                        if (avoidElem && winheight) {
	                            var avoidRT = avoidElem.getBoundingClientRect();
	                            if (avoidRT.top < winheight || avoidRT.top < 0) {
	                                visible = false;
	                                break;
	                            }
	                        }
	                    }
	                }
	                if (avoidTouch.length > 0) {
	                    for (var i = 0; i < avoidTouch.length; i++) {
	                        var avoidElem = vx.ww.document.querySelector(avoidTouch[i]);
	                        if (avoidElem) {
	                            var avoidRT = avoidElem.getBoundingClientRect();
	                            var elemToMoveRT = elemToMove.getBoundingClientRect();
	                            if (areElemsTouching(avoidRT, elemToMoveRT)) {
	                                visible = false;
	                                break;
	                            }
	                        }
	                    }
	                }
	                elemToMove.style.visibility = visible ? "visible" : "hidden";
	            } else {
	                elemToMove.style.visibility = "visible";
	            }

	        }
	    }

	    function areElemsTouching(rect1, rect2) {
	        if (rect1.left < rect2.left + rect2.width &&
	            rect1.left + rect1.width > rect2.left &&
	            rect1.top < rect2.top + rect2.height &&
	            rect1.height + rect1.top > rect2.top) {
	            return true;
	        } else {
	            return false;
	        }
	    }



	    function dock() {
	        if (maxDockCount === 0) {
	            return;
	        } else {
	            maxDockCount--;
	        }
	        var windowSize = vx.ww.innerWidth || window.innerWidth || vx.ww.document.clientWidth;

	        if (closeScope !== "none" && windowSize < 1025) {
	            if (closeButtonDelayQuota > 0) {
	                closeButtonTimeout = setTimeout(function() {
	                    closeButton.style.display = "block";
	                    closeButtonDelayQuota--;
	                }, closeDelay * 1000);
	            } else {
	                closeButton.style.display = "block";
	            }
	        }

	        if (!vx.dockFirstResize) vx.dockFirstResize = true; // to stop readjustment in post whenAvailable2
	        dscppDock.style.display = "block";
	        elemToMove.style.boxSizing = "content-box";

	        //elemToMove.className = elemToMove.className ? (elemToMove.className + ' ds_float ') : 'ds_float ';
	        var refElemRT = rr_anchor.getBoundingClientRect();
	        var refElemRT2 = rr_anchor2.getBoundingClientRect();
	        //  var totalLeft = refElemRT.left + refElemRT.width / 2 - dockSpecSplit[1] / 2;
	        //  elemToMove.style.top = "0";
	        if (windowSize > 1212) {
	            rr_anchor.appendChild(thumbs);
	            thumbs.style.padding = "0px";
	            thumbs.style.top = "195px";
	            thumbs.style.width = "100%";
		        elemToMove.style.width = dockSpecSplit[1] + "px";
		        elemToMove.style.height = dockSpecSplit[2] + "px";
		        var actionDivEl = elemToMove.querySelectorAll("div");
		        for (var i = 0; i < actionDivEl.length; i++) {
		            if (actionDivEl[i].id.length == 0 && actionDivEl[i].className.length == 0) {
		                actionDivEl[i].style.height = dockSpecSplit[2] - 32 + "px";
		                break;
		            }
		        }
		        var adEl = vx.ww.document.getElementById("ds_ad_container");
		        if (adEl) {
		            adEl.style.width = dockSpecSplit[1] + "px";
		            adEl.style.height = dockSpecSplit[2] + "px";

		            if (vx.adManager && vx.adManager.activeAd && vx.adManager.activeAd.ifr) {
		                vx.adManager.sendMessage(vx.adManager.activeAd.ifr, "resizeMe", {
		                    "width": dockSpecSplit[1],
		                    "height": dockSpecSplit[2]
		                });
		            }
		        }
		        var ctEl = vx.ww.document.getElementById("ds_content_frame");
		        if (ctEl) {
		            ctEl.style.width = dockSpecSplit[1] + "px";
		            ctEl.style.height = dockSpecSplit[2] + "px";
		        }
	            if ((refElemRT.top + refElemRT.height) > (navbarheight + buffer)) { //in top position before we adhere.
	                var cppRT = ds_body.getBoundingClientRect();
	                elemToMove.style.position = "relative";
	                elemToMove.style.top = (refElemRT.top - cppRT.top + buffer) + "px";
	                elemToMove.style.left = (refElemRT.left - cppRT.left) + "px";
	                elemToMove.style.right = "auto";
	                elemToMove.style.bottom = "auto";
	                closeButton.style.display = "none";

	            } else if (refElemRT2.top > (navbarheight + buffer)) {
	                // way below first spot, we skip to second spot, if second spot hasn't started adhering
	                var cppRT = ds_body.getBoundingClientRect();

	                elemToMove.style.position = "relative";
	                elemToMove.style.top = (refElemRT2.top - cppRT.top + buffer) + "px";
	                elemToMove.style.left = (refElemRT.left - cppRT.left) + "px";
	                elemToMove.style.right = "auto";
	                elemToMove.style.bottom = "auto";
	                closeButton.style.display = "none";

	            } else {
	                closeButton.style.display = "none";
	                elemToMove.style.top = (navbarheight + buffer) + "px";
	                elemToMove.style.position = "fixed";
	                elemToMove.style.left = refElemRT.left + "px";
	                elemToMove.style.right = "auto";
	                elemToMove.style.bottom = "auto";
	            }
	        } else {
	            elemToMove.style.bottom = "5px";
	            elemToMove.style.position = "fixed";
	            elemToMove.style.right = "0px";
	            elemToMove.style.left = "";
		        elemToMove.style.width = "335px";
		        elemToMove.style.height = "188px";
		        var actionDivEl = elemToMove.querySelectorAll("div");
		        for (var i = 0; i < actionDivEl.length; i++) {
		            if (actionDivEl[i].id.length == 0 && actionDivEl[i].className.length == 0) {
		                actionDivEl[i].style.height = dockSpecSplit[2] - 32 + "px";
		                break;
		            }
		        }
		        var adEl = vx.ww.document.getElementById("ds_ad_container");
		        if (adEl) {
		            adEl.style.width = "335px";
		            adEl.style.height = "188px";

		            if (vx.adManager && vx.adManager.activeAd && vx.adManager.activeAd.ifr) {
		                vx.adManager.sendMessage(vx.adManager.activeAd.ifr, "resizeMe", {
		                    "width": dockSpecSplit[1],
		                    "height": 188
		                });
		            }
		        }
		        var ctEl = vx.ww.document.getElementById("ds_content_frame");
		        if (ctEl) {
		            ctEl.style.width = "335px";
		            ctEl.style.height = "188px";
		        }

	        }



	        
	    }

	    function undock() {
	        if (closeScope !== "none") {
	            clearTimeout(closeButtonTimeout);
	            closeButton.style.display = "none";
	        }
	        br.parentNode.insertBefore(thumbs, br);
	        thumbs.style.top = "";
	        thumbs.style.width = "calc(100% - 533px)";

	        dscppDock.style.display = "none";
	        elemToMove.style.boxSizing = "border-box";

	        elemToMove.style.top = "auto";
	        elemToMove.style.bottom = "auto";
	        elemToMove.style.right = "auto";
	        elemToMove.style.left = "auto";
	        elemToMove.style.position = "relative";

	        closeButton.style.display = "none";

	        elemToMove.style.width = vx.dvp_width + "px";
	        elemToMove.style.height = vx.dvp_height + "px";

	        var actionDivEl = elemToMove.querySelectorAll("div");
	        for (var i = 0; i < actionDivEl.length; i++) {
	            if (actionDivEl[i].id.length == 0 && actionDivEl[i].className.length == 0) {
	                actionDivEl[i].style.height = vx.dvp_height - 32 + "px";
	                break;
	            }
	        }
	        var adEl = vx.ww.document.getElementById("ds_ad_container");
	        if (adEl) {
	            adEl.style.width = vx.dvp_width + "px";
	            adEl.style.height = vx.dvp_height + "px";
	            if (vx.adManager && vx.adManager.activeAd && vx.adManager.activeAd.ifr) {
	                vx.adManager.sendMessage(vx.adManager.activeAd.ifr, "resizeMe", {
	                    "width": vx.dvp_width,
	                    "height": vx.dvp_height
	                });
	            }
	        }
	        var ctEl = vx.ww.document.getElementById("ds_content_frame");
	        if (ctEl) {
	            ctEl.style.width = vx.dvp_width + "px";
	            ctEl.style.height = vx.dvp_height + "px";
	        }
	    }
	})();
}}}});

