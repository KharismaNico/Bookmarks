$Crabapple.TriforceModule_ent_m006_V2_1_0=function(){};$Crabapple.extend($Crabapple.TriforceModule,$Crabapple.TriforceModule_ent_m006_V2_1_0,{viewName:'$Crabapple.TriforceView_ent_m006',disableAutoFooterPadding:false,newsletterPosition:2,newsletterEnabled:false,newsletterLabel:'newsletterLabel',newsletterCustomButtonFunc:null,emailRegExp:/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/,processingFormSubmitStateClass:'s_states_processingFormSubmit',subscriptionURL:null,subscriptionSuccessMessage:'Thank you for subscribing!',subscriptionFailMessage:'Sorry, please try again later.',notValidEmailMessage:'Please enter a valid email address.',successReportingMessage:'',initializeView:function(){var feed=this.feedResponse.result;this.prepareModule(feed);this.view.generateCoreElement();this.view.render(feed,{copyright:this.getCopyright(feed),newsletterPosition:this.newsletterPosition,newsletterEnabled:this.newsletterEnabled,newsletterLabel:this.newsletterLabel,newsletterCustomButtonFunc:this.newsletterCustomButtonFunc});this.moduleElement=this.view.setOutput();this.updateHolderPadding();},enhanceModule:function(){this.prepareModule(this.feedResponse.result);this.view.enhance(this.moduleElement);this.addEvents();},prepareModule:function(feed){if(this.newsletterEnabled){if(feed.mailChimpSubscriptionURL){this.subscriptionURL=feed.mailChimpSubscriptionURL;}else{this.newsletterEnabled=false;}}},getCopyright:function(feed){var defaultCopy='&copy; {CURRENT_YEAR} Viacom, inc.  WARNING: You have no promo copy set for the copyright information!',copyright;copyright=(feed.promo&&feed.promo.copy)?feed.promo.copy:defaultCopy;return copyright.replace('{CURRENT_YEAR}',new Date().getFullYear());},addEvents:function(){var self=this;if(!this.disableAutoFooterPadding){var timeoutId;$(window).on('resize',function(){clearTimeout(timeoutId);timeoutId=setTimeout(function(){self.updateHolderPadding();},500);});this.updateHolderPadding();}
if(this.newsletterEnabled){var $subscribeInput=this.view.coreElement.find('.s_subscribe_input'),self=this;if(!$subscribeInput[0].placeholder){$subscribeInput.val(this.view.placeholderText);$subscribeInput.on('focus',function(){if($subscribeInput[0].value==self.view.placeholderText){$subscribeInput[0].value='';}});$subscribeInput.on('blur',function(){if($subscribeInput[0].value==''){$subscribeInput[0].value=self.view.placeholderText;}});}
this.view.coreElement.find('.s_layouts_subscribe_form').on('submit',function(event){event.preventDefault();var email=this.elements.email.value,$this=$(this);if($this.hasClass(self.processingFormSubmitStateClass)){return;}
if(self.validateEmail(email)){$this.addClass(self.processingFormSubmitStateClass);$.getJSON(self.subscriptionURL+'?email='+email,function(response){var feed=response.result;$this.removeClass(self.processingFormSubmitStateClass);if(feed&&feed.submissionStatus==='success'){self.sendReportingCall();alert(self.subscriptionSuccessMessage);$this.find('[name=email]').val('');}else{alert((feed&&feed.mailChimpError)||self.subscriptionFailMessage);}});}else{alert(self.notValidEmailMessage);}});}},validateEmail:function(email){return this.emailRegExp instanceof RegExp?this.emailRegExp.test(email):true;},updateHolderPadding:function(){if(this.disableAutoFooterPadding)return;$('#background_holder').css({paddingBottom:this.moduleElement.outerHeight()});},sendReportingCall:function(){}});$Crabapple.TriforceView_ent_m006=function(){};$Crabapple.extend($Crabapple.TriforceView,$Crabapple.TriforceView_ent_m006,{coreElement:null,placeholderText:'Email Address',generateCoreElement:function(trackingClass){if(!trackingClass&&this.options&&this.options.trackingClass){trackingClass=this.options.trackingClass;}
this.moduleWrapper=this.getModuleWrapper(this.moduleElement,trackingClass).addClass('s_layouts_footer');this.coreElement=this.appendDom(this.moduleWrapper,'div',{'class':'s_container'});},enhance:function(coreElement){this.coreElement=coreElement.find('.s_container');},setOutput:function(){if(this.mode!=='append'){this.moduleElement=this.replaceModuleElement(this.moduleElement,this.moduleWrapper);}else{this.moduleElement.append(this.moduleWrapper);}
return this.moduleElement.show();},render:function(data,options){this.data=data;this.options=options;this.generateNavs();this.generateLogo();this.generateCopyright();},generateNavs:function(){if(this.data.navs){for(var i=0,len=this.data.navs.length;i<len;i++){if(this.options.newsletterEnabled&&this.options.newsletterPosition==i){this.generateNewsletter();}
this.generateNavList(this.data.navs[i],i);}}},generateNavList:function(data,index){var navList=this.appendDom(this.coreElement,'ul',{class:'list s_layouts_footerList s_layouts_footerList_'+index});this.appendNavItems(data.entries,navList);},appendNavItems:function(items,navList){for(var i=0,len=items.length;i<len;i++){this.appendNavItem(items[i],navList);}},appendNavItem:function(item,navList){var listItem=this.appendDom(navList,'li',{class:'list_item s_layouts_footerListItem'}),navItemLink=this.appendDom(listItem,'a',{href:item.url,title:item.title,class:'s_fonts_footerListLink notriforce '+item.title.toLowerCase().replace(/\W/g,'_'),target:'_blank'});if(item.image){this.appendImage(navItemLink,item.image,true).attr('alt',item.title);}else{navItemLink.text(item.title);}},generateNewsletter:function(){var form=this.appendDom(this.coreElement,'form',{'class':'s_layouts_subscribe_form','action':'#','novalidate':true}),subscribeInputId='subscribeInput_'+(this.data&&this.data.promo&&this.data.promo.shortId);this.appendDom(form,'label',{'class':'s_subscribe_title','for':subscribeInputId}).text(this.options.newsletterLabel);this.appendDom(form,'input',{'class':'s_subscribe_input s_base_input_email','id':subscribeInputId,'type':'email','name':'email','placeholder':this.placeholderText});if(this.options.newsletterCustomButtonFunc&&typeof this.options.newsletterCustomButtonFunc=='function'){form.append(this.options.newsletterCustomButtonFunc());}else{this.appendDom(form,'button',{'class':'s_layouts_newsletter_button s_buttons_button s_buttons_buttonAlt s_buttons_buttonSlashForward','type':'submit'}).text('Subscribe');}},generateLogo:function(){this.appendDom(this.coreElement,'div',{class:'logo s_layouts_footerLogoViacom'});},generateCopyright:function(){this.appendDom(this.coreElement,'p',{class:'s_fonts_footerCopyright copyright'}).html(this.options.copyright);}});$Crabapple.TriforceModule_ent_m006_V2_1_0=function(){};$Crabapple.extend($Crabapple.TriforceModule,$Crabapple.TriforceModule_ent_m006_V2_1_0,{viewName:'$Crabapple.TriforceView_ent_m006',disableAutoFooterPadding:false,newsletterPosition:2,newsletterEnabled:false,newsletterLabel:'newsletterLabel',newsletterCustomButtonFunc:null,emailRegExp:/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/,processingFormSubmitStateClass:'s_states_processingFormSubmit',subscriptionURL:null,subscriptionSuccessMessage:'Thank you for subscribing!',subscriptionFailMessage:'Sorry, please try again later.',notValidEmailMessage:'Please enter a valid email address.',successReportingMessage:'',initializeView:function(){var feed=this.feedResponse.result;this.prepareModule(feed);this.view.generateCoreElement();this.view.render(feed,{copyright:this.getCopyright(feed),newsletterPosition:this.newsletterPosition,newsletterEnabled:this.newsletterEnabled,newsletterLabel:this.newsletterLabel,newsletterCustomButtonFunc:this.newsletterCustomButtonFunc});this.moduleElement=this.view.setOutput();this.updateHolderPadding();},enhanceModule:function(){this.prepareModule(this.feedResponse.result);this.view.enhance(this.moduleElement);this.addEvents();},prepareModule:function(feed){if(this.newsletterEnabled){if(feed.mailChimpSubscriptionURL){this.subscriptionURL=feed.mailChimpSubscriptionURL;}else{this.newsletterEnabled=false;}}},getCopyright:function(feed){var defaultCopy='&copy; {CURRENT_YEAR} Viacom, inc.  WARNING: You have no promo copy set for the copyright information!',copyright;copyright=(feed.promo&&feed.promo.copy)?feed.promo.copy:defaultCopy;return copyright.replace('{CURRENT_YEAR}',new Date().getFullYear());},addEvents:function(){var self=this;if(!this.disableAutoFooterPadding){var timeoutId;$(window).on('resize',function(){clearTimeout(timeoutId);timeoutId=setTimeout(function(){self.updateHolderPadding();},500);});this.updateHolderPadding();}
if(this.newsletterEnabled){var $subscribeInput=this.view.coreElement.find('.s_subscribe_input'),self=this;if(!$subscribeInput[0].placeholder){$subscribeInput.val(this.view.placeholderText);$subscribeInput.on('focus',function(){if($subscribeInput[0].value==self.view.placeholderText){$subscribeInput[0].value='';}});$subscribeInput.on('blur',function(){if($subscribeInput[0].value==''){$subscribeInput[0].value=self.view.placeholderText;}});}
this.view.coreElement.find('.s_layouts_subscribe_form').on('submit',function(event){event.preventDefault();var email=this.elements.email.value,$this=$(this);if($this.hasClass(self.processingFormSubmitStateClass)){return;}
if(self.validateEmail(email)){$this.addClass(self.processingFormSubmitStateClass);$.getJSON(self.subscriptionURL+'?email='+email,function(response){var feed=response.result;$this.removeClass(self.processingFormSubmitStateClass);if(feed&&feed.submissionStatus==='success'){self.sendReportingCall();alert(self.subscriptionSuccessMessage);$this.find('[name=email]').val('');}else{alert((feed&&feed.mailChimpError)||self.subscriptionFailMessage);}});}else{alert(self.notValidEmailMessage);}});}},validateEmail:function(email){return this.emailRegExp instanceof RegExp?this.emailRegExp.test(email):true;},updateHolderPadding:function(){if(this.disableAutoFooterPadding)return;$('#background_holder').css({paddingBottom:this.moduleElement.outerHeight()});},sendReportingCall:function(){}});$Crabapple.TriforceView_ent_m006=function(){};$Crabapple.extend($Crabapple.TriforceView,$Crabapple.TriforceView_ent_m006,{coreElement:null,placeholderText:'Email Address',generateCoreElement:function(trackingClass){if(!trackingClass&&this.options&&this.options.trackingClass){trackingClass=this.options.trackingClass;}
this.moduleWrapper=this.getModuleWrapper(this.moduleElement,trackingClass).addClass('s_layouts_footer');this.coreElement=this.appendDom(this.moduleWrapper,'div',{'class':'s_container'});},enhance:function(coreElement){this.coreElement=coreElement.find('.s_container');},setOutput:function(){if(this.mode!=='append'){this.moduleElement=this.replaceModuleElement(this.moduleElement,this.moduleWrapper);}else{this.moduleElement.append(this.moduleWrapper);}
return this.moduleElement.show();},render:function(data,options){this.data=data;this.options=options;this.generateNavs();this.generateLogo();this.generateCopyright();},generateNavs:function(){if(this.data.navs){for(var i=0,len=this.data.navs.length;i<len;i++){if(this.options.newsletterEnabled&&this.options.newsletterPosition==i){this.generateNewsletter();}
this.generateNavList(this.data.navs[i],i);}}},generateNavList:function(data,index){var navList=this.appendDom(this.coreElement,'ul',{class:'list s_layouts_footerList s_layouts_footerList_'+index});this.appendNavItems(data.entries,navList);},appendNavItems:function(items,navList){for(var i=0,len=items.length;i<len;i++){this.appendNavItem(items[i],navList);}},appendNavItem:function(item,navList){var listItem=this.appendDom(navList,'li',{class:'list_item s_layouts_footerListItem'}),navItemLink=this.appendDom(listItem,'a',{href:item.url,title:item.title,class:'s_fonts_footerListLink notriforce '+item.title.toLowerCase().replace(/\W/g,'_'),target:'_blank'});if(item.image){this.appendImage(navItemLink,item.image,true).attr('alt',item.title);}else{navItemLink.text(item.title);}},generateNewsletter:function(){var form=this.appendDom(this.coreElement,'form',{'class':'s_layouts_subscribe_form','action':'#','novalidate':true}),subscribeInputId='subscribeInput_'+(this.data&&this.data.promo&&this.data.promo.shortId);this.appendDom(form,'label',{'class':'s_subscribe_title','for':subscribeInputId}).text(this.options.newsletterLabel);this.appendDom(form,'input',{'class':'s_subscribe_input s_base_input_email','id':subscribeInputId,'type':'email','name':'email','placeholder':this.placeholderText});if(this.options.newsletterCustomButtonFunc&&typeof this.options.newsletterCustomButtonFunc=='function'){form.append(this.options.newsletterCustomButtonFunc());}else{this.appendDom(form,'button',{'class':'s_layouts_newsletter_button s_buttons_button s_buttons_buttonAlt s_buttons_buttonSlashForward','type':'submit'}).text('Subscribe');}},generateLogo:function(){this.appendDom(this.coreElement,'div',{class:'logo s_layouts_footerLogoViacom'});},generateCopyright:function(){this.appendDom(this.coreElement,'p',{class:'s_fonts_footerCopyright copyright'}).html(this.options.copyright);}});$Crabapple.TriforceModule_ent_m006_cc_V1_2_0=function(){};$Crabapple.extend($Crabapple.TriforceModule_ent_m006_V2_1_0,$Crabapple.TriforceModule_ent_m006_cc_V1_2_0,{disableAutoFooterPadding:true,});