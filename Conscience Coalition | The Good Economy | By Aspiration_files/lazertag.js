"use strict";(function(){function a(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)}function b(a){var b={};if(!a)return b;for(var c,d=a.split(/[;&]/),e=0;e<d.length;e++)if(c=d[e].split("="),c&&2==c.length){var f=unescape(c[0]),g=unescape(c[1]);g=g.replace(/\+/g," "),isNaN(parseInt(g,10))||(g=parseInt(g,10)),b[f]=g}return b}function c(a){var b=a.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/);return b[3]}window.lazertag={init:function init(){var a=this,d=document.getElementById("lazertagScript").src,e=this.host=c(d),f=d.replace(/^[^\?]+\??/,""),g=this.params=Object.assign({flushDelay:1e3},b(f)),h=document.createElement("iframe");h.id="lazertagFrame",h.src="".concat(e,"/lazertag/index.html"),h.style.display="none",document.body.appendChild(h),this.iframeEl=document.getElementById("lazertagFrame"),setTimeout(function(){a.fireQueue()},g.flushDelay)},fireQueue:function fireQueue(){this.iframeEl.contentWindow.postMessage({method:"fireQueue"},"*")},addToQueue:function addToQueue(a){this.iframeEl.contentWindow.postMessage({method:"addToQueue",tag:a,flushDelay:this.params.flushDelay},"*")},smokeTest:function smokeTest(){for(var a,b=[{id:"smoketestTag1",param:"TEST_PARAM_1"},{id:"smoketestTag2",param:"TEST_PARAM_2"},{id:"smoketestTag3",param:"TEST_PARAM_3"}],c=this.params.flushDelay*b.length,d=this,e=[],f=0;f<b.length;f++)a=b[f],console.log("pixel ".concat(f," ").concat(JSON.stringify(a))),this.addToQueue(a),e.push(a.id);return setTimeout(function(){d.iframeEl.contentWindow.postMessage({method:"smokeTest",testPixelIds:e},"*")},c)}},a(window,"message",function(a){var b=a.data,c=b.method,d=b.message;"smokeTest"===c?console.log("[lazertag iframe says] ".concat(d)):void 0}),a(window,"load",function(){window.lazertag.init()})})();