(function(v){var p=window.AmazonUIPageJS||window.P,A=p._namespace||p.attributeErrors,x=A?A("RetailDownloaderAUIAsset",""):p;x.guardFatal?x.guardFatal(v)(x,window):x.execute(function(){v(x,window)})})(function(v,p,A){v.when("A").register("downloaderStrings",function(p){return downloaderStrings={en_US:{dmusic_morpho_desktop_Close:"Close",cstech_wcs_zip_download:"Download music"},fr_FR:{dmusic_morpho_desktop_Close:"Fermer",cstech_wcs_zip_download:"Télécharger de la musique"},es_ES:{dmusic_morpho_desktop_Close:"Cerrar",
cstech_wcs_zip_download:"Descargar música"},en_GB:{dmusic_morpho_desktop_Close:"Close",cstech_wcs_zip_download:"Download music"},it_IT:{dmusic_morpho_desktop_Close:"Chiudi",cstech_wcs_zip_download:"Scarica musica"},ja_JP:{dmusic_morpho_desktop_Close:"閉じる",cstech_wcs_zip_download:"ミュージックをダウンロード"},de_DE:{dmusic_morpho_desktop_Close:"Schließen",cstech_wcs_zip_download:"Musik herunterladen"},en_CA:{dmusic_morpho_desktop_Close:"Close",cstech_wcs_zip_download:"Download music"},fr_CA:{dmusic_morpho_desktop_Close:"Fermer",
cstech_wcs_zip_download:"Télécharger de la musique"},en_IN:{dmusic_morpho_desktop_Close:"Close",cstech_wcs_zip_download:"Download music"},en_AU:{dmusic_morpho_desktop_Close:"Close",cstech_wcs_zip_download:"Download music"},en_NZ:{dmusic_morpho_desktop_Close:"Close",cstech_wcs_zip_download:"Download music"},es_MX:{dmusic_morpho_desktop_Close:"Cerrar",cstech_wcs_zip_download:"Descargar música"},pt_BR:{dmusic_morpho_desktop_Close:"Fechar",cstech_wcs_zip_download:"Faça o download de músicas"},es_US:{dmusic_morpho_desktop_Close:"Cerrar",
cstech_wcs_zip_download:"Descargar música"}}});"use strict";v.when("A").register("util",function(x){var w=x.$,e={},n,t={"www.amazon.com":"en_US","www.amazon.fr":"fr_FR","www.amazon.es":"es_ES","www.amazon.co.uk":"en_GB","www.amazon.co.jp":"ja_JP","www.amazon.de":"de_DE","www.amazon.it":"it_IT","www.amazon.in":"en_IN","www.amazon.ca":"en_CA","www.amazon.com.au":"en_AU","www.amazon.com.mx":"es_MX","www.amazon.com.br":"pt_BR"},q={en_US:"en_US",fr_FR:"fr_FR",es_ES:"es_ES",en_GB:"en_GB",ja_JP:"ja_JP",
de_DE:"de_DE",it_IT:"it_IT",en_CA:"en_CA",fr_CA:"fr_CA",en_IN:"en_IN",en_AU:"en_AU",en_NZ:"en_NZ",es_MX:"es_MX",pt_BR:"pt_BR",es_US:"es_US"};e.isWin=/windows/i.test(navigator.userAgent);e.isMac=/mac/i.test(navigator.userAgent);e.browser={ff:/Firefox/i.test(navigator.userAgent),msie:/msie|Trident\/[0-9.]+/i.test(navigator.userAgent),chrome:/Chrome/i.test(navigator.userAgent)};e.getLocale=function(b){return(b=q[b]?q[b]:t[p.location.hostname])?b:"en_US"};e.isMorphoAvailable=function(){if(n)return n.promise();
n=w.Deferred();w.get("/gp/dmusic/desktop/utility/featureController.html?isMorphoAvailable\x3d1").always(function(b){var h=!1;b&&0<parseInt(b,10)&&(h=!0);n.resolve(h)});return n.promise()};e.setLocalStorage=function(b,h){if("object"===typeof p.localStorage)try{localStorage.setItem(b,h)}catch(f){}};e.getLocalStorage=function(b){if("object"===typeof p.localStorage)try{return localStorage.getItem(b)}catch(h){}};e.crossDomainNetworkRequest=function(b,h){b.error()};e.isCurrentBrowserIe8=function(){return(e.browser.msie||
w.browser.msie)&&8===parseInt(w.browser.version,10)};return e});"use strict";v.when("A","util").register("amd",function(x,w){function e(b,f){q.isFunction(b)&&b(f)}function n(){var b=navigator.userAgent,f="Unknown";/windows/i.test(b)?f="Win":/macintosh/i.test(b)&&(f="Mac");return f}function t(b){if(b.customerId){var f="https://"+document.location.host+"/gp/dmusic/amd/utility/retrieveAMZ.html?",g={customerId:b.customerId},k=!1;b.adriveIds&&0<b.adriveIds.length&&b.amdVersion&&b.deviceId&&(g.adriveIds=
b.adriveIds,g.amdVersion=b.amdVersion,g.deviceId=b.deviceId,k=!0);b.orderId&&b.asins&&(g.orderId=b.orderId,g.asins=b.asins,k=!0);if(k)return f+q.param(g)}return null}var q=x.$,b={getVersion:function(){var h;b.helper.isInstalled()?h="18h":(h=b.plugin.getAmdVersion())||(h=b.plugin.getAmdAltVersion());return h},getDeviceId:function(){var h=b.helper.getDeviceId();h||(h=b.plugin.getDeviceId());return h},download:function(h){if(b.helper.isInstalled())b.helper.launchAMD(h,h.callback);else if(b.plugin.hasLatestAMD()){var f=
t(h);if(f){f=f.replace(/https:/,location.protocol);1<q("#amzFrame").length?q("#amzFrame").attr("src",f):q("body").append('\x3ciframe id\x3d"amzFrame" style\x3d"display: none;" src\x3d"'+f+'"\x3e\x3c/iframe\x3e');e(h.callback,!0);return}}e(h.callback,!1)},isInstalled:function(){return b.helper.isInstalled()||b.plugin.hasLatestAMD()},pollForInstallation:function(h,f){function g(g){g&&(b.plugin.stopPoll(),e(h,!0))}function k(g){g&&(b.metrics.trigger("pluginActivated"),e(h,!0))}b.isInstalled()?e(h,!0):
(b.plugin.startPoll(k),b.helper.isAvailable()&&f&&b.helper.startPoll(g))}};b.helper=function(){function h(c){q.ajax({type:"POST",url:"/gp/dmusic/downloader/ajax/amzRequestToken.json",success:function(b){y=b?q.trim(b):null;a=(new Date).getTime();e(c,!0)},error:function(){e(c,!1)}})}function f(a,c){w.crossDomainNetworkRequest({type:"GET",url:"http://localhost:"+l+a,success:function(a){u=!0;if(a){var b=a;a.responseText&&(b=a.responseText);0<=b.indexOf("AMZN")&&(d=b)}e(c,m.SUCCESS)},error:function(h,
g,z){"timeout"===g&&b.metrics.report("dm_mp3_h_timeout");2<=n?h=!1:(4620>l?l++:l=4618,n++,h=!0);h?f(a,c):(n=0,u=!1,d=null,e(c,m.UNAVAILABLE))},timeout:1E4})}function g(a,c){b.metrics.trigger("helperLaunchAttempt","helper");f("/launch?amzUrl\x3d"+a,function(a){a===m.SUCCESS?(b.metrics.trigger("helperLaunchSuccess","helper"),e(c,!0)):(b.metrics.trigger("helperLaunchFailure","helper"),e(c,!1))})}var k={},u=!1,p=!1,l=4618,d=null,n=0,y=null,a=null,c=null,z=null,m={UNAVAILABLE:"unavailable",UNSUPPORTED:"unsupported",
SUCCESS:"success",ERROR:"error"};k.STATE=m;k.check=function(a){f("/device",function(c){c&&c===m.SUCCESS?e(a,!0):e(a,!1)})};k.getDeviceId=function(){return d};k.isInstalled=function(){return u};k.isInitialized=function(){return p};k.isAvailable=function(){var a=document.location.protocol.match(/^https:/);return a&&1===a.length?!1:w.isWin};k.launchAMD=function(c,b){if(y&&a>(new Date).getTime()-18E5){var m=t(c)+y;m?u?g(m,b):k.check(function(a){a?g(m,b):e(b,!1)}):e(b,!1)}else h(function(a){a?k.launchAMD(c,
b):(u=!1,e(b,!1))})};k.startPoll=function(a,m){function d(){k.check(function(m){m?(k.stopPoll(),b.metrics.trigger("helperActivated","helper"),b.metrics.trigger("helperFromInstallFlow","helper"),e(a,!0)):c=setTimeout(d,1E3)})}function h(){k.stopPoll();e(a,!1)}u?e(a,!0):k.isAvailable()?z||c||(m=m||36E4,c=setTimeout(d,1E3),z=setTimeout(h,m)):e(a,!1)};k.stopPoll=function(){c&&clearTimeout(c);z&&clearTimeout(z)};k.initialize=function(){k.isAvailable()&&k.check(function(a){u=a;p=!0;b.metrics.trigger("helperInitialized",
u)})};return k}();b.plugin=function(){return{detectPlugin:function(b,f){"ActiveXObject"in p?b(!1):navigator.plugins&&b(!1)},getDeviceId:function(){return!1},getAmdVersion:function(){return""},getAmdAltVersion:function(){return 0},getAmdVersionNumber:function(){return 0},hasAMDWithPlugin:function(){return!1},hasHelperAMDWithPlugin:function(){return!1},hasHelperAMDWithOverride:function(){return!1},hasHelperAMD:function(){return!1},hasLatestAMD:function(){return!1},altManagement:{setVersion:function(b){return!1}},
inject:function(b,f){q.isFunction(f)&&f()},startPoll:function(b){},stopPoll:function(){}}}();b.metrics=function(){function h(){function t(g,a,c){l.bind(g,function(g,m){(g=m)||(g=b.plugin.hasHelperAMD()||b.helper.isInstalled()?"helper":"legacy");m=[e.PREFIX];m.push("helper"===g?e.HELPER:e.LEGACY);m.push(a);if(c){c.skip&&(0<q("#skipAMD").length?m.push(e.SKIP):m.push(e.REQUIRED));if(c.detected){if(d)return;d=!0}c.pmet&&p.mp3store&&b.pmet.actionReport(c.pmet)}m.push(p.mp3store?"typ":"cpw");m.push("Mac"===
n()?e.MAC:e.WIN);g=m.join(e.SEPARATOR);f.report(g)})}var l=q("#amdMetrics"),d=!1;if(0<l.length){q.each([{name:"installAMDPrompted",id:"in_p",config:{skip:!0,pmet:"amdInstallPromptShown"}},{name:"downloadAMDClicked",id:"dl",config:{skip:!0}},{name:"skipped",id:"skip"},{name:"proceedButtonEnabled",id:"pr_e"},{name:"proceedButtonDisabled",id:"pr_d"},{name:"cookieEnabled",id:"c_act",config:{detected:!0}},{name:"pluginActivated",id:"p_act",config:{detected:!0,pmet:"amdPluginActivated"}},{name:"releaseAMZ",
id:"amz_init"},{name:"helperLaunchAttempt",id:"h_l_a"},{name:"helperLaunchSuccess",id:"h_l_s"},{name:"helperLaunchFailure",id:"h_l_f"},{name:"helperActivated",id:"h_act",config:{detected:!0,pmet:"amdPluginActivated"}},{name:"helperFromInstallFlow",id:"in_h_act"},{name:"hpc",id:"h_p_c"},{name:"hp",id:"h_p"},{name:"hc",id:"h_c"},{name:"h",id:"h"},{name:"pc",id:"p_c"},{name:"p",id:"p"},{name:"c",id:"c"},{name:"none",id:"none"}],function(b,a){t(a.name,a.id,a.config)});f.trigger=function(b,a){l.trigger(b,
a)};f.bind=function(b,a){l.bind(b,a)};f.reportAMDState=function(){var d="";b.helper.isInstalled()?(d+="h",f.trigger("helperAMDDetected")):b.plugin.hasHelperAMDWithPlugin()?f.trigger("helperFailure"):b.plugin.hasHelperAMDWithOverride()&&f.trigger("helperFailure","C");b.plugin.hasAMDWithPlugin()&&(d+="p");0<b.plugin.getAmdAltVersion()&&(d+="c");d||(d="none");f.trigger(d)};q("#CPDownloadNow").one("click",f.reportAMDState);if(0<k.length){for(var r=0;r<k.length;r++)f.bind(k[r].name,k[r].handler);k=[]}if(0<
g.length){for(r=0;r<g.length;r++)f.trigger(g[r].name,g[r].data);g=[]}}else setTimeout(h,100)}q("body").append('\x3cdiv id\x3d"amdMetrics" style\x3d"display: none;"\x3e\x3c/div\x3e');var f={},g=[],k=[],e={PREFIX:"dm_mp3",HELPER:"amdh",LEGACY:"leg",MAC:"m",WIN:"w",SKIP:"skip",REQUIRED:"req",SEPARATOR:"_",TARGET_URL:"/gp/dmusic/cloudplayer/utility/refMarkerTarget.html/ref\x3d"};f.trigger=function(b,e){g.push({name:b,data:e})};f.bind=function(b,g){k.push({name:b,handler:g})};f.report=function(b){var g=
e.TARGET_URL+b;setTimeout(function(){q.get(g)},100)};setTimeout(h,100);return f}();b.pmet=function(){var e={},f=navigator.userAgent?navigator.userAgent.substring(0,500):"UNKNOWN";e.actionReport=function(g,e){g={actionName:g,timestamp:(new Date).getTime()/1E3};var f={platformName:b.platformName,deviceModel:b.platformName,deviceBuildVersion:"amdMetrics"};e&&q.extend(f,e);p.JSON&&p.JSON.stringify&&(g.additionalDetails=p.JSON.stringify(f));q.post("/gp/dmusic/desktop/utility/metric.html",g)};e.report=
function(b,k){b&&(b={pageType:b+(p.mp3store?"_typ":"_cpw"),loadTimeMilliseconds:k?k:1,deviceBuildVersion:f},p.JSON&&p.JSON.stringify&&e.actionReport("pageLoaded",b))};b.metrics.bind("helperLaunchAttempt",function(){e.report("webAMDHLA")});b.metrics.bind("helperLaunchSuccess",function(){e.report("webAMDHLS")});b.metrics.bind("helperLaunchFailure",function(){e.report("webAMDHLF")});b.metrics.bind("helperFailure",function(b,f){b="webAMDH_noH";f&&(b+=f);e.report(b)});b.metrics.bind("helperAMDDetected",
function(){e.report("webAMDH_found")});return e}();return b});"use strict";v.when("A","util").register("acp",function(x,w){function e(a){k||g||(g=setTimeout(function(){b.initialize({fc:{acp:1}})},6E4));var c=Array.prototype.slice.call(arguments,1);q.isFunction(a)&&a.apply(b,c)}function n(a){var b=h;if(b)return[b.protocolString,b.basePath,":",r,"/",a].join("");console.error("Invalid endpoint:","HTTPS",r)}function t(a,c){var d=b.ACTIONS.PING,m="";if(a)if((a===b.ACTIONS.DOWNLOAD_PURCHASE||a===b.ACTIONS.PLAY)&&
c.customerId&&c.orderId)d=[a,c.customerId,c.orderId].join("/");else if(a===b.ACTIONS.PLAY){if(!(c.playType&&c.playAsin&&-1<f.indexOf(c.playType))){e(c.callback,!0);return}d=[a,c.playType,c.playAsin].join("/")}else a===b.ACTIONS.DOWNLOAD_TRACKS&&c.customerId&&c.objectIds&&0<c.objectIds.length?(d=[a,c.customerId].join("/"),m=c.objectIds.join(",")):a===b.ACTIONS.LAUNCH&&c.route?(d=a,m=c.route):d=a;else d=b.ACTIONS.PING;b.helperRequest(""+d,d,m,function(a){if(a){var b=a;a.responseText&&(b=a.responseText,
"string"===typeof b&&p.JSON&&p.JSON.parse&&(b=p.JSON.parse(b)));b.version?u=b.version:"string"===typeof b&&(a=/\"version\"\s*:\s*\"(\d+)\.(\d+)\.(\d+)/.exec(b))&&(a.shift(),u=a.join("."));b.device&&(v=b.device);b.status&&"success"!==b.status?e(c.callback,!1):e(c.callback,!0,b)}else e(c.callback,!1)})}var q=x.$,b={},h={protocolString:"https://",basePath:"www.amazonmusiclocal.com",portMin:18800,portMax:18802},f=["track","album","artist","playlist"],g=null,k=!1,u=null,v=null,l=!1,d=!1,r=h.portMin;w.isCurrentBrowserIe8()&&
(r=h.portMax+1);b.ACTIONS={LAUNCH:"cplaunch",DOWNLOAD_PURCHASE:"purchase",DOWNLOAD_TRACKS:"download",PING:"morpho",PLAY:"play"};var y=function(){return"object"===typeof ue&&"function"===typeof ue.count?function(a){var b=ue.count(a);"undefined"===typeof b&&(b=0);ue.count(a,b+1)}:q.noop}();b.helperRequest=function(a,c,d,m){var f={type:"POST",url:n(a),action:c,isMorpho:!0,success:function(a){y("DMMorphoHelperHTTPS");k=!0;e(m,a)},error:function(f){var l=!1;(f=f&&!1===f.retry)||(r++,f=r>h.portMax?!1:!0,
f=!f);f&&(l=!1);l?b.helperRequest(a,c,d,m):(k=!1,g=null,e(m,!1))}};q.browser.msie&&9>=parseInt(q.browser.version,10)&&(f.beforeSend=function(a){a.setRequestHeader("x-amzn-origin","https://www.amazon.com")});d&&(f.data=d,f.contentType="text/plain");w.crossDomainNetworkRequest(f,"HTTPS")};b.reset=function(){k=!1;v=u=null;l=!1;d=null;r=h.portMin;w.isCurrentBrowserIe8()&&(r=h.portMax+1);g&&clearTimeout(g)};b.versionAtLeast=function(a){var b=(u+"").split(".");a=(a+"").split(".");for(var d=0;d<b.length&&
d<a.length;d++){var m=parseInt(b[d],10)||0,e=parseInt(a[d],10)||0;if(m<e)return!1;if(m>e)return!0}return a.length>b.length?!1:!0};b.getVersion=function(){return u};b.getDeviceId=function(){return v};b.isInstalled=function(){return k};b.isPlayAvailable=function(){return l};b.initialize=function(a){a=a||{};var c=a.callback;a.callback=function(){l=b.versionAtLeast("1.1");c&&e.apply(null,[c].concat(Array.prototype.slice.call(arguments,0)))};b.processInteraction(b.ACTIONS.PING,a)};b.launch=function(a){b.processInteraction(b.ACTIONS.LAUNCH,
a)};b.download=function(a){var c=b.ACTIONS.DOWNLOAD_TRACKS;a.orderId&&(c=b.ACTIONS.DOWNLOAD_PURCHASE);b.processInteraction(c,a)};b.play=function(a){b.processInteraction(b.ACTIONS.PLAY,a)};b.isEligible=function(){return d&&(w.isWin||w.isMac)};b.isAvailable=function(){return k||b.isEligible()};b.getBaseEndpoint=function(){return n()};b.checkIsInstalled=function(a){b.isInstalled()?a(!0):!1===d?a(!1):b.processInteraction(b.ACTIONS.PING,{fc:{acp:1},callback:function(c){l=b.versionAtLeast("1.1");a&&a(c)}})};
b.processInteraction=function(a,c){b.isEligible()&&c&&c.fc&&c.fc.acp?t(a,c):c.callback&&c.callback(!1)};w.isMorphoAvailable().always(function(a){d=a;!0===a?b.initialize({fc:{acp:1},callback:b.initializeCallback}):b.initializeCallback&&b.initializeCallback(!1)});return b});"use strict";v.when("A","legacy-popover","amd","acp","util","downloaderStrings").register("dmusic_desktop",function(x,w,e,n,t,q){function b(a,b,f,m){if(a||m)a&&a.currentTarget&&!m&&(a=l(a.currentTarget),m=a.data("flow")),m===d.APP.CP?
e.metrics.report(f):(e.metrics.report(b),y[b]&&e.pmet.actionReport(y[b],{deviceBuildVersion:"morphoTYP"}))}function h(a){var c=d.installMorphoUrl,c=c+("?import\x3d1\x26browser\x3d"+v()),e={ajaxTimeout:6E4,width:570,showCloseButton:0,title:"",skin:"",cacheable:!1,resizable:0,followLink:0,paddingBottom:7,modal:!0,group:"dmusic_desktop_popover",closeEventExclude:"CLICK_OUTSIDE",destination:c};t.isMorphoAvailable().always(function(b){!0===b&&d.showPopover(e,a)});a.acpExists&&b(null,"","dm_mo_cp_ol_exists",
a.app)}function f(a){l(".ap_custom_close").click();var c=d.acpPromptUrl,c=c+("?flow\x3d"+(a.app?a.app:"unknown")),c=c+"\x26amd\x3d0"+("\x26exists\x3d"+(a.acpExists?"1":"0")),c=c+("\x26singleTrack\x3d"+(a.singleTrack?"1":"0")),c=c+(a.isDirectDownloadEligible?"\x26isDirectDownloadEligible\x3d1":"");a.locale&&(c+="\x26locale\x3d"+t.getLocale(a.locale));!a.skipInstallationHandler&&a.asins&&a.orderId&&a.customerId&&(a.skipInstallationHandler=function(a){a&&a.downloadOptionCallback?g(a.downloadOptionCallback):
k(a.customerId,a.orderId,a.asins);g(a.callback)});var c=c+("\x26browser\x3d"+v()),e={ajaxTimeout:6E4,width:570,showCloseButton:0,title:"",skin:"",cacheable:!1,resizable:0,followLink:0,paddingBottom:7,modal:!0,group:"dmusic_desktop_popover",closeEventExclude:"CLICK_OUTSIDE",destination:c};a.singleTrack||(a.downloadOptionCallback=function(){l.isArray(a.objectIds)&&200<a.objectIds.length?d.showZipDownloadErrorDialog(a):d.showZipDownloadPopover(a)});(d.shouldSkipMorphoUpsell()||r)&&(a.downloadOptionCallback||
a.singleTrack)?g(a.skipInstallationHandler,a):t.isMorphoAvailable().always(function(b){!0!==b||t.isCurrentBrowserIe8()?(a.downloadOptionCallback||a.singleTrack)&&g(a.skipInstallationHandler,a):d.showPopover(e,a)});c=a.acpExists?"_ol_exists":"_noamd"+(a.singleTrack?"_single":"_multi");b(null,"dm_mo_store"+c,"dm_mo_cp"+c,a.app)}function g(a,b){l.isFunction(a)&&a(b)}function k(a,b,d){u(function(e){e.attr("src","/gp/dmusic/desktop/utility/singleTrack.html?"+l.param({orderId:b,asin:d,customerId:a}))})}
function u(a,b){var d=l("#desktopSingleTrackTarget");0<d.length?g(a,d):(b||l("body").append("\x3ciframe id\x3d'desktopSingleTrackTarget' hidden \x3e\x3c/iframe\x3e"),setTimeout(function(){u(a,!0)},100))}function v(){var a="ff";t.browser.msie?a="msie":t.browser.chrome&&(a="chrome");return a}var l=x.$,d={amd:e,acp:n},r=!1,y={dm_mo_store_ol_dl:"amdClickedDownloadInstaller",dm_mo_store_ol_p:"amdInstallPromptShown"};d.TYPES={DOWNLOAD:"download",LAUNCH:"launch",MODAL:"modal",PLAY:"play",IMPORT:"import"};
d.APP={CP:"cloudplayer",STORE:"store",UNKNOWN:"unknown"};d.acpPromptUrl="/gp/dmusic/desktop/launchPlayer";d.zipDownloadModalUrl="/gp/dmusic/modalPurchasing/zipDownload";d.zipDownloadErrorDialogUrl="/gp/dmusic/desktop/zipDownloadErrorDialog";d.installMorphoUrl="/gp/dmusic/desktop/launchPlayerZip";d.initialize=function(a){a&&a.fc&&a.fc.acp&&n.initialize(a)};d.isClientInstalled=function(){return n.isInstalled()};d.isClientAvailable=function(){return d.isClientInstalled()||n.isAvailable()};d.interaction=
function(a){if(a&&a.fc)switch(a.type){case d.TYPES.DOWNLOAD:d.processDownload(a);break;case d.TYPES.IMPORT:d.processImport(a);break;case d.TYPES.LAUNCH:a.fc.acp&&n.launch();break;case d.TYPES.MODAL:a.fc.acp&&f(a);break;case d.TYPES.PLAY:a.fc.acp&&n.isInstalled()&&n.isPlayAvailable()?n.play(a):p.amznMusic&&p.amznMusic.launcher&&a.orderId&&p.amznMusic.launcher.openAfterPurchase(a.orderId)}};d.callCallback=function(a){var b=a.scope||this;l.isFunction(a.callback)&&a.callback.call(b,a)};d.processDownload=
function(a){n.isInstalled()&&!a.skipMorpho?n.versionAtLeast("3.7.1")&&a.objectIds||a.orderId?n.download(a):f(a):f(a)};d.processImport=function(a){d.acp.isInstalled()&&d.acp.versionAtLeast("3.11.0")?d.acp.launch({route:"local/uploads",fc:a.fc}):h(a)};d.processPlayback=function(a){return n.isInstalled()&&n.isPlayAvailable()&&a.customerId&&a.orderId?(n.play(a),!1):!0};d.download=function(a){if(a.fc&&a.fc.acp&&n.isEligible()){if(n.isInstalled()){n.download(a);return}if(a.fc.allowModal){a.acpExists=0;
f(a);return}}g(a.unavailableHandler)};d.showPopover=function(a,c){function e(){h&&h.close();c&&g(c.callback)}function f(){var m=l("#acpLaunchButton,#acpDownloadButton",l("#cloudPlayerOverlay"));l(".backLink, .backButton, .closeBtn",l("#cloudPlayerOverlay")).unbind("click").click(function(a){a.preventDefault();e();b(a,"dm_mo_store_ol_close","dm_mo_cp_ol_close",c.app);c.app===d.APP.CP&&b(a,"",c.acpExists?"dm_mo_cp_l_c":"dm_mo_cp_dl_c",c.app);g(c.backClickHandler,c)});l("#acpLaunchButton").unbind("click").click(function(a){a.preventDefault();
e();n.launch(c);b(a,"dm_mo_store_ol_launch","dm_mo_cp_l_l",c.app)});l("#acpDownloadButton").unbind("click").click(function(a){b(a,"dm_mo_store_ol_dl","dm_mo_cp_dl_dl",c.app);c.closeInstallPromptOnDownload&&e()});l(".alreadyInstalled",l("#cloudPlayerOverlay")).unbind("click").click(function(a){e();b(a,"dm_mo_store_ol_ai","dm_mo_cp_ol_ai",c.app)});l(".skipInstall",l("#cloudPlayerOverlay")).unbind("click").click(function(a){a.preventDefault();e();d.suppressMorphoUpsell(7);r=!0;b(a,"dm_mo_store_dl_single",
"dm_mo_cp_dl_single",c.app);c.app===d.APP.CP&&b(a,"",c.acpExists?c.singleTrack?"dm_mo_cp_l_s":"dm_mo_cp_l_m":c.singleTrack?"dm_mo_cp_dl_s":"dm_mo_cp_dl_m",c.app);g(c.skipInstallationHandler,c)});if(0<m.length){var h=0<=a.location.indexOf("import\x3d1")?"_i":"";b(m,"dm_mo_store_ol_p","dm_mo_cp_ol_p"+h,c.app);c.app===d.APP.CP&&b(m,"",(c.acpExists?"dm_mo_cp_l_p":"dm_mo_cp_dl_p")+h,c.app)}}var h=null;a.onAjaxShow=f;a.onShow=f;c.app===d.APP.STORE&&g(c.modalPurchaseCallback);h=l.AmazonPopover.displayPopover(a);
l("#ap_overlay").attr("style","width: 100%; height: 100%; position: fixed; opacity: 0.4; z-index: 199; filter: alpha(opacity\x3d40);");l(".ap_popover").css("z-index",201)};d.showZipDownloadPopover=function(a){function b(){l("#cloudPlayerOverlay").css({"-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","-o-user-select":"none","user-select":"none","-moz-box-shadow":"5px 5px 20px -5px #2A2A2A","-webkit-box-shadow":"5px 5px 20px -5px #2A2A2A","-o-box-shadow":"5px 5px 20px -5px #2A2A2A",
"-ms-box-shadow":"5px 5px 20px -5px #2A2A2A","box-shadow":"5px 5px 20px -5px #2A2A2A"});l(".ap_close#closeButton").css({position:"absolute",top:"0",right:"10px",cursor:"pointer","font-size":"27px","line-height":"30px"});l(".ap_close#confirm").css({"line-height":"30px","float":"right",cursor:"pointer",background:"#FBB532",border:"1px solid #FF9200",padding:"5px 10px",color:"#663d00","border-radius":"1px","font-size":"14px","font-weight":"bold"})}function e(){l("#zipDownloadModal").css({padding:"0",
display:"block","line-height":"200%","font-family":"sans-serif"});l("#zipDownloadModal h4").css({"font-size":"16px",color:"#2e3236","font-weight":"bold",height:"32px","white-space":"nowrap"});l("#zipDownloadModal .a-section").css({"font-size":"12px","white-space":"nowrap",color:"#7c8289"});l("#zipDownloadModal .a-section .a-fixed-right-grid").css({height:"20px"});l("#zipDownloadModal .a-section")[0].setAttribute("style","font-size: .875rem;height: 30px;color: #5b636b;margin-bottom: 0;white-space: nowrap")}
var f="",h=null,k=t.getLocale(a.locale),n=q[k].cstech_wcs_zip_download,k=q[k].dmusic_morpho_desktop_Close;if(a.orderId)f="orderId\x3d"+a.orderId;else if(a.objectIds){p.amznMusic&&p.amznMusic.appConfig&&(h=p.amznMusic.appConfig.deviceId);for(var r in a.objectIds)f+=(f?",":"ObjectIdList\x3d")+a.objectIds[r];f+="\x26isCloudPlayer\x3d1";h&&(f+="\x26deviceId\x3d"+h)}a.locale&&(f+="\x26locale\x3d"+t.getLocale(a.locale));f=d.zipDownloadModalUrl+"?"+f;f={ajaxTimeout:6E4,width:570,showCloseButton:!0,title:"",
skin:a.app===d.APP.CP?"\x3cdiv id\x3d'cloudPlayerOverlay' style\x3d'background-color:white;border-radius:3px;display: inline-table;'\x3e\x3cdiv style\x3d'padding:20px; overflow:hidden'\x3e\x3cdiv class\x3d'ap_content' id\x3d'zipDownloadModal'\x3e\x3c/div\x3e\x3cdiv class\x3d'ap_close' id\x3d'closeButton'\x3e\x26times;\x3c/div\x3e\x3cdiv class\x3d'ap_close' id\x3d'confirm'\x3e"+k+"\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e":'\x3cdiv id\x3d"webStoreOverlay" style\x3d"background-color:white;border-radius:3px;display: inline-table;"\x3e\x3cdiv class\x3d"a-popover-header"\x3e\x3cbutton class\x3d"a-button-close ap_close"\x3e\x3ci class\x3d"a-icon a-icon-close"\x3e\x3c/i\x3e\x3c/button\x3e\x3ch4 class\x3d"a-popover-header-content"\x3e'+
n+'\x3c/h4\x3e\x3c/div\x3e\x3cdiv class\x3d"ap_content a-popover-inner" id\x3d"zipDownloadModal"\x3e\x3c/div\x3e\x3cform method\x3d"get" class\x3d"a-spacing-none"\x3e\x3cdiv class\x3d"a-form-actions"\x3e\x3cspan class\x3d"a-button a-button-primary"\x3e\x3cspan class\x3d"a-button-inner"\x3e\x3ca class\x3d"a-button-text ap_close"\x3e'+k+"\x3c/a\x3e\x3c/span\x3e\x3c/span\x3e\x3c/div\x3e\x3c/form\x3e\x3c/div\x3e",cacheable:!1,resizable:0,followLink:0,paddingBottom:7,modal:!0,group:"dmusic_desktop_popover",
closeEventExclude:"CLICK_OUTSIDE",destination:f};a.app===d.APP.CP&&(f.onAjaxShow=e,f.onShow=b);a.app===d.APP.STORE&&g(a.modalPurchaseCallback);l.AmazonPopover.displayPopover(f)};d.showZipDownloadErrorDialog=function(a){var b=d.zipDownloadErrorDialogUrl;a.locale&&(b+="?locale\x3d"+t.getLocale(a.locale));l.AmazonPopover.displayPopover({ajaxTimeout:6E4,width:570,showCloseButton:0,title:"",skin:"",cacheable:!1,resizable:0,followLink:0,paddingBottom:7,modal:!0,group:"dmusic_desktop_popover",closeEventExclude:"CLICK_OUTSIDE",
destination:b})};d.shouldSkipMorphoUpsell=function(){return!0};d.suppressMorphoUpsell=function(a){var b=new Date;b.setDate(b.getDate()+a);t.setLocalStorage("NextMorphoModalShowTime",b.getTime())};d.sessionStorage=function(){function a(){var a=!1;try{a="object"===typeof p.sessionStorage}catch(b){}return a}return{get:function(b){var d="";try{a()&&(d=p.sessionStorage.getItem(b))}catch(e){}return d},set:function(b,d){try{a()&&p.sessionStorage.setItem(b,d)}catch(e){}}}}();return d})});