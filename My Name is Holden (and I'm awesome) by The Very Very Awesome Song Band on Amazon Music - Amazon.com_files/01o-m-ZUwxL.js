(function(b){var d=window.AmazonUIPageJS||window.P,e=d._namespace||d.attributeErrors,a=e?e("DigitalMusicWebsiteAppUpsellAssets",""):d;a.guardFatal?a.guardFatal(b)(a,window):a.execute(function(){b(a,window)})})(function(b,d,e){(function(){b.when("jQuery").register("dmusic_webstore_app_upsell",function(a){b.when("A").execute(function(f){f.on("a:popover:hide:appUpsell",function(){a.post("/gp/dmusic/modalPurchasing/utility/record-promo-impr-date.html","ref\x3dmob_promo_close")})});var c={modal:{URL:"/gp/dmusic/modalPurchasing/mobilePromo",
WIDTH:"530",refMarker:"",header:"",shouldShow:!1,show:function(){var a={dataStrategy:"ajax",name:"appUpsell",url:c.modal.URL+"/"+c.modal.refMarker,width:c.modal.WIDTH,header:c.modal.header};b.when("a-modal").execute(function(b){b=b.create("\x3cspan\x3e",a);b.show()})}},submit:function(){var b=a("#mobile-promo-input-content").val(),c=a("#csrfSessionID").val(),b="ref\x3dmob_promo\x26phoneNumberOrEmail\x3d"+encodeURIComponent(b)+"\x26csrfSessionId\x3d"+c;a.post("/gp/dmusic/modalPurchasing/utility/send-email-or-sms.html",
b,function(b){1!==b.status?(b=b.msg,a("#mobile-promo-alert-msg").removeClass("a-alert-inline-success").addClass("a-alert-inline-error"),a("#mobile-promo-alert-msg .a-alert-content").html(b),a("#mobile-promo-alert").show()):(b=b.msg,a(".mobile-promo-box").hide(),a("#mobile-promo-alert-msg").removeClass("a-alert-inline-error").addClass("a-alert-inline-success"),a("#mobile-promo-alert-msg .a-alert-content").html(b),a("#mobile-promo-alert").show(),a("#mobile-promo-tryagain-box").show())},"json")}};return{AppUpsell:c,
tryAgain:function(){a(".mobile-promo-box").show();a("#mobile-promo-alert").hide();a("#mobile-promo-tryagain-box").hide()}}})})()});
/* ******** */
(function(h){var g=window.AmazonUIPageJS||window.P,l=g._namespace||g.attributeErrors,d=l?l("DigitalMusicWebsitePrimeAssets",""):g;d.guardFatal?d.guardFatal(h)(d,window):d.execute(function(){h(d,window)})})(function(h,g,l){h.when("A","a-modal","dm-metrics").register("dmusic_webstore_prime",function(d,m,r){function k(a){"object"===typeof a&&"object"===typeof a.button&&(a.button.addClass("aok-hidden"),0<d.$("#dmusic_tracklist_player_container").length?a.button.siblings().removeClass("aok-hidden"):(a.button.siblings("span[id^\x3ddmusic_tracklist_play_]").removeClass("aok-hidden"),
a.button.siblings().children("span[id^\x3ddmusic_tracklist_play_]").removeClass("aok-hidden")),d.$("#dmusic_library_button_box .robinPlayButton."+a.asin).removeClass("aok-hidden"),a.button.siblings("#PrimeUpsellInstruction").addClass("aok-hidden"),a.status=1)}function t(){var a=m.get(d.$("#cross_fulfillment_modal"));a.lock().show();d.$("#cross_fulfillment_close_button").click(function(){a.unlock().hide()});d.$("#cross_fulfillment_fix_button").click(function(){a.unlock().hide();g.location="https://"+
g.location.hostname+"/gp/dmusic/account/settings/ref\x3ddm_rw_pp_kcf_fix"});return!1}var p={modalElm:null,popup:function(a){this.modalElm=m.create("\x3cspan\x3e",{activate:"onclick",closeButton:!1,dataStrategy:"ajax",name:"touModal",url:"/gp/dmusic/modalPurchasing/touModal?ASIN\x3d"+a,width:500});this.modalElm.lock(20).show()},close:function(){this.modalElm&&(this.modalElm.unlock(20),m.remove(this.modalElm))}},q={recordAddATLContent:function(a,b){if("playlist"!==a.type){var c=a.selectionSourceType;
c||(c="track"===a.type?a.source:"");a={linkType:a.type.toUpperCase(),asin:a.asin,contentSubscriptionMode:b,pageType:"Detail",selectionSourceType:c,selectionSourceId:"track"===a.type?a.sourceId:""};r.reportClickedAddContent(a)}}},n=function(a){if("object"===typeof a){this.button=a;this.status=0;var b=a.find("button");0===b.length&&(b=a.find("a"));0===b.length&&(b=a);this.asin=b.attr("data-asin");this.parentAsin=b.attr("data-parentAsin");this.csrf_session=b.attr("data-session");this.type=b.attr("data-type")?
b.attr("data-type"):"track";this.callback=b.attr("data-callback");this.title=b.attr("data-title")?b.attr("data-title"):"The "+this.type;this.client=b.attr("data-client")?b.attr("data-client"):"dm_dp";this.source="search"===this.client?"SEARCH":b.attr("data-source");this.sourceId=b.attr("data-sourceId");this.ref=b.attr("data-ref")?b.attr("data-ref"):"dm_ws_xx_xx_xx_aart_xx_xx";this.legacyMTS=b.attr("data-legacyMTS");a=b.attr("data-autoAdd");1!==a&&"1"!==a||this.addToLib()}},f={buttonHash:{},parentHash:{},
add:function(a){for(var b=0,c=a.length;b<c;++b){var e=new n(d.$(a[b]));this.buttonHash[e.asin]||(this.buttonHash[e.asin]=[]);this.buttonHash[e.asin].push(e);"track"===e.type&&"string"===typeof e.parentAsin&&(this.parentHash[e.parentAsin]||(this.parentHash[e.parentAsin]=[]),this.parentHash[e.parentAsin].push(e))}b=function(a){var b=(new n(d.$(this))).addToLib();b&&a.preventDefault();return!b};d.$.isFunction(a.live)?a.live("click",b):a.click(b)},register:function(){this.add(d.$(".robinAddButton:not(.CloudPlayerDirectLink)"))}};
n.prototype.addToLib=function(){if(this.asin===l||this.csrf_session===l)return!1;var a="playlist"===this.type?"/gp/dmusic/playlist/utility/follow_playlist.html/ref\x3d"+this.ref:"/gp/dmusic/buyBox/utility/add_to_library.html/ref\x3d"+this.ref,b="asin\x3d"+this.asin+"\x26sessionid\x3d"+this.csrf_session+"\x26acceptsTOU\x3d"+(1===this.acceptsTOU||"1"===this.acceptsTOU?1:0);"playlist"!==this.type||1!==this.acceptedTOU&&"1"!==this.acceptedTOU||(b+="\x26acceptedTOU\x3d1");var c=this;d.$.ajax({url:a,data:b,
success:function(a){var b=a.status;if((0===b||"0"===b)&&a.hasOwnProperty("exception")){if("AccountNotVerifiedException"===a.exception){g.location="/gp/dmusic/verification/cpredirect?asin\x3d"+c.asin;return}if("InvalidTermsOfUseException"===a.exception){if("search"===c.client){location.href="/gp/product/"+c.asin+"/ref\x3ddm_s_rb?autoAdd\x3d1";return}p.popup(c.asin);return}if("CrossMarketplaceCloudPlayerHomeException"===a.exception){t();return}}1!==a.status&&"1"!==a.status||q.recordAddATLContent(c,
a.contentSubMode);"string"===typeof c.callback&&(b=g[c.callback],"function"===typeof b&&b(a,c))},dataType:"json",type:"POST",async:1,timeout:5E3});return!0};h.when("dmusic_webstore_app_upsell").execute(function(a){d.$.ajax({url:"/gp/dmusic/modalPurchasing/utility/is-appupsell-eligible.html",cache:!1,success:function(b){1===b.isAppUpsellEligible&&(a.AppUpsell.modal.shouldShow=!0)},error:function(a){}})});return{DigitalMusicRobinBtnManager:f,DigitalMusicRobinMetrics:q,DigitalMusicTOUModal:p,robinToggleToPlayButton:function(a,
b){if("object"===typeof a&&a.hasOwnProperty("status")&&"object"===typeof b&&(a=a.status,1===a||"1"===a)){if("object"===typeof b.button)if("object"===typeof f){a=f.buttonHash;if("object"===typeof a){var c=f.buttonHash[b.asin];if("object"===typeof c)for(var e=0;e<c.length;++e)"object"===typeof c[e]&&k(c[e]);else k(b)}c=f.parentHash;if("object"===typeof c)if("album"===b.type){if(b=c[b.asin],"object"===typeof b)for(var d in b)"object"===typeof b[d]&&k(b[d])}else if("track"===b.type&&"string"===typeof b.parentAsin)if(c=
c[b.parentAsin],"object"===typeof c){e=!0;for(d in c)if("object"===typeof c[d]&&(0===c[d].status||"0"===c[d])){e=!1;break}if(e&&"object"===typeof a&&(b=f.buttonHash[b.parentAsin],"object"===typeof b))for(d in b)"object"===typeof b[d]&&k(b[d])}else k(b)}else k(b);h.when("dmusic_webstore_app_upsell").execute(function(a){a=a.AppUpsell.modal;a.shouldShow&&(a.show(),a.shouldShow=!1)})}},digitalMusicAddToLibByAsin:function(a,b){if("object"===typeof f&&"object"===typeof f.buttonHash&&(a=f.buttonHash[a],
"object"===typeof a&&0<a.length)){if(1===b||"1"===b)a[0].acceptsTOU=1;a[0].addToLib()}}}})});
/* ******** */
(function(h){var n=window.AmazonUIPageJS||window.P,u=n._namespace||n.attributeErrors,b=u?u("DigitalMusicWebsiteTracklistAssets",""):n;b.guardFatal?b.guardFatal(h)(b,window):b.execute(function(){h(b,window)})})(function(h,n,u){h.when("A","dmusic_webstore_music_cart","dmusic_webstore_prime","ready").execute(function(b,c,e){b.on("a:dropdown:tracklist_sortOptions:select",function(c){c=c.value;if(c!==b.$("input#tracklist_currSortType").val()){parseInt(b.$("input#tracklist_currPage").val(),10);for(var e=
n.location.search.substring(1).split("\x26"),g=!1,k=0;k<e.length;k++)"tlws"===e[k].split("\x3d")[0]&&(e[k]="tlws\x3d"+c,g=!0);g||e.push("tlws\x3d"+c);c=e.join("\x26");n.location.search=c}})});"use strict";h.when("A","dm-player","a-modal","dm-metrics","dm-cirrus-utils","dm-dmls-utils","dm-dmls-constants","dm-logger","dm-csm-counter","dm-modal-dialog","load").execute(function(b,c,e,L,A,g,k,f,y,E){function aa(a){var d=a.statusCode;"INVALID_REQUEST"===d&&(location.href="/gp/error/404");"CUSTOMER_CHANGED_OR_LOGGED_OUT"===
d&&location.reload(!0);"MAX_CONCURRENCY_REACHED"===a.response.statusCode&&(c.pause(!0),e.get(b.$("#concurrencyControl")).show())}function ba(a){v.find(".sample-button").removeClass("stopped").removeClass("loading").addClass("playing");var d=c.getAllTrackAsins();a=d.indexOf(a);0===a?M.find(".sample-button").removeClass("playing").addClass("stopped"):M.find(".sample-button").removeClass("stopped").addClass("playing");a===d.length-1?N.find(".sample-button").removeClass("playing").addClass("stopped"):
N.find(".sample-button").removeClass("stopped").addClass("playing")}function F(a){a?(ca.removeClass("aok-hidden"),B.css("cursor","default")):(ca.addClass("aok-hidden"),B.css("cursor","pointer"))}function O(a){(P=0===a)||(Q=a);b.$(".volLevel").addClass("aok-hidden");100===a?b.$("#volLevMax").removeClass("aok-hidden"):0===a?b.$("#volLevMute").removeClass("aok-hidden"):50<=a?b.$("#volLevMed").removeClass("aok-hidden"):50>=a&&b.$("#volLevMin").removeClass("aok-hidden");pa.attr("style","width: "+a+"% !important");
c.setVolume(a/100)}function da(a,d){a.closest("tr").addClass("NowPlaying");a.parent().hasClass("Streamable")&&m.data("showtou")&&(e.get(b.$("#touPopupModal")).show(),qa())}function C(a,d){a=a.find(".sample-button");"loading"===d?a.removeClass("stopped").removeClass("playing").addClass("loading"):"playing"===d?a.removeClass("loading").removeClass("stopped").addClass("playing"):"stopped"===d&&a.removeClass("playing").removeClass("loading").addClass("stopped")}function ra(a){var d=b.$("#dmusic_tracklist_track_title_"+
a+" .TitleLink:first").text();d||(d=b.$("#a-popover-trackTitlePopover_"+a).find("span:first").text());var c=b.$("#dmusic_tracklist_track_title_"+a+" .ArtistLink:first").text();c||(c=b.$("#ProductInfoArtistLink").text()||b.$("#gno_player_primary_artist").text());b.$("#dmusic_tracklist_duration_"+a+" span.a-size-small").text();sa.text(d);ea.text(c);p[a].isSample&&ea.text(c+" (Sample)")}function G(a){ta.attr("style","width: "+a+"% !important")}function R(a){if(b.$("#dmusic_tracklist_track_"+a+"_unavailable").length)return 30;
var d=b.$("#dmusic_tracklist_duration_"+a).text().split(":"),d=3===d.length?3600*Number(d[0])+60*Number(d[1])+Number(d[2]):60*Number(d[0])+Number(d[1]);return p[a].isSample&&30<d?30:d}function S(a){isNaN(a)||(a=fa(a),ua.text(a))}function fa(a){var d=Math.floor(a/3600),b=Math.floor(a/60)-60*d;a=Math.floor(a%60);return(0<d?String(d)+":":"")+(10>b&&0<d?"0"+String(b):String(b))+":"+(10>a?"0"+String(a):String(a))}function ga(a){var d=b.$("#dmusic_tracklist_header_toggle_message");a||(a=d.attr("non-flash-message"))&&
d.html(a);d.removeClass("aok-hidden")}function va(a,d){a&&b.$.ajax({method:"POST",url:"/gp/dmusic/tracklistPlayer/utility/dmls-terminate-and-update-streaming-status.html",xhrFields:{withCredentials:!0},cache:!1,data:{ASIN:a,customerId:l,deviceTypeId:r,streamingStatus:d},dataType:"json",success:function(a){a=a.statusCode;"INVALID_REQUEST"===a&&(location.href="/gp/error/404");"CUSTOMER_CHANGED_OR_LOGGED_OUT"===a&&location.reload(!0)},error:function(a,d,b){}})}function wa(){va(ha,"PLAY");e.get(b.$("#concurrencyControl")).hide()}
function xa(){b.$.ajax({type:"POST",url:"/gp/dmusic/tracklistPlayer/utility/create-cp-account.html",xhrFields:{withCredentials:!0},cache:!1,dataType:"json",success:function(a){1===a?(c.pause(!0),location.reload(!0)):e.get(b.$("#touPopupModal")).hide()},error:function(a,d,c){e.get(b.$("#touPopupModal")).hide()}})}function qa(){b.$.ajax({type:"POST",url:"/gp/dmusic/tracklistPlayer/utility/set-last-ask-date-for-streaming-tou.html",xhrFields:{withCredentials:!0},cache:!1,dataType:"json",success:function(a){},
error:function(a,d,b){}});m.data("showtou",!1)}function ya(){if("A1VC38T7YXB528"===ia){var a=String.fromCharCode(65340),a=new RegExp(a,"g"),d=b.$("#touModal"),c=b.$("#concurrencyModal");d&&c&&(d=d.html().replace(a,"\\"),a=c.html().replace(a,"\\"),b.$("#touModal").html(d),b.$("#concurrencyModal").html(a))}}function ja(){var a=b.$("#dmusic_tracklist_header_preview_all span").attr("data-dm-playable"),a=a?b.$.parseJSON(a).streamableIds:"";return""===a?[]:a.match(/([A-Z0-9]{10})/gi)}function za(a,d,b){var q=
a.contentResponseList;if(q){for(a=0;a<q.length;++a){b=q[a];var g=b.contentIdentifier.identifier;d=b.contentResponseStatusCode;var e={};e.asin=g;e.isSample=!1;"SUCCESS"===d&&b.manifest?(e.manifest=b.manifest.replace(/\n/g,"").replace(/\"/g,'"'),p[g]=e):(b="Failed to load dash drm manifest for asin "+g+" "+d,"INTERNAL_ERROR"==d?h.log(b,f.LOG_LEVEL.FATAL,f.ATTRIBUTION_DMLS_INTERNAL_ERROR):"CONTENT_NOT_ELIGIBLE"==d?h.log(b,f.LOG_LEVEL.FATAL,f.ATTRIBUTION_DMLS_CONTENT_NOT_ELIGIBLE):"CONTENT_NOT_FOUND"==
d&&h.log(b,f.LOG_LEVEL.FATAL,f.ATTRIBUTION_DMLS_CONTENT_NOT_FOUND))}w=!0;c.setAsinToTrackMap(p)}else q={error:"No response from DMLS getDashManifestsV2"},f.appendErrorDetails(q,a.error),f.appendErrorDetails(q,d),f.appendErrorDetails(q,b.responseText),f.appendErrorDetails(q,H),h.log(q.error,f.LOG_LEVEL.FATAL,f.ATTRIBUTION_DMLS_DRM)}function Aa(a,d,b){var c={error:"Failed to load Dash DRM manifests"};f.appendErrorDetails(c,d);f.appendErrorDetails(c,b);f.appendErrorDetails(c,a.responseText);f.appendErrorDetails(c,
H);d=f.LOG_LEVEL.FATAL;if(-1!==a.responseText.indexOf("INVALID_OR_EXPIRED_GURUPA_SESSION")||-1!==a.responseText.indexOf("REQUIRED_COOKIES_MISSING")||-1!==a.responseText.indexOf("UnauthorizedException"))I=!1,d=f.LOG_LEVEL.WARN;h.log(c.error,d,f.ATTRIBUTION_DMLS_DRM)}function T(){try{localStorage.getItem(l+"_playing")||ka||localStorage.setItem(l+"_playing",Date.now())}catch(a){"QuotaExceededError"==a.name&&(ka=!0,h.log("localStorage QuotaExceededError"+f.LOG_LEVEL.FATAL,f.ATTRIBUTION_STORAGE_QUOTA_EXCEEDED))}}
var v=b.$(".sample-all-container"),la=b.$(".sample-container"),N=b.$("#sample-next-container"),M=b.$("#sample-previous-container"),ma=b.$("#dmusic_tracklist_header_default_message"),na=b.$("#dmusic_tracklist_header_playing_message"),sa=b.$("#dmusic_tracklist_header_playing_message_title"),ea=b.$("#dmusic_tracklist_header_playing_message_artist"),Ba=b.$("#dmusic_tracklist_header_playing_duration"),ua=b.$("#dmusic_tracklist_header_playing_elapsed"),ca=b.$("#song-scrubber-load"),x=b.$(".volLevel");b.$(".overlay");
b.$(".music_gif");var B=b.$("#song-scrubber"),ta=b.$("#song-scrubber-progress"),U=b.$("#volumeScrubber"),pa=b.$("#volumeProgress"),m=b.$("#dmusic_tracklist_content");b.$("#takeoverButton");var V=m.data("appversion")||"1.0.0";m.data("stream");m.data("clientip");m.data("requestid");var l=m.data("customer"),r=m.data("devicetype")||"A20X0GIASH11T2",ia=m.data("market"),Ca=m.data("pagetype")||"Detail",W=m.data("ubid")?m.data("ubid").replace(/-/g,""):"unknown";m.data("useragent");var ha,z="",Q=100,P=!1,
X=0,oa=!1,D=!1,ka=!1,H,I=!0,Y=!1;v.append('\x3cspan id\x3d"session_error_dialog" class\x3d"a-declarative aok-hidden" data-action\x3d"a-modal" \x3e\x3ca href\x3d"javascript:void(0)" class\x3d"a-popover-trigger a-declarative"\x3e\x3ci class\x3d"a-icon a-icon-popover"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e');var Z='\x3cdiv style\x3d"text-align: center;"\x3e\x3cp\x3eYour session has expired, please sign in again to enjoy full-length playback\x3c/p\x3e\x3cdiv\x3e\x3cspan class\x3d"a-button a-button-beside-text a-button-primary"\x3e\x3cspan class\x3d"a-button-inner"\x3e\x3ca href\x3d"{url}" class\x3d"a-button-text" role\x3d"button"\x3eSign in\x3c/a\x3e\x3c/span\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e',
Da=b.$("#session_error_dialog"),Z=Z.replace("{url}",n.webStore.tracklist.signInUrl);E.setDialog(Da,"session_error_dialog",Z,"Session Expired");V={customerId:l,deviceId:W,deviceType:r,marketplaceId:ia,timestamp:(new Date).toISOString(),appVersion:V,baseEventVersion:2};L.init(V);b.$(".dmusicFlashModal .a-button-close").live("click",function(){b.$(".dmusicFlashModal").addClass("aok-hidden")});B.click(function(a){if(D){a=(a.pageX-B.offset().left)/B.width()*100;var d=R(z)*(a/100);X=d;D=!1;F(!0);c.setPosition(d);
G(a);S(d)}});U.click(function(a){a=a.pageX-U.offset().left;a=Math.round(a/U.width()*100);O(a)});x.click(function(a){O(P?Q:0)});var t=ja(),x=function(){var a=b.$("#dmusic_tracklist_header_preview_all span").attr("data-dm-playable"),a=a?b.$.parseJSON(a).trackId:"";return""===a?[]:a.match(/([A-Z0-9]{10})/gi)}();0<t.length&&c.isUsingHtml5Player()&&c.isFlashPlayerSupported()&&c.switchToFlashPlayer();var p={},w=0<x.length?!0:!1,p=g.getSamplePlaybackStreamingUrlsForAsins(x),Ea=JSON.parse(JSON.stringify(p));
c.setAsinToTrackMap(p);c.setAllTrackAsins(x);var J=function(){var a=ja();return a&&1<=a.length?!0:!1}(),K=c.isUsingMaestroPlayer()||c.isUsingFlashPlayer();J&&K&&0<t.length&&(w=!1,c.isEMESupported()?(x={deviceType:r,deviceId:W},H=k.getMusicUserAgent(),g.getDashDrmFullPlaybackManifestsForAsinsWithBatching(t,l,x,H,za,Aa),y.incrementCount(y.COUNTER_WEBSTORE_DRM_PLAYER)):c.isUsingMaestroPlayer()?(k=function(a){if(a){var d=a.statusCode;"INVALID_REQUEST"===d&&(location.href="/gp/error/404");"CUSTOMER_CHANGED_OR_LOGGED_OUT"===
d&&l&&""!==l&&"0"!==l&&location.reload(!0);if("API_SUCCESS"===d){a=a.batchResponse;for(d=0;d<a.length;++d){var b=a[d],e=b.asin,g=b.statusCode,k={};k.asin=e;k.isSample=!1;"MAX_CONCURRENCY_REACHED"===g?(k.url="MAX_CONCURRENCY_REACHED",p[e]=k):"SUCCESS"===g&&b.manifest&&(k.manifest=b.manifest.replace(/\n/g,"").replace(/\"/g,'"'),p[e]=k)}w=!0;c.setAsinToTrackMap(p)}}else h.log("Failed to load Dash manifests, data is null or undefined"+f.LOG_LEVEL.FATAL,f.ATTRIBUTION_PLAYER_NON_DRM)},g.getDashFullPlaybackStreamingUrlsForAsinsWithBatching(t,
l,r,k,function(){}),y.incrementCount(y.COUNTER_WEBSTORE_NON_DRM_MAESTRO_PLAYER)):c.isUsingFlashPlayer()&&(k=function(a){var d=a.statusCode;"INVALID_REQUEST"===d&&(location.href="/gp/error/404");"CUSTOMER_CHANGED_OR_LOGGED_OUT"===d&&l&&""!==l&&"0"!==l&&location.reload(!0);if("API_SUCCESS"===d){a=a.batchResponse;for(d=0;d<a.length;++d){var b=a[d],f=b.asin,e=b.statusCode;"MAX_CONCURRENCY_REACHED"===e?(e={},e.asin=f,e.url="MAX_CONCURRENCY_REACHED",e.isSample=!1,p[f]=e):"SUCCESS"===e&&b.urlList&&(e={},
e.asin=f,e.url=b.urlList[0],e.isSample=!1,p[f]=e)}w=!0;c.setAsinToTrackMap(p)}},g.getHLSFullPlaybackStreamingUrlsForAsinsWithBatching(t,l,r,k,function(){}),y.incrementCount(y.COUNTER_WEBSTORE_NON_DRM_FLASH_PLAYER)));ga(J&&K&&0<t.length);c.setOnStartPlayingCallback(function(a){var d=a.asin,f=b.$("#tracklistPlay_"+a.asin);if("MAX_CONCURRENCY_REACHED"===a.url)ha=d,c.pause(!0),e.get(b.$("#concurrencyControl")).show();else{z&&z===d||(z=d,S(0),G(0),O(P?0:Q));var k={ASIN:d,customerId:l,deviceTypeId:r,streamingStatus:"PLAY"};
a.isSample||g.updateStreamingStatus(k,aa,function(){});ba(d);ra(d);na.removeClass("aok-hidden");ma.addClass("aok-hidden");C(f,"loading");da(f,d);F(!0);D=!1;null!==f.data()&&(d=f.data().dmPlayable,L.setStreamingRelatedParams(a.isSample,d,c));oa||a.isSample||(a={browseSubscriptionMode:m.data("browsesubscriptionmode")},L.reportClientInfo(a),c.setMTSParams("bitrates","LOW"),c.setMTSParams("selectionSourceType",m.data("selectionsourcetype")),c.setMTSParams("selectionSourceId",m.data("parentasin")),c.setMTSParams("pageType",
Ca),oa=!0)}});c.setOnPauseCallback(function(a){var d=b.$("#tracklistPlay_"+a.asin),c={ASIN:a.asin,customerId:l,deviceTypeId:r,streamingStatus:"PAUSE"};a.isSample||g.updateStreamingStatus(c,aa,function(){});v.find(".sample-button").removeClass("playing").addClass("stopped");C(d,"stopped");d.closest("tr").removeClass("NowPlaying");F(!1)});c.setOnResumeCallback(function(a){var d=b.$("#tracklistPlay_"+a.asin);da(d,a.asin);ba(a.asin);C(d,"playing")});c.setOnCompleteCallback(function(a){a=b.$("#tracklistPlay_"+
a.asin);u!==a&&(v.find(".sample-button").removeClass("playing").removeClass("loading").addClass("stopped"),N.find(".sample-button").removeClass("playing").addClass("stopped"),M.find(".sample-button").removeClass("playing").addClass("stopped"),ma.removeClass("aok-hidden"),na.addClass("aok-hidden"),C(a,"stopped"),a.closest("tr").removeClass("NowPlaying"),G(100),z="")});c.setOnPlaybackBegunCallback(function(a,d){C(a,"playing");a=R(d);isNaN(a)||(a=fa(a),Ba.text(a))});c.setOnTickCallback(function(a,d){0<
a&&X!==a&&(F(!1),D=!0);X=a;d=R(z);D&&a<=d&&(G(a/d*100),S(a))});c.setOnErrorCallback(function(a,d){var b={error:""};f.appendErrorDetails(b,a);f.appendErrorDetails(b,d.response&&d.response.status);f.appendErrorDetails(b,d.error&&d.error.message);var c=f.LOG_LEVEL.FATAL;"NETWORK_ERROR"===a&&400===d.response.status&&!0!==Y&&(I=!1,c=f.LOG_LEVEL.WARN);h.log("Maestro playback error: "+b.error,c,f.ATTRIBUTION_PLAYER_DRM);!1===I&&J&&K&&0<t.length&&E.showDialog()});v.find(".sample-button").removeClass("disabled").addClass("stopped");
la.find(".sample-button").removeClass("disabled").addClass("stopped");v.css("cursor","pointer");la.css("cursor","pointer");E.addEventListener("dismiss",function(a){p=JSON.parse(JSON.stringify(Ea));w=!0;ga(!1);c.isUsingFlashPlayer()&&c.switchToNonFlashPlayer();Y=!0});b.on.ready(function(){function a(a){if(c.isUsingFlashPlayer()&&null===c.getPlayer().getPlayer()){if(/chrom(e|ium)/.test(navigator.userAgent.toLowerCase())&&(a=navigator.userAgent.match(/Chrome\/(\d+)/i))&&a[1]){var e=n.location.host.replace(/^[^.]+\./g,
"");a={"amazon.com":"Adobe Flash is required to play this music. Go to Plugin Settings to enable the Flash plugin.","amazon.co.uk":"Adobe Flash is required to play this music. Go to Plugin Settings to enable the Flash plugin.","amazon.de":"Um diese Musik abzuspielen, benötigen Sie Adobe Flash. Sie können das Flash-Plug-in in den Plug-in-Einstellungen aktivieren.","amazon.co.jp":"この楽曲を再生するには、Adobe Flashが必要です。[プラグインの設定]から、Flashのプラグインを有効にしてください。","amazon.fr":"Adobe Flash est requis pour la lecture de cette musique. Accédez à Paramètres de plug-in pour activer le plug-in Flash.",
"amazon.es":"Se necesita Adobe Flash para reproducir la música. Ve a Configuración de extensiones para habilitar la extensión de Flash.","amazon.it":"Adobe Flash è necessaria per riprodurre questa musica. Vai a Impostazioni plug-in per consentire il plug-in Flash."}[e];var e={"amazon.com":"https://images-na.ssl-images-amazon.com/images/G/01/digital/music/mp3store/chrome_flash_message_us._V277534821_.png","amazon.co.uk":"https://images-na.ssl-images-amazon.com/images/G/02/digital/music/mp3/store/chrome_flash_message_uk._V277534235_.png",
"amazon.de":"https://images-na.ssl-images-amazon.com/images/G/03/digital/music/mp3/store/chrome_flash_message_de._V277534453_.png","amazon.co.jp":"https://images-na.ssl-images-amazon.com/images/G/09/digital/music/mp3/store/chrome_flash_message_jp._V277534397_.png","amazon.fr":"https://images-na.ssl-images-amazon.com/images/G/08/digital/music/mp3/store/chrome_flash_message_fr._V277534424_.png","amazon.es":"https://images-na.ssl-images-amazon.com/images/G/30/digital/music/mp3/store/chrome_flash_message_es._V277533039_.png",
"amazon.it":"https://images-na.ssl-images-amazon.com/images/G/29/digital/music/mp3/store/chrome_flash_message_it._V277534337_.png"}[e],f=300>n.outerHeight?220:300;b.$("#dmusic_tracklist_header_toggle_message");"0:00"===b.$("#dmusic_tracklist_header_playing_duration").text().trim()&&(v.append('\x3cdiv class\x3d"dmusicFlashModal aok-hidden"\x3e\x3cdiv id\x3d"a-popover-lgtbox" class\x3d"a-declarative" data-action\x3d"a-popover-floating-close" style\x3d"z-index: 1008;opacity: 0.75;display: block;"\x3e\x3c/div\x3e\x3cdiv class\x3d"a-modal-scroller a-declarative" data-action\x3d"a-popover-floating-close" style\x3d"padding-bottom: 0px; visibility: visible;"\x3e\x3cdiv class\x3d"a-popover a-popover-modal a-declarative" data-action\x3d"a-popover-a11y" id\x3d"a-popover-3" aria-hidden\x3d"false" style\x3d"visibility: visible; position: absolute; width: 480px; height:'+
f+'px; margin:-110px 0 0 -220px; top: 50%; left: 50%; opacity: 1; display: block;"\x3e\x3cdiv class\x3d"a-popover-a11y-container"\x3e\x3cspan tabindex\x3d"0" role\x3d"dialog" class\x3d"a-popover-start aok-offscreen"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"a-popover-wrapper"\x3e\x3cbutton data-action\x3d"a-popover-close" class\x3d"a-button-close a-declarative a-button-top-right" aria-label\x3d"Close"\x3e\x3ci class\x3d"a-icon a-icon-close"\x3e\x3c/i\x3e\x3c/button\x3e\x3cdiv class\x3d"a-popover-inner" id\x3d"a-popover-content-3" style\x3d"height: auto; overflow-y: auto;"\x3e'+
a+'\x3cimg style\x3d"margin-top: 1rem; height:203px; width:379px;" src\x3d"'+e+'"\x3e\x3c/div\x3e\x3c/div\x3e\x3cspan tabindex\x3d"0" class\x3d"a-popover-end aok-offscreen"\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'),b.$(".dmusicFlashModal").removeClass("aok-hidden"))}}else!c.isCustomerInfoSet()&&c.isEMESupported()&&c.setCustomerInfo({customerId:l,deviceType:r,deviceId:W}),c.isPlaying()||T(),a.data.isDirectPlay?(a=a.data.trackId,e=p[a],c.isPlaying()?(f=c.getCurrentTrack())&&f.asin===a?
c.pause(!0):(c.pause(!0),c.playSingleTrack(e)):(f=c.getCurrentTrack())&&f.asin===a?c.resume():c.playSingleTrack(e)):c.isPlaying()?c.pause(!0):(f=c.getCurrentTrack())?c.resume():c.playAll()}ya();b.declarative("dm-takeover","click",wa);b.declarative("dm-refresh-page","click",function(){A.acceptTOU(function(a){1===a.response.touAccepted?xa():e.get(b.$("#touPopupModal")).hide()},function(){e.get(b.$("#touPopupModal")).hide()})});n.addEventListener("storage",function(a){a.key===l+"_playing"&&document.hidden&&
c.isPlaying()&&c.pause(!1)});b.declarative("dm-playable","click",function(b){var e=b.data.trackId,f=c.getCurrentTrack();(!c.isPlaying()||f.asin!==e)&&!1===I&&!0!==Y&&J&&K&&0<t.length?E.showDialog():w?a(b):setTimeout(function(){w&&a(b)},1E3)});b.declarative("dm-play-next","click",function(a){a.$target.hasClass("stopped")||(T(),c.isPlaying()&&c.pause(!1),c.playNext())});b.declarative("dm-play-previous","click",function(a){a.$target.hasClass("stopped")||(T(),c.isPlaying()&&c.pause(!1),c.playPrevious())})})});
"use strict";h.when("A","a-popover","a-detect").execute(function(b,c,e){function h(c){var e=c[0];if(n)return e.scrollWidth>e.offsetWidth;var f=0;c.children().each(function(c,e){f+=b.$(e).width()});return f>=e.offsetWidth}b.on("ready TLWpageLoad",function(){b.$(".tracklist_popover_content a").click(function(){var e=b.$(this).closest(".tracklist_popover_content").attr("id");c.get(e).hide()})});var n=e.capabilities.isIE10Plus||b.$("html").hasClass("a-lt-ie10");b.on("ready",function(){b.$("#dmusic_tracklist_player").delegate(".TrackTitleColumn .overflow_ellipsis",
"mouseenter mousemove mouseleave",function(c){h(b.$(c.currentTarget))||c.stopPropagation()})})});h.when("A","ready").execute(function(b){b.$("html").hasClass("a-lt-ie10")&&b.$(".TrackTitleColumn .overflow_ellipsis").width(b.$(".TrackTitleColumn").width())});"use strict";h.when("A","ready").register("dm-cirrus-utils",function(b){return{acceptTOU:function(c,e){b.$.ajax({type:"POST",url:"/gp/dmusic/tracklistPlayer/utility/accept-tou.html?ref_\x3ddm_ws_tlw_fp_tou_a",xhrFields:{withCredentials:!0},cache:!1,
dataType:"json",success:function(b){c(b)},error:function(b,c,g){e()}})}}});"use strict";h.when("A","dm-player-constants","dm-network-utils","ready").register("dm-cirrus-utils2",function(b,c,e){function h(){if(!A){var b=c.getDomain();A="https://music.{domain}/cirrus/".replace("{domain}",b)}return A}var A,g=new FormData;g.append("caller","checkServerChange");g.append("Operation","getGlobalLastUpdatedDate");g.append("ContentType","JSON");return{appendFormData:function(b,c){g.append("customerInfo",JSON.stringify({customerId:b,
deviceId:c,deviceType:"A20X0GIASH11T2"}))},pollCirrus:function(b,c){e.ajaxRequest(h(),g,"POST",!0,!1,function(b){b.setRequestHeader("X-Requested-With","XMLHttpRequest");b.setRequestHeader("content-type","application/x-www-form-urlencoded");b.setRequestHeader("csrf-rnd",n.webStore.appConfig.CSRFTokenConfig.csrf_rnd);b.setRequestHeader("csrf-token",n.webStore.appConfig.CSRFTokenConfig.csrf_token);b.setRequestHeader("csrf-ts",n.webStore.appConfig.CSRFTokenConfig.csrf_ts)},b,c,!0)}}});"use strict";h.when("A",
"a-modal","ready").register("dm-modal-dialog",function(b,c){var e,h;return{setDialog:function(b,g,k,f){h=g;e===u&&(e=c.create(b,{inlineContent:k,header:f,position:"triggerRight",name:g}))},showDialog:function(){e!==u&&e.show()},isDialogActive:function(){if(e!==u)return e.isActive()},addEventListener:function(c,e){b.on("a:popover:"+c+":"+h,e)}}})});
/* ******** */
(function(p){var l=window.AmazonUIPageJS||window.P,n=l._namespace||l.attributeErrors,b=n?n("DigitalMusicWebsiteCartAssets",""):l;b.guardFatal?b.guardFatal(p)(b,window):b.execute(function(){p(b,window)})})(function(p,l,n){p.when("A").register("dmusic_webstore_music_cart",function(b){function r(){b.$.ajax({url:"/gp/dmusic/modalPurchasing/utility/cart-as-json.html",type:"POST",dataType:"json",cache:!1,success:function(a){b.$(".nav-subnavFlyout.nav-subnavFlyout-nudged .nav-flyout-content").html(a["subnav-dmusic-flyout-cart"].html)}})}
function t(a){var d="dm_ws_unknwn_a2c_"+a.asin;"buyBox"===a.loc?d="dm_ws_bb_a2c":"tracklistPlayer"===a.loc?d="dm_ws_tlw_a2c":"search"===a.loc&&(d="dm_ext_s_a2c");a.refMarker&&(d=a.refMarker);var g=a.qid,c=a.sr;if(null===g||g===n)g=/[\?&]qid=([^&#]*)/.exec(location.search),null!==g&&g!==n&&(g=g[1]);if(null===c||c===n)c=/[\?&]sr=([^&#]*)/.exec(location.search),null!==c&&c!==n&&(c=c[1]);d={url:"/gp/dmusic/purchase/utility/add-to-cart.html/ref\x3d"+d,data:{ASIN:a.asin,csrfToken:a.csrfToken},type:"POST",
dataType:"json",cache:!1};null!==g&&g!==n&&(d.data.qid=g);null!==c&&c!==n&&(d.data.sr=c);d.success=function(b){if(b&&b.cartInfo&&b.success){var c=b.cartInfo.CheckedCartSize||0,c=c+(b.cartInfo.UncheckedCartSize||0);q(c);a.title&&"ok"===b.success||"errorInputOverflow"!==b.success&&"errorMusicCartOverflow"!==b.success||u(a);a.success="ok"===b.success?!0:!1;r()}else a.success=!1;b=a.callback;if("function"===typeof l[b])l[b](a)};d.error=function(b){a.success=!1;var c=a[c];if("function"===typeof l[c])l[c](a)};
b.$.ajax(d)}function v(b,d,g){if("object"!==typeof b)return!0;var c={};c.asin=b.getAttribute("data-asin")||b.getAttribute("value");c.csrfToken=b.getAttribute("data-csrfToken");c.title=b.getAttribute("data-title")||"";c.callback=b.getAttribute("data-callback")||"";c.action="add";c.loc=b.getAttribute("data-location")||"unknown";c.qid=b.getAttribute("data-qid")||n;c.sr=b.getAttribute("data-sr")||n;c.isSignedIn=d;c.event=g;var h="true"===b.getAttribute("data-customerBBOPEligible");return h?(c.clickedButtonType=
b.getAttribute("data-clickedButtonType"),c.isAlbum="true"===b.getAttribute("data-isAlbum"),c.buttonLocationType=b.getAttribute("data-location"),c.customerBBOPEligible=h,g.preventDefault(),p.when("dmusic_webstore_bbop_popup").execute(function(b){b.addToCartHandler(c)}),!1):d&&c.asin?(g.preventDefault(),t(c),!1):!0}function w(a,d){var g="dm_ws_unknwn_rfc_"+a.asin;"buyBox"===a.loc?g="dm_ws_bb_rfc_"+a.asin:"tracklistPlayer"===a.loc&&(g="dm_ws_tlw_rfc_"+a.asin);a.event=d;b.$.ajax({url:"/gp/dmusic/purchase/utility/remove-from-cart.html/ref\x3d"+
g,data:{ASIN:a.asin,csrfToken:a.csrfToken},type:"POST",dataType:"json",cache:!1,success:function(b){if(b&&b.cartInfo&&b.success){var d=b.cartInfo.CheckedCartSize||0,d=d+(b.cartInfo.UncheckedCartSize||0);q(d);a.success=!0;r()}else a.success=!1;b=a.callback;if("function"===typeof l[b])l[b](a)},error:function(b){a.success=!1;b=a.callback;if("function"===typeof l[b])l[b](a)}})}function x(b,d,g){if("object"!==typeof b)return!0;var c={};c.asin=b.getAttribute("data-asin")||b.getAttribute("value");c.csrfToken=
b.getAttribute("data-csrfToken");c.title=b.getAttribute("data-title")||"";c.callback=b.getAttribute("data-callback")||"";c.action="remove";c.loc=b.getAttribute("data-location")||"unknown";return d&&c.asin?(g.preventDefault(),w(c,g),!1):!0}function y(a){var d=b.$(".MusicCartAddButton"),g=b.$(".MusicCartRemoveButton");b.$.isFunction(d.live)?d.live("click",function(b){v(this,a,b)}):d.click(function(b){v(this,a,b)});b.$.isFunction(g.live)?g.live("click",function(b){x(this,a,b)}):g.click(function(b){x(this,
a,b)})}function z(a,d){a&&b.$.ajax({url:"/gp/dmusic/purchase/utility/promoHelper.html",data:{operation:"redeemCode",code:a},type:"POST",dataType:"json",cache:!1,success:function(b){d(b.success)},error:function(b){d("0")}})}var q=function(a){var d=b.$(".MP3CartCounter");0===a||"0"===a?d.remove():"object"===typeof d&&0<d.length?d.text(a):b.$('#nav-subnav[data-category\x3d"dmusic"] a[href*\x3d"cartReview"]').prepend("\x3cdiv class\x3d'MP3CartCounter'\x3e"+a+"\x3c/div\x3e")},u=function(a){b.$("#MusicCartFullToastContainer").stop(!0,
!0).fadeIn(200).delay(5E3).fadeOut(200)};return{setCartCount:q,showAddToCartToast:function(b){},showFullCartToast:u,setupMusicCartButtons:y,setupMusicCartBar:function(a){var d=a&&0!==a.customerId&&"0"!==a.customerId;d&&(a={url:"/gp/dmusic/purchase/utility/get-cart-info.html",type:"POST",dataType:"json",cache:!1,success:function(b){if(b&&b.cartInfo&&b.status){var a=b.cartInfo.CheckedCartSize||0,a=a+(b.cartInfo.UncheckedCartSize||0);q(a)}},error:function(b){}},b.$.ajax(a));y(d);a=b.$(".MusicCartStickyBit");
1>a.length||(d=b.$(".MusicCartBarSpacer"),1>d.length&&(d=b.$(".MusicCartBarSpacerFullCSS")),0<d.length&&(a.css({position:"absolute"}),d.css({display:"inline-block"})),a=b.$(".MusicCartBarSpacer"),"object"!==typeof a||1>a.length||"function"!==typeof a.position||(a=a.position().top,"undefined"!==typeof a&&"function"===typeof a.toString&&(a=function(a){a=document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop;var c=b.$(".MusicCartBarSpacer").position().top,d=b.$(".MusicCartStickyBit");
"undefined"!==typeof a&&a>c?d.css({position:"fixed",top:"0px","box-shadow":"3px 3px 3px rgba(0,0,0,0.1)"}):d.css({position:"fixed",top:(c-a).toString()+"px","box-shadow":"0px 0px 0px rgba(0,0,0,0.1)"})},b.$(l).scroll(a),a())))},setupReviewList:function(){for(var a=function(a){a||(a=l.event);var c=a.srcElement?a.srcElement:a.target?a.target:null;if("input"===c.nodeName.toLowerCase()){a=c.defaultValue;var c=c.checked,e=b.$("#purchaseASINs");if(e&&0<e.length)if(c)e.attr("value",e.attr("value")+a);else{var k=
e.attr("value"),k=k.replace(new RegExp(a,"g"),"");e.attr("value",k)}(e=b.$(".MusicCartReviewListRow"+a))&&0<e.length&&(c?(e.removeClass("MusicCartReviewListRowUnselected"),e.addClass("MusicCartReviewListRowSelected"),e.find("input").prop("checked",!0)):(e.addClass("MusicCartReviewListRowUnselected"),e.removeClass("MusicCartReviewListRowSelected"),e.find("input").prop("checked",!1)));e=b.$(".MusicCartReviewListCurrentSelectedCounter");0<e.length&&(c?e.text(parseInt(e.first().text(),10)+1):0<parseInt(e.first().text(),
10)&&e.text(parseInt(e.first().text(),10)-1),2>parseInt(e.first().text(),10)&&b.$(".MusicCartReviewListCurrentSelectedSingleCounter").text(c?1:0),k=b.$(".MusicCartReviewContinueButton"),"object"===typeof k&&0<k.length&&(1>parseInt(e.first().text(),10)?k.addClass("a-button-disabled"):k.removeClass("a-button-disabled")),k=b.$("#modalEditCartCheckoutButton"),"object"===typeof k&&0<k.length&&(1>parseInt(e.first().text(),10)?k.addClass("a-button-disabled"):k.removeClass("a-button-disabled")));var e=b.$("#"+
a+"Checkbox"),d=b.$(".OrderSubtotal");if(0<e.length&&0<d.length&&(k=d.attr("data-copenabled"),e=e.attr("data-price")))if("1"==k){var k=d.attr("data-originalprice"),f;f=c?(parseFloat(k)+parseFloat(e)).toFixed(2):Math.abs((parseFloat(k)-parseFloat(e)).toFixed(2));d.attr("data-originalprice",f);e={url:"/gp/dmusic/purchase/utility/music-cart-currency-of-preference.html",data:{originalPrice:f},type:"POST",dataType:"json",cache:!1,success:function(b){f=b.orderSubtotalFormatted;d.text(f)},error:function(b){}};
b.$.ajax(e)}else{var g=!1,h=!1;/￥/.test(d.first().text())&&(g=!0);/EUR/.test(d.first().text())&&(h=!0);k=d.first().text().match(/\d.*/);h&&(k=k.toString().replace(",","."));g&&(k=k.toString().replace(",",""));f=c?d.first().text().replace(/\d.*/,(parseFloat(k)+parseFloat(e)).toFixed(2)):d.first().text().replace(/\d.*/,(parseFloat(k)-parseFloat(e)).toFixed(2));h&&(f=f.toString().replace(".",","));g&&(f=f.toString().replace(".00",""),f=f.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","));d.text(f);h=g=
!1}e={url:"/gp/dmusic/purchase/utility/check-uncheck-asin.html/ref\x3d"+("dm_ws_ec_"+(c?"ck":"uck")+(0<b.$(".ModalPurchase").length?"_mdl":"_fl")),data:{},type:"POST",dataType:"json",cache:!1};c?e.data.checkASINs=a:e.data.uncheckASINs=a;e.success=function(b){};e.error=function(b){};b.$.ajax(e)}},d=function(a){var c=a.value.toString();a=a.checked;var e=b.$("#purchaseASINs");if(e&&0<e.length)if(a)e.attr("value",e.attr("value")+c);else{var d=e.attr("value"),d=d.replace(new RegExp(c,"g"),"");e.attr("value",
d)}e=b.$(".MusicCartReviewListRow"+c);0<e.length&&(a?(e.removeClass("MusicCartReviewListRowUnselected"),e.addClass("MusicCartReviewListRowSelected"),e.find("input").prop("checked",!0)):(e.addClass("MusicCartReviewListRowUnselected"),e.removeClass("MusicCartReviewListRowSelected"),e.find("input").prop("checked",!1)));e=b.$(".MusicCartReviewListCurrentSelectedCounter");0<e.length&&(a?e.text(parseInt(e.first().text(),10)+1):0<parseInt(e.first().text(),10)&&e.text(parseInt(e.first().text(),10)-1),2>parseInt(e.first().text(),
10)&&b.$(".MusicCartReviewListCurrentSelectedSingleCounter").text(a?1:0),d=b.$(".MusicCartReviewContinueButton"),"object"===typeof d&&0<d.length&&(1>parseInt(e.first().text(),10)?d.addClass("a-button-disabled"):d.removeClass("a-button-disabled")),d=b.$("#modalEditCartCheckoutButton"),"object"===typeof d&&0<d.length&&(1>parseInt(e.first().text(),10)?d.addClass("a-button-disabled"):d.removeClass("a-button-disabled")));e=b.$("#"+c+"Checkbox");c=b.$(".OrderSubtotal");if(0<e.length&&0<c.length&&(d=c.attr("data-copenabled"),
e=e.attr("data-price")))if("1"==d){var f=c.attr("data-originalprice");a=a?(parseFloat(f)+parseFloat(e)).toFixed(2):Math.abs((parseFloat(f)-parseFloat(e)).toFixed(2));c.attr("data-originalprice",a)}else{var g=d=!1;/￥/.test(c.first().text())&&(d=!0);/EUR/.test(c.first().text())&&(g=!0);f=c.first().text().match(/\d.*/);g&&(f=f.toString().replace(",","."));d&&(f=f.toString().replace(",",""));a=a?c.first().text().replace(/\d.*/,(parseFloat(f)+parseFloat(e)).toFixed(2)):c.first().text().replace(/\d.*/,
(parseFloat(f)-parseFloat(e)).toFixed(2));g&&(a=a.toString().replace(".",","));d&&(a=a.toString().replace(".00",""),a=a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","));c.text(a)}},g=function(a){for(var c="",e=0;e<a.length;e++)a[e].checked||(c+=a[e].value.toString(),a[e].checked=!0,d(a[e]));var f=b.$(".OrderSubtotal");if(0<f.length&&"1"==f.attr("data-copenabled")){var g=f.attr("data-originalprice");a={url:"/gp/dmusic/purchase/utility/music-cart-currency-of-preference.html",data:{originalPrice:g},
type:"POST",dataType:"json",cache:!1,success:function(b){g=b.orderSubtotalFormatted;f.text(g)},error:function(b){}};b.$.ajax(a)}a={url:"/gp/dmusic/purchase/utility/check-uncheck-asin.html/ref\x3ddm_ws_ec_sa"+(0<b.$(".ModalPurchase").length?"_mdl":"_fl"),data:{checkASINs:c},type:"POST",dataType:"json",cache:!1,success:function(a){b.$("#MusicCartSelectAllLink").hide()},error:function(b){}};b.$.ajax(a)},c=b.$("#MusicCartSelectAllLink"),h=b.$(".MusicCartReviewListActualCheckbox").find("input:checkbox"),
m=b.$(".MusicCartReviewListFullPageActualCheckbox").find("input:checkbox"),f=0;f<h.length;f++)if(!h[f].checked){c.show();break}for(f=0;f<m.length;f++)if(!m[f].checked){c.show();break}c.unbind("click");c.click(function(){h=b.$(".MusicCartReviewListActualCheckbox").find("input:checkbox");m=b.$(".MusicCartReviewListFullPageActualCheckbox").find("input:checkbox");0!==h.length?g(h):0!==m.length&&g(m)});h.unbind("click");h.click(function(){this.checked?h.length===b.$(".MusicCartReviewListActualCheckbox").find("input:checkbox:checked").length&&
c.hide():c.show()});m.unbind("click");m.click(function(){this.checked?m.length===b.$(".MusicCartReviewListFullPageActualCheckbox").find("input:checkbox:checked").length&&c.hide():c.show()});(f=b.$(".MusicCartReviewListCheckHidden"))&&0<f.length&&(f.removeClass("MusicCartReviewListCheckHidden"),f.addClass("MusicCartReviewListCheck"),f=b.$(".MusicCartReviewListActualCheckbox"),f.unbind("click"),f.click(a),f=b.$(".MusicCartReviewListFullPageActualCheckbox"),f.unbind("click"),f.click(a));a=function(a){if(1!==
b.$(".MusicCartReviewListDeleteLink").length){a||(a=l.event);var c=a.srcElement?a.srcElement:a.target?a.target:null,e=c.getAttribute("data-asin"),d=c.getAttribute("data-callback"),f=c.getAttribute("data-csrfToken");if(e&&(a.preventDefault(),w({asin:e,callback:d,csrfToken:f}),(a=b.$("#purchaseASINs"))&&0<a.length&&(d=a.attr("value"),d=d.replace(new RegExp(e,"g"),""),a.attr("value",d)),(a=b.$(".MusicCartReviewListRow"+e.toString()))&&0<a.length)){a.find(".MusicCartReviewListActualCheckbox").removeClass("MusicCartReviewListActualCheckbox");
a.find(".MusicCartReviewListFullPageActualCheckbox").removeClass("MusicCartReviewListFullPageActualCheckbox");a.hide();a.next().hasClass("MusicCartReviewListDivider")||a.next().hasClass("MusicCartReviewListFullPageDivider")?a.next().hide():(a.prev().hasClass("MusicCartReviewListDivider")||a.prev().hasClass("MusicCartReviewListFullPageDivider"))&&a.prev().hide();f=b.$(".MusicCartReviewListCounter");d=b.$(".MusicCartReviewListCurrentSelectedCounter");a=b.$(".MusicCartReviewListCurrentTotalCounter");
e=b.$("#"+e+"Checkbox").find("input:checkbox");f&&0<f.length&&(f.text(parseInt(f.first().text(),10)-1),a.text(parseInt(f.first().text(),10)),0<parseInt(d.first().text(),10)&&e.is(":checked")&&d.text(parseInt(d.first().text(),10)-1),"1"===f.first().text()&&(b.$(".MusicCartReviewListMultiItem").hide(),b.$(".MusicCartReviewListSingleItem").show()),"0"===f.first().text()&&(b.$(".MusicCartReviewListMultiItem").hide(),b.$(".MusicCartReviewListSingleItem").hide()));var c=c.getAttribute("data-price"),g=b.$(".OrderSubtotal");
if(c&&g&&0<g.length&&e.is(":checked"))if("1"==g.attr("data-copenabled")){var e=g.attr("data-originalprice"),h=Math.abs((parseFloat(e)-parseFloat(c)).toFixed(2));g.attr("data-originalprice",h);b.$.ajax({url:"/gp/dmusic/purchase/utility/music-cart-currency-of-preference.html",data:{originalPrice:h},type:"POST",dataType:"json",cache:!1,success:function(b){h=b.orderSubtotalFormatted;g.text(h)},error:function(b){}})}else{var e=g.first().text().match(/\d.*/),m=f=!1;/￥/.test(g.first().text())&&(f=!0);/EUR/.test(g.first().text())&&
(m=!0);m&&(e=e.toString().replace(",","."));f&&(e=e.toString().replace(",",""));h=g.first().text().replace(/\d.*/,(parseFloat(e)-parseFloat(c)).toFixed(2));m&&(h=h.toString().replace(".",","));f&&(h=h.toString().replace(".00",""),h=h.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","));m=f=!1;g.text(h)}c=b.$(".MusicCartReviewContinueButton");e=b.$("#modalEditCartCheckoutButton");1>parseInt(d.first().text(),10)?(c.addClass("a-button-disabled"),e.addClass("a-button-disabled")):(c.removeClass("a-button-disabled"),
e.removeClass("a-button-disabled"));d=b.$("#MusicCartReviewItemsSelected");c=b.$("#MusicCartReviewItemSelected");e=b.$(".MusicCartReviewButtonBox");0===a.length||1>parseInt(a.first().text(),10)?(d.hide(),c.hide(),e&&l.location.replace("/gp/dmusic/purchase/emptyCart/ref\x3ddm_ws_ec_dli")):1===parseInt(a.first().text(),10)?(a=b.$(".MusicCartReviewListActualCheckbox").find("input:checkbox"),0===a.length&&(a=b.$(".MusicCartReviewListFullPageActualCheckbox").find("input:checkbox")),b.$(".MusicCartReviewListCurrentSelectedSingleCounter").text(a.is(":checked")?
1:0),d.hide(),c.show()):(c.hide(),d.show())}}};(f=b.$(".MusicCartReviewListDeleteLink"))&&0<f.length&&(f.unbind("click"),f.click(a));a=b.$(".MusicCartReviewListCurrentSelectedCounter");f=b.$(".MusicCartReviewContinueButton");"object"===typeof f&&0<f.length&&(1>parseInt(a.first().text(),10)?f.addClass("a-button-disabled"):f.removeClass("a-button-disabled"));f=b.$("#modalEditCartCheckoutButton");"object"===typeof f&&0<f.length&&(1>parseInt(a.first().text(),10)?f.addClass("a-button-disabled"):f.removeClass("a-button-disabled"))},
setupPromoEntry:function(){var a=b.$(".PromoEntryField"),d=b.$(".PromoEntryButton");if("object"===typeof a&&0!==a.length&&"object"===typeof d&&0!==d.length){var g=function(){var a=b.$(".PromoEntrySuccess"),d=b.$(".PromoEntryError");"object"===typeof a&&0<a.length&&a.css({display:"inline-block"});"object"===typeof d&&0<d.length&&d.css({display:"none"});a=b.$("#orderAsins");"object"===typeof a&&0!==a.length&&(a={url:"/gp/dmusic/purchase/utility/order-preview-as-string.html/ref\x3ddm_ws_pr_pe",data:{ASIN:a.attr("value")},
type:"POST",dataType:"json",cache:!1,success:function(a){var c=b.$(".MusicCartReviewSubtotalSection");"object"===typeof c&&0<c.length&&c.replaceWith(a.summaryHtml)}},b.$.ajax(a))};d.click(function(){var c=a.val();z(c,function(a){if(a)g();else{a=b.$(".PromoEntrySuccess");var c=b.$(".PromoEntryError");"object"===typeof c&&0<c.length&&c.css({display:"inline-block"});"object"===typeof a&&0<a.length&&a.css({display:"none"})}})});d=b.$(".PromoEntryToggle");"object"===typeof d&&0<d.length&&d.css({display:"inline-block"})}},
addToCart:t}});p.when("A","ready").execute(function(b){b.$(".InCartButton").live("mouseenter",function(l){b.$(this).find(".InCartString").css("display","none");b.$(this).find(".ViewCartString").css("display","block")});b.$(".InCartButton").live("mouseleave",function(l){b.$(this).find(".ViewCartString").css("display","none");b.$(this).find(".InCartString").css("display","block")});b.$("#nav-subnav.spacious .nav-arrow").css("visibility","visible")})});
/* ******** */
(function(g){var h=window.AmazonUIPageJS||window.P,l=h._namespace||h.attributeErrors,e=l?l("DigitalMusicWebsiteMetricsAUI",""):h;e.guardFatal?e.guardFatal(g)(e,window):e.execute(function(){g(e,window)})})(function(g,h,l){g.when("A").register("dm-metrics",function(e){var d={},g=(new Date).getTimezoneOffset(),h=Math.floor(Math.abs(g/60)),l=Math.abs(g)%60,n=(0<g?"-":"+")+(9<h?"":"0")+h+":"+(9<l?"":"0")+l,k={customerId:"",deviceId:"",deviceType:"",marketplaceId:"",appVersion:"",baseEventVersion:""},f=
function(){return{customerId:k.customerId,deviceId:k.deviceId,deviceType:k.deviceType,marketplaceId:k.marketplaceId,deviceTimeZone:n,appVersion:k.appVersion,baseEventVersion:k.baseEventVersion}},m=function(a,b){return"UNLIMITED_PLAYLIST"===a&&"PRIME"===b?"PRIME_PLAYLIST":"GNO_UNL_PLAYLIST"===a&&"PRIME"===b?"GNO_PRIME_PLAYLIST":a};d.HLS="HLS";d.DASH="DASH";d.DASH_DRM="DASH_DRM";d.init=function(a){k=a};d.reportClickedAddContent=function(a){if(a&&e.$.isPlainObject(a)){d.init({appVersion:"1.0.0",baseEventVersion:2});
var b=f();b.asin=a.asin;b.actionName="clickedAddContent";b.contentSubscriptionMode=a.contentSubscriptionMode;b.linkType=a.linkType;b.pageType=a.pageType;b.resourceType="STORE";b.selectionSourceId=a.selectionSourceId;b.selectionSourceType=m(a.selectionSourceType,a.contentSubscriptionMode);b.source="WIFI";b.specificEventVersion=1;e.$.post("/gp/dmusic/utility/metrics-mts.html",b)}};d.reportClientInfo=function(a){var b=f();b.actionName="clientInfo";b.specificEventVersion=2;b.isAppColdStart=!0;b.browseSubscriptionMode=
a.browseSubscriptionMode;e.$.post("/gp/dmusic/utility/metrics-mts.html",b)};d.reportStreamingTerminated=function(a,b){if(a&&e.$.isPlainObject(a)&&"NONE"!==a.contentSubscriptionMode){var c=f();c.actionName="streamingTerminated";c.asin=a.asin;c.cacheHitStatus="NONE";c.contentSubscriptionMode=a.contentSubscriptionMode;c.durationSeconds=0>a.durationSeconds?0:Math.round(a.durationSeconds);c.initialPlaybackDelayMilliseconds=a.initialPlaybackDelayMilliseconds;c.isDirectedPlay=a.isDirectedPlay;c.isShufflePlay=
!1;c.pageType=a.pageType;c.rebufferCount=a.rebufferCount;c.resourceType="STORE";c.selectionSourceId=a.selectionSourceId;c.selectionSourceType=m(a.selectionSourceType,a.contentSubscriptionMode);c.source="WIFI";c.specificEventVersion=2;c.streamOrDRMTech=b;c.terminationReason=a.terminationReason;c.transferSpeedBPS=e.$.isNaN(a.transferSpeedBPS)||0>a.transferSpeedBPS?0:a.transferSpeedBPS;c.isPurchased=!1;c.scanAndImport=!1;e.$.post("/gp/dmusic/utility/metrics-mts.html",c)}};d.reportTrackStreamed=function(a){if(a&&
e.$.isPlainObject(a)&&"NONE"!==a.contentSubscriptionMode&&!(1>Math.round(a.trackProgress))){var b=f();b.actionName="trackStreamed";b.asin=a.asin;b.contentSubscriptionMode=a.contentSubscriptionMode;b.selectionSourceType=m(a.selectionSourceType,a.contentSubscriptionMode);b.specificEventVersion=2;b.trackProgress=Math.round(a.trackProgress);b.isPurchased=!1;b.scanAndImport=!1;e.$.post("/gp/dmusic/utility/metrics-mts.html",b)}};d.reportStreamingRequiredReBuffering=function(a,b){if(a&&e.$.isPlainObject(a)&&
"NONE"!==a.contentSubscriptionMode){var c=f();c.actionName="streamingRequiredReBuffering";c.asin=a.asin;c.bitrates=a.bitrates;c.cacheHitStatus="NONE";c.contentSubscriptionMode=a.contentSubscriptionMode;c.durationMilliseconds=a.durationMilliseconds;c.loadTimeMilliseconds=a.loadTimeMilliseconds;c.selectionSourceType=m(a.selectionSourceType,a.contentSubscriptionMode);c.rebufferCount=a.rebufferCount;c.source="WIFI";c.specificEventVersion=2;c.streamOrDRMTech=b;c.transferSpeedBPS=e.$.isNaN(a.transferSpeedBPS)||
0>a.transferSpeedBPS?0:a.transferSpeedBPS;e.$.post("/gp/dmusic/utility/metrics-mts.html",c)}};d.reportUiClick=function(a){if(a&&e.$.isPlainObject(a)){var b=f();b.actionName="uiClick";b.actionType=a.actionType;b.pageType=a.pageType;b.refMarker=a.refMarker;b.specificEventVersion=1;e.$.post("/gp/dmusic/utility/metrics-mts.html",b)}};d.reportUiContentView=function(a){if(a&&e.$.isPlainObject(a)){var b=f();b.actionName="uiContentView";b.contentInfo=a.contentInfo;b.emittedOnView=a.emittedOnView;b.specificEventVersion=
1;e.$.post("/gp/dmusic/utility/metrics-mts.html",b)}};d.reportUiPageView=function(a){if(a&&e.$.isPlainObject(a)){var b=f();b.actionName="uiPageView";a.associateTag&&(b.associateTag=a.associateTag);b.csSessionId=a.csSessionId;b.pageType=a.pageType;b.refMarker=a.refMarker;b.specificEventVersion=2;e.$.post("/gp/dmusic/utility/metrics-mts.html",b)}};d.reportFlexEventDuringRebuffer=function(a,b,c){if(a&&e.$.isPlainObject(a)){var d=f();d.actionName="flexEvent";d.csSessionId=a.csSessionId;d.pageType=a.pageType;
d.flexEventName="WebStoreRebuffers";d.specificEventVersion=1;d.flexStr1=b.browserPlatform;d.flexStr2=b.browserName;d.flexStr3=b.browserVersion;d.flexStr4=c;d.flexNum1=(a.durationMilliseconds/1E3).toFixed(3);d.flexNum2=(a.availableBufferMilliseconds/1E3).toFixed(3);d.flexNum3=(a.loadTimeMilliseconds/1E3).toFixed(3);e.$.post("/gp/dmusic/utility/metrics-mts.html",d)}};d.setStreamingRelatedParams=function(a,b,c){a?c.setMTSParams("contentSubscriptionMode","NONE"):c.setMTSParams("contentSubscriptionMode",
b.contentSubscriptionMode)};return d})});
/* ******** */
(function(l){var w=window.AmazonUIPageJS||window.P,E=w._namespace||w.attributeErrors,g=E?E("DigitalMusicPlayerAUI",""):w;g.guardFatal?g.guardFatal(l)(g,window):g.execute(function(){l(g,window)})})(function(l,w,E){l.when("A","ready").register("dm-swfobject",function(){var g=function(){function b(){if(!L){try{var a=n.getElementsByTagName("body")[0].appendChild(n.createElement("span"));a.parentNode.removeChild(a)}catch(b){return}L=!0;for(var a=M.length,C=0;C<a;C++)M[C]()}}function e(a){L?a():M[M.length]=
a}function I(a){if(typeof F.addEventListener!==x)F.addEventListener("load",a,!1);else if(typeof n.addEventListener!==x)n.addEventListener("load",a,!1);else if(typeof F.attachEvent!==x)f(F,"onload",a);else if("function"===typeof F.onload){var C=F.onload;F.onload=function(){C();a()}}else F.onload=a}function v(){var a=n.getElementsByTagName("body")[0],C=n.createElement(A);C.setAttribute("type",Q);var b=a.appendChild(C);if(b){var c=0;(function Z(){if(typeof b.GetVariable!==x){var h=b.GetVariable("$version");
h&&(h=h.split(" ")[1].split(","),m.pv=[parseInt(h[0],10),parseInt(h[1],10),parseInt(h[2],10)])}else if(10>c){c++;setTimeout(Z,10);return}a.removeChild(C);b=null;q()})()}else q()}function q(){var b=p.length;if(0<b)for(var C=0;C<b;C++){var f=p[C].id,k=p[C].callbackFn,d={success:!1,id:f};if(0<m.pv[0]){var e=h(f);if(e)if(!y(p[C].swfVersion)||m.wk&&312>m.wk)if(p[C].expressInstall&&B()){d={};d.data=p[C].expressInstall;d.width=e.getAttribute("width")||"0";d.height=e.getAttribute("height")||"0";e.getAttribute("class")&&
(d.styleclass=e.getAttribute("class"));e.getAttribute("align")&&(d.align=e.getAttribute("align"));for(var g={},e=e.getElementsByTagName("param"),z=e.length,G=0;G<z;G++)"movie"!==e[G].getAttribute("name").toLowerCase()&&(g[e[G].getAttribute("name")]=e[G].getAttribute("value"));c(d,g,f,k)}else a(e),k&&k(d);else r(f,!0),k&&(d.success=!0,d.ref=t(f),k(d))}else r(f,!0),k&&((f=t(f))&&typeof f.SetVariable!==x&&(d.success=!0,d.ref=f),k(d))}}function t(a){var b=null;(a=h(a))&&"OBJECT"===a.nodeName&&(typeof a.SetVariable!==
x?b=a:(a=a.getElementsByTagName(A)[0])&&(b=a));return b}function B(){return!R&&y("6.0.65")&&(m.win||m.mac)&&!(m.wk&&312>m.wk)}function c(a,b,c,f){R=!0;U=f||null;W={success:!1,id:c};var r=h(c);if(r){"OBJECT"===r.nodeName?(P=z(r),S=null):(P=r,S=c);a.id=u;if(typeof a.width===x||!/%$/.test(a.width)&&310>parseInt(a.width,10))a.width="310";if(typeof a.height===x||!/%$/.test(a.height)&&137>parseInt(a.height,10))a.height="137";n.title=n.title.slice(0,47)+" - Flash Player Installation";f=m.ie&&m.win?"ActiveX":
"PlugIn";f="MMredirectURL\x3d"+F.location.toString().replace(/&/g,"%26")+"\x26MMplayerType\x3d"+f+"\x26MMdoctitle\x3d"+n.title;b.flashvars=typeof b.flashvars!==x?b.flashvars+("\x26"+f):f;m.ie&&m.win&&4!==r.readyState&&(f=n.createElement("div"),c+="SWFObjectNew",f.setAttribute("id",c),r.parentNode.insertBefore(f,r),r.style.display="none",function aa(){4===r.readyState?r.parentNode.removeChild(r):setTimeout(aa,10)}());D(a,b,c)}}function a(a){if(m.ie&&m.win&&4!==a.readyState){var b=n.createElement("div");
a.parentNode.insertBefore(b,a);b.parentNode.replaceChild(z(a),b);a.style.display="none";(function T(){4===a.readyState?a.parentNode.removeChild(a):setTimeout(T,10)})()}else a.parentNode.replaceChild(z(a),a)}function z(a){var b=n.createElement("div");if(m.win&&m.ie)b.innerHTML=a.innerHTML;else if(a=a.getElementsByTagName(A)[0])if(a=a.childNodes)for(var f=a.length,c=0;c<f;c++)1===a[c].nodeType&&"PARAM"===a[c].nodeName||8===a[c].nodeType||b.appendChild(a[c].cloneNode(!0));return b}function D(a,b,c){var f,
r=h(c);if(m.wk&&312>m.wk)return f;if(r)if(typeof a.id===x&&(a.id=c),m.ie&&m.win){var k="",d;for(d in a)a[d]!==Object.prototype[d]&&("data"===d.toLowerCase()?b.movie=a[d]:"styleclass"===d.toLowerCase()?k+=' class\x3d"'+a[d]+'"':"classid"!==d.toLowerCase()&&(k+=" "+d+'\x3d"'+a[d]+'"'));d="";for(var y in b)b[y]!==Object.prototype[y]&&(d+='\x3cparam name\x3d"'+y+'" value\x3d"'+b[y]+'" /\x3e');r.outerHTML='\x3cobject classid\x3d"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+k+"\x3e"+d+"\x3c/object\x3e";
G[G.length]=a.id;f=h(a.id)}else{y=n.createElement(A);y.setAttribute("type",Q);for(var e in a)a[e]!==Object.prototype[e]&&("styleclass"===e.toLowerCase()?y.setAttribute("class",a[e]):"classid"!==e.toLowerCase()&&y.setAttribute(e,a[e]));for(k in b)b[k]!==Object.prototype[k]&&"movie"!==k.toLowerCase()&&(a=y,d=k,e=b[k],c=n.createElement("param"),c.setAttribute("name",d),c.setAttribute("value",e),a.appendChild(c));r.parentNode.replaceChild(y,r);f=y}return f}function d(a){var b=h(a);b&&"OBJECT"===b.nodeName&&
(m.ie&&m.win?(b.style.display="none",function T(){if(4===b.readyState){var c=h(a);if(c){for(var f in c)"function"===typeof c[f]&&(c[f]=null);c.parentNode.removeChild(c)}}else setTimeout(T,10)}()):b.parentNode.removeChild(b))}function h(a){var b=null;try{b=n.getElementById(a)}catch(c){}return b}function f(a,b,c){a.attachEvent(b,c);N[N.length]=[a,b,c]}function y(a){var b=m.pv;a=a.split(".");a[0]=parseInt(a[0],10);a[1]=parseInt(a[1],10)||0;a[2]=parseInt(a[2],10)||0;return b[0]>a[0]||b[0]===a[0]&&b[1]>
a[1]||b[0]===a[0]&&b[1]===a[1]&&b[2]>=a[2]?!0:!1}function k(a,b,c,f){if(!m.ie||!m.mac){var r=n.getElementsByTagName("head")[0];r&&(c=c&&"string"===typeof c?c:"screen",f&&(V=K=null),K&&V===c||(f=n.createElement("style"),f.setAttribute("type","text/css"),f.setAttribute("media",c),K=r.appendChild(f),m.ie&&m.win&&typeof n.styleSheets!==x&&0<n.styleSheets.length&&(K=n.styleSheets[n.styleSheets.length-1]),V=c),m.ie&&m.win?K&&typeof K.addRule===A&&K.addRule(a,b):K&&typeof n.createTextNode!==x&&K.appendChild(n.createTextNode(a+
" {"+b+"}")))}}function r(a,b){X&&(b=b?"visible":"hidden",L&&h(a)?h(a).style.visibility=b:k("#"+a,"visibility:"+b))}function l(a){return null!==/[\\\"<>\.;]/.exec(a)&&typeof encodeURIComponent!==x?encodeURIComponent(a):a}var x="undefined",A="object",Q="application/x-shockwave-flash",u="SWFObjectExprInst",F=w,n=document,J=navigator,H=!1,M=[function(){H?v():q()}],p=[],G=[],N=[],P,S,U,W,L=!1,R=!1,K,V,X=!0,m=function(){var a=typeof n.getElementById!==x&&typeof n.getElementsByTagName!==x&&typeof n.createElement!==
x,b=J.userAgent.toLowerCase(),c=J.platform.toLowerCase(),f=c?/win/.test(c):/win/.test(b),c=c?/mac/.test(c):/mac/.test(b),b=/webkit/.test(b)?parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,r=!+"\v1",h=[0,0,0],d=null;if(typeof J.plugins!==x&&typeof J.plugins["Shockwave Flash"]===A)!(d=J.plugins["Shockwave Flash"].description)||typeof J.mimeTypes!==x&&J.mimeTypes[Q]&&!J.mimeTypes[Q].enabledPlugin||(H=!0,r=!1,d=d.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),h[0]=parseInt(d.replace(/^(.*)\..*$/,"$1"),
10),h[1]=parseInt(d.replace(/^.*\.(.*)\s.*$/,"$1"),10),h[2]=/[a-zA-Z]/.test(d)?parseInt(d.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof F.ActiveXObject!==x)try{if(d=(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version"))r=!0,d=d.split(" ")[1].split(","),h=[parseInt(d[0],10),parseInt(d[1],10),parseInt(d[2],10)]}catch(k){}return{w3:a,pv:h,wk:b,ie:r,win:f,mac:c}}();(function(){m.w3&&((typeof n.readyState!==x&&"complete"===n.readyState||typeof n.readyState===x&&(n.getElementsByTagName("body")[0]||
n.body))&&b(),L||(typeof n.addEventListener!==x&&n.addEventListener("DOMContentLoaded",b,!1),m.ie&&m.win&&(n.attachEvent("onreadystatechange",function C(){"complete"===n.readyState&&(n.detachEvent("onreadystatechange",C),b())}),F===top&&function Y(){if(!L){try{n.documentElement.doScroll("left")}catch(a){setTimeout(Y,0);return}b()}}()),m.wk&&function C(){L||(/loaded|complete/.test(n.readyState)?b():setTimeout(C,0))}(),I(b)))})();(function(){m.ie&&m.win&&w.attachEvent("onunload",function(){for(var a=
N.length,b=0;b<a;b++)N[b][0].detachEvent(N[b][1],N[b][2]);a=G.length;for(b=0;b<a;b++)d(G[b]);for(var c in m)m.hasOwnProperty(c)&&(m[c]=null);m=null;for(var f in g)g.hasOwnProperty(f)&&(g[f]=null);g=null})})();return{registerObject:function(a,b,c,f){if(m.w3&&a&&b){var d={};d.id=a;d.swfVersion=b;d.expressInstall=c;d.callbackFn=f;p[p.length]=d;r(a,!1)}else f&&f({success:!1,id:a})},getObjectById:function(a){if(m.w3)return t(a)},embedSWF:function(a,b,f,d,h,k,g,z,G,t){var q={success:!1,id:b};m.w3&&!(m.wk&&
312>m.wk)&&a&&b&&f&&d&&h?(r(b,!1),e(function(){f+="";d+="";var e={};if(G&&typeof G===A)for(var p in G)G.hasOwnProperty(p)&&(e[p]=G[p]);e.data=a;e.width=f;e.height=d;p={};if(z&&typeof z===A)for(var m in z)z.hasOwnProperty(m)&&(p[m]=z[m]);if(g&&typeof g===A)for(var n in g)p.flashvars=typeof p.flashvars!==x?p.flashvars+("\x26"+n+"\x3d"+g[n]):n+"\x3d"+g[n];if(y(h))m=D(e,p,b),e.id===b&&r(b,!0),q.success=!0,q.ref=m;else{if(k&&B()){e.data=k;c(e,p,b,t);return}r(b,!0)}t&&t(q)})):t&&t(q)},switchOffAutoHideShow:function(){X=
!1},ua:m,getFlashPlayerVersion:function(){return{major:m.pv[0],minor:m.pv[1],release:m.pv[2]}},hasFlashPlayerVersion:y,createSWF:function(a,b,c){return m.w3?D(a,b,c):E},showExpressInstall:function(a,b,f,d){m.w3&&B()&&c(a,b,f,d)},removeSWF:function(a){m.w3&&d(a)},createCSS:function(a,b,c,f){m.w3&&k(a,b,c,f)},addDomLoadEvent:e,addLoadEvent:I,getQueryParamValue:function(a){var b=n.location.search||n.location.hash;if(b){/\?/.test(b)&&(b=b.split("?")[1]);if(null===a)return l(b);for(var b=b.split("\x26"),
c=0;c<b.length;c++)if(b[c].substring(0,b[c].indexOf("\x3d"))===a)return l(b[c].substring(b[c].indexOf("\x3d")+1))}return""},expressInstallCallback:function(){if(R){var a=h(u);a&&P&&(a.parentNode.replaceChild(P,a),S&&(r(S,!0),m.ie&&m.win&&(P.style.display="block")),U&&U(W));R=!1}}}}();return g});"use strict";l.when("A").execute(function(g){l.when("A").register("dm-player-interface",function(b){var e={},g=!1;e.EVENT_TYPE={PLAYBACK_HAS_BEGUN:"dm:playback-has-begun",PAUSE:"dm:pause",COMPLETE:"dm:complete",
ERROR:"dm:error",TICK:"dm:tick",BITRATE_INFO:"dm:bitrate-info"};e.initialize=function(b,e,t,B,c,a,z,D){this.play=b;this.pause=e;this.stop=t;this.setVolume=B;this.getPosition=c;this.getDuration=a;this.setPosition=z;this.canPlayHLS=D;g=!0};e.isInitialized=function(){return g};e.triggerPlaybackHasBegun=function(){b.trigger(e.EVENT_TYPE.PLAYBACK_HAS_BEGUN)};e.triggerPause=function(){b.trigger(e.EVENT_TYPE.PAUSE)};e.triggerComplete=function(){b.trigger(e.EVENT_TYPE.COMPLETE)};e.triggerError=function(g,
q){b.trigger(e.EVENT_TYPE.ERROR,g,q)};e.triggerTick=function(g,q){b.trigger(e.EVENT_TYPE.TICK,g,q)};e.triggerBitrateInfo=function(g){b.trigger(e.EVENT_TYPE.BITRATE_INFO,g)};return e})});"use strict";l.when("A","ready").register("dm-html5-player",function(g){var b={},e,l,v,q,t={},B;b.play=function(b){e(b);t.src=b.url;t.play();q=b};b.setVolume=function(b){t.volume=b};b.setPosition=function(b){t.currentTime=b};b.isSupported=function(){return g.capabilities.audio};b.setOnStartPlayingCallback=function(b){e=
b};b.setOnPauseCallback=function(b){v=function(){b(q)}};b.setOnResumeCallback=function(b){l=b};b.setOnCompleteCallback=function(b){B.bind("ended",function(){b(q)})};b.setOnPlaybackBegunCallback=function(b){B.bind("canplay",b)};b.setOnTickCallback=function(b){B.bind("timeupdate",b)};b.getCurrentTime=function(){return t.currentTime};b.getDuration=function(){return t.duration};b.pause=function(){t.pause();v()};b.resume=function(){t.play();l(q)};b.initialize=function(){B=g.$("\x3caudio id\x3d'dmusicAudioPlayer'\x3e\x3c/audio\x3e");
g.$("body").append(B);t=B[0]};b.isEMESupported=function(){return!1};return b});"use strict";l.when("A").execute(function(g){l.when("A","dm-player-interface","dm-swfobject").register("dm-flash-player",function(b,e,g){function l(){return a&&a.getState?a.getState().isPlaying:!1}function q(){function b(c){setTimeout(function(){f.push(setInterval(function(){a.processStream()},1E3))},25*c)}if(0>=f.length)for(var c=0;40>c;c++)b(c)}function t(a){var b="mp3";0===a.url.indexOf("rtmp")?b="rtmp":0<=a.url.indexOf("m3u8")&&
(b="hls");return b}function B(){if(D)return!0;if(0<b.$("#dmusicFlashPlayer").length){try{g.embedSWF("https://images-na.ssl-images-amazon.com/images/G/01/digital/music/mp3/DigitalMusicFlashPlayer._V288645768_.swf","dmusicFlashPlayer",1,1,"9.0.18",null,J,H)}catch(a){return!1}return D=!0}return!1}var c={},a=null,z=!1,D=!1,d=0,h=!1,f=[],y=0,k=0,r,O,x,A,E,u,F,n;c.PLAYBACK_EVENT={COMPLETE:"dm:complete"};var J={protocol:"https",sessionId:"18465864520251622",isDebug:0<location.search.indexOf("flashDebug")?
1:0},H={allowScriptAccess:"always"};g.hasFlashPlayerVersion&&g.hasFlashPlayerVersion("9.0.18")&&(z=!0);c.isFlashAvailable=function(){return z};c.getPlayer=function(){return a};c.setOnStartPlayingCallback=function(a){A=a};c.setOnResumeCallback=function(a){u=a};c.setOnPauseCallback=function(a){E=a};c.setOnCompleteCallback=function(a){x=a};c.setOnPlaybackBegunCallback=function(a){r=a};c.setOnTickCallback=function(a){O=a};c.setOnHlsBitRateInfoCallback=function(a){F=a};c.canPlayHLS=function(){return!0};
w.amznMusic={playerInterface:{callback:function(b,c){if("onPlayerInit"===b)a=g.getObjectById("dmusicFlashPlayer");else switch(b){case "onIOError":case "onInvalidUrl":e.triggerError();break;case "hlsBitrateInfo":F(c.current);break;case "onPlay":h?(h=!1,r()):a&&a.setPosition&&(l()?(a.pauseSong(),a.setPosition(0)):h=!1);break;case "onComplete":a.clearSong();x(n);break;case "onTick":k=c.duration,0!==k%1&&(k=Math.floor(k/1E3)),y=c.currentTime,O()}}}};c.play=function(b){if(a&&a.playSong){A(b);n=b;h=!0;
var c=t(b);"hls"===c&&q();a.playSong(b.url,c)}};c.pause=function(){a&&a.pauseSong&&(E(n),l()?a.pauseSong():d++)};c.resume=function(){u(n);h=!0;var b=t(n);"hls"===b&&q();a.playSong(n.url,b)};c.setVolume=function(b){a&&a.setVolume&&a.setVolume(b)};c.getCurrentTime=function(){return y};c.getDuration=function(){return 0!==k%1?Math.floor(k/1E3):k};c.setPosition=function(b){a&&a.setPosition&&(a.setPosition(1E3*b),h=!0,b=t(n),"hls"===b&&q(),a.playSong(n.url,b))};c.initialize=function(a){B()||(a||b.$("body").append("\x3cdiv id\x3d'dmusicFlashPlayer'\x3e\x3c/div\x3e"),
setTimeout(function(){c.initialize(!0)},100))};c.isSupported=function(){return z};c.getFlashObject=function(){return a};c.isEMESupported=function(){return!1};return c})});"use strict";l.when("A","dm-maestro-player","dm-html5-player","dm-flash-player","dm-metrics","dm-player-constants","dm-csm-counter","dm-browser-properties").register("dm-player",function(g,b,e,l,v,q,t,B){function c(a){p.initLoadDateTime||(p.initLoadDateTime=new Date);p.loadFinishDateTime=new Date;p.totalLoadedSize+=a;a=(p.loadFinishDateTime-
p.initLoadDateTime)/1E3;0<a&&(u.transferSpeedBPS=Math.round(p.totalLoadedSize/a))}function a(a){k.playing&&h.pause(!1);k.playing=!0;p.playing=!0;u.asin=a.asin;k.currentTrack=a;f.play(a);a.isSample||setTimeout(function(){!0===k.playing&&a.asin===k.currentTrack.asin&&v.reportTrackStreamed(u)},4E3);J&&t.updateStreamCounter(f.isEMESupported(),x,r)}function z(){f=b;f.initialize();x=!0;H=f.isEMESupported()?v.DASH_DRM:v.DASH}function D(){f=e;f.initialize();O=!0;H=v.DASH}function d(){f=l;f.initialize();r=
!0;f.setOnHlsBitRateInfoCallback(c);H=v.HLS}var h={},f,y={},k={},r=!1,O=!1,x=!1,A=[],E,u={bitrates:"",isPrimeMusic:!0,isMusicSubscription:!1,asin:"",durationSeconds:0,durationMilliseconds:0,initialPlaybackDelayMilliseconds:0,isDirectedPlay:!1,loadTimeMilliseconds:0,availableBufferMilliseconds:0,pageType:"Detail",rebufferCount:0,selectionSourceId:"",selectionSourceType:"",terminationReason:"",trackProgress:0,transferSpeedBPS:0},F={browserName:B.getBrowserName(),browserVersion:B.getBrowserVersion(),
browserPlatform:B.getBrowserPlatform()},n=!1,J=q.isFullPlayBackAllowed(),H,M=!1,p=new function(){this.paused=this.playing=!1;this.loadFinishDateTime=this.initLoadDateTime=this.requestPlayTime=null;this.totalLoadedSize=0;this.startPlayTime=null;this.lastTickTime=0;this.lastDateTime=null;this.currentProgress=this.resumeStartTime=0;this.buffered=!1};h.setAllTrackAsins=function(a){A=a};h.getAllTrackAsins=function(){return A};h.setAsinToTrackMap=function(a){y=a};h.getAsinToTrackMap=function(){return y};
h.canPlayHLS=function(){return f.canPlayHLS()};h.setVolume=function(a){f.setVolume(a);0===a&&(M=!0)};h.setPosition=function(a){f.setPosition(a);k.playing&&k.currentTrack&&!k.currentTrack.isSample&&(u.terminationReason="trackScrub",v.reportStreamingTerminated(u,H));p.resumeStartTime=a;p.requestPlayTime=null;p.startPlayTime=null};h.setMTSParams=function(a,b){u[a]=b};h.setOnResumeCallback=function(a){f.setOnResumeCallback(function(b){k.playing=!0;p.playing=!0;a(b)})};h.setOnStartPlayingCallback=function(a){f.setOnStartPlayingCallback(a)};
h.setOnTickCallback=function(a){f.setOnTickCallback(function(){a(f.getCurrentTime(),f.getDuration());if(k.currentTrack&&!k.currentTrack.isSample){var b=f.getCurrentTime();p.currentProgress=b;p.requestPlayTime||(p.requestPlayTime=new Date);0!==b&&p.playing&&null===p.startPlayTime&&(p.startPlayTime=new Date,u.initialPlaybackDelayMilliseconds=p.startPlayTime-p.requestPlayTime);0!==p.lastTickTime&&0===b-p.lastTickTime?(u.durationMilliseconds+=new Date-p.lastDateTime,p.buffered=!0):p.buffered&&(u.loadTimeMilliseconds=
1E3*p.lastTickTime,M||(u.rebufferCount+=1,v.reportStreamingRequiredReBuffering(u,H),x&&(u.availableBufferMilliseconds=1E3*(f.getBufferedTime()-f.getCurrentTime()),v.reportFlexEventDuringRebuffer(u,F,H))),p.buffered=!1);u.trackProgress=Math.max(u.trackProgress,b);u.durationSeconds=b-p.resumeStartTime;p.lastTickTime=b;p.lastDateTime=new Date}})};h.setOnPauseCallback=function(a){f.setOnPauseCallback(function(b){k.playing=!1;p.playing=!1;a(b)})};h.setOnCompleteCallback=function(b){f.setOnCompleteCallback(function(c){var f=
c.asin;b(c);k.playing=!1;p.playing=!1;k.currentTrack=null;c.isSample||(u.terminationReason="trackFinished",v.reportStreamingTerminated(u,H));"ALL_TRACKS"===E&&(c=A.indexOf(f)+1,c<A.length&&a(y[A[c]]))})};h.setOnPlaybackBegunCallback=function(a){f.setOnPlaybackBegunCallback(function(){if(k.playing){var b=g.$("#tracklistPlay_"+k.currentTrack.asin);a(b,k.currentTrack.asin)}})};h.setOnErrorCallback=function(a){f.setOnErrorCallback&&f.setOnErrorCallback(a)};h.playAll=function(){var b=y[A[0]];E="ALL_TRACKS";
a(b);u.isDirectedPlay=!0};h.playNext=function(){var b=0;k.currentTrack&&!k.currentTrack.isSample&&(u.terminationReason="userNext",v.reportStreamingTerminated(u,H));if(k.currentTrack&&(b=A.indexOf(k.currentTrack.asin)+1,b>=A.length))return;a(y[A[b]])};h.playPrevious=function(){var b=0;k.currentTrack&&!k.currentTrack.isSample&&(u.terminationReason="userPrev",v.reportStreamingTerminated(u,H));if(k.currentTrack&&(b=A.indexOf(k.currentTrack.asin)-1,0>b))return;a(y[A[b]])};h.playSingleTrack=function(b){E=
"SINGLE_TRACK";a(b);u.isDirectedPlay=!0};h.pause=function(a){f.pause();!k.currentTrack.isSample&&a&&(u.terminationReason="userStop",v.reportStreamingTerminated(u,H))};h.resume=function(){f.resume()};h.isPlaying=function(){return!0===k.playing};h.isPaused=function(){return!1===k.playing};h.getCurrentTrack=function(){return k.currentTrack};h.isUsingMaestroPlayer=function(){return x};h.isUsingHtml5Player=function(){return O};h.isUsingFlashPlayer=function(){return r};h.isEMESupported=function(){return f.isEMESupported()};
h.setCustomerInfo=function(a){f.setCustomerId&&f.setDeviceId&&f.setDeviceType&&(f.setCustomerId(a.customerId),f.setDeviceId(a.deviceId),f.setDeviceType(a.deviceType),n=!0)};h.isCustomerInfoSet=function(){return n};h.getPlayer=function(){return f};h.switchToFlashPlayer=function(){O=x=!1;d()};h.switchToNonFlashPlayer=function(){b.isSupported()?(z(),r=!1):e.isSupported()&&(D(),r=!1)};h.isFlashPlayerSupported=function(){return l.isSupported()};h.isMaestroPlayerSupported=function(){return b.isSupported()};
w.onbeforeunload=function(){k.currentTrack&&!k.currentTrack.isSample&&k.playing&&(u.terminationReason="systemStop",v.reportStreamingTerminated(u,H))};b.isSupported()?z():e.isSupported()?D():l.isSupported()?d():console.log("ERROR: Could not load any player.");return h});"use strict";l.when("A","dm-dmls-constants","dm-network-utils","ready").register("dm-dmls-utils",function(g,b,e){function l(b){v&&clearTimeout(v);v=setTimeout(function(){var e=b.refetchFunction;e(b.asinList,b.customerId,b.deviceType,
b.successCallback,b.errorCallback)},18E5)}var v,q={getDashFullPlaybackStreamingUrlsForAsinsWithBatching:function(b,e,c,a,g){for(var D=Math.ceil(b.length/10),d=0;d<D;++d){var h=10*d,h=b.slice(h,h+10);q.getDashFullPlaybackStreamingUrlsForAsins(h,e,c,a,g)}l({refetchFunction:q.getDashFullPlaybackStreamingUrlsForAsinsWithBatching,asinList:b,customerId:e,deviceType:c,successCallback:a,errorCallback:g})},getDashFullPlaybackStreamingUrlsForAsins:function(b,e,c,a,z){g.$.ajax({url:"/gp/dmusic/tracklistPlayer/utility/dmls-get-dash-manifests.html",
xhrFields:{withCredentials:!0},cache:!1,data:{asinList:b.join(","),customerId:e,deviceTypeId:c},dataType:"json",success:function(b){a(b)},error:function(a,b,c){z()}})},getDashDrmFullPlaybackManifestsForAsinsWithBatching:function(b,e,c,a,g,D){for(var d=[],h=Math.ceil(b.length/10),f=0;f<h;++f){var y=10*f,y=b.slice(y,y+10);d.push(y)}for(h=0;h<d.length;++h)q.getDashDrmFullPlaybackManifestsForAsins(d[h],e,c,a,g,D);l({refetchFunction:q.getDashDrmFullPlaybackManifestsForAsinsWithBatching,asinList:b,customerId:e,
deviceType:c,successCallback:g,errorCallback:D})},getDashDrmFullPlaybackManifestsForAsins:function(g,q,c,a,z,l){for(var d=[],h=0;h<g.length;++h)d.push({identifier:g[h],identifierType:"ASIN"});e.ajaxRequest(b.getDmlsEndpointForMusicDomain(),JSON.stringify({customerId:q,deviceToken:{deviceTypeId:c.deviceType,deviceId:c.deviceId},contentIdList:d,bitrateTypeList:["LOW","MEDIUM","HIGH"],musicDashVersionList:["V1","V2"],appInfo:{musicAgent:a}}),"POST",!0,"application/json",function(a){b.setJqueryAjaxHeaders(a);
b.setTargetForDashManifestsV2(a)},z,l,!1)},getHLSFullPlaybackStreamingUrlsForAsinsWithBatching:function(b,e,c,a,g){for(var D=Math.ceil(b.length/10),d=0;d<D;++d){var h=10*d,h=b.slice(h,h+10);q.getHLSFullPlaybackStreamingUrlsForAsins(h,e,c,a,g)}l({refetchFunction:q.getHLSFullPlaybackStreamingUrlsForAsinsWithBatching,asinList:b,customerId:e,deviceType:c,successCallback:a,errorCallback:g})},getHLSFullPlaybackStreamingUrlsForAsins:function(b,e,c,a,z){g.$.ajax({method:"POST",url:"/gp/dmusic/tracklistPlayer/utility/dmls-get-streaming-urls.html",
xhrFields:{withCredentials:!0},cache:!1,data:{asinList:b.join(","),customerId:e,deviceTypeId:c},dataType:"json",success:function(b){a(b)},error:function(a,b,c){z()}})},getSamplePlaybackStreamingUrlsForAsins:function(b){for(var e={},c=0;c<b.length;++c){var a=b[c],g={};g.asin=a;g.url="/gp/dmusic/get_sample_url.html/ref\x3ddm_dp_trk_"+a+"?ie\x3dUTF8\x26ASIN\x3d"+a+"\x26DownloadLocation\x3dWEBSITE";g.isSample=!0;e[a]=g}return e},updateStreamingStatus:function(b,e,c){g.$.ajax({method:"POST",url:"/gp/dmusic/tracklistPlayer/utility/dmls-update-streaming-status.html",
xhrFields:{withCredentials:!0},cache:!1,data:b,dataType:"json",success:function(a){e(a)},error:function(a,b,e){c()}})}};return q});"use strict";l.when("A","dm-dmls-constants","dm-browser-properties","dm-logger","ready").register("dm-maestro-drm-config",function(g,b,e,I){function v(c,d){d.resolver="json";d.credentials="include";d.headers=b.appendRequestInterceptorHeaders(d.headers);b.appendTargetForLicenseForPlaybackV2(d.headers);a=b.getMusicUserAgent();d.headers["Content-Type"]!==E&&delete d.headers["Content-Type"];
d.headers.SOAPAction!==E&&delete d.headers.SOAPAction;c={DrmType:c,licenseChallenge:btoa(String.fromCharCode.apply(null,new Uint8Array(d.body))),customerId:f.customerId,deviceToken:{deviceTypeId:f.deviceType,deviceId:f.deviceId},appInfo:{musicAgent:a}};d.body=JSON.stringify(c);return d}function q(b){if(b.license===E||"undefined"===b.license||""===b.license){var c={error:"no license in response"};I.appendErrorDetails(c,b.license);I.appendErrorDetails(c,a);l.log(c.error,I.LOG_LEVEL.FATAL,I.ATTRIBUTION_DMLS_LICENSEPLAYBACKV2)}b=
w.atob(b.license);for(var c=b.length,f=new Uint8Array(c),d=0;d<c;d++)f[d]=b.charCodeAt(d);return f.buffer}var t,B,c,a;g=["WIDEVINE","PLAYREADY"];for(var z=["com.widevine.alpha","com.microsoft.playready"],D=[{initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/mp4;codecs\x3d"mp4a.40.2"'}]}],d=[],h=0;h<g.length;++h)d[h]={},d[h].dmlsName=g[h],d[h].keySystem=z[h],d[h].supportedConfiguration=D;var f={getMaestroPlayer:function(){t||(t=Maestro&&Maestro.Player)&&t.isEMESupported||l.log("Maestro not loaded",
I.LOG_LEVEL.FATAL,I.ATTRIBUTION_DRM_CONFIG);return t},getInstantiatedPlayer:function(){var a=f.getMaestroPlayer();!B&&a&&(B=new a);return B},isSupported:function(){var a=f.getMaestroPlayer();return a&&a.isSupported('audio/mp4; codecs\x3d"mp4a.40.2"')},isEMESupported:function(){var a=f.getMaestroPlayer();if(a&&a.isEMESupported){var b=e.isChrome()?d[0]:e.isFF()?d[0]:e.isOpera()?d[0]:e.isIE()?d[1]:E,a=b?a.isEMESupported(b.keySystem,b.supportedConfiguration):a.isEMESupported();return"boolean"===typeof a?
a?Promise.resolve():Promise.reject():a}return Promise.reject()},canPlayDrm:function(){return c},setCanPlayDrm:function(a){c=a},getDrmConfig:function(){for(var a={},c=0;c<d.length;++c){var f=d[c];a[f.keySystem]={licenseServerUrl:b.getDmlsEndpointForMusicDomain(),licenseServerRequestInterceptor:v.bind(this,f.dmlsName),licenseServerResponseInterceptor:q}}return a}};return f});"use strict";l.when("A","ready").register("dm-maestro-weblab-state",function(){return{isChromeLaunched:!1,isFFLaunched:!1,isIELaunched:!1}});
"use strict";l.when("A","ready").register("dm-device-state",function(){return{isMobileViewEnabled:!1}});"use strict";l.when("A","dm-maestro-weblab-state","dm-device-state","dm-browser-properties","dm-player-constants","dm-maestro-drm-config","dm-logger").execute(function(g,b,e,I,v,q,t){if(e.isMobileViewEnabled)"use strict",l.when("A","ready").register("dm-maestro-player",function(b){return{isSupported:function(){return!1}}});else{var B=v.isFullPlayBackAllowed();if(I.isChrome()&&b.isChromeLaunched||
I.isFF()&&b.isFFLaunched||I.isIE()&&b.isIELaunched)try{q.isEMESupported().then(function(b){q.setCanPlayDrm(!0);"use strict";l.when("A","dm-maestro-drm-config","dm-logger","ready").register("dm-maestro-player",function(a,b,c){a={};var d={},e,f,g,k;a.isSupported=function(){var a=/android/i.test(navigator.userAgent),c=/ipad|iphone|ipod/i.test(navigator.userAgent),f=/mobile|webos|blackberry|iemobile|opera mini/i.test(navigator.userAgent);return!(a||c||f)&&b.isSupported()};a.initialize=function(){d=b.getInstantiatedPlayer();
try{d.setConfig({drm:b.getDrmConfig()})}catch(a){l.log("Failed to set Maestro drm config: "+a,c.LOG_LEVEL.FATAL,c.ATTRIBUTION_PLAYER_DRM)}};a.setVolume=function(a){d.volume(a)};a.setOnTickCallback=function(a){d.addEventListener("timeupdate",a)};a.setOnPauseCallback=function(a){g=a};a.setOnCompleteCallback=function(a){d.addEventListener("ended",function(){a(k)})};a.setOnStartPlayingCallback=function(a){e=a};a.setOnPlaybackBegunCallback=function(a){d.addEventListener("started",function(){a(k)})};a.setOnResumeCallback=
function(a){f=a};a.setOnErrorCallback=function(a){d.addEventListener("error",function(b,c){a(b,c)})};a.getCurrentTime=function(){return d.getCurrentTime()};a.getBufferedTime=function(){return d.getBufferedTime()};a.getDuration=function(){return d.getDuration()};a.play=function(a){e(a);if("manifest"in a)try{d.load({id:a.asin,extension:"mpd",manifest:a.manifest})}catch(b){l.log("failed to load track with manifest: "+b,c.LOG_LEVEL.FATAL,c.ATTRIBUTION_PLAYER_DRM)}else try{d.load({id:a.asin,url:a.url,
duration:100})}catch(b){l.log("failed to load track with url: "+b,c.LOG_LEVEL.FATAL,c.ATTRIBUTION_PLAYER_DRM)}try{d.play(a.asin)}catch(b){l.log("failed to play track: "+b,c.LOG_LEVEL.FATAL,c.ATTRIBUTION_PLAYER_DRM)}k=a};a.pause=function(){d.pause();g(k)};a.setPosition=function(a){d.seekTo(a)};a.resume=function(){d.resume();f(k)};a.isEMESupported=function(){return b.canPlayDrm()};a.setCustomerId=function(a){b.customerId=a};a.setDeviceId=function(a){b.deviceId=a};a.setDeviceType=function(a){b.deviceType=
a};return a})},function(b){q.setCanPlayDrm(!1);B?("use strict",l.when("A","ready").register("dm-maestro-player",function(a){a={};var b={},c,d,e,f;a.isSupported=function(){var a=w&&w.Maestro&&w.Maestro.Player,b=/android/i.test(navigator.userAgent),c=/ipad|iphone|ipod/i.test(navigator.userAgent),f=/mobile|webos|blackberry|iemobile|opera mini/i.test(navigator.userAgent);return!(b||c||f)&&a&&a.isSupported()};a.initialize=function(){b=new (w&&w.Maestro&&w.Maestro.Player)};a.setVolume=function(a){b.volume(a)};
a.setOnTickCallback=function(a){b.addEventListener("timeupdate",a)};a.setOnPauseCallback=function(a){e=a};a.setOnCompleteCallback=function(a){b.addEventListener("ended",function(){a(f)})};a.setOnStartPlayingCallback=function(a){c=a};a.setOnPlaybackBegunCallback=function(a){b.addEventListener("started",function(){a(f)})};a.setOnResumeCallback=function(a){d=a};a.getCurrentTime=function(){return b.getCurrentTime()};a.getBufferedTime=function(){return b.getBufferedTime()};a.getDuration=function(){return b.getDuration()};
a.play=function(a){c(a);"manifest"in a?b.load({id:a.asin,extension:"mpd",manifest:a.manifest}):b.load({id:a.asin,url:a.url,duration:100});b.play(a.asin);f=a};a.pause=function(){b.pause();e(f)};a.setPosition=function(a){b.seekTo(a)};a.resume=function(){b.resume();d(f)};a.isEMESupported=function(){return!1};return a})):("use strict",l.when("A","dm-maestro-drm-config","dm-logger","ready").register("dm-maestro-player",function(a,b,c){a={};var d={},e,f,g,k;a.isSupported=function(){var a=/android/i.test(navigator.userAgent),
c=/ipad|iphone|ipod/i.test(navigator.userAgent),f=/mobile|webos|blackberry|iemobile|opera mini/i.test(navigator.userAgent);return!(a||c||f)&&b.isSupported()};a.initialize=function(){d=b.getInstantiatedPlayer();try{d.setConfig({drm:b.getDrmConfig()})}catch(a){l.log("Failed to set Maestro drm config: "+a,c.LOG_LEVEL.FATAL,c.ATTRIBUTION_PLAYER_DRM)}};a.setVolume=function(a){d.volume(a)};a.setOnTickCallback=function(a){d.addEventListener("timeupdate",a)};a.setOnPauseCallback=function(a){g=a};a.setOnCompleteCallback=
function(a){d.addEventListener("ended",function(){a(k)})};a.setOnStartPlayingCallback=function(a){e=a};a.setOnPlaybackBegunCallback=function(a){d.addEventListener("started",function(){a(k)})};a.setOnResumeCallback=function(a){f=a};a.setOnErrorCallback=function(a){d.addEventListener("error",function(b,c){a(b,c)})};a.getCurrentTime=function(){return d.getCurrentTime()};a.getBufferedTime=function(){return d.getBufferedTime()};a.getDuration=function(){return d.getDuration()};a.play=function(a){e(a);if("manifest"in
a)try{d.load({id:a.asin,extension:"mpd",manifest:a.manifest})}catch(b){l.log("failed to load track with manifest: "+b,c.LOG_LEVEL.FATAL,c.ATTRIBUTION_PLAYER_DRM)}else try{d.load({id:a.asin,url:a.url,duration:100})}catch(b){l.log("failed to load track with url: "+b,c.LOG_LEVEL.FATAL,c.ATTRIBUTION_PLAYER_DRM)}try{d.play(a.asin)}catch(b){l.log("failed to play track: "+b,c.LOG_LEVEL.FATAL,c.ATTRIBUTION_PLAYER_DRM)}k=a};a.pause=function(){d.pause();g(k)};a.setPosition=function(a){d.seekTo(a)};a.resume=
function(){d.resume();f(k)};a.isEMESupported=function(){return b.canPlayDrm()};a.setCustomerId=function(a){b.customerId=a};a.setDeviceId=function(a){b.deviceId=a};a.setDeviceType=function(a){b.deviceType=a};return a}))})}catch(c){l.log("Error getting isEMESupported: "+c,t.LOG_LEVEL.FATAL,t.ATTRIBUTION_DRM_CONFIG)}else"use strict",l.when("A","ready").register("dm-maestro-player",function(b){b={};var a={},e,g,d,h;b.isSupported=function(){var a=w&&w.Maestro&&w.Maestro.Player,b=/android/i.test(navigator.userAgent),
c=/ipad|iphone|ipod/i.test(navigator.userAgent),d=/mobile|webos|blackberry|iemobile|opera mini/i.test(navigator.userAgent);return!(b||c||d)&&a&&a.isSupported()};b.initialize=function(){a=new (w&&w.Maestro&&w.Maestro.Player)};b.setVolume=function(b){a.volume(b)};b.setOnTickCallback=function(b){a.addEventListener("timeupdate",b)};b.setOnPauseCallback=function(a){d=a};b.setOnCompleteCallback=function(b){a.addEventListener("ended",function(){b(h)})};b.setOnStartPlayingCallback=function(a){e=a};b.setOnPlaybackBegunCallback=
function(b){a.addEventListener("started",function(){b(h)})};b.setOnResumeCallback=function(a){g=a};b.getCurrentTime=function(){return a.getCurrentTime()};b.getBufferedTime=function(){return a.getBufferedTime()};b.getDuration=function(){return a.getDuration()};b.play=function(b){e(b);"manifest"in b?a.load({id:b.asin,extension:"mpd",manifest:b.manifest}):a.load({id:b.asin,url:b.url,duration:100});a.play(b.asin);h=b};b.pause=function(){a.pause();d(h)};b.setPosition=function(b){a.seekTo(b)};b.resume=
function(){a.resume();g(h)};b.isEMESupported=function(){return!1};return b})}});"use strict";l.when("A","ready").register("dm-logger",function(g){return{LOG_LEVEL:{ERROR:"ERROR",WARN:"WARN",FATAL:"FATAL"},ATTRIBUTION_PLAYER_DRM:"MaestroPlayerDRM",ATTRIBUTION_PLAYER_NON_DRM:"MaestroPlayerNonDRM",ATTRIBUTION_DRM_CONFIG:"MaestroDRMConfig",ATTRIBUTION_PLAYER_CONSTANTS:"PlayerConstants",ATTRIBUTION_DMLS_DRM:"DmlsDRM",ATTRIBUTION_DMLS_CONTENT_NOT_FOUND:"DmlsContentNotFound",ATTRIBUTION_DMLS_CONTENT_NOT_ELIGIBLE:"DmlsContentNotEligible",
ATTRIBUTION_DMLS_INTERNAL_ERROR:"DmlsInternalError",ATTRIBUTION_STORAGE_QUOTA_EXCEEDED:"StorageQuotaExceeded",ATTRIBUTION_DMLS_LICENSEPLAYBACKV2:"DmlsLicensePlaybackV2",appendErrorDetails:function(b,e){b===E&&(b={});b.error===E&&(b.error="");e!==E&&""!==e&&(""!==b.error&&(b.error+=" "),500<e.length&&(e=e.substr(0,500)),b.error+=e);return b}}});"use strict";l.when("A","ready").register("dm-csm-counter",function(g){var b={COUNTER_WEBSTORE_DRM_STREAM:"WSDrmStream",COUNTER_WEBSTORE_NON_DRM_MAESTRO_STREAM:"WSNonDrmMaestroStream",
COUNTER_WEBSTORE_NON_DRM_FLASH_STREAM:"WSNonDrmFlashStream",COUNTER_WEBSTORE_DRM_PLAYER:"WSDrmPlayer",COUNTER_WEBSTORE_NON_DRM_MAESTRO_PLAYER:"WSNonDrmMaestroPlayer",COUNTER_WEBSTORE_NON_DRM_FLASH_PLAYER:"WSNonDrmFlashPlayer",incrementCount:function(b){ue.count(b,(ue.count(b)||0)+1)},updateStreamCounter:function(e,g,l){e?b.incrementCount(b.COUNTER_WEBSTORE_DRM_STREAM):g?b.incrementCount(b.COUNTER_WEBSTORE_NON_DRM_MAESTRO_STREAM):l&&b.incrementCount(b.COUNTER_WEBSTORE_NON_DRM_FLASH_STREAM)}};return b});
"use strict";l.when("A","ready").register("dm-rng",function(g){return{u1:function(){return Math.floor(16*(1+Math.random())).toString(16).substring(1)},u4:function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}}});"use strict";l.when("A","ready").register("dm-player-constants",function(g){return{getMarketplaceId:function(){return g.$("#dmusic_tracklist_content").data("market")},getDomain:function(){var b=w.location.hostname;return b.substring(b.lastIndexOf("amazon"))},isFullPlayBackAllowed:function(){var b;
b=(b=g.$("#dmusic_tracklist_header_preview_all span").attr("data-dm-playable"))?g.$.parseJSON(b).streamableIds:"";return(b=""===b?[]:b.match(/([A-Z0-9]{10})/gi))&&1<=b.length?!0:!1}}});"use strict";l.when("A","dm-player-constants","dm-rng","dm-logger","ready").register("dm-dmls-constants",function(g,b,e,l){var v;return{getDmlsEndpointForMusicDomain:function(){if(!v){var e=b.getDomain();v="https://music.{domain}/dmls/".replace("{domain}",e)}return v},appendRequestInterceptorHeaders:function(b){return b=
g.$.extend({},b,{"content-type":"application/json","X-Requested-With":"XMLHttpRequest","Content-Encoding":"amz-1.0","csrf-rnd":w.webStore.appConfig.CSRFTokenConfig.csrf_rnd,"csrf-token":w.webStore.appConfig.CSRFTokenConfig.csrf_token,"csrf-ts":w.webStore.appConfig.CSRFTokenConfig.csrf_ts})},setJqueryAjaxHeaders:function(b){b.setRequestHeader("X-Requested-With","XMLHttpRequest");b.setRequestHeader("Content-Encoding","amz-1.0");b.setRequestHeader("csrf-rnd",w.webStore.appConfig.CSRFTokenConfig.csrf_rnd);
b.setRequestHeader("csrf-token",w.webStore.appConfig.CSRFTokenConfig.csrf_token);b.setRequestHeader("csrf-ts",w.webStore.appConfig.CSRFTokenConfig.csrf_ts)},appendTargetForLicenseForPlaybackV2:function(b){b["X-Amz-Target"]="com.amazon.digitalmusiclocator.DigitalMusicLocatorServiceExternal.getLicenseForPlaybackV2"},setTargetForDashManifestsV2:function(b){b.setRequestHeader("X-Amz-Target","com.amazon.digitalmusiclocator.DigitalMusicLocatorServiceExternal.getDashManifestsV2")},getMusicUserAgent:function(){var b=
webStore&&webStore.tracklist&&webStore.tracklist.asin,b=b?" "+b:"";return"Maestro/1.0 WebStore/1.1 ("+(e.u4()+"-"+e.u4()+"-WebStore-"+e.u4()+"-"+e.u1())+b+")"}}});"use strict";l.when("A","ready").register("dm-browser-properties",function(){return{isChrome:function(){return/chrome/i.test(navigator.userAgent)&&!/edge/i.test(navigator.userAgent)},isFF:function(){return/Firefox/i.test(navigator.userAgent)},isIE:function(){return/msie|Trident\/[0-9.]+/i.test(navigator.userAgent)||/msie\s+10\./i.test(navigator.userAgent)||
/edge/i.test(navigator.userAgent)},isOpera:function(){return/Opera/i.test(navigator.userAgent)},getBrowserVersion:function(){var g=navigator.userAgent,b,e=g.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(e[1]))return b=/\brv[ :]+(\d+)/g.exec(g)||[],b[1]||"";if("Chrome"===e[1]&&(b=g.match(/\b(OPR|Edge)\/(\d+)/),null!=b))return b[2];e=e[2]?[e[1],e[2]]:[navigator.appName,navigator.appVersion,"-?"];null!=(b=g.match(/version\/(\d+)/i))&&e.splice(1,1,b[1]);
return e[1]},getBrowserPlatform:function(){var g=navigator.userAgent,b="Unknown";if(/kindle/i.test(g))b="Kindle";else if(/ipad/i.test(g))b="iPad";else if(/ipod/i.test(g))b="iPod";else if(/iphone/i.test(g))b="iPhone";else if(/blackberry/i.test(g))b="BlackBerry";else if(/playbook/i.test(g))b="PlayBook";else if(/symbian/i.test(g))b="Symbian";else if(/smarttv/i.test(g))b="SmartTV";else if(/webos/i.test(g))b="WebOS";else if(/xoom/i.test(g))b="Xoom";else if(/transformer/i.test(g))b="Transformer";else if(/android mobile/i.test(g))b=
"Android Mobile";else if(/android/i.test(g))b="Android";else if(/windows/i.test(g))b="Windows";else if(/macintosh/i.test(g))b="Mac";else if(/x11/i.test(g))b="X11";else if(/bot/i.test(g)||/spider/i.test(g)||/bingpreview/i.test(g))b="Bot";return b},getBrowserName:function(){var g=/chrome/i.test(navigator.userAgent)&&!/edge/i.test(navigator.userAgent),b=/Firefox/i.test(navigator.userAgent),e=/msie|Trident\/[0-9.]+/i.test(navigator.userAgent),l=/edge/i.test(navigator.userAgent),v=/Opera/i.test(navigator.userAgent);
switch(!0){case g:return"CHROME";case b:return"FIREFOX";case e:return"IE";case l:return"EDGE";case v:return"OPERA"}}}});"use strict";l.when("A","3p-promise","ready").execute(function(g,b){w.Promise||(w.Promise=b)});"use strict";l.when("A","ready").register("dm-network-utils",function(g){return{simpleAjax:function(b,e,l){g.$.ajax({type:"POST",url:b,xhrFields:{withCredentials:!0},cache:!1,dataType:"json",success:function(b){e(b)},error:function(b,e,g){l()}})},ajaxRequest:function(b,e,l,v,q,t,w,c,a){!0===
a?g.$.ajax({type:l,crossDomain:v,url:b,xhrFields:{withCredentials:!0},contentType:!1,beforeSend:t,cache:!1,data:e,success:w,error:c,processData:!1}):g.$.ajax({type:l,crossDomain:v,url:b,xhrFields:{withCredentials:!0},contentType:q,beforeSend:t,cache:!1,data:e,success:w,error:c})}}})});
/* ******** */
(function(g){var h=window.AmazonUIPageJS||window.P,n=h._namespace||h.attributeErrors,b=n?n("DigitalMusicWebsiteAUI",""):h;b.guardFatal?b.guardFatal(g)(b,window):b.execute(function(){g(b,window)})})(function(g,h,n){(function(){g.when("A").register("MtsEvent",function(b){function a(b,a){var d={baseEventVersion:2,specificEventVersion:3,appVersion:"1.0.0"},e;for(e in b)b.hasOwnProperty(e)&&(d[e]=b[e]);d.contentInfo=JSON.stringify(a);return d}return{reportMetrics:function(a,f){var d=(new Date).getTimezoneOffset(),
e=Math.floor(Math.abs(d/60)),p=Math.abs(d)%60;a.deviceTimeZone=(0<d?"-":"+")+(9<e?"":"0")+e+":"+(9<p?"":"0")+p;b.$.ajax({url:"https://"+h.location.host+"/gp/dmusic/utility/metrics-mts.html",dataType:"json",type:"post",data:a,xhrFields:{withCredentials:!0},complete:f})},buildUiClickMTSData:function(b,f){return a({actionName:"uiClick",actionType:b,interactionType:"CLICK",pageType:"details"},[{contentSrc:"client",contentName:f,containerIndex:0}])},buildUiContentViewMTSData:function(b,f,d){return a({actionName:"uiContentView",
emittedOnView:!0},[{contentSrc:"client",contentName:b,containerIndex:0,containerType:f,numItemsAccessible:d}])},buildFlexEventMTSData:function(b){return a({actionName:"flexEvent",flexEventName:b},n)}}})})();"use strict";g.when("A").register("dmusic_amg_ad",function(b){function a(a){var d=a.data.detailPage,e=a.data.buyBox,c=a.data.tracklist,k=b.$("#bbbad");if(!(1>k.length))if(0===k.children().length)b.$.ajax({url:"/gp/dmusic/promotions/AMGAd",data:{},type:"POST",dataType:"html",cache:!1,success:function(a){if(0!==
b.$.trim(a).length){k.html(a);c.hasClass("makeRoomForAMG")||(a=d.width()-(e.outerWidth()+40),c.css("max-width",a.toString()+"px"));a=e.height();e.css("max-height",a.toString()+"px");var f=0;k.children().each(function(){f+=b.$(this).outerHeight(!0)});275>f&&(f=275);a=parseInt(e.offset().top+a+f-(c.offset().top+c.height()),10);0<a?c.attr("style",c.attr("style")+"; margin-bottom: "+a+"px !important"):c.attr("style",c.attr("style")+"; margin-bottom: 0px !important;");k.show()}}});else{c.hasClass("makeRoomForAMG")||
(a=d.width()-(e.outerWidth()+40),c.css("max-width",a.toString()+"px"));a=e.height();e.css("max-height",a.toString()+"px");var l=0;k.children().each(function(){l+=b.$(this).outerHeight(!0)});275>l&&(l=275);a=parseInt(e.offset().top+a+l-(c.offset().top+c.height()),10);0<a?c.attr("style",c.attr("style")+"; margin-bottom: "+a+"px !important"):c.attr("style",c.attr("style")+"; margin-bottom: 0px !important;");k.show()}}function c(c){var d=c.data.detailPage,e=c.data.buyBox,p=c.data.tracklist;d&&e&&p&&(1280<=
d.width()||0<b.$(".makeRoomForAMG").length?a(c):(d=c.data.buyBox,c=c.data.tracklist,b.$("#bbbad").hide(),c.css("max-width",""),c.css("margin-bottom",""),d.css("max-height","")))}return{setupAMGAd:function(){var a=b.$(".DigitalMusicDetailPage"),d=b.$(".DigitalMusicBuyboxColumn");if("object"!==typeof d||0===d.length)d=b.$("#ppd-right");var e=b.$(".tracklistPlayer");if("object"!==typeof e||0===e.length)e=b.$("#dmusic_tracklist_player");"object"===typeof a&&0!==a.length&&"object"===typeof d&&0!==d.length&&
"object"===typeof e&&0!==e.length&&(b.$(h).resize({detailPage:a,buyBox:d,tracklist:e},c),b.$("#dmusic_expander_heading").click(function(){var b={data:{detailPage:a,buyBox:d,tracklist:e}};setTimeout(function(){c(b)})}),c({data:{detailPage:a,buyBox:d,tracklist:e}}))}}});"use strict";g.when("A").execute(function(b){-1!==navigator.userAgent.indexOf("MSIE")&&b.$("html").addClass("a-ie");b.$("#nav-subnav.spacious .nav-arrow").css("visibility","visible");b.$('#nav-subnav.spacious a[href*\x3d"music.amazon"]').attr("target",
"cloudplayer");b.$('#nav-subnav.spacious a[href*\x3d"/gp/dmusic/mp3/player"]').attr("target","cloudplayer")});"use strict";g.when("A","ready").execute(function(b){b.$("#coverArt_feature_div a").click(function(){h.open(this.href,"AmazonHelp","width\x3d700,height\x3d600,resizable\x3d1,scrollbars\x3d1,toolbar\x3d0,status\x3d1").focus();return!1})});"use strict";g.when("A").register("dmusic_download_purchase",function(b){function a(a){var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(c);return b}function c(d,
e,h,k,l,g,m){d&&a(d).join(",");setTimeout(function(){b.$.ajax({url:"/gp/dmusic/modalPurchasing/features/zip-download-fullFillment.html",type:"POST",data:{orderId:l},dataType:"json",success:function(b){if(b&&b.pendingFullFillmentTracks)for(var k in b.pendingFullFillmentTracks)b.pendingFullFillmentTracks.hasOwnProperty(k)&&delete d[b.pendingFullFillmentTracks[k]];b=(new Date).getTime();0===a(d).length?(f("ZipDownloadFulfillmentSuccess"),g()):(b-e)/1E3<h?c(d,e,h,!1,l,g,m):(f("ZipDownloadFulfillmentFailure"),
m())},error:function(){((new Date).getTime()-e)/1E3<h?c(d,e,h,!1,l,g,m):(f("ZipDownloadFulfillmentFailure"),m())}})},k?0:2E3)}function f(a){b.$.ajax({url:"/gp/dmusic/utility/record-metric.html",type:"POST",data:{pt:"DigitalMusicDownload",spt:a,sn:"dmusic",ht:"popUp"},dataType:"json",cache:!1})}return{checkFullFillMent:function(a,b,f,k){var h=a.split(",");a={};for(var g=0;g<h.length;g++)a[h[g]]=!0;h=(new Date).getTime();c(a,h,60,!0,b,f,k)},handleDownloadButtonClick:function(a){a.singleTrack=a.singleTrack?
!0:!1;"string"===typeof a.ASIN&&(a.asins=a.ASIN.match(/\w{10}/g).join());var c=a.cirrusDownload;if("object"===typeof c)a.app=c.APP.STORE,c.processDownload(a);else return a=b.$(a.htmlId),h.location=a.href,!1}}});"use strict";g.when("A").register("dmusic_hqp",function(b){return{showHQP:function(a){var c=b.$("#dmusicHQP");1>c.length||0!==c.children().length||(a={url:"/gp/dmusic/promotions/hqp",data:{ASIN:a.ASIN},type:"POST",dataType:"html",cache:!1,success:function(a){0!==b.$.trim(a).length&&c.html(a)}},
b.$.ajax(a))}}});"use strict";g.when("A").register("dmusic_ilm",function(b){return{showILM:function(a){var c=b.$("#detail-ilm");1>c.length||0!==c.children().length||(a={url:"/gp/dmusic/promotions/detailILM",data:{ASIN:a.ASIN},type:"POST",dataType:"html",cache:!1,success:function(a){0!==b.$.trim(a).length&&c.html(a)}},b.$.ajax(a))}}});"use strict";g.when("A","jQuery","atf").execute(function(b,a){b.on.ready(function(){function c(b,c,d,e,t){a(b).slideToggle(300);a(c).slideToggle(300);a(d).toggleClass("tmmShowPrompt tmmHidePrompt");
a(e).toggleClass("tmmShowPrompt tmmHidePrompt");a(t).toggleClass("rotate")}function f(b){b.position();b.width();a(".swatchElement");b.find(".swatchElement").each(function(){a(this).attr("data-width",a(this).width())});a("#formats").find(".a-row").removeClass("nonJSFormats")}function d(){var b=a("#formats"),c=b.width()-40,d=0;b.find(".swatchElement").each(function(){a(this).is(":visible")&&(d+=a(this).width())});d>c?a(b.find(".swatchElement:visible").get().reverse()).each(function(){var b,t;a(this).find(".format").hasClass("a-button-selected")?
(b=a(this).prev(".swatchElement").width(),t=a(this).prev(".swatchElement").is(":hidden"),a(this).prev(".swatchElement").hide()):(b=a(this).width(),t=a(this).is(":hidden"),a(this).hide());t||(d-=b);return d>c}):d<c&&b.find(".swatchElement").each(function(){if(a(this).is(":hidden"))return a(this).attr("data-width")<=c-d&&a(this).show(),!1})}var e=0,p=0,k;g.when("DPClientLogger").execute(function(a){"undefined"!==typeof a&&(k=new a.ImpressionLogger("dpbxapps","bxapps-atfMarker",!0,!0))});a("#formats \x3e .a-link-expander").click(function(){c("#tmmSwatches",
"#twister","#showMoreFormatsPrompt","#hideMoreFormatsPrompt","#formatsIcon");if(!p){var b=h.ue;b&&b.count&&b.count("mediaMatrixExpanderClicked",1);p=1}k&&a("#twister").is(":visible")&&!e&&(k.logImpression("tmm-show-more-formats-viewed"),e=1)});b.declarative("tmm-see-more-editions-click",["click"],function(d){var e=d.data,f=e.metabindingUrl;if(d.$target.hasClass("a-link-expander")||d.$target.parent().hasClass("a-link-expander")){var e=e.metabindingPlaceHolder,k="#metabinding_row_top_"+e,t="#metabinding_row_bottom_"+
e,g="#editionsSeePrompt_"+e,l="#editionsHidePrompt_"+e,p="#editionsIcon_"+e,q="isAjaxComplete_"+e,n="isAjaxInProgress_"+e;d="#tmmSpinnerDiv_"+e;var w="#tmmErrorDiv_"+e,r=b.state("mediamatrix-state"),e=r["url_"+e].replace(/&amp;/g,"\x26");a("#formats .tmmErrorClass").hide();"1"===r[q]||"1"===r[n]?c(k,t,g,l,p):(b.ajax(e,{method:"get",success:function(){r[q]="1";b.state("mediamatrix-state",r);c(k,t,g,l,p)},indicator:a(d),error:function(){a(w).show();r[n]="0";b.state("mediamatrix-state",r)}}),r[n]="1",
b.state("mediamatrix-state",r))}else"#"!==f&&(h.location=f)});if(0<a("#formats \x3e .a-link-expander").length){var l=h.ue;l&&l.count&&l.count("mediaMatrixExpanderPresent",1)}a("#formats.responsive").each(function(){f(a(this))});var l=b.state("mediamatrixState"),q="false";"undefined"!==typeof l&&"undefined"!==typeof l.swatchWrap&&(q=l.swatchWrap);"true"!==q&&(d(),b.on("resize",d));a("#formats .unselected .format").mouseenter(function(){a(this).find(".a-color-secondary").addClass("a-color-price").removeClass("a-color-secondary")}).mouseleave(function(){a(this).find(".a-color-price").addClass("a-color-secondary").removeClass("a-color-price")});
a("#landingItemRentalLink").attr("href","javascript:document.getElementById('rentBuySection').click();")})});"use strict";g.when("jQuery").register("dmusic_twister_overrides",function(b){function a(a){if(!b(a.currentTarget).hasClass("a-button-selected")){b(".MP3Swatch").toggleClass("a-button-selected");a=b(".MP3Swatch .a-color-price");var f=b(".MP3Swatch .a-color-secondary");a.removeClass("a-color-price").addClass("a-color-secondary");f.removeClass("a-color-secondary").addClass("a-color-price")}}
b(".MP3Swatch").click(function(b){a(b)});return{overrideSwatchClick:a}});(function(){g.when("A","MtsEvent").register("dmusic_mobile_app_banner",function(b,a){function c(){var c;try{e.setItem("test","test"),e.removeItem("test"),c=!0}catch(d){c=!1}return c?(c=e.getItem("dmusic-hide-app-banner"))?2592E6<(new Date).getTime()-c:!0:(b.$(".olpMp3Slot").removeAttr("hidden"),c=a.buildFlexEventMTSData("noBrowserSupport"),a.reportMetrics(c),!1)}function f(){h.open("https://play.google.com/store/apps/details?id\x3dcom.amazon.mp3",
"_self")}var d=b.$(".mobile-app-banner");if(d.length){var e=h.localStorage;if(c()){d.removeAttr("hidden");var g=a.buildUiContentViewMTSData("webStoreAppBanner","BANNER",3);a.reportMetrics(g);d.find(".close").click(function(){d.hide();e.setItem("dmusic-hide-app-banner",(new Date).getTime());var b=a.buildUiClickMTSData("closeWebStoreBanner","webStoreAppBanner");a.reportMetrics(b)});d.find(".app-store-badge").click(function(){if("Android"===b.$(this).attr("id")){var c=a.buildUiClickMTSData("selectGooglePlayBadge",
"webStoreAppBanner");a.reportMetrics(c,f)}else c=a.buildUiClickMTSData("selectAppleStoreBadge","webStoreAppBanner"),a.reportMetrics(c)});d.find(".message").click(function(){var b=a.buildUiClickMTSData("selectAppLink","webStoreAppBanner");a.reportMetrics(b)})}else b.$(".olpMp3Slot").removeAttr("hidden")}})})();"use strict";g.when("A").register("dmusic_prsw",function(b){return{showPRSW:function(a){var c=b.$("#prereleaseStreamerContainer");1>c.length||0!==c.children().length||(a={url:"/gp/dmusic/promotions/prereleaseStreamingWidget",
data:{ASIN:a.ASIN},type:"POST",dataType:"html",cache:!1,success:function(a){0!==b.$.trim(a).length&&c.html(a)}},b.$.ajax(a))}}});"use strict";g.when("A","ready").execute(function(b){function a(a){a.isPrimeMember&&(c.hide(),f.removeClass("aok-hidden"),clearInterval(d))}var c=b.$("#RobinTYPPleaseWaitText"),f=b.$("#RobinTYPContinueButton"),d="";0<c.length&&(d=setInterval(function(){b.get("/gp/dmusic/purchase/utility/prime_membership_status.html/",{success:a})},1E3))});"use strict";g.when("jQuery","a-modal",
"dmusic_webstore_purchase_modal","dmusic_webstore_music_cart").register("dmusic_webstore_bbop_popup",function(b,a,c,f){function d(c){l("date");c={activate:"onclick",closeButton:!1,dataStrategy:"ajax",name:"BBOPPopup",header:c.popupHeader,url:c.url,width:660};e();var d=a.create("\x3cspan\x3e",c);b(document).delegate("#BBOPPopupCustomClose","click",function(b){d.unlock(20);a.remove(d)});d.lock(20).show();n=!0}function e(){var b=a.get("BBOPPopup");b&&(b.unlock(20),a.remove(b))}function g(a){if("buyButton"===
a.clickedButtonType)if(c.supportPurchaseModal())c.drivePurchase(a);else{var d=a.isAlbum?"dm_ws_bb_buy":"dm_ws_sp_bb_buy";a=b.param({initial:1,tryInPlace:1,csrfToken:a.csrfToken.toString(),"asin.0":a.ASIN.toString()});h.location="/gp/dmusic/order/handle-buy-box.html/ref\x3d"+d+"?"+a}else f.addToCart(a)}function k(a){!a.customerBBOPEligible||n?g(a):b.ajax({url:"https://"+h.location.host+"/gp/dmusic/bbopPopup/utility/bbop-popup-controller.html",data:{ASIN:a.ASIN||a.asin,clickedButtonType:a.clickedButtonType,
buttonLocationType:a.buttonLocationType,CSRF:a.csrfToken?a.csrfToken.toString():"",isAlbum:a.isAlbum?1:0},type:"post",dataType:"json",cache:!1,success:function(b){b.canShowBBOP?d(b.options):g(a)},error:function(b){g(a)}})}function l(a,c){b.ajax({url:"https://"+h.location.host+"/gp/dmusic/bbopPopup/utility/update-EMBU.html",timeout:2E3,data:{updateType:a,ref:"checkbox"===a?"dm_ws_bbop_embu_cb_dsta_t":"dm_ws_bbop_embu_date"},type:"get",cache:!1,success:function(){"checkbox"===a&&c?h.location=c:""},
error:function(){"checkbox"===a&&c?h.location=c:""}})}function q(a){v?l("checkbox",a):a&&(h.location=a);e()}var m={},n=!1,v=!1,u;m.buyButtonHandler=function(a){b("#"+a.htmlId.toString()).click(function(){k(a);return!1})};m.addToCartHandler=function(a){u=a;k(u)};m.checkboxHandler=function(a){v=a};m.checkoutHandler=function(a){q(a)};m.noThanksHandler=function(a){q();u.refMarker=a.noThanksRef;u.isSignedIn?f.addToCart(u):h.location=a.url};m.startTrialHandler=function(a){q(a)};return m});(function(){g.when("A",
"MtsEvent").register("dmusic_artist_station_link",function(b,a){b=b.$(".stationLink");if(b.length){var c=b.attr("id");if(c.length){var f="";"stationT1"===c?f="stationLinkT1":"stationT2"===c?f="stationLinkT2":"stationT1Upsell"===c?f="stationLinkT1Upsell":"stationT2Upsell"===c&&(f="stationLinkT2Upsell");b.click(function(){var b=a.buildUiClickMTSData(f+"Click","artistStationLink");a.reportMetrics(b)});b=a.buildUiContentViewMTSData(f,"LINK",1);a.reportMetrics(b)}}})})()});
/* ******** */
