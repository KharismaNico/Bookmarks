!function(r){var n={};function i(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return r[t].call(e.exports,e,e.exports,i),e.l=!0,e.exports}i.m=r,i.c=n,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=92)}([function(t,e,r){"use strict";t.exports=r(39)},function(t,e,r){t.exports=function(){"use strict";var i,o,a;function t(t,e){if(!i){i=e}else if(!o){o=e}else{var r="var sharedChunk = {}; ("+i+")(sharedChunk); ("+o+")(sharedChunk);";var n={};i(n);a=e(n);a.workerUrl=window.URL.createObjectURL(new Blob([r],{type:"text/javascript"}))}}return t(["exports"],function(t){"use strict";function e(t,e){return t(e={exports:{}},e.exports),e.exports}var o=r;function r(t,e,r,n){this.cx=3*t,this.bx=3*(r-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(n-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=n,this.p2x=r,this.p2y=n}r.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},r.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},r.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},r.prototype.solveCurveX=function(t,e){var r,n,i,o,a;for(void 0===e&&(e=1e-6),i=t,a=0;a<8;a++){if(o=this.sampleCurveX(i)-t,Math.abs(o)<e)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i-=o/s}if((i=t)<(r=0))return r;if(i>(n=1))return n;for(;r<n;){if(o=this.sampleCurveX(i),Math.abs(o-t)<e)return i;o<t?r=i:n=i,i=.5*(n-r)+r}return i},r.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var st=n;function n(t,e){this.x=t,this.y=e}function h(t,e){if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!h(t[r],e[r]))return!1;return!0}if("object"!=typeof t||null===t||null===e)return t===e;if("object"!=typeof e)return!1;if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var n in t)if(!h(t[n],e[n]))return!1;return!0}function i(t,e,r,n){var i=new o(t,e,r,n);return function(t){return i.solve(t)}}n.prototype={clone:function(){return new n(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,r=t.y-this.y;return e*e+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,r=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=r,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),r=Math.sin(t),n=e*this.x-r*this.y,i=r*this.x+e*this.y;return this.x=n,this.y=i,this},_rotateAround:function(t,e){var r=Math.cos(t),n=Math.sin(t),i=e.x+r*(this.x-e.x)-n*(this.y-e.y),o=e.y+n*(this.x-e.x)+r*(this.y-e.y);return this.x=i,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},n.convert=function(t){return t instanceof n?t:Array.isArray(t)?new n(t[0],t[1]):t};var a=i(.25,.1,.25,1);function u(t,e,r){return Math.min(r,Math.max(e,t))}function s(t,e,r){var n=r-e,i=((t-e)%n+n)%n+e;return i===e?r:i}function d(t){for(var e=[],r=arguments.length-1;0<r--;)e[r]=arguments[r+1];for(var n=0,i=e;n<i.length;n+=1){var o=i[n];for(var a in o)t[a]=o[a]}return t}var l=1;function c(){return l++}function p(){return function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function f(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function m(t,e){t.forEach(function(t){e[t]&&(e[t]=e[t].bind(e))})}function y(t,e){return-1!==t.indexOf(e,t.length-e.length)}function g(t,e,r){var n={};for(var i in t)n[i]=e.call(r||this,t[i],i,t);return n}function v(t,e,r){var n={};for(var i in t)e.call(r||this,t[i],i,t)&&(n[i]=t[i]);return n}function _(t){return Array.isArray(t)?t.map(_):"object"==typeof t&&t?g(t,_):t}var b={};function lt(t){b[t]||("undefined"!=typeof console&&console.warn(t),b[t]=!0)}function x(t,e,r){return(r.y-t.y)*(e.x-t.x)>(e.y-t.y)*(r.x-t.x)}function w(t){for(var e=0,r=0,n=t.length,i=n-1,o=void 0,a=void 0;r<n;i=r++)o=t[r],e+=((a=t[i]).x-o.x)*(o.y+a.y);return e}function E(t){try{var e=self[t];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch(t){return!1}}var S,k,C,T=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),A=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,P=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,I={now:T,frame:function(t){var e=A(t);return{cancel:function(){return P(e)}}},getImageData:function(t){var e=self.document.createElement("canvas"),r=e.getContext("2d");if(!r)throw new Error("failed to create canvas 2d context");return e.width=t.width,e.height=t.height,r.drawImage(t,0,0,t.width,t.height),r.getImageData(0,0,t.width,t.height)},resolveURL:function(t){return(S=S||self.document.createElement("a")).href=t,S.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio}},M={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},z={supported:!1,testSupport:function(t){!L&&C&&(O?D(t):k=t)}},L=!1,O=!1;function D(t){var e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,C),t.isContextLost())return;z.supported=!0}catch(t){}t.deleteTexture(e),L=!0}self.document&&((C=self.document.createElement("img")).onload=function(){k&&D(k),O=!(k=null)},C.onerror=function(){L=!0,k=null},C.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var R="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes";function F(t,e){var r=G(M.API_URL);if(t.protocol=r.protocol,t.authority=r.authority,"/"!==r.path&&(t.path=""+r.path+t.path),!M.REQUIRE_ACCESS_TOKEN)return W(t);if(!(e=e||M.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+R);if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+R);return t.params.push("access_token="+e),W(t)}function B(t){return 0===t.indexOf("mapbox:")}var j=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function N(t){return j.test(t)}function U(t){var e=G(t);if(!e.path.match(/(^\/v4\/)/)||!e.path.match(q))return t;var r="mapbox://tiles/";r+=e.path.replace("/v4/","");var n=e.params.filter(function(t){return!t.match(/^access_token=/)});return n.length&&(r+="?"+n.join("&")),r}var V=/(\.(png|jpg)\d*)(?=$)/,q=/\.[\w]+$/,Z=/^(\w+):\/\/([^\/?]*)(\/[^?]+)?\??(.+)?/;function G(t){var e=t.match(Z);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function W(t){var e=t.params.length?"?"+t.params.join("&"):"";return t.protocol+"://"+t.authority+t.path+e}function H(t){if(!t)return null;var e,r=t.split(".");if(!r||3!==r.length)return null;try{return JSON.parse((e=r[1],decodeURIComponent(self.atob(e).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""))))}catch(t){return null}}function X(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}X.prototype.getStorageKey=function(t){var e,r=H(M.ACCESS_TOKEN),n="";return n=r&&r.u?(e=r.u,self.btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(t,e){return String.fromCharCode(Number("0x"+e))}))):M.ACCESS_TOKEN||"",t?"mapbox.eventData."+t+":"+n:"mapbox.eventData:"+n},X.prototype.fetchEventData=function(){var t=E("localStorage"),e=this.getStorageKey(),r=this.getStorageKey("uuid");if(t)try{var n=self.localStorage.getItem(e);n&&(this.eventData=JSON.parse(n));var i=self.localStorage.getItem(r);i&&(this.anonId=i)}catch(t){lt("Unable to read from LocalStorage")}},X.prototype.saveEventData=function(){var t=E("localStorage"),e=this.getStorageKey(),r=this.getStorageKey("uuid");if(t)try{self.localStorage.setItem(r,this.anonId),1<=Object.keys(this.eventData).length&&self.localStorage.setItem(e,JSON.stringify(this.eventData))}catch(t){lt("Unable to write to LocalStorage")}},X.prototype.processRequests=function(){},X.prototype.postEvent=function(t,e,r){var n=this;if(M.EVENTS_URL){var i=G(M.EVENTS_URL);i.params.push("access_token="+(M.ACCESS_TOKEN||""));var o={event:this.type,created:new Date(t).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"0.54.0",userId:this.anonId},a=e?d(o,e):o,s={url:W(i),headers:{"Content-Type":"text/plain"},body:JSON.stringify([a])};this.pendingRequest=yt(s,function(t){n.pendingRequest=null,r(t),n.saveEventData(),n.processRequests()})}},X.prototype.queueRequest=function(t){this.queue.push(t),this.processRequests()};var $,K,J=((K=X)&&(it.__proto__=K),((it.prototype=Object.create(K&&K.prototype)).constructor=it).prototype.postMapLoadEvent=function(t,e){M.EVENTS_URL&&M.ACCESS_TOKEN&&Array.isArray(t)&&t.some(function(t){return B(t)||N(t)})&&this.queueRequest({id:e,timestamp:Date.now()})},it.prototype.processRequests=function(){var e=this;if(!this.pendingRequest&&0!==this.queue.length){var t=this.queue.shift(),r=t.id,n=t.timestamp;r&&this.success[r]||(this.anonId||this.fetchEventData(),f(this.anonId)||(this.anonId=p()),this.postEvent(n,{},function(t){t||r&&(e.success[r]=!0)}))}},it),Y=(($=X)&&(nt.__proto__=$),((nt.prototype=Object.create($&&$.prototype)).constructor=nt).prototype.postTurnstileEvent=function(t){M.EVENTS_URL&&M.ACCESS_TOKEN&&Array.isArray(t)&&t.some(function(t){return B(t)||N(t)})&&this.queueRequest(Date.now())},nt.prototype.processRequests=function(){var e=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var t=H(M.ACCESS_TOKEN),r=t?t.u:M.ACCESS_TOKEN,n=r!==this.eventData.tokenU;f(this.anonId)||(this.anonId=p(),n=!0);var i=this.queue.shift();if(this.eventData.lastSuccess){var o=new Date(this.eventData.lastSuccess),a=new Date(i),s=(i-this.eventData.lastSuccess)/864e5;n=n||1<=s||s<-1||o.getDate()!==a.getDate()}else n=!0;if(!n)return this.processRequests();this.postEvent(i,{"enabled.telemetry":!1},function(t){t||(e.eventData.lastSuccess=i,e.eventData.tokenU=r)})}},new nt),Q=Y.postTurnstileEvent.bind(Y),tt=new J,et=tt.postMapLoadEvent.bind(tt),rt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};function nt(){$.call(this,"appUserTurnstile")}function it(){K.call(this,"map.load"),this.success={}}"function"==typeof Object.freeze&&Object.freeze(rt);var ot,at=((ot=Error)&&(ut.__proto__=ot),((ut.prototype=Object.create(ot&&ot.prototype)).constructor=ut).prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},ut);function ut(t,e,r){401===e&&N(r)&&(t+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),ot.call(this,t),this.status=e,this.url=r,this.name=this.constructor.name,this.message=t}function ct(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function pt(t,e){if(!/^file:/.test(t.url)){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return r=t,n=e,i=new self.AbortController,o=new self.Request(r.url,{method:r.method||"GET",body:r.body,credentials:r.credentials,headers:r.headers,referrer:mt(),signal:i.signal}),"json"===r.type&&o.headers.set("Accept","application/json"),self.fetch(o).then(function(e){e.ok?e[r.type||"text"]().then(function(t){n(null,t,e.headers.get("Cache-Control"),e.headers.get("Expires"))}).catch(function(t){return n(new Error(t.message))}):n(new at(e.statusText,e.status,r.url))}).catch(function(t){20!==t.code&&n(new Error(t.message))}),{cancel:function(){return i.abort()}};if(ct()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e)}var r,n,i,o;return function(e,r){var n=new self.XMLHttpRequest;for(var t in n.open(e.method||"GET",e.url,!0),"arrayBuffer"===e.type&&(n.responseType="arraybuffer"),e.headers)n.setRequestHeader(t,e.headers[t]);return"json"===e.type&&n.setRequestHeader("Accept","application/json"),n.withCredentials="include"===e.credentials,n.onerror=function(){r(new Error(n.statusText))},n.onload=function(){if((200<=n.status&&n.status<300||0===n.status)&&null!==n.response){var t=n.response;if("json"===e.type)try{t=JSON.parse(n.response)}catch(t){return r(t)}r(null,t,n.getResponseHeader("Cache-Control"),n.getResponseHeader("Expires"))}else r(new at(n.statusText,n.status,e.url))},n.send(e.body),{cancel:function(){return n.abort()}}}(t,e)}function ht(t,e){return pt(d(t,{type:"arrayBuffer"}),e)}var ft,dt,mt=ct()?function(){return self.worker&&self.worker.referrer}:function(){var t=self.location.origin;if(t&&"null"!==t&&"file://"!==t)return t+self.location.pathname},yt=function(t,e){return pt(d(t,{method:"POST"}),e)};ft=[],dt=0;var gt=function(t,s){if(dt>=M.MAX_PARALLEL_IMAGE_REQUESTS){var e={requestParameters:t,callback:s,cancelled:!1,cancel:function(){this.cancelled=!0}};return ft.push(e),e}dt++;function l(){if(!n)for(n=!0,dt--;ft.length&&dt<M.MAX_PARALLEL_IMAGE_REQUESTS;){var t=ft.shift(),e=t.requestParameters,r=t.callback;t.cancelled||(t.cancel=gt(e,r).cancel)}}var n=!1,r=ht(t,function(t,e,r,n){if(l(),t)s(t);else if(e){var i=new self.Image,o=self.URL||self.webkitURL;i.onload=function(){s(null,i),o.revokeObjectURL(i.src)},i.onerror=function(){return s(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var a=new self.Blob([new Uint8Array(e)],{type:"image/png"});i.cacheControl=r,i.expires=n,i.src=e.byteLength?o.createObjectURL(a):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}});return{cancel:function(){r.cancel(),l()}}};function vt(t,e,r){r[t]&&-1!==r[t].indexOf(e)||(r[t]=r[t]||[],r[t].push(e))}function _t(t,e,r){if(r&&r[t]){var n=r[t].indexOf(e);-1!==n&&r[t].splice(n,1)}}function bt(t,e){void 0===e&&(e={}),d(this,e),this.type=t}function xt(){}var wt,Et=((wt=bt)&&(St.__proto__=wt),(St.prototype=Object.create(wt&&wt.prototype)).constructor=St);function St(t,e){void 0===e&&(e={}),wt.call(this,"error",d({error:t},e))}xt.prototype.on=function(t,e){return this._listeners=this._listeners||{},vt(t,e,this._listeners),this},xt.prototype.off=function(t,e){return _t(t,e,this._listeners),_t(t,e,this._oneTimeListeners),this},xt.prototype.once=function(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},vt(t,e,this._oneTimeListeners),this},xt.prototype.fire=function(t,e){"string"==typeof t&&(t=new bt(t,e||{}));var r=t.type;if(this.listens(r)){for(var n=0,i=(t.target=this)._listeners&&this._listeners[r]?this._listeners[r].slice():[];n<i.length;n+=1)i[n].call(this,t);for(var o=0,a=this._oneTimeListeners&&this._oneTimeListeners[r]?this._oneTimeListeners[r].slice():[];o<a.length;o+=1){var s=a[o];_t(r,s,this._oneTimeListeners),s.call(this,t)}var l=this._eventedParent;l&&(d(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),l.fire(t))}else t instanceof Et&&console.error(t.error);return this},xt.prototype.listens=function(t){return this._listeners&&this._listeners[t]&&0<this._listeners[t].length||this._oneTimeListeners&&this._oneTimeListeners[t]&&0<this._oneTimeListeners[t].length||this._eventedParent&&this._eventedParent.listens(t)};var kt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!(xt.prototype.setEventedParent=function(t,e){return this._eventedParent=t,this._eventedParentData=e,this})},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"string",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:[{"!":"text-offset"}],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:[{"!":"text-anchor"},{"!":"text-offset"},{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",requires:["text-field"],values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:22,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}}},Ct=function(t,e,r,n){this.message=(t?t+": ":"")+r,n&&(this.identifier=n),null!=e&&e.__line__&&(this.line=e.__line__)};function Tt(t){var e=t.key,r=t.value;return r?[new Ct(e,r,"constants have been deprecated as of v8")]:[]}function At(t){for(var e=[],r=arguments.length-1;0<r--;)e[r]=arguments[r+1];for(var n=0,i=e;n<i.length;n+=1){var o=i[n];for(var a in o)t[a]=o[a]}return t}function Pt(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function It(t){return Array.isArray(t)?t.map(It):Pt(t)}function Mt(t,e){void 0===e&&(e=[]),this.parent=t,this.bindings={};for(var r=0,n=e;r<n.length;r+=1){var i=n[r],o=i[0],a=i[1];this.bindings[o]=a}}var zt,Lt=((zt=Error)&&(Ot.__proto__=zt),(Ot.prototype=Object.create(zt&&zt.prototype)).constructor=Ot);function Ot(t,e){zt.call(this,e),this.message=e,this.key=t}Mt.prototype.concat=function(t){return new Mt(this,t)},Mt.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")},Mt.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)};var Dt={kind:"null"},Rt={kind:"number"},Ft={kind:"string"},Bt={kind:"boolean"},jt={kind:"color"},Nt={kind:"object"},Ut={kind:"value"},Vt={kind:"collator"},qt={kind:"formatted"};function Zt(t,e){return{kind:"array",itemType:t,N:e}}function Gt(t){if("array"!==t.kind)return t.kind;var e=Gt(t.itemType);return"number"==typeof t.N?"array<"+e+", "+t.N+">":"value"===t.itemType.kind?"array":"array<"+e+">"}var Wt=[Dt,Rt,Ft,Bt,jt,qt,Nt,Zt(Ut)];function Ht(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!Ht(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(var r=0,n=Wt;r<n.length;r+=1)if(!Ht(n[r],e))return null}return"Expected "+Gt(t)+" but found "+Gt(e)+" instead."}var Xt=e(function(t,e){var f={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function d(t){return(t=Math.round(t))<0?0:255<t?255:t}function r(t){return t<0?0:1<t?1:t}function m(t){return"%"===t[t.length-1]?d(parseFloat(t)/100*255):d(parseInt(t))}function y(t){return"%"===t[t.length-1]?r(parseFloat(t)/100):r(parseFloat(t))}function g(t,e,r){return r<0?r+=1:1<r&&(r-=1),6*r<1?t+(e-t)*r*6:2*r<1?e:3*r<2?t+(e-t)*(2/3-r)*6:t}try{e.parseCSSColor=function(t){var e,r=t.replace(/ /g,"").toLowerCase();if(r in f)return f[r].slice();if("#"===r[0])return 4===r.length?0<=(e=parseInt(r.substr(1),16))&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===r.length&&0<=(e=parseInt(r.substr(1),16))&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var n=r.indexOf("("),i=r.indexOf(")");if(-1!==n&&i+1===r.length){var o=r.substr(0,n),a=r.substr(n+1,i-(n+1)).split(","),s=1;switch(o){case"rgba":if(4!==a.length)return null;s=y(a.pop());case"rgb":return 3!==a.length?null:[m(a[0]),m(a[1]),m(a[2]),s];case"hsla":if(4!==a.length)return null;s=y(a.pop());case"hsl":if(3!==a.length)return null;var l=(parseFloat(a[0])%360+360)%360/360,u=y(a[1]),c=y(a[2]),p=c<=.5?c*(u+1):c+u-c*u,h=2*c-p;return[d(255*g(h,p,l+1/3)),d(255*g(h,p,l)),d(255*g(h,p,l-1/3)),s];default:return null}}return null}}catch(t){}}).parseCSSColor,$t=function(t,e,r,n){void 0===n&&(n=1),this.r=t,this.g=e,this.b=r,this.a=n};$t.parse=function(t){if(t){if(t instanceof $t)return t;if("string"==typeof t){var e=Xt(t);if(e)return new $t(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3])}}},$t.prototype.toString=function(){var t=this.toArray(),e=t[0],r=t[1],n=t[2],i=t[3];return"rgba("+Math.round(e)+","+Math.round(r)+","+Math.round(n)+","+i+")"},$t.prototype.toArray=function(){var t=this.r,e=this.g,r=this.b,n=this.a;return 0===n?[0,0,0,0]:[255*t/n,255*e/n,255*r/n,n]},$t.black=new $t(0,0,0,1),$t.white=new $t(1,1,1,1),$t.transparent=new $t(0,0,0,0),$t.red=new $t(1,0,0,1);var Kt=function(t,e,r){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Kt.prototype.compare=function(t,e){return this.collator.compare(t,e)},Kt.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};function Jt(t,e,r){this.text=t,this.scale=e,this.fontStack=r}var Yt=function(t){this.sections=t};function Qt(t,e,r,n){return"number"==typeof t&&0<=t&&t<=255&&"number"==typeof e&&0<=e&&e<=255&&"number"==typeof r&&0<=r&&r<=255?void 0===n||"number"==typeof n&&0<=n&&n<=1?null:"Invalid rgba value ["+[t,e,r,n].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof n?[t,e,r,n]:[t,e,r]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function te(t){if(null===t)return Dt;if("string"==typeof t)return Ft;if("boolean"==typeof t)return Bt;if("number"==typeof t)return Rt;if(t instanceof $t)return jt;if(t instanceof Kt)return Vt;if(t instanceof Yt)return qt;if(Array.isArray(t)){for(var e,r=t.length,n=0,i=t;n<i.length;n+=1){var o=te(i[n]);if(e){if(e===o)continue;e=Ut;break}e=o}return Zt(e||Ut,r)}return Nt}function ee(t){var e=typeof t;return null===t?"":"string"==e||"number"==e||"boolean"==e?String(t):t instanceof $t||t instanceof Yt?t.toString():JSON.stringify(t)}Yt.fromString=function(t){return new Yt([new Jt(t,null,null)])},Yt.prototype.toString=function(){return this.sections.map(function(t){return t.text}).join("")},Yt.prototype.serialize=function(){for(var t=["format"],e=0,r=this.sections;e<r.length;e+=1){var n=r[e];t.push(n.text);var i={};n.fontStack&&(i["text-font"]=["literal",n.fontStack.split(",")]),n.scale&&(i["font-scale"]=n.scale),t.push(i)}return t};function re(t,e){this.type=t,this.value=e}re.parse=function(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!function t(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof $t)return!0;if(e instanceof Kt)return!0;if(e instanceof Yt)return!0;if(Array.isArray(e)){for(var r=0,n=e;r<n.length;r+=1)if(!t(n[r]))return!1;return!0}if("object"!=typeof e)return!1;for(var i in e)if(!t(e[i]))return!1;return!0}(t[1]))return e.error("invalid value");var r=t[1],n=te(r),i=e.expectedType;return"array"!==n.kind||0!==n.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(n=i),new re(n,r)},re.prototype.evaluate=function(){return this.value},re.prototype.eachChild=function(){},re.prototype.possibleOutputs=function(){return[this.value]},re.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof $t?["rgba"].concat(this.value.toArray()):this.value instanceof Yt?this.value.serialize():this.value};function ne(t){this.name="ExpressionEvaluationError",this.message=t}ne.prototype.toJSON=function(){return this.message};function ie(t,e){this.type=t,this.args=e}var oe={string:Ft,number:Rt,boolean:Bt,object:Nt};ie.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var r,n=1,i=t[0];if("array"===i){var o,a;if(2<t.length){var s=t[1];if("string"!=typeof s||!(s in oe)||"object"===s)return e.error('The item type argument of "array" must be one of string, number, boolean',1);o=oe[s],n++}else o=Ut;if(3<t.length){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);a=t[2],n++}r=Zt(o,a)}else r=oe[i];for(var l=[];n<t.length;n++){var u=e.parse(t[n],n,Ut);if(!u)return null;l.push(u)}return new ie(r,l)},ie.prototype.evaluate=function(t){for(var e=0;e<this.args.length;e++){var r=this.args[e].evaluate(t);if(!Ht(this.type,te(r)))return r;if(e===this.args.length-1)throw new ne("Expected value to be of type "+Gt(this.type)+", but found "+Gt(te(r))+" instead.")}return null},ie.prototype.eachChild=function(t){this.args.forEach(t)},ie.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}))},ie.prototype.serialize=function(){var t=this.type,e=[t.kind];if("array"===t.kind){var r=t.itemType;if("string"===r.kind||"number"===r.kind||"boolean"===r.kind){e.push(r.kind);var n=t.N;("number"==typeof n||1<this.args.length)&&e.push(n)}}return e.concat(this.args.map(function(t){return t.serialize()}))};function ae(t){this.type=qt,this.sections=t}ae.parse=function(t,e){if(t.length<3)return e.error("Expected at least two arguments.");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");for(var r=[],n=1;n<t.length-1;n+=2){var i=e.parse(t[n],1,Ut);if(!i)return null;var o=i.type.kind;if("string"!==o&&"value"!==o&&"null"!==o)return e.error("Formatted text type must be 'string', 'value', or 'null'.");var a=t[n+1];if("object"!=typeof a||Array.isArray(a))return e.error("Format options argument must be an object.");var s=null;if(a["font-scale"]&&!(s=e.parse(a["font-scale"],1,Rt)))return null;var l=null;if(a["text-font"]&&!(l=e.parse(a["text-font"],1,Zt(Ft))))return null;r.push({text:i,scale:s,font:l})}return new ae(r)},ae.prototype.evaluate=function(e){return new Yt(this.sections.map(function(t){return new Jt(ee(t.text.evaluate(e)),t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null)}))},ae.prototype.eachChild=function(t){for(var e=0,r=this.sections;e<r.length;e+=1){var n=r[e];t(n.text),n.scale&&t(n.scale),n.font&&t(n.font)}},ae.prototype.possibleOutputs=function(){return[void 0]},ae.prototype.serialize=function(){for(var t=["format"],e=0,r=this.sections;e<r.length;e+=1){var n=r[e];t.push(n.text.serialize());var i={};n.scale&&(i["font-scale"]=n.scale.serialize()),n.font&&(i["text-font"]=n.font.serialize()),t.push(i)}return t};function se(t,e){this.type=t,this.args=e}var le={"to-boolean":Bt,"to-color":jt,"to-number":Rt,"to-string":Ft};se.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var r=t[0];if(("to-boolean"===r||"to-string"===r)&&2!==t.length)return e.error("Expected one argument.");for(var n=le[r],i=[],o=1;o<t.length;o++){var a=e.parse(t[o],o,Ut);if(!a)return null;i.push(a)}return new se(n,i)},se.prototype.evaluate=function(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){for(var e,r,n=0,i=this.args;n<i.length;n+=1){if(r=null,(e=i[n].evaluate(t))instanceof $t)return e;if("string"==typeof e){var o=t.parseColor(e);if(o)return o}else if(Array.isArray(e)&&!(r=e.length<3||4<e.length?"Invalid rbga value "+JSON.stringify(e)+": expected an array containing either three or four numeric values.":Qt(e[0],e[1],e[2],e[3])))return new $t(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new ne(r||"Could not parse color from value '"+("string"==typeof e?e:String(JSON.stringify(e)))+"'")}if("number"!==this.type.kind)return"formatted"===this.type.kind?Yt.fromString(ee(this.args[0].evaluate(t))):ee(this.args[0].evaluate(t));for(var a=null,s=0,l=this.args;s<l.length;s+=1){if(null===(a=l[s].evaluate(t)))return 0;var u=Number(a);if(!isNaN(u))return u}throw new ne("Could not convert "+JSON.stringify(a)+" to number.")},se.prototype.eachChild=function(t){this.args.forEach(t)},se.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}))},se.prototype.serialize=function(){if("formatted"===this.type.kind)return new ae([{text:this.args[0],scale:null,font:null}]).serialize();var e=["to-"+this.type.kind];return this.eachChild(function(t){e.push(t.serialize())}),e};function ue(){this.globals=null,this.feature=null,this.featureState=null,this._parseColorCache={}}var ce=["Unknown","Point","LineString","Polygon"];ue.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},ue.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?ce[this.feature.type]:this.feature.type:null},ue.prototype.properties=function(){return this.feature&&this.feature.properties||{}},ue.prototype.parseColor=function(t){var e=this._parseColorCache[t];return e=e||(this._parseColorCache[t]=$t.parse(t))};var pe=function(t,e,r,n){this.name=t,this.type=e,this._evaluate=r,this.args=n};pe.prototype.evaluate=function(t){return this._evaluate(t,this.args)},pe.prototype.eachChild=function(t){this.args.forEach(t)},pe.prototype.possibleOutputs=function(){return[void 0]},pe.prototype.serialize=function(){return[this.name].concat(this.args.map(function(t){return t.serialize()}))},pe.parse=function(r,t){var e,n=r[0],i=pe.definitions[n];if(!i)return t.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0);for(var o=Array.isArray(i)?i[0]:i.type,a=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,s=a.filter(function(t){var e=t[0];return!Array.isArray(e)||e.length===r.length-1}),l=null,u=0,c=s;u<c.length;u+=1){var p=c[u],h=p[0],f=p[1];l=new ge(t.registry,t.path,null,t.scope);for(var d=[],m=!1,y=1;y<r.length;y++){var g=r[y],v=Array.isArray(h)?h[y-1]:h.type,_=l.parse(g,1+d.length,v);if(!_){m=!0;break}d.push(_)}if(!m)if(Array.isArray(h)&&h.length!==d.length)l.error("Expected "+h.length+" arguments, but found "+d.length+" instead.");else{for(var b=0;b<d.length;b++){var x=Array.isArray(h)?h[b]:h.type,w=d[b];l.concat(b+1).checkSubtype(x,w.type)}if(0===l.errors.length)return new pe(n,o,f,d)}}if(1===s.length)(e=t.errors).push.apply(e,l.errors);else{for(var E=(s.length?s:a).map(function(t){var e;return e=t[0],Array.isArray(e)?"("+e.map(Gt).join(", ")+")":"("+Gt(e.type)+"...)"}).join(" | "),S=[],k=1;k<r.length;k++){var C=t.parse(r[k],1+S.length);if(!C)return null;S.push(Gt(C.type))}t.error("Expected arguments of type "+E+", but found ("+S.join(", ")+") instead.")}return null},pe.register=function(t,e){for(var r in pe.definitions=e)t[r]=pe};function he(t,e,r){this.type=Vt,this.locale=r,this.caseSensitive=t,this.diacriticSensitive=e}function fe(t){if(t instanceof pe){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}var e=!0;return t.eachChild(function(t){e&&!fe(t)&&(e=!1)}),e}function de(t){if(t instanceof pe&&"feature-state"===t.name)return!1;var e=!0;return t.eachChild(function(t){e&&!de(t)&&(e=!1)}),e}function me(t,e){if(t instanceof pe&&0<=e.indexOf(t.name))return!1;var r=!0;return t.eachChild(function(t){r&&!me(t,e)&&(r=!1)}),r}he.parse=function(t,e){if(2!==t.length)return e.error("Expected one argument.");var r=t[1];if("object"!=typeof r||Array.isArray(r))return e.error("Collator options argument must be an object.");var n=e.parse(void 0!==r["case-sensitive"]&&r["case-sensitive"],1,Bt);if(!n)return null;var i=e.parse(void 0!==r["diacritic-sensitive"]&&r["diacritic-sensitive"],1,Bt);if(!i)return null;var o=null;return r.locale&&!(o=e.parse(r.locale,1,Ft))?null:new he(n,i,o)},he.prototype.evaluate=function(t){return new Kt(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)},he.prototype.eachChild=function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)},he.prototype.possibleOutputs=function(){return[void 0]},he.prototype.serialize=function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]};function ye(t,e){this.type=e.type,this.name=t,this.boundExpression=e}ye.parse=function(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");var r=t[1];return e.scope.has(r)?new ye(r,e.scope.get(r)):e.error('Unknown variable "'+r+'". Make sure "'+r+'" has been bound in an enclosing "let" expression before using it.',1)},ye.prototype.evaluate=function(t){return this.boundExpression.evaluate(t)},ye.prototype.eachChild=function(){},ye.prototype.possibleOutputs=function(){return[void 0]},ye.prototype.serialize=function(){return["var",this.name]};var ge=function(t,e,r,n,i){void 0===e&&(e=[]),void 0===n&&(n=new Mt),void 0===i&&(i=[]),this.registry=t,this.path=e,this.key=e.map(function(t){return"["+t+"]"}).join(""),this.scope=n,this.errors=i,this.expectedType=r};function ve(t,e){for(var r,n,i=0,o=t.length-1,a=0;i<=o;){if(r=t[a=Math.floor((i+o)/2)],n=t[a+1],e===r||r<e&&e<n)return a;if(r<e)i=a+1;else{if(!(e<r))throw new ne("Input is not a number.");o=a-1}}return Math.max(a-1,0)}ge.prototype.parse=function(t,e,r,n,i){return void 0===i&&(i={}),e?this.concat(e,r,n)._parse(t,i):this._parse(t,i)},ge.prototype._parse=function(t,e){function r(t,e,r){return"assert"===r?new ie(e,[t]):"coerce"===r?new se(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var n=t[0];if("string"!=typeof n)return this.error("Expression name must be a string, but found "+typeof n+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var i=this.registry[n];if(i){var o=i.parse(t,this);if(!o)return null;if(this.expectedType){var a=this.expectedType,s=o.type;if("string"!==a.kind&&"number"!==a.kind&&"boolean"!==a.kind&&"object"!==a.kind&&"array"!==a.kind||"value"!==s.kind)if("color"!==a.kind&&"formatted"!==a.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(a,s))return null}else o=r(o,a,e.typeAnnotation||"coerce");else o=r(o,a,e.typeAnnotation||"assert")}if(!(o instanceof re)&&function e(t){if(t instanceof ye)return e(t.boundExpression);if(t instanceof pe&&"error"===t.name)return!1;if(t instanceof he)return!1;var r=t instanceof se||t instanceof ie,n=!0;return t.eachChild(function(t){n=r?n&&e(t):n&&t instanceof re}),!!n&&(fe(t)&&me(t,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]))}(o)){var l=new ue;try{o=new re(o.type,o.evaluate(l))}catch(t){return this.error(t.message),null}}return o}return this.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0)}return void 0===t?this.error("'undefined' value invalid. Use null instead."):"object"==typeof t?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof t+" instead.")},ge.prototype.concat=function(t,e,r){var n="number"==typeof t?this.path.concat(t):this.path,i=r?this.scope.concat(r):this.scope;return new ge(this.registry,n,e||null,i,this.errors)},ge.prototype.error=function(t){for(var e=[],r=arguments.length-1;0<r--;)e[r]=arguments[r+1];var n=""+this.key+e.map(function(t){return"["+t+"]"}).join("");this.errors.push(new Lt(n,t))},ge.prototype.checkSubtype=function(t,e){var r=Ht(t,e);return r&&this.error(r),r};var _e=function(t,e,r){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(var n=0,i=r;n<i.length;n+=1){var o=i[n],a=o[0],s=o[1];this.labels.push(a),this.outputs.push(s)}};_e.parse=function(t,e){var r=t[1],n=t.slice(2);if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(r=e.parse(r,1,Rt)))return null;var i=[],o=null;e.expectedType&&"value"!==e.expectedType.kind&&(o=e.expectedType),n.unshift(-1/0);for(var a=0;a<n.length;a+=2){var s=n[a],l=n[a+1],u=a+1,c=a+2;if("number"!=typeof s)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',u);if(i.length&&i[i.length-1][0]>=s)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',u);var p=e.parse(l,c,o);if(!p)return null;o=o||p.type,i.push([s,p])}return new _e(o,r,i)},_e.prototype.evaluate=function(t){var e=this.labels,r=this.outputs;if(1===e.length)return r[0].evaluate(t);var n=this.input.evaluate(t);if(n<=e[0])return r[0].evaluate(t);var i=e.length;return n>=e[i-1]?r[i-1].evaluate(t):r[ve(e,n)].evaluate(t)},_e.prototype.eachChild=function(t){t(this.input);for(var e=0,r=this.outputs;e<r.length;e+=1)t(r[e])},_e.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()}))},_e.prototype.serialize=function(){for(var t=["step",this.input.serialize()],e=0;e<this.labels.length;e++)0<e&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t};var be=xe;function xe(t,e,r,n){this.cx=3*t,this.bx=3*(r-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(n-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=n,this.p2x=r,this.p2y=n}function we(t,e,r){return t*(1-r)+e*r}xe.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},xe.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},xe.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},xe.prototype.solveCurveX=function(t,e){var r,n,i,o,a;for(void 0===e&&(e=1e-6),i=t,a=0;a<8;a++){if(o=this.sampleCurveX(i)-t,Math.abs(o)<e)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i-=o/s}if((i=t)<(r=0))return r;if(i>(n=1))return n;for(;r<n;){if(o=this.sampleCurveX(i),Math.abs(o-t)<e)return i;o<t?r=i:n=i,i=.5*(n-r)+r}return i},xe.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var Ee=Object.freeze({number:we,color:function(t,e,r){return new $t(we(t.r,e.r,r),we(t.g,e.g,r),we(t.b,e.b,r),we(t.a,e.a,r))},array:function(t,r,n){return t.map(function(t,e){return we(t,r[e],n)})}}),Se=4/29,ke=6/29,Ce=3*ke*ke,Te=ke*ke*ke,Ae=Math.PI/180,Pe=180/Math.PI;function Ie(t){return Te<t?Math.pow(t,1/3):t/Ce+Se}function Me(t){return ke<t?t*t*t:Ce*(t-Se)}function ze(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Le(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Oe(t){var e=Le(t.r),r=Le(t.g),n=Le(t.b),i=Ie((.4124564*e+.3575761*r+.1804375*n)/.95047),o=Ie((.2126729*e+.7151522*r+.072175*n)/1);return{l:116*o-16,a:500*(i-o),b:200*(o-Ie((.0193339*e+.119192*r+.9503041*n)/1.08883)),alpha:t.a}}function De(t){var e=(t.l+16)/116,r=isNaN(t.a)?e:e+t.a/500,n=isNaN(t.b)?e:e-t.b/200;return e=1*Me(e),r=.95047*Me(r),n=1.08883*Me(n),new $t(ze(3.2404542*r-1.5371385*e-.4985314*n),ze(-.969266*r+1.8760108*e+.041556*n),ze(.0556434*r-.2040259*e+1.0572252*n),t.alpha)}var Re={forward:Oe,reverse:De,interpolate:function(t,e,r){return{l:we(t.l,e.l,r),a:we(t.a,e.a,r),b:we(t.b,e.b,r),alpha:we(t.alpha,e.alpha,r)}}},Fe={forward:function(t){var e=Oe(t),r=e.l,n=e.a,i=e.b,o=Math.atan2(i,n)*Pe;return{h:o<0?360+o:o,c:Math.sqrt(n*n+i*i),l:r,alpha:t.a}},reverse:function(t){var e=t.h*Ae,r=t.c;return De({l:t.l,a:Math.cos(e)*r,b:Math.sin(e)*r,alpha:t.alpha})},interpolate:function(t,e,r){return{h:function(t,e,r){var n=e-t;return t+r*(180<n||n<-180?n-360*Math.round(n/360):n)}(t.h,e.h,r),c:we(t.c,e.c,r),l:we(t.l,e.l,r),alpha:we(t.alpha,e.alpha,r)}}},Be=Object.freeze({lab:Re,hcl:Fe}),je=function(t,e,r,n,i){this.type=t,this.operator=e,this.interpolation=r,this.input=n,this.labels=[],this.outputs=[];for(var o=0,a=i;o<a.length;o+=1){var s=a[o],l=s[0],u=s[1];this.labels.push(l),this.outputs.push(u)}};function Ne(t,e,r,n){var i=n-r,o=t-r;return 0==i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}je.interpolationFactor=function(t,e,r,n){var i=0;if("exponential"===t.name)i=Ne(e,t.base,r,n);else if("linear"===t.name)i=Ne(e,1,r,n);else if("cubic-bezier"===t.name){var o=t.controlPoints;i=new be(o[0],o[1],o[2],o[3]).solve(Ne(e,1,r,n))}return i},je.parse=function(t,e){var r=t[0],n=t[1],i=t[2],o=t.slice(3);if(!Array.isArray(n)||0===n.length)return e.error("Expected an interpolation type expression.",1);if("linear"===n[0])n={name:"linear"};else if("exponential"===n[0]){var a=n[1];if("number"!=typeof a)return e.error("Exponential interpolation requires a numeric base.",1,1);n={name:"exponential",base:a}}else{if("cubic-bezier"!==n[0])return e.error("Unknown interpolation type "+String(n[0]),1,0);var s=n.slice(1);if(4!==s.length||s.some(function(t){return"number"!=typeof t||t<0||1<t}))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);n={name:"cubic-bezier",controlPoints:s}}if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(i=e.parse(i,2,Rt)))return null;var l=[],u=null;"interpolate-hcl"===r||"interpolate-lab"===r?u=jt:e.expectedType&&"value"!==e.expectedType.kind&&(u=e.expectedType);for(var c=0;c<o.length;c+=2){var p=o[c],h=o[c+1],f=c+3,d=c+4;if("number"!=typeof p)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',f);if(l.length&&l[l.length-1][0]>=p)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',f);var m=e.parse(h,d,u);if(!m)return null;u=u||m.type,l.push([p,m])}return"number"===u.kind||"color"===u.kind||"array"===u.kind&&"number"===u.itemType.kind&&"number"==typeof u.N?new je(u,r,n,i,l):e.error("Type "+Gt(u)+" is not interpolatable.")},je.prototype.evaluate=function(t){var e=this.labels,r=this.outputs;if(1===e.length)return r[0].evaluate(t);var n=this.input.evaluate(t);if(n<=e[0])return r[0].evaluate(t);var i=e.length;if(n>=e[i-1])return r[i-1].evaluate(t);var o=ve(e,n),a=e[o],s=e[o+1],l=je.interpolationFactor(this.interpolation,n,a,s),u=r[o].evaluate(t),c=r[o+1].evaluate(t);return"interpolate"===this.operator?Ee[this.type.kind.toLowerCase()](u,c,l):"interpolate-hcl"===this.operator?Fe.reverse(Fe.interpolate(Fe.forward(u),Fe.forward(c),l)):Re.reverse(Re.interpolate(Re.forward(u),Re.forward(c),l))},je.prototype.eachChild=function(t){t(this.input);for(var e=0,r=this.outputs;e<r.length;e+=1)t(r[e])},je.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()}))},je.prototype.serialize=function(){var t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var e=[this.operator,t,this.input.serialize()],r=0;r<this.labels.length;r++)e.push(this.labels[r],this.outputs[r].serialize());return e};var Ue=function(t,e){this.type=t,this.args=e};Ue.parse=function(t,e){if(t.length<2)return e.error("Expectected at least one argument.");var r=null,n=e.expectedType;n&&"value"!==n.kind&&(r=n);for(var i=[],o=0,a=t.slice(1);o<a.length;o+=1){var s=a[o],l=e.parse(s,1+i.length,r,void 0,{typeAnnotation:"omit"});if(!l)return null;r=r||l.type,i.push(l)}var u=n&&i.some(function(t){return Ht(n,t.type)});return new Ue(u?Ut:r,i)},Ue.prototype.evaluate=function(t){for(var e=null,r=0,n=this.args;r<n.length&&null===(e=n[r].evaluate(t));r+=1);return e},Ue.prototype.eachChild=function(t){this.args.forEach(t)},Ue.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}))},Ue.prototype.serialize=function(){var e=["coalesce"];return this.eachChild(function(t){e.push(t.serialize())}),e};var Ve=function(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e};Ve.prototype.evaluate=function(t){return this.result.evaluate(t)},Ve.prototype.eachChild=function(t){for(var e=0,r=this.bindings;e<r.length;e+=1)t(r[e][1]);t(this.result)},Ve.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var r=[],n=1;n<t.length-1;n+=2){var i=t[n];if("string"!=typeof i)return e.error("Expected string, but found "+typeof i+" instead.",n);if(/[^a-zA-Z0-9_]/.test(i))return e.error("Variable names must contain only alphanumeric characters or '_'.",n);var o=e.parse(t[n+1],n+1);if(!o)return null;r.push([i,o])}var a=e.parse(t[t.length-1],t.length-1,e.expectedType,r);return a?new Ve(r,a):null},Ve.prototype.possibleOutputs=function(){return this.result.possibleOutputs()},Ve.prototype.serialize=function(){for(var t=["let"],e=0,r=this.bindings;e<r.length;e+=1){var n=r[e],i=n[0],o=n[1];t.push(i,o.serialize())}return t.push(this.result.serialize()),t};function qe(t,e,r){this.type=t,this.index=e,this.input=r}qe.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var r=e.parse(t[1],1,Rt),n=e.parse(t[2],2,Zt(e.expectedType||Ut));if(!r||!n)return null;var i=n.type;return new qe(i.itemType,r,n)},qe.prototype.evaluate=function(t){var e=this.index.evaluate(t),r=this.input.evaluate(t);if(e<0)throw new ne("Array index out of bounds: "+e+" < 0.");if(e>=r.length)throw new ne("Array index out of bounds: "+e+" > "+(r.length-1)+".");if(e!==Math.floor(e))throw new ne("Array index must be an integer, but found "+e+" instead.");return r[e]},qe.prototype.eachChild=function(t){t(this.index),t(this.input)},qe.prototype.possibleOutputs=function(){return[void 0]},qe.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};function Ze(t,e,r,n,i,o){this.inputType=t,this.type=e,this.input=r,this.cases=n,this.outputs=i,this.otherwise=o}Ze.parse=function(t,e){if(t.length<5)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!=1)return e.error("Expected an even number of arguments.");var r,n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);for(var i={},o=[],a=2;a<t.length-1;a+=2){var s=t[a],l=t[a+1];Array.isArray(s)||(s=[s]);var u=e.concat(a);if(0===s.length)return u.error("Expected at least one branch label.");for(var c=0,p=s;c<p.length;c+=1){var h=p[c];if("number"!=typeof h&&"string"!=typeof h)return u.error("Branch labels must be numbers or strings.");if("number"==typeof h&&Math.abs(h)>Number.MAX_SAFE_INTEGER)return u.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof h&&Math.floor(h)!==h)return u.error("Numeric branch labels must be integer values.");if(r){if(u.checkSubtype(r,te(h)))return null}else r=te(h);if(void 0!==i[String(h)])return u.error("Branch labels must be unique.");i[String(h)]=o.length}var f=e.parse(l,a,n);if(!f)return null;n=n||f.type,o.push(f)}var d=e.parse(t[1],1,Ut);if(!d)return null;var m=e.parse(t[t.length-1],t.length-1,n);return m?"value"!==d.type.kind&&e.concat(1).checkSubtype(r,d.type)?null:new Ze(r,n,d,i,o,m):null},Ze.prototype.evaluate=function(t){var e=this.input.evaluate(t);return(te(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)},Ze.prototype.eachChild=function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)},Ze.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()})).concat(this.otherwise.possibleOutputs())},Ze.prototype.serialize=function(){for(var e=this,t=["match",this.input.serialize()],r=[],n={},i=0,o=Object.keys(this.cases).sort();i<o.length;i+=1){var a=o[i];void 0===(p=n[this.cases[a]])?(n[this.cases[a]]=r.length,r.push([this.cases[a],[a]])):r[p][1].push(a)}for(var s=function(t){return"number"===e.inputType.kind?Number(t):t},l=0,u=r;l<u.length;l+=1){var c=u[l],p=c[0],h=c[1];1===h.length?t.push(s(h[0])):t.push(h.map(s)),t.push(this.outputs[outputIndex$1].serialize())}return t.push(this.otherwise.serialize()),t};function Ge(t,e,r){this.type=t,this.branches=e,this.otherwise=r}function We(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function He(t,e,r,n){return 0===n.compare(e,r)}function Xe(s,l,u){var c="=="!==s&&"!="!==s;return a.parse=function(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");var r=t[0],n=e.parse(t[1],1,Ut);if(!n)return null;if(!We(r,n.type))return e.concat(1).error('"'+r+"\" comparisons are not supported for type '"+Gt(n.type)+"'.");var i=e.parse(t[2],2,Ut);if(!i)return null;if(!We(r,i.type))return e.concat(2).error('"'+r+"\" comparisons are not supported for type '"+Gt(i.type)+"'.");if(n.type.kind!==i.type.kind&&"value"!==n.type.kind&&"value"!==i.type.kind)return e.error("Cannot compare types '"+Gt(n.type)+"' and '"+Gt(i.type)+"'.");c&&("value"===n.type.kind&&"value"!==i.type.kind?n=new ie(i.type,[n]):"value"!==n.type.kind&&"value"===i.type.kind&&(i=new ie(n.type,[i])));var o=null;if(4===t.length){if("string"!==n.type.kind&&"string"!==i.type.kind&&"value"!==n.type.kind&&"value"!==i.type.kind)return e.error("Cannot use collator to compare non-string types.");if(!(o=e.parse(t[3],3,Vt)))return null}return new a(n,i,o)},a.prototype.evaluate=function(t){var e=this.lhs.evaluate(t),r=this.rhs.evaluate(t);if(c&&this.hasUntypedArgument){var n=te(e),i=te(r);if(n.kind!==i.kind||"string"!==n.kind&&"number"!==n.kind)throw new ne('Expected arguments for "'+s+'" to be (string, string) or (number, number), but found ('+n.kind+", "+i.kind+") instead.")}if(this.collator&&!c&&this.hasUntypedArgument){var o=te(e),a=te(r);if("string"!==o.kind||"string"!==a.kind)return l(t,e,r)}return this.collator?u(t,e,r,this.collator.evaluate(t)):l(t,e,r)},a.prototype.eachChild=function(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)},a.prototype.possibleOutputs=function(){return[!0,!1]},a.prototype.serialize=function(){var e=[s];return this.eachChild(function(t){e.push(t.serialize())}),e},a;function a(t,e,r){this.type=Bt,this.lhs=t,this.rhs=e,this.collator=r,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}}Ge.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!=0)return e.error("Expected an odd number of arguments.");var r;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);for(var n=[],i=1;i<t.length-1;i+=2){var o=e.parse(t[i],i,Bt);if(!o)return null;var a=e.parse(t[i+1],i+1,r);if(!a)return null;n.push([o,a]),r=r||a.type}var s=e.parse(t[t.length-1],t.length-1,r);return s?new Ge(r,n,s):null},Ge.prototype.evaluate=function(t){for(var e=0,r=this.branches;e<r.length;e+=1){var n=r[e],i=n[0],o=n[1];if(i.evaluate(t))return o.evaluate(t)}return this.otherwise.evaluate(t)},Ge.prototype.eachChild=function(t){for(var e=0,r=this.branches;e<r.length;e+=1){var n=r[e],i=n[0],o=n[1];t(i),t(o)}t(this.otherwise)},Ge.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.branches.map(function(t){return t[0],t[1].possibleOutputs()})).concat(this.otherwise.possibleOutputs())},Ge.prototype.serialize=function(){var e=["case"];return this.eachChild(function(t){e.push(t.serialize())}),e};function $e(t,e,r,n,i){this.type=Ft,this.number=t,this.locale=e,this.currency=r,this.minFractionDigits=n,this.maxFractionDigits=i}var Ke=Xe("==",function(t,e,r){return e===r},He),Je=Xe("!=",function(t,e,r){return e!==r},function(t,e,r,n){return!He(0,e,r,n)}),Ye=Xe("<",function(t,e,r){return e<r},function(t,e,r,n){return n.compare(e,r)<0}),Qe=Xe(">",function(t,e,r){return r<e},function(t,e,r,n){return 0<n.compare(e,r)}),tr=Xe("<=",function(t,e,r){return e<=r},function(t,e,r,n){return n.compare(e,r)<=0}),er=Xe(">=",function(t,e,r){return r<=e},function(t,e,r,n){return 0<=n.compare(e,r)});$e.parse=function(t,e){if(3!==t.length)return e.error("Expected two arguments.");var r=e.parse(t[1],1,Rt);if(!r)return null;var n=t[2];if("object"!=typeof n||Array.isArray(n))return e.error("NumberFormat options argument must be an object.");var i=null;if(n.locale&&!(i=e.parse(n.locale,1,Ft)))return null;var o=null;if(n.currency&&!(o=e.parse(n.currency,1,Ft)))return null;var a=null;if(n["min-fraction-digits"]&&!(a=e.parse(n["min-fraction-digits"],1,Rt)))return null;var s=null;return n["max-fraction-digits"]&&!(s=e.parse(n["max-fraction-digits"],1,Rt))?null:new $e(r,i,o,a,s)},$e.prototype.evaluate=function(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))},$e.prototype.eachChild=function(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)},$e.prototype.possibleOutputs=function(){return[void 0]},$e.prototype.serialize=function(){var t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]};function rr(t){this.type=Rt,this.input=t}rr.parse=function(t,e){if(2!==t.length)return e.error("Expected 1 argument, but found "+(t.length-1)+" instead.");var r=e.parse(t[1],1);return r?"array"!==r.type.kind&&"string"!==r.type.kind&&"value"!==r.type.kind?e.error("Expected argument of type string or array, but found "+Gt(r.type)+" instead."):new rr(r):null},rr.prototype.evaluate=function(t){var e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new ne("Expected value to be of type string or array, but found "+Gt(te(e))+" instead.")},rr.prototype.eachChild=function(t){t(this.input)},rr.prototype.possibleOutputs=function(){return[void 0]},rr.prototype.serialize=function(){var e=["length"];return this.eachChild(function(t){e.push(t.serialize())}),e};var nr={"==":Ke,"!=":Je,">":Qe,"<":Ye,">=":er,"<=":tr,array:ie,at:qe,boolean:ie,case:Ge,coalesce:Ue,collator:he,format:ae,interpolate:je,"interpolate-hcl":je,"interpolate-lab":je,length:rr,let:Ve,literal:re,match:Ze,number:ie,"number-format":$e,object:ie,step:_e,string:ie,"to-boolean":se,"to-color":se,"to-number":se,"to-string":se,var:ye};function ir(t,e){var r=e[0],n=e[1],i=e[2],o=e[3];r=r.evaluate(t),n=n.evaluate(t),i=i.evaluate(t);var a=o?o.evaluate(t):1,s=Qt(r,n,i,a);if(s)throw new ne(s);return new $t(r/255*a,n/255*a,i/255*a,a)}function or(t,e){return t in e}function ar(t,e){var r=e[t];return void 0===r?null:r}function sr(t){return{type:t}}function lr(t){return{result:"success",value:t}}function ur(t){return{result:"error",value:t}}function cr(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function pr(t){return!!t.expression&&-1<t.expression.parameters.indexOf("zoom")}function hr(t){return!!t.expression&&t.expression.interpolated}function fr(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function dr(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function mr(t){return t}function yr(t,e,r){return void 0!==t?t:void 0!==e?e:void 0!==r?r:void 0}function gr(t,e,r,n,i){return yr(typeof r===i?n[r]:void 0,t.default,e.default)}function vr(t,e,r){if("number"!==fr(r))return yr(t.default,e.default);var n=t.stops.length;if(1===n)return t.stops[0][1];if(r<=t.stops[0][0])return t.stops[0][1];if(r>=t.stops[n-1][0])return t.stops[n-1][1];var i=xr(t.stops,r);return t.stops[i][1]}function _r(t,e,r){var n=void 0!==t.base?t.base:1;if("number"!==fr(r))return yr(t.default,e.default);var i=t.stops.length;if(1===i)return t.stops[0][1];if(r<=t.stops[0][0])return t.stops[0][1];if(r>=t.stops[i-1][0])return t.stops[i-1][1];var o,a,s,l,u,c=xr(t.stops,r),p=(o=r,a=n,s=t.stops[c][0],l=t.stops[c+1][0]-s,u=o-s,0==l?0:1===a?u/l:(Math.pow(a,u)-1)/(Math.pow(a,l)-1)),h=t.stops[c][1],f=t.stops[c+1][1],d=Ee[e.type]||mr;if(t.colorSpace&&"rgb"!==t.colorSpace){var m=Be[t.colorSpace];d=function(t,e){return m.reverse(m.interpolate(m.forward(t),m.forward(e),p))}}return"function"==typeof h.evaluate?{evaluate:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var r=h.evaluate.apply(void 0,t),n=f.evaluate.apply(void 0,t);if(void 0!==r&&void 0!==n)return d(r,n,p)}}:d(h,f,p)}function br(t,e,r){return"color"===e.type?r=$t.parse(r):"formatted"===e.type?r=Yt.fromString(r.toString()):fr(r)===e.type||"enum"===e.type&&e.values[r]||(r=void 0),yr(r,t.default,e.default)}function xr(t,e){for(var r,n,i=0,o=t.length-1,a=0;i<=o;){if(r=t[a=Math.floor((i+o)/2)][0],n=t[a+1][0],e===r||r<e&&e<n)return a;r<e?i=a+1:e<r&&(o=a-1)}return Math.max(a-1,0)}pe.register(nr,{error:[{kind:"error"},[Ft],function(t,e){var r=e[0];throw new ne(r.evaluate(t))}],typeof:[Ft,[Ut],function(t,e){return Gt(te(e[0].evaluate(t)))}],"to-rgba":[Zt(Rt,4),[jt],function(t,e){return e[0].evaluate(t).toArray()}],rgb:[jt,[Rt,Rt,Rt],ir],rgba:[jt,[Rt,Rt,Rt,Rt],ir],has:{type:Bt,overloads:[[[Ft],function(t,e){return or(e[0].evaluate(t),t.properties())}],[[Ft,Nt],function(t,e){var r=e[0],n=e[1];return or(r.evaluate(t),n.evaluate(t))}]]},get:{type:Ut,overloads:[[[Ft],function(t,e){return ar(e[0].evaluate(t),t.properties())}],[[Ft,Nt],function(t,e){var r=e[0],n=e[1];return ar(r.evaluate(t),n.evaluate(t))}]]},"feature-state":[Ut,[Ft],function(t,e){return ar(e[0].evaluate(t),t.featureState||{})}],properties:[Nt,[],function(t){return t.properties()}],"geometry-type":[Ft,[],function(t){return t.geometryType()}],id:[Ut,[],function(t){return t.id()}],zoom:[Rt,[],function(t){return t.globals.zoom}],"heatmap-density":[Rt,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[Rt,[],function(t){return t.globals.lineProgress||0}],accumulated:[Ut,[],function(t){return void 0===t.globals.accumulated?null:t.globals.accumulated}],"+":[Rt,sr(Rt),function(t,e){for(var r=0,n=0,i=e;n<i.length;n+=1)r+=i[n].evaluate(t);return r}],"*":[Rt,sr(Rt),function(t,e){for(var r=1,n=0,i=e;n<i.length;n+=1)r*=i[n].evaluate(t);return r}],"-":{type:Rt,overloads:[[[Rt,Rt],function(t,e){var r=e[0],n=e[1];return r.evaluate(t)-n.evaluate(t)}],[[Rt],function(t,e){return-e[0].evaluate(t)}]]},"/":[Rt,[Rt,Rt],function(t,e){var r=e[0],n=e[1];return r.evaluate(t)/n.evaluate(t)}],"%":[Rt,[Rt,Rt],function(t,e){var r=e[0],n=e[1];return r.evaluate(t)%n.evaluate(t)}],ln2:[Rt,[],function(){return Math.LN2}],pi:[Rt,[],function(){return Math.PI}],e:[Rt,[],function(){return Math.E}],"^":[Rt,[Rt,Rt],function(t,e){var r=e[0],n=e[1];return Math.pow(r.evaluate(t),n.evaluate(t))}],sqrt:[Rt,[Rt],function(t,e){var r=e[0];return Math.sqrt(r.evaluate(t))}],log10:[Rt,[Rt],function(t,e){var r=e[0];return Math.log(r.evaluate(t))/Math.LN10}],ln:[Rt,[Rt],function(t,e){var r=e[0];return Math.log(r.evaluate(t))}],log2:[Rt,[Rt],function(t,e){var r=e[0];return Math.log(r.evaluate(t))/Math.LN2}],sin:[Rt,[Rt],function(t,e){var r=e[0];return Math.sin(r.evaluate(t))}],cos:[Rt,[Rt],function(t,e){var r=e[0];return Math.cos(r.evaluate(t))}],tan:[Rt,[Rt],function(t,e){var r=e[0];return Math.tan(r.evaluate(t))}],asin:[Rt,[Rt],function(t,e){var r=e[0];return Math.asin(r.evaluate(t))}],acos:[Rt,[Rt],function(t,e){var r=e[0];return Math.acos(r.evaluate(t))}],atan:[Rt,[Rt],function(t,e){var r=e[0];return Math.atan(r.evaluate(t))}],min:[Rt,sr(Rt),function(e,t){return Math.min.apply(Math,t.map(function(t){return t.evaluate(e)}))}],max:[Rt,sr(Rt),function(e,t){return Math.max.apply(Math,t.map(function(t){return t.evaluate(e)}))}],abs:[Rt,[Rt],function(t,e){var r=e[0];return Math.abs(r.evaluate(t))}],round:[Rt,[Rt],function(t,e){var r=e[0].evaluate(t);return r<0?-Math.round(-r):Math.round(r)}],floor:[Rt,[Rt],function(t,e){var r=e[0];return Math.floor(r.evaluate(t))}],ceil:[Rt,[Rt],function(t,e){var r=e[0];return Math.ceil(r.evaluate(t))}],"filter-==":[Bt,[Ft,Ut],function(t,e){var r=e[0],n=e[1];return t.properties()[r.value]===n.value}],"filter-id-==":[Bt,[Ut],function(t,e){var r=e[0];return t.id()===r.value}],"filter-type-==":[Bt,[Ft],function(t,e){var r=e[0];return t.geometryType()===r.value}],"filter-<":[Bt,[Ft,Ut],function(t,e){var r=e[0],n=e[1],i=t.properties()[r.value],o=n.value;return typeof i==typeof o&&i<o}],"filter-id-<":[Bt,[Ut],function(t,e){var r=e[0],n=t.id(),i=r.value;return typeof n==typeof i&&n<i}],"filter->":[Bt,[Ft,Ut],function(t,e){var r=e[0],n=e[1],i=t.properties()[r.value],o=n.value;return typeof i==typeof o&&o<i}],"filter-id->":[Bt,[Ut],function(t,e){var r=e[0],n=t.id(),i=r.value;return typeof n==typeof i&&i<n}],"filter-<=":[Bt,[Ft,Ut],function(t,e){var r=e[0],n=e[1],i=t.properties()[r.value],o=n.value;return typeof i==typeof o&&i<=o}],"filter-id-<=":[Bt,[Ut],function(t,e){var r=e[0],n=t.id(),i=r.value;return typeof n==typeof i&&n<=i}],"filter->=":[Bt,[Ft,Ut],function(t,e){var r=e[0],n=e[1],i=t.properties()[r.value],o=n.value;return typeof i==typeof o&&o<=i}],"filter-id->=":[Bt,[Ut],function(t,e){var r=e[0],n=t.id(),i=r.value;return typeof n==typeof i&&i<=n}],"filter-has":[Bt,[Ut],function(t,e){return e[0].value in t.properties()}],"filter-has-id":[Bt,[],function(t){return null!==t.id()}],"filter-type-in":[Bt,[Zt(Ft)],function(t,e){return 0<=e[0].value.indexOf(t.geometryType())}],"filter-id-in":[Bt,[Zt(Ut)],function(t,e){return 0<=e[0].value.indexOf(t.id())}],"filter-in-small":[Bt,[Ft,Zt(Ut)],function(t,e){var r=e[0];return 0<=e[1].value.indexOf(t.properties()[r.value])}],"filter-in-large":[Bt,[Ft,Zt(Ut)],function(t,e){var r=e[0],n=e[1];return function(t,e,r,n){for(;r<=n;){var i=r+n>>1;if(e[i]===t)return!0;e[i]>t?n=i-1:r=1+i}return!1}(t.properties()[r.value],n.value,0,n.value.length-1)}],all:{type:Bt,overloads:[[[Bt,Bt],function(t,e){var r=e[0],n=e[1];return r.evaluate(t)&&n.evaluate(t)}],[sr(Bt),function(t,e){for(var r=0,n=e;r<n.length;r+=1)if(!n[r].evaluate(t))return!1;return!0}]]},any:{type:Bt,overloads:[[[Bt,Bt],function(t,e){var r=e[0],n=e[1];return r.evaluate(t)||n.evaluate(t)}],[sr(Bt),function(t,e){for(var r=0,n=e;r<n.length;r+=1)if(n[r].evaluate(t))return!0;return!1}]]},"!":[Bt,[Bt],function(t,e){return!e[0].evaluate(t)}],"is-supported-script":[Bt,[Ft],function(t,e){var r=e[0],n=t.globals&&t.globals.isSupportedScript;return!n||n(r.evaluate(t))}],upcase:[Ft,[Ft],function(t,e){return e[0].evaluate(t).toUpperCase()}],downcase:[Ft,[Ft],function(t,e){return e[0].evaluate(t).toLowerCase()}],concat:[Ft,sr(Ut),function(e,t){return t.map(function(t){return ee(t.evaluate(e))}).join("")}],"resolved-locale":[Ft,[Vt],function(t,e){return e[0].evaluate(t).resolvedLocale()}]});var wr=function(t,e){var r;this.expression=t,this._warningHistory={},this._evaluator=new ue,this._defaultValue=e?"color"===(r=e).type&&dr(r.default)?new $t(0,0,0,0):"color"===r.type?$t.parse(r.default)||null:void 0===r.default?null:r.default:null,this._enumValues=e&&"enum"===e.type?e.values:null};function Er(t){return Array.isArray(t)&&0<t.length&&"string"==typeof t[0]&&t[0]in nr}function Sr(t,e){var r,n,i=new ge(nr,[],e?(n={color:jt,string:Ft,number:Rt,enum:Ft,boolean:Bt,formatted:qt},"array"===(r=e).type?Zt(n[r.value]||Ut,r.length):n[r.type]):void 0),o=i.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return o?lr(new wr(o,e)):ur(i.errors)}wr.prototype.evaluateWithoutErrorHandling=function(t,e,r){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=r,this.expression.evaluate(this._evaluator)},wr.prototype.evaluate=function(t,e,r){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=r||null;try{var n=this.expression.evaluate(this._evaluator);if(null==n)return this._defaultValue;if(this._enumValues&&!(n in this._enumValues))throw new ne("Expected value to be one of "+Object.keys(this._enumValues).map(function(t){return JSON.stringify(t)}).join(", ")+", but found "+JSON.stringify(n)+" instead.");return n}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}};var kr=function(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!de(e.expression)};kr.prototype.evaluateWithoutErrorHandling=function(t,e,r){return this._styleExpression.evaluateWithoutErrorHandling(t,e,r)},kr.prototype.evaluate=function(t,e,r){return this._styleExpression.evaluate(t,e,r)};var Cr=function(t,e,r){this.kind=t,this.zoomStops=r.labels,this._styleExpression=e,this.isStateDependent="camera"!==t&&!de(e.expression),r instanceof je&&(this._interpolationType=r.interpolation)};function Tr(t,e){if("error"===(t=Sr(t,e)).result)return t;var r=t.value.expression,n=fe(r);if(!n&&!cr(e))return ur([new Lt("","data expressions not supported")]);var i=me(r,["zoom"]);if(!i&&!pr(e))return ur([new Lt("","zoom expressions not supported")]);var o=function r(t){var n=null;if(t instanceof Ve)n=r(t.result);else if(t instanceof Ue)for(var e=0,i=t.args;e<i.length;e+=1){var o=i[e];if(n=r(o))break}else(t instanceof _e||t instanceof je)&&t.input instanceof pe&&"zoom"===t.input.name&&(n=t);return n instanceof Lt||t.eachChild(function(t){var e=r(t);e instanceof Lt?n=e:!n&&e?n=new Lt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&e&&n!==e&&(n=new Lt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}(r);return o||i?o instanceof Lt?ur([o]):o instanceof je&&!hr(e)?ur([new Lt("",'"interpolate" expressions cannot be used with this property')]):lr(o?new Cr(n?"camera":"composite",t.value,o):new kr(n?"constant":"source",t.value)):ur([new Lt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}Cr.prototype.evaluateWithoutErrorHandling=function(t,e,r){return this._styleExpression.evaluateWithoutErrorHandling(t,e,r)},Cr.prototype.evaluate=function(t,e,r){return this._styleExpression.evaluate(t,e,r)},Cr.prototype.interpolationFactor=function(t,e,r){return this._interpolationType?je.interpolationFactor(this._interpolationType,t,e,r):0};var Ar=function(t,e){this._parameters=t,this._specification=e,At(this,function t(n,i){var o,a,s,e="color"===i.type,r=n.stops&&"object"==typeof n.stops[0][0],l=r||void 0!==n.property,u=r||!l,c=n.type||(hr(i)?"exponential":"interval");if(e&&((n=At({},n)).stops&&(n.stops=n.stops.map(function(t){return[t[0],$t.parse(t[1])]})),n.default?n.default=$t.parse(n.default):n.default=$t.parse(i.default)),n.colorSpace&&"rgb"!==n.colorSpace&&!Be[n.colorSpace])throw new Error("Unknown color space: "+n.colorSpace);if("exponential"===c)o=_r;else if("interval"===c)o=vr;else if("categorical"===c){o=gr,a=Object.create(null);for(var p=0,h=n.stops;p<h.length;p+=1){var f=h[p];a[f[0]]=f[1]}s=typeof n.stops[0][0]}else{if("identity"!==c)throw new Error('Unknown function type "'+c+'"');o=br}if(r){for(var d={},m=[],y=0;y<n.stops.length;y++){var g=n.stops[y],v=g[0].zoom;void 0===d[v]&&(d[v]={zoom:v,type:n.type,property:n.property,default:n.default,stops:[]},m.push(v)),d[v].stops.push([g[0].value,g[1]])}for(var _=[],b=0,x=m;b<x.length;b+=1){var w=x[b];_.push([d[w].zoom,t(d[w],i)])}return{kind:"composite",interpolationFactor:je.interpolationFactor.bind(void 0,{name:"linear"}),zoomStops:_.map(function(t){return t[0]}),evaluate:function(t,e){var r=t.zoom;return _r({stops:_,base:n.base},i,r).evaluate(r,e)}}}return u?{kind:"camera",interpolationFactor:"exponential"===c?je.interpolationFactor.bind(void 0,{name:"exponential",base:void 0!==n.base?n.base:1}):function(){return 0},zoomStops:n.stops.map(function(t){return t[0]}),evaluate:function(t){var e=t.zoom;return o(n,i,e,a,s)}}:{kind:"source",evaluate:function(t,e){var r=e&&e.properties?e.properties[n.property]:void 0;return void 0===r?yr(n.default,i.default):o(n,i,r,a,s)}}}(this._parameters,this._specification))};function Pr(t,e){if(dr(t))return new Ar(t,e);if(Er(t)){var r=Tr(t,e);if("error"===r.result)throw new Error(r.value.map(function(t){return t.key+": "+t.message}).join(", "));return r.value}var n=t;return"string"==typeof t&&"color"===e.type&&(n=$t.parse(t)),{kind:"constant",evaluate:function(){return n}}}function Ir(t){var e=t.key,r=t.value,n=t.valueSpec||{},i=t.objectElementValidators||{},o=t.style,a=t.styleSpec,s=[],l=fr(r);if("object"!==l)return[new Ct(e,r,"object expected, "+l+" found")];for(var u in r){var c=u.split(".")[0],p=n[c]||n["*"],h=void 0;if(i[c])h=i[c];else if(n[c])h=tn;else if(i["*"])h=i["*"];else{if(!n["*"]){s.push(new Ct(e,r[u],'unknown property "'+u+'"'));continue}h=tn}s=s.concat(h({key:(e?e+".":e)+u,value:r[u],valueSpec:p,style:o,styleSpec:a,object:r,objectKey:u},r))}for(var f in n)i[f]||n[f].required&&void 0===n[f].default&&void 0===r[f]&&s.push(new Ct(e,r,'missing required property "'+f+'"'));return s}function Mr(t){var e=t.value,r=t.valueSpec,n=t.style,i=t.styleSpec,o=t.key,a=t.arrayElementValidator||tn;if("array"!==fr(e))return[new Ct(o,e,"array expected, "+fr(e)+" found")];if(r.length&&e.length!==r.length)return[new Ct(o,e,"array length "+r.length+" expected, length "+e.length+" found")];if(r["min-length"]&&e.length<r["min-length"])return[new Ct(o,e,"array length at least "+r["min-length"]+" expected, length "+e.length+" found")];var s={type:r.value,values:r.values};i.$version<7&&(s.function=r.function),"object"===fr(r.value)&&(s=r.value);for(var l=[],u=0;u<e.length;u++)l=l.concat(a({array:e,arrayIndex:u,value:e[u],valueSpec:s,style:n,styleSpec:i,key:o+"["+u+"]"}));return l}function zr(t){var e=t.key,r=t.value,n=t.valueSpec,i=fr(r);return"number"!==i?[new Ct(e,r,"number expected, "+i+" found")]:"minimum"in n&&r<n.minimum?[new Ct(e,r,r+" is less than the minimum value "+n.minimum)]:"maximum"in n&&r>n.maximum?[new Ct(e,r,r+" is greater than the maximum value "+n.maximum)]:[]}function Lr(t){var a,s,i,l=t.valueSpec,u=Pt(t.value.type),c={},e="categorical"!==u&&void 0===t.value.property,r=!e,o="array"===fr(t.value.stops)&&"array"===fr(t.value.stops[0])&&"object"===fr(t.value.stops[0][0]),n=Ir({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===u)return[new Ct(t.key,t.value,'identity function may not have a "stops" property')];var e=[],r=t.value;return e=e.concat(Mr({key:t.key,value:r,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:p})),"array"===fr(r)&&0===r.length&&e.push(new Ct(t.key,r,"array must have at least one stop")),e},default:function(t){return tn({key:t.key,value:t.value,valueSpec:l,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===u&&e&&n.push(new Ct(t.key,t.value,'missing required property "property"')),"identity"===u||t.value.stops||n.push(new Ct(t.key,t.value,'missing required property "stops"')),"exponential"===u&&t.valueSpec.expression&&!hr(t.valueSpec)&&n.push(new Ct(t.key,t.value,"exponential functions not supported")),8<=t.styleSpec.$version&&(r&&!cr(t.valueSpec)?n.push(new Ct(t.key,t.value,"property functions not supported")):e&&!pr(t.valueSpec)&&n.push(new Ct(t.key,t.value,"zoom functions not supported"))),"categorical"!==u&&!o||void 0!==t.value.property||n.push(new Ct(t.key,t.value,'"property" property is required')),n;function p(t){var e=[],r=t.value,n=t.key;if("array"!==fr(r))return[new Ct(n,r,"array expected, "+fr(r)+" found")];if(2!==r.length)return[new Ct(n,r,"array length 2 expected, length "+r.length+" found")];if(o){if("object"!==fr(r[0]))return[new Ct(n,r,"object expected, "+fr(r[0])+" found")];if(void 0===r[0].zoom)return[new Ct(n,r,"object stop key must have zoom")];if(void 0===r[0].value)return[new Ct(n,r,"object stop key must have value")];if(i&&i>Pt(r[0].zoom))return[new Ct(n,r[0].zoom,"stop zoom values must appear in ascending order")];Pt(r[0].zoom)!==i&&(i=Pt(r[0].zoom),s=void 0,c={}),e=e.concat(Ir({key:n+"[0]",value:r[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:zr,value:h}}))}else e=e.concat(h({key:n+"[0]",value:r[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},r));return Er(It(r[1]))?e.concat([new Ct(n+"[1]",r[1],"expressions are not allowed in function stops.")]):e.concat(tn({key:n+"[1]",value:r[1],valueSpec:l,style:t.style,styleSpec:t.styleSpec}))}function h(t,e){var r=fr(t.value),n=Pt(t.value),i=null!==t.value?t.value:e;if(a){if(r!==a)return[new Ct(t.key,i,r+" stop domain type must match previous stop domain type "+a)]}else a=r;if("number"!==r&&"string"!==r&&"boolean"!==r)return[new Ct(t.key,i,"stop domain value must be a number, string, or boolean")];if("number"===r||"categorical"===u)return"categorical"!==u||"number"!==r||isFinite(n)&&Math.floor(n)===n?"categorical"!==u&&"number"===r&&void 0!==s&&n<s?[new Ct(t.key,i,"stop domain values must appear in ascending order")]:(s=n,"categorical"===u&&n in c?[new Ct(t.key,i,"stop domain values must be unique")]:(c[n]=!0,[])):[new Ct(t.key,i,"integer expected, found "+n)];var o="number expected, "+r+" found";return cr(l)&&void 0===u&&(o+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ct(t.key,i,o)]}}function Or(e){var t=("property"===e.expressionContext?Tr:Sr)(It(e.value),e.valueSpec);if("error"===t.result)return t.value.map(function(t){return new Ct(""+e.key+t.key,e.value,t.message)});var r=t.value.expression||t.value._styleExpression.expression;if("property"===e.expressionContext&&"text-font"===e.propertyKey&&-1!==r.possibleOutputs().indexOf(void 0))return[new Ct(e.key,e.value,'Invalid data expression for "'+e.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===e.expressionContext&&"layout"===e.propertyType&&!de(r))return[new Ct(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext&&!de(r))return[new Ct(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!me(r,["zoom","feature-state"]))return[new Ct(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!fe(r))return[new Ct(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Dr(t){var e=t.key,r=t.value,n=t.valueSpec,i=[];return Array.isArray(n.values)?-1===n.values.indexOf(Pt(r))&&i.push(new Ct(e,r,"expected one of ["+n.values.join(", ")+"], "+JSON.stringify(r)+" found")):-1===Object.keys(n.values).indexOf(Pt(r))&&i.push(new Ct(e,r,"expected one of ["+Object.keys(n.values).join(", ")+"], "+JSON.stringify(r)+" found")),i}function Rr(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return 2<=t.length&&"$id"!==t[1]&&"$type"!==t[1];case"in":case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(var e=0,r=t.slice(1);e<r.length;e+=1){var n=r[e];if(!Rr(n)&&"boolean"!=typeof n)return!1}return!0;default:return!0}}Ar.deserialize=function(t){return new Ar(t._parameters,t._specification)};var Fr={type:"boolean",default:!(Ar.serialize=function(t){return{_parameters:t._parameters,_specification:t._specification}}),transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Br(t){if(null==t)return function(){return!0};Rr(t)||(t=Nr(t));var r=Sr(t,Fr);if("error"===r.result)throw new Error(r.value.map(function(t){return t.key+": "+t.message}).join(", "));return function(t,e){return r.value.evaluate(t,e)}}function jr(t,e){return t<e?-1:e<t?1:0}function Nr(t){if(!t)return!0;var e,r=t[0];return t.length<=1?"any"!==r:"=="===r?Ur(t[1],t[2],"=="):"!="===r?Zr(Ur(t[1],t[2],"==")):"<"===r||">"===r||"<="===r||">="===r?Ur(t[1],t[2],r):"any"===r?(e=t.slice(1),["any"].concat(e.map(Nr))):"all"===r?["all"].concat(t.slice(1).map(Nr)):"none"===r?["all"].concat(t.slice(1).map(Nr).map(Zr)):"in"===r?Vr(t[1],t.slice(2)):"!in"===r?Zr(Vr(t[1],t.slice(2))):"has"===r?qr(t[1]):"!has"!==r||Zr(qr(t[1]))}function Ur(t,e,r){switch(t){case"$type":return["filter-type-"+r,e];case"$id":return["filter-id-"+r,e];default:return["filter-"+r,t,e]}}function Vr(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return 200<e.length&&!e.some(function(t){return typeof t!=typeof e[0]})?["filter-in-large",t,["literal",e.sort(jr)]]:["filter-in-small",t,["literal",e]]}}function qr(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function Zr(t){return["!",t]}function Gr(t){return Rr(It(t.value))?Or(At({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(e){var r=e.value,n=e.key;if("array"!==fr(r))return[new Ct(n,r,"array expected, "+fr(r)+" found")];var i,o=e.styleSpec,a=[];if(r.length<1)return[new Ct(n,r,"filter array must have at least 1 element")];switch(a=a.concat(Dr({key:n+"[0]",value:r[0],valueSpec:o.filter_operator,style:e.style,styleSpec:e.styleSpec})),Pt(r[0])){case"<":case"<=":case">":case">=":2<=r.length&&"$type"===Pt(r[1])&&a.push(new Ct(n,r,'"$type" cannot be use with operator "'+r[0]+'"'));case"==":case"!=":3!==r.length&&a.push(new Ct(n,r,'filter array for operator "'+r[0]+'" must have 3 elements'));case"in":case"!in":2<=r.length&&"string"!==(i=fr(r[1]))&&a.push(new Ct(n+"[1]",r[1],"string expected, "+i+" found"));for(var s=2;s<r.length;s++)i=fr(r[s]),"$type"===Pt(r[1])?a=a.concat(Dr({key:n+"["+s+"]",value:r[s],valueSpec:o.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==i&&"number"!==i&&"boolean"!==i&&a.push(new Ct(n+"["+s+"]",r[s],"string, number, or boolean expected, "+i+" found"));break;case"any":case"all":case"none":for(var l=1;l<r.length;l++)a=a.concat(t({key:n+"["+l+"]",value:r[l],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":i=fr(r[1]),2!==r.length?a.push(new Ct(n,r,'filter array for "'+r[0]+'" operator must have 2 elements')):"string"!==i&&a.push(new Ct(n+"[1]",r[1],"string expected, "+i+" found"))}return a}(t)}function Wr(t,e){var r=t.key,n=t.style,i=t.styleSpec,o=t.value,a=t.objectKey,s=i[e+"_"+t.layerType];if(!s)return[];var l=a.match(/^(.*)-transition$/);if("paint"===e&&l&&s[l[1]]&&s[l[1]].transition)return tn({key:r,value:o,valueSpec:i.transition,style:n,styleSpec:i});var u,c=t.valueSpec||s[a];if(!c)return[new Ct(r,o,'unknown property "'+a+'"')];if("string"===fr(o)&&cr(c)&&!c.tokens&&(u=/^{([^}]+)}$/.exec(o)))return[new Ct(r,o,'"'+a+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(u[1])+" }`.")];var p=[];return"symbol"===t.layerType&&("text-field"===a&&n&&!n.glyphs&&p.push(new Ct(r,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&dr(It(o))&&"identity"===Pt(o.type)&&p.push(new Ct(r,o,'"text-font" does not support identity functions'))),p.concat(tn({key:t.key,value:o,valueSpec:c,style:n,styleSpec:i,expressionContext:"property",propertyType:e,propertyKey:a}))}function Hr(t){return Wr(t,"paint")}function Xr(t){return Wr(t,"layout")}function $r(t){var e=[],r=t.value,n=t.key,i=t.style,o=t.styleSpec;r.type||r.ref||e.push(new Ct(n,r,'either "type" or "ref" is required'));var a,s=Pt(r.type),l=Pt(r.ref);if(r.id)for(var u=Pt(r.id),c=0;c<t.arrayIndex;c++){var p=i.layers[c];Pt(p.id)===u&&e.push(new Ct(n,r.id,'duplicate layer id "'+r.id+'", previously used at line '+p.id.__line__))}if("ref"in r)["type","source","source-layer","filter","layout"].forEach(function(t){t in r&&e.push(new Ct(n,r[t],'"'+t+'" is prohibited for ref layers'))}),i.layers.forEach(function(t){Pt(t.id)===l&&(a=t)}),a?a.ref?e.push(new Ct(n,r.ref,"ref cannot reference another ref layer")):s=Pt(a.type):e.push(new Ct(n,r.ref,'ref layer "'+l+'" not found'));else if("background"!==s)if(r.source){var h=i.sources&&i.sources[r.source],f=h&&Pt(h.type);h?"vector"===f&&"raster"===s?e.push(new Ct(n,r.source,'layer "'+r.id+'" requires a raster source')):"raster"===f&&"raster"!==s?e.push(new Ct(n,r.source,'layer "'+r.id+'" requires a vector source')):"vector"!==f||r["source-layer"]?"raster-dem"===f&&"hillshade"!==s?e.push(new Ct(n,r.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!r.paint||!r.paint["line-gradient"]||"geojson"===f&&h.lineMetrics||e.push(new Ct(n,r,'layer "'+r.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):e.push(new Ct(n,r,'layer "'+r.id+'" must specify a "source-layer"')):e.push(new Ct(n,r.source,'source "'+r.source+'" not found'))}else e.push(new Ct(n,r,'missing required property "source"'));return e=e.concat(Ir({key:n,value:r,valueSpec:o.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return tn({key:n+".type",value:r.type,valueSpec:o.layer.type,style:t.style,styleSpec:t.styleSpec,object:r,objectKey:"type"})},filter:Gr,layout:function(t){return Ir({layer:r,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return Xr(At({layerType:s},t))}}})},paint:function(t){return Ir({layer:r,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return Hr(At({layerType:s},t))}}})}}}))}function Kr(t){var e=t.value,r=t.key,n=t.styleSpec,i=t.style;if(!e.type)return[new Ct(r,e,'"type" is required')];var o,a=Pt(e.type);switch(a){case"vector":case"raster":case"raster-dem":if(o=Ir({key:r,value:e,valueSpec:n["source_"+a.replace("-","_")],style:t.style,styleSpec:n}),"url"in e)for(var s in e)["type","url","tileSize"].indexOf(s)<0&&o.push(new Ct(r+"."+s,e[s],'a source with a "url" property may not include a "'+s+'" property'));return o;case"geojson":if(o=Ir({key:r,value:e,valueSpec:n.source_geojson,style:i,styleSpec:n}),e.cluster)for(var l in e.clusterProperties){var u=e.clusterProperties[l],c=u[0],p=u[1],h="string"==typeof c?[c,["accumulated"],["get",l]]:c;o.push.apply(o,Or({key:r+"."+l+".map",value:p,expressionContext:"cluster-map"})),o.push.apply(o,Or({key:r+"."+l+".reduce",value:h,expressionContext:"cluster-reduce"}))}return o;case"video":return Ir({key:r,value:e,valueSpec:n.source_video,style:i,styleSpec:n});case"image":return Ir({key:r,value:e,valueSpec:n.source_image,style:i,styleSpec:n});case"canvas":return[new Ct(r,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Dr({key:r+".type",value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,styleSpec:n})}}function Jr(t){var e=t.value,r=t.styleSpec,n=r.light,i=t.style,o=[],a=fr(e);if(void 0===e)return o;if("object"!==a)return o.concat([new Ct("light",e,"object expected, "+a+" found")]);for(var s in e){var l=s.match(/^(.*)-transition$/);o=l&&n[l[1]]&&n[l[1]].transition?o.concat(tn({key:s,value:e[s],valueSpec:r.transition,style:i,styleSpec:r})):n[s]?o.concat(tn({key:s,value:e[s],valueSpec:n[s],style:i,styleSpec:r})):o.concat([new Ct(s,e[s],'unknown property "'+s+'"')])}return o}function Yr(t){var e=t.value,r=t.key,n=fr(e);return"string"!==n?[new Ct(r,e,"string expected, "+n+" found")]:[]}var Qr={"*":function(){return[]},array:Mr,boolean:function(t){var e=t.value,r=t.key,n=fr(e);return"boolean"!==n?[new Ct(r,e,"boolean expected, "+n+" found")]:[]},number:zr,color:function(t){var e=t.key,r=t.value,n=fr(r);return"string"!==n?[new Ct(e,r,"color expected, "+n+" found")]:null===Xt(r)?[new Ct(e,r,'color expected, "'+r+'" found')]:[]},constants:Tt,enum:Dr,filter:Gr,function:Lr,layer:$r,object:Ir,source:Kr,light:Jr,string:Yr,formatted:function(t){return 0===Yr(t).length?[]:Or(t)}};function tn(t){var e=t.value,r=t.valueSpec,n=t.styleSpec;return r.expression&&dr(Pt(e))?Lr(t):r.expression&&Er(It(e))?Or(t):r.type&&Qr[r.type]?Qr[r.type](t):Ir(At({},t,{valueSpec:r.type?n[r.type]:r}))}function en(t){var e=t.value,r=t.key,n=Yr(t);return n.length||(-1===e.indexOf("{fontstack}")&&n.push(new Ct(r,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&n.push(new Ct(r,e,'"glyphs" url must include a "{range}" token'))),n}function rn(t,e){e=e||kt;var r=[];return r=r.concat(tn({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:en,"*":function(){return[]}}})),t.constants&&(r=r.concat(Tt({key:"constants",value:t.constants,style:t,styleSpec:e}))),nn(r)}function nn(t){return[].concat(t).sort(function(t,e){return t.line-e.line})}function on(r){return function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return nn(r.apply(this,t))}}rn.source=on(Kr),rn.light=on(Jr),rn.layer=on($r),rn.filter=on(Gr),rn.paintProperty=on(Hr),rn.layoutProperty=on(Xr);var an=rn,sn=rn.light,ln=rn.paintProperty,un=rn.layoutProperty;function cn(t,e){var r=!1;if(e&&e.length)for(var n=0,i=e;n<i.length;n+=1){var o=i[n];t.fire(new Et(new Error(o.message))),r=!0}return r}var pn=fn,hn=3;function fn(t,e,r){var n=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var i=new Int32Array(this.arrayBuffer);t=i[0],e=i[1],r=i[2],this.d=e+2*r;for(var o=0;o<this.d*this.d;o++){var a=i[hn+o],s=i[hn+o+1];n.push(a===s?null:i.subarray(a,s))}var l=i[hn+n.length],u=i[hn+n.length+1];this.keys=i.subarray(l,u),this.bboxes=i.subarray(u),this.insert=this._insertReadonly}else{this.d=e+2*r;for(var c=0;c<this.d*this.d;c++)n.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=r,this.scale=e/t,this.uid=0;var p=r/e*t;this.min=-p,this.max=t+p}fn.prototype.insert=function(t,e,r,n,i){this._forEachCell(e,r,n,i,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(r),this.bboxes.push(n),this.bboxes.push(i)},fn.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},fn.prototype._insertCell=function(t,e,r,n,i,o){this.cells[i].push(o)},fn.prototype.query=function(t,e,r,n,i){var o=this.min,a=this.max;if(t<=o&&e<=o&&a<=r&&a<=n&&!i)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(t,e,r,n,this._queryCell,s,{},i),s},fn.prototype._queryCell=function(t,e,r,n,i,o,a,s){var l=this.cells[i];if(null!==l)for(var u=this.keys,c=this.bboxes,p=0;p<l.length;p++){var h=l[p];if(void 0===a[h]){var f=4*h;(s?s(c[0+f],c[1+f],c[2+f],c[3+f]):t<=c[2+f]&&e<=c[3+f]&&r>=c[0+f]&&n>=c[1+f])?(a[h]=!0,o.push(u[h])):a[h]=!1}}},fn.prototype._forEachCell=function(t,e,r,n,i,o,a,s){for(var l=this._convertToCellCoord(t),u=this._convertToCellCoord(e),c=this._convertToCellCoord(r),p=this._convertToCellCoord(n),h=l;h<=c;h++)for(var f=u;f<=p;f++){var d=this.d*f+h;if((!s||s(this._convertFromCellCoord(h),this._convertFromCellCoord(f),this._convertFromCellCoord(h+1),this._convertFromCellCoord(f+1)))&&i.call(this,t,e,r,n,d,o,a,s))return}},fn.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale},fn.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},fn.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=hn+this.cells.length+1+1,r=0,n=0;n<this.cells.length;n++)r+=this.cells[n].length;var i=new Int32Array(e+r+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var o=e,a=0;a<t.length;a++){var s=t[a];i[hn+a]=o,i.set(s,o),o+=s.length}return i[hn+t.length]=o,i.set(this.keys,o),o+=this.keys.length,i[hn+t.length+1]=o,i.set(this.bboxes,o),o+=this.bboxes.length,i.buffer};var dn=self.ImageData,mn={};function yn(t,e,r){void 0===r&&(r={}),Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),mn[t]={klass:e,omit:r.omit||[],shallow:r.shallow||[]}}for(var gn in yn("Object",Object),pn.serialize=function(t,e){var r=t.toArrayBuffer();return e&&e.push(r),{buffer:r}},pn.deserialize=function(t){return new pn(t.buffer)},yn("Grid",pn),yn("Color",$t),yn("Error",Error),yn("StylePropertyFunction",Ar),yn("StyleExpression",wr,{omit:["_evaluator"]}),yn("ZoomDependentExpression",Cr),yn("ZoomConstantExpression",kr),yn("CompoundExpression",pe,{omit:["_evaluate"]}),nr)nr[gn]._classRegistryKey||yn("Expression_"+gn,nr[gn]);function vn(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(t instanceof ArrayBuffer)return e&&e.push(t),t;if(ArrayBuffer.isView(t)){var r=t;return e&&e.push(r.buffer),r}if(t instanceof dn)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){for(var n=[],i=0,o=t;i<o.length;i+=1){var a=o[i];n.push(vn(a,e))}return n}if("object"!=typeof t)throw new Error("can't serialize object of type "+typeof t);var s=t.constructor,l=s._classRegistryKey;if(!l)throw new Error("can't serialize object of unregistered class");var u=s.serialize?s.serialize(t,e):{};if(!s.serialize){for(var c in t)if(t.hasOwnProperty(c)&&!(0<=mn[l].omit.indexOf(c))){var p=t[c];u[c]=0<=mn[l].shallow.indexOf(c)?p:vn(p,e)}t instanceof Error&&(u.message=t.message)}if(u.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==l&&(u.$name=l),u}function _n(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||t instanceof ArrayBuffer||ArrayBuffer.isView(t)||t instanceof dn)return t;if(Array.isArray(t))return t.map(_n);if("object"!=typeof t)throw new Error("can't deserialize object of type "+typeof t);var e=t.$name||"Object",r=mn[e].klass;if(!r)throw new Error("can't deserialize unregistered class "+e);if(r.deserialize)return r.deserialize(t);for(var n=Object.create(r.prototype),i=0,o=Object.keys(t);i<o.length;i+=1){var a=o[i];if("$name"!==a){var s=t[a];n[a]=0<=mn[e].shallow.indexOf(a)?s:_n(s)}}return n}function bn(){this.first=!0}var xn={"Latin-1 Supplement":function(t){return 128<=t&&t<=255},Arabic:function(t){return 1536<=t&&t<=1791},"Arabic Supplement":function(t){return 1872<=t&&t<=1919},"Arabic Extended-A":function(t){return 2208<=t&&t<=2303},"Hangul Jamo":function(t){return 4352<=t&&t<=4607},"Unified Canadian Aboriginal Syllabics":function(t){return 5120<=t&&t<=5759},Khmer:function(t){return 6016<=t&&t<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(t){return 6320<=t&&t<=6399},"General Punctuation":function(t){return 8192<=t&&t<=8303},"Letterlike Symbols":function(t){return 8448<=t&&t<=8527},"Number Forms":function(t){return 8528<=t&&t<=8591},"Miscellaneous Technical":function(t){return 8960<=t&&t<=9215},"Control Pictures":function(t){return 9216<=t&&t<=9279},"Optical Character Recognition":function(t){return 9280<=t&&t<=9311},"Enclosed Alphanumerics":function(t){return 9312<=t&&t<=9471},"Geometric Shapes":function(t){return 9632<=t&&t<=9727},"Miscellaneous Symbols":function(t){return 9728<=t&&t<=9983},"Miscellaneous Symbols and Arrows":function(t){return 11008<=t&&t<=11263},"CJK Radicals Supplement":function(t){return 11904<=t&&t<=12031},"Kangxi Radicals":function(t){return 12032<=t&&t<=12255},"Ideographic Description Characters":function(t){return 12272<=t&&t<=12287},"CJK Symbols and Punctuation":function(t){return 12288<=t&&t<=12351},Hiragana:function(t){return 12352<=t&&t<=12447},Katakana:function(t){return 12448<=t&&t<=12543},Bopomofo:function(t){return 12544<=t&&t<=12591},"Hangul Compatibility Jamo":function(t){return 12592<=t&&t<=12687},Kanbun:function(t){return 12688<=t&&t<=12703},"Bopomofo Extended":function(t){return 12704<=t&&t<=12735},"CJK Strokes":function(t){return 12736<=t&&t<=12783},"Katakana Phonetic Extensions":function(t){return 12784<=t&&t<=12799},"Enclosed CJK Letters and Months":function(t){return 12800<=t&&t<=13055},"CJK Compatibility":function(t){return 13056<=t&&t<=13311},"CJK Unified Ideographs Extension A":function(t){return 13312<=t&&t<=19903},"Yijing Hexagram Symbols":function(t){return 19904<=t&&t<=19967},"CJK Unified Ideographs":function(t){return 19968<=t&&t<=40959},"Yi Syllables":function(t){return 40960<=t&&t<=42127},"Yi Radicals":function(t){return 42128<=t&&t<=42191},"Hangul Jamo Extended-A":function(t){return 43360<=t&&t<=43391},"Hangul Syllables":function(t){return 44032<=t&&t<=55215},"Hangul Jamo Extended-B":function(t){return 55216<=t&&t<=55295},"Private Use Area":function(t){return 57344<=t&&t<=63743},"CJK Compatibility Ideographs":function(t){return 63744<=t&&t<=64255},"Arabic Presentation Forms-A":function(t){return 64336<=t&&t<=65023},"Vertical Forms":function(t){return 65040<=t&&t<=65055},"CJK Compatibility Forms":function(t){return 65072<=t&&t<=65103},"Small Form Variants":function(t){return 65104<=t&&t<=65135},"Arabic Presentation Forms-B":function(t){return 65136<=t&&t<=65279},"Halfwidth and Fullwidth Forms":function(t){return 65280<=t&&t<=65519}};function wn(t){for(var e=0,r=t;e<r.length;e+=1)if(Sn(r[e].charCodeAt(0)))return!0;return!1}function En(t){for(var e=0,r=t;e<r.length;e+=1)if(n=r[e].charCodeAt(0),xn.Arabic(n)||xn["Arabic Supplement"](n)||xn["Arabic Extended-A"](n)||xn["Arabic Presentation Forms-A"](n)||xn["Arabic Presentation Forms-B"](n))return!1;var n;return!0}function Sn(t){return!!(746===t||747===t||!(t<4352)&&(xn["Bopomofo Extended"](t)||xn.Bopomofo(t)||xn["CJK Compatibility Forms"](t)&&!(65097<=t&&t<=65103)||xn["CJK Compatibility Ideographs"](t)||xn["CJK Compatibility"](t)||xn["CJK Radicals Supplement"](t)||xn["CJK Strokes"](t)||!(!xn["CJK Symbols and Punctuation"](t)||12296<=t&&t<=12305||12308<=t&&t<=12319||12336===t)||xn["CJK Unified Ideographs Extension A"](t)||xn["CJK Unified Ideographs"](t)||xn["Enclosed CJK Letters and Months"](t)||xn["Hangul Compatibility Jamo"](t)||xn["Hangul Jamo Extended-A"](t)||xn["Hangul Jamo Extended-B"](t)||xn["Hangul Jamo"](t)||xn["Hangul Syllables"](t)||xn.Hiragana(t)||xn["Ideographic Description Characters"](t)||xn.Kanbun(t)||xn["Kangxi Radicals"](t)||xn["Katakana Phonetic Extensions"](t)||xn.Katakana(t)&&12540!==t||!(!xn["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||65306<=t&&t<=65310||65339===t||65341===t||65343===t||65371<=t&&t<=65503||65507===t||65512<=t&&t<=65519)||!(!xn["Small Form Variants"](t)||65112<=t&&t<=65118||65123<=t&&t<=65126)||xn["Unified Canadian Aboriginal Syllabics"](t)||xn["Unified Canadian Aboriginal Syllabics Extended"](t)||xn["Vertical Forms"](t)||xn["Yijing Hexagram Symbols"](t)||xn["Yi Syllables"](t)||xn["Yi Radicals"](t)))}function kn(t){return!(Sn(t)||(e=t,xn["Latin-1 Supplement"](e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||xn["General Punctuation"](e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||xn["Letterlike Symbols"](e)||xn["Number Forms"](e)||xn["Miscellaneous Technical"](e)&&(8960<=e&&e<=8967||8972<=e&&e<=8991||8996<=e&&e<=9e3||9003===e||9085<=e&&e<=9114||9150<=e&&e<=9165||9167===e||9169<=e&&e<=9179||9186<=e&&e<=9215)||xn["Control Pictures"](e)&&9251!==e||xn["Optical Character Recognition"](e)||xn["Enclosed Alphanumerics"](e)||xn["Geometric Shapes"](e)||xn["Miscellaneous Symbols"](e)&&!(9754<=e&&e<=9759)||xn["Miscellaneous Symbols and Arrows"](e)&&(11026<=e&&e<=11055||11088<=e&&e<=11097||11192<=e&&e<=11243)||xn["CJK Symbols and Punctuation"](e)||xn.Katakana(e)||xn["Private Use Area"](e)||xn["CJK Compatibility Forms"](e)||xn["Small Form Variants"](e)||xn["Halfwidth and Fullwidth Forms"](e)||8734===e||8756===e||8757===e||9984<=e&&e<=10087||10102<=e&&e<=10131||65532===e||65533===e));var e}function Cn(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new bn,this.transition={})}var Tn,An=!(bn.prototype.update=function(t,e){var r=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=r,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=r,!0):(this.lastFloorZoom>r?(this.lastIntegerZoom=r+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<r&&(this.lastIntegerZoom=r,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=r,!0))}),Pn=null,In=!1,Mn=new xt,zn={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return In||null!=zn.applyArabicShaping}};Cn.prototype.isSupportedScript=function(t){return function(t,e){for(var r=0,n=t;r<n.length;r+=1)if(i=n[r].charCodeAt(0),!e&&(1424<=i&&i<=2303||xn["Arabic Presentation Forms-A"](i)||xn["Arabic Presentation Forms-B"](i))||2304<=i&&i<=3583||3840<=i&&i<=4255||xn.Khmer(i))return!1;var i;return!0}(t,zn.isLoaded())},Cn.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Cn.prototype.getCrossfadeParameters=function(){var t=this.zoom,e=t-Math.floor(t),r=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*r}:{fromScale:.5,toScale:1,t:1-(1-r)*e}};function Ln(t,e){this.property=t,this.value=e,this.expression=Pr(void 0===e?t.specification.default:e,t.specification)}Ln.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},Ln.prototype.possiblyEvaluate=function(t){return this.property.possiblyEvaluate(this,t)};function On(t){this.property=t,this.value=new Ln(t,void 0)}On.prototype.transitioned=function(t,e){return new Rn(this.property,this.value,e,d({},t.transition,this.transition),t.now)},On.prototype.untransitioned=function(){return new Rn(this.property,this.value,null,{},0)};function Dn(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}Dn.prototype.getValue=function(t){return _(this._values[t].value.value)},Dn.prototype.setValue=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new On(this._values[t].property)),this._values[t].value=new Ln(this._values[t].property,null===e?void 0:_(e))},Dn.prototype.getTransition=function(t){return _(this._values[t].transition)},Dn.prototype.setTransition=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new On(this._values[t].property)),this._values[t].transition=_(e)||void 0},Dn.prototype.serialize=function(){for(var t={},e=0,r=Object.keys(this._values);e<r.length;e+=1){var n=r[e],i=this.getValue(n);void 0!==i&&(t[n]=i);var o=this.getTransition(n);void 0!==o&&(t[n+"-transition"]=o)}return t},Dn.prototype.transitioned=function(t,e){for(var r=new Fn(this._properties),n=0,i=Object.keys(this._values);n<i.length;n+=1){var o=i[n];r._values[o]=this._values[o].transitioned(t,e._values[o])}return r},Dn.prototype.untransitioned=function(){for(var t=new Fn(this._properties),e=0,r=Object.keys(this._values);e<r.length;e+=1){var n=r[e];t._values[n]=this._values[n].untransitioned()}return t};var Rn=function(t,e,r,n,i){this.property=t,this.value=e,this.begin=i+n.delay||0,this.end=this.begin+n.duration||0,t.specification.transition&&(n.delay||n.duration)&&(this.prior=r)};Rn.prototype.possiblyEvaluate=function(t){var e=t.now||0,r=this.value.possiblyEvaluate(t),n=this.prior;if(n){if(e>this.end)return this.prior=null,r;if(this.value.isDataDriven())return this.prior=null,r;if(e<this.begin)return n.possiblyEvaluate(t);var i=(e-this.begin)/(this.end-this.begin);return this.property.interpolate(n.possiblyEvaluate(t),r,function(){if(i<=0)return 0;if(1<=i)return 1;var t=i*i,e=t*i;return 4*(i<.5?e:3*(i-t)+e-.75)}())}return r};var Fn=function(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)};Fn.prototype.possiblyEvaluate=function(t){for(var e=new Nn(this._properties),r=0,n=Object.keys(this._values);r<n.length;r+=1){var i=n[r];e._values[i]=this._values[i].possiblyEvaluate(t)}return e},Fn.prototype.hasTransition=function(){for(var t=0,e=Object.keys(this._values);t<e.length;t+=1){var r=e[t];if(this._values[r].prior)return!0}return!1};function Bn(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}Bn.prototype.getValue=function(t){return _(this._values[t].value)},Bn.prototype.setValue=function(t,e){this._values[t]=new Ln(this._values[t].property,null===e?void 0:_(e))},Bn.prototype.serialize=function(){for(var t={},e=0,r=Object.keys(this._values);e<r.length;e+=1){var n=r[e],i=this.getValue(n);void 0!==i&&(t[n]=i)}return t},Bn.prototype.possiblyEvaluate=function(t){for(var e=new Nn(this._properties),r=0,n=Object.keys(this._values);r<n.length;r+=1){var i=n[r];e._values[i]=this._values[i].possiblyEvaluate(t)}return e};function jn(t,e,r){this.property=t,this.value=e,this.parameters=r}jn.prototype.isConstant=function(){return"constant"===this.value.kind},jn.prototype.constantOr=function(t){return"constant"===this.value.kind?this.value.value:t},jn.prototype.evaluate=function(t,e){return this.property.evaluate(this.value,this.parameters,t,e)};var Nn=function(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)};Nn.prototype.get=function(t){return this._values[t]};function Un(t){this.specification=t}Un.prototype.possiblyEvaluate=function(t,e){return t.expression.evaluate(e)},Un.prototype.interpolate=function(t,e,r){var n=Ee[this.specification.type];return n?n(t,e,r):t};function Vn(t){this.specification=t}Vn.prototype.possiblyEvaluate=function(t,e){return"constant"===t.expression.kind||"camera"===t.expression.kind?new jn(this,{kind:"constant",value:t.expression.evaluate(e)},e):new jn(this,t.expression,e)},Vn.prototype.interpolate=function(t,e,r){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new jn(this,{kind:"constant",value:void 0},t.parameters);var n=Ee[this.specification.type];return n?new jn(this,{kind:"constant",value:n(t.value.value,e.value.value,r)},t.parameters):t},Vn.prototype.evaluate=function(t,e,r,n){return"constant"===t.kind?t.value:t.evaluate(e,r,n)};function qn(t){this.specification=t}var Zn,Gn=((Zn=Vn)&&(Wn.__proto__=Zn),((Wn.prototype=Object.create(Zn&&Zn.prototype)).constructor=Wn).prototype.possiblyEvaluate=function(t,e){if(void 0===t.value)return new jn(this,{kind:"constant",value:void 0},e);if("constant"===t.expression.kind){var r=t.expression.evaluate(e),n=this._calculate(r,r,r,e);return new jn(this,{kind:"constant",value:n},e)}if("camera"!==t.expression.kind)return new jn(this,t.expression,e);var i=this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e);return new jn(this,{kind:"constant",value:i},e)},Wn.prototype.evaluate=function(t,e,r,n){if("source"!==t.kind)return"composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(e.zoom)-1},r,n),t.evaluate({zoom:Math.floor(e.zoom)},r,n),t.evaluate({zoom:Math.floor(e.zoom)+1},r,n),e):t.value;var i=t.evaluate(e,r,n);return this._calculate(i,i,i,e)},Wn.prototype._calculate=function(t,e,r,n){return n.zoom>n.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:r,to:e}},Wn.prototype.interpolate=function(t){return t},Wn);function Wn(){Zn.apply(this,arguments)}qn.prototype.possiblyEvaluate=function(t,e){if(void 0!==t.value){if("constant"!==t.expression.kind)return this._calculate(t.expression.evaluate(new Cn(Math.floor(e.zoom-1),e)),t.expression.evaluate(new Cn(Math.floor(e.zoom),e)),t.expression.evaluate(new Cn(Math.floor(e.zoom+1),e)),e);var r=t.expression.evaluate(e);return this._calculate(r,r,r,e)}},qn.prototype._calculate=function(t,e,r,n){return n.zoom>n.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:r,to:e}},qn.prototype.interpolate=function(t){return t};function Hn(t){this.specification=t}Hn.prototype.possiblyEvaluate=function(t,e){return!!t.expression.evaluate(e)},Hn.prototype.interpolate=function(){return!1};function Xn(t){for(var e in this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},t){var r=t[e],n=this.defaultPropertyValues[e]=new Ln(r,void 0),i=this.defaultTransitionablePropertyValues[e]=new On(r);this.defaultTransitioningPropertyValues[e]=i.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=n.possiblyEvaluate({})}}yn("DataDrivenProperty",Vn),yn("DataConstantProperty",Un),yn("CrossFadedDataDrivenProperty",Gn),yn("CrossFadedProperty",qn),yn("ColorRampProperty",Hn);function $n(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}function Kn(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}var Jn,Yn=((Jn=xt)&&(ti.__proto__=Jn),((ti.prototype=Object.create(Jn&&Jn.prototype)).constructor=ti).prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},ti.prototype.getLayoutProperty=function(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)},ti.prototype.setLayoutProperty=function(t,e,r){if(void 0===r&&(r={}),null!=e){var n="layers."+this.id+".layout."+t;if(this._validate(un,n,t,e,r))return}"visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility=e},ti.prototype.getPaintProperty=function(t){return y(t,"-transition")?this._transitionablePaint.getTransition(t.slice(0,-"-transition".length)):this._transitionablePaint.getValue(t)},ti.prototype.setPaintProperty=function(t,e,r){if(void 0===r&&(r={}),null!=e){var n="layers."+this.id+".paint."+t;if(this._validate(ln,n,t,e,r))return!1}if(y(t,"-transition"))return this._transitionablePaint.setTransition(t.slice(0,-"-transition".length),e||void 0),!1;var i=this._transitionablePaint._values[t],o="cross-faded-data-driven"===i.property.specification["property-type"]&&!i.value.value&&e,a=this._transitionablePaint._values[t].value.isDataDriven();this._transitionablePaint.setValue(t,e);var s=this._transitionablePaint._values[t].value.isDataDriven();return this._handleSpecialPaintPropertyUpdate(t),s||a||o},ti.prototype._handleSpecialPaintPropertyUpdate=function(t){},ti.prototype.isHidden=function(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility},ti.prototype.updateTransitions=function(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)},ti.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},ti.prototype.recalculate=function(t){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t)),this.paint=this._transitioningPaint.possiblyEvaluate(t)},ti.prototype.serialize=function(){var t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),v(t,function(t,e){return!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)})},ti.prototype._validate=function(t,e,r,n,i){return void 0===i&&(i={}),(!i||!1!==i.validate)&&cn(this,t.call(an,{key:e,layerType:this.type,objectKey:r,value:n,styleSpec:kt,style:{glyphs:!0,sprite:!0}}))},ti.prototype.is3D=function(){return!1},ti.prototype.isTileClipped=function(){return!1},ti.prototype.hasOffscreenPass=function(){return!1},ti.prototype.resize=function(){},ti.prototype.isStateDependent=function(){for(var t in this.paint._values){var e=this.paint.get(t);if(e instanceof jn&&cr(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1},ti),Qn={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};function ti(t,e){if(Jn.call(this),this.id=t.id,this.type=t.type,this._featureFilter=function(){return!0},"custom"!==t.type&&(t=t,this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,"background"!==t.type&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),e.layout&&(this._unevaluatedLayout=new Bn(e.layout)),e.paint)){for(var r in this._transitionablePaint=new Dn(e.paint),t.paint)this.setPaintProperty(r,t.paint[r],{validate:!1});for(var n in t.layout)this.setLayoutProperty(n,t.layout[n],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned()}}function ei(t,o){void 0===o&&(o=1);var a=0,s=0;return{members:t.map(function(t){var e,r=(e=t.type,Qn[e].BYTES_PER_ELEMENT),n=a=ri(a,Math.max(o,r)),i=t.components||1;return s=Math.max(s,r),a+=r*i,{name:t.name,type:t.type,components:i,offset:n}}),size:ri(a,Math.max(s,o)),alignment:o}}function ri(t,e){return Math.ceil(t/e)*e}Kn.serialize=function(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}},Kn.deserialize=function(t){var e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e},Kn.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Kn.prototype.clear=function(){this.length=0},Kn.prototype.resize=function(t){this.reserve(t),this.length=t},Kn.prototype.reserve=function(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}},Kn.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var ni,ii=((ni=Kn)&&(oi.__proto__=ni),((oi.prototype=Object.create(ni&&ni.prototype)).constructor=oi).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},oi.prototype.emplaceBack=function(t,e){var r=this.length;return this.resize(r+1),this.emplace(r,t,e)},oi.prototype.emplace=function(t,e,r){var n=2*t;return this.int16[0+n]=e,this.int16[1+n]=r,t},oi);function oi(){ni.apply(this,arguments)}ii.prototype.bytesPerElement=4,yn("StructArrayLayout2i4",ii);var ai,si=((ai=Kn)&&(li.__proto__=ai),((li.prototype=Object.create(ai&&ai.prototype)).constructor=li).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},li.prototype.emplaceBack=function(t,e,r,n){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,r,n)},li.prototype.emplace=function(t,e,r,n,i){var o=4*t;return this.int16[0+o]=e,this.int16[1+o]=r,this.int16[2+o]=n,this.int16[3+o]=i,t},li);function li(){ai.apply(this,arguments)}si.prototype.bytesPerElement=8,yn("StructArrayLayout4i8",si);var ui,ci=((ui=Kn)&&(pi.__proto__=ui),((pi.prototype=Object.create(ui&&ui.prototype)).constructor=pi).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},pi.prototype.emplaceBack=function(t,e,r,n,i,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,r,n,i,o)},pi.prototype.emplace=function(t,e,r,n,i,o,a){var s=6*t;return this.int16[0+s]=e,this.int16[1+s]=r,this.int16[2+s]=n,this.int16[3+s]=i,this.int16[4+s]=o,this.int16[5+s]=a,t},pi);function pi(){ui.apply(this,arguments)}ci.prototype.bytesPerElement=12,yn("StructArrayLayout2i4i12",ci);var hi,fi=((hi=Kn)&&(di.__proto__=hi),((di.prototype=Object.create(hi&&hi.prototype)).constructor=di).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},di.prototype.emplaceBack=function(t,e,r,n,i,o,a,s){var l=this.length;return this.resize(l+1),this.emplace(l,t,e,r,n,i,o,a,s)},di.prototype.emplace=function(t,e,r,n,i,o,a,s,l){var u=6*t,c=12*t;return this.int16[0+u]=e,this.int16[1+u]=r,this.int16[2+u]=n,this.int16[3+u]=i,this.uint8[8+c]=o,this.uint8[9+c]=a,this.uint8[10+c]=s,this.uint8[11+c]=l,t},di);function di(){hi.apply(this,arguments)}fi.prototype.bytesPerElement=12,yn("StructArrayLayout4i4ub12",fi);var mi,yi=((mi=Kn)&&(gi.__proto__=mi),((gi.prototype=Object.create(mi&&mi.prototype)).constructor=gi).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},gi.prototype.emplaceBack=function(t,e,r,n,i,o,a,s){var l=this.length;return this.resize(l+1),this.emplace(l,t,e,r,n,i,o,a,s)},gi.prototype.emplace=function(t,e,r,n,i,o,a,s,l){var u=8*t;return this.uint16[0+u]=e,this.uint16[1+u]=r,this.uint16[2+u]=n,this.uint16[3+u]=i,this.uint16[4+u]=o,this.uint16[5+u]=a,this.uint16[6+u]=s,this.uint16[7+u]=l,t},gi);function gi(){mi.apply(this,arguments)}yi.prototype.bytesPerElement=16,yn("StructArrayLayout8ui16",yi);var vi,_i=((vi=Kn)&&(bi.__proto__=vi),((bi.prototype=Object.create(vi&&vi.prototype)).constructor=bi).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},bi.prototype.emplaceBack=function(t,e,r,n,i,o,a,s){var l=this.length;return this.resize(l+1),this.emplace(l,t,e,r,n,i,o,a,s)},bi.prototype.emplace=function(t,e,r,n,i,o,a,s,l){var u=8*t;return this.int16[0+u]=e,this.int16[1+u]=r,this.int16[2+u]=n,this.int16[3+u]=i,this.uint16[4+u]=o,this.uint16[5+u]=a,this.uint16[6+u]=s,this.uint16[7+u]=l,t},bi);function bi(){vi.apply(this,arguments)}_i.prototype.bytesPerElement=16,yn("StructArrayLayout4i4ui16",_i);var xi,wi=((xi=Kn)&&(Ei.__proto__=xi),((Ei.prototype=Object.create(xi&&xi.prototype)).constructor=Ei).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},Ei.prototype.emplaceBack=function(t,e,r){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,r)},Ei.prototype.emplace=function(t,e,r,n){var i=3*t;return this.float32[0+i]=e,this.float32[1+i]=r,this.float32[2+i]=n,t},Ei);function Ei(){xi.apply(this,arguments)}wi.prototype.bytesPerElement=12,yn("StructArrayLayout3f12",wi);var Si,ki=((Si=Kn)&&(Ci.__proto__=Si),((Ci.prototype=Object.create(Si&&Si.prototype)).constructor=Ci).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},Ci.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},Ci.prototype.emplace=function(t,e){var r=1*t;return this.uint32[0+r]=e,t},Ci);function Ci(){Si.apply(this,arguments)}ki.prototype.bytesPerElement=4,yn("StructArrayLayout1ul4",ki);var Ti,Ai=((Ti=Kn)&&(Pi.__proto__=Ti),((Pi.prototype=Object.create(Ti&&Ti.prototype)).constructor=Pi).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},Pi.prototype.emplaceBack=function(t,e,r,n,i,o,a,s,l,u,c){var p=this.length;return this.resize(p+1),this.emplace(p,t,e,r,n,i,o,a,s,l,u,c)},Pi.prototype.emplace=function(t,e,r,n,i,o,a,s,l,u,c,p){var h=12*t,f=6*t;return this.int16[0+h]=e,this.int16[1+h]=r,this.int16[2+h]=n,this.int16[3+h]=i,this.int16[4+h]=o,this.int16[5+h]=a,this.uint32[3+f]=s,this.uint16[8+h]=l,this.uint16[9+h]=u,this.int16[10+h]=c,this.int16[11+h]=p,t},Pi);function Pi(){Ti.apply(this,arguments)}Ai.prototype.bytesPerElement=24,yn("StructArrayLayout6i1ul2ui2i24",Ai);var Ii,Mi=((Ii=Kn)&&(zi.__proto__=Ii),((zi.prototype=Object.create(Ii&&Ii.prototype)).constructor=zi).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},zi.prototype.emplaceBack=function(t,e,r,n,i,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,r,n,i,o)},zi.prototype.emplace=function(t,e,r,n,i,o,a){var s=6*t;return this.int16[0+s]=e,this.int16[1+s]=r,this.int16[2+s]=n,this.int16[3+s]=i,this.int16[4+s]=o,this.int16[5+s]=a,t},zi);function zi(){Ii.apply(this,arguments)}Mi.prototype.bytesPerElement=12,yn("StructArrayLayout2i2i2i12",Mi);var Li,Oi=((Li=Kn)&&(Di.__proto__=Li),((Di.prototype=Object.create(Li&&Li.prototype)).constructor=Di).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},Di.prototype.emplaceBack=function(t,e,r,n){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,r,n)},Di.prototype.emplace=function(t,e,r,n,i){var o=12*t,a=3*t;return this.uint8[0+o]=e,this.uint8[1+o]=r,this.float32[1+a]=n,this.float32[2+a]=i,t},Di);function Di(){Li.apply(this,arguments)}Oi.prototype.bytesPerElement=12,yn("StructArrayLayout2ub2f12",Oi);var Ri,Fi=((Ri=Kn)&&(Bi.__proto__=Ri),((Bi.prototype=Object.create(Ri&&Ri.prototype)).constructor=Bi).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},Bi.prototype.emplaceBack=function(t,e,r,n,i,o,a,s,l,u,c,p,h,f,d){var m=this.length;return this.resize(m+1),this.emplace(m,t,e,r,n,i,o,a,s,l,u,c,p,h,f,d)},Bi.prototype.emplace=function(t,e,r,n,i,o,a,s,l,u,c,p,h,f,d,m){var y=22*t,g=11*t,v=44*t;return this.int16[0+y]=e,this.int16[1+y]=r,this.uint16[2+y]=n,this.uint16[3+y]=i,this.uint32[2+g]=o,this.uint32[3+g]=a,this.uint32[4+g]=s,this.uint16[10+y]=l,this.uint16[11+y]=u,this.uint16[12+y]=c,this.float32[7+g]=p,this.float32[8+g]=h,this.uint8[36+v]=f,this.uint8[37+v]=d,this.uint32[10+g]=m,t},Bi);function Bi(){Ri.apply(this,arguments)}Fi.prototype.bytesPerElement=44,yn("StructArrayLayout2i2ui3ul3ui2f2ub1ul44",Fi);var ji,Ni=((ji=Kn)&&(Ui.__proto__=ji),((Ui.prototype=Object.create(ji&&ji.prototype)).constructor=Ui).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},Ui.prototype.emplaceBack=function(t,e,r,n,i,o,a,s,l,u,c,p,h,f,d,m,y,g){var v=this.length;return this.resize(v+1),this.emplace(v,t,e,r,n,i,o,a,s,l,u,c,p,h,f,d,m,y,g)},Ui.prototype.emplace=function(t,e,r,n,i,o,a,s,l,u,c,p,h,f,d,m,y,g,v){var _=22*t,b=11*t;return this.int16[0+_]=e,this.int16[1+_]=r,this.int16[2+_]=n,this.int16[3+_]=i,this.int16[4+_]=o,this.int16[5+_]=a,this.uint16[6+_]=s,this.uint16[7+_]=l,this.uint16[8+_]=u,this.uint16[9+_]=c,this.uint16[10+_]=p,this.uint16[11+_]=h,this.uint16[12+_]=f,this.uint16[13+_]=d,this.uint16[14+_]=m,this.uint32[8+b]=y,this.float32[9+b]=g,this.float32[10+b]=v,t},Ui);function Ui(){ji.apply(this,arguments)}Ni.prototype.bytesPerElement=44,yn("StructArrayLayout6i9ui1ul2f44",Ni);var Vi,qi=((Vi=Kn)&&(Zi.__proto__=Vi),((Zi.prototype=Object.create(Vi&&Vi.prototype)).constructor=Zi).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},Zi.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},Zi.prototype.emplace=function(t,e){var r=1*t;return this.float32[0+r]=e,t},Zi);function Zi(){Vi.apply(this,arguments)}qi.prototype.bytesPerElement=4,yn("StructArrayLayout1f4",qi);var Gi,Wi=((Gi=Kn)&&(Hi.__proto__=Gi),((Hi.prototype=Object.create(Gi&&Gi.prototype)).constructor=Hi).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},Hi.prototype.emplaceBack=function(t,e,r){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,r)},Hi.prototype.emplace=function(t,e,r,n){var i=3*t;return this.int16[0+i]=e,this.int16[1+i]=r,this.int16[2+i]=n,t},Hi);function Hi(){Gi.apply(this,arguments)}Wi.prototype.bytesPerElement=6,yn("StructArrayLayout3i6",Wi);var Xi,$i=((Xi=Kn)&&(Ki.__proto__=Xi),((Ki.prototype=Object.create(Xi&&Xi.prototype)).constructor=Ki).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},Ki.prototype.emplaceBack=function(t,e,r){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,r)},Ki.prototype.emplace=function(t,e,r,n){var i=2*t,o=4*t;return this.uint32[0+i]=e,this.uint16[2+o]=r,this.uint16[3+o]=n,t},Ki);function Ki(){Xi.apply(this,arguments)}$i.prototype.bytesPerElement=8,yn("StructArrayLayout1ul2ui8",$i);var Ji,Yi=((Ji=Kn)&&(Qi.__proto__=Ji),((Qi.prototype=Object.create(Ji&&Ji.prototype)).constructor=Qi).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},Qi.prototype.emplaceBack=function(t,e,r){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,r)},Qi.prototype.emplace=function(t,e,r,n){var i=3*t;return this.uint16[0+i]=e,this.uint16[1+i]=r,this.uint16[2+i]=n,t},Qi);function Qi(){Ji.apply(this,arguments)}Yi.prototype.bytesPerElement=6,yn("StructArrayLayout3ui6",Yi);var to,eo=((to=Kn)&&(ro.__proto__=to),((ro.prototype=Object.create(to&&to.prototype)).constructor=ro).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},ro.prototype.emplaceBack=function(t,e){var r=this.length;return this.resize(r+1),this.emplace(r,t,e)},ro.prototype.emplace=function(t,e,r){var n=2*t;return this.uint16[0+n]=e,this.uint16[1+n]=r,t},ro);function ro(){to.apply(this,arguments)}eo.prototype.bytesPerElement=4,yn("StructArrayLayout2ui4",eo);var no,io=((no=Kn)&&(oo.__proto__=no),((oo.prototype=Object.create(no&&no.prototype)).constructor=oo).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},oo.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},oo.prototype.emplace=function(t,e){var r=1*t;return this.uint16[0+r]=e,t},oo);function oo(){no.apply(this,arguments)}io.prototype.bytesPerElement=2,yn("StructArrayLayout1ui2",io);var ao,so=((ao=Kn)&&(lo.__proto__=ao),((lo.prototype=Object.create(ao&&ao.prototype)).constructor=lo).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},lo.prototype.emplaceBack=function(t,e){var r=this.length;return this.resize(r+1),this.emplace(r,t,e)},lo.prototype.emplace=function(t,e,r){var n=2*t;return this.float32[0+n]=e,this.float32[1+n]=r,t},lo);function lo(){ao.apply(this,arguments)}so.prototype.bytesPerElement=8,yn("StructArrayLayout2f8",so);var uo,co=((uo=Kn)&&(po.__proto__=uo),((po.prototype=Object.create(uo&&uo.prototype)).constructor=po).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},po.prototype.emplaceBack=function(t,e,r,n){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,r,n)},po.prototype.emplace=function(t,e,r,n,i){var o=4*t;return this.float32[0+o]=e,this.float32[1+o]=r,this.float32[2+o]=n,this.float32[3+o]=i,t},po);function po(){uo.apply(this,arguments)}co.prototype.bytesPerElement=16,yn("StructArrayLayout4f16",co);var ho=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},radius:{configurable:!0},signedDistanceFromAnchor:{configurable:!0},anchorPoint:{configurable:!0}};return r.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},r.anchorPointX.set=function(t){this._structArray.int16[this._pos2+0]=t},r.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},r.anchorPointY.set=function(t){this._structArray.int16[this._pos2+1]=t},r.x1.get=function(){return this._structArray.int16[this._pos2+2]},r.x1.set=function(t){this._structArray.int16[this._pos2+2]=t},r.y1.get=function(){return this._structArray.int16[this._pos2+3]},r.y1.set=function(t){this._structArray.int16[this._pos2+3]=t},r.x2.get=function(){return this._structArray.int16[this._pos2+4]},r.x2.set=function(t){this._structArray.int16[this._pos2+4]=t},r.y2.get=function(){return this._structArray.int16[this._pos2+5]},r.y2.set=function(t){this._structArray.int16[this._pos2+5]=t},r.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},r.featureIndex.set=function(t){this._structArray.uint32[this._pos4+3]=t},r.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},r.sourceLayerIndex.set=function(t){this._structArray.uint16[this._pos2+8]=t},r.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},r.bucketIndex.set=function(t){this._structArray.uint16[this._pos2+9]=t},r.radius.get=function(){return this._structArray.int16[this._pos2+10]},r.radius.set=function(t){this._structArray.int16[this._pos2+10]=t},r.signedDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+11]},r.signedDistanceFromAnchor.set=function(t){this._structArray.int16[this._pos2+11]=t},r.anchorPoint.get=function(){return new st(this.anchorPointX,this.anchorPointY)},Object.defineProperties(e.prototype,r),e}($n);ho.prototype.size=24;var fo,mo=((fo=Ai)&&(yo.__proto__=fo),((yo.prototype=Object.create(fo&&fo.prototype)).constructor=yo).prototype.get=function(t){return new ho(this,t)},yo);function yo(){fo.apply(this,arguments)}yn("CollisionBoxArray",mo);var go=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0}};return r.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},r.anchorX.set=function(t){this._structArray.int16[this._pos2+0]=t},r.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},r.anchorY.set=function(t){this._structArray.int16[this._pos2+1]=t},r.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},r.glyphStartIndex.set=function(t){this._structArray.uint16[this._pos2+2]=t},r.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},r.numGlyphs.set=function(t){this._structArray.uint16[this._pos2+3]=t},r.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},r.vertexStartIndex.set=function(t){this._structArray.uint32[this._pos4+2]=t},r.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},r.lineStartIndex.set=function(t){this._structArray.uint32[this._pos4+3]=t},r.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},r.lineLength.set=function(t){this._structArray.uint32[this._pos4+4]=t},r.segment.get=function(){return this._structArray.uint16[this._pos2+10]},r.segment.set=function(t){this._structArray.uint16[this._pos2+10]=t},r.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},r.lowerSize.set=function(t){this._structArray.uint16[this._pos2+11]=t},r.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},r.upperSize.set=function(t){this._structArray.uint16[this._pos2+12]=t},r.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},r.lineOffsetX.set=function(t){this._structArray.float32[this._pos4+7]=t},r.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},r.lineOffsetY.set=function(t){this._structArray.float32[this._pos4+8]=t},r.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},r.writingMode.set=function(t){this._structArray.uint8[this._pos1+36]=t},r.hidden.get=function(){return this._structArray.uint8[this._pos1+37]},r.hidden.set=function(t){this._structArray.uint8[this._pos1+37]=t},r.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},r.crossTileID.set=function(t){this._structArray.uint32[this._pos4+10]=t},Object.defineProperties(e.prototype,r),e}($n);go.prototype.size=44;var vo,_o=((vo=Fi)&&(bo.__proto__=vo),((bo.prototype=Object.create(vo&&vo.prototype)).constructor=bo).prototype.get=function(t){return new go(this,t)},bo);function bo(){vo.apply(this,arguments)}yn("PlacedSymbolArray",_o);var xo=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},radialTextOffset:{configurable:!0}};return r.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},r.anchorX.set=function(t){this._structArray.int16[this._pos2+0]=t},r.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},r.anchorY.set=function(t){this._structArray.int16[this._pos2+1]=t},r.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},r.rightJustifiedTextSymbolIndex.set=function(t){this._structArray.int16[this._pos2+2]=t},r.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},r.centerJustifiedTextSymbolIndex.set=function(t){this._structArray.int16[this._pos2+3]=t},r.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},r.leftJustifiedTextSymbolIndex.set=function(t){this._structArray.int16[this._pos2+4]=t},r.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},r.verticalPlacedTextSymbolIndex.set=function(t){this._structArray.int16[this._pos2+5]=t},r.key.get=function(){return this._structArray.uint16[this._pos2+6]},r.key.set=function(t){this._structArray.uint16[this._pos2+6]=t},r.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+7]},r.textBoxStartIndex.set=function(t){this._structArray.uint16[this._pos2+7]=t},r.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+8]},r.textBoxEndIndex.set=function(t){this._structArray.uint16[this._pos2+8]=t},r.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},r.iconBoxStartIndex.set=function(t){this._structArray.uint16[this._pos2+9]=t},r.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},r.iconBoxEndIndex.set=function(t){this._structArray.uint16[this._pos2+10]=t},r.featureIndex.get=function(){return this._structArray.uint16[this._pos2+11]},r.featureIndex.set=function(t){this._structArray.uint16[this._pos2+11]=t},r.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+12]},r.numHorizontalGlyphVertices.set=function(t){this._structArray.uint16[this._pos2+12]=t},r.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+13]},r.numVerticalGlyphVertices.set=function(t){this._structArray.uint16[this._pos2+13]=t},r.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+14]},r.numIconVertices.set=function(t){this._structArray.uint16[this._pos2+14]=t},r.crossTileID.get=function(){return this._structArray.uint32[this._pos4+8]},r.crossTileID.set=function(t){this._structArray.uint32[this._pos4+8]=t},r.textBoxScale.get=function(){return this._structArray.float32[this._pos4+9]},r.textBoxScale.set=function(t){this._structArray.float32[this._pos4+9]=t},r.radialTextOffset.get=function(){return this._structArray.float32[this._pos4+10]},r.radialTextOffset.set=function(t){this._structArray.float32[this._pos4+10]=t},Object.defineProperties(e.prototype,r),e}($n);xo.prototype.size=44;var wo,Eo=((wo=Ni)&&(So.__proto__=wo),((So.prototype=Object.create(wo&&wo.prototype)).constructor=So).prototype.get=function(t){return new xo(this,t)},So);function So(){wo.apply(this,arguments)}yn("SymbolInstanceArray",Eo);var ko=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={offsetX:{configurable:!0}};return r.offsetX.get=function(){return this._structArray.float32[this._pos4+0]},r.offsetX.set=function(t){this._structArray.float32[this._pos4+0]=t},Object.defineProperties(e.prototype,r),e}($n);ko.prototype.size=4;var Co,To=((Co=qi)&&(Ao.__proto__=Co),((Ao.prototype=Object.create(Co&&Co.prototype)).constructor=Ao).prototype.getoffsetX=function(t){return this.float32[1*t+0]},Ao.prototype.get=function(t){return new ko(this,t)},Ao);function Ao(){Co.apply(this,arguments)}yn("GlyphOffsetArray",To);var Po=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={x:{configurable:!0},y:{configurable:!0},tileUnitDistanceFromAnchor:{configurable:!0}};return r.x.get=function(){return this._structArray.int16[this._pos2+0]},r.x.set=function(t){this._structArray.int16[this._pos2+0]=t},r.y.get=function(){return this._structArray.int16[this._pos2+1]},r.y.set=function(t){this._structArray.int16[this._pos2+1]=t},r.tileUnitDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+2]},r.tileUnitDistanceFromAnchor.set=function(t){this._structArray.int16[this._pos2+2]=t},Object.defineProperties(e.prototype,r),e}($n);Po.prototype.size=6;var Io,Mo=((Io=Wi)&&(zo.__proto__=Io),((zo.prototype=Object.create(Io&&Io.prototype)).constructor=zo).prototype.getx=function(t){return this.int16[3*t+0]},zo.prototype.gety=function(t){return this.int16[3*t+1]},zo.prototype.gettileUnitDistanceFromAnchor=function(t){return this.int16[3*t+2]},zo.prototype.get=function(t){return new Po(this,t)},zo);function zo(){Io.apply(this,arguments)}yn("SymbolLineVertexArray",Mo);var Lo=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return r.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},r.featureIndex.set=function(t){this._structArray.uint32[this._pos4+0]=t},r.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},r.sourceLayerIndex.set=function(t){this._structArray.uint16[this._pos2+2]=t},r.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},r.bucketIndex.set=function(t){this._structArray.uint16[this._pos2+3]=t},Object.defineProperties(e.prototype,r),e}($n);Lo.prototype.size=8;var Oo,Do=((Oo=$i)&&(Ro.__proto__=Oo),((Ro.prototype=Object.create(Oo&&Oo.prototype)).constructor=Ro).prototype.get=function(t){return new Lo(this,t)},Ro);function Ro(){Oo.apply(this,arguments)}yn("FeatureIndexArray",Do);function Fo(t){void 0===t&&(t=[]),this.segments=t}var Bo=ei([{name:"a_pos",components:2,type:"Int16"}],4).members;function jo(t,e){return 256*(t=u(Math.floor(t),0,255))+u(Math.floor(e),0,255)}Fo.prototype.prepareSegment=function(t,e,r,n){var i=this.segments[this.segments.length-1];return Fo.MAX_VERTEX_ARRAY_LENGTH<t&&lt("Max vertices per segment is "+Fo.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+t),(!i||i.vertexLength+t>Fo.MAX_VERTEX_ARRAY_LENGTH||i.sortKey!==n)&&(i={vertexOffset:e.length,primitiveOffset:r.length,vertexLength:0,primitiveLength:0},void 0!==n&&(i.sortKey=n),this.segments.push(i)),i},Fo.prototype.get=function(){return this.segments},Fo.prototype.destroy=function(){for(var t=0,e=this.segments;t<e.length;t+=1){var r=e[t];for(var n in r.vaos)r.vaos[n].destroy()}},Fo.simpleSegment=function(t,e,r,n){return new Fo([{vertexOffset:t,primitiveOffset:e,vertexLength:r,primitiveLength:n,vaos:{},sortKey:0}])},Fo.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,yn("SegmentVector",Fo);function No(){this.ids=[],this.positions=[],this.indexed=!1}function Uo(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}No.prototype.add=function(t,e,r,n){this.ids.push(t),this.positions.push(e,r,n)},No.prototype.getPositions=function(t){for(var e=0,r=this.ids.length-1;e<r;){var n=e+r>>1;this.ids[n]>=t?r=n:e=1+n}for(var i=[];this.ids[e]===t;){var o=this.positions[3*e],a=this.positions[3*e+1],s=this.positions[3*e+2];i.push({index:o,start:a,end:s}),e++}return i},No.serialize=function(t,e){var r=new Float64Array(t.ids),n=new Uint32Array(t.positions);return function t(e,r,n,i){if(!(i<=n)){for(var o=e[n+i>>1],a=n-1,s=i+1;;){for(;e[++a]<o;);for(;e[--s]>o;);if(s<=a)break;Uo(e,a,s),Uo(r,3*a,3*s),Uo(r,3*a+1,3*s+1),Uo(r,3*a+2,3*s+2)}t(e,r,n,s),t(e,r,s+1,i)}}(r,n,0,r.length-1),e.push(r.buffer,n.buffer),{ids:r,positions:n}},No.deserialize=function(t){var e=new No;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e},yn("FeaturePositionMap",No);function Vo(t,e){this.gl=t.gl,this.location=e}var qo,Zo,Go,Wo,Ho,Xo,$o,Ko=(($o=Vo)&&(ca.__proto__=$o),((ca.prototype=Object.create($o&&$o.prototype)).constructor=ca).prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1i(this.location,t))},ca),Jo=((Xo=Vo)&&(ua.__proto__=Xo),((ua.prototype=Object.create(Xo&&Xo.prototype)).constructor=ua).prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))},ua),Yo=((Ho=Vo)&&(la.__proto__=Ho),((la.prototype=Object.create(Ho&&Ho.prototype)).constructor=la).prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]||(this.current=t,this.gl.uniform2f(this.location,t[0],t[1]))},la),Qo=((Wo=Vo)&&(sa.__proto__=Wo),((sa.prototype=Object.create(Wo&&Wo.prototype)).constructor=sa).prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]||(this.current=t,this.gl.uniform3f(this.location,t[0],t[1],t[2]))},sa),ta=((Go=Vo)&&(aa.__proto__=Go),((aa.prototype=Object.create(Go&&Go.prototype)).constructor=aa).prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))},aa),ea=((Zo=Vo)&&(oa.__proto__=Zo),((oa.prototype=Object.create(Zo&&Zo.prototype)).constructor=oa).prototype.set=function(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))},oa),ra=new Float32Array(16),na=((qo=Vo)&&(ia.__proto__=qo),((ia.prototype=Object.create(qo&&qo.prototype)).constructor=ia).prototype.set=function(t){if(t[12]!==this.current[12]||t[0]!==this.current[0])return this.current=t,void this.gl.uniformMatrix4fv(this.location,!1,t);for(var e=1;e<16;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix4fv(this.location,!1,t);break}},ia);function ia(t,e){qo.call(this,t,e),this.current=ra}function oa(t,e){Zo.call(this,t,e),this.current=$t.transparent}function aa(t,e){Go.call(this,t,e),this.current=[0,0,0,0]}function sa(t,e){Wo.call(this,t,e),this.current=[0,0,0]}function la(t,e){Ho.call(this,t,e),this.current=[0,0]}function ua(t,e){Xo.call(this,t,e),this.current=0}function ca(t,e){$o.call(this,t,e),this.current=0}function pa(t){return[jo(255*t.r,255*t.g),jo(255*t.b,255*t.a)]}function ha(t,e,r){this.value=t,this.names=e,this.uniformNames=this.names.map(function(t){return"u_"+t}),this.type=r,this.maxValue=-1/0}ha.prototype.defines=function(){return this.names.map(function(t){return"#define HAS_UNIFORM_u_"+t})},ha.prototype.setConstantPatternPositions=function(){},ha.prototype.populatePaintArray=function(){},ha.prototype.updatePaintArray=function(){},ha.prototype.upload=function(){},ha.prototype.destroy=function(){},ha.prototype.setUniforms=function(t,e,r,n){e.set(n.constantOr(this.value))},ha.prototype.getBinding=function(t,e){return"color"===this.type?new ea(t,e):new Jo(t,e)},ha.serialize=function(t){var e=t.value,r=t.names,n=t.type;return{value:vn(e),names:r,type:n}},ha.deserialize=function(t){var e=t.value,r=t.names,n=t.type;return new ha(_n(e),r,n)};function fa(t,e,r){this.value=t,this.names=e,this.uniformNames=this.names.map(function(t){return"u_"+t}),this.type=r,this.maxValue=-1/0,this.patternPositions={patternTo:null,patternFrom:null}}fa.prototype.defines=function(){return this.names.map(function(t){return"#define HAS_UNIFORM_u_"+t})},fa.prototype.populatePaintArray=function(){},fa.prototype.updatePaintArray=function(){},fa.prototype.upload=function(){},fa.prototype.destroy=function(){},fa.prototype.setConstantPatternPositions=function(t,e){this.patternPositions.patternTo=t.tlbr,this.patternPositions.patternFrom=e.tlbr},fa.prototype.setUniforms=function(t,e,r,n,i){var o=this.patternPositions;"u_pattern_to"===i&&o.patternTo&&e.set(o.patternTo),"u_pattern_from"===i&&o.patternFrom&&e.set(o.patternFrom)},fa.prototype.getBinding=function(t,e){return new ta(t,e)};function da(t,e,r,n){this.expression=t,this.names=e,this.type=r,this.uniformNames=this.names.map(function(t){return"a_"+t}),this.maxValue=-1/0,this.paintVertexAttributes=e.map(function(t){return{name:"a_"+t,type:"Float32",components:"color"===r?2:1,offset:0}}),this.paintVertexArray=new n}da.prototype.defines=function(){return[]},da.prototype.setConstantPatternPositions=function(){},da.prototype.populatePaintArray=function(t,e){var r=this.paintVertexArray,n=r.length;r.reserve(t);var i=this.expression.evaluate(new Cn(0),e,{});if("color"===this.type)for(var o=pa(i),a=n;a<t;a++)r.emplaceBack(o[0],o[1]);else{for(var s=n;s<t;s++)r.emplaceBack(i);this.maxValue=Math.max(this.maxValue,i)}},da.prototype.updatePaintArray=function(t,e,r,n){var i=this.paintVertexArray,o=this.expression.evaluate({zoom:0},r,n);if("color"===this.type)for(var a=pa(o),s=t;s<e;s++)i.emplace(s,a[0],a[1]);else{for(var l=t;l<e;l++)i.emplace(l,o);this.maxValue=Math.max(this.maxValue,o)}},da.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},da.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},da.prototype.setUniforms=function(t,e){e.set(0)},da.prototype.getBinding=function(t,e){return new Jo(t,e)};function ma(t,e,r,n,i,o){this.expression=t,this.names=e,this.uniformNames=this.names.map(function(t){return"a_"+t+"_t"}),this.type=r,this.useIntegerZoom=n,this.zoom=i,this.maxValue=-1/0;var a=o;this.paintVertexAttributes=e.map(function(t){return{name:"a_"+t,type:"Float32",components:"color"===r?4:2,offset:0}}),this.paintVertexArray=new a}ma.prototype.defines=function(){return[]},ma.prototype.setConstantPatternPositions=function(){},ma.prototype.populatePaintArray=function(t,e){var r=this.paintVertexArray,n=r.length;r.reserve(t);var i=this.expression.evaluate(new Cn(this.zoom),e,{}),o=this.expression.evaluate(new Cn(this.zoom+1),e,{});if("color"===this.type)for(var a=pa(i),s=pa(o),l=n;l<t;l++)r.emplaceBack(a[0],a[1],s[0],s[1]);else{for(var u=n;u<t;u++)r.emplaceBack(i,o);this.maxValue=Math.max(this.maxValue,i,o)}},ma.prototype.updatePaintArray=function(t,e,r,n){var i=this.paintVertexArray,o=this.expression.evaluate({zoom:this.zoom},r,n),a=this.expression.evaluate({zoom:this.zoom+1},r,n);if("color"===this.type)for(var s=pa(o),l=pa(a),u=t;u<e;u++)i.emplace(u,s[0],s[1],l[0],l[1]);else{for(var c=t;c<e;c++)i.emplace(c,o,a);this.maxValue=Math.max(this.maxValue,o,a)}},ma.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ma.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},ma.prototype.interpolationFactor=function(t){return this.useIntegerZoom?this.expression.interpolationFactor(Math.floor(t),this.zoom,this.zoom+1):this.expression.interpolationFactor(t,this.zoom,this.zoom+1)},ma.prototype.setUniforms=function(t,e,r){e.set(this.interpolationFactor(r.zoom))},ma.prototype.getBinding=function(t,e){return new Jo(t,e)};function ya(t,e,r,n,i,o,a){this.expression=t,this.names=e,this.type=r,this.uniformNames=this.names.map(function(t){return"a_"+t+"_t"}),this.useIntegerZoom=n,this.zoom=i,this.maxValue=-1/0,this.layerId=a,this.paintVertexAttributes=e.map(function(t){return{name:"a_"+t,type:"Uint16",components:4,offset:0}}),this.zoomInPaintVertexArray=new o,this.zoomOutPaintVertexArray=new o}ya.prototype.defines=function(){return[]},ya.prototype.setConstantPatternPositions=function(){},ya.prototype.populatePaintArray=function(t,e,r){var n=this.zoomInPaintVertexArray,i=this.zoomOutPaintVertexArray,o=this.layerId,a=n.length;if(n.reserve(t),i.reserve(t),r&&e.patterns&&e.patterns[o]){var s=e.patterns[o],l=s.min,u=s.mid,c=s.max,p=r[l],h=r[u],f=r[c];if(!p||!h||!f)return;for(var d=a;d<t;d++)n.emplaceBack(h.tl[0],h.tl[1],h.br[0],h.br[1],p.tl[0],p.tl[1],p.br[0],p.br[1]),i.emplaceBack(h.tl[0],h.tl[1],h.br[0],h.br[1],f.tl[0],f.tl[1],f.br[0],f.br[1])}},ya.prototype.updatePaintArray=function(t,e,r,n,i){var o=this.zoomInPaintVertexArray,a=this.zoomOutPaintVertexArray,s=this.layerId;if(i&&r.patterns&&r.patterns[s]){var l=r.patterns[s],u=l.min,c=l.mid,p=l.max,h=i[u],f=i[c],d=i[p];if(!h||!f||!d)return;for(var m=t;m<e;m++)o.emplace(m,f.tl[0],f.tl[1],f.br[0],f.br[1],h.tl[0],h.tl[1],h.br[0],h.br[1]),a.emplace(m,f.tl[0],f.tl[1],f.br[0],f.br[1],d.tl[0],d.tl[1],d.br[0],d.br[1])}},ya.prototype.upload=function(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ya.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()},ya.prototype.setUniforms=function(t,e){e.set(0)},ya.prototype.getBinding=function(t,e){return new Jo(t,e)};function ga(){this.binders={},this.cacheKey="",this._buffers=[],this._featureMap=new No,this._bufferOffset=0}ga.createDynamic=function(t,e,r){var n,i,o=new ga,a=[];for(var s in t.paint._values)if(r(s)){var l=t.paint.get(s);if(l instanceof jn&&cr(l.property.specification)){var u=(n=s,i=t.type,{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from"],"fill-pattern":["pattern_to","pattern_from"],"fill-extrusion-pattern":["pattern_to","pattern_from"]}[n]||[n.replace(i+"-","").replace(/-/g,"_")]),c=l.property.specification.type,p=l.property.useIntegerZoom;if("cross-faded"===l.property.specification["property-type"]||"cross-faded-data-driven"===l.property.specification["property-type"])if("constant"===l.value.kind)o.binders[s]=new fa(l.value.value,u,c),a.push("/u_"+s);else{var h=_a(s,c,"source");o.binders[s]=new ya(l.value,u,c,p,e,h,t.id),a.push("/a_"+s)}else if("constant"===l.value.kind)o.binders[s]=new ha(l.value.value,u,c),a.push("/u_"+s);else if("source"===l.value.kind){var f=_a(s,c,"source");o.binders[s]=new da(l.value,u,c,f),a.push("/a_"+s)}else{var d=_a(s,c,"composite");o.binders[s]=new ma(l.value,u,c,p,e,d),a.push("/z_"+s)}}}return o.cacheKey=a.sort().join(""),o},ga.prototype.populatePaintArrays=function(t,e,r,n){for(var i in this.binders)this.binders[i].populatePaintArray(t,e,n);void 0!==e.id&&this._featureMap.add(+e.id,r,this._bufferOffset,t),this._bufferOffset=t},ga.prototype.setConstantPatternPositions=function(t,e){for(var r in this.binders)this.binders[r].setConstantPatternPositions(t,e)},ga.prototype.updatePaintArrays=function(t,e,r,n){var i=!1;for(var o in t)for(var a=0,s=this._featureMap.getPositions(+o);a<s.length;a+=1){var l=s[a],u=e.feature(l.index);for(var c in this.binders){var p=this.binders[c];if(!(p instanceof ha||p instanceof fa)&&!0===p.expression.isStateDependent){var h=r.paint.get(c);p.expression=h.value,p.updatePaintArray(l.start,l.end,u,t[o],n),i=!0}}}return i},ga.prototype.defines=function(){var t=[];for(var e in this.binders)t.push.apply(t,this.binders[e].defines());return t},ga.prototype.getPaintVertexBuffers=function(){return this._buffers},ga.prototype.getUniforms=function(t,e){var r=[];for(var n in this.binders)for(var i=this.binders[n],o=0,a=i.uniformNames;o<a.length;o+=1){var s=a[o];if(e[s]){var l=i.getBinding(t,e[s]);r.push({name:s,property:n,binding:l})}}return r},ga.prototype.setUniforms=function(t,e,r,n){for(var i=0,o=e;i<o.length;i+=1){var a=o[i],s=a.name,l=a.property,u=a.binding;this.binders[l].setUniforms(t,u,n,r.get(l),s)}},ga.prototype.updatePatternPaintBuffers=function(t){var e=[];for(var r in this.binders){var n=this.binders[r];if(n instanceof ya){var i=2===t.fromScale?n.zoomInPaintVertexBuffer:n.zoomOutPaintVertexBuffer;i&&e.push(i)}else(n instanceof da||n instanceof ma)&&n.paintVertexBuffer&&e.push(n.paintVertexBuffer)}this._buffers=e},ga.prototype.upload=function(t){for(var e in this.binders)this.binders[e].upload(t);var r=[];for(var n in this.binders){var i=this.binders[n];(i instanceof da||i instanceof ma)&&i.paintVertexBuffer&&r.push(i.paintVertexBuffer)}this._buffers=r},ga.prototype.destroy=function(){for(var t in this.binders)this.binders[t].destroy()};function va(t,e,r,n){void 0===n&&(n=function(){return!0}),this.programConfigurations={};for(var i=0,o=e;i<o.length;i+=1){var a=o[i];this.programConfigurations[a.id]=ga.createDynamic(a,r,n),this.programConfigurations[a.id].layoutAttributes=t}this.needsUpload=!1}function _a(t,e,r){var n={color:{source:so,composite:co},number:{source:qi,composite:so}},i={"line-pattern":{source:yi,composite:yi},"fill-pattern":{source:yi,composite:yi},"fill-extrusion-pattern":{source:yi,composite:yi}}[t];return i&&i[r]||n[e][r]}va.prototype.populatePaintArrays=function(t,e,r,n){for(var i in this.programConfigurations)this.programConfigurations[i].populatePaintArrays(t,e,r,n);this.needsUpload=!0},va.prototype.updatePaintArrays=function(t,e,r,n){for(var i=0,o=r;i<o.length;i+=1){var a=o[i];this.needsUpload=this.programConfigurations[a.id].updatePaintArrays(t,e,a,n)||this.needsUpload}},va.prototype.get=function(t){return this.programConfigurations[t]},va.prototype.upload=function(t){if(this.needsUpload){for(var e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}},va.prototype.destroy=function(){for(var t in this.programConfigurations)this.programConfigurations[t].destroy()},yn("ConstantBinder",ha),yn("CrossFadedConstantBinder",fa),yn("SourceExpressionBinder",da),yn("CrossFadedCompositeBinder",ya),yn("CompositeExpressionBinder",ma),yn("ProgramConfiguration",ga,{omit:["_buffers"]}),yn("ProgramConfigurationSet",va);var ba=8192,xa=(16,{min:-1*Math.pow(2,15),max:Math.pow(2,15)-1});function wa(t){for(var e=ba/t.extent,r=t.loadGeometry(),n=0;n<r.length;n++)for(var i=r[n],o=0;o<i.length;o++){var a=i[o];a.x=Math.round(a.x*e),a.y=Math.round(a.y*e),(a.x<xa.min||a.x>xa.max||a.y<xa.min||a.y>xa.max)&&lt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return r}function Ea(t,e,r,n,i){t.emplaceBack(2*e+(n+1)/2,2*r+(i+1)/2)}function Sa(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new ii,this.indexArray=new Yi,this.segments=new Fo,this.programConfigurations=new va(Bo,t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})}function ka(t,e){for(var r=0;r<t.length;r++)if(za(e,t[r]))return!0;for(var n=0;n<e.length;n++)if(za(t,e[n]))return!0;return!!Aa(t,e)}function Ca(t,e){if(1===t.length)return Ma(e,t[0]);for(var r=0;r<e.length;r++)for(var n=e[r],i=0;i<n.length;i++)if(za(t,n[i]))return!0;for(var o=0;o<t.length;o++)if(Ma(e,t[o]))return!0;for(var a=0;a<e.length;a++)if(Aa(t,e[a]))return!0;return!1}function Ta(t,e,r){if(1<t.length){if(Aa(t,e))return!0;for(var n=0;n<e.length;n++)if(Pa(e[n],t,r))return!0}for(var i=0;i<t.length;i++)if(Pa(t[i],e,r))return!0;return!1}function Aa(t,e){if(0===t.length||0===e.length)return!1;for(var r=0;r<t.length-1;r++)for(var n=t[r],i=t[r+1],o=0;o<e.length-1;o++)if(a=n,s=i,l=e[o],u=e[o+1],x(a,l,u)!==x(s,l,u)&&x(a,s,l)!==x(a,s,u))return!0;var a,s,l,u;return!1}function Pa(t,e,r){var n=r*r;if(1===e.length)return t.distSqr(e[0])<n;for(var i=1;i<e.length;i++)if(Ia(t,e[i-1],e[i])<n)return!0;return!1}function Ia(t,e,r){var n=e.distSqr(r);if(0===n)return t.distSqr(e);var i=((t.x-e.x)*(r.x-e.x)+(t.y-e.y)*(r.y-e.y))/n;return i<0?t.distSqr(e):1<i?t.distSqr(r):t.distSqr(r.sub(e)._mult(i)._add(e))}function Ma(t,e){for(var r,n,i,o=!1,a=0;a<t.length;a++)for(var s=0,l=(r=t[a]).length-1;s<r.length;l=s++)n=r[s],i=r[l],n.y>e.y!=i.y>e.y&&e.x<(i.x-n.x)*(e.y-n.y)/(i.y-n.y)+n.x&&(o=!o);return o}function za(t,e){for(var r=!1,n=0,i=t.length-1;n<t.length;i=n++){var o=t[n],a=t[i];o.y>e.y!=a.y>e.y&&e.x<(a.x-o.x)*(e.y-o.y)/(a.y-o.y)+o.x&&(r=!r)}return r}function La(t,e,r){var n=r[0],i=r[2];if(t.x<n.x&&e.x<n.x||t.x>i.x&&e.x>i.x||t.y<n.y&&e.y<n.y||t.y>i.y&&e.y>i.y)return!1;var o=x(t,e,r[0]);return o!==x(t,e,r[1])||o!==x(t,e,r[2])||o!==x(t,e,r[3])}function Oa(t,e,r){var n=e.paint.get(t).value;return"constant"===n.kind?n.value:r.programConfigurations.get(e.id).binders[t].maxValue}function Da(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Ra(t,e,r,n,i){if(!e[0]&&!e[1])return t;var o=st.convert(e)._mult(i);"viewport"===r&&o._rotate(-n);for(var a=[],s=0;s<t.length;s++){var l=t[s];a.push(l.sub(o))}return a}Sa.prototype.populate=function(t,e){for(var r=0,n=t;r<n.length;r+=1){var i=n[r],o=i.feature,a=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new Cn(this.zoom),o)){var l=wa(o);this.addFeature(o,l,a),e.featureIndex.insert(o,l,a,s,this.index)}}},Sa.prototype.update=function(t,e,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,r)},Sa.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Sa.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Sa.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Bo),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},Sa.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Sa.prototype.addFeature=function(t,e,r){for(var n=0,i=e;n<i.length;n+=1)for(var o=0,a=i[n];o<a.length;o+=1){var s=a[o],l=s.x,u=s.y;if(!(l<0||ba<=l||u<0||ba<=u)){var c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),p=c.vertexLength;Ea(this.layoutVertexArray,l,u,-1,-1),Ea(this.layoutVertexArray,l,u,1,-1),Ea(this.layoutVertexArray,l,u,1,1),Ea(this.layoutVertexArray,l,u,-1,1),this.indexArray.emplaceBack(p,p+1,p+2),this.indexArray.emplaceBack(p,p+3,p+2),c.vertexLength+=4,c.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,r,{})},yn("CircleBucket",Sa,{omit:["layers"]});var Fa={paint:new Xn({"circle-radius":new Vn(kt.paint_circle["circle-radius"]),"circle-color":new Vn(kt.paint_circle["circle-color"]),"circle-blur":new Vn(kt.paint_circle["circle-blur"]),"circle-opacity":new Vn(kt.paint_circle["circle-opacity"]),"circle-translate":new Un(kt.paint_circle["circle-translate"]),"circle-translate-anchor":new Un(kt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Un(kt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Un(kt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Vn(kt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Vn(kt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Vn(kt.paint_circle["circle-stroke-opacity"])})},Ba="undefined"!=typeof Float32Array?Float32Array:Array;function ja(){var t=new Ba(9);return Ba!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function Na(){var t=new Ba(3);return Ba!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Ua(t,e,r){var n=new Ba(3);return n[0]=t,n[1]=e,n[2]=r,n}Math.PI;var Va;function qa(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*o+r[12]*a,t[1]=r[1]*n+r[5]*i+r[9]*o+r[13]*a,t[2]=r[2]*n+r[6]*i+r[10]*o+r[14]*a,t[3]=r[3]*n+r[7]*i+r[11]*o+r[15]*a,t}function Za(){var t=new Ba(4);return Ba!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}Na(),Va=new Ba(4),Ba!=Float32Array&&(Va[0]=0,Va[1]=0,Va[2]=0,Va[3]=0);var Ga;Na(),Ua(1,0,0),Ua(0,1,0),Za(),Za(),ja(),Ga=new Ba(2),Ba!=Float32Array&&(Ga[0]=0,Ga[1]=0);var Wa,Ha=((Wa=Yn)&&(Xa.__proto__=Wa),((Xa.prototype=Object.create(Wa&&Wa.prototype)).constructor=Xa).prototype.createBucket=function(t){return new Sa(t)},Xa.prototype.queryRadius=function(t){var e=t;return Oa("circle-radius",this,e)+Oa("circle-stroke-width",this,e)+Da(this.paint.get("circle-translate"))},Xa.prototype.queryIntersectsFeature=function(t,e,r,n,i,o,a,s){for(var l=Ra(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,a),u=this.paint.get("circle-radius").evaluate(e,r)+this.paint.get("circle-stroke-width").evaluate(e,r),c="map"===this.paint.get("circle-pitch-alignment"),p=c?l:function(t,e){return l.map(function(t){return $a(t,e)})}(0,s),h=c?u*a:u,f=0,d=n;f<d.length;f+=1)for(var m=0,y=d[f];m<y.length;m+=1){var g=y[m],v=c?g:$a(g,s),_=h,b=qa([],[g.x,g.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?_*=b[3]/o.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(_*=o.cameraToCenterDistance/b[3]),E=_,za(x=p,w=v)||Pa(w,x,E))return!0}var x,w,E;return!1},Xa);function Xa(t){Wa.call(this,t,Fa)}function $a(t,e){var r=qa([],[t.x,t.y,0,1],e);return new st(r[0]/r[3],r[1]/r[3])}var Ka,Ja=((Ka=Sa)&&(Ya.__proto__=Ka),(Ya.prototype=Object.create(Ka&&Ka.prototype)).constructor=Ya);function Ya(){Ka.apply(this,arguments)}function Qa(t,e,r,n){var i=e.width,o=e.height;if(n){if(n.length!==i*o*r)throw new RangeError("mismatched image size")}else n=new Uint8Array(i*o*r);return t.width=i,t.height=o,t.data=n,t}function ts(t,e,r){var n=e.width,i=e.height;if(n!==t.width||i!==t.height){var o=Qa({},{width:n,height:i},r);es(t,o,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,n),height:Math.min(t.height,i)},r),t.width=n,t.height=i,t.data=o.data}}function es(t,e,r,n,i,o){if(0===i.width||0===i.height)return e;if(i.width>t.width||i.height>t.height||r.x>t.width-i.width||r.y>t.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>e.width||i.height>e.height||n.x>e.width-i.width||n.y>e.height-i.height)throw new RangeError("out of range destination coordinates for image copy");for(var a=t.data,s=e.data,l=0;l<i.height;l++)for(var u=((r.y+l)*t.width+r.x)*o,c=((n.y+l)*e.width+n.x)*o,p=0;p<i.width*o;p++)s[c+p]=a[u+p];return e}yn("HeatmapBucket",Ja,{omit:["layers"]});var rs=function(t,e){Qa(this,t,1,e)};rs.prototype.resize=function(t){ts(this,t,1)},rs.prototype.clone=function(){return new rs({width:this.width,height:this.height},new Uint8Array(this.data))},rs.copy=function(t,e,r,n,i){es(t,e,r,n,i,1)};function ns(t,e){Qa(this,t,4,e)}ns.prototype.resize=function(t){ts(this,t,4)},ns.prototype.replace=function(t,e){e?this.data.set(t):this.data=t},ns.prototype.clone=function(){return new ns({width:this.width,height:this.height},new Uint8Array(this.data))},ns.copy=function(t,e,r,n,i){es(t,e,r,n,i,4)},yn("AlphaImage",rs),yn("RGBAImage",ns);var is={paint:new Xn({"heatmap-radius":new Vn(kt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Vn(kt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Un(kt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Hn(kt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Un(kt.paint_heatmap["heatmap-opacity"])})};function os(t,e){for(var r=new Uint8Array(1024),n={},i=0,o=0;i<256;i++,o+=4){n[e]=i/255;var a=t.evaluate(n);r[o+0]=Math.floor(255*a.r/a.a),r[o+1]=Math.floor(255*a.g/a.a),r[o+2]=Math.floor(255*a.b/a.a),r[o+3]=Math.floor(255*a.a)}return new ns({width:256,height:1},r)}var as,ss,ls=((ss=Yn)&&(ms.__proto__=ss),((ms.prototype=Object.create(ss&&ss.prototype)).constructor=ms).prototype.createBucket=function(t){return new Ja(t)},ms.prototype._handleSpecialPaintPropertyUpdate=function(t){"heatmap-color"===t&&this._updateColorRamp()},ms.prototype._updateColorRamp=function(){var t=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=os(t,"heatmapDensity"),this.colorRampTexture=null},ms.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},ms.prototype.queryRadius=function(){return 0},ms.prototype.queryIntersectsFeature=function(){return!1},ms.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},ms),us={paint:new Xn({"hillshade-illumination-direction":new Un(kt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Un(kt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Un(kt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Un(kt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Un(kt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Un(kt.paint_hillshade["hillshade-accent-color"])})},cs=((as=Yn)&&(ds.__proto__=as),((ds.prototype=Object.create(as&&as.prototype)).constructor=ds).prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},ds),ps=ei([{name:"a_pos",components:2,type:"Int16"}],4).members,hs=ys,fs=ys;function ds(t){as.call(this,t,us)}function ms(t){ss.call(this,t,is),this._updateColorRamp()}function ys(t,e,r){r=r||2;var n,i,o,a,s,l,u,c=e&&e.length,p=c?e[0]*r:t.length,h=gs(t,0,p,r,!0),f=[];if(!h||h.next===h.prev)return f;if(c&&(h=function(t,e,r,n){var i,o,a,s=[];for(i=0,o=e.length;i<o;i++)(a=gs(t,e[i]*n,i<o-1?e[i+1]*n:t.length,n,!1))===a.next&&(a.steiner=!0),s.push(Ts(a));for(s.sort(Ss),i=0;i<s.length;i++)ks(s[i],r),r=vs(r,r.next);return r}(t,e,h,r)),t.length>80*r){n=o=t[0],i=a=t[1];for(var d=r;d<p;d+=r)(s=t[d])<n&&(n=s),(l=t[d+1])<i&&(i=l),o<s&&(o=s),a<l&&(a=l);u=0!==(u=Math.max(o-n,a-i))?1/u:0}return _s(h,f,r,n,i,u),f}function gs(t,e,r,n,i){var o,a;if(i===0<Fs(t,e,r,n))for(o=e;o<r;o+=n)a=Os(o,t[o],t[o+1],a);else for(o=r-n;e<=o;o-=n)a=Os(o,t[o],t[o+1],a);return a&&Is(a,a.next)&&(Ds(a),a=a.next),a}function vs(t,e){if(!t)return t;e=e||t;var r,n=t;do{if(r=!1,n.steiner||!Is(n,n.next)&&0!==Ps(n.prev,n,n.next))n=n.next;else{if(Ds(n),(n=e=n.prev)===n.next)break;r=!0}}while(r||n!==e);return e}function _s(t,e,r,n,i,o,a){if(t){!a&&o&&function(t,e,r,n){for(var i=t;null===i.z&&(i.z=Cs(i.x,i.y,e,r,n)),i.prevZ=i.prev,i.nextZ=i.next,(i=i.next)!==t;);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,r,n,i,o,a,s,l,u=1;do{for(r=t,o=t=null,a=0;r;){for(a++,n=r,e=s=0;e<u&&(s++,n=n.nextZ);e++);for(l=u;0<s||0<l&&n;)0!==s&&(0===l||!n||r.z<=n.z)?(r=(i=r).nextZ,s--):(n=(i=n).nextZ,l--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;r=n}o.nextZ=null,u*=2}while(1<a)}(i)}(t,n,i,o);for(var s,l,u=t;t.prev!==t.next;)if(s=t.prev,l=t.next,o?xs(t,n,i,o):bs(t))e.push(s.i/r),e.push(t.i/r),e.push(l.i/r),Ds(t),t=l.next,u=l.next;else if((t=l)===u){a?1===a?_s(t=ws(t,e,r),e,r,n,i,o,2):2===a&&Es(t,e,r,n,i,o):_s(vs(t),e,r,n,i,o,1);break}}}function bs(t){var e=t.prev,r=t,n=t.next;if(0<=Ps(e,r,n))return!1;for(var i=t.next.next;i!==t.prev;){if(As(e.x,e.y,r.x,r.y,n.x,n.y,i.x,i.y)&&0<=Ps(i.prev,i,i.next))return!1;i=i.next}return!0}function xs(t,e,r,n){var i=t.prev,o=t,a=t.next;if(0<=Ps(i,o,a))return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,l=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,u=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,p=Cs(s,l,e,r,n),h=Cs(u,c,e,r,n),f=t.prevZ,d=t.nextZ;f&&f.z>=p&&d&&d.z<=h;){if(f!==t.prev&&f!==t.next&&As(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&0<=Ps(f.prev,f,f.next))return!1;if(f=f.prevZ,d!==t.prev&&d!==t.next&&As(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&0<=Ps(d.prev,d,d.next))return!1;d=d.nextZ}for(;f&&f.z>=p;){if(f!==t.prev&&f!==t.next&&As(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&0<=Ps(f.prev,f,f.next))return!1;f=f.prevZ}for(;d&&d.z<=h;){if(d!==t.prev&&d!==t.next&&As(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&0<=Ps(d.prev,d,d.next))return!1;d=d.nextZ}return!0}function ws(t,e,r){var n=t;do{var i=n.prev,o=n.next.next;!Is(i,o)&&Ms(i,n,n.next,o)&&zs(i,o)&&zs(o,i)&&(e.push(i.i/r),e.push(n.i/r),e.push(o.i/r),Ds(n),Ds(n.next),n=t=o),n=n.next}while(n!==t);return n}function Es(t,e,r,n,i,o){var a,s,l=t;do{for(var u=l.next.next;u!==l.prev;){if(l.i!==u.i&&(s=u,(a=l).next.i!==s.i&&a.prev.i!==s.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&Ms(r,r.next,t,e))return 1;r=r.next}while(r!==t);return 0}(a,s)&&zs(a,s)&&zs(s,a)&&function(t,e){for(var r=t,n=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;r.y>o!=r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),(r=r.next)!==t;);return n}(a,s))){var c=Ls(l,u);return l=vs(l,l.next),c=vs(c,c.next),_s(l,e,r,n,i,o),void _s(c,e,r,n,i,o)}u=u.next}l=l.next}while(l!==t)}function Ss(t,e){return t.x-e.x}function ks(t,e){if(e=function(t,e){var r,n=e,i=t.x,o=t.y,a=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var s=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=i&&a<s){if((a=s)===i){if(o===n.y)return n;if(o===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!r)return null;if(i===a)return r.prev;var l,u=r,c=r.x,p=r.y,h=1/0;for(n=r.next;n!==u;)i>=n.x&&n.x>=c&&i!==n.x&&As(o<p?i:a,o,c,p,o<p?a:i,o,n.x,n.y)&&((l=Math.abs(o-n.y)/(i-n.x))<h||l===h&&n.x>r.x)&&zs(n,t)&&(r=n,h=l),n=n.next;return r}(t,e)){var r=Ls(e,t);vs(r,r.next)}}function Cs(t,e,r,n,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Ts(t){for(var e=t,r=t;(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),(e=e.next)!==t;);return r}function As(t,e,r,n,i,o,a,s){return 0<=(i-a)*(e-s)-(t-a)*(o-s)&&0<=(t-a)*(n-s)-(r-a)*(e-s)&&0<=(r-a)*(o-s)-(i-a)*(n-s)}function Ps(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function Is(t,e){return t.x===e.x&&t.y===e.y}function Ms(t,e,r,n){return!!(Is(t,e)&&Is(r,n)||Is(t,n)&&Is(r,e))||0<Ps(t,e,r)!=0<Ps(t,e,n)&&0<Ps(r,n,t)!=0<Ps(r,n,e)}function zs(t,e){return Ps(t.prev,t,t.next)<0?0<=Ps(t,e,t.next)&&0<=Ps(t,t.prev,e):Ps(t,e,t.prev)<0||Ps(t,t.next,e)<0}function Ls(t,e){var r=new Rs(t.i,t.x,t.y),n=new Rs(e.i,e.x,e.y),i=t.next,o=e.prev;return(t.next=e).prev=t,(r.next=i).prev=r,(n.next=r).prev=n,(o.next=n).prev=o,n}function Os(t,e,r,n){var i=new Rs(t,e,r);return n?(i.next=n.next,(i.prev=n).next.prev=i,n.next=i):(i.prev=i).next=i,i}function Ds(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Rs(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Fs(t,e,r,n){for(var i=0,o=e,a=r-n;o<r;o+=n)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}function Bs(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function js(t,e){return t<e?-1:e<t?1:0}function Ns(t,e){var r,n,i,o,a,s=t.length;if(s<=1)return[t];for(var l,u,c=[],p=0;p<s;p++){var h=w(t[p]);0!==h&&(t[p].area=Math.abs(h),void 0===u&&(u=h<0),u===h<0?(l&&c.push(l),l=[t[p]]):l.push(t[p]))}if(l&&c.push(l),1<e)for(var f=0;f<c.length;f++)c[f].length<=e||(r=c[f],n=e,i=1,o=c[f].length-1,a=Us,function t(e,r,n,i,o){for(;n<i;){if(600<i-n){var a=i-n+1,s=r-n+1,l=Math.log(a),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(a-u)/a)*(s-a/2<0?-1:1);t(e,r,Math.max(n,Math.floor(r-s*u/a+c)),Math.min(i,Math.floor(r+(a-s)*u/a+c)),o)}var p=e[r],h=n,f=i;for(Bs(e,n,r),0<o(e[i],p)&&Bs(e,n,i);h<f;){for(Bs(e,h,f),h++,f--;o(e[h],p)<0;)h++;for(;0<o(e[f],p);)f--}0===o(e[n],p)?Bs(e,n,f):Bs(e,++f,i),f<=r&&(n=f+1),r<=f&&(i=f-1)}}(r,n,i||0,o||r.length-1,a||js),c[f]=c[f].slice(0,e));return c}function Us(t,e){return e.area-t.area}function Vs(t,e,r){for(var n=r.patternDependencies,i=!1,o=0,a=e;o<a.length;o+=1){var s=a[o].paint.get(t+"-pattern");s.isConstant()||(i=!0);var l=s.constantOr(null);l&&(i=!0,n[l.to]=!0,n[l.from]=!0)}return i}function qs(t,e,r,n,i){for(var o=i.patternDependencies,a=0,s=e;a<s.length;a+=1){var l=s[a],u=l.paint.get(t+"-pattern").value;if("constant"!==u.kind){var c=u.evaluate({zoom:n-1},r,{}),p=u.evaluate({zoom:n},r,{}),h=u.evaluate({zoom:n+1},r,{});o[c]=!0,o[p]=!0,o[h]=!0,r.patterns[l.id]={min:c,mid:p,max:h}}}return r}ys.deviation=function(t,e,r,n){var i=e&&e.length,o=i?e[0]*r:t.length,a=Math.abs(Fs(t,0,o,r));if(i)for(var s=0,l=e.length;s<l;s++){var u=e[s]*r,c=s<l-1?e[s+1]*r:t.length;a-=Math.abs(Fs(t,u,c,r))}var p=0;for(s=0;s<n.length;s+=3){var h=n[s]*r,f=n[s+1]*r,d=n[s+2]*r;p+=Math.abs((t[h]-t[d])*(t[1+f]-t[1+h])-(t[h]-t[f])*(t[1+d]-t[1+h]))}return 0===a&&0===p?0:Math.abs((p-a)/a)},ys.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)r.vertices.push(t[i][o][a]);0<i&&(n+=t[i-1].length,r.holes.push(n))}return r},hs.default=fs;function Zs(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new ii,this.indexArray=new Yi,this.indexArray2=new eo,this.programConfigurations=new va(ps,t.layers,t.zoom),this.segments=new Fo,this.segments2=new Fo,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})}Zs.prototype.populate=function(t,e){this.features=[],this.hasPattern=Vs("fill",this.layers,e);for(var r=0,n=t;r<n.length;r+=1){var i=n[r],o=i.feature,a=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new Cn(this.zoom),o)){var l=wa(o),u={sourceLayerIndex:s,index:a,geometry:l,properties:o.properties,type:o.type,patterns:{}};void 0!==o.id&&(u.id=o.id),this.hasPattern?this.features.push(qs("fill",this.layers,u,this.zoom,e)):this.addFeature(u,l,a,{}),e.featureIndex.insert(o,l,a,s,this.index)}}},Zs.prototype.update=function(t,e,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,r)},Zs.prototype.addFeatures=function(t,e){for(var r=0,n=this.features;r<n.length;r+=1){var i=n[r],o=i.geometry;this.addFeature(i,o,i.index,e)}},Zs.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Zs.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Zs.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ps),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0},Zs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Zs.prototype.addFeature=function(t,e,r,n){for(var i=0,o=Ns(e,500);i<o.length;i+=1){for(var a=o[i],s=0,l=0,u=a;l<u.length;l+=1)s+=u[l].length;for(var c=this.segments.prepareSegment(s,this.layoutVertexArray,this.indexArray),p=c.vertexLength,h=[],f=[],d=0,m=a;d<m.length;d+=1){var y=m[d];if(0!==y.length){y!==a[0]&&f.push(h.length/2);var g=this.segments2.prepareSegment(y.length,this.layoutVertexArray,this.indexArray2),v=g.vertexLength;this.layoutVertexArray.emplaceBack(y[0].x,y[0].y),this.indexArray2.emplaceBack(v+y.length-1,v),h.push(y[0].x),h.push(y[0].y);for(var _=1;_<y.length;_++)this.layoutVertexArray.emplaceBack(y[_].x,y[_].y),this.indexArray2.emplaceBack(v+_-1,v+_),h.push(y[_].x),h.push(y[_].y);g.vertexLength+=y.length,g.primitiveLength+=y.length}}for(var b=hs(h,f),x=0;x<b.length;x+=3)this.indexArray.emplaceBack(p+b[x],p+b[x+1],p+b[x+2]);c.vertexLength+=s,c.primitiveLength+=b.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,r,n)},yn("FillBucket",Zs,{omit:["layers","features"]});var Gs,Ws={paint:new Xn({"fill-antialias":new Un(kt.paint_fill["fill-antialias"]),"fill-opacity":new Vn(kt.paint_fill["fill-opacity"]),"fill-color":new Vn(kt.paint_fill["fill-color"]),"fill-outline-color":new Vn(kt.paint_fill["fill-outline-color"]),"fill-translate":new Un(kt.paint_fill["fill-translate"]),"fill-translate-anchor":new Un(kt.paint_fill["fill-translate-anchor"]),"fill-pattern":new Gn(kt.paint_fill["fill-pattern"])})},Hs=((Gs=Yn)&&(Ks.__proto__=Gs),((Ks.prototype=Object.create(Gs&&Gs.prototype)).constructor=Ks).prototype.recalculate=function(t){Gs.prototype.recalculate.call(this,t);var e=this.paint._values["fill-outline-color"];"constant"===e.value.kind&&void 0===e.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},Ks.prototype.createBucket=function(t){return new Zs(t)},Ks.prototype.queryRadius=function(){return Da(this.paint.get("fill-translate"))},Ks.prototype.queryIntersectsFeature=function(t,e,r,n,i,o,a){return Ca(Ra(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,a),n)},Ks.prototype.isTileClipped=function(){return!0},Ks),Xs=ei([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,$s=Js;function Ks(t){Gs.call(this,t,Ws)}function Js(t,e,r,n,i){this.properties={},this.extent=r,this.type=0,this._pbf=t,this._geometry=-1,this._keys=n,this._values=i,t.readFields(Ys,this,e)}function Ys(t,e,r){1==t?e.id=r.readVarint():2==t?function(t,e){for(var r=t.readVarint()+t.pos;t.pos<r;){var n=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[n]=i}}(r,e):3==t?e.type=r.readVarint():4==t&&(e._geometry=r.pos)}function Qs(t){for(var e,r,n=0,i=0,o=t.length,a=o-1;i<o;a=i++)e=t[i],n+=((r=t[a]).x-e.x)*(e.y+r.y);return n}Js.types=["Unknown","Point","LineString","Polygon"],Js.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,r=t.readVarint()+t.pos,n=1,i=0,o=0,a=0,s=[];t.pos<r;){if(i<=0){var l=t.readVarint();n=7&l,i=l>>3}if(i--,1===n||2===n)o+=t.readSVarint(),a+=t.readSVarint(),1===n&&(e&&s.push(e),e=[]),e.push(new st(o,a));else{if(7!==n)throw new Error("unknown command "+n);e&&e.push(e[0].clone())}}return e&&s.push(e),s},Js.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,r=1,n=0,i=0,o=0,a=1/0,s=-1/0,l=1/0,u=-1/0;t.pos<e;){if(n<=0){var c=t.readVarint();r=7&c,n=c>>3}if(n--,1===r||2===r)(i+=t.readSVarint())<a&&(a=i),s<i&&(s=i),(o+=t.readSVarint())<l&&(l=o),u<o&&(u=o);else if(7!==r)throw new Error("unknown command "+r)}return[a,l,s,u]},Js.prototype.toGeoJSON=function(t,e,r){var n,i,o=this.extent*Math.pow(2,r),a=this.extent*t,s=this.extent*e,l=this.loadGeometry(),u=Js.types[this.type];function c(t){for(var e=0;e<t.length;e++){var r=t[e],n=180-360*(r.y+s)/o;t[e]=[360*(r.x+a)/o-180,360/Math.PI*Math.atan(Math.exp(n*Math.PI/180))-90]}}switch(this.type){case 1:var p=[];for(n=0;n<l.length;n++)p[n]=l[n][0];c(l=p);break;case 2:for(n=0;n<l.length;n++)c(l[n]);break;case 3:for(l=function(t){var e=t.length;if(e<=1)return[t];for(var r,n,i=[],o=0;o<e;o++){var a=Qs(t[o]);0!==a&&(void 0===n&&(n=a<0),n===a<0?(r&&i.push(r),r=[t[o]]):r.push(t[o]))}return r&&i.push(r),i}(l),n=0;n<l.length;n++)for(i=0;i<l[n].length;i++)c(l[n][i])}1===l.length?l=l[0]:u="Multi"+u;var h={type:"Feature",geometry:{type:u,coordinates:l},properties:this.properties};return"id"in this&&(h.id=this.id),h};var tl=el;function el(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(rl,this,e),this.length=this._features.length}function rl(t,e,r){15===t?e.version=r.readVarint():1===t?e.name=r.readString():5===t?e.extent=r.readVarint():2===t?e._features.push(r.pos):3===t?e._keys.push(r.readString()):4===t&&e._values.push(function(t){for(var e=null,r=t.readVarint()+t.pos;t.pos<r;){var n=t.readVarint()>>3;e=1==n?t.readString():2==n?t.readFloat():3==n?t.readDouble():4==n?t.readVarint64():5==n?t.readVarint():6==n?t.readSVarint():7==n?t.readBoolean():null}return e}(r))}function nl(t,e,r){if(3===t){var n=new tl(r,r.readVarint()+r.pos);n.length&&(e[n.name]=n)}}el.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new $s(this._pbf,e,this.extent,this._keys,this._values)};var il={VectorTile:function(t,e){this.layers=t.readFields(nl,{},e)},VectorTileFeature:$s,VectorTileLayer:tl},ol=il.VectorTileFeature.types,al=Math.pow(2,13);function sl(t,e,r,n,i,o,a,s){t.emplaceBack(e,r,2*Math.floor(n*al)+a,i*al*2,o*al*2,Math.round(s))}function ll(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new ci,this.indexArray=new Yi,this.programConfigurations=new va(Xs,t.layers,t.zoom),this.segments=new Fo,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})}ll.prototype.populate=function(t,e){this.features=[],this.hasPattern=Vs("fill-extrusion",this.layers,e);for(var r=0,n=t;r<n.length;r+=1){var i=n[r],o=i.feature,a=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new Cn(this.zoom),o)){var l=wa(o),u={sourceLayerIndex:s,index:a,geometry:l,properties:o.properties,type:o.type,patterns:{}};void 0!==o.id&&(u.id=o.id),this.hasPattern?this.features.push(qs("fill-extrusion",this.layers,u,this.zoom,e)):this.addFeature(u,l,a,{}),e.featureIndex.insert(o,l,a,s,this.index,!0)}}},ll.prototype.addFeatures=function(t,e){for(var r=0,n=this.features;r<n.length;r+=1){var i=n[r],o=i.geometry;this.addFeature(i,o,i.index,e)}},ll.prototype.update=function(t,e,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,r)},ll.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},ll.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ll.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Xs),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},ll.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ll.prototype.addFeature=function(t,e,r,n){for(var i=0,o=Ns(e,500);i<o.length;i+=1){for(var a=o[i],s=0,l=0,u=a;l<u.length;l+=1)s+=u[l].length;for(var c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),p=0,h=a;p<h.length;p+=1){var f=h[p];if(0!==f.length&&!((L=f).every(function(t){return t.x<0})||L.every(function(t){return t.x>ba})||L.every(function(t){return t.y<0})||L.every(function(t){return t.y>ba})))for(var d=0,m=0;m<f.length;m++){var y=f[m];if(1<=m){var g=f[m-1];if(z=g,!((M=y).x===z.x&&(M.x<0||M.x>ba)||M.y===z.y&&(M.y<0||M.y>ba))){c.vertexLength+4>Fo.MAX_VERTEX_ARRAY_LENGTH&&(c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var v=y.sub(g)._perp()._unit(),_=g.dist(y);32768<d+_&&(d=0),sl(this.layoutVertexArray,y.x,y.y,v.x,v.y,0,0,d),sl(this.layoutVertexArray,y.x,y.y,v.x,v.y,0,1,d),d+=_,sl(this.layoutVertexArray,g.x,g.y,v.x,v.y,0,0,d),sl(this.layoutVertexArray,g.x,g.y,v.x,v.y,0,1,d);var b=c.vertexLength;this.indexArray.emplaceBack(b,b+2,b+1),this.indexArray.emplaceBack(b+1,b+2,b+3),c.vertexLength+=4,c.primitiveLength+=2}}}}if(c.vertexLength+s>Fo.MAX_VERTEX_ARRAY_LENGTH&&(c=this.segments.prepareSegment(s,this.layoutVertexArray,this.indexArray)),"Polygon"===ol[t.type]){for(var x=[],w=[],E=c.vertexLength,S=0,k=a;S<k.length;S+=1){var C=k[S];if(0!==C.length){C!==a[0]&&w.push(x.length/2);for(var T=0;T<C.length;T++){var A=C[T];sl(this.layoutVertexArray,A.x,A.y,0,0,1,1,0),x.push(A.x),x.push(A.y)}}}for(var P=hs(x,w),I=0;I<P.length;I+=3)this.indexArray.emplaceBack(E+P[I],E+P[I+2],E+P[I+1]);c.primitiveLength+=P.length/3,c.vertexLength+=s}}var M,z,L;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,r,n)},yn("FillExtrusionBucket",ll,{omit:["layers","features"]});var ul,cl={paint:new Xn({"fill-extrusion-opacity":new Un(kt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Vn(kt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Un(kt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Un(kt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Gn(kt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Vn(kt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Vn(kt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Un(kt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},pl=((ul=Yn)&&(hl.__proto__=ul),((hl.prototype=Object.create(ul&&ul.prototype)).constructor=hl).prototype.createBucket=function(t){return new ll(t)},hl.prototype.queryRadius=function(){return Da(this.paint.get("fill-extrusion-translate"))},hl.prototype.is3D=function(){return!0},hl.prototype.queryIntersectsFeature=function(t,e,r,n,i,o,a,s){var l=Ra(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),o.angle,a),u=this.paint.get("fill-extrusion-height").evaluate(e,r),c=this.paint.get("fill-extrusion-base").evaluate(e,r),p=function(t,e){for(var r=[],n=0,i=l;n<i.length;n+=1){var o=i[n],a=[o.x,o.y,0,1];qa(a,a,e),r.push(new st(a[0]/a[3],a[1]/a[3]))}return r}(0,s),h=function(t,e,r,n){for(var i=[],o=[],a=n[8]*e,s=n[9]*e,l=n[10]*e,u=n[11]*e,c=n[8]*r,p=n[9]*r,h=n[10]*r,f=n[11]*r,d=0,m=t;d<m.length;d+=1){for(var y=[],g=[],v=0,_=m[d];v<_.length;v+=1){var b=_[v],x=b.x,w=b.y,E=n[0]*x+n[4]*w+n[12],S=n[1]*x+n[5]*w+n[13],k=n[2]*x+n[6]*w+n[14],C=n[3]*x+n[7]*w+n[15],T=k+l,A=C+u,P=E+c,I=S+p,M=k+h,z=C+f,L=new st((E+a)/A,(S+s)/A);L.z=T/A,y.push(L);var O=new st(P/z,I/z);O.z=M/z,g.push(O)}i.push(y),o.push(g)}return[i,o]}(n,c,u,s);return function(t,e,r){var n=1/0;Ca(r,e)&&(n=dl(r,e[0]));for(var i=0;i<e.length;i++)for(var o=e[i],a=t[i],s=0;s<o.length-1;s++){var l=o[s],u=o[s+1],c=a[s],p=[l,u,a[s+1],c,l];ka(r,p)&&(n=Math.min(n,dl(r,p)))}return n!==1/0&&n}(h[0],h[1],p)},hl);function hl(t){ul.call(this,t,cl)}function fl(t,e){return t.x*e.x+t.y*e.y}function dl(t,e){if(1===t.length){var r=e[0],n=e[1],i=e[3],o=t[0],a=n.sub(r),s=i.sub(r),l=o.sub(r),u=fl(a,a),c=fl(a,s),p=fl(s,s),h=fl(l,a),f=fl(l,s),d=u*p-c*c,m=(p*h-c*f)/d,y=(u*f-c*h)/d,g=1-m-y;return r.z*g+n.z*m+i.z*y}for(var v=1/0,_=0,b=e;_<b.length;_+=1){var x=b[_];v=Math.min(v,x.z)}return v}var ml=ei([{name:"a_pos_normal",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,yl=il.VectorTileFeature.types,gl=Math.cos(Math.PI/180*37.5),vl=Math.pow(2,14)/.5;function _l(t,e,r,n,i,o,a){t.emplaceBack(e.x,e.y,n?1:0,i?1:-1,Math.round(63*r.x)+128,Math.round(63*r.y)+128,1+(0===o?0:o<0?-1:1)|(.5*a&63)<<2,.5*a>>6)}function bl(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.features=[],this.hasPattern=!1,this.layoutVertexArray=new fi,this.indexArray=new Yi,this.programConfigurations=new va(ml,t.layers,t.zoom),this.segments=new Fo,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})}function xl(t,e){return(t/e.tileTotal*(e.end-e.start)+e.start)*(vl-1)}bl.prototype.populate=function(t,e){this.features=[],this.hasPattern=Vs("line",this.layers,e);for(var r=0,n=t;r<n.length;r+=1){var i=n[r],o=i.feature,a=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new Cn(this.zoom),o)){var l=wa(o),u={sourceLayerIndex:s,index:a,geometry:l,properties:o.properties,type:o.type,patterns:{}};void 0!==o.id&&(u.id=o.id),this.hasPattern?this.features.push(qs("line",this.layers,u,this.zoom,e)):this.addFeature(u,l,a,{}),e.featureIndex.insert(o,l,a,s,this.index)}}},bl.prototype.update=function(t,e,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,r)},bl.prototype.addFeatures=function(t,e){for(var r=0,n=this.features;r<n.length;r+=1){var i=n[r],o=i.geometry;this.addFeature(i,o,i.index,e)}},bl.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},bl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},bl.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ml),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},bl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},bl.prototype.addFeature=function(t,e,r,n){for(var i=this.layers[0].layout,o=i.get("line-join").evaluate(t,{}),a=i.get("line-cap"),s=i.get("line-miter-limit"),l=i.get("line-round-limit"),u=0,c=e;u<c.length;u+=1){var p=c[u];this.addLine(p,t,o,a,s,l,r,n)}},bl.prototype.addLine=function(t,e,r,n,i,o,a,s){var l=null;e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end")&&(l={start:e.properties.mapbox_clip_start,end:e.properties.mapbox_clip_end,tileTotal:void 0});for(var u="Polygon"===yl[e.type],c=t.length;2<=c&&t[c-1].equals(t[c-2]);)c--;for(var p=0;p<c-1&&t[p].equals(t[p+1]);)p++;if(!(c<(u?3:2))){l&&(l.tileTotal=function(t,e,r){for(var n,i,o=0,a=p;a<r-1;a++)n=t[a],i=t[a+1],o+=n.dist(i);return o}(t,0,c)),"bevel"===r&&(i=1.05);var h,f,d,m=ba/(512*this.overscaling)*15,y=t[p],g=this.segments.prepareSegment(10*c,this.layoutVertexArray,this.indexArray),v=n,_=u?"butt":n,b=!(this.distance=0),x=void 0,w=void 0,E=void 0,S=void 0;this.e1=this.e2=this.e3=-1,u&&(h=t[c-2],S=y.sub(h)._unit()._perp());for(var k=p;k<c;k++)if(!(w=u&&k===c-1?t[p+1]:t[k+1])||!t[k].equals(w)){S&&(E=S),h&&(x=h),h=t[k],S=w?w.sub(h)._unit()._perp():E;var C=(E=E||S).add(S);0===C.x&&0===C.y||C._unit();var T=C.x*S.x+C.y*S.y,A=0!=T?1/T:1/0,P=T<gl&&x&&w;if(P&&p<k){var I=h.dist(x);if(2*m<I){var M=h.sub(h.sub(x)._mult(m/I)._round());this.distance+=M.dist(x),this.addCurrentVertex(M,this.distance,E.mult(1),0,0,!1,g,l),x=M}}var z=x&&w,L=z?r:w?v:_;if(z&&"round"===L&&(A<o?L="miter":A<=2&&(L="fakeround")),"miter"===L&&i<A&&(L="bevel"),"bevel"===L&&(2<A&&(L="flipbevel"),A<i&&(L="miter")),x&&(this.distance+=h.dist(x)),"miter"===L)C._mult(A),this.addCurrentVertex(h,this.distance,C,0,0,!1,g,l);else if("flipbevel"===L){if(100<A)C=S.clone().mult(-1);else{var O=0<E.x*S.y-E.y*S.x?-1:1,D=A*E.add(S).mag()/E.sub(S).mag();C._perp()._mult(D*O)}this.addCurrentVertex(h,this.distance,C,0,0,!1,g,l),this.addCurrentVertex(h,this.distance,C.mult(-1),0,0,!1,g,l)}else if("bevel"===L||"fakeround"===L){var R=0<E.x*S.y-E.y*S.x,F=-Math.sqrt(A*A-1);if(R?(d=0,f=F):(f=0,d=F),b||this.addCurrentVertex(h,this.distance,E,f,d,!1,g,l),"fakeround"===L){for(var B=Math.floor(8*(.5-(T-.5))),j=void 0,N=0;N<B;N++)j=S.mult((N+1)/(B+1))._add(E)._unit(),this.addPieSliceVertex(h,this.distance,j,R,g,l);this.addPieSliceVertex(h,this.distance,C,R,g,l);for(var U=B-1;0<=U;U--)j=E.mult((U+1)/(B+1))._add(S)._unit(),this.addPieSliceVertex(h,this.distance,j,R,g,l)}w&&this.addCurrentVertex(h,this.distance,S,-f,-d,!1,g,l)}else"butt"===L?(b||this.addCurrentVertex(h,this.distance,E,0,0,!1,g,l),w&&this.addCurrentVertex(h,this.distance,S,0,0,!1,g,l)):"square"===L?(b||(this.addCurrentVertex(h,this.distance,E,1,1,!1,g,l),this.e1=this.e2=-1),w&&this.addCurrentVertex(h,this.distance,S,-1,-1,!1,g,l)):"round"===L&&(b||(this.addCurrentVertex(h,this.distance,E,0,0,!1,g,l),this.addCurrentVertex(h,this.distance,E,1,1,!0,g,l),this.e1=this.e2=-1),w&&(this.addCurrentVertex(h,this.distance,S,-1,-1,!0,g,l),this.addCurrentVertex(h,this.distance,S,0,0,!1,g,l)));if(P&&k<c-1){var V=h.dist(w);if(2*m<V){var q=h.add(w.sub(h)._mult(m/V)._round());this.distance+=q.dist(h),this.addCurrentVertex(q,this.distance,S.mult(1),0,0,!1,g,l),h=q}}b=!1}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,a,s)}},bl.prototype.addCurrentVertex=function(t,e,r,n,i,o,a,s){var l,u=this.layoutVertexArray,c=this.indexArray;s&&(e=xl(e,s)),l=r.clone(),n&&l._sub(r.perp()._mult(n)),_l(u,t,l,o,!1,n,e),this.e3=a.vertexLength++,0<=this.e1&&0<=this.e2&&(c.emplaceBack(this.e1,this.e2,this.e3),a.primitiveLength++),this.e1=this.e2,this.e2=this.e3,l=r.mult(-1),i&&l._sub(r.perp()._mult(i)),_l(u,t,l,o,!0,-i,e),this.e3=a.vertexLength++,0<=this.e1&&0<=this.e2&&(c.emplaceBack(this.e1,this.e2,this.e3),a.primitiveLength++),this.e1=this.e2,this.e2=this.e3,vl/2<e&&!s&&(this.distance=0,this.addCurrentVertex(t,this.distance,r,n,i,o,a))},bl.prototype.addPieSliceVertex=function(t,e,r,n,i,o){r=r.mult(n?-1:1);var a=this.layoutVertexArray,s=this.indexArray;o&&(e=xl(e,o)),_l(a,t,r,!1,n,0,e),this.e3=i.vertexLength++,0<=this.e1&&0<=this.e2&&(s.emplaceBack(this.e1,this.e2,this.e3),i.primitiveLength++),n?this.e2=this.e3:this.e1=this.e3},yn("LineBucket",bl,{omit:["layers","features"]});var wl,El=new Xn({"line-cap":new Un(kt.layout_line["line-cap"]),"line-join":new Vn(kt.layout_line["line-join"]),"line-miter-limit":new Un(kt.layout_line["line-miter-limit"]),"line-round-limit":new Un(kt.layout_line["line-round-limit"])}),Sl={paint:new Xn({"line-opacity":new Vn(kt.paint_line["line-opacity"]),"line-color":new Vn(kt.paint_line["line-color"]),"line-translate":new Un(kt.paint_line["line-translate"]),"line-translate-anchor":new Un(kt.paint_line["line-translate-anchor"]),"line-width":new Vn(kt.paint_line["line-width"]),"line-gap-width":new Vn(kt.paint_line["line-gap-width"]),"line-offset":new Vn(kt.paint_line["line-offset"]),"line-blur":new Vn(kt.paint_line["line-blur"]),"line-dasharray":new qn(kt.paint_line["line-dasharray"]),"line-pattern":new Gn(kt.paint_line["line-pattern"]),"line-gradient":new Hn(kt.paint_line["line-gradient"])}),layout:El},kl=((wl=Vn)&&(Cl.__proto__=wl),((Cl.prototype=Object.create(wl&&wl.prototype)).constructor=Cl).prototype.possiblyEvaluate=function(t,e){return e=new Cn(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,zoomHistory:e.zoomHistory,transition:e.transition}),wl.prototype.possiblyEvaluate.call(this,t,e)},Cl.prototype.evaluate=function(t,e,r,n){return e=d({},e,{zoom:Math.floor(e.zoom)}),wl.prototype.evaluate.call(this,t,e,r,n)},new Cl(Sl.paint.properties["line-width"].specification));function Cl(){wl.apply(this,arguments)}kl.useIntegerZoom=!0;var Tl,Al=((Tl=Yn)&&(Pl.__proto__=Tl),((Pl.prototype=Object.create(Tl&&Tl.prototype)).constructor=Pl).prototype._handleSpecialPaintPropertyUpdate=function(t){"line-gradient"===t&&this._updateGradient()},Pl.prototype._updateGradient=function(){var t=this._transitionablePaint._values["line-gradient"].value.expression;this.gradient=os(t,"lineProgress"),this.gradientTexture=null},Pl.prototype.recalculate=function(t){Tl.prototype.recalculate.call(this,t),this.paint._values["line-floorwidth"]=kl.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)},Pl.prototype.createBucket=function(t){return new bl(t)},Pl.prototype.queryRadius=function(t){var e=t,r=Il(Oa("line-width",this,e),Oa("line-gap-width",this,e)),n=Oa("line-offset",this,e);return r/2+Math.abs(n)+Da(this.paint.get("line-translate"))},Pl.prototype.queryIntersectsFeature=function(t,e,r,n,i,o,a){var s=Ra(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),o.angle,a),l=a/2*Il(this.paint.get("line-width").evaluate(e,r),this.paint.get("line-gap-width").evaluate(e,r)),u=this.paint.get("line-offset").evaluate(e,r);return u&&(n=function(t,e){for(var r=[],n=new st(0,0),i=0;i<t.length;i++){for(var o=t[i],a=[],s=0;s<o.length;s++){var l=o[s-1],u=o[s],c=o[s+1],p=0===s?n:u.sub(l)._unit()._perp(),h=s===o.length-1?n:c.sub(u)._unit()._perp(),f=p._add(h)._unit(),d=f.x*h.x+f.y*h.y;f._mult(1/d),a.push(f._mult(e)._add(u))}r.push(a)}return r}(n,u*a)),function(t,e,r){for(var n=0;n<e.length;n++){var i=e[n];if(3<=t.length)for(var o=0;o<i.length;o++)if(za(t,i[o]))return!0;if(Ta(t,i,r))return!0}return!1}(s,n,l)},Pl.prototype.isTileClipped=function(){return!0},Pl);function Pl(t){Tl.call(this,t,Sl)}function Il(t,e){return 0<e?e+2*t:t}var Ml=ei([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"}]),zl=ei([{name:"a_projected_pos",components:3,type:"Float32"}],4),Ll=(ei([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),ei([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Ol=(ei([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"radius"},{type:"Int16",name:"signedDistanceFromAnchor"}]),ei([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Dl=ei([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4);function Rl(t,i,o){return t.sections.forEach(function(t){var e,r,n;t.text=(e=t.text,r=o,"uppercase"===(n=i.layout.get("text-transform").evaluate(r,{}))?e=e.toLocaleUpperCase():"lowercase"===n&&(e=e.toLocaleLowerCase()),zn.applyArabicShaping&&(e=zn.applyArabicShaping(e)),e)}),t}ei([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"}]),ei([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"radialTextOffset"}]),ei([{type:"Float32",name:"offsetX"}]),ei([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Fl,Bl={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"},jl=((Fl=st)&&(Nl.__proto__=Fl),((Nl.prototype=Object.create(Fl&&Fl.prototype)).constructor=Nl).prototype.clone=function(){return new Nl(this.x,this.y,this.angle,this.segment)},Nl);function Nl(t,e,r,n){Fl.call(this,t,e),this.angle=r,void 0!==n&&(this.segment=n)}yn("Anchor",jl);var Ul=256;function Vl(t,e){var r=e.expression;if("constant"===r.kind)return{functionType:"constant",layoutSize:r.evaluate(new Cn(t+1))};if("source"===r.kind)return{functionType:"source"};for(var n=r.zoomStops,i=0;i<n.length&&n[i]<=t;)i++;for(var o=i=Math.max(0,i-1);o<n.length&&n[o]<t+1;)o++;o=Math.min(n.length-1,o);var a={min:n[i],max:n[o]};return"composite"===r.kind?{functionType:"composite",zoomRange:a,propertyValue:e.value}:{functionType:"camera",layoutSize:r.evaluate(new Cn(t+1)),zoomRange:a,sizeRange:{min:r.evaluate(new Cn(a.min)),max:r.evaluate(new Cn(a.max))},propertyValue:e.value}}function ql(t,e,r){var n=e;return"source"===t.functionType?r.lowerSize/Ul:"composite"===t.functionType?we(r.lowerSize/Ul,r.upperSize/Ul,n.uSizeT):n.uSize}function Zl(t,e,r){if("constant"===t.functionType)return{uSizeT:0,uSize:t.layoutSize};if("source"===t.functionType)return{uSizeT:0,uSize:0};if("camera"===t.functionType){var n=t.propertyValue,i=t.zoomRange,o=t.sizeRange,a=u(Pr(n,r.specification).interpolationFactor(e,i.min,i.max),0,1);return{uSizeT:0,uSize:o.min+a*(o.max-o.min)}}var s=t.propertyValue,l=t.zoomRange;return{uSizeT:u(Pr(s,r.specification).interpolationFactor(e,l.min,l.max),0,1),uSize:0}}var Gl=Object.freeze({getSizeData:Vl,evaluateSizeForFeature:ql,evaluateSizeForZoom:Zl,SIZE_PACK_FACTOR:Ul}),Wl=il.VectorTileFeature.types,Hl=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Xl(t,e,r,n,i,o,a,s){t.emplaceBack(e,r,Math.round(32*n),Math.round(32*i),o,a,s?s[0]:0,s?s[1]:0)}function $l(t,e,r){t.emplaceBack(e.x,e.y,r),t.emplaceBack(e.x,e.y,r),t.emplaceBack(e.x,e.y,r),t.emplaceBack(e.x,e.y,r)}function Kl(t){this.layoutVertexArray=new _i,this.indexArray=new Yi,this.programConfigurations=t,this.segments=new Fo,this.dynamicLayoutVertexArray=new wi,this.opacityVertexArray=new ki,this.placedSymbolArray=new _o}Kl.prototype.upload=function(t,e,r,n){r&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ml.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,zl.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,Hl,!0),this.opacityVertexBuffer.itemSize=1),(r||n)&&this.programConfigurations.upload(t)},Kl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},yn("SymbolBuffers",Kl);function Jl(t,e,r){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new r,this.segments=new Fo,this.collisionVertexArray=new Oi}Jl.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,Ll.members,!0)},Jl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},yn("CollisionBuffers",Jl);var Yl=function(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1;var e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Vl(this.zoom,e["text-size"]),this.iconSizeData=Vl(this.zoom,e["icon-size"]);var r=this.layers[0].layout,n=r.get("symbol-sort-key"),i=r.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==i&&void 0!==n.constantOr(1);var o="viewport-y"===i||"auto"===i&&!this.sortFeaturesByKey;this.sortFeaturesByY=o&&(r.get("text-allow-overlap")||r.get("icon-allow-overlap")||r.get("text-ignore-placement")||r.get("icon-ignore-placement")),this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id}),this.sourceID=t.sourceID};Yl.prototype.createArrays=function(){this.text=new Kl(new va(Ml.members,this.layers,this.zoom,function(t){return/^text/.test(t)})),this.icon=new Kl(new va(Ml.members,this.layers,this.zoom,function(t){return/^icon/.test(t)})),this.collisionBox=new Jl(Mi,Ol.members,eo),this.collisionCircle=new Jl(Mi,Dl.members,Yi),this.glyphOffsetArray=new To,this.lineVertexArray=new Mo,this.symbolInstances=new Eo},Yl.prototype.calculateGlyphDependencies=function(t,e,r,n){for(var i=0;i<t.length;i++)if(e[t.charCodeAt(i)]=!0,r&&n){var o=Bl[t.charAt(i)];o&&(e[o.charCodeAt(0)]=!0)}},Yl.prototype.populate=function(t,e){var r=this.layers[0],n=r.layout,i=n.get("text-font"),o=n.get("text-field"),a=n.get("icon-image"),s=("constant"!==o.value.kind||0<o.value.value.toString().length)&&("constant"!==i.value.kind||0<i.value.value.length),l="constant"!==a.value.kind||a.value.value&&0<a.value.value.length,u=n.get("symbol-sort-key");if(this.features=[],s||l){for(var c=e.iconDependencies,p=e.glyphDependencies,h=new Cn(this.zoom),f=0,d=t;f<d.length;f+=1){var m=d[f],y=m.feature,g=m.index,v=m.sourceLayerIndex;if(r._featureFilter(h,y)){var _=void 0;if(s){var b=r.getValueAndResolveTokens("text-field",y);_=Rl(b instanceof Yt?b:Yt.fromString(b),r,y)}var x=void 0;if(l&&(x=r.getValueAndResolveTokens("icon-image",y)),_||x){var w=this.sortFeaturesByKey?u.evaluate(y,{}):void 0,E={text:_,icon:x,index:g,sourceLayerIndex:v,geometry:wa(y),properties:y.properties,type:Wl[y.type],sortKey:w};if(void 0!==y.id&&(E.id=y.id),this.features.push(E),x&&(c[x]=!0),_)for(var S=i.evaluate(y,{}).join(","),k="map"===n.get("text-rotation-alignment")&&"point"!==n.get("symbol-placement"),C=0,T=_.sections;C<T.length;C+=1){var A=T[C],P=wn(_.toString()),I=A.fontStack||S,M=p[I]=p[I]||{};this.calculateGlyphDependencies(A.text,M,k,P)}}}}"line"===n.get("symbol-placement")&&(this.features=function(e){var i={},o={},a=[],r=0;function t(t){a.push(e[t]),r++}function n(t,e,r){var n=o[t];return delete o[t],o[e]=n,a[n].geometry[0].pop(),a[n].geometry[0]=a[n].geometry[0].concat(r[0]),n}function s(t,e,r){var n=i[e];return delete i[e],i[t]=n,a[n].geometry[0].shift(),a[n].geometry[0]=r[0].concat(a[n].geometry[0]),n}function l(t,e,r){var n=r?e[0][e[0].length-1]:e[0][0];return t+":"+n.x+":"+n.y}for(var u=0;u<e.length;u++){var c=e[u],p=c.geometry,h=c.text?c.text.toString():null;if(h){var f=l(h,p),d=l(h,p,!0);if(f in o&&d in i&&o[f]!==i[d]){var m=s(f,d,p),y=n(f,d,a[m].geometry);delete i[f],delete o[d],o[l(h,a[y].geometry,!0)]=y,a[m].geometry=null}else f in o?n(f,d,p):d in i?s(f,d,p):(t(u),i[f]=r-1,o[d]=r-1)}else t(u)}return a.filter(function(t){return t.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(t,e){return t.sortKey-e.sortKey})}},Yl.prototype.update=function(t,e,r){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,r),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,r))},Yl.prototype.isEmpty=function(){return 0===this.symbolInstances.length},Yl.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Yl.prototype.upload=function(t){this.uploaded||(this.collisionBox.upload(t),this.collisionCircle.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Yl.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.collisionBox.destroy(),this.collisionCircle.destroy()},Yl.prototype.addToLineVertexArray=function(t,e){var r=this.lineVertexArray.length;if(void 0!==t.segment){for(var n=t.dist(e[t.segment+1]),i=t.dist(e[t.segment]),o={},a=t.segment+1;a<e.length;a++)o[a]={x:e[a].x,y:e[a].y,tileUnitDistanceFromAnchor:n},a<e.length-1&&(n+=e[a+1].dist(e[a]));for(var s=t.segment||0;0<=s;s--)o[s]={x:e[s].x,y:e[s].y,tileUnitDistanceFromAnchor:i},0<s&&(i+=e[s-1].dist(e[s]));for(var l=0;l<e.length;l++){var u=o[l];this.lineVertexArray.emplaceBack(u.x,u.y,u.tileUnitDistanceFromAnchor)}}return{lineStartIndex:r,lineLength:this.lineVertexArray.length-r}},Yl.prototype.addSymbols=function(t,e,r,n,i,o,a,s,l,u){for(var c=t.indexArray,p=t.layoutVertexArray,h=t.dynamicLayoutVertexArray,f=t.segments.prepareSegment(4*e.length,t.layoutVertexArray,t.indexArray,o.sortKey),d=this.glyphOffsetArray.length,m=f.vertexLength,y=0,g=e;y<g.length;y+=1){var v=g[y],_=v.tl,b=v.tr,x=v.bl,w=v.br,E=v.tex,S=f.vertexLength,k=v.glyphOffset[1];Xl(p,s.x,s.y,_.x,k+_.y,E.x,E.y,r),Xl(p,s.x,s.y,b.x,k+b.y,E.x+E.w,E.y,r),Xl(p,s.x,s.y,x.x,k+x.y,E.x,E.y+E.h,r),Xl(p,s.x,s.y,w.x,k+w.y,E.x+E.w,E.y+E.h,r),$l(h,s,0),c.emplaceBack(S,S+1,S+2),c.emplaceBack(S+1,S+2,S+3),f.vertexLength+=4,f.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(v.glyphOffset[0])}t.placedSymbolArray.emplaceBack(s.x,s.y,d,this.glyphOffsetArray.length-d,m,l,u,s.segment,r?r[0]:0,r?r[1]:0,n[0],n[1],a,!1,0),t.programConfigurations.populatePaintArrays(t.layoutVertexArray.length,o,o.index,{})},Yl.prototype._addCollisionDebugVertex=function(t,e,r,n,i,o){return e.emplaceBack(0,0),t.emplaceBack(r.x,r.y,n,i,Math.round(o.x),Math.round(o.y))},Yl.prototype.addCollisionDebugVertices=function(t,e,r,n,i,o,a,s){var l=i.segments.prepareSegment(4,i.layoutVertexArray,i.indexArray),u=l.vertexLength,c=i.layoutVertexArray,p=i.collisionVertexArray,h=a.anchorX,f=a.anchorY;if(this._addCollisionDebugVertex(c,p,o,h,f,new st(t,e)),this._addCollisionDebugVertex(c,p,o,h,f,new st(r,e)),this._addCollisionDebugVertex(c,p,o,h,f,new st(r,n)),this._addCollisionDebugVertex(c,p,o,h,f,new st(t,n)),l.vertexLength+=4,s){var d=i.indexArray;d.emplaceBack(u,u+1,u+2),d.emplaceBack(u,u+2,u+3),l.primitiveLength+=2}else{var m=i.indexArray;m.emplaceBack(u,u+1),m.emplaceBack(u+1,u+2),m.emplaceBack(u+2,u+3),m.emplaceBack(u+3,u),l.primitiveLength+=4}},Yl.prototype.addDebugCollisionBoxes=function(t,e,r){for(var n=t;n<e;n++){var i=this.collisionBoxArray.get(n),o=i.x1,a=i.y1,s=i.x2,l=i.y2,u=0<i.radius;this.addCollisionDebugVertices(o,a,s,l,u?this.collisionCircle:this.collisionBox,i.anchorPoint,r,u)}},Yl.prototype.generateCollisionDebugBuffers=function(){for(var t=0;t<this.symbolInstances.length;t++){var e=this.symbolInstances.get(t);this.addDebugCollisionBoxes(e.textBoxStartIndex,e.textBoxEndIndex,e),this.addDebugCollisionBoxes(e.iconBoxStartIndex,e.iconBoxEndIndex,e)}},Yl.prototype._deserializeCollisionBoxesForSymbol=function(t,e,r,n,i){for(var o={},a=e;a<r;a++){var s=t.get(a);if(0===s.radius){o.textBox={x1:s.x1,y1:s.y1,x2:s.x2,y2:s.y2,anchorPointX:s.anchorPointX,anchorPointY:s.anchorPointY},o.textFeatureIndex=s.featureIndex;break}o.textCircles||(o.textCircles=[],o.textFeatureIndex=s.featureIndex),o.textCircles.push(s.anchorPointX,s.anchorPointY,s.radius,s.signedDistanceFromAnchor,1)}for(var l=n;l<i;l++){var u=t.get(l);if(0===u.radius){o.iconBox={x1:u.x1,y1:u.y1,x2:u.x2,y2:u.y2,anchorPointX:u.anchorPointX,anchorPointY:u.anchorPointY},o.iconFeatureIndex=u.featureIndex;break}}return o},Yl.prototype.deserializeCollisionBoxes=function(t){this.collisionArrays=[];for(var e=0;e<this.symbolInstances.length;e++){var r=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,r.textBoxStartIndex,r.textBoxEndIndex,r.iconBoxStartIndex,r.iconBoxEndIndex))}},Yl.prototype.hasTextData=function(){return 0<this.text.segments.get().length},Yl.prototype.hasIconData=function(){return 0<this.icon.segments.get().length},Yl.prototype.hasCollisionBoxData=function(){return 0<this.collisionBox.segments.get().length},Yl.prototype.hasCollisionCircleData=function(){return 0<this.collisionCircle.segments.get().length},Yl.prototype.addIndicesForPlacedTextSymbol=function(t){for(var e=this.text.placedSymbolArray.get(t),r=e.vertexStartIndex+4*e.numGlyphs,n=e.vertexStartIndex;n<r;n+=4)this.text.indexArray.emplaceBack(n,n+1,n+2),this.text.indexArray.emplaceBack(n+1,n+2,n+3)},Yl.prototype.sortFeatures=function(t){var n=this;if(this.sortFeaturesByY&&this.sortedAngle!==t&&(this.sortedAngle=t,!(1<this.text.segments.get().length||1<this.icon.segments.get().length))){for(var e=[],r=0;r<this.symbolInstances.length;r++)e.push(r);for(var i=Math.sin(t),o=Math.cos(t),a=[],s=[],l=0;l<this.symbolInstances.length;l++){var u=this.symbolInstances.get(l);a.push(0|Math.round(i*u.anchorX+o*u.anchorY)),s.push(u.featureIndex)}e.sort(function(t,e){return a[t]-a[e]||s[e]-s[t]}),this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var c=0,p=e;c<p.length;c+=1){var h=p[c],f=this.symbolInstances.get(h);this.featureSortOrder.push(f.featureIndex),[f.rightJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.leftJustifiedTextSymbolIndex].forEach(function(t,e,r){0<=t&&r.indexOf(t)===e&&n.addIndicesForPlacedTextSymbol(t)}),0<=f.verticalPlacedTextSymbolIndex&&this.addIndicesForPlacedTextSymbol(f.verticalPlacedTextSymbolIndex);var d=this.icon.placedSymbolArray.get(h);if(d.numGlyphs){var m=d.vertexStartIndex;this.icon.indexArray.emplaceBack(m,m+1,m+2),this.icon.indexArray.emplaceBack(m+1,m+2,m+3)}}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},yn("SymbolBucket",Yl,{omit:["layers","collisionBoxArray","features","compareText"]}),Yl.MAX_GLYPHS=65535,Yl.addDynamicAttributes=$l;var Ql,tu,eu,ru=new Xn({"symbol-placement":new Un(kt.layout_symbol["symbol-placement"]),"symbol-spacing":new Un(kt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Un(kt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Vn(kt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Un(kt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Un(kt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Un(kt.layout_symbol["icon-ignore-placement"]),"icon-optional":new Un(kt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Un(kt.layout_symbol["icon-rotation-alignment"]),"icon-size":new Vn(kt.layout_symbol["icon-size"]),"icon-text-fit":new Un(kt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Un(kt.layout_symbol["icon-text-fit-padding"]),"icon-image":new Vn(kt.layout_symbol["icon-image"]),"icon-rotate":new Vn(kt.layout_symbol["icon-rotate"]),"icon-padding":new Un(kt.layout_symbol["icon-padding"]),"icon-keep-upright":new Un(kt.layout_symbol["icon-keep-upright"]),"icon-offset":new Vn(kt.layout_symbol["icon-offset"]),"icon-anchor":new Vn(kt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Un(kt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Un(kt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Un(kt.layout_symbol["text-rotation-alignment"]),"text-field":new Vn(kt.layout_symbol["text-field"]),"text-font":new Vn(kt.layout_symbol["text-font"]),"text-size":new Vn(kt.layout_symbol["text-size"]),"text-max-width":new Vn(kt.layout_symbol["text-max-width"]),"text-line-height":new Un(kt.layout_symbol["text-line-height"]),"text-letter-spacing":new Vn(kt.layout_symbol["text-letter-spacing"]),"text-justify":new Vn(kt.layout_symbol["text-justify"]),"text-radial-offset":new Vn(kt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Un(kt.layout_symbol["text-variable-anchor"]),"text-anchor":new Vn(kt.layout_symbol["text-anchor"]),"text-max-angle":new Un(kt.layout_symbol["text-max-angle"]),"text-rotate":new Vn(kt.layout_symbol["text-rotate"]),"text-padding":new Un(kt.layout_symbol["text-padding"]),"text-keep-upright":new Un(kt.layout_symbol["text-keep-upright"]),"text-transform":new Vn(kt.layout_symbol["text-transform"]),"text-offset":new Vn(kt.layout_symbol["text-offset"]),"text-allow-overlap":new Un(kt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Un(kt.layout_symbol["text-ignore-placement"]),"text-optional":new Un(kt.layout_symbol["text-optional"])}),nu={paint:new Xn({"icon-opacity":new Vn(kt.paint_symbol["icon-opacity"]),"icon-color":new Vn(kt.paint_symbol["icon-color"]),"icon-halo-color":new Vn(kt.paint_symbol["icon-halo-color"]),"icon-halo-width":new Vn(kt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Vn(kt.paint_symbol["icon-halo-blur"]),"icon-translate":new Un(kt.paint_symbol["icon-translate"]),"icon-translate-anchor":new Un(kt.paint_symbol["icon-translate-anchor"]),"text-opacity":new Vn(kt.paint_symbol["text-opacity"]),"text-color":new Vn(kt.paint_symbol["text-color"]),"text-halo-color":new Vn(kt.paint_symbol["text-halo-color"]),"text-halo-width":new Vn(kt.paint_symbol["text-halo-width"]),"text-halo-blur":new Vn(kt.paint_symbol["text-halo-blur"]),"text-translate":new Un(kt.paint_symbol["text-translate"]),"text-translate-anchor":new Un(kt.paint_symbol["text-translate-anchor"])}),layout:ru},iu=((eu=Yn)&&(pu.__proto__=eu),((pu.prototype=Object.create(eu&&eu.prototype)).constructor=pu).prototype.recalculate=function(t){eu.prototype.recalculate.call(this,t),"auto"===this.layout.get("icon-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"))},pu.prototype.getValueAndResolveTokens=function(t,e){var r,n=this.layout.get(t).evaluate(e,{}),i=this._unevaluatedLayout._values[t];return i.isDataDriven()||Er(i.value)?n:(r=e.properties,n.replace(/{([^{}]+)}/g,function(t,e){return e in r?String(r[e]):""}))},pu.prototype.createBucket=function(t){return new Yl(t)},pu.prototype.queryRadius=function(){return 0},pu.prototype.queryIntersectsFeature=function(){return!1},pu),ou={paint:new Xn({"background-color":new Un(kt.paint_background["background-color"]),"background-pattern":new qn(kt.paint_background["background-pattern"]),"background-opacity":new Un(kt.paint_background["background-opacity"])})},au=((tu=Yn)&&(cu.__proto__=tu),(cu.prototype=Object.create(tu&&tu.prototype)).constructor=cu),su={paint:new Xn({"raster-opacity":new Un(kt.paint_raster["raster-opacity"]),"raster-hue-rotate":new Un(kt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Un(kt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Un(kt.paint_raster["raster-brightness-max"]),"raster-saturation":new Un(kt.paint_raster["raster-saturation"]),"raster-contrast":new Un(kt.paint_raster["raster-contrast"]),"raster-resampling":new Un(kt.paint_raster["raster-resampling"]),"raster-fade-duration":new Un(kt.paint_raster["raster-fade-duration"])})},lu=((Ql=Yn)&&(uu.__proto__=Ql),(uu.prototype=Object.create(Ql&&Ql.prototype)).constructor=uu);function uu(t){Ql.call(this,t,su)}function cu(t){tu.call(this,t,ou)}function pu(t){eu.call(this,t,nu)}var hu,fu=((hu=Yn)&&(mu.__proto__=hu),((mu.prototype=Object.create(hu&&hu.prototype)).constructor=mu).prototype.is3D=function(){return"3d"===this.implementation.renderingMode},mu.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},mu.prototype.recalculate=function(){},mu.prototype.updateTransitions=function(){},mu.prototype.hasTransition=function(){},mu.prototype.serialize=function(){},mu.prototype.onAdd=function(t){this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)},mu.prototype.onRemove=function(t){this.implementation.onRemove&&this.implementation.onRemove(t)},mu),du={circle:Ha,heatmap:ls,hillshade:cs,fill:Hs,"fill-extrusion":pl,line:Al,symbol:iu,background:au,raster:lu};function mu(t){hu.call(this,t,{}),this.implementation=t}function yu(t){for(var e=0,r=0,n=0,i=t;n<i.length;n+=1){var o=i[n];e+=o.w*o.h,r=Math.max(r,o.w)}t.sort(function(t,e){return e.h-t.h});for(var a=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),r),h:1/0}],s=0,l=0,u=0,c=t;u<c.length;u+=1)for(var p=c[u],h=a.length-1;0<=h;h--){var f=a[h];if(!(p.w>f.w||p.h>f.h)){if(p.x=f.x,p.y=f.y,l=Math.max(l,p.y+p.h),s=Math.max(s,p.x+p.w),p.w===f.w&&p.h===f.h){var d=a.pop();h<a.length&&(a[h]=d)}else p.h===f.h?(f.x+=p.w,f.w-=p.w):(p.w===f.w||a.push({x:f.x+p.w,y:f.y,w:f.w-p.w,h:p.h}),f.y+=p.h,f.h-=p.h);break}}return{w:s,h:l,fill:e/(s*l)||0}}function gu(t,e){var r=e.pixelRatio,n=e.version;this.paddedRect=t,this.pixelRatio=r,this.version=n}var vu={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};vu.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},vu.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},vu.tlbr.get=function(){return this.tl.concat(this.br)},vu.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(gu.prototype,vu);function _u(t,e){var r={},n={};this.haveRenderCallbacks=[];var i=[];this.addImages(t,r,i),this.addImages(e,n,i);var o=yu(i),a=o.w,s=o.h,l=new ns({width:a||1,height:s||1});for(var u in t){var c=t[u],p=r[u].paddedRect;ns.copy(c.data,l,{x:0,y:0},{x:p.x+1,y:p.y+1},c.data)}for(var h in e){var f=e[h],d=n[h].paddedRect,m=d.x+1,y=d.y+1,g=f.data.width,v=f.data.height;ns.copy(f.data,l,{x:0,y:0},{x:m,y:y},f.data),ns.copy(f.data,l,{x:0,y:v-1},{x:m,y:y-1},{width:g,height:1}),ns.copy(f.data,l,{x:0,y:0},{x:m,y:y+v},{width:g,height:1}),ns.copy(f.data,l,{x:g-1,y:0},{x:m-1,y:y},{width:1,height:v}),ns.copy(f.data,l,{x:0,y:0},{x:m+g,y:y},{width:1,height:v})}this.image=l,this.iconPositions=r,this.patternPositions=n}_u.prototype.addImages=function(t,e,r){for(var n in t){var i=t[n],o={x:0,y:0,w:i.data.width+2,h:i.data.height+2};r.push(o),e[n]=new gu(o,i),i.hasRenderCallback&&this.haveRenderCallbacks.push(n)}},_u.prototype.patchUpdatedImages=function(t,e){for(var r in t.dispatchRenderCallbacks(this.haveRenderCallbacks),t.updatedImages)this.patchUpdatedImage(this.iconPositions[r],t.getImage(r),e),this.patchUpdatedImage(this.patternPositions[r],t.getImage(r),e)},_u.prototype.patchUpdatedImage=function(t,e,r){if(t&&e&&t.version!==e.version){t.version=e.version;var n=t.tl,i=n[0],o=n[1];r.update(e.data,void 0,{x:i,y:o})}},yn("ImagePosition",gu),yn("ImageAtlas",_u);function bu(t,e,r,n){this.context=t,this.format=r,this.texture=t.gl.createTexture(),this.update(e,n)}var xu=self.HTMLImageElement,wu=self.HTMLCanvasElement,Eu=self.HTMLVideoElement,Su=self.ImageData;bu.prototype.update=function(t,e,r){var n=t.width,i=t.height,o=!(this.size&&this.size[0]===n&&this.size[1]===i||r),a=this.context,s=a.gl;if(this.useMipmap=Boolean(e&&e.useMipmap),s.bindTexture(s.TEXTURE_2D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!e||!1!==e.premultiply)),o)this.size=[n,i],t instanceof xu||t instanceof wu||t instanceof Eu||t instanceof Su?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,t):s.texImage2D(s.TEXTURE_2D,0,this.format,n,i,0,this.format,s.UNSIGNED_BYTE,t.data);else{var l=r||{x:0,y:0},u=l.x,c=l.y;t instanceof xu||t instanceof wu||t instanceof Eu||t instanceof Su?s.texSubImage2D(s.TEXTURE_2D,0,u,c,s.RGBA,s.UNSIGNED_BYTE,t):s.texSubImage2D(s.TEXTURE_2D,0,u,c,n,i,s.RGBA,s.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&s.generateMipmap(s.TEXTURE_2D)},bu.prototype.bind=function(t,e,r){var n=this.context.gl;n.bindTexture(n.TEXTURE_2D,this.texture),r!==n.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(r=n.LINEAR),t!==this.filter&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,r||t),this.filter=t),e!==this.wrap&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,e),this.wrap=e)},bu.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},bu.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};function ku(t,e,r,n,i){var o,a,s=8*i-n-1,l=(1<<s)-1,u=l>>1,c=-7,p=r?i-1:0,h=r?-1:1,f=t[e+p];for(p+=h,o=f&(1<<-c)-1,f>>=-c,c+=s;0<c;o=256*o+t[e+p],p+=h,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=n;0<c;a=256*a+t[e+p],p+=h,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,n),o-=u}return(f?-1:1)*a*Math.pow(2,o-n)}function Cu(t,e,r,n,i,o){var a,s,l,u=8*o-i-1,c=(1<<u)-1,p=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:o-1,d=n?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),2<=(e+=1<=a+p?h/l:h*Math.pow(2,1-p))*l&&(a++,l/=2),c<=a+p?(s=0,a=c):1<=a+p?(s=(e*l-1)*Math.pow(2,i),a+=p):(s=e*Math.pow(2,p-1)*Math.pow(2,i),a=0));8<=i;t[r+f]=255&s,f+=d,s/=256,i-=8);for(a=a<<i|s,u+=i;0<u;t[r+f]=255&a,f+=d,a/=256,u-=8);t[r+f-d]|=128*m}var Tu=Au;function Au(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}function Pu(t){return t.type===Au.Bytes?t.readVarint()+t.pos:t.pos+1}function Iu(t,e,r){return r?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function Mu(t,e,r){var n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.ceil(Math.log(e)/(7*Math.LN2));r.realloc(n);for(var i=r.pos-1;t<=i;i--)r.buf[i+n]=r.buf[i]}function zu(t,e){for(var r=0;r<t.length;r++)e.writeVarint(t[r])}function Lu(t,e){for(var r=0;r<t.length;r++)e.writeSVarint(t[r])}function Ou(t,e){for(var r=0;r<t.length;r++)e.writeFloat(t[r])}function Du(t,e){for(var r=0;r<t.length;r++)e.writeDouble(t[r])}function Ru(t,e){for(var r=0;r<t.length;r++)e.writeBoolean(t[r])}function Fu(t,e){for(var r=0;r<t.length;r++)e.writeFixed32(t[r])}function Bu(t,e){for(var r=0;r<t.length;r++)e.writeSFixed32(t[r])}function ju(t,e){for(var r=0;r<t.length;r++)e.writeFixed64(t[r])}function Nu(t,e){for(var r=0;r<t.length;r++)e.writeSFixed64(t[r])}function Uu(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function Vu(t,e,r){t[r]=e,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24}function qu(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}Au.Varint=0,Au.Fixed64=1,Au.Bytes=2,Au.Fixed32=5,Au.prototype={destroy:function(){this.buf=null},readFields:function(t,e,r){for(r=r||this.length;this.pos<r;){var n=this.readVarint(),i=n>>3,o=this.pos;this.type=7&n,t(i,e,this),this.pos===o&&this.skip(n)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=Uu(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=qu(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=Uu(this.buf,this.pos)+4294967296*Uu(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=Uu(this.buf,this.pos)+4294967296*qu(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=ku(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=ku(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,r,n=this.buf;return e=127&(r=n[this.pos++]),r<128?e:(e|=(127&(r=n[this.pos++]))<<7,r<128?e:(e|=(127&(r=n[this.pos++]))<<14,r<128?e:(e|=(127&(r=n[this.pos++]))<<21,r<128?e:function(t,e,r){var n,i,o=r.buf;if(n=(112&(i=o[r.pos++]))>>4,i<128)return Iu(t,n,e);if(n|=(127&(i=o[r.pos++]))<<3,i<128)return Iu(t,n,e);if(n|=(127&(i=o[r.pos++]))<<10,i<128)return Iu(t,n,e);if(n|=(127&(i=o[r.pos++]))<<17,i<128)return Iu(t,n,e);if(n|=(127&(i=o[r.pos++]))<<24,i<128)return Iu(t,n,e);if(n|=(1&(i=o[r.pos++]))<<31,i<128)return Iu(t,n,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(r=n[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=function(t,e,r){for(var n="",i=e;i<r;){var o,a,s,l=t[i],u=null,c=239<l?4:223<l?3:191<l?2:1;if(r<i+c)break;1===c?l<128&&(u=l):2===c?128==(192&(o=t[i+1]))&&(u=(31&l)<<6|63&o)<=127&&(u=null):3===c?(o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&((u=(15&l)<<12|(63&o)<<6|63&a)<=2047||55296<=u&&u<=57343)&&(u=null)):4===c&&(o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&((u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||1114112<=u)&&(u=null)),null===u?(u=65533,c=1):65535<u&&(u-=65536,n+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),n+=String.fromCharCode(u),i+=c}return n}(this.buf,this.pos,t);return this.pos=t,e},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){var r=Pu(this);for(t=t||[];this.pos<r;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){var e=Pu(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){var e=Pu(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){var e=Pu(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){var e=Pu(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){var e=Pu(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){var e=Pu(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){var e=Pu(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){var e=Pu(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===Au.Varint)for(;127<this.buf[this.pos++];);else if(e===Au.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Au.Fixed32)this.pos+=4;else{if(e!==Au.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var r=new Uint8Array(e);r.set(this.buf),this.buf=r,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),Vu(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),Vu(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),Vu(this.buf,-1&t,this.pos),Vu(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),Vu(this.buf,-1&t,this.pos),Vu(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(u){268435455<(u=+u||0)||u<0?function(t,e){var r,n,i,o,a,s,l;if(0<=u?(r=u%4294967296|0,n=u/4294967296|0):(n=~(-u/4294967296),4294967295^(r=~(-u%4294967296))?r=r+1|0:n=n+1|(r=0)),0x10000000000000000<=u||u<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),s=r,(l=e).buf[l.pos++]=127&s|128,s>>>=7,l.buf[l.pos++]=127&s|128,s>>>=7,l.buf[l.pos++]=127&s|128,s>>>=7,l.buf[l.pos++]=127&s|128,s>>>=7,l.buf[l.pos]=127&s,a=(7&(i=n))<<4,(o=e).buf[o.pos++]|=a|((i>>>=3)?128:0),i&&(o.buf[o.pos++]=127&i|((i>>>=7)?128:0),i&&(o.buf[o.pos++]=127&i|((i>>>=7)?128:0),i&&(o.buf[o.pos++]=127&i|((i>>>=7)?128:0),i&&(o.buf[o.pos++]=127&i|((i>>>=7)?128:0),i&&(o.buf[o.pos++]=127&i)))))}(0,this):(this.realloc(4),this.buf[this.pos++]=127&u|(127<u?128:0),u<=127||(this.buf[this.pos++]=127&(u>>>=7)|(127<u?128:0),u<=127||(this.buf[this.pos++]=127&(u>>>=7)|(127<u?128:0),u<=127||(this.buf[this.pos++]=u>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,r){for(var n,i,o=0;o<e.length;o++){if(55295<(n=e.charCodeAt(o))&&n<57344){if(!i){56319<n||o+1===e.length?(t[r++]=239,t[r++]=191,t[r++]=189):i=n;continue}if(n<56320){t[r++]=239,t[r++]=191,t[r++]=189,i=n;continue}n=i-55296<<10|n-56320|65536,i=null}else i&&(t[r++]=239,t[r++]=191,t[r++]=189,i=null);n<128?t[r++]=n:(n<2048?t[r++]=n>>6|192:(n<65536?t[r++]=n>>12|224:(t[r++]=n>>18|240,t[r++]=n>>12&63|128),t[r++]=n>>6&63|128),t[r++]=63&n|128)}return r}(this.buf,t,this.pos);var r=this.pos-e;128<=r&&Mu(e,r,this),this.pos=e-1,this.writeVarint(r),this.pos+=r},writeFloat:function(t){this.realloc(4),Cu(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),Cu(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var r=0;r<e;r++)this.buf[this.pos++]=t[r]},writeRawMessage:function(t,e){this.pos++;var r=this.pos;t(e,this);var n=this.pos-r;128<=n&&Mu(r,n,this),this.pos=r-1,this.writeVarint(n),this.pos+=n},writeMessage:function(t,e,r){this.writeTag(t,Au.Bytes),this.writeRawMessage(e,r)},writePackedVarint:function(t,e){this.writeMessage(t,zu,e)},writePackedSVarint:function(t,e){this.writeMessage(t,Lu,e)},writePackedBoolean:function(t,e){this.writeMessage(t,Ru,e)},writePackedFloat:function(t,e){this.writeMessage(t,Ou,e)},writePackedDouble:function(t,e){this.writeMessage(t,Du,e)},writePackedFixed32:function(t,e){this.writeMessage(t,Fu,e)},writePackedSFixed32:function(t,e){this.writeMessage(t,Bu,e)},writePackedFixed64:function(t,e){this.writeMessage(t,ju,e)},writePackedSFixed64:function(t,e){this.writeMessage(t,Nu,e)},writeBytesField:function(t,e){this.writeTag(t,Au.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,Au.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,Au.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,Au.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,Au.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,Au.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,Au.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,Au.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,Au.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,Au.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};var Zu=3;function Gu(t,e,r){1===t&&r.readMessage(Wu,e)}function Wu(t,e,r){if(3===t){var n=r.readMessage(Hu,{}),i=n.id,o=n.bitmap,a=n.width,s=n.height,l=n.left,u=n.top,c=n.advance;e.push({id:i,bitmap:new rs({width:a+2*Zu,height:s+2*Zu},o),metrics:{width:a,height:s,left:l,top:u,advance:c}})}}function Hu(t,e,r){1===t?e.id=r.readVarint():2===t?e.bitmap=r.readBytes():3===t?e.width=r.readVarint():4===t?e.height=r.readVarint():5===t?e.left=r.readSVarint():6===t?e.top=r.readSVarint():7===t&&(e.advance=r.readVarint())}function Xu(t,e,r){this.target=t,this.parent=e,this.mapId=r,this.callbacks={},this.callbackID=0,m(["receive"],this),this.target.addEventListener("message",this.receive,!1)}var $u=Zu;function Ku(t,e,r){var n=2*Math.PI*6378137/256/Math.pow(2,r);return[t*n-2*Math.PI*6378137/2,e*n-2*Math.PI*6378137/2]}Xu.prototype.send=function(t,e,r,n){var i=this,o=r?this.mapId+":"+this.callbackID++:null;r&&(this.callbacks[o]=r);var a=[];if(this.target.postMessage({targetMapId:n,sourceMapId:this.mapId,type:t,id:String(o),data:vn(e,a)},a),r)return{cancel:function(){return i.target.postMessage({targetMapId:n,sourceMapId:i.mapId,type:"<cancel>",id:String(o)})}}},Xu.prototype.receive=function(t){var e,n=this,r=t.data,i=r.id;if(!r.targetMapId||this.mapId===r.targetMapId){var o=function(t,e){delete n.callbacks[i];var r=[];n.target.postMessage({sourceMapId:n.mapId,type:"<response>",id:String(i),error:t?vn(t):null,data:vn(e,r)},r)};if("<response>"===r.type||"<cancel>"===r.type)e=this.callbacks[r.id],delete this.callbacks[r.id],e&&r.error?e(_n(r.error)):e&&e(null,_n(r.data));else if(void 0!==r.id&&this.parent[r.type]){this.callbacks[r.id]=null;var a=this.parent[r.type](r.sourceMapId,_n(r.data),o);a&&null===this.callbacks[r.id]&&(this.callbacks[r.id]=a.cancel)}else if(void 0!==r.id&&this.parent.getWorkerSource){var s=r.type.split("."),l=_n(r.data);this.parent.getWorkerSource(r.sourceMapId,s[0],l.source)[s[1]](l,o)}else this.parent[r.type](_n(r.data))}},Xu.prototype.remove=function(){this.target.removeEventListener("message",this.receive,!1)};function Ju(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))}Ju.prototype.setNorthEast=function(t){return this._ne=t instanceof Yu?new Yu(t.lng,t.lat):Yu.convert(t),this},Ju.prototype.setSouthWest=function(t){return this._sw=t instanceof Yu?new Yu(t.lng,t.lat):Yu.convert(t),this},Ju.prototype.extend=function(t){var e,r,n=this._sw,i=this._ne;if(t instanceof Yu)r=e=t;else{if(!(t instanceof Ju))return Array.isArray(t)?t.every(Array.isArray)?this.extend(Ju.convert(t)):this.extend(Yu.convert(t)):this;if(e=t._sw,r=t._ne,!e||!r)return this}return n||i?(n.lng=Math.min(e.lng,n.lng),n.lat=Math.min(e.lat,n.lat),i.lng=Math.max(r.lng,i.lng),i.lat=Math.max(r.lat,i.lat)):(this._sw=new Yu(e.lng,e.lat),this._ne=new Yu(r.lng,r.lat)),this},Ju.prototype.getCenter=function(){return new Yu((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Ju.prototype.getSouthWest=function(){return this._sw},Ju.prototype.getNorthEast=function(){return this._ne},Ju.prototype.getNorthWest=function(){return new Yu(this.getWest(),this.getNorth())},Ju.prototype.getSouthEast=function(){return new Yu(this.getEast(),this.getSouth())},Ju.prototype.getWest=function(){return this._sw.lng},Ju.prototype.getSouth=function(){return this._sw.lat},Ju.prototype.getEast=function(){return this._ne.lng},Ju.prototype.getNorth=function(){return this._ne.lat},Ju.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Ju.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Ju.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Ju.convert=function(t){return!t||t instanceof Ju?t:new Ju(t)};var Yu=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: ("+t+", "+e+")");if(this.lng=+t,this.lat=+e,90<this.lat||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};function Qu(t){return 2*Math.PI*6378137*Math.cos(t*Math.PI/180)}function tc(t){return(180+t)/360}function ec(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function rc(t,e){return t/Qu(e)}function nc(t){var e=180-360*t;return 360/Math.PI*Math.atan(Math.exp(e*Math.PI/180))-90}Yu.prototype.wrap=function(){return new Yu(s(this.lng,-180,180),this.lat)},Yu.prototype.toArray=function(){return[this.lng,this.lat]},Yu.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Yu.prototype.toBounds=function(t){void 0===t&&(t=0);var e=360*t/40075017,r=e/Math.cos(Math.PI/180*this.lat);return new Ju(new Yu(this.lng-r,this.lat-e),new Yu(this.lng+r,this.lat+e))},Yu.convert=function(t){if(t instanceof Yu)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new Yu(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new Yu(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};function ic(t,e,r){void 0===r&&(r=0),this.x=+t,this.y=+e,this.z=+r}ic.fromLngLat=function(t,e){void 0===e&&(e=0);var r=Yu.convert(t);return new ic(tc(r.lng),ec(r.lat),rc(e,r.lat))},ic.prototype.toLngLat=function(){return new Yu(360*this.x-180,nc(this.y))},ic.prototype.toAltitude=function(){return this.z*Qu(nc(this.y))};function oc(t,e,r){this.z=t,this.x=e,this.y=r,this.key=lc(0,t,e,r)}oc.prototype.equals=function(t){return this.z===t.z&&this.x===t.x&&this.y===t.y},oc.prototype.url=function(t,e){var r,n,i,o,a,s=(r=this.x,n=this.y,i=this.z,o=Ku(256*r,256*(n=Math.pow(2,i)-n-1),i),a=Ku(256*(r+1),256*(n+1),i),o[0]+","+o[1]+","+a[0]+","+a[1]),l=function(t,e,r){for(var n,i="",o=t;0<o;o--)i+=(e&(n=1<<o-1)?1:0)+(r&n?2:0);return i}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",l).replace("{bbox-epsg-3857}",s)},oc.prototype.getTilePoint=function(t){var e=Math.pow(2,this.z);return new st((t.x*e-this.x)*ba,(t.y*e-this.y)*ba)};function ac(t,e){this.wrap=t,this.canonical=e,this.key=lc(t,e.z,e.x,e.y)}function sc(t,e,r,n,i){this.overscaledZ=t,this.wrap=e,this.canonical=new oc(r,+n,+i),this.key=lc(e,t,n,i)}function lc(t,e,r,n){(t*=2)<0&&(t=-1*t-1);var i=1<<e;return 32*(i*i*t+i*n+r)+e}sc.prototype.equals=function(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)},sc.prototype.scaledTo=function(t){var e=this.canonical.z-t;return t>this.canonical.z?new sc(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new sc(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)},sc.prototype.isChildOf=function(t){if(t.wrap!==this.wrap)return!1;var e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e},sc.prototype.children=function(t){if(this.overscaledZ>=t)return[new sc(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var e=this.canonical.z+1,r=2*this.canonical.x,n=2*this.canonical.y;return[new sc(e,this.wrap,e,r,n),new sc(e,this.wrap,e,1+r,n),new sc(e,this.wrap,e,r,1+n),new sc(e,this.wrap,e,1+r,1+n)]},sc.prototype.isLessThan=function(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))},sc.prototype.wrapped=function(){return new sc(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},sc.prototype.unwrapTo=function(t){return new sc(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)},sc.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},sc.prototype.toUnwrapped=function(){return new ac(this.wrap,this.canonical)},sc.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},sc.prototype.getTilePoint=function(t){return this.canonical.getTilePoint(new ic(t.x-this.wrap,t.y))},yn("CanonicalTileID",oc),yn("OverscaledTileID",sc,{omit:["posMatrix"]});function uc(t,e,r){if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(r&&"mapbox"!==r&&"terrarium"!==r)return lt('"'+r+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');var n=this.dim=e.height;this.stride=this.dim+2,this.data=new Int32Array(this.stride*this.stride);for(var i=e.data,o="terrarium"===r?this._unpackTerrarium:this._unpackMapbox,a=0;a<n;a++)for(var s=0;s<n;s++){var l=4*(a*n+s);this.set(s,a,o(i[l],i[1+l],i[2+l]))}for(var u=0;u<n;u++)this.set(-1,u,this.get(0,u)),this.set(n,u,this.get(n-1,u)),this.set(u,-1,this.get(u,0)),this.set(u,n,this.get(u,n-1));this.set(-1,-1,this.get(0,0)),this.set(n,-1,this.get(n-1,0)),this.set(-1,n,this.get(0,n-1)),this.set(n,n,this.get(n-1,n-1))}uc.prototype.set=function(t,e,r){this.data[this._idx(t,e)]=r+65536},uc.prototype.get=function(t,e){return this.data[this._idx(t,e)]-65536},uc.prototype._idx=function(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)},uc.prototype._unpackMapbox=function(t,e,r){return(256*t*256+256*e+r)/10-1e4},uc.prototype._unpackTerrarium=function(t,e,r){return 256*t+e+r/256-32768},uc.prototype.getPixels=function(){return new ns({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},uc.prototype.backfillBorder=function(t,e,r){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");var n=e*this.dim,i=e*this.dim+this.dim,o=r*this.dim,a=r*this.dim+this.dim;switch(e){case-1:n=i-1;break;case 1:i=n+1}switch(r){case-1:o=a-1;break;case 1:a=o+1}for(var s=-e*this.dim,l=-r*this.dim,u=o;u<a;u++)for(var c=n;c<i;c++)this.set(c,u,t.get(c+s,u+l))},yn("DEMData",uc);function cc(t){this._stringToNumber={},this._numberToString=[];for(var e=0;e<t.length;e++){var r=t[e];this._stringToNumber[r]=e,this._numberToString[e]=r}}var pc=ei([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);cc.prototype.encode=function(t){return this._stringToNumber[t]},cc.prototype.decode=function(t){return this._numberToString[t]};function hc(t,e,r,n){this.type="Feature",(this._vectorTileFeature=t)._z=e,t._x=r,t._y=n,this.properties=t.properties,null!=t.id&&(this.id=t.id)}var fc={geometry:{configurable:!0}};fc.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},fc.geometry.set=function(t){this._geometry=t},hc.prototype.toJSON=function(){var t={geometry:this.geometry};for(var e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t},Object.defineProperties(hc.prototype,fc);function dc(){this.state={},this.stateChanges={},this.deletedStates={}}dc.prototype.updateState=function(t,e,r){var n=String(e);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][n]=this.stateChanges[t][n]||{},d(this.stateChanges[t][n],r),null===this.deletedStates[t])for(var i in this.deletedStates[t]={},this.state[t])i!==n&&(this.deletedStates[t][i]=null);else if(this.deletedStates[t]&&null===this.deletedStates[t][n])for(var o in this.deletedStates[t][n]={},this.state[t][n])r[o]||(this.deletedStates[t][n][o]=null);else for(var a in r)this.deletedStates[t]&&this.deletedStates[t][n]&&null===this.deletedStates[t][n][a]&&delete this.deletedStates[t][n][a]},dc.prototype.removeFeatureState=function(t,e,r){if(null!==this.deletedStates[t]){var n=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},r&&e)null!==this.deletedStates[t][n]&&(this.deletedStates[t][n]=this.deletedStates[t][n]||{},this.deletedStates[t][n][r]=null);else if(e)if(this.stateChanges[t]&&this.stateChanges[t][n])for(r in this.deletedStates[t][n]={},this.stateChanges[t][n])this.deletedStates[t][n][r]=null;else this.deletedStates[t][n]=null;else this.deletedStates[t]=null}},dc.prototype.getState=function(t,e){var r=String(e),n=this.state[t]||{},i=this.stateChanges[t]||{},o=d({},n[r],i[r]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){var a=this.deletedStates[t][e];if(null===a)return{};for(var s in a)delete o[s]}return o},dc.prototype.initializeTileState=function(t,e){t.setFeatureState(this.state,e)},dc.prototype.coalesceChanges=function(t,e){var r={};for(var n in this.stateChanges){this.state[n]=this.state[n]||{};var i={};for(var o in this.stateChanges[n])this.state[n][o]||(this.state[n][o]={}),d(this.state[n][o],this.stateChanges[n][o]),i[o]=this.state[n][o];r[n]=i}for(var a in this.deletedStates){this.state[a]=this.state[a]||{};var s={};if(null===this.deletedStates[a])for(var l in this.state[a])s[l]={},this.state[a][l]={};else for(var u in this.deletedStates[a]){if(null===this.deletedStates[a][u])this.state[a][u]={};else for(var c=0,p=Object.keys(this.deletedStates[a][u]);c<p.length;c+=1){var h=p[c];delete this.state[a][u][h]}s[u]=this.state[a][u]}r[a]=r[a]||{},d(r[a],s)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(r).length)for(var f in t)t[f].setFeatureState(r,e)};function mc(t,e,r){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=e||new pn(ba,16,0),this.grid3D=new pn(ba,16,0),this.featureIndexArray=r||new Do}function yc(t){for(var e=1/0,r=1/0,n=-1/0,i=-1/0,o=0,a=t;o<a.length;o+=1){var s=a[o];e=Math.min(e,s.x),r=Math.min(r,s.y),n=Math.max(n,s.x),i=Math.max(i,s.y)}return{minX:e,minY:r,maxX:n,maxY:i}}function gc(t,e){return e-t}mc.prototype.insert=function(t,e,r,n,i,o){var a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(r,n,i);for(var s=o?this.grid3D:this.grid,l=0;l<e.length;l++){for(var u=e[l],c=[1/0,1/0,-1/0,-1/0],p=0;p<u.length;p++){var h=u[p];c[0]=Math.min(c[0],h.x),c[1]=Math.min(c[1],h.y),c[2]=Math.max(c[2],h.x),c[3]=Math.max(c[3],h.y)}c[0]<ba&&c[1]<ba&&0<=c[2]&&0<=c[3]&&s.insert(a,c[0],c[1],c[2],c[3])}},mc.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new il.VectorTile(new Tu(this.rawTileData)).layers,this.sourceLayerCoder=new cc(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},mc.prototype.query=function(i,o,a){var s=this;this.loadVTLayers();for(var l=i.params||{},u=ba/i.tileSize/i.scale,c=Br(l.filter),p=i.queryGeometry,h=i.queryPadding*u,t=yc(p),f=this.grid.query(t.minX-h,t.minY-h,t.maxX+h,t.maxY+h),e=yc(i.cameraQueryGeometry),r=0,n=this.grid3D.query(e.minX-h,e.minY-h,e.maxX+h,e.maxY+h,function(t,e,r,n){return function(t,e,r,n,i){for(var o=0,a=t;o<a.length;o+=1){var s=a[o];if(e<=s.x&&r<=s.y&&n>=s.x&&i>=s.y)return!0}var l=[new st(e,r),new st(e,i),new st(n,i),new st(n,r)];if(2<t.length)for(var u=0,c=l;u<c.length;u+=1)if(za(t,c[u]))return!0;for(var p=0;p<t.length-1;p++)if(La(t[p],t[p+1],l))return!0;return!1}(i.cameraQueryGeometry,t-h,e-h,r+h,n+h)});r<n.length;r+=1){var d=n[r];f.push(d)}f.sort(gc);for(var m,y={},g=function(t){var e=f[t];if(e!==m){m=e;var r=s.featureIndexArray.get(e),n=null;s.loadMatchingFeature(y,r.bucketIndex,r.sourceLayerIndex,r.featureIndex,c,l.layers,o,function(t,e){n=n||wa(t);var r={};return t.id&&(r=a.getState(e.sourceLayer||"_geojsonTileLayer",t.id)),e.queryIntersectsFeature(p,t,r,n,s.z,i.transform,u,i.pixelPosMatrix)})}},v=0;v<f.length;v++)g(v);return y},mc.prototype.loadMatchingFeature=function(t,e,r,n,i,o,a,s){var l=this.bucketLayerIDs[e];if(!o||function(t,e){for(var r=0;r<t.length;r++)if(0<=e.indexOf(t[r]))return 1;return 0}(o,l)){var u=this.sourceLayerCoder.decode(r),c=this.vtLayers[u].feature(n);if(i(new Cn(this.tileID.overscaledZ),c))for(var p=0;p<l.length;p++){var h=l[p];if(!(o&&o.indexOf(h)<0)){var f=a[h];if(f){var d=!s||s(c,f);if(d){var m=new hc(c,this.z,this.x,this.y);m.layer=f.serialize();var y=t[h];void 0===y&&(y=t[h]=[]),y.push({featureIndex:n,feature:m,intersectionZ:d})}}}}}},mc.prototype.lookupSymbolFeatures=function(t,e,r,n,i,o){var a={};this.loadVTLayers();for(var s=Br(n),l=0,u=t;l<u.length;l+=1){var c=u[l];this.loadMatchingFeature(a,e,r,c,s,i,o)}return a},mc.prototype.hasLayer=function(t){for(var e=0,r=this.bucketLayerIDs;e<r.length;e+=1)for(var n=0,i=r[e];n<i.length;n+=1)if(t===i[n])return!0;return!1},yn("FeatureIndex",mc,{omit:["rawTileData","sourceLayerCoder"]});function vc(t,e){this.tileID=t,this.uid=c(),this.uses=0,this.tileSize=e,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.expiredRequestCount=0,this.state="loading"}vc.prototype.registerFadeDuration=function(t){var e=t+this.timeAdded;e<I.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)},vc.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},vc.prototype.loadVectorData=function(t,e,r){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){for(var n in t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(t,o){var a={};if(!o)return a;for(var e=function(){var t=l[s],r=t.layerIds.map(function(t){return o.getLayer(t)}).filter(Boolean);if(0!==r.length){t.layers=r,t.stateDependentLayerIds&&(t.stateDependentLayers=t.stateDependentLayerIds.map(function(e){return r.filter(function(t){return t.id===e})[0]}));for(var e=0,n=r;e<n.length;e+=1){var i=n[e];a[i.id]=t}}},s=0,l=t;s<l.length;s+=1)e();return a}(t.buckets,e.style),this.hasSymbolBuckets=!1,this.buckets){var i=this.buckets[n];if(i instanceof Yl){if(this.hasSymbolBuckets=!0,!r)break;i.justReloaded=!0}}for(var o in this.queryPadding=0,this.buckets){var a=this.buckets[o];this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(o).queryRadius(a))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new mo},vc.prototype.unloadVectorData=function(){for(var t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},vc.prototype.unloadDEMData=function(){this.dem=null,this.neighboringTiles=null,this.state="unloaded"},vc.prototype.getBucket=function(t){return this.buckets[t.id]},vc.prototype.upload=function(t){for(var e in this.buckets){var r=this.buckets[e];r.uploadPending()&&r.upload(t)}var n=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new bu(t,this.imageAtlas.image,n.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new bu(t,this.glyphAtlasImage,n.ALPHA),this.glyphAtlasImage=null)},vc.prototype.prepare=function(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)},vc.prototype.queryRenderedFeatures=function(t,e,r,n,i,o,a,s,l){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:r,cameraQueryGeometry:n,scale:i,tileSize:this.tileSize,pixelPosMatrix:l,transform:a,params:o,queryPadding:this.queryPadding*s},t,e):{}},vc.prototype.querySourceFeatures=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData){var r=this.latestFeatureIndex.loadVTLayers(),n=e?e.sourceLayer:"",i=r._geojsonTileLayer||r[n];if(i)for(var o=Br(e&&e.filter),a=this.tileID.canonical,s=a.z,l=a.x,u=a.y,c={z:s,x:l,y:u},p=0;p<i.length;p++){var h=i.feature(p);if(o(new Cn(this.tileID.overscaledZ),h)){var f=new hc(h,s,l,u);f.tile=c,t.push(f)}}}},vc.prototype.clearMask=function(){this.segments&&(this.segments.destroy(),delete this.segments),this.maskedBoundsBuffer&&(this.maskedBoundsBuffer.destroy(),delete this.maskedBoundsBuffer),this.maskedIndexBuffer&&(this.maskedIndexBuffer.destroy(),delete this.maskedIndexBuffer)},vc.prototype.setMask=function(t,e){if(!h(this.mask,t)&&(this.mask=t,this.clearMask(),!h(t,{0:!0}))){var r=new si,n=new Yi;this.segments=new Fo,this.segments.prepareSegment(0,r,n);for(var i=Object.keys(t),o=0;o<i.length;o++){var a=t[i[o]],s=ba>>a.z,l=new st(a.x*s,a.y*s),u=new st(l.x+s,l.y+s),c=this.segments.prepareSegment(4,r,n);r.emplaceBack(l.x,l.y,l.x,l.y),r.emplaceBack(u.x,l.y,u.x,l.y),r.emplaceBack(l.x,u.y,l.x,u.y),r.emplaceBack(u.x,u.y,u.x,u.y);var p=c.vertexLength;n.emplaceBack(p,p+1,p+2),n.emplaceBack(p+1,p+2,p+3),c.vertexLength+=4,c.primitiveLength+=2}this.maskedBoundsBuffer=e.createVertexBuffer(r,pc.members),this.maskedIndexBuffer=e.createIndexBuffer(n)}},vc.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},vc.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},vc.prototype.setExpiryData=function(t){var e=this.expirationTime;if(t.cacheControl){var r=function(t){var o={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(t,e,r,n){var i=r||n;return o[e]=!i||i.toLowerCase(),""}),o["max-age"]){var e=parseInt(o["max-age"],10);isNaN(e)?delete o["max-age"]:o["max-age"]=e}return o}(t.cacheControl);r["max-age"]&&(this.expirationTime=Date.now()+1e3*r["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){var n=Date.now(),i=!1;if(this.expirationTime>n)i=!1;else if(e)if(this.expirationTime<e)i=!0;else{var o=this.expirationTime-e;o?this.expirationTime=n+Math.max(o,3e4):i=!0}else i=!0;i?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},vc.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},vc.prototype.setFeatureState=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(t).length){var r=this.latestFeatureIndex.loadVTLayers();for(var n in this.buckets){var i=this.buckets[n],o=i.layers[0].sourceLayer||"_geojsonTileLayer",a=r[o],s=t[o];a&&s&&0!==Object.keys(s).length&&(i.update(s,a,this.imageAtlas&&this.imageAtlas.patternPositions||{}),e&&e.style&&(this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(n).queryRadius(i))))}}},vc.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},vc.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<I.now()},vc.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},vc.prototype.setHoldDuration=function(t){this.symbolFadeHoldUntil=I.now()+t};var _c=24,bc={horizontal:1,vertical:2,horizontalOnly:3},xc=function(){this.text="",this.sectionIndex=[],this.sections=[]};function wc(t,e,r,n,i,o,a,s,l,u){var c,p=xc.fromFeature(t,r);u===bc.vertical&&p.verticalizePunctuation();var h=zn.processBidirectionalText,f=zn.processStyledBidirectionalText;if(h&&1===p.sections.length){c=[];for(var d=0,m=h(p.toString(),Tc(p,s,n,e));d<m.length;d+=1){var y=m[d],g=new xc;g.text=y,g.sections=p.sections;for(var v=0;v<y.length;v++)g.sectionIndex.push(0);c.push(g)}}else if(f){c=[];for(var _=0,b=f(p.text,p.sectionIndex,Tc(p,s,n,e));_<b.length;_+=1){var x=b[_],w=new xc;w.text=x[0],w.sectionIndex=x[1],w.sections=p.sections,c.push(w)}}else c=function(t,e){for(var r=[],n=t.text,i=0,o=0,a=e;o<a.length;o+=1){var s=a[o];r.push(t.substring(i,s)),i=s}return i<n.length&&r.push(t.substring(i,n.length)),r}(p,Tc(p,s,n,e));var E=[],S={positionedGlyphs:E,text:p.toString(),top:l[1],bottom:l[1],left:l[0],right:l[0],writingMode:u,lineCount:c.length};return function(t,e,u,r,n,i,o,a){for(var s=0,l=-17,c=0,p=t.positionedGlyphs,h="right"===i?1:"left"===i?0:.5,f=0,d=u;f<d.length;f+=1){var m=d[f];m.trim();var y=m.getMaxScale();if(m.length()){for(var g=p.length,v=0;v<m.length();v++){var _=m.getSection(v),b=m.getCharCode(v),x=24*(y-_.scale),w=e[_.fontStack],E=w&&w[b];E&&(Sn(b)&&o!==bc.horizontal?(p.push({glyph:b,x:s,y:x,vertical:!0,scale:_.scale,fontStack:_.fontStack}),s+=_c*_.scale+a):(p.push({glyph:b,x:s,y:l+x,vertical:!1,scale:_.scale,fontStack:_.fontStack}),s+=E.metrics.advance*_.scale+a))}if(p.length!==g){var S=s-a;c=Math.max(S,c),Pc(p,e,g,p.length-1,h)}s=0,l+=r*y}else l+=r}var k=Ac(n),C=k.horizontalAlign,T=k.verticalAlign;!function(t,e,r,n,i,o){for(var a=(h-C)*c,s=(-T*u.length+.5)*o,l=0;l<t.length;l++)t[l].x+=a,t[l].y+=s}(p,0,0,0,0,r);var A=l- -17;t.top+=-T*A,t.bottom=t.top+A,t.left+=-C*c,t.right=t.left+c}(S,e,c,i,o,a,u,s),!!E.length&&S}xc.fromFeature=function(t,e){for(var r=new xc,n=0;n<t.sections.length;n++){var i=t.sections[n];r.sections.push({scale:i.scale||1,fontStack:i.fontStack||e}),r.text+=i.text;for(var o=0;o<i.text.length;o++)r.sectionIndex.push(n)}return r},xc.prototype.length=function(){return this.text.length},xc.prototype.getSection=function(t){return this.sections[this.sectionIndex[t]]},xc.prototype.getCharCode=function(t){return this.text.charCodeAt(t)},xc.prototype.verticalizePunctuation=function(){this.text=function(t){for(var e="",r=0;r<t.length;r++){var n=t.charCodeAt(r+1)||null,i=t.charCodeAt(r-1)||null;n&&kn(n)&&!Bl[t[r+1]]||i&&kn(i)&&!Bl[t[r-1]]||!Bl[t[r]]?e+=t[r]:e+=Bl[t[r]]}return e}(this.text)},xc.prototype.trim=function(){for(var t=0,e=0;e<this.text.length&&Ec[this.text.charCodeAt(e)];e++)t++;for(var r=this.text.length,n=this.text.length-1;0<=n&&t<=n&&Ec[this.text.charCodeAt(n)];n--)r--;this.text=this.text.substring(t,r),this.sectionIndex=this.sectionIndex.slice(t,r)},xc.prototype.substring=function(t,e){var r=new xc;return r.text=this.text.substring(t,e),r.sectionIndex=this.sectionIndex.slice(t,e),r.sections=this.sections,r},xc.prototype.toString=function(){return this.text},xc.prototype.getMaxScale=function(){var r=this;return this.sectionIndex.reduce(function(t,e){return Math.max(t,r.sections[e].scale)},0)};var Ec={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Sc={};function kc(t,e,r,n){var i=Math.pow(t-e,2);return n?t<e?i/2:2*i:i+Math.abs(r)*r}function Cc(t,e,r,n,i,o){for(var a=null,s=kc(e,r,i,o),l=0,u=n;l<u.length;l+=1){var c=u[l],p=kc(e-c.x,r,i,o)+c.badness;p<=s&&(a=c,s=p)}return{index:t,x:e,priorBreak:a,badness:s}}function Tc(t,e,r,n){if(!r)return[];if(!t)return[];for(var i,o=[],a=function(t,e,r,n){for(var i=0,o=0;o<t.length();o++){var a=t.getSection(o),s=n[a.fontStack],l=s&&s[t.getCharCode(o)];l&&(i+=l.metrics.advance*a.scale+e)}return i/Math.max(1,Math.ceil(i/r))}(t,e,r,n),s=0,l=0;l<t.length();l++){var u=t.getSection(l),c=t.getCharCode(l),p=n[u.fontStack],h=p&&p[c];h&&!Ec[c]&&(s+=h.metrics.advance*u.scale+e),l<t.length()-1&&(Sc[c]||!((i=c)<11904)&&(xn["Bopomofo Extended"](i)||xn.Bopomofo(i)||xn["CJK Compatibility Forms"](i)||xn["CJK Compatibility Ideographs"](i)||xn["CJK Compatibility"](i)||xn["CJK Radicals Supplement"](i)||xn["CJK Strokes"](i)||xn["CJK Symbols and Punctuation"](i)||xn["CJK Unified Ideographs Extension A"](i)||xn["CJK Unified Ideographs"](i)||xn["Enclosed CJK Letters and Months"](i)||xn["Halfwidth and Fullwidth Forms"](i)||xn.Hiragana(i)||xn["Ideographic Description Characters"](i)||xn["Kangxi Radicals"](i)||xn["Katakana Phonetic Extensions"](i)||xn.Katakana(i)||xn["Vertical Forms"](i)||xn["Yi Radicals"](i)||xn["Yi Syllables"](i)))&&o.push(Cc(l+1,s,a,o,(f=c,d=t.getCharCode(l+1),m=void 0,m=0,10===f&&(m-=1e4),40!==f&&65288!==f||(m+=50),41!==d&&65289!==d||(m+=50),m),!1))}var f,d,m;return function t(e){return e?t(e.priorBreak).concat(e.index):[]}(Cc(t.length(),s,a,o,0,!0))}function Ac(t){var e=.5,r=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":r=1;break;case"top":case"top-right":case"top-left":r=0}return{horizontalAlign:e,verticalAlign:r}}function Pc(t,e,r,n,i){if(i){var o=t[n],a=e[o.fontStack],s=a&&a[o.glyph];if(s)for(var l=s.metrics.advance*o.scale,u=(t[n].x+l)*i,c=r;c<=n;c++)t[c].x-=u}}function Ic(t,e,r,n,i){if(void 0===e.segment)return!0;for(var o=e,a=e.segment+1,s=0;-r/2<s;){if(--a<0)return!1;s-=t[a].dist(o),o=t[a]}s+=t[a].dist(t[a+1]),a++;for(var l=[],u=0;s<r/2;){var c=t[a-1],p=t[a],h=t[a+1];if(!h)return!1;var f=c.angleTo(p)-p.angleTo(h);for(f=Math.abs((f+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:f}),u+=f;s-l[0].distance>n;)u-=l.shift().angleDelta;if(i<u)return!1;a++,s+=p.dist(h)}return!0}function Mc(t){for(var e=0,r=0;r<t.length-1;r++)e+=t[r].dist(t[r+1]);return e}function zc(t,e,r){return t?.6*e*r:0}function Lc(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function Oc(t,e,r,n,i,o){for(var a=zc(r,i,o),s=Lc(r,n)*o,l=0,u=Mc(t)/2,c=0;c<t.length-1;c++){var p=t[c],h=t[c+1],f=p.dist(h);if(u<l+f){var d=(u-l)/f,m=we(p.x,h.x,d),y=we(p.y,h.y,d),g=new jl(m,y,h.angleTo(p),c);return g._round(),!a||Ic(t,g,s,a,e)?g:void 0}l+=f}}Sc[10]=!0,Sc[32]=!0,Sc[38]=!0,Sc[40]=!0,Sc[41]=!0,Sc[43]=!0,Sc[45]=!0,Sc[47]=!0,Sc[173]=!0,Sc[183]=!0,Sc[8203]=!0,Sc[8208]=!0,Sc[8211]=!0,Sc[8231]=!0;var Dc=function(t,e,r,n,i,o,a,s,l,u,c,p){var h=a.top*s-l,f=a.bottom*s+l,d=a.left*s-l,m=a.right*s+l;if(this.boxStartIndex=t.length,u){var y=f-h,g=m-d;0<y&&(y=Math.max(10*s,y),this._addLineCollisionCircles(t,e,r,r.segment,g,y,n,i,o,c))}else{if(p){var v=new st(d,h),_=new st(m,h),b=new st(d,f),x=new st(m,f),w=p*Math.PI/180;v._rotate(w),_._rotate(w),b._rotate(w),x._rotate(w),d=Math.min(v.x,_.x,b.x,x.x),m=Math.max(v.x,_.x,b.x,x.x),h=Math.min(v.y,_.y,b.y,x.y),f=Math.max(v.y,_.y,b.y,x.y)}t.emplaceBack(r.x,r.y,d,h,m,f,n,i,o,0,0)}this.boxEndIndex=t.length};Dc.prototype._addLineCollisionCircles=function(t,e,r,n,i,o,a,s,l,u){var c=o/2,p=Math.floor(i/c)||1,h=1+.4*Math.log(u)/Math.LN2,f=Math.floor(p*h/2),d=-o/2,m=r,y=n+1,g=d,v=-i/2,_=v-i/4;do{if(--y<0){if(v<g)return;y=0;break}g-=e[y].dist(m),m=e[y]}while(_<g);for(var b=e[y].dist(e[y+1]),x=-f;x<p+f;x++){var w=x*c,E=v+w;if(w<0&&(E+=w),i<w&&(E+=w-i),!(E<g)){for(;g+b<E;){if(g+=b,++y+1>=e.length)return;b=e[y].dist(e[y+1])}var S=E-g,k=e[y],C=e[y+1].sub(k)._unit()._mult(S)._add(k)._round(),T=Math.abs(E-d)<c?0:.8*(E-d);t.emplaceBack(C.x,C.y,-o/2,-o/2,o/2,o/2,a,s,l,o/2,T)}}};var Rc=function(t,e){if(void 0===t&&(t=[]),void 0===e&&(e=Fc),this.data=t,this.length=this.data.length,this.compare=e,0<this.length)for(var r=(this.length>>1)-1;0<=r;r--)this._down(r)};function Fc(t,e){return t<e?-1:e<t?1:0}function Bc(t,e,r){void 0===e&&(e=1),void 0===r&&(r=!1);for(var n=1/0,i=1/0,o=-1/0,a=-1/0,s=t[0],l=0;l<s.length;l++){var u=s[l];(!l||u.x<n)&&(n=u.x),(!l||u.y<i)&&(i=u.y),(!l||u.x>o)&&(o=u.x),(!l||u.y>a)&&(a=u.y)}var c=o-n,p=a-i,h=Math.min(c,p),f=h/2,d=new Rc([],jc);if(0===h)return new st(n,i);for(var m=n;m<o;m+=h)for(var y=i;y<a;y+=h)d.push(new Nc(m+f,y+f,f,t));for(var g=function(t){for(var e=0,r=0,n=0,i=t[0],o=0,a=i.length,s=a-1;o<a;s=o++){var l=i[o],u=i[s],c=l.x*u.y-u.x*l.y;r+=(l.x+u.x)*c,n+=(l.y+u.y)*c,e+=3*c}return new Nc(r/e,n/e,0,t)}(t),v=d.length;d.length;){var _=d.pop();(_.d>g.d||!g.d)&&(g=_,r&&console.log("found best %d after %d probes",Math.round(1e4*_.d)/1e4,v)),_.max-g.d<=e||(f=_.h/2,d.push(new Nc(_.p.x-f,_.p.y-f,f,t)),d.push(new Nc(_.p.x+f,_.p.y-f,f,t)),d.push(new Nc(_.p.x-f,_.p.y+f,f,t)),d.push(new Nc(_.p.x+f,_.p.y+f,f,t)),v+=4)}return r&&(console.log("num probes: "+v),console.log("best distance: "+g.d)),g.p}function jc(t,e){return e.max-t.max}function Nc(t,e,r,n){this.p=new st(t,e),this.h=r,this.d=function(t,e){for(var r=!1,n=1/0,i=0;i<e.length;i++)for(var o=e[i],a=0,s=o.length,l=s-1;a<s;l=a++){var u=o[a],c=o[l];u.y>t.y!=c.y>t.y&&t.x<(c.x-u.x)*(t.y-u.y)/(c.y-u.y)+u.x&&(r=!r),n=Math.min(n,Ia(t,u,c))}return(r?1:-1)*Math.sqrt(n)}(this.p,n),this.max=this.d+this.h*Math.SQRT2}Rc.prototype.push=function(t){this.data.push(t),this.length++,this._up(this.length-1)},Rc.prototype.pop=function(){if(0!==this.length){var t=this.data[0];return this.length--,0<this.length&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},Rc.prototype.peek=function(){return this.data[0]},Rc.prototype._up=function(t){for(var e=this.data,r=this.compare,n=e[t];0<t;){var i=t-1>>1,o=e[i];if(0<=r(n,o))break;e[t]=o,t=i}e[t]=n},Rc.prototype._down=function(t){for(var e=this.data,r=this.compare,n=this.length>>1,i=e[t];t<n;){var o=1+(t<<1),a=e[o],s=o+1;if(s<this.length&&r(e[s],a)<0&&(a=e[o=s]),0<=r(a,i))break;e[t]=a,t=o}e[t]=i};var Uc=e(function(t){t.exports=function(t,e){var r,n,i,o,a,s,l,u;for(r=3&t.length,n=t.length-r,i=e,a=3432918353,s=461845907,u=0;u<n;)l=255&t.charCodeAt(u)|(255&t.charCodeAt(++u))<<8|(255&t.charCodeAt(++u))<<16|(255&t.charCodeAt(++u))<<24,++u,i=27492+(65535&(o=5*(65535&(i=(i^=l=(65535&(l=(l=(65535&l)*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(l=0,r){case 3:l^=(255&t.charCodeAt(u+2))<<16;case 2:l^=(255&t.charCodeAt(u+1))<<8;case 1:i^=l=(65535&(l=(l=(65535&(l^=255&t.charCodeAt(u)))*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return i^=t.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0}}),Vc=e(function(t){t.exports=function(t,e){for(var r,n=t.length,i=e^n,o=0;4<=n;)r=1540483477*(65535&(r=255&t.charCodeAt(o)|(255&t.charCodeAt(++o))<<8|(255&t.charCodeAt(++o))<<16|(255&t.charCodeAt(++o))<<24))+((1540483477*(r>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(r=1540483477*(65535&(r^=r>>>24))+((1540483477*(r>>>16)&65535)<<16)),n-=4,++o;switch(n){case 3:i^=(255&t.charCodeAt(o+2))<<16;case 2:i^=(255&t.charCodeAt(o+1))<<8;case 1:i=1540483477*(65535&(i^=255&t.charCodeAt(o)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0}}),qc=Uc,Zc=Uc,Gc=Vc;qc.murmur3=Zc,qc.murmur2=Gc;function Wc(t,e){var r=0,n=0,i=e/Math.sqrt(2);switch(t){case"top-right":case"top-left":n=i-7;break;case"bottom-right":case"bottom-left":n=7-i;break;case"bottom":n=7-e;break;case"top":n=e-7}switch(t){case"top-right":case"bottom-right":r=-i;break;case"top-left":case"bottom-left":r=i;break;case"left":r=e;break;case"right":r=-e}return[r,n]}function Hc(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Xc(r,n,i,o,a,s,l){var t=s.layoutTextSize.evaluate(n,{}),e=s.layoutIconSize.evaluate(n,{}),u=s.textMaxSize.evaluate(n,{});void 0===u&&(u=t);function c(t,e){e.x<0||e.x>=ba||e.y<0||e.y>=ba||function(t,e,r,n,i,o,a,s,l,u,c,p,h,f,d,m,y,g,v,_,b){var x,w,E=t.addToLineVertexArray(e,r),S=0,k=0,C=0,T={},A=qc(""),P=(o.layout.get("text-radial-offset").evaluate(v,{})||0)*_c;for(var I in n.horizontal){var M=n.horizontal[I];if(!x){A=qc(M.text);var z=o.layout.get("text-rotate").evaluate(v,{});x=new Dc(a,r,e,s,l,u,M,c,p,h,t.overscaling,z)}var L=1===M.lineCount;if(k+=Kc(t,e,M,o,h,v,f,E,n.vertical?bc.horizontal:bc.horizontalOnly,L?Object.keys(n.horizontal):[I],T,_,b),L)break}n.vertical&&(C+=Kc(t,e,n.vertical,o,h,v,f,E,bc.vertical,["vertical"],T,_,b));var O=x?x.boxStartIndex:t.collisionBoxArray.length,D=x?x.boxEndIndex:t.collisionBoxArray.length;if(i){var R=function(t,e,r,n,i,o){var a,s,l,u,c=e.image,p=r.layout,h=e.top-1/c.pixelRatio,f=e.left-1/c.pixelRatio,d=e.bottom+1/c.pixelRatio,m=e.right+1/c.pixelRatio;if("none"!==p.get("icon-text-fit")&&i){var y=m-f,g=d-h,v=p.get("text-size").evaluate(o,{})/24,_=i.left*v,b=i.right*v,x=i.top*v,w=b-_,E=i.bottom*v-x,S=p.get("icon-text-fit-padding")[0],k=p.get("icon-text-fit-padding")[1],C=p.get("icon-text-fit-padding")[2],T=p.get("icon-text-fit-padding")[3],A="width"===p.get("icon-text-fit")?.5*(E-g):0,P="height"===p.get("icon-text-fit")?.5*(w-y):0,I="width"===p.get("icon-text-fit")||"both"===p.get("icon-text-fit")?w:y,M="height"===p.get("icon-text-fit")||"both"===p.get("icon-text-fit")?E:g;a=new st(_+P-T,x+A-S),s=new st(_+P+k+I,x+A-S),l=new st(_+P+k+I,x+A+C+M),u=new st(_+P-T,x+A+C+M)}else a=new st(f,h),s=new st(m,h),l=new st(m,d),u=new st(f,d);var z=r.layout.get("icon-rotate").evaluate(o,{})*Math.PI/180;if(z){var L=Math.sin(z),O=Math.cos(z),D=[O,-L,L,O];a._matMult(D),s._matMult(D),u._matMult(D),l._matMult(D)}return[{tl:a,tr:s,bl:u,br:l,tex:c.paddedRect,writingMode:void 0,glyphOffset:[0,0]}]}(0,i,o,0,Jc(n.horizontal),v),F=o.layout.get("icon-rotate").evaluate(v,{});w=new Dc(a,r,e,s,l,u,i,d,m,!1,t.overscaling,F),S=4*R.length;var B=t.iconSizeData,j=null;"source"===B.functionType?(j=[Ul*o.layout.get("icon-size").evaluate(v,{})])[0]>$c&&lt(t.layerIds[0]+': Value for "icon-size" is >= 256. Reduce your "icon-size".'):"composite"===B.functionType&&((j=[Ul*b.compositeIconSizes[0].evaluate(v,{}),Ul*b.compositeIconSizes[1].evaluate(v,{})])[0]>$c||j[1]>$c)&&lt(t.layerIds[0]+': Value for "icon-size" is >= 256. Reduce your "icon-size".'),t.addSymbols(t.icon,R,j,g,y,v,!1,e,E.lineStartIndex,E.lineLength)}var N=w?w.boxStartIndex:t.collisionBoxArray.length,U=w?w.boxEndIndex:t.collisionBoxArray.length;t.glyphOffsetArray.length>=Yl.MAX_GLYPHS&&lt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),t.symbolInstances.emplaceBack(e.x,e.y,0<=T.right?T.right:-1,0<=T.center?T.center:-1,0<=T.left?T.left:-1,T.vertical||-1,A,O,D,N,U,s,k,C,S,0,c,P)}(r,e,t,i,o,r.layers[0],r.collisionBoxArray,n.index,n.sourceLayerIndex,r.index,A,z,D,l,I,L,R,k,n,a,s)}var p,h,f,d,m,y,g,v,_,b,x,w,E,S=r.layers[0].layout,k=S.get("icon-offset").evaluate(n,{}),C=Jc(i.horizontal),T=t/24,A=r.tilePixelRatio*T,P=r.tilePixelRatio*u/24,I=r.tilePixelRatio*e,M=r.tilePixelRatio*S.get("symbol-spacing"),z=S.get("text-padding")*r.tilePixelRatio,L=S.get("icon-padding")*r.tilePixelRatio,O=S.get("text-max-angle")/180*Math.PI,D="map"===S.get("text-rotation-alignment")&&"point"!==S.get("symbol-placement"),R="map"===S.get("icon-rotation-alignment")&&"point"!==S.get("symbol-placement"),F=S.get("symbol-placement"),B=M/2;if("line"===F)for(var j=0,N=function(t,e,r,n,i){for(var o=[],a=0;a<t.length;a++)for(var s=t[a],l=void 0,u=0;u<s.length-1;u++){var c=s[u],p=s[u+1];c.x<0&&p.x<0||(c.x<0?c=new st(0,c.y+(p.y-c.y)*((0-c.x)/(p.x-c.x)))._round():p.x<0&&(p=new st(0,c.y+(p.y-c.y)*((0-c.x)/(p.x-c.x)))._round()),c.y<0&&p.y<0||(c.y<0?c=new st(c.x+(p.x-c.x)*((0-c.y)/(p.y-c.y)),0)._round():p.y<0&&(p=new st(c.x+(p.x-c.x)*((0-c.y)/(p.y-c.y)),0)._round()),c.x>=n&&p.x>=n||(c.x>=n?c=new st(n,c.y+(p.y-c.y)*((n-c.x)/(p.x-c.x)))._round():p.x>=n&&(p=new st(n,c.y+(p.y-c.y)*((n-c.x)/(p.x-c.x)))._round()),c.y>=i&&p.y>=i||(c.y>=i?c=new st(c.x+(p.x-c.x)*((i-c.y)/(p.y-c.y)),i)._round():p.y>=i&&(p=new st(c.x+(p.x-c.x)*((i-c.y)/(p.y-c.y)),i)._round()),l&&c.equals(l[l.length-1])||(l=[c],o.push(l)),l.push(p)))))}return o}(n.geometry,0,0,ba,ba);j<N.length;j+=1)for(var U=N[j],V=0,q=(p=U,h=M,f=O,d=i.vertical||C,m=o,y=24,g=P,v=r.overscaling,_=ba,void 0,b=zc(d,y,g),x=Lc(d,m),w=x*g,E=0===p[0].x||p[0].x===_||0===p[0].y||p[0].y===_,h-w<h/4&&(h=w+h/4),function t(e,r,n,i,o,a,s,l,u){for(var c=a/2,p=Mc(e),h=0,f=r-n,d=[],m=0;m<e.length-1;m++){for(var y=e[m],g=e[m+1],v=y.dist(g),_=g.angleTo(y);f+n<h+v;){var b=((f+=n)-h)/v,x=we(y.x,g.x,b),w=we(y.y,g.y,b);if(0<=x&&x<u&&0<=w&&w<u&&0<=f-c&&f+c<=p){var E=new jl(x,w,_,m);E._round(),i&&!Ic(e,E,a,i,o)||d.push(E)}}h+=v}return l||d.length||s||(d=t(e,h/2,n,i,o,a,s,!0,u)),d}(p,E?h/2*v%h:(x/2+2*y)*g*v%h,h,b,f,w,E,!1,_));V<q.length;V+=1){var Z=q[V];C&&Yc(r,C.text,B,Z)||c(U,Z)}else if("line-center"===F)for(var G=0,W=n.geometry;G<W.length;G+=1){var H=W[G];if(1<H.length){var X=Oc(H,O,i.vertical||C,o,24,P);X&&c(H,X)}}else if("Polygon"===n.type)for(var $=0,K=Ns(n.geometry,0);$<K.length;$+=1){var J=K[$],Y=Bc(J,16);c(J[0],new jl(Y.x,Y.y,0))}else if("LineString"===n.type)for(var Q=0,tt=n.geometry;Q<tt.length;Q+=1){var et=tt[Q];c(et,new jl(et[0].x,et[0].y,0))}else if("Point"===n.type)for(var rt=0,nt=n.geometry;rt<nt.length;rt+=1)for(var it=0,ot=nt[rt];it<ot.length;it+=1){var at=ot[it];c([at],new jl(at.x,at.y,0))}}var $c=65535;function Kc(t,e,r,L,n,i,o,a,s,l,u,c,p){var h=function(t,e,r,n,i,o,a){for(var s=L.layout.get("text-rotate").evaluate(o,{})*Math.PI/180,l=e.positionedGlyphs,u=[],c=0;c<l.length;c++){var p=l[c],h=a[p.fontStack],f=h&&h[p.glyph];if(f){var d=f.rect;if(d){var m=$u+1,y=f.metrics.advance*p.scale/2,g=i?[p.x+y,p.y]:[0,0],v=i?[0,0]:[p.x+y+r[0],p.y+r[1]],_=(f.metrics.left-m)*p.scale-y+v[0],b=(-f.metrics.top-m)*p.scale+v[1],x=_+d.w*p.scale,w=b+d.h*p.scale,E=new st(_,b),S=new st(x,b),k=new st(_,w),C=new st(x,w);if(i&&p.vertical){var T=new st(-y,y),A=-Math.PI/2,P=new st(5,0);E._rotateAround(A,T)._add(P),S._rotateAround(A,T)._add(P),k._rotateAround(A,T)._add(P),C._rotateAround(A,T)._add(P)}if(s){var I=Math.sin(s),M=Math.cos(s),z=[M,-I,I,M];E._matMult(z),S._matMult(z),k._matMult(z),C._matMult(z)}u.push({tl:E,tr:S,bl:k,br:C,tex:d,writingMode:e.writingMode,glyphOffset:g})}}}return u}(0,r,o,0,n,i,c),f=t.textSizeData,d=null;"source"===f.functionType?(d=[Ul*L.layout.get("text-size").evaluate(i,{})])[0]>$c&&lt(t.layerIds[0]+': Value for "text-size" is >= 256. Reduce your "text-size".'):"composite"===f.functionType&&((d=[Ul*p.compositeTextSizes[0].evaluate(i,{}),Ul*p.compositeTextSizes[1].evaluate(i,{})])[0]>$c||d[1]>$c)&&lt(t.layerIds[0]+': Value for "text-size" is >= 256. Reduce your "text-size".'),t.addSymbols(t.text,h,d,o,n,i,s,e,a.lineStartIndex,a.lineLength);for(var m=0,y=l;m<y.length;m+=1)u[y[m]]=t.text.placedSymbolArray.length-1;return 4*h.length}function Jc(t){for(var e in t)return t[e];return null}function Yc(t,e,r,n){var i=t.compareText;if(e in i){for(var o=i[e],a=o.length-1;0<=a;a--)if(n.dist(o[a])<r)return!0}else i[e]=[];return i[e].push(n),!1}t.Actor=Xu,t.AlphaImage=rs,t.CanonicalTileID=oc,t.CollisionBoxArray=mo,t.Color=$t,t.DEMData=uc,t.DataConstantProperty=Un,t.DictionaryCoder=cc,t.EXTENT=ba,t.ErrorEvent=Et,t.EvaluationParameters=Cn,t.Event=bt,t.Evented=xt,t.FeatureIndex=mc,t.FillBucket=Zs,t.FillExtrusionBucket=ll,t.ImageAtlas=_u,t.ImagePosition=gu,t.LineBucket=bl,t.LngLat=Yu,t.LngLatBounds=Ju,t.MercatorCoordinate=ic,t.ONE_EM=_c,t.OverscaledTileID=sc,t.Point=st,t.Point$1=st,t.ProgramConfiguration=ga,t.Properties=Xn,t.Protobuf=Tu,t.RGBAImage=ns,t.ResourceType=rt,t.SegmentVector=Fo,t.SourceFeatureState=dc,t.StructArrayLayout1ui2=io,t.StructArrayLayout2i4=ii,t.StructArrayLayout2ui4=eo,t.StructArrayLayout3ui6=Yi,t.StructArrayLayout4i8=si,t.SymbolBucket=Yl,t.Texture=bu,t.Tile=vc,t.Transitionable=Dn,t.Uniform1f=Jo,t.Uniform1i=Ko,t.Uniform2f=Yo,t.Uniform3f=Qo,t.Uniform4f=ta,t.UniformColor=ea,t.UniformMatrix4f=na,t.UnwrappedTileID=ac,t.ValidationError=Ct,t.WritingMode=bc,t.ZoomHistory=bn,t.addDynamicAttributes=$l,t.asyncAll=function(t,e,n){if(!t.length)return n(null,[]);var i=t.length,o=new Array(t.length),a=null;t.forEach(function(t,r){e(t,function(t,e){t&&(a=t),o[r]=e,0==--i&&n(a,o)})})},t.bezier=i,t.bindAll=m,t.browser=I,t.canonicalizeTileset=function(t,e){if(!B(e))return t.tiles||[];for(var r=[],n=0,i=t.tiles;n<i.length;n+=1){var o=i[n],a=U(o);r.push(a)}return r},t.clamp=u,t.clone=function(t){var e=new Ba(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.clone$1=_,t.config=M,t.create=function(){var t=new Ba(16);return Ba!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},t.create$1=ja,t.create$2=function(){var t=new Ba(4);return Ba!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},t.createCommonjsModule=e,t.createExpression=Sr,t.createLayout=ei,t.createStyleLayer=function(t){return"custom"===t.type?new fu(t):new du[t.type](t)},t.deepEqual=h,t.ease=a,t.emitValidationErrors=cn,t.endsWith=y,t.evaluateRadialOffset=Wc,t.evaluateSizeForFeature=ql,t.evaluateSizeForZoom=Zl,t.evented=Mn,t.extend=d,t.featureFilter=Br,t.filterObject=v,t.fromRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},t.getAnchorAlignment=Ac,t.getAnchorJustification=Hc,t.getArrayBuffer=ht,t.getImage=gt,t.getJSON=function(t,e){return pt(d(t,{type:"json"}),e)},t.getReferrer=mt,t.getVideo=function(t,e){var r,n,i=self.document.createElement("video");i.muted=!0,i.onloadstart=function(){e(null,i)};for(var o=0;o<t.length;o++){var a=self.document.createElement("source");r=t[o],n=void 0,(n=self.document.createElement("a")).href=r,n.protocol===self.document.location.protocol&&n.host===self.document.location.host||(i.crossOrigin="Anonymous"),a.src=t[o],i.appendChild(a)}return{cancel:function(){}}},t.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.invert=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],p=e[9],h=e[10],f=e[11],d=e[12],m=e[13],y=e[14],g=e[15],v=r*s-n*a,_=r*l-i*a,b=r*u-o*a,x=n*l-i*s,w=n*u-o*s,E=i*u-o*l,S=c*m-p*d,k=c*y-h*d,C=c*g-f*d,T=p*y-h*m,A=p*g-f*m,P=h*g-f*y,I=v*P-_*A+b*T+x*C-w*k+E*S;return I?(I=1/I,t[0]=(s*P-l*A+u*T)*I,t[1]=(i*A-n*P-o*T)*I,t[2]=(m*E-y*w+g*x)*I,t[3]=(h*w-p*E-f*x)*I,t[4]=(l*C-a*P-u*k)*I,t[5]=(r*P-i*C+o*k)*I,t[6]=(y*b-d*E-g*_)*I,t[7]=(c*E-h*b+f*_)*I,t[8]=(a*A-s*C+u*S)*I,t[9]=(n*C-r*A-o*S)*I,t[10]=(d*w-m*b+g*v)*I,t[11]=(p*b-c*w-f*v)*I,t[12]=(s*k-a*T-l*S)*I,t[13]=(r*T-n*k+i*S)*I,t[14]=(m*_-d*x-y*v)*I,t[15]=(c*x-p*_+h*v)*I,t):null},t.isChar=xn,t.isMapboxURL=B,t.keysDifference=function(t,e){var r=[];for(var n in t)n in e||r.push(n);return r},t.makeRequest=pt,t.mapObject=g,t.mercatorXfromLng=tc,t.mercatorYfromLat=ec,t.mercatorZfromAltitude=rc,t.multiply=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],p=e[8],h=e[9],f=e[10],d=e[11],m=e[12],y=e[13],g=e[14],v=e[15],_=r[0],b=r[1],x=r[2],w=r[3];return t[0]=_*n+b*s+x*p+w*m,t[1]=_*i+b*l+x*h+w*y,t[2]=_*o+b*u+x*f+w*g,t[3]=_*a+b*c+x*d+w*v,_=r[4],b=r[5],x=r[6],w=r[7],t[4]=_*n+b*s+x*p+w*m,t[5]=_*i+b*l+x*h+w*y,t[6]=_*o+b*u+x*f+w*g,t[7]=_*a+b*c+x*d+w*v,_=r[8],b=r[9],x=r[10],w=r[11],t[8]=_*n+b*s+x*p+w*m,t[9]=_*i+b*l+x*h+w*y,t[10]=_*o+b*u+x*f+w*g,t[11]=_*a+b*c+x*d+w*v,_=r[12],b=r[13],x=r[14],w=r[15],t[12]=_*n+b*s+x*p+w*m,t[13]=_*i+b*l+x*h+w*y,t[14]=_*o+b*u+x*f+w*g,t[15]=_*a+b*c+x*d+w*v,t},t.mvt=il,t.normalizeGlyphsURL=function(t,e){if(!B(t))return t;var r=G(t);return r.path="/fonts/v1"+r.path,F(r,e)},t.normalizeSourceURL=function(t,e){if(!B(t))return t;var r=G(t);return r.path="/v4/"+r.authority+".json",r.params.push("secure"),F(r,e)},t.normalizeSpriteURL=function(t,e,r,n){var i=G(t);return B(t)?(i.path="/styles/v1"+i.path+"/sprite"+e+r,F(i,n)):(i.path+=""+e+r,W(i))},t.normalizeStyleURL=function(t,e){if(!B(t))return t;var r=G(t);return r.path="/styles/v1"+r.path,F(r,e)},t.normalizeTileURL=function(t,e,r){if(!e||!B(e))return t;var n=G(t),i=2<=I.devicePixelRatio||512===r?"@2x":"",o=z.supported?".webp":"$1";return n.path=n.path.replace(V,i+o),n.path="/v4"+n.path,F(n)},t.number=we,t.ortho=function(t,e,r,n,i,o,a){var s=1/(e-r),l=1/(n-i),u=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+r)*s,t[13]=(i+n)*l,t[14]=(a+o)*u,t[15]=1,t},t.parseGlyphPBF=function(t){return new Tu(t).readFields(Gu,[])},t.pbf=Tu,t.performSymbolLayout=function(t,e,r,n,i,o){t.createArrays();var a=512*t.overscaling;t.tilePixelRatio=ba/a,t.compareText={},t.iconsNeedLinear=!1;var s,l,u,c,p,h,f,d,m,y,g,v=t.layers[0].layout,_=t.layers[0]._unevaluatedLayout._values,b={};if("composite"===t.textSizeData.functionType){var x=t.textSizeData.zoomRange,w=x.min,E=x.max;b.compositeTextSizes=[_["text-size"].possiblyEvaluate(new Cn(w)),_["text-size"].possiblyEvaluate(new Cn(E))]}if("composite"===t.iconSizeData.functionType){var S=t.iconSizeData.zoomRange,k=S.min,C=S.max;b.compositeIconSizes=[_["icon-size"].possiblyEvaluate(new Cn(k)),_["icon-size"].possiblyEvaluate(new Cn(C))]}b.layoutTextSize=_["text-size"].possiblyEvaluate(new Cn(t.zoom+1)),b.layoutIconSize=_["icon-size"].possiblyEvaluate(new Cn(t.zoom+1)),b.textMaxSize=_["text-size"].possiblyEvaluate(new Cn(18));for(var T=v.get("text-line-height")*_c,A="map"===v.get("text-rotation-alignment")&&"point"!==v.get("symbol-placement"),P=v.get("text-keep-upright"),I=0,M=t.features;I<M.length;I+=1){var z=M[I],L=v.get("text-font").evaluate(z,{}).join(","),O=r,D={horizontal:{},vertical:void 0},R=z.text,F=[0,0];if(R){var B=R.toString(),j=v.get("text-letter-spacing").evaluate(z,{})*_c,N=En(B)?j:0,U=v.get("text-anchor").evaluate(z,{}),V=v.get("text-variable-anchor"),q=v.get("text-radial-offset").evaluate(z,{});V||(F=q?Wc(U,q*_c):v.get("text-offset").evaluate(z,{}).map(function(t){return t*_c}));var Z=A?"center":v.get("text-justify").evaluate(z,{}),G="point"===v.get("symbol-placement")?v.get("text-max-width").evaluate(z,{})*_c:0;if(!A&&V)for(var W="auto"===Z?V.map(function(t){return Hc(t)}):[Z],H=!1,X=0;X<W.length;X++){var $=W[X];if(!D.horizontal[$])if(H)D.horizontal[$]=D.horizontal[0];else{var K=wc(R,e,L,G,T,"center",$,N,F,bc.horizontal);K&&(H=1===(D.horizontal[$]=K).lineCount)}}else{"auto"===Z&&(Z=Hc(U));var J=wc(R,e,L,G,T,U,Z,N,F,bc.horizontal);J&&(D.horizontal[Z]=J),wn(B)&&A&&P&&(D.vertical=wc(R,e,L,G,T,U,Z,N,F,bc.vertical))}}var Y=void 0;if(z.icon){var Q=n[z.icon];Q&&(s=i[z.icon],l=v.get("icon-offset").evaluate(z,{}),u=v.get("icon-anchor").evaluate(z,{}),void 0,c=Ac(u),p=c.horizontalAlign,h=c.verticalAlign,f=l[0],d=l[1],m=f-s.displaySize[0]*p,y=m+s.displaySize[0],g=d-s.displaySize[1]*h,Y={image:s,top:g,bottom:g+s.displaySize[1],left:m,right:y},void 0===t.sdfIcons?t.sdfIcons=Q.sdf:t.sdfIcons!==Q.sdf&&lt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),Q.pixelRatio!==t.pixelRatio?t.iconsNeedLinear=!0:0!==v.get("icon-rotate").constantOr(1)&&(t.iconsNeedLinear=!0))}(Object.keys(D.horizontal).length||Y)&&Xc(t,z,D,Y,O,b,F)}o&&t.generateCollisionDebugBuffers()},t.perspective=function(t,e,r,n,i){var o,a=1/Math.tan(e/2);return t[0]=a/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(n-i),t[10]=(i+n)*o,t[14]=2*i*n*o):(t[10]=-1,t[14]=-2*n),t},t.pick=function(t,e){for(var r={},n=0;n<e.length;n++){var i=e[n];i in t&&(r[i]=t[i])}return r},t.plugin=zn,t.polygonIntersectsPolygon=ka,t.postMapLoadEvent=et,t.postTurnstileEvent=Q,t.potpack=yu,t.properties=nu,t.rasterBoundsAttributes=pc,t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.register=yn,t.registerForPluginAvailability=function(t){return Pn?t({pluginURL:Pn,completionCallback:Tn}):Mn.once("pluginAvailable",t),t},t.rotate=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(r),l=Math.cos(r);return t[0]=n*l+o*s,t[1]=i*l+a*s,t[2]=n*-s+o*l,t[3]=i*-s+a*l,t},t.rotateX=function(t,e,r){var n=Math.sin(r),i=Math.cos(r),o=e[4],a=e[5],s=e[6],l=e[7],u=e[8],c=e[9],p=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+u*n,t[5]=a*i+c*n,t[6]=s*i+p*n,t[7]=l*i+h*n,t[8]=u*i-o*n,t[9]=c*i-a*n,t[10]=p*i-s*n,t[11]=h*i-l*n,t},t.rotateZ=function(t,e,r){var n=Math.sin(r),i=Math.cos(r),o=e[0],a=e[1],s=e[2],l=e[3],u=e[4],c=e[5],p=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+u*n,t[1]=a*i+c*n,t[2]=s*i+p*n,t[3]=l*i+h*n,t[4]=u*i-o*n,t[5]=c*i-a*n,t[6]=p*i-s*n,t[7]=h*i-l*n,t},t.scale=function(t,e,r){var n=r[0],i=r[1],o=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.setRTLTextPlugin=function(t,e){if(An)throw new Error("setRTLTextPlugin cannot be called multiple times.");An=!0,Pn=I.resolveURL(t),Tn=function(t){t?(An=!1,Pn=null,e&&e(t)):In=!0},Mn.fire(new bt("pluginAvailable",{pluginURL:Pn,completionCallback:Tn}))},t.sphericalToCartesian=function(t){var e=t[0],r=t[1],n=t[2];return r+=90,r*=Math.PI/180,n*=Math.PI/180,{x:e*Math.cos(r)*Math.sin(n),y:e*Math.sin(r)*Math.sin(n),z:e*Math.cos(n)}},t.styleSpec=kt,t.symbolSize=Gl,t.transformMat3=function(t,e,r){var n=e[0],i=e[1],o=e[2];return t[0]=n*r[0]+i*r[3]+o*r[6],t[1]=n*r[1]+i*r[4]+o*r[7],t[2]=n*r[2]+i*r[5]+o*r[8],t},t.transformMat4=qa,t.translate=function(t,e,r){var n,i,o,a,s,l,u,c,p,h,f,d,m=r[0],y=r[1],g=r[2];return e===t?(t[12]=e[0]*m+e[4]*y+e[8]*g+e[12],t[13]=e[1]*m+e[5]*y+e[9]*g+e[13],t[14]=e[2]*m+e[6]*y+e[10]*g+e[14],t[15]=e[3]*m+e[7]*y+e[11]*g+e[15]):(n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],p=e[8],h=e[9],f=e[10],d=e[11],t[0]=n,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=l,t[6]=u,t[7]=c,t[8]=p,t[9]=h,t[10]=f,t[11]=d,t[12]=n*m+s*y+p*g+e[12],t[13]=i*m+l*y+h*g+e[13],t[14]=o*m+u*y+f*g+e[14],t[15]=a*m+c*y+d*g+e[15]),t},t.uniqueId=c,t.validateCustomStyleLayer=function(t){var e=[],r=t.id;return void 0===r&&e.push({message:"layers."+r+': missing required property "id"'}),void 0===t.render&&e.push({message:"layers."+r+': missing required method "render"'}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:"layers."+r+': property "renderingMode" must be either "2d" or "3d"'}),e},t.validateLight=sn,t.validateStyle=an,t.values=function(t){var e=[];for(var r in t)e.push(t[r]);return e},t.vectorTile=il,t.version="0.54.0",t.warnOnce=lt,t.webpSupported=z,t.window=self,t.wrap=s}),t(["./shared.js"],function(A){"use strict";function l(t){var e=typeof t;if("number"==e||"boolean"==e||"string"==e||null==t)return JSON.stringify(t);if(Array.isArray(t)){for(var r="[",n=0,i=t;n<i.length;n+=1)r+=l(i[n])+",";return r+"]"}for(var o=Object.keys(t).sort(),a="{",s=0;s<o.length;s++)a+=JSON.stringify(o[s])+":"+l(t[o[s]])+",";return a+"}"}function v(t){for(var e="",r=0,n=A.refProperties;r<n.length;r+=1)e+="/"+l(t[n[r]]);return e}function r(t){t&&this.replace(t)}r.prototype.replace=function(t){this._layerConfigs={},this._layers={},this.update(t,[])},r.prototype.update=function(t,e){for(var r=this,n=0,i=t;n<i.length;n+=1){var o=i[n];this._layerConfigs[o.id]=o;var a=this._layers[o.id]=A.createStyleLayer(o);a._featureFilter=A.featureFilter(a.filter)}for(var s=0,l=e;s<l.length;s+=1){var u=l[s];delete this._layerConfigs[u],delete this._layers[u]}this.familiesBySource={};for(var c=0,p=function(t){for(var e={},r=0;r<t.length;r++){var n=v(t[r]),i=e[n];(i=i||(e[n]=[])).push(t[r])}var o=[];for(var a in e)o.push(e[a]);return o}(A.values(this._layerConfigs));c<p.length;c+=1){var h=p[c].map(function(t){return r._layers[t.id]}),f=h[0];if("none"!==f.visibility){var d=f.source||"",m=this.familiesBySource[d];m=m||(this.familiesBySource[d]={});var y=f.sourceLayer||"_geojsonTileLayer",g=m[y];(g=g||(m[y]=[])).push(h)}}};function P(t){var e={},r=[];for(var n in t){var i=t[n],o=e[n]={};for(var a in i){var s=i[+a];if(s&&0!==s.bitmap.width&&0!==s.bitmap.height){var l={x:0,y:0,w:s.bitmap.width+2,h:s.bitmap.height+2};r.push(l),o[a]={rect:l,metrics:s.metrics}}}}var u=A.potpack(r),c=u.w,p=u.h,h=new A.AlphaImage({width:c||1,height:p||1});for(var f in t){var d=t[f];for(var m in d){var y=d[+m];if(y&&0!==y.bitmap.width&&0!==y.bitmap.height){var g=e[f][m].rect;A.AlphaImage.copy(y.bitmap,h,{x:0,y:0},{x:g.x+1,y:g.y+1},y.bitmap)}}}this.image=h,this.positions=e}A.register("GlyphAtlas",P);function e(t){this.tileID=new A.OverscaledTileID(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.uid=t.uid,this.zoom=t.zoom,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming,this.returnDependencies=!!t.returnDependencies}function I(t,e){for(var r=new A.EvaluationParameters(e),n=0,i=t;n<i.length;n+=1)i[n].recalculate(r)}e.prototype.parse=function(t,e,r,i){var n=this;this.status="parsing",this.data=t,this.collisionBoxArray=new A.CollisionBoxArray;var o=new A.DictionaryCoder(Object.keys(t.layers).sort()),a=new A.FeatureIndex(this.tileID);a.bucketLayerIDs=[];var s,l,u,c,p={},h={featureIndex:a,iconDependencies:{},patternDependencies:{},glyphDependencies:{}},f=e.familiesBySource[this.source];for(var d in f){var m=t.layers[d];if(m){1===m.version&&A.warnOnce('Vector tile source "'+this.source+'" layer "'+d+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var y=o.encode(d),g=[],v=0;v<m.length;v++){var _=m.feature(v);g.push({feature:_,index:v,sourceLayerIndex:y})}for(var b=0,x=f[d];b<x.length;b+=1){var w=x[b],E=w[0];E.minzoom&&this.zoom<Math.floor(E.minzoom)||E.maxzoom&&this.zoom>=E.maxzoom||"none"!==E.visibility&&(I(w,this.zoom),(p[E.id]=E.createBucket({index:a.bucketLayerIDs.length,layers:w,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:y,sourceID:this.source})).populate(g,h),a.bucketLayerIDs.push(w.map(function(t){return t.id})))}}}var S=A.mapObject(h.glyphDependencies,function(t){return Object.keys(t).map(Number)});Object.keys(S).length?r.send("getGlyphs",{uid:this.uid,stacks:S},function(t,e){s||(s=t,l=e,T.call(n))}):l={};var k=Object.keys(h.iconDependencies);k.length?r.send("getImages",{icons:k},function(t,e){s||(s=t,u=e,T.call(n))}):u={};var C=Object.keys(h.patternDependencies);function T(){if(s)return i(s);if(l&&u&&c){var t=new P(l),e=new A.ImageAtlas(u,c);for(var r in p){var n=p[r];n instanceof A.SymbolBucket?(I(n.layers,this.zoom),A.performSymbolLayout(n,l,t.positions,u,e.iconPositions,this.showCollisionBoxes)):n.hasPattern&&(n instanceof A.LineBucket||n instanceof A.FillBucket||n instanceof A.FillExtrusionBucket)&&(I(n.layers,this.zoom),n.addFeatures(h,e.patternPositions))}this.status="done",i(null,{buckets:A.values(p).filter(function(t){return!t.isEmpty()}),featureIndex:a,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:t.image,imageAtlas:e,glyphMap:this.returnDependencies?l:null,iconMap:this.returnDependencies?u:null,glyphPositions:this.returnDependencies?t.positions:null})}}C.length?r.send("getImages",{icons:C},function(t,e){s||(s=t,c=e,T.call(n))}):c={},T.call(this)};function t(t){this._marks={start:[t.url,"start"].join("#"),end:[t.url,"end"].join("#"),measure:t.url.toString()},p.mark(this._marks.start)}var n="undefined"!=typeof performance,p={getEntriesByName:function(t){return!!(n&&performance&&performance.getEntriesByName)&&performance.getEntriesByName(t)},mark:function(t){return!!(n&&performance&&performance.mark)&&performance.mark(t)},measure:function(t,e,r){return!!(n&&performance&&performance.measure)&&performance.measure(t,e,r)},clearMarks:function(t){return!!(n&&performance&&performance.clearMarks)&&performance.clearMarks(t)},clearMeasures:function(t){return!!(n&&performance&&performance.clearMeasures)&&performance.clearMeasures(t)}};function i(t,i){var e=A.getArrayBuffer(t.request,function(t,e,r,n){t?i(t):e&&i(null,{vectorTile:new A.vectorTile.VectorTile(new A.pbf(e)),rawData:e,cacheControl:r,expires:n})});return function(){e.cancel(),i()}}t.prototype.finish=function(){p.mark(this._marks.end);var t=p.getEntriesByName(this._marks.measure);return 0===t.length&&(p.measure(this._marks.measure,this._marks.start,this._marks.end),t=p.getEntriesByName(this._marks.measure),p.clearMarks(this._marks.start),p.clearMarks(this._marks.end),p.clearMeasures(this._marks.measure)),t},p.Performance=t;function o(t,e,r){this.actor=t,this.layerIndex=e,this.loadVectorData=r||i,this.loading={},this.loaded={}}o.prototype.loadTile=function(t,a){var s=this,l=t.uid;this.loading||(this.loading={});var u=!!(t&&t.request&&t.request.collectResourceTiming)&&new p.Performance(t.request),c=this.loading[l]=new e(t);c.abort=this.loadVectorData(t,function(t,e){if(delete s.loading[l],t||!e)return c.status="done",s.loaded[l]=c,a(t);var r=e.rawData,n={};e.expires&&(n.expires=e.expires),e.cacheControl&&(n.cacheControl=e.cacheControl);var i={};if(u){var o=u.finish();o&&(i.resourceTiming=JSON.parse(JSON.stringify(o)))}c.vectorTile=e.vectorTile,c.parse(e.vectorTile,s.layerIndex,s.actor,function(t,e){if(t||!e)return a(t);a(null,A.extend({rawTileData:r.slice(0)},e,n,i))}),s.loaded=s.loaded||{},s.loaded[l]=c})},o.prototype.reloadTile=function(t,n){var e=this.loaded,r=t.uid,i=this;if(e&&e[r]){var o=e[r];o.showCollisionBoxes=t.showCollisionBoxes;var a=function(t,e){var r=o.reloadCallback;r&&(delete o.reloadCallback,o.parse(o.vectorTile,i.layerIndex,i.actor,r)),n(t,e)};"parsing"===o.status?o.reloadCallback=a:"done"===o.status&&(o.vectorTile?o.parse(o.vectorTile,this.layerIndex,this.actor,a):a())}},o.prototype.abortTile=function(t,e){var r=this.loading,n=t.uid;r&&r[n]&&r[n].abort&&(r[n].abort(),delete r[n]),e()},o.prototype.removeTile=function(t,e){var r=this.loaded,n=t.uid;r&&r[n]&&delete r[n],e()};function a(){this.loaded={}}a.prototype.loadTile=function(t,e){var r=t.uid,n=t.encoding,i=t.rawImageData,o=new A.DEMData(r,i,n);this.loaded=this.loaded||{},e(null,this.loaded[r]=o)},a.prototype.removeTile=function(t){var e=this.loaded,r=t.uid;e&&e[r]&&delete e[r]};var u={RADIUS:6378137,FLATTENING:1/298.257223563,POLAR_RADIUS:6356752.3142};function s(t){var e=0;if(t&&0<t.length){e+=Math.abs(c(t[0]));for(var r=1;r<t.length;r++)e-=Math.abs(c(t[r]))}return e}function c(t){var e,r,n,i,o,a,s=0,l=t.length;if(2<l){for(a=0;a<l;a++)o=a===l-2?(n=l-2,i=l-1,0):a===l-1?(n=l-1,i=0,1):(i=(n=a)+1,a+2),e=t[n],r=t[i],s+=(h(t[o][0])-h(e[0]))*Math.sin(h(r[1]));s=s*u.RADIUS*u.RADIUS/2}return s}function h(t){return t*Math.PI/180}var f={geometry:function t(e){var r,n=0;switch(e.type){case"Polygon":return s(e.coordinates);case"MultiPolygon":for(r=0;r<e.coordinates.length;r++)n+=s(e.coordinates[r]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(r=0;r<e.geometries.length;r++)n+=t(e.geometries[r]);return n}},ring:c};function d(e,r){return function(t){return e(t,r)}}function m(t,e){e=!!e,t[0]=y(t[0],e);for(var r=1;r<t.length;r++)t[r]=y(t[r],!e);return t}function y(t,e){return r=t,0<=f.ring(r)===e?t:t.reverse();var r}function g(t){this._feature=t,this.extent=A.EXTENT,this.type=t.type,this.properties=t.tags,"id"in t&&!isNaN(t.id)&&(this.id=parseInt(t.id,10))}var _=A.vectorTile.VectorTileFeature.prototype.toGeoJSON;g.prototype.loadGeometry=function(){if(1===this._feature.type){for(var t=[],e=0,r=this._feature.geometry;e<r.length;e+=1){var n=r[e];t.push([new A.Point$1(n[0],n[1])])}return t}for(var i=[],o=0,a=this._feature.geometry;o<a.length;o+=1){for(var s=[],l=0,u=a[o];l<u.length;l+=1){var c=u[l];s.push(new A.Point$1(c[0],c[1]))}i.push(s)}return i},g.prototype.toGeoJSON=function(t,e,r){return _.call(this,t,e,r)};var b=function(t){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=A.EXTENT,this.length=t.length,this._features=t};b.prototype.feature=function(t){return new g(this._features[t])};var x=A.vectorTile.VectorTileFeature,w=E;function E(t,e){this.options=e||{},this.features=t,this.length=t.length}function S(t,e){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}E.prototype.feature=function(t){return new S(this.features[t],this.options.extent)},S.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var e=0;e<t.length;e++){for(var r=t[e],n=[],i=0;i<r.length;i++)n.push(new A.Point$1(r[i][0],r[i][1]));this.geometry.push(n)}return this.geometry},S.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,r=-1/0,n=1/0,i=-1/0,o=0;o<t.length;o++)for(var a=t[o],s=0;s<a.length;s++){var l=a[s];e=Math.min(e,l.x),r=Math.max(r,l.x),n=Math.min(n,l.y),i=Math.max(i,l.y)}return[e,n,r,i]},S.prototype.toGeoJSON=x.prototype.toGeoJSON;var k=M,C=M,T=w;function M(t){var e=new A.pbf;return function(t,e){for(var r in t.layers)e.writeMessage(3,z,t.layers[r])}(t,e),e.finish()}function z(t,e){var r;e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var n={keys:[],values:[],keycache:{},valuecache:{}};for(r=0;r<t.length;r++)n.feature=t.feature(r),e.writeMessage(2,L,n);var i=n.keys;for(r=0;r<i.length;r++)e.writeStringField(3,i[r]);var o=n.values;for(r=0;r<o.length;r++)e.writeMessage(4,B,o[r])}function L(t,e){var r=t.feature;void 0!==r.id&&e.writeVarintField(1,r.id),e.writeMessage(2,O,t),e.writeVarintField(3,r.type),e.writeMessage(4,F,r)}function O(t,e){var r=t.feature,n=t.keys,i=t.values,o=t.keycache,a=t.valuecache;for(var s in r.properties){var l=o[s];void 0===l&&(n.push(s),l=n.length-1,o[s]=l),e.writeVarint(l);var u=r.properties[s],c=typeof u;"string"!=c&&"boolean"!=c&&"number"!=c&&(u=JSON.stringify(u));var p=c+":"+u,h=a[p];void 0===h&&(i.push(u),h=i.length-1,a[p]=h),e.writeVarint(h)}}function D(t,e){return(e<<3)+(7&t)}function R(t){return t<<1^t>>31}function F(t,e){for(var r=t.loadGeometry(),n=t.type,i=0,o=0,a=r.length,s=0;s<a;s++){var l=r[s],u=1;1===n&&(u=l.length),e.writeVarint(D(1,u));for(var c=3===n?l.length-1:l.length,p=0;p<c;p++){1===p&&1!==n&&e.writeVarint(D(2,c-1));var h=l[p].x-i,f=l[p].y-o;e.writeVarint(R(h)),e.writeVarint(R(f)),i+=h,o+=f}3===n&&e.writeVarint(D(7,1))}}function B(t,e){var r=typeof t;"string"==r?e.writeStringField(1,t):"boolean"==r?e.writeBooleanField(7,t):"number"==r&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}function j(t,e,r,n){N(t,r,n),N(e,2*r,2*n),N(e,2*r+1,2*n+1)}function N(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function U(t,e,r,n){var i=t-r,o=e-n;return i*i+o*o}k.fromVectorTileJs=C,k.fromGeojsonVt=function(t,e){e=e||{};var r={};for(var n in t)r[n]=new w(t[n].features,e),r[n].name=n,r[n].version=e.version,r[n].extent=e.extent;return M({layers:r})},k.GeoJSONWrapper=T;function V(t){return t[0]}function q(t){return t[1]}function Z(t,e,r,n,i){void 0===e&&(e=V),void 0===r&&(r=q),void 0===n&&(n=64),void 0===i&&(i=Float64Array),this.nodeSize=n;for(var o=(this.points=t).length<65536?Uint16Array:Uint32Array,a=this.ids=new o(t.length),s=this.coords=new i(2*t.length),l=0;l<t.length;l++)s[2*(a[l]=l)]=e(t[l]),s[2*l+1]=r(t[l]);!function t(e,r,n,i,o,a){if(!(o-i<=n)){var s=i+o>>1;!function t(e,r,n,i,o,a){for(;i<o;){if(600<o-i){var s=o-i+1,l=n-i+1,u=Math.log(s),c=.5*Math.exp(2*u/3),p=.5*Math.sqrt(u*c*(s-c)/s)*(l-s/2<0?-1:1);t(e,r,n,Math.max(i,Math.floor(n-l*c/s+p)),Math.min(o,Math.floor(n+(s-l)*c/s+p)),a)}var h=r[2*n+a],f=i,d=o;for(j(e,r,i,n),r[2*o+a]>h&&j(e,r,i,o);f<d;){for(j(e,r,f,d),f++,d--;r[2*f+a]<h;)f++;for(;r[2*d+a]>h;)d--}r[2*i+a]===h?j(e,r,i,d):j(e,r,++d,o),d<=n&&(i=d+1),n<=d&&(o=d-1)}}(e,r,s,i,o,a%2),t(e,r,n,i,s-1,a+1),t(e,r,n,1+s,o,a+1)}}(a,s,n,0,a.length-1,0)}Z.prototype.range=function(t,e,r,n){return function(t,e,r,n,i,o,a){for(var s,l,u=[0,t.length-1,0],c=[];u.length;){var p=u.pop(),h=u.pop(),f=u.pop();if(h-f<=a)for(var d=f;d<=h;d++)s=e[2*d],l=e[2*d+1],r<=s&&s<=i&&n<=l&&l<=o&&c.push(t[d]);else{var m=Math.floor((f+h)/2);s=e[2*m],l=e[2*m+1],r<=s&&s<=i&&n<=l&&l<=o&&c.push(t[m]);var y=(p+1)%2;(0===p?r<=s:n<=l)&&(u.push(f),u.push(m-1),u.push(y)),(0===p?s<=i:l<=o)&&(u.push(m+1),u.push(h),u.push(y))}}return c}(this.ids,this.coords,t,e,r,n,this.nodeSize)};function G(t){this.options=J(Object.create(W),t),this.trees=new Array(this.options.maxZoom+1)}var W={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!(Z.prototype.within=function(t,e,r){return function(t,e,r,n,i,o){for(var a=[0,t.length-1,0],s=[],l=i*i;a.length;){var u=a.pop(),c=a.pop(),p=a.pop();if(c-p<=o)for(var h=p;h<=c;h++)U(e[2*h],e[2*h+1],r,n)<=l&&s.push(t[h]);else{var f=Math.floor((p+c)/2),d=e[2*f],m=e[2*f+1];U(d,m,r,n)<=l&&s.push(t[f]);var y=(u+1)%2;(0===u?r-i<=d:n-i<=m)&&(a.push(p),a.push(f-1),a.push(y)),(0===u?d<=r+i:m<=n+i)&&(a.push(f+1),a.push(c),a.push(y))}}return s}(this.ids,this.coords,t,e,r,this.nodeSize)}),reduce:null,map:function(t){return t}};function H(t){return{type:"Feature",id:t.id,properties:X(t),geometry:{type:"Point",coordinates:[(n=t.x,360*(n-.5)),(e=t.y,r=(180-360*e)*Math.PI/180,360*Math.atan(Math.exp(r))/Math.PI-90)]}};var e,r,n}function X(t){var e=t.numPoints,r=1e4<=e?Math.round(e/1e3)+"k":1e3<=e?Math.round(e/100)/10+"k":e;return J(J({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:r})}function $(t){return t/360+.5}function K(t){var e=Math.sin(t*Math.PI/180),r=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return r<0?0:1<r?1:r}function J(t,e){for(var r in e)t[r]=e[r];return t}function Y(t){return t.x}function Q(t){return t.y}function tt(t,e,r,n,i,o){var a=i-r,s=o-n;if(0!==a||0!==s){var l=((t-r)*a+(e-n)*s)/(a*a+s*s);1<l?(r=i,n=o):0<l&&(r+=a*l,n+=s*l)}return(a=t-r)*a+(s=e-n)*s}function et(t,e,r,n){var i={id:void 0===t?null:t,type:e,geometry:r,tags:n,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,r=t.type;if("Point"===r||"MultiPoint"===r||"LineString"===r)rt(t,e);else if("Polygon"===r||"MultiLineString"===r)for(var n=0;n<e.length;n++)rt(t,e[n]);else if("MultiPolygon"===r)for(n=0;n<e.length;n++)for(var i=0;i<e[n].length;i++)rt(t,e[n][i])}(i),i}function rt(t,e){for(var r=0;r<e.length;r+=3)t.minX=Math.min(t.minX,e[r]),t.minY=Math.min(t.minY,e[r+1]),t.maxX=Math.max(t.maxX,e[r]),t.maxY=Math.max(t.maxY,e[r+1])}function nt(t,e,r,n){if(e.geometry){var i=e.geometry.coordinates,o=e.geometry.type,a=Math.pow(r.tolerance/((1<<r.maxZoom)*r.extent),2),s=[],l=e.id;if(r.promoteId?l=e.properties[r.promoteId]:r.generateId&&(l=n||0),"Point"===o)it(i,s);else if("MultiPoint"===o)for(var u=0;u<i.length;u++)it(i[u],s);else if("LineString"===o)ot(i,s,a,!1);else if("MultiLineString"===o){if(r.lineMetrics){for(u=0;u<i.length;u++)s=[],ot(i[u],s,a,!1),t.push(et(l,"LineString",s,e.properties));return}at(i,s,a,!1)}else if("Polygon"===o)at(i,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"!==o)throw new Error("Input data is not a valid GeoJSON object.");for(u=0;u<e.geometry.geometries.length;u++)nt(t,{id:l,geometry:e.geometry.geometries[u],properties:e.properties},r,n);return}for(u=0;u<i.length;u++){var c=[];at(i[u],c,a,!0),s.push(c)}}t.push(et(l,o,s,e.properties))}}function it(t,e){e.push(st(t[0])),e.push(lt(t[1])),e.push(0)}function ot(t,e,r,n){for(var i,o,a=0,s=0;s<t.length;s++){var l=st(t[s][0]),u=lt(t[s][1]);e.push(l),e.push(u),e.push(0),0<s&&(a+=n?(i*u-l*o)/2:Math.sqrt(Math.pow(l-i,2)+Math.pow(u-o,2))),i=l,o=u}var c=e.length-3;e[2]=1,function t(e,r,n,i){for(var o,a=i,s=n-r>>1,l=n-r,u=e[r],c=e[r+1],p=e[n],h=e[n+1],f=r+3;f<n;f+=3){var d=tt(e[f],e[f+1],u,c,p,h);if(a<d)o=f,a=d;else if(d===a){var m=Math.abs(f-s);m<l&&(o=f,l=m)}}i<a&&(3<o-r&&t(e,r,o,i),e[o+2]=a,3<n-o&&t(e,o,n,i))}(e,0,c,r),e[2+c]=1,e.size=Math.abs(a),e.start=0,e.end=e.size}function at(t,e,r,n){for(var i=0;i<t.length;i++){var o=[];ot(t[i],o,r,n),e.push(o)}}function st(t){return t/360+.5}function lt(t){var e=Math.sin(t*Math.PI/180),r=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return r<0?0:1<r?1:r}function ut(t,e,r,n,i,o,a,s){if(n/=e,o>=(r/=e)&&a<n)return t;if(a<r||n<=o)return null;for(var l=[],u=0;u<t.length;u++){var c=t[u],p=c.geometry,h=c.type,f=0===i?c.minX:c.minY,d=0===i?c.maxX:c.maxY;if(r<=f&&d<n)l.push(c);else if(!(d<r||n<=f)){var m=[];if("Point"===h||"MultiPoint"===h)ct(p,m,r,n,i);else if("LineString"===h)pt(p,m,r,n,i,!1,s.lineMetrics);else if("MultiLineString"===h)ft(p,m,r,n,i,!1);else if("Polygon"===h)ft(p,m,r,n,i,!0);else if("MultiPolygon"===h)for(var y=0;y<p.length;y++){var g=[];ft(p[y],g,r,n,i,!0),g.length&&m.push(g)}if(m.length){if(s.lineMetrics&&"LineString"===h){for(y=0;y<m.length;y++)l.push(et(c.id,h,m[y],c.tags));continue}"LineString"!==h&&"MultiLineString"!==h||(1===m.length?(h="LineString",m=m[0]):h="MultiLineString"),"Point"!==h&&"MultiPoint"!==h||(h=3===m.length?"Point":"MultiPoint"),l.push(et(c.id,h,m,c.tags))}}}return l.length?l:null}function ct(t,e,r,n,i){for(var o=0;o<t.length;o+=3){var a=t[o+i];r<=a&&a<=n&&(e.push(t[o]),e.push(t[o+1]),e.push(t[o+2]))}}function pt(t,e,r,n,i,o,a){for(var s,l,u=ht(t),c=0===i?mt:yt,p=t.start,h=0;h<t.length-3;h+=3){var f=t[h],d=t[h+1],m=t[h+2],y=t[h+3],g=t[h+4],v=0===i?f:d,_=0===i?y:g,b=!1;a&&(s=Math.sqrt(Math.pow(f-y,2)+Math.pow(d-g,2))),v<r?r<_&&(l=c(u,f,d,y,g,r),a&&(u.start=p+s*l)):n<v?_<n&&(l=c(u,f,d,y,g,n),a&&(u.start=p+s*l)):dt(u,f,d,m),_<r&&r<=v&&(l=c(u,f,d,y,g,r),b=!0),n<_&&v<=n&&(l=c(u,f,d,y,g,n),b=!0),!o&&b&&(a&&(u.end=p+s*l),e.push(u),u=ht(t)),a&&(p+=s)}var x=t.length-3;f=t[x],d=t[x+1],m=t[x+2],(v=0===i?f:d)>=r&&v<=n&&dt(u,f,d,m),x=u.length-3,o&&3<=x&&(u[x]!==u[0]||u[x+1]!==u[1])&&dt(u,u[0],u[1],u[2]),u.length&&e.push(u)}function ht(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function ft(t,e,r,n,i,o){for(var a=0;a<t.length;a++)pt(t[a],e,r,n,i,o,!1)}function dt(t,e,r,n){t.push(e),t.push(r),t.push(n)}function mt(t,e,r,n,i,o){var a=(o-e)/(n-e);return t.push(o),t.push(r+(i-r)*a),t.push(1),a}function yt(t,e,r,n,i,o){var a=(o-r)/(i-r);return t.push(e+(n-e)*a),t.push(o),t.push(1),a}function gt(t,e){for(var r=[],n=0;n<t.length;n++){var i,o=t[n],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)i=vt(o.geometry,e);else if("MultiLineString"===a||"Polygon"===a){i=[];for(var s=0;s<o.geometry.length;s++)i.push(vt(o.geometry[s],e))}else if("MultiPolygon"===a)for(i=[],s=0;s<o.geometry.length;s++){for(var l=[],u=0;u<o.geometry[s].length;u++)l.push(vt(o.geometry[s][u],e));i.push(l)}r.push(et(o.id,a,i,o.tags))}return r}function vt(t,e){var r=[];r.size=t.size,void 0!==t.start&&(r.start=t.start,r.end=t.end);for(var n=0;n<t.length;n+=3)r.push(t[n]+e,t[n+1],t[n+2]);return r}function _t(t,e){if(t.transformed)return t;var r,n,i,o=1<<t.z,a=t.x,s=t.y;for(r=0;r<t.features.length;r++){var l=t.features[r],u=l.geometry,c=l.type;if(l.geometry=[],1===c)for(n=0;n<u.length;n+=2)l.geometry.push(bt(u[n],u[n+1],e,o,a,s));else for(n=0;n<u.length;n++){var p=[];for(i=0;i<u[n].length;i+=2)p.push(bt(u[n][i],u[n][i+1],e,o,a,s));l.geometry.push(p)}}return t.transformed=!0,t}function bt(t,e,r,n,i,o){return[Math.round(r*(t*n-i)),Math.round(r*(e*n-o))]}function xt(t,e,r,n,i){for(var o=e===i.maxZoom?0:i.tolerance/((1<<e)*i.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:r,y:n,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<t.length;s++){a.numFeatures++,wt(a,t[s],o,i);var l=t[s].minX,u=t[s].minY,c=t[s].maxX,p=t[s].maxY;l<a.minX&&(a.minX=l),u<a.minY&&(a.minY=u),c>a.maxX&&(a.maxX=c),p>a.maxY&&(a.maxY=p)}return a}function wt(t,e,r,n){var i=e.geometry,o=e.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<i.length;s+=3)a.push(i[s]),a.push(i[s+1]),t.numPoints++,t.numSimplified++;else if("LineString"===o)Et(a,i,t,r,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<i.length;s++)Et(a,i[s],t,r,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var l=0;l<i.length;l++){var u=i[l];for(s=0;s<u.length;s++)Et(a,u[s],t,r,!0,0===s)}if(a.length){var c=e.tags||null;if("LineString"===o&&n.lineMetrics){for(var p in c={},e.tags)c[p]=e.tags[p];c.mapbox_clip_start=i.start/i.size,c.mapbox_clip_end=i.end/i.size}var h={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:c};null!==e.id&&(h.id=e.id),t.features.push(h)}}function Et(t,e,r,n,i,o){var a=n*n;if(0<n&&e.size<(i?a:n))r.numPoints+=e.length/3;else{for(var s=[],l=0;l<e.length;l+=3)(0===n||e[l+2]>a)&&(r.numSimplified++,s.push(e[l]),s.push(e[l+1])),r.numPoints++;i&&function(t,e){for(var r=0,n=0,i=t.length,o=i-2;n<i;o=n,n+=2)r+=(t[n]-t[o])*(t[n+1]+t[o+1]);if(0<r===e)for(n=0,i=t.length;n<i/2;n+=2){var a=t[n],s=t[n+1];t[n]=t[i-2-n],t[n+1]=t[i-1-n],t[i-2-n]=a,t[i-1-n]=s}}(s,o),t.push(s)}}function St(t,e){var r=(e=this.options=function(t,e){for(var r in e)t[r]=e[r];return t}(Object.create(this.options),e)).debug;if(r&&console.time("preprocess data"),e.maxZoom<0||24<e.maxZoom)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var n,i,o,a,s,l,u=function(t,e){var r=[];if("FeatureCollection"===t.type)for(var n=0;n<t.features.length;n++)nt(r,t.features[n],e,n);else"Feature"===t.type?nt(r,t,e):nt(r,{geometry:t},e);return r}(t,e);this.tiles={},this.tileCoords=[],r&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(n=u,o=(i=e).buffer/i.extent,s=ut(a=n,1,-1-o,o,0,-1,2,i),l=ut(n,1,1-o,2+o,0,-1,2,i),(s||l)&&(a=ut(n,1,-o,1+o,0,-1,2,i)||[],s&&(a=gt(s,1).concat(a)),l&&(a=a.concat(gt(l,-1)))),u=a).length&&this.splitTile(u,0,0,0),r&&(u.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function kt(t,e,r){return 32*((1<<t)*r+e)+t}function Ct(t,e){var r=t.tileID.canonical;if(!this._geoJSONIndex)return e(null,null);var n=this._geoJSONIndex.getTile(r.z,r.x,r.y);if(!n)return e(null,null);var i=new b(n.features),o=k(i);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),e(null,{vectorTile:i,rawData:o.buffer})}G.prototype.load=function(t){var e=this.options,r=e.log,n=e.minZoom,i=e.maxZoom,o=e.nodeSize;r&&console.time("total time");var a,s,l,u,c,p="prepare "+t.length+" points";r&&console.time(p),this.points=t;for(var h=[],f=0;f<t.length;f++)t[f].geometry&&h.push((a=t[f],s=f,void 0,l=a.geometry.coordinates,u=l[0],c=l[1],{x:$(u),y:K(c),zoom:1/0,index:s,parentId:-1}));this.trees[i+1]=new Z(h,Y,Q,o,Float32Array),r&&console.timeEnd(p);for(var d=i;n<=d;d--){var m=+Date.now();h=this._cluster(h,d),this.trees[d]=new Z(h,Y,Q,o,Float32Array),r&&console.log("z%d: %d clusters in %dms",d,h.length,Date.now()-m)}return r&&console.timeEnd("total time"),this},G.prototype.getClusters=function(t,e){var r=((t[0]+180)%360+360)%360-180,n=Math.max(-90,Math.min(90,t[1])),i=180===t[2]?180:((t[2]+180)%360+360)%360-180,o=Math.max(-90,Math.min(90,t[3]));if(360<=t[2]-t[0])r=-180,i=180;else if(i<r){var a=this.getClusters([r,n,180,o],e),s=this.getClusters([-180,n,i,o],e);return a.concat(s)}for(var l=this.trees[this._limitZoom(e)],u=[],c=0,p=l.range($(r),K(o),$(i),K(n));c<p.length;c+=1){var h=p[c],f=l.points[h];u.push(f.numPoints?H(f):this.points[f.index])}return u},G.prototype.getChildren=function(t){var e=t>>5,r=t%32,n="No cluster with the specified id.",i=this.trees[r];if(!i)throw new Error(n);var o=i.points[e];if(!o)throw new Error(n);for(var a=this.options.radius/(this.options.extent*Math.pow(2,r-1)),s=[],l=0,u=i.within(o.x,o.y,a);l<u.length;l+=1){var c=u[l],p=i.points[c];p.parentId===t&&s.push(p.numPoints?H(p):this.points[p.index])}if(0===s.length)throw new Error(n);return s},G.prototype.getLeaves=function(t,e,r){e=e||10,r=r||0;var n=[];return this._appendLeaves(n,t,e,r,0),n},G.prototype.getTile=function(t,e,r){var n=this.trees[this._limitZoom(t)],i=Math.pow(2,t),o=this.options,a=o.extent,s=o.radius/a,l=(r-s)/i,u=(r+1+s)/i,c={features:[]};return this._addTileFeatures(n.range((e-s)/i,l,(e+1+s)/i,u),n.points,e,r,i,c),0===e&&this._addTileFeatures(n.range(1-s/i,l,1,u),n.points,i,r,i,c),e===i-1&&this._addTileFeatures(n.range(0,l,s/i,u),n.points,-1,r,i,c),c.features.length?c:null},G.prototype.getClusterExpansionZoom=function(t){for(var e=t%32-1;e<=this.options.maxZoom;){var r=this.getChildren(t);if(e++,1!==r.length)break;t=r[0].properties.cluster_id}return e},G.prototype._appendLeaves=function(t,e,r,n,i){for(var o=0,a=this.getChildren(e);o<a.length;o+=1){var s=a[o],l=s.properties;if(l&&l.cluster?i+l.point_count<=n?i+=l.point_count:i=this._appendLeaves(t,l.cluster_id,r,n,i):i<n?i++:t.push(s),t.length===r)break}return i},G.prototype._addTileFeatures=function(t,e,r,n,i,o){for(var a=0,s=t;a<s.length;a+=1){var l=e[s[a]],u={type:1,geometry:[[Math.round(this.options.extent*(l.x*i-r)),Math.round(this.options.extent*(l.y*i-n))]],tags:l.numPoints?X(l):this.points[l.index].properties},c=l.numPoints?l.id:this.points[l.index].id;void 0!==c&&(u.id=c),o.features.push(u)}},G.prototype._limitZoom=function(t){return Math.max(this.options.minZoom,Math.min(t,this.options.maxZoom+1))},G.prototype._cluster=function(t,e){for(var r=[],n=this.options,i=n.radius,o=n.extent,a=n.reduce,s=i/(o*Math.pow(2,e)),l=0;l<t.length;l++){var u=t[l];if(!(u.zoom<=e)){u.zoom=e;for(var c=this.trees[e+1],p=c.within(u.x,u.y,s),h=u.numPoints||1,f=u.x*h,d=u.y*h,m=a?this._map(u,!0):null,y=(l<<5)+(e+1),g=0,v=p;g<v.length;g+=1){var _=v[g],b=c.points[_];if(!(b.zoom<=e)){b.zoom=e;var x=b.numPoints||1;f+=b.x*x,d+=b.y*x,h+=x,b.parentId=y,a&&a(m,this._map(b))}}1===h?r.push(u):(u.parentId=y,r.push({x:f/h,y:d/h,zoom:1/0,id:y,parentId:-1,numPoints:h,properties:m}))}}return r},St.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!(G.prototype._map=function(t,e){if(t.numPoints)return e?J({},t.properties):t.properties;var r=this.points[t.index].properties,n=this.options.map(r);return e&&n===r?J({},n):n}),promoteId:null,generateId:!1,debug:0},St.prototype.splitTile=function(t,e,r,n,i,o,a){for(var s=[t,e,r,n],l=this.options,u=l.debug;s.length;){n=s.pop(),r=s.pop(),e=s.pop(),t=s.pop();var c=1<<e,p=kt(e,r,n),h=this.tiles[p];if(!h&&(1<u&&console.time("creation"),h=this.tiles[p]=xt(t,e,r,n,l),this.tileCoords.push({z:e,x:r,y:n}),u)){1<u&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,r,n,h.numFeatures,h.numPoints,h.numSimplified),console.timeEnd("creation"));var f="z"+e;this.stats[f]=(this.stats[f]||0)+1,this.total++}if(h.source=t,i){if(e===l.maxZoom||e===i)continue;var d=1<<i-e;if(r!==Math.floor(o/d)||n!==Math.floor(a/d))continue}else if(e===l.indexMaxZoom||h.numPoints<=l.indexMaxPoints)continue;if(h.source=null,0!==t.length){1<u&&console.time("clipping");var m,y,g,v,_,b,x=.5*l.buffer/l.extent,w=.5-x,E=.5+x,S=1+x;m=y=g=v=null,_=ut(t,c,r-x,r+E,0,h.minX,h.maxX,l),b=ut(t,c,r+w,r+S,0,h.minX,h.maxX,l),t=null,_&&(m=ut(_,c,n-x,n+E,1,h.minY,h.maxY,l),y=ut(_,c,n+w,n+S,1,h.minY,h.maxY,l),_=null),b&&(g=ut(b,c,n-x,n+E,1,h.minY,h.maxY,l),v=ut(b,c,n+w,n+S,1,h.minY,h.maxY,l),b=null),1<u&&console.timeEnd("clipping"),s.push(m||[],e+1,2*r,2*n),s.push(y||[],e+1,2*r,2*n+1),s.push(g||[],e+1,2*r+1,2*n),s.push(v||[],e+1,2*r+1,2*n+1)}}},St.prototype.getTile=function(t,e,r){var n=this.options,i=n.extent,o=n.debug;if(t<0||24<t)return null;var a=1<<t,s=kt(t,e=(e%a+a)%a,r);if(this.tiles[s])return _t(this.tiles[s],i);1<o&&console.log("drilling down to z%d-%d-%d",t,e,r);for(var l,u=t,c=e,p=r;!l&&0<u;)u--,c=Math.floor(c/2),p=Math.floor(p/2),l=this.tiles[kt(u,c,p)];return l&&l.source?(1<o&&console.log("found parent tile z%d-%d-%d",u,c,p),1<o&&console.time("drilling down"),this.splitTile(l.source,u,c,p,t,e,r),1<o&&console.timeEnd("drilling down"),this.tiles[s]?_t(this.tiles[s],i):null):null};var Tt,At=((Tt=o)&&(Pt.__proto__=Tt),((Pt.prototype=Object.create(Tt&&Tt.prototype)).constructor=Pt).prototype.loadData=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=e,this._pendingLoadDataParams=t,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},Pt.prototype._loadData=function(){var i=this;if(this._pendingCallback&&this._pendingLoadDataParams){var o=this._pendingCallback,a=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var s=!!(a&&a.request&&a.request.collectResourceTiming)&&new p.Performance(a.request);this.loadGeoJSON(a,function(t,e){if(t||!e)return o(t);if("object"!=typeof e)return o(new Error("Input data is not a valid GeoJSON object."));!function t(e,r){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.map(d(t,r)),e;case"GeometryCollection":return e.geometries=e.geometries.map(d(t,r)),e;case"Feature":return e.geometry=t(e.geometry,r),e;case"Polygon":case"MultiPolygon":return i=r,"Polygon"===(n=e).type?n.coordinates=m(n.coordinates,i):"MultiPolygon"===n.type&&(n.coordinates=n.coordinates.map(d(m,i))),n;default:return e}var n,i}(e,!0);try{i._geoJSONIndex=a.cluster?new G(function(t){var e=t.superclusterOptions,r=t.clusterProperties;if(!r||!e)return e;for(var o={},a={},s={accumulated:null,zoom:0},l={properties:null},u=Object.keys(r),n=0,i=u;n<i.length;n+=1){var c=i[n],p=r[c],h=p[0],f=p[1],d=A.createExpression(f),m=A.createExpression("string"==typeof h?[h,["accumulated"],["get",c]]:h);o[c]=d.value,a[c]=m.value}return e.map=function(t){l.properties=t;for(var e={},r=0,n=u;r<n.length;r+=1){var i=n[r];e[i]=o[i].evaluate(s,l)}return e},e.reduce=function(t,e){l.properties=e;for(var r=0,n=u;r<n.length;r+=1){var i=n[r];s.accumulated=t[i],t[i]=a[i].evaluate(s,l)}},e}(a)).load(e.features):new St(e,a.geojsonVtOptions)}catch(t){return o(t)}i.loaded={};var r={};if(s){var n=s.finish();n&&(r.resourceTiming={},r.resourceTiming[a.source]=JSON.parse(JSON.stringify(n)))}o(null,r)})}},Pt.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},Pt.prototype.reloadTile=function(t,e){var r=this.loaded,n=t.uid;return r&&r[n]?Tt.prototype.reloadTile.call(this,t,e):this.loadTile(t,e)},Pt.prototype.loadGeoJSON=function(t,e){if(t.request)A.getJSON(t.request,e);else{if("string"!=typeof t.data)return e(new Error("Input data is not a valid GeoJSON object."));try{return e(null,JSON.parse(t.data))}catch(t){return e(new Error("Input data is not a valid GeoJSON object."))}}},Pt.prototype.removeSource=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),e()},Pt.prototype.getClusterExpansionZoom=function(t,e){e(null,this._geoJSONIndex.getClusterExpansionZoom(t.clusterId))},Pt.prototype.getClusterChildren=function(t,e){e(null,this._geoJSONIndex.getChildren(t.clusterId))},Pt.prototype.getClusterLeaves=function(t,e){e(null,this._geoJSONIndex.getLeaves(t.clusterId,t.limit,t.offset))},Pt);function Pt(t,e,r){Tt.call(this,t,e,Ct),r&&(this.loadGeoJSON=r)}function It(t){var r=this;this.self=t,this.actor=new A.Actor(t,this),this.layerIndexes={},this.workerSourceTypes={vector:o,geojson:At},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(t,e){if(r.workerSourceTypes[t])throw new Error('Worker source with name "'+t+'" already registered.');r.workerSourceTypes[t]=e},this.self.registerRTLTextPlugin=function(t){if(A.plugin.isLoaded())throw new Error("RTL text plugin already registered.");A.plugin.applyArabicShaping=t.applyArabicShaping,A.plugin.processBidirectionalText=t.processBidirectionalText,A.plugin.processStyledBidirectionalText=t.processStyledBidirectionalText}}return It.prototype.setReferrer=function(t,e){this.referrer=e},It.prototype.setLayers=function(t,e,r){this.getLayerIndex(t).replace(e),r()},It.prototype.updateLayers=function(t,e,r){this.getLayerIndex(t).update(e.layers,e.removedIds),r()},It.prototype.loadTile=function(t,e,r){this.getWorkerSource(t,e.type,e.source).loadTile(e,r)},It.prototype.loadDEMTile=function(t,e,r){this.getDEMWorkerSource(t,e.source).loadTile(e,r)},It.prototype.reloadTile=function(t,e,r){this.getWorkerSource(t,e.type,e.source).reloadTile(e,r)},It.prototype.abortTile=function(t,e,r){this.getWorkerSource(t,e.type,e.source).abortTile(e,r)},It.prototype.removeTile=function(t,e,r){this.getWorkerSource(t,e.type,e.source).removeTile(e,r)},It.prototype.removeDEMTile=function(t,e){this.getDEMWorkerSource(t,e.source).removeTile(e)},It.prototype.removeSource=function(t,e,r){if(this.workerSources[t]&&this.workerSources[t][e.type]&&this.workerSources[t][e.type][e.source]){var n=this.workerSources[t][e.type][e.source];delete this.workerSources[t][e.type][e.source],void 0!==n.removeSource?n.removeSource(e,r):r()}},It.prototype.loadWorkerSource=function(t,e,r){try{this.self.importScripts(e.url),r()}catch(t){r(t.toString())}},It.prototype.loadRTLTextPlugin=function(t,e,r){try{A.plugin.isLoaded()||(this.self.importScripts(e),r(A.plugin.isLoaded()?null:new Error("RTL Text Plugin failed to import scripts from "+e)))}catch(t){r(t.toString())}},It.prototype.getLayerIndex=function(t){var e=this.layerIndexes[t];return e=e||(this.layerIndexes[t]=new r)},It.prototype.getWorkerSource=function(n,t,e){var i=this;if(this.workerSources[n]||(this.workerSources[n]={}),this.workerSources[n][t]||(this.workerSources[n][t]={}),!this.workerSources[n][t][e]){var r={send:function(t,e,r){i.actor.send(t,e,r,n)}};this.workerSources[n][t][e]=new this.workerSourceTypes[t](r,this.getLayerIndex(n))}return this.workerSources[n][t][e]},It.prototype.getDEMWorkerSource=function(t,e){return this.demWorkerSources[t]||(this.demWorkerSources[t]={}),this.demWorkerSources[t][e]||(this.demWorkerSources[t][e]=new a),this.demWorkerSources[t][e]},"undefined"!=typeof WorkerGlobalScope&&void 0!==A.window&&A.window instanceof WorkerGlobalScope&&(A.window.worker=new It(A.window)),It}),t(["./shared.js"],function(mt){"use strict";var r=mt.createCommonjsModule(function(t){function o(t){return!!("undefined"!=typeof window&&"undefined"!=typeof document&&Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray&&Function.prototype&&Function.prototype.bind&&Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions&&"JSON"in window&&"parse"in JSON&&"stringify"in JSON&&function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return 0;var t,e,r=new Blob([""],{type:"text/javascript"}),n=URL.createObjectURL(r);try{e=new Worker(n),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(n),t}()&&"Uint8ClampedArray"in window&&ArrayBuffer.isView&&(e=t&&t.failIfMajorPerformanceCaveat,void 0===a[e]&&(a[e]=(r=e,n=document.createElement("canvas"),(i=Object.create(o.webGLContextAttributes)).failIfMajorPerformanceCaveat=r,n.probablySupportsContext?n.probablySupportsContext("webgl",i)||n.probablySupportsContext("experimental-webgl",i):n.supportsContext?n.supportsContext("webgl",i)||n.supportsContext("experimental-webgl",i):n.getContext("webgl",i)||n.getContext("experimental-webgl",i))),a[e]));var e,r,n,i}t.exports?t.exports=o:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=o);var a={};o.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),v={create:function(t,e,r){var n=mt.window.document.createElement(t);return e&&(n.className=e),r&&r.appendChild(n),n},createNS:function(t,e){return mt.window.document.createElementNS(t,e)}},n=mt.window.document?mt.window.document.documentElement.style:null;function t(t){if(!n)return null;for(var e=0;e<t.length;e++)if(t[e]in n)return t[e];return t[0]}var e,i=t(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);v.disableDrag=function(){n&&i&&(e=n[i],n[i]="none")},v.enableDrag=function(){n&&i&&(n[i]=e)};var o=t(["transform","WebkitTransform"]),a=!(v.setTransform=function(t,e){t.style[o]=e});try{var s=Object.defineProperty({},"passive",{get:function(){a=!0}});mt.window.addEventListener("test",s,s),mt.window.removeEventListener("test",s,s)}catch(mt){a=!1}v.addEventListener=function(t,e,r,n){void 0===n&&(n={}),"passive"in n&&a?t.addEventListener(e,r,n):t.addEventListener(e,r,n.capture)},v.removeEventListener=function(t,e,r,n){void 0===n&&(n={}),"passive"in n&&a?t.removeEventListener(e,r,n):t.removeEventListener(e,r,n.capture)};var l=function(t){t.preventDefault(),t.stopPropagation(),mt.window.removeEventListener("click",l,!0)};v.suppressClick=function(){mt.window.addEventListener("click",l,!0),mt.window.setTimeout(function(){mt.window.removeEventListener("click",l,!0)},0)},v.mousePos=function(t,e){var r=t.getBoundingClientRect();return e=e.touches?e.touches[0]:e,new mt.Point(e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop)},v.touchPos=function(t,e){for(var r=t.getBoundingClientRect(),n=[],i="touchend"===e.type?e.changedTouches:e.touches,o=0;o<i.length;o++)n.push(new mt.Point(i[o].clientX-r.left-t.clientLeft,i[o].clientY-r.top-t.clientTop));return n},v.mouseButton=function(t){return void 0!==mt.window.InstallTrigger&&2===t.button&&t.ctrlKey&&0<=mt.window.navigator.platform.toUpperCase().indexOf("MAC")?0:t.button},v.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)};var u,c=((u=mt.Evented)&&(p.__proto__=u),((p.prototype=Object.create(u&&u.prototype)).constructor=p).prototype.isLoaded=function(){return this.loaded},p.prototype.setLoaded=function(t){if(this.loaded!==t&&(this.loaded=t)){for(var e=0,r=this.requestors;e<r.length;e+=1){var n=r[e],i=n.ids,o=n.callback;this._notify(i,o)}this.requestors=[]}},p.prototype.getImage=function(t){return this.images[t]},p.prototype.addImage=function(t,e){this.images[t]=e},p.prototype.updateImage=function(t,e){var r=this.images[t];e.version=r.version+1,this.images[t]=e,this.updatedImages[t]=!0},p.prototype.removeImage=function(t){var e=this.images[t];delete this.images[t],delete this.patterns[t],e.userImage&&e.userImage.onRemove&&e.userImage.onRemove()},p.prototype.listImages=function(){return Object.keys(this.images)},p.prototype.getImages=function(t,e){var r=!0;if(!this.isLoaded())for(var n=0,i=t;n<i.length;n+=1){var o=i[n];this.images[o]||(r=!1)}this.isLoaded()||r?this._notify(t,e):this.requestors.push({ids:t,callback:e})},p.prototype._notify=function(t,e){for(var r={},n=0,i=t;n<i.length;n+=1){var o=i[n];this.images[o]||this.fire(new mt.Event("styleimagemissing",{id:o}));var a=this.images[o];a?r[o]={data:a.data.clone(),pixelRatio:a.pixelRatio,sdf:a.sdf,version:a.version,hasRenderCallback:Boolean(a.userImage&&a.userImage.render)}:mt.warnOnce('Image "'+o+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}e(null,r)},p.prototype.getPixelSize=function(){var t=this.atlasImage;return{width:t.width,height:t.height}},p.prototype.getPattern=function(t){var e=this.patterns[t],r=this.getImage(t);if(!r)return null;if(e&&e.position.version===r.version)return e.position;if(e)e.position.version=r.version;else{var n={w:r.data.width+2,h:r.data.height+2,x:0,y:0},i=new mt.ImagePosition(n,r);this.patterns[t]={bin:n,position:i}}return this._updatePatternAtlas(),this.patterns[t].position},p.prototype.bind=function(t){var e=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new mt.Texture(t,this.atlasImage,e.RGBA),this.atlasTexture.bind(e.LINEAR,e.CLAMP_TO_EDGE)},p.prototype._updatePatternAtlas=function(){var t=[];for(var e in this.patterns)t.push(this.patterns[e].bin);var r=mt.potpack(t),n=r.w,i=r.h,o=this.atlasImage;for(var a in o.resize({width:n||1,height:i||1}),this.patterns){var s=this.patterns[a].bin,l=s.x+1,u=s.y+1,c=this.images[a].data,p=c.width,h=c.height;mt.RGBAImage.copy(c,o,{x:0,y:0},{x:l,y:u},{width:p,height:h}),mt.RGBAImage.copy(c,o,{x:0,y:h-1},{x:l,y:u-1},{width:p,height:1}),mt.RGBAImage.copy(c,o,{x:0,y:0},{x:l,y:u+h},{width:p,height:1}),mt.RGBAImage.copy(c,o,{x:p-1,y:0},{x:l-1,y:u},{width:1,height:h}),mt.RGBAImage.copy(c,o,{x:0,y:0},{x:l+p,y:u},{width:1,height:h})}this.dirty=!0},p.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},p.prototype.dispatchRenderCallbacks=function(t){for(var e=0,r=t;e<r.length;e+=1){var n=r[e];if(!this.callbackDispatchedThisFrame[n]){this.callbackDispatchedThisFrame[n]=!0;var i=this.images[n];a=void 0,(a=(o=i).userImage)&&a.render&&a.render()&&(o.data.replace(new Uint8Array(a.data.buffer)),1)&&this.updateImage(n,i)}}var o,a},p);function p(){u.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new mt.RGBAImage({width:1,height:1}),this.dirty=!0}var h=d,f=1e20;function d(t,e,r,n,i,o){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=n||.25,this.fontFamily=i||"sans-serif",this.fontWeight=o||"normal",this.radius=r||8;var a=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.d=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Int16Array(a),this.middle=Math.round(a/2*(0<=navigator.userAgent.indexOf("Gecko/")?1.2:1))}function m(t,e,r,n,i,o,a){for(var s=0;s<e;s++){for(var l=0;l<r;l++)n[l]=t[l*e+s];for(y(n,i,o,a,r),l=0;l<r;l++)t[l*e+s]=i[l]}for(l=0;l<r;l++){for(s=0;s<e;s++)n[s]=t[l*e+s];for(y(n,i,o,a,e),s=0;s<e;s++)t[l*e+s]=Math.sqrt(i[s])}}function y(t,e,r,n,i){n[r[0]=0]=-f,n[1]=+f;for(var o=1,a=0;o<i;o++){for(var s=(t[o]+o*o-(t[r[a]]+r[a]*r[a]))/(2*o-2*r[a]);s<=n[a];)a--,s=(t[o]+o*o-(t[r[a]]+r[a]*r[a]))/(2*o-2*r[a]);r[++a]=o,n[a]=s,n[a+1]=+f}for(a=o=0;o<i;o++){for(;n[a+1]<o;)a++;e[o]=(o-r[a])*(o-r[a])+t[r[a]]}}d.prototype.draw=function(t){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(t,this.buffer,this.middle);for(var e=this.ctx.getImageData(0,0,this.size,this.size),r=new Uint8ClampedArray(this.size*this.size),n=0;n<this.size*this.size;n++){var i=e.data[4*n+3]/255;this.gridOuter[n]=1==i?0:0==i?f:Math.pow(Math.max(0,.5-i),2),this.gridInner[n]=1==i?f:0==i?0:Math.pow(Math.max(0,i-.5),2)}for(m(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),m(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),n=0;n<this.size*this.size;n++){var o=this.gridOuter[n]-this.gridInner[n];r[n]=Math.max(0,Math.min(255,Math.round(255-255*(o/this.radius+this.cutoff))))}return r};function g(t,e){this.requestTransform=t,this.localIdeographFontFamily=e,this.entries={}}g.prototype.setURL=function(t){this.url=t},g.prototype.getGlyphs=function(t,u){var l=this,e=[];for(var r in t)for(var n=0,i=t[r];n<i.length;n+=1){var o=i[n];e.push({stack:r,id:o})}mt.asyncAll(e,function(t,r){var n=t.stack,i=t.id,o=l.entries[n],e=(o=o||(l.entries[n]={glyphs:{},requests:{}})).glyphs[i];if(void 0===e)if(e=l._tinySDF(o,n,i))r(null,{stack:n,id:i,glyph:e});else{var a=Math.floor(i/256);if(65535<256*a)r(new Error("glyphs > 65535 not supported"));else{var s=o.requests[a];s||(s=o.requests[a]=[],g.loadGlyphRange(n,a,l.url,l.requestTransform,function(t,e){if(e)for(var r in e)o.glyphs[+r]=e[+r];for(var n=0,i=s;n<i.length;n+=1)(0,i[n])(t,e);delete o.requests[a]})),s.push(function(t,e){t?r(t):e&&r(null,{stack:n,id:i,glyph:e[i]||null})})}}else r(null,{stack:n,id:i,glyph:e})},function(t,e){if(t)u(t);else if(e){for(var r={},n=0,i=e;n<i.length;n+=1){var o=i[n],a=o.stack,s=o.id,l=o.glyph;(r[a]||(r[a]={}))[s]=l&&{id:l.id,bitmap:l.bitmap.clone(),metrics:l.metrics}}u(null,r)}})},g.prototype._tinySDF=function(t,e,r){var n=this.localIdeographFontFamily;if(n&&(mt.isChar["CJK Unified Ideographs"](r)||mt.isChar["Hangul Syllables"](r))){var i=t.tinySDF;if(!i){var o="400";/bold/i.test(e)?o="900":/medium/i.test(e)?o="500":/light/i.test(e)&&(o="200"),i=t.tinySDF=new g.TinySDF(24,3,8,.25,n,o)}return{id:r,bitmap:new mt.AlphaImage({width:30,height:30},i.draw(String.fromCharCode(r))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},g.loadGlyphRange=function(t,e,r,n,a){var i=256*e,o=255+i,s=n(mt.normalizeGlyphsURL(r).replace("{fontstack}",t).replace("{range}",i+"-"+o),mt.ResourceType.Glyphs);mt.getArrayBuffer(s,function(t,e){if(t)a(t);else if(e){for(var r={},n=0,i=mt.parseGlyphPBF(e);n<i.length;n+=1){var o=i[n];r[o.id]=o}a(null,r)}})},g.TinySDF=h;function _(){this.specification=mt.styleSpec.light.position}_.prototype.possiblyEvaluate=function(t,e){return mt.sphericalToCartesian(t.expression.evaluate(e))},_.prototype.interpolate=function(t,e,r){return{x:mt.number(t.x,e.x,r),y:mt.number(t.y,e.y,r),z:mt.number(t.z,e.z,r)}};function b(t,e){this.width=t,this.height=e,this.nextRow=0,this.bytes=4,this.data=new Uint8Array(this.width*this.height*this.bytes),this.positions={}}var x,w=new mt.Properties({anchor:new mt.DataConstantProperty(mt.styleSpec.light.anchor),position:new _,color:new mt.DataConstantProperty(mt.styleSpec.light.color),intensity:new mt.DataConstantProperty(mt.styleSpec.light.intensity)}),E=((x=mt.Evented)&&(S.__proto__=x),((S.prototype=Object.create(x&&x.prototype)).constructor=S).prototype.getLight=function(){return this._transitionable.serialize()},S.prototype.setLight=function(t,e){if(void 0===e&&(e={}),!this._validate(mt.validateLight,t,e))for(var r in t){var n=t[r];mt.endsWith(r,"-transition")?this._transitionable.setTransition(r.slice(0,-"-transition".length),n):this._transitionable.setValue(r,n)}},S.prototype.updateTransitions=function(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)},S.prototype.hasTransition=function(){return this._transitioning.hasTransition()},S.prototype.recalculate=function(t){this.properties=this._transitioning.possiblyEvaluate(t)},S.prototype._validate=function(t,e,r){return(!r||!1!==r.validate)&&mt.emitValidationErrors(this,t.call(mt.validateStyle,mt.extend({value:e,style:{glyphs:!0,sprite:!0},styleSpec:mt.styleSpec})))},S);function S(t){x.call(this),this._transitionable=new mt.Transitionable(w),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}b.prototype.getDash=function(t,e){var r=t.join(",")+String(e);return this.positions[r]||(this.positions[r]=this.addDash(t,e)),this.positions[r]},b.prototype.addDash=function(t,e){var r=e?7:0,n=2*r+1;if(this.nextRow+n>this.height)return mt.warnOnce("LineAtlas out of space"),null;for(var i=0,o=0;o<t.length;o++)i+=t[o];for(var a=this.width/i,s=a/2,l=t.length%2==1,u=-r;u<=r;u++)for(var c=this.nextRow+r+u,p=this.width*c,h=l?-t[t.length-1]:0,f=t[0],d=1,m=0;m<this.width;m++){for(;f<m/a;)h=f,f+=t[d],l&&d===t.length-1&&(f+=t[0]),d++;var y=Math.abs(m-h*a),g=Math.abs(m-f*a),v=Math.min(y,g),_=d%2==1,b=void 0;if(e){var x=r?u/r*(1+s):0;if(_){var w=s-Math.abs(x);b=Math.sqrt(v*v+w*w)}else b=s-Math.sqrt(v*v+x*x)}else b=(_?1:-1)*v;this.data[3+4*(p+m)]=Math.max(0,Math.min(255,b+128))}var E={y:(this.nextRow+r+.5)/this.height,height:2*r/this.height,width:i};return this.nextRow+=n,this.dirty=!0,E},b.prototype.bind=function(t){var e=t.gl;this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.RGBA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.width,this.height,0,e.RGBA,e.UNSIGNED_BYTE,this.data))};function k(t,e){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=mt.uniqueId();for(var r=this.workerPool.acquire(this.id),n=0;n<r.length;n++){var i=r[n],o=new k.Actor(i,e,this.id);o.name="Worker "+n,this.actors.push(o)}}function C(n,t,i){function e(t,e){if(t)return i(t);if(e){var r=mt.pick(e,["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds"]);e.vector_layers&&(r.vectorLayers=e.vector_layers,r.vectorLayerIds=r.vectorLayers.map(function(t){return t.id})),n.url&&(r.tiles=mt.canonicalizeTileset(r,n.url)),i(null,r)}}return n.url?mt.getJSON(t(mt.normalizeSourceURL(n.url),mt.ResourceType.Source),e):mt.browser.frame(function(){return e(null,n)})}k.prototype.broadcast=function(r,n,t){t=t||function(){},mt.asyncAll(this.actors,function(t,e){t.send(r,n,e)},t)},k.prototype.send=function(t,e,r,n){return"number"==typeof n&&!isNaN(n)||(n=this.currentActor=(this.currentActor+1)%this.actors.length),this.actors[n].send(t,e,r),n},k.prototype.remove=function(){this.actors.forEach(function(t){t.remove()}),this.actors=[],this.workerPool.release(this.id)},k.Actor=mt.Actor;function T(t,e,r){this.bounds=mt.LngLatBounds.convert(this.validateBounds(t)),this.minzoom=e||0,this.maxzoom=r||24}T.prototype.validateBounds=function(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]},T.prototype.contains=function(t){var e=Math.pow(2,t.z),r=Math.floor(mt.mercatorXfromLng(this.bounds.getWest())*e),n=Math.floor(mt.mercatorYfromLat(this.bounds.getNorth())*e),i=Math.ceil(mt.mercatorXfromLng(this.bounds.getEast())*e),o=Math.ceil(mt.mercatorYfromLat(this.bounds.getSouth())*e);return t.x>=r&&t.x<i&&t.y>=n&&t.y<o};var A,P,I,M,z,L=((z=mt.Evented)&&(V.__proto__=z),((V.prototype=Object.create(z&&z.prototype)).constructor=V).prototype.load=function(){var r=this;this.fire(new mt.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=C(this._options,this.map._transformRequest,function(t,e){r._tileJSONRequest=null,t?r.fire(new mt.ErrorEvent(t)):e&&(mt.extend(r,e),e.bounds&&(r.tileBounds=new T(e.bounds,r.minzoom,r.maxzoom)),mt.postTurnstileEvent(e.tiles),mt.postMapLoadEvent(e.tiles,r.map._getMapId()),r.fire(new mt.Event("data",{dataType:"source",sourceDataType:"metadata"})),r.fire(new mt.Event("data",{dataType:"source",sourceDataType:"content"})))})},V.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},V.prototype.onAdd=function(t){this.map=t,this.load()},V.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},V.prototype.serialize=function(){return mt.extend({},this._options)},V.prototype.loadTile=function(r,n){var t=mt.normalizeTileURL(r.tileID.canonical.url(this.tiles,this.scheme),this.url),e={request:this.map._transformRequest(t,mt.ResourceType.Tile),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:mt.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes};function i(t,e){return r.aborted?n(null):t&&404!==t.status?n(t):(e&&e.resourceTiming&&(r.resourceTiming=e.resourceTiming),this.map._refreshExpiredTiles&&e&&r.setExpiryData(e),r.loadVectorData(e,this.map.painter),n(null),void(r.reloadCallback&&(this.loadTile(r,r.reloadCallback),r.reloadCallback=null)))}e.request.collectResourceTiming=this._collectResourceTiming,void 0===r.workerID||"expired"===r.state?r.workerID=this.dispatcher.send("loadTile",e,i.bind(this)):"loading"===r.state?r.reloadCallback=n:this.dispatcher.send("reloadTile",e,i.bind(this),r.workerID)},V.prototype.abortTile=function(t){this.dispatcher.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0,t.workerID)},V.prototype.unloadTile=function(t){t.unloadVectorData(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0,t.workerID)},V.prototype.hasTransition=function(){return!1},V),O=((M=mt.Evented)&&(U.__proto__=M),((U.prototype=Object.create(M&&M.prototype)).constructor=U).prototype.load=function(){var r=this;this.fire(new mt.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=C(this._options,this.map._transformRequest,function(t,e){r._tileJSONRequest=null,t?r.fire(new mt.ErrorEvent(t)):e&&(mt.extend(r,e),e.bounds&&(r.tileBounds=new T(e.bounds,r.minzoom,r.maxzoom)),mt.postTurnstileEvent(e.tiles),mt.postMapLoadEvent(e.tiles,r.map._getMapId()),r.fire(new mt.Event("data",{dataType:"source",sourceDataType:"metadata"})),r.fire(new mt.Event("data",{dataType:"source",sourceDataType:"content"})))})},U.prototype.onAdd=function(t){this.map=t,this.load()},U.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},U.prototype.serialize=function(){return mt.extend({},this._options)},U.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},U.prototype.loadTile=function(i,o){var a=this,t=mt.normalizeTileURL(i.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);i.request=mt.getImage(this.map._transformRequest(t,mt.ResourceType.Tile),function(t,e){if(delete i.request,i.aborted)i.state="unloaded",o(null);else if(t)i.state="errored",o(t);else if(e){a.map._refreshExpiredTiles&&i.setExpiryData(e),delete e.cacheControl,delete e.expires;var r=a.map.painter.context,n=r.gl;i.texture=a.map.painter.getTileTexture(e.width),i.texture?i.texture.update(e,{useMipmap:!0}):(i.texture=new mt.Texture(r,e,n.RGBA,{useMipmap:!0}),i.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE,n.LINEAR_MIPMAP_NEAREST),r.extTextureFilterAnisotropic&&n.texParameterf(n.TEXTURE_2D,r.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,r.extTextureFilterAnisotropicMax)),i.state="loaded",o(null)}})},U.prototype.abortTile=function(t,e){t.request&&(t.request.cancel(),delete t.request),e()},U.prototype.unloadTile=function(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()},U.prototype.hasTransition=function(){return!1},U),D=((I=O)&&(N.__proto__=I),((N.prototype=Object.create(I&&I.prototype)).constructor=N).prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},N.prototype.loadTile=function(i,o){var t=mt.normalizeTileURL(i.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);i.request=mt.getImage(this.map._transformRequest(t,mt.ResourceType.Tile),function(t,e){if(delete i.request,i.aborted)i.state="unloaded",o(null);else if(t)i.state="errored",o(t);else if(e){this.map._refreshExpiredTiles&&i.setExpiryData(e),delete e.cacheControl,delete e.expires;var r=mt.browser.getImageData(e),n={uid:i.uid,coord:i.tileID,source:this.id,rawImageData:r,encoding:this.encoding};i.workerID&&"expired"!==i.state||(i.workerID=this.dispatcher.send("loadDEMTile",n,function(t,e){t&&(i.state="errored",o(t)),e&&(i.dem=e,i.needsHillshadePrepare=!0,i.state="loaded",o(null))}.bind(this)))}}.bind(this)),i.neighboringTiles=this._getNeighboringTiles(i.tileID)},N.prototype._getNeighboringTiles=function(t){var e=t.canonical,r=Math.pow(2,e.z),n=(e.x-1+r)%r,i=0===e.x?t.wrap-1:t.wrap,o=(e.x+1+r)%r,a=e.x+1===r?t.wrap+1:t.wrap,s={};return s[new mt.OverscaledTileID(t.overscaledZ,i,e.z,n,e.y).key]={backfilled:!1},s[new mt.OverscaledTileID(t.overscaledZ,a,e.z,o,e.y).key]={backfilled:!1},0<e.y&&(s[new mt.OverscaledTileID(t.overscaledZ,i,e.z,n,e.y-1).key]={backfilled:!1},s[new mt.OverscaledTileID(t.overscaledZ,t.wrap,e.z,e.x,e.y-1).key]={backfilled:!1},s[new mt.OverscaledTileID(t.overscaledZ,a,e.z,o,e.y-1).key]={backfilled:!1}),e.y+1<r&&(s[new mt.OverscaledTileID(t.overscaledZ,i,e.z,n,e.y+1).key]={backfilled:!1},s[new mt.OverscaledTileID(t.overscaledZ,t.wrap,e.z,e.x,e.y+1).key]={backfilled:!1},s[new mt.OverscaledTileID(t.overscaledZ,a,e.z,o,e.y+1).key]={backfilled:!1}),s},N.prototype.unloadTile=function(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",this.dispatcher.send("removeDEMTile",{uid:t.uid,source:this.id},void 0,t.workerID)},N),R=((P=mt.Evented)&&(j.__proto__=P),((j.prototype=Object.create(P&&P.prototype)).constructor=j).prototype.load=function(){var r=this;this.fire(new mt.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(t){if(t)r.fire(new mt.ErrorEvent(t));else{var e={dataType:"source",sourceDataType:"metadata"};r._collectResourceTiming&&r._resourceTiming&&0<r._resourceTiming.length&&(e.resourceTiming=r._resourceTiming,r._resourceTiming=[]),r.fire(new mt.Event("data",e))}})},j.prototype.onAdd=function(t){this.map=t,this.load()},j.prototype.setData=function(t){var r=this;return this._data=t,this.fire(new mt.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(t){if(t)r.fire(new mt.ErrorEvent(t));else{var e={dataType:"source",sourceDataType:"content"};r._collectResourceTiming&&r._resourceTiming&&0<r._resourceTiming.length&&(e.resourceTiming=r._resourceTiming,r._resourceTiming=[]),r.fire(new mt.Event("data",e))}}),this},j.prototype.getClusterExpansionZoom=function(t,e){return this.dispatcher.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e,this.workerID),this},j.prototype.getClusterChildren=function(t,e){return this.dispatcher.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e,this.workerID),this},j.prototype.getClusterLeaves=function(t,e,r,n){return this.dispatcher.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:r},n,this.workerID),this},j.prototype._updateWorkerData=function(r){var n=this,i=mt.extend({},this.workerOptions),t=this._data;"string"==typeof t?(i.request=this.map._transformRequest(mt.browser.resolveURL(t),mt.ResourceType.Source),i.request.collectResourceTiming=this._collectResourceTiming):i.data=JSON.stringify(t),this.workerID=this.dispatcher.send(this.type+".loadData",i,function(t,e){n._removed||e&&e.abandoned||(n._loaded=!0,e&&e.resourceTiming&&e.resourceTiming[n.id]&&(n._resourceTiming=e.resourceTiming[n.id].slice(0)),n.dispatcher.send(n.type+".coalesce",{source:i.source},null,n.workerID),r(t))},this.workerID)},j.prototype.loadTile=function(r,n){var i=this,o=void 0===r.workerID?"loadTile":"reloadTile",t={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:mt.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes};r.workerID=this.dispatcher.send(o,t,function(t,e){return r.unloadVectorData(),r.aborted?n(null):t?n(t):(r.loadVectorData(e,i.map.painter,"reloadTile"==o),n(null))},this.workerID)},j.prototype.abortTile=function(t){t.aborted=!0},j.prototype.unloadTile=function(t){t.unloadVectorData(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type,source:this.id},null,t.workerID)},j.prototype.onRemove=function(){this._removed=!0,this.dispatcher.send("removeSource",{type:this.type,source:this.id},null,this.workerID)},j.prototype.serialize=function(){return mt.extend({},this._options,{type:this.type,data:this._data})},j.prototype.hasTransition=function(){return!1},j),F=((A=mt.Evented)&&(B.__proto__=A),((B.prototype=Object.create(A&&A.prototype)).constructor=B).prototype.load=function(r,n){var i=this;this.fire(new mt.Event("dataloading",{dataType:"source"})),this.url=this.options.url,mt.getImage(this.map._transformRequest(this.url,mt.ResourceType.Image),function(t,e){t?i.fire(new mt.ErrorEvent(t)):e&&(i.image=e,r&&(i.coordinates=r),n&&n(),i._finishLoading())})},B.prototype.updateImage=function(t){var e=this;return this.image&&t.url&&(this.options.url=t.url,this.load(t.coordinates,function(){e.texture=null})),this},B.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new mt.Event("data",{dataType:"source",sourceDataType:"metadata"})))},B.prototype.onAdd=function(t){this.map=t,this.load()},B.prototype.setCoordinates=function(t){var e=this,h=(this.coordinates=t).map(mt.MercatorCoordinate.fromLngLat);this.tileID=function(){for(var t=1/0,e=1/0,r=-1/0,n=-1/0,i=0,o=h;i<o.length;i+=1){var a=o[i];t=Math.min(t,a.x),e=Math.min(e,a.y),r=Math.max(r,a.x),n=Math.max(n,a.y)}var s=r-t,l=n-e,u=Math.max(s,l),c=Math.max(0,Math.floor(-Math.log(u)/Math.LN2)),p=Math.pow(2,c);return new mt.CanonicalTileID(c,Math.floor((t+r)/2*p),Math.floor((e+n)/2*p))}(),this.minzoom=this.maxzoom=this.tileID.z;var r=h.map(function(t){return e.tileID.getTilePoint(t)._round()});return this._boundsArray=new mt.StructArrayLayout4i8,this._boundsArray.emplaceBack(r[0].x,r[0].y,0,0),this._boundsArray.emplaceBack(r[1].x,r[1].y,mt.EXTENT,0),this._boundsArray.emplaceBack(r[3].x,r[3].y,0,mt.EXTENT),this._boundsArray.emplaceBack(r[2].x,r[2].y,mt.EXTENT,mt.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new mt.Event("data",{dataType:"source",sourceDataType:"content"})),this},B.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var t=this.map.painter.context,e=t.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,mt.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=mt.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new mt.Texture(t,this.image,e.RGBA),this.texture.bind(e.LINEAR,e.CLAMP_TO_EDGE)),this.tiles){var n=this.tiles[r];"loaded"!==n.state&&(n.state="loaded",n.texture=this.texture)}}},B.prototype.loadTile=function(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t).buckets={}:t.state="errored",e(null)},B.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},B.prototype.hasTransition=function(){return!1},B);function B(t,e,r,n){A.call(this),this.id=t,this.dispatcher=r,this.coordinates=e.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this.setEventedParent(n),this.options=e}function j(t,e,r,n){P.call(this),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this.dispatcher=r,this.setEventedParent(n),this._data=e.data,this._options=mt.extend({},e),this._collectResourceTiming=e.collectResourceTiming,this._resourceTiming=[],void 0!==e.maxzoom&&(this.maxzoom=e.maxzoom),e.type&&(this.type=e.type),e.attribution&&(this.attribution=e.attribution);var i=mt.EXTENT/this.tileSize;this.workerOptions=mt.extend({source:this.id,cluster:e.cluster||!1,geojsonVtOptions:{buffer:(void 0!==e.buffer?e.buffer:128)*i,tolerance:(void 0!==e.tolerance?e.tolerance:.375)*i,extent:mt.EXTENT,maxZoom:this.maxzoom,lineMetrics:e.lineMetrics||!1,generateId:e.generateId||!1},superclusterOptions:{maxZoom:void 0!==e.clusterMaxZoom?Math.min(e.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:mt.EXTENT,radius:(e.clusterRadius||50)*i,log:!1},clusterProperties:e.clusterProperties},e.workerOptions)}function N(t,e,r,n){I.call(this,t,e,r,n),this.type="raster-dem",this.maxzoom=22,this._options=mt.extend({},e),this.encoding=e.encoding||"mapbox"}function U(t,e,r,n){M.call(this),this.id=t,this.dispatcher=r,this.setEventedParent(n),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=mt.extend({},e),mt.extend(this,mt.pick(e,["url","scheme","tileSize"]))}function V(t,e,r,n){if(z.call(this),this.id=t,this.dispatcher=r,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,mt.extend(this,mt.pick(e,["url","scheme","tileSize"])),this._options=mt.extend({type:"vector"},e),this._collectResourceTiming=e.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(n)}var q,Z,G=((Z=F)&&($.__proto__=Z),(($.prototype=Object.create(Z&&Z.prototype)).constructor=$).prototype.load=function(){var r=this,t=this.options;this.urls=[];for(var e=0,n=t.urls;e<n.length;e+=1){var i=n[e];this.urls.push(this.map._transformRequest(i,mt.ResourceType.Source).url)}mt.getVideo(this.urls,function(t,e){t?r.fire(new mt.ErrorEvent(t)):e&&(r.video=e,r.video.loop=!0,r.video.addEventListener("playing",function(){r.map.triggerRepaint()}),r.map&&r.video.play(),r._finishLoading())})},$.prototype.getVideo=function(){return this.video},$.prototype.onAdd=function(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},$.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var t=this.map.painter.context,e=t.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,mt.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=mt.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(e.LINEAR,e.CLAMP_TO_EDGE),e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,this.video)):(this.texture=new mt.Texture(t,this.video,e.RGBA),this.texture.bind(e.LINEAR,e.CLAMP_TO_EDGE)),this.tiles){var n=this.tiles[r];"loaded"!==n.state&&(n.state="loaded",n.texture=this.texture)}}},$.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},$.prototype.hasTransition=function(){return this.video&&!this.video.paused},$),W=((q=F)&&(X.__proto__=q),((X.prototype=Object.create(q&&q.prototype)).constructor=X).prototype.load=function(){this.canvas||(this.canvas=this.options.canvas instanceof mt.window.HTMLCanvasElement?this.options.canvas:mt.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new mt.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},X.prototype.getCanvas=function(){return this.canvas},X.prototype.onAdd=function(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()},X.prototype.onRemove=function(){this.pause()},X.prototype.prepare=function(){var t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var e=this.map.painter.context,r=e.gl;for(var n in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,mt.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=mt.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new mt.Texture(e,this.canvas,r.RGBA,{premultiply:!0}),this.tiles){var i=this.tiles[n];"loaded"!==i.state&&(i.state="loaded",i.texture=this.texture)}}},X.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},X.prototype.hasTransition=function(){return this._playing},X.prototype._hasInvalidDimensions=function(){for(var t=0,e=[this.canvas.width,this.canvas.height];t<e.length;t+=1){var r=e[t];if(isNaN(r)||r<=0)return!0}return!1},X),H={vector:L,raster:O,"raster-dem":D,geojson:R,video:G,image:F,canvas:W};function X(t,e,r,n){q.call(this,t,e,r,n),e.coordinates?Array.isArray(e.coordinates)&&4===e.coordinates.length&&!e.coordinates.some(function(t){return!Array.isArray(t)||2!==t.length||t.some(function(t){return"number"!=typeof t})})||this.fire(new mt.ErrorEvent(new mt.ValidationError("sources."+t,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new mt.ErrorEvent(new mt.ValidationError("sources."+t,null,'missing required property "coordinates"'))),e.animate&&"boolean"!=typeof e.animate&&this.fire(new mt.ErrorEvent(new mt.ValidationError("sources."+t,null,'optional "animate" property must be a boolean value'))),e.canvas?"string"==typeof e.canvas||e.canvas instanceof mt.window.HTMLCanvasElement||this.fire(new mt.ErrorEvent(new mt.ValidationError("sources."+t,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new mt.ErrorEvent(new mt.ValidationError("sources."+t,null,'missing required property "canvas"'))),this.options=e,this.animate=void 0===e.animate||e.animate}function $(t,e,r,n){Z.call(this,t,e,r,n),this.roundZoom=!0,this.type="video",this.options=e}function K(n,t,e,r,i){var o,a,s,l=function(t,e,r){if(t)for(var n=0,i=t;n<i.length;n+=1){var o=e[i[n]];if(o&&o.source===r&&"fill-extrusion"===o.type)return!0}else for(var a in e){var s=e[a];if(s.source===r&&"fill-extrusion"===s.type)return!0}return!1}(r&&r.layers,t,n.id),u=i.maxPitchScaleFactor(),c=n.tilesIn(e,u,l);c.sort(J);for(var m=[],p=0,h=c;p<h.length;p+=1){var f=h[p];m.push({wrappedTileID:f.tileID.wrapped().key,queryResults:f.tile.queryRenderedFeatures(t,n._state,f.queryGeometry,f.cameraQueryGeometry,f.scale,r,i,u,(o=n.transform,a=f.tileID,void 0,s=mt.identity([]),mt.translate(s,s,[1,1,0]),mt.scale(s,s,[.5*o.width,.5*o.height,1]),mt.multiply(s,s,o.calculatePosMatrix(a.toUnwrapped()))))})}var d=function(){for(var t={},e={},r=0,n=m;r<n.length;r+=1){var i=n[r],o=i.queryResults,a=i.wrappedTileID,s=e[a]=e[a]||{};for(var l in o)for(var u=o[l],c=s[l]=s[l]||{},p=t[l]=t[l]||[],h=0,f=u;h<f.length;h+=1){var d=f[h];c[d.featureIndex]||(c[d.featureIndex]=!0,p.push(d))}}return t}();for(var y in d)d[y].forEach(function(t){var e=t.feature,r=n.getFeatureState(e.layer["source-layer"],e.id);e.source=e.layer.source,e.layer["source-layer"]&&(e.sourceLayer=e.layer["source-layer"]),e.state=r});return d}function J(t,e){var r=t.tileID,n=e.tileID;return r.overscaledZ-n.overscaledZ||r.canonical.y-n.canonical.y||r.wrap-n.wrap||r.canonical.x-n.canonical.x}function Y(t,e){this.max=t,this.onRemove=e,this.reset()}Y.prototype.reset=function(){for(var t in this.data)for(var e=0,r=this.data[t];e<r.length;e+=1){var n=r[e];n.timeout&&clearTimeout(n.timeout),this.onRemove(n.value)}return this.data={},this.order=[],this},Y.prototype.add=function(t,e,r){var n=this,i=t.wrapped().key;void 0===this.data[i]&&(this.data[i]=[]);var o={value:e,timeout:void 0};if(void 0!==r&&(o.timeout=setTimeout(function(){n.remove(t,o)},r)),this.data[i].push(o),this.order.push(i),this.order.length>this.max){var a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this},Y.prototype.has=function(t){return t.wrapped().key in this.data},Y.prototype.getAndRemove=function(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null},Y.prototype._getAndRemoveByKey=function(t){var e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value},Y.prototype.get=function(t){return this.has(t)?this.data[t.wrapped().key][0].value:null},Y.prototype.remove=function(t,e){if(!this.has(t))return this;var r=t.wrapped().key,n=void 0===e?0:this.data[r].indexOf(e),i=this.data[r][n];return this.data[r].splice(n,1),i.timeout&&clearTimeout(i.timeout),0===this.data[r].length&&delete this.data[r],this.onRemove(i.value),this.order.splice(this.order.indexOf(r),1),this},Y.prototype.setMaxSize=function(t){for(this.max=t;this.order.length>this.max;){var e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this};function Q(t,e,r){var n=(this.context=t).gl;this.buffer=n.createBuffer(),this.dynamicDraw=Boolean(r),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),n.bufferData(n.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?n.DYNAMIC_DRAW:n.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer}Q.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Q.prototype.updateData=function(t){var e=this.context.gl;this.context.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)},Q.prototype.destroy=function(){var t=this.context.gl;this.buffer&&(t.deleteBuffer(this.buffer),delete this.buffer)};function tt(t,e,r,n){this.length=e.length,this.attributes=r,this.itemSize=e.bytesPerElement,this.dynamicDraw=n;var i=(this.context=t).gl;this.buffer=i.createBuffer(),t.bindVertexBuffer.set(this.buffer),i.bufferData(i.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer}var et={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};tt.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},tt.prototype.updateData=function(t){var e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)},tt.prototype.enableAttributes=function(t,e){for(var r=0;r<this.attributes.length;r++){var n=this.attributes[r],i=e.attributes[n.name];void 0!==i&&t.enableVertexAttribArray(i)}},tt.prototype.setVertexAttribPointers=function(t,e,r){for(var n=0;n<this.attributes.length;n++){var i=this.attributes[n],o=e.attributes[i.name];void 0!==o&&t.vertexAttribPointer(o,i.components,t[et[i.type]],!1,this.itemSize,i.offset+this.itemSize*(r||0))}},tt.prototype.destroy=function(){var t=this.context.gl;this.buffer&&(t.deleteBuffer(this.buffer),delete this.buffer)};function rt(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}rt.prototype.get=function(){return this.current},rt.prototype.set=function(t){},rt.prototype.getDefault=function(){return this.default},rt.prototype.setDefault=function(){this.set(this.default)};function nt(t,e,r){this.context=t,this.width=e,this.height=r;var n=t.gl,i=this.framebuffer=n.createFramebuffer();this.colorAttachment=new ge(t,i),this.depthAttachment=new ve(t,i)}var it,ot,at,st,lt,ut,ct,pt,ht,ft,dt,yt,gt,vt,_t,bt,xt,wt,Et,St,kt,Ct,Tt,At,Pt,It,Mt,zt,Lt,Ot,Dt,Rt,Ft,Bt,jt=((Bt=rt)&&(Ye.__proto__=Bt),((Ye.prototype=Object.create(Bt&&Bt.prototype)).constructor=Ye).prototype.getDefault=function(){return mt.Color.transparent},Ye.prototype.set=function(t){var e=this.current;t.r===e.r&&t.g===e.g&&t.b===e.b&&t.a===e.a&&!this.dirty||(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},Ye),Nt=((Ft=rt)&&(Je.__proto__=Ft),((Je.prototype=Object.create(Ft&&Ft.prototype)).constructor=Je).prototype.getDefault=function(){return 1},Je.prototype.set=function(t){t===this.current&&!this.dirty||(this.gl.clearDepth(t),this.current=t,this.dirty=!1)},Je),Ut=((Rt=rt)&&(Ke.__proto__=Rt),((Ke.prototype=Object.create(Rt&&Rt.prototype)).constructor=Ke).prototype.getDefault=function(){return 0},Ke.prototype.set=function(t){t===this.current&&!this.dirty||(this.gl.clearStencil(t),this.current=t,this.dirty=!1)},Ke),Vt=((Dt=rt)&&($e.__proto__=Dt),(($e.prototype=Object.create(Dt&&Dt.prototype)).constructor=$e).prototype.getDefault=function(){return[!0,!0,!0,!0]},$e.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&!this.dirty||(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},$e),qt=((Ot=rt)&&(Xe.__proto__=Ot),((Xe.prototype=Object.create(Ot&&Ot.prototype)).constructor=Xe).prototype.getDefault=function(){return!0},Xe.prototype.set=function(t){t===this.current&&!this.dirty||(this.gl.depthMask(t),this.current=t,this.dirty=!1)},Xe),Zt=((Lt=rt)&&(He.__proto__=Lt),((He.prototype=Object.create(Lt&&Lt.prototype)).constructor=He).prototype.getDefault=function(){return 255},He.prototype.set=function(t){t===this.current&&!this.dirty||(this.gl.stencilMask(t),this.current=t,this.dirty=!1)},He),Gt=((zt=rt)&&(We.__proto__=zt),((We.prototype=Object.create(zt&&zt.prototype)).constructor=We).prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},We.prototype.set=function(t){var e=this.current;t.func===e.func&&t.ref===e.ref&&t.mask===e.mask&&!this.dirty||(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)},We),Wt=((Mt=rt)&&(Ge.__proto__=Mt),((Ge.prototype=Object.create(Mt&&Mt.prototype)).constructor=Ge).prototype.getDefault=function(){var t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]},Ge.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&!this.dirty||(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)},Ge),Ht=((It=rt)&&(Ze.__proto__=It),((Ze.prototype=Object.create(It&&It.prototype)).constructor=Ze).prototype.getDefault=function(){return!1},Ze.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.dirty=!1}},Ze),Xt=((Pt=rt)&&(qe.__proto__=Pt),((qe.prototype=Object.create(Pt&&Pt.prototype)).constructor=qe).prototype.getDefault=function(){return[0,1]},qe.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]&&!this.dirty||(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)},qe),$t=((At=rt)&&(Ve.__proto__=At),((Ve.prototype=Object.create(At&&At.prototype)).constructor=Ve).prototype.getDefault=function(){return!1},Ve.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t,this.dirty=!1}},Ve),Kt=((Tt=rt)&&(Ue.__proto__=Tt),((Ue.prototype=Object.create(Tt&&Tt.prototype)).constructor=Ue).prototype.getDefault=function(){return this.gl.LESS},Ue.prototype.set=function(t){t===this.current&&!this.dirty||(this.gl.depthFunc(t),this.current=t,this.dirty=!1)},Ue),Jt=((Ct=rt)&&(Ne.__proto__=Ct),((Ne.prototype=Object.create(Ct&&Ct.prototype)).constructor=Ne).prototype.getDefault=function(){return!1},Ne.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.dirty=!1}},Ne),Yt=((kt=rt)&&(je.__proto__=kt),((je.prototype=Object.create(kt&&kt.prototype)).constructor=je).prototype.getDefault=function(){var t=this.gl;return[t.ONE,t.ZERO]},je.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]&&!this.dirty||(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)},je),Qt=((St=rt)&&(Be.__proto__=St),((Be.prototype=Object.create(St&&St.prototype)).constructor=Be).prototype.getDefault=function(){return mt.Color.transparent},Be.prototype.set=function(t){var e=this.current;t.r===e.r&&t.g===e.g&&t.b===e.b&&t.a===e.a&&!this.dirty||(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},Be),te=((Et=rt)&&(Fe.__proto__=Et),((Fe.prototype=Object.create(Et&&Et.prototype)).constructor=Fe).prototype.getDefault=function(){return this.gl.FUNC_ADD},Fe.prototype.set=function(t){t===this.current&&!this.dirty||(this.gl.blendEquation(t),this.current=t,this.dirty=!1)},Fe),ee=((wt=rt)&&(Re.__proto__=wt),((Re.prototype=Object.create(wt&&wt.prototype)).constructor=Re).prototype.getDefault=function(){return!1},Re.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.dirty=!1}},Re),re=((xt=rt)&&(De.__proto__=xt),((De.prototype=Object.create(xt&&xt.prototype)).constructor=De).prototype.getDefault=function(){return this.gl.BACK},De.prototype.set=function(t){t===this.current&&!this.dirty||(this.gl.cullFace(t),this.current=t,this.dirty=!1)},De),ne=((bt=rt)&&(Oe.__proto__=bt),((Oe.prototype=Object.create(bt&&bt.prototype)).constructor=Oe).prototype.getDefault=function(){return this.gl.CCW},Oe.prototype.set=function(t){t===this.current&&!this.dirty||(this.gl.frontFace(t),this.current=t,this.dirty=!1)},Oe),ie=((_t=rt)&&(Le.__proto__=_t),((Le.prototype=Object.create(_t&&_t.prototype)).constructor=Le).prototype.getDefault=function(){return null},Le.prototype.set=function(t){t===this.current&&!this.dirty||(this.gl.useProgram(t),this.current=t,this.dirty=!1)},Le),oe=((vt=rt)&&(ze.__proto__=vt),((ze.prototype=Object.create(vt&&vt.prototype)).constructor=ze).prototype.getDefault=function(){return this.gl.TEXTURE0},ze.prototype.set=function(t){t===this.current&&!this.dirty||(this.gl.activeTexture(t),this.current=t,this.dirty=!1)},ze),ae=((gt=rt)&&(Me.__proto__=gt),((Me.prototype=Object.create(gt&&gt.prototype)).constructor=Me).prototype.getDefault=function(){var t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]},Me.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&!this.dirty||(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},Me),se=((yt=rt)&&(Ie.__proto__=yt),((Ie.prototype=Object.create(yt&&yt.prototype)).constructor=Ie).prototype.getDefault=function(){return null},Ie.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.dirty=!1}},Ie),le=((dt=rt)&&(Pe.__proto__=dt),((Pe.prototype=Object.create(dt&&dt.prototype)).constructor=Pe).prototype.getDefault=function(){return null},Pe.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},Pe),ue=((ft=rt)&&(Ae.__proto__=ft),((Ae.prototype=Object.create(ft&&ft.prototype)).constructor=Ae).prototype.getDefault=function(){return null},Ae.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t,this.dirty=!1}},Ae),ce=((ht=rt)&&(Te.__proto__=ht),((Te.prototype=Object.create(ht&&ht.prototype)).constructor=Te).prototype.getDefault=function(){return null},Te.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}},Te),pe=((pt=rt)&&(Ce.__proto__=pt),((Ce.prototype=Object.create(pt&&pt.prototype)).constructor=Ce).prototype.getDefault=function(){return null},Ce.prototype.set=function(t){var e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1},Ce),he=((ct=rt)&&(ke.__proto__=ct),((ke.prototype=Object.create(ct&&ct.prototype)).constructor=ke).prototype.getDefault=function(){return null},ke.prototype.set=function(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)},ke),fe=((ut=rt)&&(Se.__proto__=ut),((Se.prototype=Object.create(ut&&ut.prototype)).constructor=Se).prototype.getDefault=function(){return 4},Se.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}},Se),de=((lt=rt)&&(Ee.__proto__=lt),((Ee.prototype=Object.create(lt&&lt.prototype)).constructor=Ee).prototype.getDefault=function(){return!1},Ee.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}},Ee),me=((st=rt)&&(we.__proto__=st),((we.prototype=Object.create(st&&st.prototype)).constructor=we).prototype.getDefault=function(){return!1},we.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}},we),ye=((at=rt)&&(xe.__proto__=at),((xe.prototype=Object.create(at&&at.prototype)).constructor=xe).prototype.getDefault=function(){return null},xe),ge=((ot=ye)&&(be.__proto__=ot),((be.prototype=Object.create(ot&&ot.prototype)).constructor=be).prototype.setDirty=function(){this.dirty=!0},be.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}},be),ve=((it=ye)&&(_e.__proto__=it),((_e.prototype=Object.create(it&&it.prototype)).constructor=_e).prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},_e);function _e(){it.apply(this,arguments)}function be(){ot.apply(this,arguments)}function xe(t,e){at.call(this,t),this.context=t,this.parent=e}function we(){st.apply(this,arguments)}function Ee(){lt.apply(this,arguments)}function Se(){ut.apply(this,arguments)}function ke(t){ct.call(this,t),this.vao=t.extVertexArrayObject}function Ce(){pt.apply(this,arguments)}function Te(){ht.apply(this,arguments)}function Ae(){ft.apply(this,arguments)}function Pe(){dt.apply(this,arguments)}function Ie(){yt.apply(this,arguments)}function Me(){gt.apply(this,arguments)}function ze(){vt.apply(this,arguments)}function Le(){_t.apply(this,arguments)}function Oe(){bt.apply(this,arguments)}function De(){xt.apply(this,arguments)}function Re(){wt.apply(this,arguments)}function Fe(){Et.apply(this,arguments)}function Be(){St.apply(this,arguments)}function je(){kt.apply(this,arguments)}function Ne(){Ct.apply(this,arguments)}function Ue(){Tt.apply(this,arguments)}function Ve(){At.apply(this,arguments)}function qe(){Pt.apply(this,arguments)}function Ze(){It.apply(this,arguments)}function Ge(){Mt.apply(this,arguments)}function We(){zt.apply(this,arguments)}function He(){Lt.apply(this,arguments)}function Xe(){Ot.apply(this,arguments)}function $e(){Dt.apply(this,arguments)}function Ke(){Rt.apply(this,arguments)}function Je(){Ft.apply(this,arguments)}function Ye(){Bt.apply(this,arguments)}nt.prototype.destroy=function(){var t=this.context.gl,e=this.colorAttachment.get();e&&t.deleteTexture(e);var r=this.depthAttachment.get();r&&t.deleteRenderbuffer(r),t.deleteFramebuffer(this.framebuffer)};var Qe=function(t,e,r){this.func=t,this.mask=e,this.range=r};Qe.ReadOnly=!1,Qe.ReadWrite=!0,Qe.disabled=new Qe(519,Qe.ReadOnly,[0,1]);var tr=function(t,e,r,n,i,o){this.test=t,this.ref=e,this.mask=r,this.fail=n,this.depthFail=i,this.pass=o};tr.disabled=new tr({func:519,mask:0},0,0,7680,7680,7680);function er(t,e,r){this.blendFunction=t,this.blendColor=e,this.mask=r}er.disabled=new er(er.Replace=[1,0],mt.Color.transparent,[!1,!1,!1,!1]),er.unblended=new er(er.Replace,mt.Color.transparent,[!0,!0,!0,!0]),er.alphaBlended=new er([1,771],mt.Color.transparent,[!0,!0,!0,!0]);var rr=function(t,e,r){this.enable=t,this.mode=e,this.frontFace=r};rr.disabled=new rr(!1,1029,2305),rr.backCCW=new rr(!0,1029,2305);function nr(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new jt(this),this.clearDepth=new Nt(this),this.clearStencil=new Ut(this),this.colorMask=new Vt(this),this.depthMask=new qt(this),this.stencilMask=new Zt(this),this.stencilFunc=new Gt(this),this.stencilOp=new Wt(this),this.stencilTest=new Ht(this),this.depthRange=new Xt(this),this.depthTest=new $t(this),this.depthFunc=new Kt(this),this.blend=new Jt(this),this.blendFunc=new Yt(this),this.blendColor=new Qt(this),this.blendEquation=new te(this),this.cullFace=new ee(this),this.cullFaceSide=new re(this),this.frontFace=new ne(this),this.program=new ie(this),this.activeTexture=new oe(this),this.viewport=new ae(this),this.bindFramebuffer=new se(this),this.bindRenderbuffer=new le(this),this.bindTexture=new ue(this),this.bindVertexBuffer=new ce(this),this.bindElementBuffer=new pe(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new he(this),this.pixelStoreUnpack=new fe(this),this.pixelStoreUnpackPremultiplyAlpha=new de(this),this.pixelStoreUnpackFlipY=new me(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&t.getExtension("OES_texture_half_float_linear")}nr.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},nr.prototype.createIndexBuffer=function(t,e){return new Q(this,t,e)},nr.prototype.createVertexBuffer=function(t,e,r){return new tt(this,t,e,r)},nr.prototype.createRenderbuffer=function(t,e,r){var n=this.gl,i=n.createRenderbuffer();return this.bindRenderbuffer.set(i),n.renderbufferStorage(n.RENDERBUFFER,t,e,r),this.bindRenderbuffer.set(null),i},nr.prototype.createFramebuffer=function(t,e){return new nt(this,t,e)},nr.prototype.clear=function(t){var e=t.color,r=t.depth,n=this.gl,i=0;e&&(i|=n.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==r&&(i|=n.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(r),this.depthMask.set(!0)),n.clear(i)},nr.prototype.setCullFace=function(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))},nr.prototype.setDepthMode=function(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)},nr.prototype.setStencilMode=function(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)},nr.prototype.setColorMode=function(t){mt.deepEqual(t.blendFunction,er.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)},nr.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var ir,or=((ir=mt.Evented)&&(ar.__proto__=ir),((ar.prototype=Object.create(ir&&ir.prototype)).constructor=ar).prototype.onAdd=function(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t)},ar.prototype.onRemove=function(t){this._source&&this._source.onRemove&&this._source.onRemove(t)},ar.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;for(var t in this._tiles){var e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0},ar.prototype.getSource=function(){return this._source},ar.prototype.pause=function(){this._paused=!0},ar.prototype.resume=function(){if(this._paused){var t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}},ar.prototype._loadTile=function(t,e){return this._source.loadTile(t,e)},ar.prototype._unloadTile=function(t){if(this._source.unloadTile)return this._source.unloadTile(t,function(){})},ar.prototype._abortTile=function(t){if(this._source.abortTile)return this._source.abortTile(t,function(){})},ar.prototype.serialize=function(){return this._source.serialize()},ar.prototype.prepare=function(t){for(var e in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var r=this._tiles[e];r.upload(t),r.prepare(this.map.style.imageManager)}},ar.prototype.getIds=function(){return Object.keys(this._tiles).map(Number).sort(sr)},ar.prototype.getRenderableIds=function(t){var a=this,e=[];for(var r in this._tiles)this._isIdRenderable(+r,t)&&e.push(+r);return t?e.sort(function(t,e){var r=a._tiles[t].tileID,n=a._tiles[e].tileID,i=new mt.Point(r.canonical.x,r.canonical.y)._rotate(a.transform.angle),o=new mt.Point(n.canonical.x,n.canonical.y)._rotate(a.transform.angle);return r.overscaledZ-n.overscaledZ||o.y-i.y||o.x-i.x}):e.sort(sr)},ar.prototype.hasRenderableParent=function(t){var e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)},ar.prototype._isIdRenderable=function(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())},ar.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var t in this._cache.reset(),this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(t,"reloading")},ar.prototype._reloadTile=function(t,e){var r=this._tiles[t];r&&("loading"!==r.state&&(r.state=e),this._loadTile(r,this._tileLoaded.bind(this,r,t,e)))},ar.prototype._tileLoaded=function(t,e,r,n){if(n)return t.state="errored",void(404!==n.status?this._source.fire(new mt.ErrorEvent(n,{tile:t})):this.update(this.transform));t.timeAdded=mt.browser.now(),"expired"===r&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(e,t),"raster-dem"===this.getSource().type&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),this._source.fire(new mt.Event("data",{dataType:"source",tile:t,coord:t.tileID}))},ar.prototype._backfillDEM=function(t){for(var e=this.getRenderableIds(),r=0;r<e.length;r++){var n=e[r];if(t.neighboringTiles&&t.neighboringTiles[n]){var i=this.getTileByID(n);o(t,i),o(i,t)}}function o(t,e){t.needsHillshadePrepare=!0;var r=e.tileID.canonical.x-t.tileID.canonical.x,n=e.tileID.canonical.y-t.tileID.canonical.y,i=Math.pow(2,t.tileID.canonical.z),o=e.tileID.key;0===r&&0==n||1<Math.abs(n)||(1<Math.abs(r)&&(1===Math.abs(r+i)?r+=i:1===Math.abs(r-i)&&(r-=i)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,r,n),t.neighboringTiles&&t.neighboringTiles[o]&&(t.neighboringTiles[o].backfilled=!0)))}},ar.prototype.getTile=function(t){return this.getTileByID(t.key)},ar.prototype.getTileByID=function(t){return this._tiles[t]},ar.prototype.getZoom=function(t){return t.zoom+t.scaleZoom(t.tileSize/this._source.tileSize)},ar.prototype._retainLoadedChildren=function(t,e,r,n){for(var i in this._tiles){var o=this._tiles[i];if(!(n[i]||!o.hasData()||o.tileID.overscaledZ<=e||o.tileID.overscaledZ>r)){for(var a=o.tileID;o&&o.tileID.overscaledZ>e+1;){var s=o.tileID.scaledTo(o.tileID.overscaledZ-1);(o=this._tiles[s.key])&&o.hasData()&&(a=s)}for(var l=a;l.overscaledZ>e;)if(t[(l=l.scaledTo(l.overscaledZ-1)).key]){n[a.key]=a;break}}}},ar.prototype.findLoadedParent=function(t,e){for(var r=t.overscaledZ-1;e<=r;r--){var n=t.scaledTo(r);if(!n)return;var i=String(n.key),o=this._tiles[i];if(o&&o.hasData())return o;if(this._cache.has(n))return this._cache.get(n)}},ar.prototype.updateCacheSize=function(t){var e=(Math.ceil(t.width/this._source.tileSize)+1)*(Math.ceil(t.height/this._source.tileSize)+1),r=Math.floor(5*e),n="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,r):r;this._cache.setMaxSize(n)},ar.prototype.handleWrapJump=function(t){var e=(t-(void 0===this._prevLng?t:this._prevLng))/360,r=Math.round(e);if(this._prevLng=t,r){var n={};for(var i in this._tiles){var o=this._tiles[i];o.tileID=o.tileID.unwrapTo(o.tileID.wrap+r),n[o.tileID.key]=o}for(var a in this._tiles=n,this._timers)clearTimeout(this._timers[a]),delete this._timers[a];for(var s in this._tiles){var l=this._tiles[s];this._setTileReloadTimer(s,l)}}},ar.prototype.update=function(t){var e=this;if(this.transform=t,this._sourceLoaded&&!this._paused){var r;this.updateCacheSize(t),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?r=t.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(t){return new mt.OverscaledTileID(t.canonical.z,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y)}):(r=t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(r=r.filter(function(t){return e._source.hasTile(t)}))):r=[];var n=(this._source.roundZoom?Math.round:Math.floor)(this.getZoom(t)),i=Math.max(n-ar.maxOverzooming,this._source.minzoom),o=Math.max(n+ar.maxUnderzooming,this._source.minzoom),a=this._updateRetainedTiles(r,n);if(lr(this._source.type)){for(var s={},l={},u=0,c=Object.keys(a);u<c.length;u+=1){var p=c[u],h=a[p],f=this._tiles[p];if(f&&!(f.fadeEndTime&&f.fadeEndTime<=mt.browser.now())){var d=this.findLoadedParent(h,i);d&&(this._addTile(d.tileID),s[d.tileID.key]=d.tileID),l[p]=h}}for(var m in this._retainLoadedChildren(l,n,o,a),s)a[m]||(this._coveredTiles[m]=!0,a[m]=s[m])}for(var y in a)this._tiles[y].clearFadeHold();for(var g=0,v=mt.keysDifference(this._tiles,a);g<v.length;g+=1){var _=v[g],b=this._tiles[_];b.hasSymbolBuckets&&!b.holdingForFade()?b.setHoldDuration(this.map._fadeDuration):b.hasSymbolBuckets&&!b.symbolFadeFinished()||this._removeTile(_)}}},ar.prototype.releaseSymbolFadeTiles=function(){for(var t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)},ar.prototype._updateRetainedTiles=function(t,e){for(var r={},n={},i=Math.max(e-ar.maxOverzooming,this._source.minzoom),o=Math.max(e+ar.maxUnderzooming,this._source.minzoom),a={},s=0,l=t;s<l.length;s+=1){var u=l[s],c=this._addTile(u);r[u.key]=u,c.hasData()||e<this._source.maxzoom&&(a[u.key]=u)}this._retainLoadedChildren(a,e,o,r);for(var p=0,h=t;p<h.length;p+=1){var f=h[p],d=this._tiles[f.key];if(!d.hasData()){if(e+1>this._source.maxzoom){var m=f.children(this._source.maxzoom)[0],y=this.getTile(m);if(y&&y.hasData()){r[m.key]=m;continue}}else{var g=f.children(this._source.maxzoom);if(r[g[0].key]&&r[g[1].key]&&r[g[2].key]&&r[g[3].key])continue}for(var v=d.wasRequested(),_=f.overscaledZ-1;i<=_;--_){var b=f.scaledTo(_);if(n[b.key])break;if(n[b.key]=!0,!(d=this.getTile(b))&&v&&(d=this._addTile(b)),d&&(r[b.key]=b,v=d.wasRequested(),d.hasData()))break}}}return r},ar.prototype._addTile=function(t){var e=this._tiles[t.key];if(e)return e;(e=this._cache.getAndRemove(t))&&(this._setTileReloadTimer(t.key,e),e.tileID=t,this._state.initializeTileState(e,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,e)));var r=Boolean(e);return r||(e=new mt.Tile(t,this._source.tileSize*t.overscaleFactor()),this._loadTile(e,this._tileLoaded.bind(this,e,t.key,e.state))),e?(e.uses++,this._tiles[t.key]=e,r||this._source.fire(new mt.Event("dataloading",{tile:e,coord:e.tileID,dataType:"source"})),e):null},ar.prototype._setTileReloadTimer=function(t,e){var r=this;t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);var n=e.getExpiryTimeout();n&&(this._timers[t]=setTimeout(function(){r._reloadTile(t,"expired"),delete r._timers[t]},n))},ar.prototype._removeTile=function(t){var e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),0<e.uses||(e.hasData()?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))},ar.prototype.clearTiles=function(){for(var t in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(t);this._cache.reset()},ar.prototype.tilesIn=function(t,l,e){var u=this,c=[],p=this.transform;if(!p)return c;for(var r=e?p.getCameraQueryGeometry(t):t,h=t.map(function(t){return p.pointCoordinate(t)}),f=r.map(function(t){return p.pointCoordinate(t)}),d=this.getIds(),m=1/0,y=1/0,g=-1/0,v=-1/0,n=0,i=f;n<i.length;n+=1){var o=i[n];m=Math.min(m,o.x),y=Math.min(y,o.y),g=Math.max(g,o.x),v=Math.max(v,o.y)}for(var a=function(t){var e=u._tiles[d[t]];if(!e.holdingForFade()){var r=e.tileID,n=Math.pow(2,p.zoom-e.tileID.overscaledZ),i=l*e.queryPadding*mt.EXTENT/e.tileSize/n,o=[r.getTilePoint(new mt.MercatorCoordinate(m,y)),r.getTilePoint(new mt.MercatorCoordinate(g,v))];if(o[0].x-i<mt.EXTENT&&o[0].y-i<mt.EXTENT&&0<=o[1].x+i&&0<=o[1].y+i){var a=h.map(function(t){return r.getTilePoint(t)}),s=f.map(function(t){return r.getTilePoint(t)});c.push({tile:e,tileID:r,queryGeometry:a,cameraQueryGeometry:s,scale:n})}}},s=0;s<d.length;s++)a(s);return c},ar.prototype.getVisibleCoordinates=function(t){for(var e=this,r=this.getRenderableIds(t).map(function(t){return e._tiles[t].tileID}),n=0,i=r;n<i.length;n+=1){var o=i[n];o.posMatrix=this.transform.calculatePosMatrix(o.toUnwrapped())}return r},ar.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(lr(this._source.type))for(var t in this._tiles){var e=this._tiles[t];if(void 0!==e.fadeEndTime&&e.fadeEndTime>=mt.browser.now())return!0}return!1},ar.prototype.setFeatureState=function(t,e,r){t=t||"_geojsonTileLayer",this._state.updateState(t,e,r)},ar.prototype.removeFeatureState=function(t,e,r){t=t||"_geojsonTileLayer",this._state.removeFeatureState(t,e,r)},ar.prototype.getFeatureState=function(t,e){return t=t||"_geojsonTileLayer",this._state.getState(t,e)},ar);function ar(t,e,r){var n=this;ir.call(this),this.id=t,this.dispatcher=r,this.on("data",function(t){"source"===t.dataType&&"metadata"===t.sourceDataType&&(n._sourceLoaded=!0),n._sourceLoaded&&!n._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(n.reload(),n.transform&&n.update(n.transform))}),this.on("error",function(){n._sourceErrored=!0}),this._source=function(t,e,r,n){var i=new H[e.type](t,e,r,n);if(i.id!==t)throw new Error("Expected Source id to be "+t+" instead of "+i.id);return mt.bindAll(["load","abort","unload","serialize","prepare"],i),i}(t,e,r,this),this._tiles={},this._cache=new Y(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._coveredTiles={},this._state=new mt.SourceFeatureState}function sr(t,e){return t%32-e%32||e-t}function lr(t){return"raster"===t||"image"===t||"video"===t}function ur(){return new mt.window.Worker(Co.workerUrl)}or.maxOverzooming=10,or.maxUnderzooming=3;function cr(){this.active={}}cr.prototype.acquire=function(t){if(!this.workers)for(this.workers=[];this.workers.length<cr.workerCount;)this.workers.push(new ur);return this.active[t]=!0,this.workers.slice()},cr.prototype.release=function(t){delete this.active[t],0===Object.keys(this.active).length&&(this.workers.forEach(function(t){t.terminate()}),this.workers=null)};var pr,hr=Math.floor(mt.browser.hardwareConcurrency/2);function fr(t,e){var r={};for(var n in t)"ref"!==n&&(r[n]=t[n]);return mt.refProperties.forEach(function(t){t in e&&(r[t]=e[t])}),r}function dr(t){t=t.slice();for(var e=Object.create(null),r=0;r<t.length;r++)e[t[r].id]=t[r];for(var n=0;n<t.length;n++)"ref"in t[n]&&(t[n]=fr(t[n],e[t[n].ref]));return t}cr.workerCount=Math.max(Math.min(hr,6),1);var mr={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function yr(t,e,r){r.push({command:mr.addSource,args:[t,e[t]]})}function gr(t,e,r){e.push({command:mr.removeSource,args:[t]}),r[t]=!0}function vr(t,e,r){var n;for(n in t[r])if(t[r].hasOwnProperty(n)&&"data"!==n&&!mt.deepEqual(t[r][n],e[r][n]))return!1;for(n in e[r])if(e[r].hasOwnProperty(n)&&"data"!==n&&!mt.deepEqual(t[r][n],e[r][n]))return!1;return!0}function _r(t,e,r,n,i,o){var a;for(a in e=e||{},t=t||{})t.hasOwnProperty(a)&&(mt.deepEqual(t[a],e[a])||r.push({command:o,args:[n,a,e[a],i]}));for(a in e)e.hasOwnProperty(a)&&!t.hasOwnProperty(a)&&(mt.deepEqual(t[a],e[a])||r.push({command:o,args:[n,a,e[a],i]}))}function br(t){return t.id}function xr(t,e){return t[e.id]=e,t}function wr(t,e){if(!t)return[{command:mr.setStyle,args:[e]}];var r=[];try{if(!mt.deepEqual(t.version,e.version))return[{command:mr.setStyle,args:[e]}];mt.deepEqual(t.center,e.center)||r.push({command:mr.setCenter,args:[e.center]}),mt.deepEqual(t.zoom,e.zoom)||r.push({command:mr.setZoom,args:[e.zoom]}),mt.deepEqual(t.bearing,e.bearing)||r.push({command:mr.setBearing,args:[e.bearing]}),mt.deepEqual(t.pitch,e.pitch)||r.push({command:mr.setPitch,args:[e.pitch]}),mt.deepEqual(t.sprite,e.sprite)||r.push({command:mr.setSprite,args:[e.sprite]}),mt.deepEqual(t.glyphs,e.glyphs)||r.push({command:mr.setGlyphs,args:[e.glyphs]}),mt.deepEqual(t.transition,e.transition)||r.push({command:mr.setTransition,args:[e.transition]}),mt.deepEqual(t.light,e.light)||r.push({command:mr.setLight,args:[e.light]});var n={},i=[];!function(t,e,r,n){var i,o,a,s;for(i in e=e||{},t=t||{})t.hasOwnProperty(i)&&(e.hasOwnProperty(i)||gr(i,r,n));for(i in e)e.hasOwnProperty(i)&&(t.hasOwnProperty(i)?mt.deepEqual(t[i],e[i])||("geojson"===t[i].type&&"geojson"===e[i].type&&vr(t,e,i)?r.push({command:mr.setGeoJSONSourceData,args:[i,e[i].data]}):(a=e,gr(o=i,s=r,n),yr(o,a,s))):yr(i,e,r))}(t.sources,e.sources,i,n);var o=[];t.layers&&t.layers.forEach(function(t){n[t.source]?r.push({command:mr.removeLayer,args:[t.id]}):o.push(t)}),r=r.concat(i),function(t,e,r){e=e||[];var n,i,o,a,s,l,u,c=(t=t||[]).map(br),p=e.map(br),h=t.reduce(xr,{}),f=e.reduce(xr,{}),d=c.slice(),m=Object.create(null);for(i=n=0;n<c.length;n++)o=c[n],f.hasOwnProperty(o)?i++:(r.push({command:mr.removeLayer,args:[o]}),d.splice(d.indexOf(o,i),1));for(i=n=0;n<p.length;n++)o=p[p.length-1-n],d[d.length-1-n]!==o&&(h.hasOwnProperty(o)?(r.push({command:mr.removeLayer,args:[o]}),d.splice(d.lastIndexOf(o,d.length-i),1)):i++,l=d[d.length-n],r.push({command:mr.addLayer,args:[f[o],l]}),d.splice(d.length-n,0,o),m[o]=!0);for(n=0;n<p.length;n++)if(a=h[o=p[n]],s=f[o],!m[o]&&!mt.deepEqual(a,s))if(mt.deepEqual(a.source,s.source)&&mt.deepEqual(a["source-layer"],s["source-layer"])&&mt.deepEqual(a.type,s.type)){for(u in _r(a.layout,s.layout,r,o,null,mr.setLayoutProperty),_r(a.paint,s.paint,r,o,null,mr.setPaintProperty),mt.deepEqual(a.filter,s.filter)||r.push({command:mr.setFilter,args:[o,s.filter]}),mt.deepEqual(a.minzoom,s.minzoom)&&mt.deepEqual(a.maxzoom,s.maxzoom)||r.push({command:mr.setLayerZoomRange,args:[o,s.minzoom,s.maxzoom]}),a)a.hasOwnProperty(u)&&"layout"!==u&&"paint"!==u&&"filter"!==u&&"metadata"!==u&&"minzoom"!==u&&"maxzoom"!==u&&(0===u.indexOf("paint.")?_r(a[u],s[u],r,o,u.slice(6),mr.setPaintProperty):mt.deepEqual(a[u],s[u])||r.push({command:mr.setLayerProperty,args:[o,u,s[u]]}));for(u in s)s.hasOwnProperty(u)&&!a.hasOwnProperty(u)&&"layout"!==u&&"paint"!==u&&"filter"!==u&&"metadata"!==u&&"minzoom"!==u&&"maxzoom"!==u&&(0===u.indexOf("paint.")?_r(a[u],s[u],r,o,u.slice(6),mr.setPaintProperty):mt.deepEqual(a[u],s[u])||r.push({command:mr.setLayerProperty,args:[o,u,s[u]]}))}else r.push({command:mr.removeLayer,args:[o]}),l=d[d.lastIndexOf(o)+1],r.push({command:mr.addLayer,args:[s,l]})}(o,e.layers,r)}catch(t){console.warn("Unable to compute style diff:",t),r=[{command:mr.setStyle,args:[e]}]}return r}function Er(t,e,r){var n=this.boxCells=[],i=this.circleCells=[];this.xCellCount=Math.ceil(t/r),this.yCellCount=Math.ceil(e/r);for(var o=0;o<this.xCellCount*this.yCellCount;o++)n.push([]),i.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0}Er.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Er.prototype.insert=function(t,e,r,n,i){this._forEachCell(e,r,n,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(r),this.bboxes.push(n),this.bboxes.push(i)},Er.prototype.insertCircle=function(t,e,r,n){this._forEachCell(e-n,r-n,e+n,r+n,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(r),this.circles.push(n)},Er.prototype._insertBoxCell=function(t,e,r,n,i,o){this.boxCells[i].push(o)},Er.prototype._insertCircleCell=function(t,e,r,n,i,o){this.circleCells[i].push(o)},Er.prototype._query=function(t,e,r,n,i,o){if(r<0||t>this.width||n<0||e>this.height)return!i&&[];var a=[];if(t<=0&&e<=0&&this.width<=r&&this.height<=n){if(i)return!0;for(var s=0;s<this.boxKeys.length;s++)a.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var l=0;l<this.circleKeys.length;l++){var u=this.circles[3*l],c=this.circles[3*l+1],p=this.circles[3*l+2];a.push({key:this.circleKeys[l],x1:u-p,y1:c-p,x2:u+p,y2:c+p})}return o?a.filter(o):a}var h={hitTest:i,seenUids:{box:{},circle:{}}};return this._forEachCell(t,e,r,n,this._queryCell,a,h,o),i?0<a.length:a},Er.prototype._queryCircle=function(t,e,r,n,i){var o=t-r,a=t+r,s=e-r,l=e+r;if(a<0||o>this.width||l<0||s>this.height)return!n&&[];var u=[],c={hitTest:n,circle:{x:t,y:e,radius:r},seenUids:{box:{},circle:{}}};return this._forEachCell(o,s,a,l,this._queryCellCircle,u,c,i),n?0<u.length:u},Er.prototype.query=function(t,e,r,n,i){return this._query(t,e,r,n,!1,i)},Er.prototype.hitTest=function(t,e,r,n,i){return this._query(t,e,r,n,!0,i)},Er.prototype.hitTestCircle=function(t,e,r,n){return this._queryCircle(t,e,r,!0,n)},Er.prototype._queryCell=function(t,e,r,n,i,o,a,s){var l=a.seenUids,u=this.boxCells[i];if(null!==u)for(var c=this.bboxes,p=0,h=u;p<h.length;p+=1){var f=h[p];if(!l.box[f]){l.box[f]=!0;var d=4*f;if(t<=c[2+d]&&e<=c[3+d]&&r>=c[0+d]&&n>=c[1+d]&&(!s||s(this.boxKeys[f]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[f],x1:c[d],y1:c[1+d],x2:c[2+d],y2:c[3+d]})}}}var m=this.circleCells[i];if(null!==m)for(var y=this.circles,g=0,v=m;g<v.length;g+=1){var _=v[g];if(!l.circle[_]){l.circle[_]=!0;var b=3*_;if(this._circleAndRectCollide(y[b],y[1+b],y[2+b],t,e,r,n)&&(!s||s(this.circleKeys[_]))){if(a.hitTest)return o.push(!0),!0;var x=y[b],w=y[1+b],E=y[2+b];o.push({key:this.circleKeys[_],x1:x-E,y1:w-E,x2:x+E,y2:w+E})}}}},Er.prototype._queryCellCircle=function(t,e,r,n,i,o,a,s){var l=a.circle,u=a.seenUids,c=this.boxCells[i];if(null!==c)for(var p=this.bboxes,h=0,f=c;h<f.length;h+=1){var d=f[h];if(!u.box[d]){u.box[d]=!0;var m=4*d;if(this._circleAndRectCollide(l.x,l.y,l.radius,p[0+m],p[1+m],p[2+m],p[3+m])&&(!s||s(this.boxKeys[d])))return o.push(!0),!0}}var y=this.circleCells[i];if(null!==y)for(var g=this.circles,v=0,_=y;v<_.length;v+=1){var b=_[v];if(!u.circle[b]){u.circle[b]=!0;var x=3*b;if(this._circlesCollide(g[x],g[1+x],g[2+x],l.x,l.y,l.radius)&&(!s||s(this.circleKeys[b])))return o.push(!0),!0}}},Er.prototype._forEachCell=function(t,e,r,n,i,o,a,s){for(var l=this._convertToXCellCoord(t),u=this._convertToYCellCoord(e),c=this._convertToXCellCoord(r),p=this._convertToYCellCoord(n),h=l;h<=c;h++)for(var f=u;f<=p;f++){var d=this.xCellCount*f+h;if(i.call(this,t,e,r,n,d,o,a,s))return}},Er.prototype._convertToXCellCoord=function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))},Er.prototype._convertToYCellCoord=function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))},Er.prototype._circlesCollide=function(t,e,r,n,i,o){var a=n-t,s=i-e,l=r+o;return a*a+s*s<l*l},Er.prototype._circleAndRectCollide=function(t,e,r,n,i,o,a){var s=(o-n)/2,l=Math.abs(t-(n+s));if(s+r<l)return!1;var u=(a-i)/2,c=Math.abs(e-(i+u));if(u+r<c)return!1;if(l<=s||c<=u)return!0;var p=l-s,h=c-u;return p*p+h*h<=r*r};var Sr=mt.properties.layout;function kr(t,e,r,n,i){var o=mt.create();return e?(mt.scale(o,o,[1/i,1/i,1]),r||mt.rotateZ(o,o,n.angle)):mt.multiply(o,n.labelPlaneMatrix,t),o}function Cr(t,e,r,n,i){if(e){var o=mt.clone(t);return mt.scale(o,o,[i,i,1]),r||mt.rotateZ(o,o,-n.angle),o}return n.glCoordMatrix}function Tr(t,e){var r=[t.x,t.y,0,1];Rr(r,r,e);var n=r[3];return{point:new mt.Point(r[0]/n,r[1]/n),signedDistanceFromCamera:n}}function Ar(t,e,r,n,i,o,a,s){var l,u,c,p,h=n?t.textSizeData:t.iconSizeData,f=mt.evaluateSizeForZoom(h,r.transform.zoom,Sr.properties[n?"text-size":"icon-size"]),d=[256/r.width*2+1,256/r.height*2+1],m=n?t.text.dynamicLayoutVertexArray:t.icon.dynamicLayoutVertexArray;m.clear();for(var y=t.lineVertexArray,g=n?t.text.placedSymbolArray:t.icon.placedSymbolArray,v=r.transform.width/r.transform.height,_=!1,b=0;b<g.length;b++){var x=g.get(b);if(x.hidden||x.writingMode===mt.WritingMode.vertical&&!_)Dr(x.numGlyphs,m);else{_=!1;var w=[x.anchorX,x.anchorY,0,1];if(mt.transformMat4(w,w,e),u=d,void 0,c=(l=w)[0]/l[3],p=l[1]/l[3],c>=-u[0]&&c<=u[0]&&p>=-u[1]&&p<=u[1]){var E=.5+w[3]/r.transform.cameraToCenterDistance*.5,S=mt.evaluateSizeForFeature(h,f,x),k=a?S*E:S/E,C=new mt.Point(x.anchorX,x.anchorY),T=Tr(C,i).point,A={},P=Mr(x,k,!1,s,e,i,o,t.glyphOffsetArray,y,m,T,C,A,v);_=P.useVertical,(P.notEnoughRoom||_||P.needsFlipping&&Mr(x,k,!0,s,e,i,o,t.glyphOffsetArray,y,m,T,C,A,v).notEnoughRoom)&&Dr(x.numGlyphs,m)}else Dr(x.numGlyphs,m)}}n?t.text.dynamicLayoutVertexBuffer.updateData(m):t.icon.dynamicLayoutVertexBuffer.updateData(m)}function Pr(t,e,r,n,i,o,a,s,l,u,c,p){var h=s.glyphStartIndex+s.numGlyphs,f=s.lineStartIndex,d=s.lineStartIndex+s.lineLength,m=e.getoffsetX(s.glyphStartIndex),y=e.getoffsetX(h-1),g=Lr(t*m,r,n,i,o,a,s.segment,f,d,l,u,c,p);if(!g)return null;var v=Lr(t*y,r,n,i,o,a,s.segment,f,d,l,u,c,p);return v?{first:g,last:v}:null}function Ir(t,e,r,n){return t===mt.WritingMode.horizontal&&Math.abs(r.y-e.y)>Math.abs(r.x-e.x)*n?{useVertical:!0}:(t===mt.WritingMode.vertical?e.y<r.y:e.x>r.x)?{needsFlipping:!0}:null}function Mr(t,e,r,n,i,o,a,s,l,u,c,p,h,f){var d,m=e/24,y=t.lineOffsetX*m,g=t.lineOffsetY*m;if(1<t.numGlyphs){var v=t.glyphStartIndex+t.numGlyphs,_=t.lineStartIndex,b=t.lineStartIndex+t.lineLength,x=Pr(m,s,y,g,r,c,p,t,l,o,h,!1);if(!x)return{notEnoughRoom:!0};var w=Tr(x.first.point,a).point,E=Tr(x.last.point,a).point;if(n&&!r){var S=Ir(t.writingMode,w,E,f);if(S)return S}d=[x.first];for(var k=t.glyphStartIndex+1;k<v-1;k++)d.push(Lr(m*s.getoffsetX(k),y,g,r,c,p,t.segment,_,b,l,o,h,!1));d.push(x.last)}else{if(n&&!r){var C=Tr(p,i).point,T=t.lineStartIndex+t.segment+1,A=new mt.Point(l.getx(T),l.gety(T)),P=Tr(A,i),I=0<P.signedDistanceFromCamera?P.point:zr(p,A,C,1,i),M=Ir(t.writingMode,C,I,f);if(M)return M}var z=Lr(m*s.getoffsetX(t.glyphStartIndex),y,g,r,c,p,t.segment,t.lineStartIndex,t.lineStartIndex+t.lineLength,l,o,h,!1);if(!z)return{notEnoughRoom:!0};d=[z]}for(var L=0,O=d;L<O.length;L+=1){var D=O[L];mt.addDynamicAttributes(u,D.point,D.angle)}return{}}function zr(t,e,r,n,i){var o=Tr(t.add(t.sub(e)._unit()),i).point,a=r.sub(o);return r.add(a._mult(n/a.mag()))}function Lr(t,e,r,n,i,o,a,s,l,u,c,p,h){var f=n?t-e:t+e,d=0<f?1:-1,m=0;n&&(d*=-1,m=Math.PI),d<0&&(m+=Math.PI);for(var y=0<d?s+a:s+a+1,g=y,v=i,_=i,b=0,x=0,w=Math.abs(f);b+x<=w;){if((y+=d)<s||l<=y)return null;if(_=v,void 0===(v=p[y])){var E=new mt.Point(u.getx(y),u.gety(y)),S=Tr(E,c);if(0<S.signedDistanceFromCamera)v=p[y]=S.point;else{var k=y-d;v=zr(0===b?o:new mt.Point(u.getx(k),u.gety(k)),E,_,w-b+1,c)}}b+=x,x=_.dist(v)}var C=(w-b)/x,T=v.sub(_),A=T.mult(C)._add(_);return A._add(T._unit()._perp()._mult(r*d)),{point:A,angle:m+Math.atan2(v.y-_.y,v.x-_.x),tileDistance:h?{prevTileDistance:y-d===g?0:u.gettileUnitDistanceFromAnchor(y-d),lastSegmentViewportDistance:w-b}:null}}var Or=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Dr(t,e){for(var r=0;r<t;r++){var n=e.length;e.resize(n+4),e.float32.set(Or,3*n)}}function Rr(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[4]*i+r[12],t[1]=r[1]*n+r[5]*i+r[13],t[3]=r[3]*n+r[7]*i+r[15],t}function Fr(t,e,r){void 0===e&&(e=new Er(t.width+200,t.height+200,25)),void 0===r&&(r=new Er(t.width+200,t.height+200,25)),this.transform=t,this.grid=e,this.ignoredGrid=r,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+100,this.screenBottomBoundary=t.height+100,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200}function Br(t,e,r){t[e+4]=r?1:0}function jr(t,e,r){return e*(mt.EXTENT/(t.tileSize*Math.pow(2,r-t.tileID.overscaledZ)))}Fr.prototype.placeCollisionBox=function(t,e,r,n,i){var o=this.projectAndGetPerspectiveRatio(n,t.anchorPointX,t.anchorPointY),a=r*o.perspectiveRatio,s=t.x1*a+o.point.x,l=t.y1*a+o.point.y,u=t.x2*a+o.point.x,c=t.y2*a+o.point.y;return!this.isInsideGrid(s,l,u,c)||!e&&this.grid.hitTest(s,l,u,c,i)?{box:[],offscreen:!1}:{box:[s,l,u,c],offscreen:this.isOffscreen(s,l,u,c)}},Fr.prototype.approximateTileDistance=function(t,e,r,n,i){var o=i?1:n/this.pitchfactor,a=t.lastSegmentViewportDistance*r;return t.prevTileDistance+a+(o-1)*a*Math.abs(Math.sin(e))},Fr.prototype.placeCollisionCircles=function(t,e,r,n,i,o,a,s,l,u,c,p,h){var f=[],d=this.projectAnchor(l,i.anchorX,i.anchorY),m=s/24,y=i.lineOffsetX*s,g=i.lineOffsetY*s,v=new mt.Point(i.anchorX,i.anchorY),_=Pr(m,a,y,g,!1,Tr(v,u).point,v,i,o,u,{},!0),b=!1,x=!1,w=!0,E=d.perspectiveRatio*n,S=1/(n*r),k=0,C=0;_&&(k=this.approximateTileDistance(_.first.tileDistance,_.first.angle,S,d.cameraDistance,p),C=this.approximateTileDistance(_.last.tileDistance,_.last.angle,S,d.cameraDistance,p));for(var T=0;T<t.length;T+=5){var A=t[T],P=t[T+1],I=t[T+2],M=t[T+3];if(!_||M<-k||C<M)Br(t,T,!1);else{var z=this.projectPoint(l,A,P),L=I*E;if(0<f.length){var O=z.x-f[f.length-4],D=z.y-f[f.length-3];if(O*O+D*D<L*L*2&&T+8<t.length){var R=t[T+8];if(-k<R&&R<C){Br(t,T,!1);continue}}}var F=T/5;f.push(z.x,z.y,L,F),Br(t,T,!0);var B=z.x-L,j=z.y-L,N=z.x+L,U=z.y+L;if(w=w&&this.isOffscreen(B,j,N,U),x=x||this.isInsideGrid(B,j,N,U),!e&&this.grid.hitTestCircle(z.x,z.y,L,h)){if(!c)return{circles:[],offscreen:!1};b=!0}}}return{circles:b||!x?[]:f,offscreen:w}},Fr.prototype.queryRenderedSymbols=function(t){if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var e=[],r=1/0,n=1/0,i=-1/0,o=-1/0,a=0,s=t;a<s.length;a+=1){var l=s[a],u=new mt.Point(l.x+100,l.y+100);r=Math.min(r,u.x),n=Math.min(n,u.y),i=Math.max(i,u.x),o=Math.max(o,u.y),e.push(u)}for(var c={},p={},h=0,f=this.grid.query(r,n,i,o).concat(this.ignoredGrid.query(r,n,i,o));h<f.length;h+=1){var d=f[h],m=d.key;if(void 0===c[m.bucketInstanceId]&&(c[m.bucketInstanceId]={}),!c[m.bucketInstanceId][m.featureIndex]){var y=[new mt.Point(d.x1,d.y1),new mt.Point(d.x2,d.y1),new mt.Point(d.x2,d.y2),new mt.Point(d.x1,d.y2)];mt.polygonIntersectsPolygon(e,y)&&(c[m.bucketInstanceId][m.featureIndex]=!0,void 0===p[m.bucketInstanceId]&&(p[m.bucketInstanceId]=[]),p[m.bucketInstanceId].push(m.featureIndex))}}return p},Fr.prototype.insertCollisionBox=function(t,e,r,n,i){var o={bucketInstanceId:r,featureIndex:n,collisionGroupID:i};(e?this.ignoredGrid:this.grid).insert(o,t[0],t[1],t[2],t[3])},Fr.prototype.insertCollisionCircles=function(t,e,r,n,i){for(var o=e?this.ignoredGrid:this.grid,a={bucketInstanceId:r,featureIndex:n,collisionGroupID:i},s=0;s<t.length;s+=4)o.insertCircle(a,t[s],t[s+1],t[s+2])},Fr.prototype.projectAnchor=function(t,e,r){var n=[e,r,0,1];return Rr(n,n,t),{perspectiveRatio:.5+this.transform.cameraToCenterDistance/n[3]*.5,cameraDistance:n[3]}},Fr.prototype.projectPoint=function(t,e,r){var n=[e,r,0,1];return Rr(n,n,t),new mt.Point((n[0]/n[3]+1)/2*this.transform.width+100,(-n[1]/n[3]+1)/2*this.transform.height+100)},Fr.prototype.projectAndGetPerspectiveRatio=function(t,e,r){var n=[e,r,0,1];return Rr(n,n,t),{point:new mt.Point((n[0]/n[3]+1)/2*this.transform.width+100,(-n[1]/n[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/n[3]*.5}},Fr.prototype.isOffscreen=function(t,e,r,n){return r<100||t>=this.screenRightBoundary||n<100||e>this.screenBottomBoundary},Fr.prototype.isInsideGrid=function(t,e,r,n){return 0<=r&&t<this.gridRightBoundary&&0<=n&&e<this.gridBottomBoundary};function Nr(t,e,r,n){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):n&&r?1:0,this.placed=r}Nr.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};function Ur(t,e,r,n,i){this.text=new Nr(t?t.text:null,e,r,i),this.icon=new Nr(t?t.icon:null,e,n,i)}Ur.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};function Vr(t,e,r){this.text=t,this.icon=e,this.skipFade=r}function qr(t,e,r,n,i){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=r,this.bucketIndex=n,this.tileID=i}function Zr(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}function Gr(t,e,r,n,i){var o=mt.getAnchorAlignment(t),a=-(o.horizontalAlign-.5)*e,s=-(o.verticalAlign-.5)*r,l=mt.evaluateRadialOffset(t,n);return new mt.Point(a+l[0]*i,s+l[1]*i)}Zr.prototype.get=function(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){var e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:function(t){return t.collisionGroupID===e}}}return this.collisionGroups[t]};function Wr(t,e,r,n){this.transform=t.clone(),this.collisionIndex=new Fr(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=e,this.retainedQueryData={},this.collisionGroups=new Zr(r),(this.prevPlacement=n)&&(n.prevPlacement=void 0)}function Hr(t,e,r,n,i){t.emplaceBack(e?1:0,r?1:0,n||0,i||0),t.emplaceBack(e?1:0,r?1:0,n||0,i||0),t.emplaceBack(e?1:0,r?1:0,n||0,i||0),t.emplaceBack(e?1:0,r?1:0,n||0,i||0)}Wr.prototype.placeLayerTile=function(t,e,r,n){var i=e.getBucket(t),o=e.latestFeatureIndex;if(i&&o&&t.id===i.layerIds[0]){var a=e.collisionBoxArray,s=i.layers[0].layout,l=Math.pow(2,this.transform.zoom-e.tileID.overscaledZ),u=e.tileSize/mt.EXTENT,c=this.transform.calculatePosMatrix(e.tileID.toUnwrapped()),p=kr(c,"map"===s.get("text-pitch-alignment"),"map"===s.get("text-rotation-alignment"),this.transform,jr(e,1,this.transform.zoom)),h=kr(c,"map"===s.get("icon-pitch-alignment"),"map"===s.get("icon-rotation-alignment"),this.transform,jr(e,1,this.transform.zoom));this.retainedQueryData[i.bucketInstanceId]=new qr(i.bucketInstanceId,o,i.sourceLayerIndex,i.index,e.tileID),this.placeLayerBucket(i,c,p,h,l,u,r,e.holdingForFade(),n,a)}},Wr.prototype.attemptAnchorPlacement=function(t,e,r,n,i,o,a,s,l,u,c,p,h,f){var d,m,y,g,v,_,b,x,w,E,S,k,C,T,A=Gr(t,r,n,i,o),P=this.collisionIndex.placeCollisionBox((m=e,y=A.x,g=A.y,v=a,_=s,b=this.transform.angle,x=m.x1,w=m.x2,E=m.y1,S=m.y2,k=m.anchorPointX,C=m.anchorPointY,T=new mt.Point(y,g),v&&T._rotate(_?b:-b),{x1:x+T.x,y1:E+T.y,x2:w+T.x,y2:S+T.y,anchorPointX:k,anchorPointY:C}),p,l,u,c.predicate);if(0<P.box.length)return this.prevPlacement&&this.prevPlacement.variableOffsets[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID].text&&(d=this.prevPlacement.variableOffsets[h.crossTileID].anchor),this.variableOffsets[h.crossTileID]={radialOffset:i,width:r,height:n,anchor:t,textBoxScale:o,prevAnchor:d},this.markUsedJustification(f,t,h),P},Wr.prototype.placeLayerBucket=function(t,e,r,n,i,o,a,s,l,u){var c=t.layers[0].layout,p=mt.evaluateSizeForZoom(t.textSizeData,this.transform.zoom,mt.properties.layout.properties["text-size"]),h=c.get("text-optional"),f=c.get("icon-optional"),d=c.get("text-allow-overlap"),m=c.get("icon-allow-overlap"),y=d&&(m||!t.hasIconData()||f),g=m&&(d||!t.hasTextData()||h),v=this.collisionGroups.get(t.sourceID),_="map"===c.get("text-rotation-alignment"),b="map"===c.get("text-pitch-alignment");!t.collisionArrays&&u&&t.deserializeCollisionBoxes(u);for(var x=0;x<t.symbolInstances.length;x++){var w=t.symbolInstances.get(x);if(!l[w.crossTileID]){if(s){this.placements[w.crossTileID]=new Vr(!1,!1,!1);continue}var E=!1,S=!1,k=!0,C=null,T=null,A=null,P=0,I=0,M=t.collisionArrays[x];M.textFeatureIndex&&(P=M.textFeatureIndex);var z=M.textBox;if(z)if(c.get("text-variable-anchor")){var L=z.x2-z.x1,O=z.y2-z.y1,D=w.textBoxScale,R=c.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[w.crossTileID]){var F=this.prevPlacement.variableOffsets[w.crossTileID];R[0]!==F.anchor&&(R=R.filter(function(t){return t!==F.anchor})).unshift(F.anchor)}for(var B=0,j=R;B<j.length;B+=1){var N=j[B];if(C=this.attemptAnchorPlacement(N,z,L,O,w.radialTextOffset,D,_,b,o,e,v,d,w,t)){E=!0;break}}if(!this.variableOffsets[w.crossTileID]&&this.prevPlacement){var U=this.prevPlacement.variableOffsets[w.crossTileID];U&&(this.variableOffsets[w.crossTileID]=U,this.markUsedJustification(t,U.anchor,w))}}else E=0<(C=this.collisionIndex.placeCollisionBox(z,c.get("text-allow-overlap"),o,e,v.predicate)).box.length;k=C&&C.offscreen;var V=M.textCircles;if(V){var q=t.text.placedSymbolArray.get(w.centerJustifiedTextSymbolIndex),Z=mt.evaluateSizeForFeature(t.textSizeData,p,q);T=this.collisionIndex.placeCollisionCircles(V,c.get("text-allow-overlap"),i,o,q,t.lineVertexArray,t.glyphOffsetArray,Z,e,r,a,b,v.predicate),E=c.get("text-allow-overlap")||0<T.circles.length,k=k&&T.offscreen}M.iconFeatureIndex&&(I=M.iconFeatureIndex),M.iconBox&&(S=0<(A=this.collisionIndex.placeCollisionBox(M.iconBox,c.get("icon-allow-overlap"),o,e,v.predicate)).box.length,k=k&&A.offscreen);var G=h||0===w.numHorizontalGlyphVertices&&0===w.numVerticalGlyphVertices,W=f||0===w.numIconVertices;G||W?W?G||(S=S&&E):E=S&&E:S=E=S&&E,E&&C&&this.collisionIndex.insertCollisionBox(C.box,c.get("text-ignore-placement"),t.bucketInstanceId,P,v.ID),S&&A&&this.collisionIndex.insertCollisionBox(A.box,c.get("icon-ignore-placement"),t.bucketInstanceId,I,v.ID),E&&T&&this.collisionIndex.insertCollisionCircles(T.circles,c.get("text-ignore-placement"),t.bucketInstanceId,P,v.ID),this.placements[w.crossTileID]=new Vr(E||y,S||g,k||t.justReloaded),l[w.crossTileID]=!0}}t.justReloaded=!1},Wr.prototype.markUsedJustification=function(t,e,r){var n={left:r.leftJustifiedTextSymbolIndex,center:r.centerJustifiedTextSymbolIndex,right:r.rightJustifiedTextSymbolIndex},i=n[mt.getAnchorJustification(e)];for(var o in n){var a=n[o];0<=a&&(t.text.placedSymbolArray.get(a).crossTileID=0<=i&&a!==i?0:r.crossTileID)}},Wr.prototype.commit=function(t){this.commitTime=t;var e=this.prevPlacement,r=!1,n=e&&0!==this.fadeDuration?(this.commitTime-e.commitTime)/this.fadeDuration:1,i=e?e.opacities:{},o=e?e.variableOffsets:{};for(var a in this.placements){var s=this.placements[a],l=i[a];r=l?(this.opacities[a]=new Ur(l,n,s.text,s.icon),r||s.text!==l.text.placed||s.icon!==l.icon.placed):(this.opacities[a]=new Ur(null,n,s.text,s.icon,s.skipFade),r||s.text||s.icon)}for(var u in i){var c=i[u];if(!this.opacities[u]){var p=new Ur(c,n,!1,!1);p.isHidden()||(this.opacities[u]=p,r=r||c.text.placed||c.icon.placed)}}for(var h in o)this.variableOffsets[h]||!this.opacities[h]||this.opacities[h].isHidden()||(this.variableOffsets[h]=o[h]);r?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=e?e.lastPlacementChangeTime:t)},Wr.prototype.updateLayerOpacities=function(t,e){for(var r={},n=0,i=e;n<i.length;n+=1){var o=i[n],a=o.getBucket(t);a&&o.latestFeatureIndex&&t.id===a.layerIds[0]&&this.updateBucketOpacities(a,r,o.collisionBoxArray)}},Wr.prototype.updateBucketOpacities=function(e,t,r){e.hasTextData()&&e.text.opacityVertexArray.clear(),e.hasIconData()&&e.icon.opacityVertexArray.clear(),e.hasCollisionBoxData()&&e.collisionBox.collisionVertexArray.clear(),e.hasCollisionCircleData()&&e.collisionCircle.collisionVertexArray.clear();var n=e.layers[0].layout,i=new Ur(null,0,!1,!1,!0),o=n.get("text-allow-overlap"),a=n.get("icon-allow-overlap"),s=n.get("text-variable-anchor"),l="map"===n.get("text-rotation-alignment"),u="map"===n.get("text-pitch-alignment"),c=new Ur(null,0,o&&(a||!e.hasIconData()||n.get("icon-optional")),a&&(o||!e.hasTextData()||n.get("text-optional")),!0);!e.collisionArrays&&r&&(e.hasCollisionBoxData()||e.hasCollisionCircleData())&&e.deserializeCollisionBoxes(r);for(var p=0;p<e.symbolInstances.length;p++){var h=e.symbolInstances.get(p),f=h.numHorizontalGlyphVertices,d=h.numVerticalGlyphVertices,m=h.crossTileID,y=t[m],g=this.opacities[m];y?g=i:g||(g=c,this.opacities[m]=g),t[m]=!0;var v=0<f||0<d,_=0<h.numIconVertices;if(v){for(var b=en(g.text),x=(f+d)/4,w=0;w<x;w++)e.text.opacityVertexArray.emplaceBack(b);var E=g.text.isHidden()?1:0;[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex,h.verticalPlacedTextSymbolIndex].forEach(function(t){0<=t&&(e.text.placedSymbolArray.get(t).hidden=E)});var S=this.variableOffsets[h.crossTileID];S&&this.markUsedJustification(e,S.anchor,h)}if(_){for(var k=en(g.icon),C=0;C<h.numIconVertices/4;C++)e.icon.opacityVertexArray.emplaceBack(k);e.icon.placedSymbolArray.get(p).hidden=g.icon.isHidden()}if(e.hasCollisionBoxData()||e.hasCollisionCircleData()){var T=e.collisionArrays[p];if(T){if(T.textBox){var A=new mt.Point(0,0),P=!0;if(s){var I=this.variableOffsets[m];I?(A=Gr(I.anchor,I.width,I.height,I.radialOffset,I.textBoxScale),l&&A._rotate(u?this.transform.angle:-this.transform.angle)):P=!1}Hr(e.collisionBox.collisionVertexArray,g.text.placed,!P,A.x,A.y)}T.iconBox&&Hr(e.collisionBox.collisionVertexArray,g.icon.placed,!1);var M=T.textCircles;if(M&&e.hasCollisionCircleData())for(var z=0;z<M.length;z+=5){var L=y||0===M[z+4];Hr(e.collisionCircle.collisionVertexArray,g.text.placed,L)}}}}e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasCollisionBoxData()&&e.collisionBox.collisionVertexBuffer&&e.collisionBox.collisionVertexBuffer.updateData(e.collisionBox.collisionVertexArray),e.hasCollisionCircleData()&&e.collisionCircle.collisionVertexBuffer&&e.collisionCircle.collisionVertexBuffer.updateData(e.collisionCircle.collisionVertexArray)},Wr.prototype.symbolFadeChange=function(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration},Wr.prototype.hasTransitions=function(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration},Wr.prototype.stillRecent=function(t){return this.commitTime+this.fadeDuration>t},Wr.prototype.setStale=function(){this.stale=!0};var Xr=Math.pow(2,25),$r=Math.pow(2,24),Kr=Math.pow(2,17),Jr=Math.pow(2,16),Yr=Math.pow(2,9),Qr=Math.pow(2,8),tn=Math.pow(2,1);function en(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;var e=t.placed?1:0,r=Math.floor(127*t.opacity);return r*Xr+e*$r+r*Kr+e*Jr+r*Yr+e*Qr+r*tn+e}function rn(){this._currentTileIndex=0,this._seenCrossTileIDs={}}rn.prototype.continuePlacement=function(t,e,r,n,i){for(;this._currentTileIndex<t.length;){var o=t[this._currentTileIndex];if(e.placeLayerTile(n,o,r,this._seenCrossTileIDs),this._currentTileIndex++,i())return!0}};function nn(t,e,r,n,i,o,a){this.placement=new Wr(t,i,o,a),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=r,this._showCollisionBoxes=n,this._done=!1}nn.prototype.isDone=function(){return this._done},nn.prototype.continuePlacement=function(t,e,r){for(var n=this,i=mt.browser.now(),o=function(){var t=mt.browser.now()-i;return!n._forceFullPlacement&&2<t};0<=this._currentPlacementIndex;){var a=e[t[this._currentPlacementIndex]],s=this.placement.collisionIndex.transform.zoom;if("symbol"===a.type&&(!a.minzoom||a.minzoom<=s)&&(!a.maxzoom||a.maxzoom>s)){if(this._inProgressLayer||(this._inProgressLayer=new rn),this._inProgressLayer.continuePlacement(r[a.source],this.placement,this._showCollisionBoxes,a,o))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},nn.prototype.commit=function(t){return this.placement.commit(t),this.placement};function on(t,e,r){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=r;for(var n=0;n<e.length;n++){var i=e.get(n),o=i.key;this.indexedSymbolInstances[o]||(this.indexedSymbolInstances[o]=[]),this.indexedSymbolInstances[o].push({crossTileID:i.crossTileID,coord:this.getScaledCoordinates(i,t)})}}var an=512/mt.EXTENT/2;on.prototype.getScaledCoordinates=function(t,e){var r=e.canonical.z-this.tileID.canonical.z,n=an/Math.pow(2,r);return{x:Math.floor((e.canonical.x*mt.EXTENT+t.anchorX)*n),y:Math.floor((e.canonical.y*mt.EXTENT+t.anchorY)*n)}},on.prototype.findMatches=function(t,e,r){for(var n=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z),i=0;i<t.length;i++){var o=t.get(i);if(!o.crossTileID){var a=this.indexedSymbolInstances[o.key];if(a)for(var s=this.getScaledCoordinates(o,e),l=0,u=a;l<u.length;l+=1){var c=u[l];if(Math.abs(c.coord.x-s.x)<=n&&Math.abs(c.coord.y-s.y)<=n&&!r[c.crossTileID]){r[c.crossTileID]=!0,o.crossTileID=c.crossTileID;break}}}}};function sn(){this.maxCrossTileID=0}sn.prototype.generate=function(){return++this.maxCrossTileID};function ln(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}ln.prototype.handleWrapJump=function(t){var e=Math.round((t-this.lng)/360);if(0!==e)for(var r in this.indexes){var n=this.indexes[r],i={};for(var o in n){var a=n[o];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+e),i[a.tileID.key]=a}this.indexes[r]=i}this.lng=t},ln.prototype.addBucket=function(t,e,r){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(var n=0;n<e.symbolInstances.length;n++)e.symbolInstances.get(n).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});var i=this.usedCrossTileIDs[t.overscaledZ];for(var o in this.indexes){var a=this.indexes[o];if(Number(o)>t.overscaledZ)for(var s in a){var l=a[s];l.tileID.isChildOf(t)&&l.findMatches(e.symbolInstances,t,i)}else{var u=a[t.scaledTo(Number(o)).key];u&&u.findMatches(e.symbolInstances,t,i)}}for(var c=0;c<e.symbolInstances.length;c++){var p=e.symbolInstances.get(c);p.crossTileID||(p.crossTileID=r.generate(),i[p.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new on(t,e.symbolInstances,e.bucketInstanceId),!0},ln.prototype.removeBucketCrossTileIDs=function(t,e){for(var r in e.indexedSymbolInstances)for(var n=0,i=e.indexedSymbolInstances[r];n<i.length;n+=1){var o=i[n];delete this.usedCrossTileIDs[t][o.crossTileID]}},ln.prototype.removeStaleBuckets=function(t){var e=!1;for(var r in this.indexes){var n=this.indexes[r];for(var i in n)t[n[i].bucketInstanceId]||(this.removeBucketCrossTileIDs(r,n[i]),delete n[i],e=!0)}return e};function un(){this.layerIndexes={},this.crossTileIDs=new sn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}un.prototype.addLayer=function(t,e,r){var n=this.layerIndexes[t.id];void 0===n&&(n=this.layerIndexes[t.id]=new ln);var i=!1,o={};n.handleWrapJump(r);for(var a=0,s=e;a<s.length;a+=1){var l=s[a],u=l.getBucket(t);u&&t.id===u.layerIds[0]&&(u.bucketInstanceId||(u.bucketInstanceId=++this.maxBucketInstanceId),n.addBucket(l.tileID,u,this.crossTileIDs)&&(i=!0),o[u.bucketInstanceId]=!0)}return n.removeStaleBuckets(o)&&(i=!0),i},un.prototype.pruneUnusedLayers=function(t){var e={};for(var r in t.forEach(function(t){e[t]=!0}),this.layerIndexes)e[r]||delete this.layerIndexes[r]};function cn(t,e){return mt.emitValidationErrors(t,e&&e.filter(function(t){return"source.canvas"!==t.identifier}))}var pn,hn=mt.pick(mr,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),fn=mt.pick(mr,["setCenter","setZoom","setBearing","setPitch"]),dn=((pn=mt.Evented)&&(mn.__proto__=pn),((mn.prototype=Object.create(pn&&pn.prototype)).constructor=mn).prototype.loadURL=function(t,e){var r=this;void 0===e&&(e={}),this.fire(new mt.Event("dataloading",{dataType:"style"}));var n="boolean"==typeof e.validate?e.validate:!mt.isMapboxURL(t);t=mt.normalizeStyleURL(t,e.accessToken);var i=this.map._transformRequest(t,mt.ResourceType.Style);this._request=mt.getJSON(i,function(t,e){r._request=null,t?r.fire(new mt.ErrorEvent(t)):e&&r._load(e,n)})},mn.prototype.loadJSON=function(t,e){var r=this;void 0===e&&(e={}),this.fire(new mt.Event("dataloading",{dataType:"style"})),this._request=mt.browser.frame(function(){r._request=null,r._load(t,!1!==e.validate)})},mn.prototype._load=function(t,e){var r,n,p,h,f,d,i,o,a,s=this;if(!e||!cn(this,mt.validateStyle(t))){for(var l in this._loaded=!0,(this.stylesheet=t).sources)this.addSource(l,t.sources[l],{validate:!1});t.sprite?this._spriteRequest=(r=t.sprite,n=this.map._transformRequest,p=function(t,e){if(s._spriteRequest=null,t)s.fire(new mt.ErrorEvent(t));else if(e)for(var r in e)s.imageManager.addImage(r,e[r]);s.imageManager.setLoaded(!0),s.fire(new mt.Event("data",{dataType:"style"}))},i=1<mt.browser.devicePixelRatio?"@2x":"",o=mt.getJSON(n(mt.normalizeSpriteURL(r,i,".json"),mt.ResourceType.SpriteJSON),function(t,e){o=null,d||(d=t,h=e,g())}),a=mt.getImage(n(mt.normalizeSpriteURL(r,i,".png"),mt.ResourceType.SpriteImage),function(t,e){a=null,d||(d=t,f=e,g())}),{cancel:function(){o&&(o.cancel(),o=null),a&&(a.cancel(),a=null)}}):this.imageManager.setLoaded(!0),this.glyphManager.setURL(t.glyphs);var u=dr(this.stylesheet.layers);this._order=u.map(function(t){return t.id}),this._layers={};for(var c=0,m=u;c<m.length;c+=1){var y=m[c];(y=mt.createStyleLayer(y)).setEventedParent(this,{layer:{id:y.id}}),this._layers[y.id]=y}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new E(this.stylesheet.light),this.fire(new mt.Event("data",{dataType:"style"})),this.fire(new mt.Event("style.load"))}function g(){if(d)p(d);else if(h&&f){var t=mt.browser.getImageData(f),e={};for(var r in h){var n=h[r],i=n.width,o=n.height,a=n.x,s=n.y,l=n.sdf,u=n.pixelRatio,c=new mt.RGBAImage({width:i,height:o});mt.RGBAImage.copy(t,c,{x:a,y:s},{x:0,y:0},{width:i,height:o}),e[r]={data:c,pixelRatio:u,sdf:l}}p(null,e)}}},mn.prototype._validateLayer=function(t){var e=this.sourceCaches[t.source];if(e){var r=t.sourceLayer;if(r){var n=e.getSource();("geojson"===n.type||n.vectorLayerIds&&-1===n.vectorLayerIds.indexOf(r))&&this.fire(new mt.ErrorEvent(new Error('Source layer "'+r+'" does not exist on source "'+n.id+'" as specified by style layer "'+t.id+'"')))}}},mn.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()},mn.prototype._serializeLayers=function(t){for(var e=[],r=0,n=t;r<n.length;r+=1){var i=n[r],o=this._layers[i];"custom"!==o.type&&e.push(o.serialize())}return e},mn.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(var e in this._layers)if(this._layers[e].hasTransition())return!0;return!1},mn.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},mn.prototype.update=function(t){if(this._loaded){var e=this._changed;if(this._changed){var r=Object.keys(this._updatedLayers),n=Object.keys(this._removedLayers);for(var i in(r.length||n.length)&&this._updateWorkerLayers(r,n),this._updatedSources){var o=this._updatedSources[i];"reload"===o?this._reloadSource(i):"clear"===o&&this._clearSource(i)}for(var a in this._updatedPaintProps)this._layers[a].updateTransitions(t);this.light.updateTransitions(t),this._resetUpdates()}for(var s in this.sourceCaches)this.sourceCaches[s].used=!1;for(var l=0,u=this._order;l<u.length;l+=1){var c=u[l],p=this._layers[c];p.recalculate(t),!p.isHidden(t.zoom)&&p.source&&(this.sourceCaches[p.source].used=!0)}this.light.recalculate(t),this.z=t.zoom,e&&this.fire(new mt.Event("data",{dataType:"style"}))}},mn.prototype._updateWorkerLayers=function(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})},mn.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={}},mn.prototype.setState=function(t){var e=this;if(this._checkLoaded(),cn(this,mt.validateStyle(t)))return!1;(t=mt.clone$1(t)).layers=dr(t.layers);var r=wr(this.serialize(),t).filter(function(t){return!(t.command in fn)});if(0===r.length)return!1;var n=r.filter(function(t){return!(t.command in hn)});if(0<n.length)throw new Error("Unimplemented: "+n.map(function(t){return t.command}).join(", ")+".");return r.forEach(function(t){"setTransition"!==t.command&&e[t.command].apply(e,t.args)}),this.stylesheet=t,!0},mn.prototype.addImage=function(t,e){if(this.getImage(t))return this.fire(new mt.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(t,e),this.fire(new mt.Event("data",{dataType:"style"}))},mn.prototype.updateImage=function(t,e){this.imageManager.updateImage(t,e)},mn.prototype.getImage=function(t){return this.imageManager.getImage(t)},mn.prototype.removeImage=function(t){if(!this.getImage(t))return this.fire(new mt.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(t),this.fire(new mt.Event("data",{dataType:"style"}))},mn.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},mn.prototype.addSource=function(t,e,r){var n=this;if(void 0===r&&(r={}),this._checkLoaded(),void 0!==this.sourceCaches[t])throw new Error("There is already a source with this ID");if(!e.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(e).join(", ")+".");if(!(0<=["vector","raster","geojson","video","image"].indexOf(e.type)&&this._validate(mt.validateStyle.source,"sources."+t,e,null,r))){this.map&&this.map._collectResourceTiming&&(e.collectResourceTiming=!0);var i=this.sourceCaches[t]=new or(t,e,this.dispatcher);i.style=this,i.setEventedParent(this,function(){return{isSourceLoaded:n.loaded(),source:i.serialize(),sourceId:t}}),i.onAdd(this.map),this._changed=!0}},mn.prototype.removeSource=function(t){if(this._checkLoaded(),void 0===this.sourceCaches[t])throw new Error("There is no source with this ID");for(var e in this._layers)if(this._layers[e].source===t)return this.fire(new mt.ErrorEvent(new Error('Source "'+t+'" cannot be removed while layer "'+e+'" is using it.')));var r=this.sourceCaches[t];delete this.sourceCaches[t],delete this._updatedSources[t],r.fire(new mt.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:t})),r.setEventedParent(null),r.clearTiles(),r.onRemove&&r.onRemove(this.map),this._changed=!0},mn.prototype.setGeoJSONSourceData=function(t,e){this._checkLoaded(),this.sourceCaches[t].getSource().setData(e),this._changed=!0},mn.prototype.getSource=function(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()},mn.prototype.addLayer=function(t,e,r){void 0===r&&(r={}),this._checkLoaded();var n=t.id;if(this.getLayer(n))this.fire(new mt.ErrorEvent(new Error('Layer with id "'+n+'" already exists on this map')));else{var i;if("custom"===t.type){if(cn(this,mt.validateCustomStyleLayer(t)))return;i=mt.createStyleLayer(t)}else{if("object"==typeof t.source&&(this.addSource(n,t.source),t=mt.clone$1(t),t=mt.extend(t,{source:n})),this._validate(mt.validateStyle.layer,"layers."+n,t,{arrayIndex:-1},r))return;i=mt.createStyleLayer(t),this._validateLayer(i),i.setEventedParent(this,{layer:{id:n}})}var o=e?this._order.indexOf(e):this._order.length;if(e&&-1===o)this.fire(new mt.ErrorEvent(new Error('Layer with id "'+e+'" does not exist on this map.')));else{if(this._order.splice(o,0,n),this._layerOrderChanged=!0,this._layers[n]=i,this._removedLayers[n]&&i.source&&"custom"!==i.type){var a=this._removedLayers[n];delete this._removedLayers[n],a.type!==i.type?this._updatedSources[i.source]="clear":(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause())}this._updateLayer(i),i.onAdd&&i.onAdd(this.map)}}},mn.prototype.moveLayer=function(t,e){if(this._checkLoaded(),this._changed=!0,this._layers[t]){if(t!==e){var r=this._order.indexOf(t);this._order.splice(r,1);var n=e?this._order.indexOf(e):this._order.length;e&&-1===n?this.fire(new mt.ErrorEvent(new Error('Layer with id "'+e+'" does not exist on this map.'))):(this._order.splice(n,0,t),this._layerOrderChanged=!0)}}else this.fire(new mt.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be moved.")))},mn.prototype.removeLayer=function(t){this._checkLoaded();var e=this._layers[t];if(e){e.setEventedParent(null);var r=this._order.indexOf(t);this._order.splice(r,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=e,delete this._layers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],e.onRemove&&e.onRemove(this.map)}else this.fire(new mt.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be removed.")))},mn.prototype.getLayer=function(t){return this._layers[t]},mn.prototype.setLayerZoomRange=function(t,e,r){this._checkLoaded();var n=this.getLayer(t);n?n.minzoom===e&&n.maxzoom===r||(null!=e&&(n.minzoom=e),null!=r&&(n.maxzoom=r),this._updateLayer(n)):this.fire(new mt.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot have zoom extent.")))},mn.prototype.setFilter=function(t,e,r){void 0===r&&(r={}),this._checkLoaded();var n=this.getLayer(t);if(n){if(!mt.deepEqual(n.filter,e))return null==e?(n.filter=void 0,void this._updateLayer(n)):void(this._validate(mt.validateStyle.filter,"layers."+n.id+".filter",e,null,r)||(n.filter=mt.clone$1(e),this._updateLayer(n)))}else this.fire(new mt.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be filtered.")))},mn.prototype.getFilter=function(t){return mt.clone$1(this.getLayer(t).filter)},mn.prototype.setLayoutProperty=function(t,e,r,n){void 0===n&&(n={}),this._checkLoaded();var i=this.getLayer(t);i?mt.deepEqual(i.getLayoutProperty(e),r)||(i.setLayoutProperty(e,r,n),this._updateLayer(i)):this.fire(new mt.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be styled.")))},mn.prototype.getLayoutProperty=function(t,e){var r=this.getLayer(t);if(r)return r.getLayoutProperty(e);this.fire(new mt.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style.")))},mn.prototype.setPaintProperty=function(t,e,r,n){void 0===n&&(n={}),this._checkLoaded();var i=this.getLayer(t);i?mt.deepEqual(i.getPaintProperty(e),r)||(i.setPaintProperty(e,r,n)&&this._updateLayer(i),this._changed=!0,this._updatedPaintProps[t]=!0):this.fire(new mt.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be styled.")))},mn.prototype.getPaintProperty=function(t,e){return this.getLayer(t).getPaintProperty(e)},mn.prototype.setFeatureState=function(t,e){this._checkLoaded();var r=t.source,n=t.sourceLayer,i=this.sourceCaches[r],o=parseInt(t.id,10);if(void 0!==i){var a=i.getSource().type;"geojson"===a&&n?this.fire(new mt.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==a||n?isNaN(o)||o<0?this.fire(new mt.ErrorEvent(new Error("The feature id parameter must be provided and non-negative."))):i.setFeatureState(n,o,e):this.fire(new mt.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new mt.ErrorEvent(new Error("The source '"+r+"' does not exist in the map's style.")))},mn.prototype.removeFeatureState=function(t,e){this._checkLoaded();var r=t.source,n=this.sourceCaches[r];if(void 0!==n){var i=n.getSource().type,o="vector"===i?t.sourceLayer:void 0,a=parseInt(t.id,10);"vector"!==i||o?void 0!==t.id&&isNaN(a)||a<0?this.fire(new mt.ErrorEvent(new Error("The feature id parameter must be non-negative."))):e&&"string"!=typeof t.id&&"number"!=typeof t.id?this.fire(new mt.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):n.removeFeatureState(o,a,e):this.fire(new mt.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new mt.ErrorEvent(new Error("The source '"+r+"' does not exist in the map's style.")))},mn.prototype.getFeatureState=function(t){this._checkLoaded();var e=t.source,r=t.sourceLayer,n=this.sourceCaches[e],i=parseInt(t.id,10);if(void 0!==n)if("vector"!==n.getSource().type||r){if(!(isNaN(i)||i<0))return n.getFeatureState(r,i);this.fire(new mt.ErrorEvent(new Error("The feature id parameter must be provided and non-negative.")))}else this.fire(new mt.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));else this.fire(new mt.ErrorEvent(new Error("The source '"+e+"' does not exist in the map's style.")))},mn.prototype.getTransition=function(){return mt.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},mn.prototype.serialize=function(){return mt.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:mt.mapObject(this.sourceCaches,function(t){return t.serialize()}),layers:this._serializeLayers(this._order)},function(t){return void 0!==t})},mn.prototype._updateLayer=function(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._changed=!0},mn.prototype._flattenAndSortRenderedFeatures=function(t){for(var e=this,r=function(t){return"fill-extrusion"===e._layers[t].type},n={},i=[],o=this._order.length-1;0<=o;o--){var a=this._order[o];if(r(a)){n[a]=o;for(var s=0,l=t;s<l.length;s+=1){var u=l[s][a];if(u)for(var c=0,p=u;c<p.length;c+=1){var h=p[c];i.push(h)}}}}i.sort(function(t,e){return e.intersectionZ-t.intersectionZ});for(var f=[],d=this._order.length-1;0<=d;d--){var m=this._order[d];if(r(m))for(var y=i.length-1;0<=y;y--){var g=i[y].feature;if(n[g.layer.id]<d)break;f.push(g),i.pop()}else for(var v=0,_=t;v<_.length;v+=1){var b=_[v][m];if(b)for(var x=0,w=b;x<w.length;x+=1){var E=w[x];f.push(E.feature)}}}return f},mn.prototype.queryRenderedFeatures=function(t,e,r){e&&e.filter&&this._validate(mt.validateStyle.filter,"queryRenderedFeatures.filter",e.filter);var n={};if(e&&e.layers){if(!Array.isArray(e.layers))return this.fire(new mt.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var i=0,o=e.layers;i<o.length;i+=1){var a=o[i],s=this._layers[a];if(!s)return this.fire(new mt.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be queried for features."))),[];n[s.source]=!0}}var l=[];for(var u in this.sourceCaches)e.layers&&!n[u]||l.push(K(this.sourceCaches[u],this._layers,t,e,r));return this.placement&&l.push(function(l,o,t,u,e,r){for(var c={},p=e.queryRenderedSymbols(t),n=[],i=0,a=Object.keys(p).map(Number);i<a.length;i+=1){var s=a[i];n.push(r[s])}n.sort(J);for(var h=function(){var i=d[f],t=i.featureIndex.lookupSymbolFeatures(p[i.bucketInstanceId],i.bucketIndex,i.sourceLayerIndex,u.filter,u.layers,l);for(var e in t){var r=c[e]=c[e]||[],n=t[e];n.sort(function(t,e){var r=i.featureSortOrder;if(r){var n=r.indexOf(t.featureIndex);return r.indexOf(e.featureIndex)-n}return e.featureIndex-t.featureIndex});for(var o=0,a=n;o<a.length;o+=1){var s=a[o];r.push(s)}}},f=0,d=n;f<d.length;f+=1)h();function m(i){c[i].forEach(function(t){var e=t.feature,r=l[i],n=o[r.source].getFeatureState(e.layer["source-layer"],e.id);e.source=e.layer.source,e.layer["source-layer"]&&(e.sourceLayer=e.layer["source-layer"]),e.state=n})}for(var y in c)m(y);return c}(this._layers,this.sourceCaches,t,e,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(l)},mn.prototype.querySourceFeatures=function(t,e){e&&e.filter&&this._validate(mt.validateStyle.filter,"querySourceFeatures.filter",e.filter);var r=this.sourceCaches[t];return r?function(e,t){for(var r=e.getRenderableIds().map(function(t){return e.getTileByID(t)}),n=[],i={},o=0;o<r.length;o++){var a=r[o],s=a.tileID.canonical.key;i[s]||(i[s]=!0,a.querySourceFeatures(n,t))}return n}(r,e):[]},mn.prototype.addSourceType=function(t,e,r){return mn.getSourceType(t)?r(new Error('A source type called "'+t+'" already exists.')):(mn.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},r):r(null,null))},mn.prototype.getLight=function(){return this.light.getLight()},mn.prototype.setLight=function(t,e){void 0===e&&(e={}),this._checkLoaded();var r=this.light.getLight(),n=!1;for(var i in t)if(!mt.deepEqual(t[i],r[i])){n=!0;break}if(n){var o={now:mt.browser.now(),transition:mt.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(t,e),this.light.updateTransitions(o)}},mn.prototype._validate=function(t,e,r,n,i){return void 0===i&&(i={}),(!i||!1!==i.validate)&&cn(this,t.call(mt.validateStyle,mt.extend({key:e,style:this.serialize(),value:r,styleSpec:mt.styleSpec},n)))},mn.prototype._remove=function(){for(var t in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),mt.evented.off("pluginAvailable",this._rtlTextPluginCallback),this.sourceCaches)this.sourceCaches[t].clearTiles();this.dispatcher.remove()},mn.prototype._clearSource=function(t){this.sourceCaches[t].clearTiles()},mn.prototype._reloadSource=function(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()},mn.prototype._updateSources=function(t){for(var e in this.sourceCaches)this.sourceCaches[e].update(t)},mn.prototype._generateCollisionBoxes=function(){for(var t in this.sourceCaches)this._reloadSource(t)},mn.prototype._updatePlacement=function(t,e,r,n){for(var i=!1,o=!1,a={},s=0,l=this._order;s<l.length;s+=1){var u=l[s],c=this._layers[u];if("symbol"===c.type){if(!a[c.source]){var p=this.sourceCaches[c.source];a[c.source]=p.getRenderableIds(!0).map(function(t){return p.getTileByID(t)}).sort(function(t,e){return e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)})}var h=this.crossTileSymbolIndex.addLayer(c,a[c.source],t.center.lng);i=i||h}}this.crossTileSymbolIndex.pruneUnusedLayers(this._order);var f=this._layerOrderChanged||0===r;if((f||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(mt.browser.now()))&&(this.pauseablePlacement=new nn(t,this._order,f,e,r,n,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,a),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(mt.browser.now()),o=!0),i&&this.pauseablePlacement.placement.setStale()),o||i)for(var d=0,m=this._order;d<m.length;d+=1){var y=m[d],g=this._layers[y];"symbol"===g.type&&this.placement.updateLayerOpacities(g,a[g.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(mt.browser.now())},mn.prototype._releaseSymbolFadeTiles=function(){for(var t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()},mn.prototype.getImages=function(t,e,r){this.imageManager.getImages(e.icons,r)},mn.prototype.getGlyphs=function(t,e,r){this.glyphManager.getGlyphs(e.stacks,r)},mn.prototype.getResource=function(t,e,r){return mt.makeRequest(e,r)},mn);function mn(t,e){var o=this;void 0===e&&(e={}),pn.call(this),this.map=t,this.dispatcher=new k(pr=pr||new cr,this),this.imageManager=new c,this.imageManager.setEventedParent(this),this.glyphManager=new g(t._transformRequest,e.localIdeographFontFamily),this.lineAtlas=new b(256,512),this.crossTileSymbolIndex=new un,this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new mt.ZoomHistory,this._loaded=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",mt.getReferrer());var r=this;this._rtlTextPluginCallback=mn.registerForPluginAvailability(function(t){for(var e in r.dispatcher.broadcast("loadRTLTextPlugin",t.pluginURL,t.completionCallback),r.sourceCaches)r.sourceCaches[e].reload()}),this.on("data",function(t){if("source"===t.dataType&&"metadata"===t.sourceDataType){var e=o.sourceCaches[t.sourceId];if(e){var r=e.getSource();if(r&&r.vectorLayerIds)for(var n in o._layers){var i=o._layers[n];i.source===r.id&&o._validateLayer(i)}}}})}dn.getSourceType=function(t){return H[t]},dn.setSourceType=function(t,e){H[t]=e},dn.registerForPluginAvailability=mt.registerForPluginAvailability;var yn=mt.createLayout([{name:"a_pos",type:"Int16",components:2}]),gn=Vn("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),vn=Vn("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),_n=Vn("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),bn=Vn("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvarying vec3 v_data;void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvarying vec3 v_data;void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/DEVICE_PIXEL_RATIO/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),xn=Vn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),wn=Vn("#pragma mapbox: define highp float weight\nuniform highp float u_intensity;varying vec2 v_extrude;\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nuniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;const highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),En=Vn("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Sn=Vn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),kn=Vn("uniform float u_overscale_factor;varying float v_placed;varying float v_notUsed;varying float v_radius;varying vec2 v_extrude;varying vec2 v_extrude_scale;void main() {float alpha=0.5;vec4 color=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {color=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {color*=.2;}float extrude_scale_length=length(v_extrude_scale);float extrude_length=length(v_extrude)*extrude_scale_length;float stroke_width=15.0*extrude_scale_length/u_overscale_factor;float radius=v_radius*extrude_scale_length;float distance_to_edge=abs(extrude_length-radius);float opacity_t=smoothstep(-stroke_width,0.0,-distance_to_edge);gl_FragColor=opacity_t*color;}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;varying float v_radius;varying vec2 v_extrude;varying vec2 v_extrude_scale;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);highp float padding_factor=1.2;gl_Position.xy+=a_extrude*u_extrude_scale*padding_factor*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;v_radius=abs(a_extrude.y);v_extrude=a_extrude*padding_factor;v_extrude_scale=u_extrude_scale*u_camera_to_center_distance*collision_perspective_ratio;}"),Cn=Vn("uniform highp vec4 u_color;void main() {gl_FragColor=u_color;}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Tn=Vn("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),An=Vn("#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvarying vec2 v_pos;void main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Pn=Vn("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec4 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),In=Vn("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec4 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileZoomRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),Mn=Vn("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),zn=Vn("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec4 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),Ln=Vn("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;return (data.r+data.g*256.0+data.b*256.0*256.0)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),On=Vn("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Dn=Vn("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvarying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/DEVICE_PIXEL_RATIO)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define ANTIALIASING 1.0/DEVICE_PIXEL_RATIO/2.0\n#define scale 0.015873016\nattribute vec4 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_gl_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nvec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=a_pos_normal.xy;mediump vec2 normal=a_pos_normal.zw;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_gl_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),Rn=Vn("#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nuniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;void main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/DEVICE_PIXEL_RATIO)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define MAX_LINE_DISTANCE 32767.0\n#define ANTIALIASING 1.0/DEVICE_PIXEL_RATIO/2.0\n#define scale 0.015873016\nattribute vec4 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_gl_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nvec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=a_pos_normal.xy;mediump vec2 normal=a_pos_normal.zw;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_gl_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),Fn=Vn("uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec4 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileZoomRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/DEVICE_PIXEL_RATIO)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x,1.0);float x_b=mod(v_linesofar/pattern_size_b.x,1.0);float y_a=0.5+(v_normal.y*clamp(v_width2.s,0.0,(pattern_size_a.y+2.0)/2.0)/pattern_size_a.y);float y_b=0.5+(v_normal.y*clamp(v_width2.s,0.0,(pattern_size_b.y+2.0)/2.0)/pattern_size_b.y);vec2 pos_a=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,vec2(x_a,y_a));vec2 pos_b=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,vec2(x_b,y_b));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\n#define ANTIALIASING 1.0/DEVICE_PIXEL_RATIO/2.0\nattribute vec4 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_gl_units_to_pixels;uniform mediump float u_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=a_pos_normal.xy;mediump vec2 normal=a_pos_normal.zw;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_gl_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);}"),Bn=Vn("uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/DEVICE_PIXEL_RATIO)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\n#define ANTIALIASING 1.0/DEVICE_PIXEL_RATIO/2.0\nattribute vec4 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_gl_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nvec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=a_pos_normal.xy;mediump vec2 normal=a_pos_normal.zw;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_gl_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),jn=Vn("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Nn=Vn("uniform sampler2D u_texture;\n#pragma mapbox: define lowp float opacity\nvarying vec2 v_tex;varying float v_fade_opacity;void main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;\n#pragma mapbox: define lowp float opacity\nuniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_gl_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;void main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size[0],a_size[1],u_size_t)/256.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size[0]/256.0;} else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {size=u_size;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_gl_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),Un=Vn("#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105/DEVICE_PIXEL_RATIO\nuniform bool u_is_halo;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nuniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;void main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nuniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_gl_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;void main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size[0],a_size[1],u_size_t)/256.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size[0]/256.0;} else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {size=u_size;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_gl_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=vec2(tex.x,tex.y);v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}");function Vn(t,e){var r=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,s={};return{fragmentSource:t=t.replace(r,function(t,e,r,n,i){return s[i]=!0,"define"===e?"\n#ifndef HAS_UNIFORM_u_"+i+"\nvarying "+r+" "+n+" "+i+";\n#else\nuniform "+r+" "+n+" u_"+i+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+i+"\n    "+r+" "+n+" "+i+" = u_"+i+";\n#endif\n"}),vertexSource:e=e.replace(r,function(t,e,r,n,i){var o="float"===n?"vec2":"vec4",a=i.match(/color/)?"color":o;return s[i]?"define"===e?"\n#ifndef HAS_UNIFORM_u_"+i+"\nuniform lowp float a_"+i+"_t;\nattribute "+r+" "+o+" a_"+i+";\nvarying "+r+" "+n+" "+i+";\n#else\nuniform "+r+" "+n+" u_"+i+";\n#endif\n":"vec4"==a?"\n#ifndef HAS_UNIFORM_u_"+i+"\n    "+i+" = a_"+i+";\n#else\n    "+r+" "+n+" "+i+" = u_"+i+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+i+"\n    "+i+" = unpack_mix_"+a+"(a_"+i+", a_"+i+"_t);\n#else\n    "+r+" "+n+" "+i+" = u_"+i+";\n#endif\n":"define"===e?"\n#ifndef HAS_UNIFORM_u_"+i+"\nuniform lowp float a_"+i+"_t;\nattribute "+r+" "+o+" a_"+i+";\n#else\nuniform "+r+" "+n+" u_"+i+";\n#endif\n":"vec4"==a?"\n#ifndef HAS_UNIFORM_u_"+i+"\n    "+r+" "+n+" "+i+" = a_"+i+";\n#else\n    "+r+" "+n+" "+i+" = u_"+i+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+i+"\n    "+r+" "+n+" "+i+" = unpack_mix_"+a+"(a_"+i+", a_"+i+"_t);\n#else\n    "+r+" "+n+" "+i+" = u_"+i+";\n#endif\n"})}}function qn(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}var Zn=Object.freeze({prelude:gn,background:vn,backgroundPattern:_n,circle:bn,clippingMask:xn,heatmap:wn,heatmapTexture:En,collisionBox:Sn,collisionCircle:kn,debug:Cn,fill:Tn,fillOutline:An,fillOutlinePattern:Pn,fillPattern:In,fillExtrusion:Mn,fillExtrusionPattern:zn,hillshadePrepare:Ln,hillshade:On,line:Dn,lineGradient:Rn,linePattern:Fn,lineSDF:Bn,raster:jn,symbolIcon:Nn,symbolSDF:Un});qn.prototype.bind=function(t,e,r,n,i,o,a,s){this.context=t;for(var l=this.boundPaintVertexBuffers.length!==n.length,u=0;!l&&u<n.length;u++)this.boundPaintVertexBuffers[u]!==n[u]&&(l=!0);var c=!this.vao||this.boundProgram!==e||this.boundLayoutVertexBuffer!==r||l||this.boundIndexBuffer!==i||this.boundVertexOffset!==o||this.boundDynamicVertexBuffer!==a||this.boundDynamicVertexBuffer2!==s;!t.extVertexArrayObject||c?this.freshBind(e,r,n,i,o,a,s):(t.bindVertexArrayOES.set(this.vao),a&&a.bind(),i&&i.dynamicDraw&&i.bind(),s&&s.bind())},qn.prototype.freshBind=function(t,e,r,n,i,o,a){var s,l=t.numAttributes,u=this.context,c=u.gl;if(u.extVertexArrayObject)this.vao&&this.destroy(),this.vao=u.extVertexArrayObject.createVertexArrayOES(),u.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=r,this.boundIndexBuffer=n,this.boundVertexOffset=i,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a;else{s=u.currentNumAttributes||0;for(var p=l;p<s;p++)c.disableVertexAttribArray(p)}e.enableAttributes(c,t);for(var h=0,f=r;h<f.length;h+=1)f[h].enableAttributes(c,t);o&&o.enableAttributes(c,t),a&&a.enableAttributes(c,t),e.bind(),e.setVertexAttribPointers(c,t,i);for(var d=0,m=r;d<m.length;d+=1){var y=m[d];y.bind(),y.setVertexAttribPointers(c,t,i)}o&&(o.bind(),o.setVertexAttribPointers(c,t,i)),n&&n.bind(),a&&(a.bind(),a.setVertexAttribPointers(c,t,i)),u.currentNumAttributes=l},qn.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};function Gn(t,e,r,n,i){var o=t.gl;this.program=o.createProgram();var a=r.defines().concat("#define DEVICE_PIXEL_RATIO "+mt.browser.devicePixelRatio.toFixed(1));i&&a.push("#define OVERDRAW_INSPECTOR;");var s=a.concat(gn.fragmentSource,e.fragmentSource).join("\n"),l=a.concat(gn.vertexSource,e.vertexSource).join("\n"),u=o.createShader(o.FRAGMENT_SHADER);o.shaderSource(u,s),o.compileShader(u),o.attachShader(this.program,u);var c=o.createShader(o.VERTEX_SHADER);o.shaderSource(c,l),o.compileShader(c),o.attachShader(this.program,c);for(var p=r.layoutAttributes||[],h=0;h<p.length;h++)o.bindAttribLocation(this.program,h,p[h].name);o.linkProgram(this.program),this.numAttributes=o.getProgramParameter(this.program,o.ACTIVE_ATTRIBUTES),this.attributes={};for(var f={},d=0;d<this.numAttributes;d++){var m=o.getActiveAttrib(this.program,d);m&&(this.attributes[m.name]=o.getAttribLocation(this.program,m.name))}for(var y=o.getProgramParameter(this.program,o.ACTIVE_UNIFORMS),g=0;g<y;g++){var v=o.getActiveUniform(this.program,g);v&&(f[v.name]=o.getUniformLocation(this.program,v.name))}this.fixedUniforms=n(t,f),this.binderUniforms=r.getUniforms(t,f)}function Wn(t,e,r){var n=1/jr(r,1,e.transform.tileZoom),i=Math.pow(2,r.tileID.overscaledZ),o=r.tileSize*Math.pow(2,e.transform.tileZoom)/i,a=o*(r.tileID.canonical.x+r.tileID.wrap*i),s=o*r.tileID.canonical.y;return{u_image:0,u_texsize:r.imageAtlasTexture.size,u_scale:[mt.browser.devicePixelRatio,n,t.fromScale,t.toScale],u_fade:t.t,u_pixel_coord_upper:[a>>16,s>>16],u_pixel_coord_lower:[65535&a,65535&s]}}Gn.prototype.draw=function(t,e,r,n,i,o,a,s,l,u,c,p,h,f,d,m){var y,g=t.gl;for(var v in t.program.set(this.program),t.setDepthMode(r),t.setStencilMode(n),t.setColorMode(i),t.setCullFace(o),this.fixedUniforms)this.fixedUniforms[v].set(a[v]);f&&f.setUniforms(t,this.binderUniforms,p,{zoom:h});for(var _=((y={})[g.LINES]=2,y[g.TRIANGLES]=3,y[g.LINE_STRIP]=1,y)[e],b=0,x=c.get();b<x.length;b+=1){var w=x[b],E=w.vaos||(w.vaos={});(E[s]||(E[s]=new qn)).bind(t,this,l,f?f.getPaintVertexBuffers():[],u,w.vertexOffset,d,m),g.drawElements(e,w.primitiveLength*_,g.UNSIGNED_SHORT,w.primitiveOffset*_*2)}};function Hn(t,e,r,n){var i=e.style.light,o=i.properties.get("position"),a=[o.x,o.y,o.z],s=mt.create$1();"viewport"===i.properties.get("anchor")&&mt.fromRotation(s,-e.transform.angle),mt.transformMat3(a,a,s);var l=i.properties.get("color");return{u_matrix:t,u_lightpos:a,u_lightintensity:i.properties.get("intensity"),u_lightcolor:[l.r,l.g,l.b],u_vertical_gradient:+r,u_opacity:n}}function Xn(t){return{u_matrix:t}}function $n(t,e,r,n){return mt.extend(Xn(t),Wn(r,e,n))}function Kn(t,e,r,n){var i,o,a=t.transform;if("map"===n.paint.get("circle-pitch-alignment")){var s=jr(r,1,a.zoom);i=!0,o=[s,s]}else i=!1,o=a.pixelsToGLUnits;return{u_camera_to_center_distance:a.cameraToCenterDistance,u_scale_with_map:+("map"===n.paint.get("circle-pitch-scale")),u_matrix:t.translatePosMatrix(e.posMatrix,r,n.paint.get("circle-translate"),n.paint.get("circle-translate-anchor")),u_pitch_with_map:+i,u_extrude_scale:o}}function Jn(t,e){return{u_matrix:new mt.UniformMatrix4f(t,e.u_matrix),u_camera_to_center_distance:new mt.Uniform1f(t,e.u_camera_to_center_distance),u_pixels_to_tile_units:new mt.Uniform1f(t,e.u_pixels_to_tile_units),u_extrude_scale:new mt.Uniform2f(t,e.u_extrude_scale),u_overscale_factor:new mt.Uniform1f(t,e.u_overscale_factor)}}function Yn(t){return{u_matrix:t}}var Qn=function(t,e){return{u_matrix:t,u_color:e}},ti=function(t,e,r){var n=r.paint.get("hillshade-shadow-color"),i=r.paint.get("hillshade-highlight-color"),o=r.paint.get("hillshade-accent-color"),a=r.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===r.paint.get("hillshade-illumination-anchor")&&(a-=t.transform.angle);var s=!t.options.moving;return{u_matrix:t.transform.calculatePosMatrix(e.tileID.toUnwrapped(),s),u_image:0,u_latrange:function(t,e){var r=Math.pow(2,e.canonical.z),n=e.canonical.y;return[new mt.MercatorCoordinate(0,n/r).toLngLat().lat,new mt.MercatorCoordinate(0,(n+1)/r).toLngLat().lat]}(0,e.tileID),u_light:[r.paint.get("hillshade-exaggeration"),a],u_shadow:n,u_highlight:i,u_accent:o}},ei=function(t,e){var r=t.dem.stride,n=mt.create();return mt.ortho(n,0,mt.EXTENT,-mt.EXTENT,0,0,1),mt.translate(n,n,[0,-mt.EXTENT,0]),{u_matrix:n,u_image:1,u_dimension:[r,r],u_zoom:t.tileID.overscaledZ,u_maxzoom:e}};function ri(t,e,r){var n=t.transform;return{u_matrix:ii(t,e,r),u_ratio:1/jr(e,1,n.zoom),u_gl_units_to_pixels:[1/n.pixelsToGLUnits[0],1/n.pixelsToGLUnits[1]]}}function ni(t,e){return 1/jr(t,1,e.tileZoom)}function ii(t,e,r){return t.translatePosMatrix(e.tileID.posMatrix,e,r.paint.get("line-translate"),r.paint.get("line-translate-anchor"))}function oi(t,e,r,n,i){return{u_matrix:t,u_tl_parent:e,u_scale_parent:r,u_buffer_scale:1,u_fade_t:n.mix,u_opacity:n.opacity*i.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:i.paint.get("raster-brightness-min"),u_brightness_high:i.paint.get("raster-brightness-max"),u_saturation_factor:(a=i.paint.get("raster-saturation"),0<a?1-1/(1.001-a):-a),u_contrast_factor:(o=i.paint.get("raster-contrast"),0<o?1/(1-o):1+o),u_spin_weights:function(t){t*=Math.PI/180;var e=Math.sin(t),r=Math.cos(t);return[(2*r+1)/3,(-Math.sqrt(3)*e-r+1)/3,(Math.sqrt(3)*e-r+1)/3]}(i.paint.get("raster-hue-rotate"))};var o,a}function ai(t,e,r,n,i,o,a,s,l,u){var c=i.transform;return{u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:c.cameraToCenterDistance,u_pitch:c.pitch/360*2*Math.PI,u_rotate_symbol:+r,u_aspect_ratio:c.width/c.height,u_fade_change:i.options.fadeDuration?i.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:a,u_gl_coord_matrix:s,u_is_text:+l,u_pitch_with_map:+n,u_texsize:u,u_texture:0}}var si={fillExtrusion:function(t,e){return{u_matrix:new mt.UniformMatrix4f(t,e.u_matrix),u_lightpos:new mt.Uniform3f(t,e.u_lightpos),u_lightintensity:new mt.Uniform1f(t,e.u_lightintensity),u_lightcolor:new mt.Uniform3f(t,e.u_lightcolor),u_vertical_gradient:new mt.Uniform1f(t,e.u_vertical_gradient),u_opacity:new mt.Uniform1f(t,e.u_opacity)}},fillExtrusionPattern:function(t,e){return{u_matrix:new mt.UniformMatrix4f(t,e.u_matrix),u_lightpos:new mt.Uniform3f(t,e.u_lightpos),u_lightintensity:new mt.Uniform1f(t,e.u_lightintensity),u_lightcolor:new mt.Uniform3f(t,e.u_lightcolor),u_vertical_gradient:new mt.Uniform1f(t,e.u_vertical_gradient),u_height_factor:new mt.Uniform1f(t,e.u_height_factor),u_image:new mt.Uniform1i(t,e.u_image),u_texsize:new mt.Uniform2f(t,e.u_texsize),u_pixel_coord_upper:new mt.Uniform2f(t,e.u_pixel_coord_upper),u_pixel_coord_lower:new mt.Uniform2f(t,e.u_pixel_coord_lower),u_scale:new mt.Uniform4f(t,e.u_scale),u_fade:new mt.Uniform1f(t,e.u_fade),u_opacity:new mt.Uniform1f(t,e.u_opacity)}},fill:function(t,e){return{u_matrix:new mt.UniformMatrix4f(t,e.u_matrix)}},fillPattern:function(t,e){return{u_matrix:new mt.UniformMatrix4f(t,e.u_matrix),u_image:new mt.Uniform1i(t,e.u_image),u_texsize:new mt.Uniform2f(t,e.u_texsize),u_pixel_coord_upper:new mt.Uniform2f(t,e.u_pixel_coord_upper),u_pixel_coord_lower:new mt.Uniform2f(t,e.u_pixel_coord_lower),u_scale:new mt.Uniform4f(t,e.u_scale),u_fade:new mt.Uniform1f(t,e.u_fade)}},fillOutline:function(t,e){return{u_matrix:new mt.UniformMatrix4f(t,e.u_matrix),u_world:new mt.Uniform2f(t,e.u_world)}},fillOutlinePattern:function(t,e){return{u_matrix:new mt.UniformMatrix4f(t,e.u_matrix),u_world:new mt.Uniform2f(t,e.u_world),u_image:new mt.Uniform1i(t,e.u_image),u_texsize:new mt.Uniform2f(t,e.u_texsize),u_pixel_coord_upper:new mt.Uniform2f(t,e.u_pixel_coord_upper),u_pixel_coord_lower:new mt.Uniform2f(t,e.u_pixel_coord_lower),u_scale:new mt.Uniform4f(t,e.u_scale),u_fade:new mt.Uniform1f(t,e.u_fade)}},circle:function(t,e){return{u_camera_to_center_distance:new mt.Uniform1f(t,e.u_camera_to_center_distance),u_scale_with_map:new mt.Uniform1i(t,e.u_scale_with_map),u_pitch_with_map:new mt.Uniform1i(t,e.u_pitch_with_map),u_extrude_scale:new mt.Uniform2f(t,e.u_extrude_scale),u_matrix:new mt.UniformMatrix4f(t,e.u_matrix)}},collisionBox:Jn,collisionCircle:Jn,debug:function(t,e){return{u_color:new mt.UniformColor(t,e.u_color),u_matrix:new mt.UniformMatrix4f(t,e.u_matrix)}},clippingMask:function(t,e){return{u_matrix:new mt.UniformMatrix4f(t,e.u_matrix)}},heatmap:function(t,e){return{u_extrude_scale:new mt.Uniform1f(t,e.u_extrude_scale),u_intensity:new mt.Uniform1f(t,e.u_intensity),u_matrix:new mt.UniformMatrix4f(t,e.u_matrix)}},heatmapTexture:function(t,e){return{u_matrix:new mt.UniformMatrix4f(t,e.u_matrix),u_world:new mt.Uniform2f(t,e.u_world),u_image:new mt.Uniform1i(t,e.u_image),u_color_ramp:new mt.Uniform1i(t,e.u_color_ramp),u_opacity:new mt.Uniform1f(t,e.u_opacity)}},hillshade:function(t,e){return{u_matrix:new mt.UniformMatrix4f(t,e.u_matrix),u_image:new mt.Uniform1i(t,e.u_image),u_latrange:new mt.Uniform2f(t,e.u_latrange),u_light:new mt.Uniform2f(t,e.u_light),u_shadow:new mt.UniformColor(t,e.u_shadow),u_highlight:new mt.UniformColor(t,e.u_highlight),u_accent:new mt.UniformColor(t,e.u_accent)}},hillshadePrepare:function(t,e){return{u_matrix:new mt.UniformMatrix4f(t,e.u_matrix),u_image:new mt.Uniform1i(t,e.u_image),u_dimension:new mt.Uniform2f(t,e.u_dimension),u_zoom:new mt.Uniform1f(t,e.u_zoom),u_maxzoom:new mt.Uniform1f(t,e.u_maxzoom)}},line:function(t,e){return{u_matrix:new mt.UniformMatrix4f(t,e.u_matrix),u_ratio:new mt.Uniform1f(t,e.u_ratio),u_gl_units_to_pixels:new mt.Uniform2f(t,e.u_gl_units_to_pixels)}},lineGradient:function(t,e){return{u_matrix:new mt.UniformMatrix4f(t,e.u_matrix),u_ratio:new mt.Uniform1f(t,e.u_ratio),u_gl_units_to_pixels:new mt.Uniform2f(t,e.u_gl_units_to_pixels),u_image:new mt.Uniform1i(t,e.u_image)}},linePattern:function(t,e){return{u_matrix:new mt.UniformMatrix4f(t,e.u_matrix),u_texsize:new mt.Uniform2f(t,e.u_texsize),u_ratio:new mt.Uniform1f(t,e.u_ratio),u_image:new mt.Uniform1i(t,e.u_image),u_gl_units_to_pixels:new mt.Uniform2f(t,e.u_gl_units_to_pixels),u_scale:new mt.Uniform4f(t,e.u_scale),u_fade:new mt.Uniform1f(t,e.u_fade)}},lineSDF:function(t,e){return{u_matrix:new mt.UniformMatrix4f(t,e.u_matrix),u_ratio:new mt.Uniform1f(t,e.u_ratio),u_gl_units_to_pixels:new mt.Uniform2f(t,e.u_gl_units_to_pixels),u_patternscale_a:new mt.Uniform2f(t,e.u_patternscale_a),u_patternscale_b:new mt.Uniform2f(t,e.u_patternscale_b),u_sdfgamma:new mt.Uniform1f(t,e.u_sdfgamma),u_image:new mt.Uniform1i(t,e.u_image),u_tex_y_a:new mt.Uniform1f(t,e.u_tex_y_a),u_tex_y_b:new mt.Uniform1f(t,e.u_tex_y_b),u_mix:new mt.Uniform1f(t,e.u_mix)}},raster:function(t,e){return{u_matrix:new mt.UniformMatrix4f(t,e.u_matrix),u_tl_parent:new mt.Uniform2f(t,e.u_tl_parent),u_scale_parent:new mt.Uniform1f(t,e.u_scale_parent),u_buffer_scale:new mt.Uniform1f(t,e.u_buffer_scale),u_fade_t:new mt.Uniform1f(t,e.u_fade_t),u_opacity:new mt.Uniform1f(t,e.u_opacity),u_image0:new mt.Uniform1i(t,e.u_image0),u_image1:new mt.Uniform1i(t,e.u_image1),u_brightness_low:new mt.Uniform1f(t,e.u_brightness_low),u_brightness_high:new mt.Uniform1f(t,e.u_brightness_high),u_saturation_factor:new mt.Uniform1f(t,e.u_saturation_factor),u_contrast_factor:new mt.Uniform1f(t,e.u_contrast_factor),u_spin_weights:new mt.Uniform3f(t,e.u_spin_weights)}},symbolIcon:function(t,e){return{u_is_size_zoom_constant:new mt.Uniform1i(t,e.u_is_size_zoom_constant),u_is_size_feature_constant:new mt.Uniform1i(t,e.u_is_size_feature_constant),u_size_t:new mt.Uniform1f(t,e.u_size_t),u_size:new mt.Uniform1f(t,e.u_size),u_camera_to_center_distance:new mt.Uniform1f(t,e.u_camera_to_center_distance),u_pitch:new mt.Uniform1f(t,e.u_pitch),u_rotate_symbol:new mt.Uniform1i(t,e.u_rotate_symbol),u_aspect_ratio:new mt.Uniform1f(t,e.u_aspect_ratio),u_fade_change:new mt.Uniform1f(t,e.u_fade_change),u_matrix:new mt.UniformMatrix4f(t,e.u_matrix),u_label_plane_matrix:new mt.UniformMatrix4f(t,e.u_label_plane_matrix),u_gl_coord_matrix:new mt.UniformMatrix4f(t,e.u_gl_coord_matrix),u_is_text:new mt.Uniform1f(t,e.u_is_text),u_pitch_with_map:new mt.Uniform1i(t,e.u_pitch_with_map),u_texsize:new mt.Uniform2f(t,e.u_texsize),u_texture:new mt.Uniform1i(t,e.u_texture)}},symbolSDF:function(t,e){return{u_is_size_zoom_constant:new mt.Uniform1i(t,e.u_is_size_zoom_constant),u_is_size_feature_constant:new mt.Uniform1i(t,e.u_is_size_feature_constant),u_size_t:new mt.Uniform1f(t,e.u_size_t),u_size:new mt.Uniform1f(t,e.u_size),u_camera_to_center_distance:new mt.Uniform1f(t,e.u_camera_to_center_distance),u_pitch:new mt.Uniform1f(t,e.u_pitch),u_rotate_symbol:new mt.Uniform1i(t,e.u_rotate_symbol),u_aspect_ratio:new mt.Uniform1f(t,e.u_aspect_ratio),u_fade_change:new mt.Uniform1f(t,e.u_fade_change),u_matrix:new mt.UniformMatrix4f(t,e.u_matrix),u_label_plane_matrix:new mt.UniformMatrix4f(t,e.u_label_plane_matrix),u_gl_coord_matrix:new mt.UniformMatrix4f(t,e.u_gl_coord_matrix),u_is_text:new mt.Uniform1f(t,e.u_is_text),u_pitch_with_map:new mt.Uniform1i(t,e.u_pitch_with_map),u_texsize:new mt.Uniform2f(t,e.u_texsize),u_texture:new mt.Uniform1i(t,e.u_texture),u_gamma_scale:new mt.Uniform1f(t,e.u_gamma_scale),u_is_halo:new mt.Uniform1f(t,e.u_is_halo)}},background:function(t,e){return{u_matrix:new mt.UniformMatrix4f(t,e.u_matrix),u_opacity:new mt.Uniform1f(t,e.u_opacity),u_color:new mt.UniformColor(t,e.u_color)}},backgroundPattern:function(t,e){return{u_matrix:new mt.UniformMatrix4f(t,e.u_matrix),u_opacity:new mt.Uniform1f(t,e.u_opacity),u_image:new mt.Uniform1i(t,e.u_image),u_pattern_tl_a:new mt.Uniform2f(t,e.u_pattern_tl_a),u_pattern_br_a:new mt.Uniform2f(t,e.u_pattern_br_a),u_pattern_tl_b:new mt.Uniform2f(t,e.u_pattern_tl_b),u_pattern_br_b:new mt.Uniform2f(t,e.u_pattern_br_b),u_texsize:new mt.Uniform2f(t,e.u_texsize),u_mix:new mt.Uniform1f(t,e.u_mix),u_pattern_size_a:new mt.Uniform2f(t,e.u_pattern_size_a),u_pattern_size_b:new mt.Uniform2f(t,e.u_pattern_size_b),u_scale_a:new mt.Uniform1f(t,e.u_scale_a),u_scale_b:new mt.Uniform1f(t,e.u_scale_b),u_pixel_coord_upper:new mt.Uniform2f(t,e.u_pixel_coord_upper),u_pixel_coord_lower:new mt.Uniform2f(t,e.u_pixel_coord_lower),u_tile_units_to_pixels:new mt.Uniform1f(t,e.u_tile_units_to_pixels)}}};function li(t,e){for(var r=t.sort(function(t,e){return t.tileID.isLessThan(e.tileID)?-1:e.tileID.isLessThan(t.tileID)?1:0}),n=0;n<r.length;n++){var i={},o=r[n],a=r.slice(n+1);ui(o.tileID.wrapped(),o.tileID,a,new mt.OverscaledTileID(0,o.tileID.wrap+1,0,0,0),i),o.setMask(i,e)}}function ui(t,e,r,n,i){for(var o=0;o<r.length;o++){var a=r[o];if(n.isLessThan(a.tileID))break;if(e.key===a.tileID.key)return;if(a.tileID.isChildOf(e)){for(var s=e.children(1/0),l=0;l<s.length;l++)ui(t,s[l],r.slice(o),n,i);return}}var u=e.overscaledZ-t.overscaledZ,c=new mt.CanonicalTileID(u,e.canonical.x-(t.canonical.x<<u),e.canonical.y-(t.canonical.y<<u));i[c.key]=i[c.key]||c}function ci(t,e,r,n,i){for(var o=t.context,a=o.gl,s=i?t.useProgram("collisionCircle"):t.useProgram("collisionBox"),l=0;l<n.length;l++){var u=n[l],c=e.getTile(u),p=c.getBucket(r);if(p){var h=i?p.collisionCircle:p.collisionBox;h&&s.draw(o,i?a.TRIANGLES:a.LINES,Qe.disabled,tr.disabled,t.colorModeForRenderPass(),rr.disabled,(f=u.posMatrix,d=t.transform,void 0,y=jr(m=c,1,d.zoom),g=Math.pow(2,d.zoom-m.tileID.overscaledZ),v=m.tileID.overscaleFactor(),{u_matrix:f,u_camera_to_center_distance:d.cameraToCenterDistance,u_pixels_to_tile_units:y,u_extrude_scale:[d.pixelsToGLUnits[0]/(y*g),d.pixelsToGLUnits[1]/(y*g)],u_overscale_factor:v}),r.id,h.layoutVertexBuffer,h.indexBuffer,h.segments,null,t.transform.zoom,null,null,h.collisionVertexBuffer)}}var f,d,m,y,g,v}var pi=mt.identity(new Float32Array(16)),hi=mt.properties.layout;function fi(t,e,r,n,i,o,a,s,l,u){var c,p,h,f,d,m,y,g,v,_,b=t.text.placedSymbolArray,x=t.text.dynamicLayoutVertexArray;x.clear();for(var w=0;w<b.length;w++){var E=b.get(w),S=!E.hidden&&E.crossTileID?n[E.crossTileID]:null;if(S){var k=new mt.Point(E.anchorX,E.anchorY),C=Tr(k,r?s:a),T=.5+o.cameraToCenterDistance/C.signedDistanceFromCamera*.5,A=i.evaluateSizeForFeature(t.textSizeData,u,E)*T/mt.ONE_EM;r&&(A*=t.tilePixelRatio/l);for(var P=S.width,I=S.height,M=S.radialOffset,z=S.textBoxScale,L=(c=S.anchor,p=P,h=I,f=M,d=z,m=A,void 0,y=mt.getAnchorAlignment(c),g=-(y.horizontalAlign-.5)*p,v=-(y.verticalAlign-.5)*h,_=mt.evaluateRadialOffset(c,f),new mt.Point((g/d+_[0])*m,(v/d+_[1])*m)),O=r?Tr(k.add(L),a).point:C.point.add(e?L.rotate(-o.angle):L),D=0;D<E.numGlyphs;D++)mt.addDynamicAttributes(x,O,0)}else Dr(E.numGlyphs,x)}t.text.dynamicLayoutVertexBuffer.updateData(x)}function di(t,e,r,n,i,o,a,s,l,u,c,p,h){for(var f,d,m=t.context,y=m.gl,g=t.transform,v="map"===s,_="map"===l,b=v&&"point"!==r.layout.get("symbol-placement"),x=v&&!_&&!b,w=void 0!==r.layout.get("symbol-sort-key").constantOr(1),E=t.depthModeForSublayer(0,Qe.ReadOnly),S=r.layout.get("text-variable-anchor"),k=[],C=0,T=n;C<T.length;C+=1){var A=T[C],P=e.getTile(A),I=P.getBucket(r);if(I){var M=i?I.text:I.icon;if(M&&M.segments.get().length){var z=M.programConfigurations.get(r.id),L=i||I.sdfIcons,O=i?I.textSizeData:I.iconSizeData;f||(f=t.useProgram(L?"symbolSDF":"symbolIcon",z),d=mt.evaluateSizeForZoom(O,g.zoom,hi.properties[i?"text-size":"icon-size"])),m.activeTexture.set(y.TEXTURE0);var D=void 0,R=void 0,F=void 0;if(i)R=P.glyphAtlasTexture,F=y.LINEAR,D=P.glyphAtlasTexture.size;else{var B=1!==r.layout.get("icon-size").constantOr(0)||I.iconsNeedLinear,j=_||0!==g.pitch;R=P.imageAtlasTexture,F=L||t.options.rotating||t.options.zooming||B||j?y.LINEAR:y.NEAREST,D=P.imageAtlasTexture.size}var N=jr(P,1,t.transform.zoom),U=kr(A.posMatrix,_,v,t.transform,N),V=Cr(A.posMatrix,_,v,t.transform,N);if(b)Ar(I,A.posMatrix,t,i,U,V,_,u);else if(i&&d&&S){var q=Math.pow(2,g.zoom-P.tileID.overscaledZ);fi(I,v,_,h,mt.symbolSize,g,U,A.posMatrix,q,d)}var Z=t.translatePosMatrix(A.posMatrix,P,o,a),G=b||i&&S?pi:U,W=t.translatePosMatrix(V,P,o,a,!0),H=L&&0!==r.paint.get(i?"text-halo-width":"icon-halo-width").constantOr(1),X={program:f,buffers:M,uniformValues:L?(Y=O.functionType,Q=d,tt=x,et=_,rt=t,nt=Z,it=G,ot=W,at=i,st=D,lt=!0,void 0,ut=rt.transform,mt.extend(ai(Y,Q,tt,et,rt,nt,it,ot,at,st),{u_gamma_scale:et?Math.cos(ut._pitch)*ut.cameraToCenterDistance:1,u_is_halo:+lt})):ai(O.functionType,d,x,_,t,Z,G,W,i,D),atlasTexture:R,atlasInterpolation:F,isSDF:L,hasHalo:H};if(w)for(var $=0,K=M.segments.get();$<K.length;$+=1){var J=K[$];k.push({segments:new mt.SegmentVector([J]),sortKey:J.sortKey,state:X})}else k.push({segments:M.segments,sortKey:0,state:X})}}}var Y,Q,tt,et,rt,nt,it,ot,at,st,lt,ut;w&&k.sort(function(t,e){return t.sortKey-e.sortKey});for(var ct=0,pt=k;ct<pt.length;ct+=1){var ht=pt[ct],ft=ht.state;if(ft.atlasTexture.bind(ft.atlasInterpolation,y.CLAMP_TO_EDGE),ft.isSDF){var dt=ft.uniformValues;ft.hasHalo&&(dt.u_is_halo=1,mi(ft.buffers,ht.segments,r,t,ft.program,E,c,p,dt)),dt.u_is_halo=0}mi(ft.buffers,ht.segments,r,t,ft.program,E,c,p,ft.uniformValues)}}function mi(t,e,r,n,i,o,a,s,l){var u=n.context,c=u.gl;i.draw(u,c.TRIANGLES,o,a,s,rr.disabled,l,r.id,t.layoutVertexBuffer,t.indexBuffer,e,r.paint,n.transform.zoom,t.programConfigurations.get(r.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function yi(t,e,r,n,i,o,a){var s,l,u,c,p,h,f,d,m,y,g=t.context.gl,v=r.paint.get("fill-pattern"),_=v&&v.constantOr(1),b=r.getCrossfadeParameters();s=a?(l=_&&!r.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",g.LINES):(l=_?"fillPattern":"fill",g.TRIANGLES);for(var x=0,w=n;x<w.length;x+=1){var E=w[x],S=e.getTile(E);if(!_||S.patternsLoaded()){var k=S.getBucket(r);if(k){var C=k.programConfigurations.get(r.id),T=t.useProgram(l,C);_&&(t.context.activeTexture.set(g.TEXTURE0),S.imageAtlasTexture.bind(g.LINEAR,g.CLAMP_TO_EDGE),C.updatePatternPaintBuffers(b));var A=v.constantOr(null);if(A&&S.imageAtlas){var P=S.imageAtlas.patternPositions[A.to],I=S.imageAtlas.patternPositions[A.from];P&&I&&C.setConstantPatternPositions(P,I)}var M=t.translatePosMatrix(E.posMatrix,S,r.paint.get("fill-translate"),r.paint.get("fill-translate-anchor"));if(a){c=k.indexBuffer2,p=k.segments2;var z=[g.drawingBufferWidth,g.drawingBufferHeight];u="fillOutlinePattern"===l&&_?(h=M,f=t,d=b,m=S,y=z,mt.extend($n(h,f,d,m),{u_world:y})):{u_matrix:M,u_world:z}}else c=k.indexBuffer,p=k.segments,u=_?$n(M,t,b,S):Xn(M);T.draw(t.context,s,i,t.stencilModeForClipping(E),o,rr.disabled,u,r.id,k.layoutVertexBuffer,c,p,r.paint,t.transform.zoom,C)}}}}function gi(t,e,r,n,i,o,a){for(var s=t.context,l=s.gl,u=r.paint.get("fill-extrusion-pattern"),c=u.constantOr(1),p=r.getCrossfadeParameters(),h=r.paint.get("fill-extrusion-opacity"),f=0,d=n;f<d.length;f+=1){var m=d[f],y=e.getTile(m),g=y.getBucket(r);if(g){var v=g.programConfigurations.get(r.id),_=t.useProgram(c?"fillExtrusionPattern":"fillExtrusion",v);c&&(t.context.activeTexture.set(l.TEXTURE0),y.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),v.updatePatternPaintBuffers(p));var b=u.constantOr(null);if(b&&y.imageAtlas){var x=y.imageAtlas.patternPositions[b.to],w=y.imageAtlas.patternPositions[b.from];x&&w&&v.setConstantPatternPositions(x,w)}var E=t.translatePosMatrix(m.posMatrix,y,r.paint.get("fill-extrusion-translate"),r.paint.get("fill-extrusion-translate-anchor")),S=r.paint.get("fill-extrusion-vertical-gradient"),k=c?(C=E,T=t,A=S,P=h,I=m,M=p,z=y,mt.extend(Hn(C,T,A,P),Wn(M,T,z),{u_height_factor:-Math.pow(2,I.overscaledZ)/z.tileSize/8})):Hn(E,t,S,h);_.draw(s,s.gl.TRIANGLES,i,o,a,rr.backCCW,k,r.id,g.layoutVertexBuffer,g.indexBuffer,g.segments,r.paint,t.transform.zoom,v)}}var C,T,A,P,I,M,z}function vi(t,e,r,n,i,o){var a=t.context,s=a.gl,l=e.fbo;if(l){var u=t.useProgram("hillshade");a.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,l.colorAttachment.get());var c=ti(t,e,r);e.maskedBoundsBuffer&&e.maskedIndexBuffer&&e.segments?u.draw(a,s.TRIANGLES,n,i,o,rr.disabled,c,r.id,e.maskedBoundsBuffer,e.maskedIndexBuffer,e.segments):u.draw(a,s.TRIANGLES,n,i,o,rr.disabled,c,r.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}}function _i(t,e,r,n,i,o,a){var s=t.context,l=s.gl;if(e.dem&&e.dem.data){var u=e.dem.dim,c=e.dem.stride,p=e.dem.getPixels();if(s.activeTexture.set(l.TEXTURE1),s.pixelStoreUnpackPremultiplyAlpha.set(!1),e.demTexture=e.demTexture||t.getTileTexture(c),e.demTexture){var h=e.demTexture;h.update(p,{premultiply:!1}),h.bind(l.NEAREST,l.CLAMP_TO_EDGE)}else e.demTexture=new mt.Texture(s,p,l.RGBA,{premultiply:!1}),e.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);s.activeTexture.set(l.TEXTURE0);var f=e.fbo;if(!f){var d=new mt.Texture(s,{width:u,height:u,data:null},l.RGBA);d.bind(l.LINEAR,l.CLAMP_TO_EDGE),(f=e.fbo=s.createFramebuffer(u,u)).colorAttachment.set(d.texture)}s.bindFramebuffer.set(f.framebuffer),s.viewport.set([0,0,u,u]),t.useProgram("hillshadePrepare").draw(s,l.TRIANGLES,i,o,a,rr.disabled,ei(e,n),r.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments),e.needsHillshadePrepare=!1}}function bi(t,e,r,n,i){var o=n.paint.get("raster-fade-duration");if(0<o){var a=mt.browser.now(),s=(a-t.timeAdded)/o,l=e?(a-e.timeAdded)/o:-1,u=r.getSource(),c=i.coveringZoomLevel({tileSize:u.tileSize,roundZoom:u.roundZoom}),p=!e||Math.abs(e.tileID.overscaledZ-c)>Math.abs(t.tileID.overscaledZ-c),h=p&&t.refreshedUponExpiration?1:mt.clamp(p?s:1-l,0,1);return t.refreshedUponExpiration&&1<=s&&(t.refreshedUponExpiration=!1),e?{opacity:1,mix:1-h}:{opacity:h,mix:0}}return{opacity:1,mix:0}}function xi(t,e,r){var n=t.context,i=n.gl,o=r.posMatrix,a=t.useProgram("debug"),s=Qe.disabled,l=tr.disabled,u=t.colorModeForRenderPass(),c="$debug";a.draw(n,i.LINE_STRIP,s,l,u,rr.disabled,Qn(o,mt.Color.red),c,t.debugBuffer,t.tileBorderIndexBuffer,t.debugSegments);for(var p=e.getTileByID(r.key).latestRawTileData,h=p&&p.byteLength||0,f=Math.floor(h/1024),d=function(t,e,r,n){n=n||1;var i,o,a,s,l,u,c,p,h=[];for(i=0,o=t.length;i<o;i++)if(l=Ei[t[i]]){for(p=null,a=0,s=l[1].length;a<s;a+=2)p=-1===l[1][a]&&-1===l[1][a+1]?null:(u=e+l[1][a]*n,c=200-l[1][a+1]*n,p&&h.push(p.x,p.y,u,c),{x:u,y:c});e+=l[0]*n}return h}(r.toString()+" "+f+"kb",50,0,5),m=new mt.StructArrayLayout2i4,y=new mt.StructArrayLayout2ui4,g=0;g<d.length;g+=2)m.emplaceBack(d[g],d[g+1]),y.emplaceBack(g,g+1);for(var v=n.createVertexBuffer(m,yn.members),_=n.createIndexBuffer(y),b=mt.SegmentVector.simpleSegment(0,0,m.length/2,m.length/2),x=e.getTile(r).tileSize,w=mt.EXTENT/(Math.pow(2,t.transform.zoom-r.overscaledZ)*x),E=[[-1,-1],[-1,1],[1,-1],[1,1]],S=0;S<E.length;S++){var k=E[S];a.draw(n,i.LINES,s,l,u,rr.disabled,Qn(mt.translate([],o,[w*k[0],w*k[1],0]),mt.Color.white),c,v,_,b)}a.draw(n,i.LINES,s,l,u,rr.disabled,Qn(o,mt.Color.black),c,v,_,b)}function wi(t,e){this.context=new nr(t),this.transform=e,this._tileTextures={},this.setup(),this.numSublayers=or.maxUnderzooming+or.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.depthRboNeedsClear=!0,this.emptyProgramConfiguration=new mt.ProgramConfiguration,this.crossTileSymbolIndex=new un}var Ei={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]},Si={symbol:function(t,e,r,n,i){if("translucent"===t.renderPass){var o=tr.disabled,a=t.colorModeForRenderPass();0!==r.paint.get("icon-opacity").constantOr(1)&&di(t,e,r,n,!1,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),r.layout.get("icon-rotation-alignment"),r.layout.get("icon-pitch-alignment"),r.layout.get("icon-keep-upright"),o,a,i),0!==r.paint.get("text-opacity").constantOr(1)&&di(t,e,r,n,!0,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),r.layout.get("text-keep-upright"),o,a,i),e.map.showCollisionBoxes&&(ci(s=t,l=e,u=r,c=n,!1),ci(s,l,u,c,!0))}var s,l,u,c},circle:function(t,e,r,n){if("translucent"===t.renderPass){var i=r.paint.get("circle-opacity"),o=r.paint.get("circle-stroke-width"),a=r.paint.get("circle-stroke-opacity");if(0!==i.constantOr(1)||0!==o.constantOr(1)&&0!==a.constantOr(1))for(var s=t.context,l=s.gl,u=t.depthModeForSublayer(0,Qe.ReadOnly),c=tr.disabled,p=t.colorModeForRenderPass(),h=0;h<n.length;h++){var f=n[h],d=e.getTile(f),m=d.getBucket(r);if(m){var y=m.programConfigurations.get(r.id);t.useProgram("circle",y).draw(s,l.TRIANGLES,u,c,p,rr.disabled,Kn(t,f,d,r),r.id,m.layoutVertexBuffer,m.indexBuffer,m.segments,r.paint,t.transform.zoom,y)}}}},heatmap:function(t,e,r,n){if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===t.renderPass){var i=t.context,o=i.gl,a=t.depthModeForSublayer(0,Qe.ReadOnly),s=tr.disabled,l=new er([o.ONE,o.ONE],mt.Color.transparent,[!0,!0,!0,!0]);!function(t,e,r){var n=t.gl;t.activeTexture.set(n.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);var i=r.heatmapFbo;if(i)n.bindTexture(n.TEXTURE_2D,i.colorAttachment.get()),t.bindFramebuffer.set(i.framebuffer);else{var o=n.createTexture();n.bindTexture(n.TEXTURE_2D,o),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),i=r.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4),function t(e,r,n,i){var o=e.gl;o.texImage2D(o.TEXTURE_2D,0,o.RGBA,r.width/4,r.height/4,0,o.RGBA,e.extTextureHalfFloat?e.extTextureHalfFloat.HALF_FLOAT_OES:o.UNSIGNED_BYTE,null),i.colorAttachment.set(n),e.extTextureHalfFloat&&o.checkFramebufferStatus(o.FRAMEBUFFER)!==o.FRAMEBUFFER_COMPLETE&&(e.extTextureHalfFloat=null,i.colorAttachment.setDirty(),t(e,r,n,i))}(t,e,o,i)}}(i,t,r),i.clear({color:mt.Color.transparent});for(var u=0;u<n.length;u++){var c=n[u];if(!e.hasRenderableParent(c)){var p=e.getTile(c),h=p.getBucket(r);if(h){var f=h.programConfigurations.get(r.id),d=t.useProgram("heatmap",f),m=t.transform.zoom;d.draw(i,o.TRIANGLES,a,s,l,rr.disabled,(y=c.posMatrix,g=p,v=m,_=r.paint.get("heatmap-intensity"),{u_matrix:y,u_extrude_scale:jr(g,1,v),u_intensity:_}),r.id,h.layoutVertexBuffer,h.indexBuffer,h.segments,r.paint,t.transform.zoom,f)}}}i.viewport.set([0,0,t.width,t.height])}else"translucent"===t.renderPass&&(t.context.setColorMode(t.colorModeForRenderPass()),function(t,e){var r=t.context,n=r.gl,i=e.heatmapFbo;if(i){r.activeTexture.set(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,i.colorAttachment.get()),r.activeTexture.set(n.TEXTURE1);var o=e.colorRampTexture;(o=o||(e.colorRampTexture=new mt.Texture(r,e.colorRamp,n.RGBA))).bind(n.LINEAR,n.CLAMP_TO_EDGE),t.useProgram("heatmapTexture").draw(r,n.TRIANGLES,Qe.disabled,tr.disabled,t.colorModeForRenderPass(),rr.disabled,function(t,e,r,n){var i=mt.create();mt.ortho(i,0,t.width,t.height,0,0,1);var o=t.context.gl;return{u_matrix:i,u_world:[o.drawingBufferWidth,o.drawingBufferHeight],u_image:r,u_color_ramp:n,u_opacity:e.paint.get("heatmap-opacity")}}(t,e,0,1),e.id,t.viewportBuffer,t.quadTriangleIndexBuffer,t.viewportSegments,e.paint,t.transform.zoom)}}(t,r));var y,g,v,_},line:function(t,e,r,n){if("translucent"===t.renderPass){var i=r.paint.get("line-opacity"),o=r.paint.get("line-width");if(0!==i.constantOr(1)&&0!==o.constantOr(1)){var a=t.depthModeForSublayer(0,Qe.ReadOnly),s=t.colorModeForRenderPass(),l=r.paint.get("line-dasharray"),u=r.paint.get("line-pattern"),c=u.constantOr(1),p=r.paint.get("line-gradient"),h=r.getCrossfadeParameters(),f=l?"lineSDF":c?"linePattern":p?"lineGradient":"line",d=t.context,m=d.gl,y=!0;if(p){d.activeTexture.set(m.TEXTURE0);var g=r.gradientTexture;if(!r.gradient)return;(g=g||(r.gradientTexture=new mt.Texture(d,r.gradient,m.RGBA))).bind(m.LINEAR,m.CLAMP_TO_EDGE)}for(var v=0,_=n;v<_.length;v+=1){var b=_[v],x=e.getTile(b);if(!c||x.patternsLoaded()){var w=x.getBucket(r);if(w){var E=w.programConfigurations.get(r.id),S=t.context.program.get(),k=t.useProgram(f,E),C=y||k.program!==S,T=u.constantOr(null);if(T&&x.imageAtlas){var A=x.imageAtlas.patternPositions[T.to],P=x.imageAtlas.patternPositions[T.from];A&&P&&E.setConstantPatternPositions(A,P)}var I=l?(U=x,V=r,q=l,Z=h,W=void 0,G=(N=t).transform,W=N.lineAtlas,H=ni(U,G),X="round"===V.layout.get("line-cap"),$=W.getDash(q.from,X),K=W.getDash(q.to,X),J=$.width*Z.fromScale,Y=K.width*Z.toScale,mt.extend(ri(N,U,V),{u_patternscale_a:[H/J,-$.height/2],u_patternscale_b:[H/Y,-K.height/2],u_sdfgamma:W.width/(256*Math.min(J,Y)*mt.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:$.y,u_tex_y_b:K.y,u_mix:Z.t})):c?(D=x,R=r,F=h,void 0,B=(O=t).transform,j=ni(D,B),{u_matrix:ii(O,D,R),u_texsize:D.imageAtlasTexture.size,u_ratio:1/jr(D,1,B.zoom),u_image:0,u_scale:[mt.browser.devicePixelRatio,j,F.fromScale,F.toScale],u_fade:F.t,u_gl_units_to_pixels:[1/B.pixelsToGLUnits[0],1/B.pixelsToGLUnits[1]]}):p?(M=t,z=x,L=r,mt.extend(ri(M,z,L),{u_image:0})):ri(t,x,r);l&&(C||t.lineAtlas.dirty)?(d.activeTexture.set(m.TEXTURE0),t.lineAtlas.bind(d)):c&&(d.activeTexture.set(m.TEXTURE0),x.imageAtlasTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE),E.updatePatternPaintBuffers(h)),k.draw(d,m.TRIANGLES,a,t.stencilModeForClipping(b),s,rr.disabled,I,r.id,w.layoutVertexBuffer,w.indexBuffer,w.segments,r.paint,t.transform.zoom,E),y=!1}}}}}var M,z,L,O,D,R,F,B,j,N,U,V,q,Z,G,W,H,X,$,K,J,Y},fill:function(t,e,r,n){var i=r.paint.get("fill-color"),o=r.paint.get("fill-opacity");if(0!==o.constantOr(1)){var a=t.colorModeForRenderPass(),s=r.paint.get("fill-pattern"),l=t.opaquePassEnabledForLayer()&&!s.constantOr(1)&&1===i.constantOr(mt.Color.transparent).a&&1===o.constantOr(0)?"opaque":"translucent";if(t.renderPass===l){var u=t.depthModeForSublayer(1,"opaque"===t.renderPass?Qe.ReadWrite:Qe.ReadOnly);yi(t,e,r,n,u,a,!1)}if("translucent"===t.renderPass&&r.paint.get("fill-antialias")){var c=t.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,Qe.ReadOnly);yi(t,e,r,n,c,a,!0)}}},"fill-extrusion":function(t,e,r,n){var i=r.paint.get("fill-extrusion-opacity");if(0!==i&&"translucent"===t.renderPass){var o=new Qe(t.context.gl.LEQUAL,Qe.ReadWrite,t.depthRangeFor3D);if(1!==i||r.paint.get("fill-extrusion-pattern").constantOr(1))gi(t,e,r,n,o,tr.disabled,er.disabled),gi(t,e,r,n,o,t.stencilModeFor3D(),t.colorModeForRenderPass());else{var a=t.colorModeForRenderPass();gi(t,e,r,n,o,tr.disabled,a)}}},hillshade:function(t,e,r,n){if("offscreen"===t.renderPass||"translucent"===t.renderPass){for(var i=t.context,o=e.getSource().maxzoom,a=t.depthModeForSublayer(0,Qe.ReadOnly),s=tr.disabled,l=t.colorModeForRenderPass(),u=0,c=n;u<c.length;u+=1){var p=c[u],h=e.getTile(p);h.needsHillshadePrepare&&"offscreen"===t.renderPass?_i(t,h,r,o,a,s,l):"translucent"===t.renderPass&&vi(t,h,r,a,s,l)}i.viewport.set([0,0,t.width,t.height])}},raster:function(t,e,r,n){if("translucent"===t.renderPass&&0!==r.paint.get("raster-opacity"))for(var i=t.context,o=i.gl,a=e.getSource(),s=t.useProgram("raster"),l=tr.disabled,u=t.colorModeForRenderPass(),c=n.length&&n[0].overscaledZ,p=!t.options.moving,h=0,f=n;h<f.length;h+=1){var d=f[h],m=t.depthModeForSublayer(d.overscaledZ-c,1===r.paint.get("raster-opacity")?Qe.ReadWrite:Qe.ReadOnly,o.LESS),y=e.getTile(d),g=t.transform.calculatePosMatrix(d.toUnwrapped(),p);y.registerFadeDuration(r.paint.get("raster-fade-duration"));var v=e.findLoadedParent(d,0),_=bi(y,v,e,r,t.transform),b=void 0,x=void 0,w="nearest"===r.paint.get("raster-resampling")?o.NEAREST:o.LINEAR;i.activeTexture.set(o.TEXTURE0),y.texture.bind(w,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),i.activeTexture.set(o.TEXTURE1),v?(v.texture.bind(w,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),b=Math.pow(2,v.tileID.overscaledZ-y.tileID.overscaledZ),x=[y.tileID.canonical.x*b%1,y.tileID.canonical.y*b%1]):y.texture.bind(w,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST);var E=oi(g,x||[0,0],b||1,_,r);a instanceof F?s.draw(i,o.TRIANGLES,m,l,u,rr.disabled,E,r.id,a.boundsBuffer,t.quadTriangleIndexBuffer,a.boundsSegments):y.maskedBoundsBuffer&&y.maskedIndexBuffer&&y.segments?s.draw(i,o.TRIANGLES,m,l,u,rr.disabled,E,r.id,y.maskedBoundsBuffer,y.maskedIndexBuffer,y.segments,r.paint,t.transform.zoom):s.draw(i,o.TRIANGLES,m,l,u,rr.disabled,E,r.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}},background:function(t,e,r){var n,i,o,a,s,l,u,c,p,h,f,d,m,y,g,v,_,b,x,w=r.paint.get("background-color"),E=r.paint.get("background-opacity");if(0!==E){var S=t.context,k=S.gl,C=t.transform,T=C.tileSize,A=r.paint.get("background-pattern");if(!t.isPatternMissing(A)){var P=A||1!==w.a||1!==E?"translucent":"opaque";if(t.renderPass===P){var I=tr.disabled,M=t.depthModeForSublayer(0,"opaque"==P?Qe.ReadWrite:Qe.ReadOnly),z=t.colorModeForRenderPass(),L=t.useProgram(A?"backgroundPattern":"background"),O=C.coveringTiles({tileSize:T});A&&(S.activeTexture.set(k.TEXTURE0),t.imageManager.bind(t.context));for(var D=r.getCrossfadeParameters(),R=0,F=O;R<F.length;R+=1){var B=F[R],j=t.transform.calculatePosMatrix(B.toUnwrapped()),N=A?(n=j,i=E,o=t,a=A,s={tileID:B,tileSize:T},l=D,x=b=_=v=g=y=m=d=f=h=p=c=u=void 0,mt.extend((u=a,c=l,h=s,f=(p=o).imageManager.getPattern(u.from),d=p.imageManager.getPattern(u.to),m=p.imageManager.getPixelSize(),y=m.width,g=m.height,v=Math.pow(2,h.tileID.overscaledZ),_=h.tileSize*Math.pow(2,p.transform.tileZoom)/v,b=_*(h.tileID.canonical.x+h.tileID.wrap*v),x=_*h.tileID.canonical.y,{u_image:0,u_pattern_tl_a:f.tl,u_pattern_br_a:f.br,u_pattern_tl_b:d.tl,u_pattern_br_b:d.br,u_texsize:[y,g],u_mix:c.t,u_pattern_size_a:f.displaySize,u_pattern_size_b:d.displaySize,u_scale_a:c.fromScale,u_scale_b:c.toScale,u_tile_units_to_pixels:1/jr(h,1,p.transform.tileZoom),u_pixel_coord_upper:[b>>16,x>>16],u_pixel_coord_lower:[65535&b,65535&x]}),{u_matrix:n,u_opacity:i})):{u_matrix:j,u_opacity:E,u_color:w};L.draw(S,k.TRIANGLES,M,I,z,rr.disabled,N,r.id,t.tileExtentBuffer,t.quadTriangleIndexBuffer,t.tileExtentSegments)}}}}},debug:function(t,e,r){for(var n=0;n<r.length;n++)xi(t,e,r[n])},custom:function(t,e,r){var n=t.context,i=r.implementation;if("offscreen"===t.renderPass){var o=i.prerender;o&&(t.setCustomLayerDefaults(),n.setColorMode(t.colorModeForRenderPass()),o.call(i,n.gl,t.transform.customLayerMatrix()),n.setDirty(),t.setBaseState())}else if("translucent"===t.renderPass){t.setCustomLayerDefaults(),n.setColorMode(t.colorModeForRenderPass()),n.setStencilMode(tr.disabled);var a="3d"===i.renderingMode?new Qe(t.context.gl.LEQUAL,Qe.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,Qe.ReadOnly);n.setDepthMode(a),i.render(n.gl,t.transform.customLayerMatrix()),n.setDirty(),t.setBaseState(),n.bindFramebuffer.set(null)}}};function ki(t,e){if(t.y>e.y){var r=t;t=e,e=r}return{x0:t.x,y0:t.y,x1:e.x,y1:e.y,dx:e.x-t.x,dy:e.y-t.y}}function Ci(t,e,r,n,i){var o=Math.max(r,Math.floor(e.y0)),a=Math.min(n,Math.ceil(e.y1));if(t.x0===e.x0&&t.y0===e.y0?t.x0+e.dy/t.dy*t.dx<e.x1:t.x1-e.dy/t.dy*t.dx<e.x0){var s=t;t=e,e=s}for(var l=t.dx/t.dy,u=e.dx/e.dy,c=0<t.dx,p=e.dx<0,h=o;h<a;h++){var f=l*Math.max(0,Math.min(t.dy,h+c-t.y0))+t.x0,d=u*Math.max(0,Math.min(e.dy,h+p-e.y0))+e.x0;i(Math.floor(d),Math.ceil(f),h)}}function Ti(t,e,r,n,i,o){var a,s=ki(t,e),l=ki(e,r),u=ki(r,t);s.dy>l.dy&&(a=s,s=l,l=a),s.dy>u.dy&&(a=s,s=u,u=a),l.dy>u.dy&&(a=l,l=u,u=a),s.dy&&Ci(u,s,n,i,o),l.dy&&Ci(u,l,n,i,o)}wi.prototype.resize=function(t,e){var r=this.context.gl;if(this.width=t*mt.browser.devicePixelRatio,this.height=e*mt.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var n=0,i=this.style._order;n<i.length;n+=1){var o=i[n];this.style._layers[o].resize()}this.depthRbo&&(r.deleteRenderbuffer(this.depthRbo),this.depthRbo=null)},wi.prototype.setup=function(){var t=this.context,e=new mt.StructArrayLayout2i4;e.emplaceBack(0,0),e.emplaceBack(mt.EXTENT,0),e.emplaceBack(0,mt.EXTENT),e.emplaceBack(mt.EXTENT,mt.EXTENT),this.tileExtentBuffer=t.createVertexBuffer(e,yn.members),this.tileExtentSegments=mt.SegmentVector.simpleSegment(0,0,4,2);var r=new mt.StructArrayLayout2i4;r.emplaceBack(0,0),r.emplaceBack(mt.EXTENT,0),r.emplaceBack(0,mt.EXTENT),r.emplaceBack(mt.EXTENT,mt.EXTENT),this.debugBuffer=t.createVertexBuffer(r,yn.members),this.debugSegments=mt.SegmentVector.simpleSegment(0,0,4,5);var n=new mt.StructArrayLayout4i8;n.emplaceBack(0,0,0,0),n.emplaceBack(mt.EXTENT,0,mt.EXTENT,0),n.emplaceBack(0,mt.EXTENT,0,mt.EXTENT),n.emplaceBack(mt.EXTENT,mt.EXTENT,mt.EXTENT,mt.EXTENT),this.rasterBoundsBuffer=t.createVertexBuffer(n,mt.rasterBoundsAttributes.members),this.rasterBoundsSegments=mt.SegmentVector.simpleSegment(0,0,4,2);var i=new mt.StructArrayLayout2i4;i.emplaceBack(0,0),i.emplaceBack(1,0),i.emplaceBack(0,1),i.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(i,yn.members),this.viewportSegments=mt.SegmentVector.simpleSegment(0,0,4,2);var o=new mt.StructArrayLayout1ui2;o.emplaceBack(0),o.emplaceBack(1),o.emplaceBack(3),o.emplaceBack(2),o.emplaceBack(0),this.tileBorderIndexBuffer=t.createIndexBuffer(o);var a=new mt.StructArrayLayout3ui6;a.emplaceBack(0,1,2),a.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(a);var s=this.context.gl;this.stencilClearMode=new tr({func:s.ALWAYS,mask:0},0,255,s.ZERO,s.ZERO,s.ZERO)},wi.prototype.clearStencil=function(){var t=this.context,e=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var r=mt.create();mt.ortho(r,0,this.width,this.height,0,0,1),mt.scale(r,r,[e.drawingBufferWidth,e.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(t,e.TRIANGLES,Qe.disabled,this.stencilClearMode,er.disabled,rr.disabled,Yn(r),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},wi.prototype._renderTileClippingMasks=function(t,e){if(this.currentStencilSource!==t.source&&t.isTileClipped()&&e&&e.length){this.currentStencilSource=t.source;var r=this.context,n=r.gl;256<this.nextStencilID+e.length&&this.clearStencil(),r.setColorMode(er.disabled),r.setDepthMode(Qe.disabled);var i=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var o=0,a=e;o<a.length;o+=1){var s=a[o],l=this._tileClippingMaskIDs[s.key]=this.nextStencilID++;i.draw(r,n.TRIANGLES,Qe.disabled,new tr({func:n.ALWAYS,mask:0},l,255,n.KEEP,n.KEEP,n.REPLACE),er.disabled,rr.disabled,Yn(s.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},wi.prototype.stencilModeFor3D=function(){256<this.nextStencilID+1&&this.clearStencil();var t=this.nextStencilID++,e=this.context.gl;return new tr({func:e.NOTEQUAL,mask:255},t,255,e.KEEP,e.KEEP,e.REPLACE)},wi.prototype.stencilModeForClipping=function(t){var e=this.context.gl;return new tr({func:e.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,e.KEEP,e.KEEP,e.REPLACE)},wi.prototype.colorModeForRenderPass=function(){var t=this.context.gl;return this._showOverdrawInspector?new er([t.CONSTANT_COLOR,t.ONE],new mt.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?er.unblended:er.alphaBlended},wi.prototype.depthModeForSublayer=function(t,e,r){if(!this.opaquePassEnabledForLayer())return Qe.disabled;var n=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new Qe(r||this.context.gl.LEQUAL,e,[n,n])},wi.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},wi.prototype.render=function(t,e){this.style=t,this.options=e,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(mt.browser.now()),this.imageManager.beginFrame();var r=this.style._order,n=this.style.sourceCaches;for(var i in n){var o=n[i];o.used&&o.prepare(this.context)}var a={},s={},l={};for(var u in n){var c=n[u];a[u]=c.getVisibleCoordinates(),s[u]=a[u].slice().reverse(),l[u]=c.getVisibleCoordinates(!0).reverse()}for(var p in n){var h=n[p],f=h.getSource();if("raster"===f.type||"raster-dem"===f.type){for(var d=[],m=0,y=a[p];m<y.length;m+=1){var g=y[m];d.push(h.getTile(g))}li(d,this.context)}}this.opaquePassCutoff=1/0;for(var v=0;v<r.length;v++){var _=r[v];if(this.style._layers[_].is3D()){this.opaquePassCutoff=v;break}}this.renderPass="offscreen",this.depthRboNeedsClear=!0;for(var b=0,x=r;b<x.length;b+=1){var w=x[b],E=this.style._layers[w];if(E.hasOffscreenPass()&&!E.isHidden(this.transform.zoom)){var S=s[E.source];"custom"!==E.type&&!S.length||this.renderLayer(this,n[E.source],E,S)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:e.showOverdrawInspector?mt.Color.black:mt.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=e.showOverdrawInspector,this.depthRangeFor3D=[0,1-(t._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=r.length-1;0<=this.currentLayer;this.currentLayer--){var k=this.style._layers[r[this.currentLayer]],C=n[k.source],T=a[k.source];this._renderTileClippingMasks(k,T),this.renderLayer(this,C,k,T)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<r.length;this.currentLayer++){var A=this.style._layers[r[this.currentLayer]],P=n[A.source],I=("symbol"===A.type?l:s)[A.source];this._renderTileClippingMasks(A,a[A.source]),this.renderLayer(this,P,A,I)}if(this.options.showTileBoundaries)for(var M in n){Si.debug(this,n[M],a[M]);break}this.setCustomLayerDefaults()},wi.prototype.setupOffscreenDepthRenderbuffer=function(){var t=this.context;this.depthRbo||(this.depthRbo=t.createRenderbuffer(t.gl.DEPTH_COMPONENT16,this.width,this.height))},wi.prototype.renderLayer=function(t,e,r,n){r.isHidden(this.transform.zoom)||"background"!==r.type&&"custom"!==r.type&&!n.length||(this.id=r.id,Si[r.type](t,e,r,n,this.style.placement.variableOffsets))},wi.prototype.translatePosMatrix=function(t,e,r,n,i){if(!r[0]&&!r[1])return t;var o=i?"map"===n?this.transform.angle:0:"viewport"===n?-this.transform.angle:0;if(o){var a=Math.sin(o),s=Math.cos(o);r=[r[0]*s-r[1]*a,r[0]*a+r[1]*s]}var l=[i?r[0]:jr(e,r[0],this.transform.zoom),i?r[1]:jr(e,r[1],this.transform.zoom),0],u=new Float32Array(16);return mt.translate(u,t,l),u},wi.prototype.saveTileTexture=function(t){var e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]},wi.prototype.getTileTexture=function(t){var e=this._tileTextures[t];return e&&0<e.length?e.pop():null},wi.prototype.isPatternMissing=function(t){if(!t)return!1;var e=this.imageManager.getPattern(t.from),r=this.imageManager.getPattern(t.to);return!e||!r},wi.prototype.useProgram=function(t,e){void 0===e&&(e=this.emptyProgramConfiguration),this.cache=this.cache||{};var r=""+t+(e.cacheKey||"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[r]||(this.cache[r]=new Gn(this.context,Zn[t],e,si[t],this._showOverdrawInspector)),this.cache[r]},wi.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},wi.prototype.setBaseState=function(){var t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)};function Ai(t,e,r){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===r||r,this._minZoom=t||0,this._maxZoom=e||22,this.setMaxBounds(),this.width=0,this.height=0,this._center=new mt.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._posMatrixCache={},this._alignedPosMatrixCache={}}var Pi={minZoom:{configurable:!0},maxZoom:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerPoint:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Ai.prototype.clone=function(){var t=new Ai(this._minZoom,this._maxZoom,this._renderWorldCopies);return t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t._center=this._center,t.zoom=this.zoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._calcMatrices(),t},Pi.minZoom.get=function(){return this._minZoom},Pi.minZoom.set=function(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))},Pi.maxZoom.get=function(){return this._maxZoom},Pi.maxZoom.set=function(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))},Pi.renderWorldCopies.get=function(){return this._renderWorldCopies},Pi.renderWorldCopies.set=function(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t},Pi.worldSize.get=function(){return this.tileSize*this.scale},Pi.centerPoint.get=function(){return this.size._div(2)},Pi.size.get=function(){return new mt.Point(this.width,this.height)},Pi.bearing.get=function(){return-this.angle/Math.PI*180},Pi.bearing.set=function(t){var e=-mt.wrap(t,-180,180)*Math.PI/180;this.angle!==e&&(this._unmodified=!1,this.angle=e,this._calcMatrices(),this.rotationMatrix=mt.create$2(),mt.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Pi.pitch.get=function(){return this._pitch/Math.PI*180},Pi.pitch.set=function(t){var e=mt.clamp(t,0,60)/180*Math.PI;this._pitch!==e&&(this._unmodified=!1,this._pitch=e,this._calcMatrices())},Pi.fov.get=function(){return this._fov/Math.PI*180},Pi.fov.set=function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())},Pi.zoom.get=function(){return this._zoom},Pi.zoom.set=function(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices())},Pi.center.get=function(){return this._center},Pi.center.set=function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())},Ai.prototype.coveringZoomLevel=function(t){return(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize))},Ai.prototype.getVisibleUnwrappedCoordinates=function(t){var e=[new mt.UnwrappedTileID(0,t)];if(this._renderWorldCopies)for(var r=this.pointCoordinate(new mt.Point(0,0)),n=this.pointCoordinate(new mt.Point(this.width,0)),i=this.pointCoordinate(new mt.Point(this.width,this.height)),o=this.pointCoordinate(new mt.Point(0,this.height)),a=Math.floor(Math.min(r.x,n.x,i.x,o.x)),s=Math.floor(Math.max(r.x,n.x,i.x,o.x)),l=a-1;l<=s+1;l++)0!==l&&e.push(new mt.UnwrappedTileID(l,t));return e},Ai.prototype.coveringTiles=function(t){var e=this.coveringZoomLevel(t),r=e;if(void 0!==t.minzoom&&e<t.minzoom)return[];void 0!==t.maxzoom&&e>t.maxzoom&&(e=t.maxzoom);var n=mt.MercatorCoordinate.fromLngLat(this.center),i=Math.pow(2,e),o=new mt.Point(i*n.x-.5,i*n.y-.5);return function(s,t,l,u){void 0===u&&(u=!0);var c=1<<s,p={};function e(t,e,r){var n,i,o,a;if(0<=r&&r<=c)for(n=t;n<e;n++)i=Math.floor(n/c),o=(n%c+c)%c,0!==i&&!0!==u||(a=new mt.OverscaledTileID(l,i,s,o,r),p[a.key]=a)}var r=t.map(function(t){return new mt.Point(t.x,t.y)._mult(c)});return Ti(r[0],r[1],r[2],0,c,e),Ti(r[2],r[3],r[0],0,c,e),Object.keys(p).map(function(t){return p[t]})}(e,[this.pointCoordinate(new mt.Point(0,0)),this.pointCoordinate(new mt.Point(this.width,0)),this.pointCoordinate(new mt.Point(this.width,this.height)),this.pointCoordinate(new mt.Point(0,this.height))],t.reparseOverscaled?r:e,this._renderWorldCopies).sort(function(t,e){return o.dist(t.canonical)-o.dist(e.canonical)})},Ai.prototype.resize=function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()},Pi.unmodified.get=function(){return this._unmodified},Ai.prototype.zoomScale=function(t){return Math.pow(2,t)},Ai.prototype.scaleZoom=function(t){return Math.log(t)/Math.LN2},Ai.prototype.project=function(t){var e=mt.clamp(t.lat,-this.maxValidLatitude,this.maxValidLatitude);return new mt.Point(mt.mercatorXfromLng(t.lng)*this.worldSize,mt.mercatorYfromLat(e)*this.worldSize)},Ai.prototype.unproject=function(t){return new mt.MercatorCoordinate(t.x/this.worldSize,t.y/this.worldSize).toLngLat()},Pi.point.get=function(){return this.project(this.center)},Ai.prototype.setLocationAtPoint=function(t,e){var r=this.pointCoordinate(e),n=this.pointCoordinate(this.centerPoint),i=this.locationCoordinate(t),o=new mt.MercatorCoordinate(i.x-(r.x-n.x),i.y-(r.y-n.y));this.center=this.coordinateLocation(o),this._renderWorldCopies&&(this.center=this.center.wrap())},Ai.prototype.locationPoint=function(t){return this.coordinatePoint(this.locationCoordinate(t))},Ai.prototype.pointLocation=function(t){return this.coordinateLocation(this.pointCoordinate(t))},Ai.prototype.locationCoordinate=function(t){return mt.MercatorCoordinate.fromLngLat(t)},Ai.prototype.coordinateLocation=function(t){return t.toLngLat()},Ai.prototype.pointCoordinate=function(t){var e=[t.x,t.y,0,1],r=[t.x,t.y,1,1];mt.transformMat4(e,e,this.pixelMatrixInverse),mt.transformMat4(r,r,this.pixelMatrixInverse);var n=e[3],i=r[3],o=e[0]/n,a=r[0]/i,s=e[1]/n,l=r[1]/i,u=e[2]/n,c=r[2]/i,p=u==c?0:(0-u)/(c-u);return new mt.MercatorCoordinate(mt.number(o,a,p)/this.worldSize,mt.number(s,l,p)/this.worldSize)},Ai.prototype.coordinatePoint=function(t){var e=[t.x*this.worldSize,t.y*this.worldSize,0,1];return mt.transformMat4(e,e,this.pixelMatrix),new mt.Point(e[0]/e[3],e[1]/e[3])},Ai.prototype.getBounds=function(){return(new mt.LngLatBounds).extend(this.pointLocation(new mt.Point(0,0))).extend(this.pointLocation(new mt.Point(this.width,0))).extend(this.pointLocation(new mt.Point(this.width,this.height))).extend(this.pointLocation(new mt.Point(0,this.height)))},Ai.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new mt.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Ai.prototype.setMaxBounds=function(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Ai.prototype.calculatePosMatrix=function(t,e){void 0===e&&(e=!1);var r=t.key,n=e?this._alignedPosMatrixCache:this._posMatrixCache;if(n[r])return n[r];var i=t.canonical,o=this.worldSize/this.zoomScale(i.z),a=i.x+Math.pow(2,i.z)*t.wrap,s=mt.identity(new Float64Array(16));return mt.translate(s,s,[a*o,i.y*o,0]),mt.scale(s,s,[o/mt.EXTENT,o/mt.EXTENT,1]),mt.multiply(s,e?this.alignedProjMatrix:this.projMatrix,s),n[r]=new Float32Array(s),n[r]},Ai.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Ai.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var t,e,r,n,i=-90,o=90,a=-180,s=180,l=this.size,u=this._unmodified;if(this.latRange){var c=this.latRange;i=mt.mercatorYfromLat(c[1])*this.worldSize,t=(o=mt.mercatorYfromLat(c[0])*this.worldSize)-i<l.y?l.y/(o-i):0}if(this.lngRange){var p=this.lngRange;a=mt.mercatorXfromLng(p[0])*this.worldSize,e=(s=mt.mercatorXfromLng(p[1])*this.worldSize)-a<l.x?l.x/(s-a):0}var h=this.point,f=Math.max(e||0,t||0);if(f)return this.center=this.unproject(new mt.Point(e?(s+a)/2:h.x,t?(o+i)/2:h.y)),this.zoom+=this.scaleZoom(f),this._unmodified=u,void(this._constraining=!1);if(this.latRange){var d=h.y,m=l.y/2;d-m<i&&(n=i+m),o<d+m&&(n=o-m)}if(this.lngRange){var y=h.x,g=l.x/2;y-g<a&&(r=a+g),s<y+g&&(r=s-g)}void 0===r&&void 0===n||(this.center=this.unproject(new mt.Point(void 0!==r?r:h.x,void 0!==n?n:h.y))),this._unmodified=u,this._constraining=!1}},Ai.prototype._calcMatrices=function(){if(this.height){this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var t=this._fov/2,e=Math.PI/2+this._pitch,r=Math.sin(t)*this.cameraToCenterDistance/Math.sin(Math.PI-e-t),n=this.point,i=n.x,o=n.y,a=1.01*(Math.cos(Math.PI/2-this._pitch)*r+this.cameraToCenterDistance),s=new Float64Array(16);mt.perspective(s,this._fov,this.width/this.height,1,a),mt.scale(s,s,[1,-1,1]),mt.translate(s,s,[0,0,-this.cameraToCenterDistance]),mt.rotateX(s,s,this._pitch),mt.rotateZ(s,s,this.angle),mt.translate(s,s,[-i,-o,0]),this.mercatorMatrix=mt.scale([],s,[this.worldSize,this.worldSize,this.worldSize]),mt.scale(s,s,[1,1,mt.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=s;var l=this.width%2/2,u=this.height%2/2,c=Math.cos(this.angle),p=Math.sin(this.angle),h=i-Math.round(i)+c*l+p*u,f=o-Math.round(o)+c*u+p*l,d=new Float64Array(s);if(mt.translate(d,d,[.5<h?h-1:h,.5<f?f-1:f,0]),this.alignedProjMatrix=d,s=mt.create(),mt.scale(s,s,[this.width/2,-this.height/2,1]),mt.translate(s,s,[1,-1,0]),this.labelPlaneMatrix=s,s=mt.create(),mt.scale(s,s,[1,-1,1]),mt.translate(s,s,[-1,-1,0]),mt.scale(s,s,[2/this.width,2/this.height,1]),this.glCoordMatrix=s,this.pixelMatrix=mt.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(s=mt.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=s,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Ai.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var t=this.pointCoordinate(new mt.Point(0,0)),e=[t.x*this.worldSize,t.y*this.worldSize,0,1];return mt.transformMat4(e,e,this.pixelMatrix)[3]/this.cameraToCenterDistance},Ai.prototype.getCameraPoint=function(){var t=this._pitch,e=Math.tan(t)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new mt.Point(0,e))},Ai.prototype.getCameraQueryGeometry=function(t){var e=this.getCameraPoint();if(1===t.length)return[t[0],e];for(var r=e.x,n=e.y,i=e.x,o=e.y,a=0,s=t;a<s.length;a+=1){var l=s[a];r=Math.min(r,l.x),n=Math.min(n,l.y),i=Math.max(i,l.x),o=Math.max(o,l.y)}return[new mt.Point(r,n),new mt.Point(i,n),new mt.Point(i,o),new mt.Point(r,o),new mt.Point(r,n)]},Object.defineProperties(Ai.prototype,Pi);function Ii(){var t,e,r,n;mt.bindAll(["_onHashChange","_updateHash"],this),this._updateHash=(t=this._updateHashUnthrottled.bind(this),e=!300,r=0,n=function(){r=0,e&&(t(),r=setTimeout(n,300),e=!1)},function(){return e=!0,r||n(),r})}Ii.prototype.addTo=function(t){return this._map=t,mt.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Ii.prototype.remove=function(){return mt.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Ii.prototype.getHashString=function(t){var e=this._map.getCenter(),r=Math.round(100*this._map.getZoom())/100,n=Math.ceil((r*Math.LN2+Math.log(512/360/.5))/Math.LN10),i=Math.pow(10,n),o=Math.round(e.lng*i)/i,a=Math.round(e.lat*i)/i,s=this._map.getBearing(),l=this._map.getPitch(),u="";return u+=t?"#/"+o+"/"+a+"/"+r:"#"+r+"/"+a+"/"+o,(s||l)&&(u+="/"+Math.round(10*s)/10),l&&(u+="/"+Math.round(l)),u},Ii.prototype._onHashChange=function(){var t=mt.window.location.hash.replace("#","").split("/");return 3<=t.length&&(this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:+(t[3]||0),pitch:+(t[4]||0)}),!0)},Ii.prototype._updateHashUnthrottled=function(){var t=this.getHashString();try{mt.window.history.replaceState(mt.window.history.state,"",t)}catch(t){}};function Mi(t){this._map=t,this._el=t.getCanvasContainer(),this._delta=0,mt.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)}var zi=function(a){function t(t,e,r,n){void 0===n&&(n={});var i=v.mousePos(e.getCanvasContainer(),r),o=e.unproject(i);a.call(this,t,mt.extend({point:i,lngLat:o,originalEvent:r},n)),this._defaultPrevented=!1,this.target=e}a&&(t.__proto__=a);var e={defaultPrevented:{configurable:!0}};return((t.prototype=Object.create(a&&a.prototype)).constructor=t).prototype.preventDefault=function(){this._defaultPrevented=!0},e.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(t.prototype,e),t}(mt.Event),Li=function(s){function t(t,e,r){var n=v.touchPos(e.getCanvasContainer(),r),i=n.map(function(t){return e.unproject(t)}),o=n.reduce(function(t,e,r,n){return t.add(e.div(n.length))},new mt.Point(0,0)),a=e.unproject(o);s.call(this,t,{points:n,point:o,lngLats:i,lngLat:a,originalEvent:r}),this._defaultPrevented=!1}s&&(t.__proto__=s);var e={defaultPrevented:{configurable:!0}};return((t.prototype=Object.create(s&&s.prototype)).constructor=t).prototype.preventDefault=function(){this._defaultPrevented=!0},e.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(t.prototype,e),t}(mt.Event),Oi=function(n){function t(t,e,r){n.call(this,t,{originalEvent:r}),this._defaultPrevented=!1}n&&(t.__proto__=n);var e={defaultPrevented:{configurable:!0}};return((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.preventDefault=function(){this._defaultPrevented=!0},e.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(t.prototype,e),t}(mt.Event);Mi.prototype.isEnabled=function(){return!!this._enabled},Mi.prototype.isActive=function(){return!!this._active},Mi.prototype.isZooming=function(){return!!this._zooming},Mi.prototype.enable=function(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around)},Mi.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Mi.prototype.onWheel=function(t){if(this.isEnabled()){var e=t.deltaMode===mt.window.WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY,r=mt.browser.now(),n=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==e&&e%4.000244140625==0?this._type="wheel":0!==e&&Math.abs(e)<4?this._type="trackpad":400<n?(this._type=null,this._lastValue=e,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(n*e)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,e+=this._lastValue)),t.shiftKey&&e&&(e/=4),this._type&&(this._lastWheelEvent=t,this._delta-=e,this.isActive()||this._start(t)),t.preventDefault()}},Mi.prototype._onTimeout=function(t){this._type="wheel",this._delta-=this._lastValue,this.isActive()||this._start(t)},Mi.prototype._start=function(t){if(this._delta){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),this._active=!0,this._zooming=!0,this._map.fire(new mt.Event("movestart",{originalEvent:t})),this._map.fire(new mt.Event("zoomstart",{originalEvent:t})),this._finishTimeout&&clearTimeout(this._finishTimeout);var e=v.mousePos(this._el,t);this._around=mt.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(e)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame))}},Mi.prototype._onScrollFrame=function(){var t=this;if(this._frameId=null,this.isActive()){var e=this._map.transform;if(0!==this._delta){var r="wheel"===this._type&&4.000244140625<Math.abs(this._delta)?1/450:.01,n=2/(1+Math.exp(-Math.abs(this._delta*r)));this._delta<0&&0!==n&&(n=1/n);var i="number"==typeof this._targetZoom?e.zoomScale(this._targetZoom):e.scale;this._targetZoom=Math.min(e.maxZoom,Math.max(e.minZoom,e.scaleZoom(i*n))),"wheel"===this._type&&(this._startZoom=e.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var o="number"==typeof this._targetZoom?this._targetZoom:e.zoom,a=this._startZoom,s=this._easing,l=!1;if("wheel"===this._type&&a&&s){var u=Math.min((mt.browser.now()-this._lastWheelEventTime)/200,1),c=s(u);e.zoom=mt.number(a,o,c),u<1?this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame)):l=!0}else e.zoom=o,l=!0;e.setLocationAtPoint(this._around,this._aroundPoint),this._map.fire(new mt.Event("move",{originalEvent:this._lastWheelEvent})),this._map.fire(new mt.Event("zoom",{originalEvent:this._lastWheelEvent})),l&&(this._active=!1,this._finishTimeout=setTimeout(function(){t._zooming=!1,t._map.fire(new mt.Event("zoomend",{originalEvent:t._lastWheelEvent})),t._map.fire(new mt.Event("moveend",{originalEvent:t._lastWheelEvent})),delete t._targetZoom},200))}},Mi.prototype._smoothOutEasing=function(t){var e=mt.ease;if(this._prevEase){var r=this._prevEase,n=(mt.browser.now()-r.start)/r.duration,i=r.easing(.01+n)-r.easing(n),o=.27/Math.sqrt(i*i+1e-4)*.01,a=Math.sqrt(.0729-o*o);e=mt.bezier(o,a,.25,1)}return this._prevEase={start:mt.browser.now(),duration:t,easing:e},e};function Di(t,e){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=e.clickTolerance||1,mt.bindAll(["_onMouseMove","_onMouseUp","_onKeyDown"],this)}Di.prototype.isEnabled=function(){return!!this._enabled},Di.prototype.isActive=function(){return!!this._active},Di.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Di.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Di.prototype.onMouseDown=function(t){this.isEnabled()&&t.shiftKey&&0===t.button&&(mt.window.document.addEventListener("mousemove",this._onMouseMove,!1),mt.window.document.addEventListener("keydown",this._onKeyDown,!1),mt.window.document.addEventListener("mouseup",this._onMouseUp,!1),v.disableDrag(),this._startPos=this._lastPos=v.mousePos(this._el,t),this._active=!0)},Di.prototype._onMouseMove=function(t){var e=v.mousePos(this._el,t);if(!(this._lastPos.equals(e)||!this._box&&e.dist(this._startPos)<this._clickTolerance)){var r=this._startPos;this._lastPos=e,this._box||(this._box=v.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));var n=Math.min(r.x,e.x),i=Math.max(r.x,e.x),o=Math.min(r.y,e.y),a=Math.max(r.y,e.y);v.setTransform(this._box,"translate("+n+"px,"+o+"px)"),this._box.style.width=i-n+"px",this._box.style.height=a-o+"px"}},Di.prototype._onMouseUp=function(t){if(0===t.button){var e=this._startPos,r=v.mousePos(this._el,t);this._finish(),v.suppressClick(),e.x===r.x&&e.y===r.y?this._fireEvent("boxzoomcancel",t):this._map.fitScreenCoordinates(e,r,this._map.getBearing(),{linear:!0}).fire(new mt.Event("boxzoomend",{originalEvent:t}))}},Di.prototype._onKeyDown=function(t){27===t.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",t))},Di.prototype._finish=function(){this._active=!1,mt.window.document.removeEventListener("mousemove",this._onMouseMove,!1),mt.window.document.removeEventListener("keydown",this._onKeyDown,!1),mt.window.document.removeEventListener("mouseup",this._onMouseUp,!1),this._container.classList.remove("mapboxgl-crosshair"),this._box&&(v.remove(this._box),this._box=null),v.enableDrag(),delete this._startPos,delete this._lastPos},Di.prototype._fireEvent=function(t,e){return this._map.fire(new mt.Event(t,{originalEvent:e}))};function Ri(t,e){this._map=t,this._el=e.element||t.getCanvasContainer(),this._state="disabled",this._button=e.button||"right",this._bearingSnap=e.bearingSnap||0,this._pitchWithRotate=!1!==e.pitchWithRotate,mt.bindAll(["onMouseDown","_onMouseMove","_onMouseUp","_onBlur","_onDragFrame"],this)}var Fi=mt.bezier(0,0,.25,1);Ri.prototype.isEnabled=function(){return"disabled"!==this._state},Ri.prototype.isActive=function(){return"active"===this._state},Ri.prototype.enable=function(){this.isEnabled()||(this._state="enabled")},Ri.prototype.disable=function(){if(this.isEnabled())switch(this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend"),this._pitchWithRotate&&this._fireEvent("pitchend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},Ri.prototype.onMouseDown=function(t){if("enabled"===this._state){if("right"===this._button){if(this._eventButton=v.mouseButton(t),this._eventButton!==(t.ctrlKey?0:2))return}else{if(t.ctrlKey||0!==v.mouseButton(t))return;this._eventButton=0}v.disableDrag(),mt.window.document.addEventListener("mousemove",this._onMouseMove,{capture:!0}),mt.window.document.addEventListener("mouseup",this._onMouseUp),mt.window.addEventListener("blur",this._onBlur),this._state="pending",this._inertia=[[mt.browser.now(),this._map.getBearing()]],this._startPos=this._lastPos=v.mousePos(this._el,t),this._center=this._map.transform.centerPoint,t.preventDefault()}},Ri.prototype._onMouseMove=function(t){var e=v.mousePos(this._el,t);this._lastPos.equals(e)||(this._lastMoveEvent=t,this._lastPos=e,"pending"===this._state&&(this._state="active",this._fireEvent("rotatestart",t),this._fireEvent("movestart",t),this._pitchWithRotate&&this._fireEvent("pitchstart",t)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},Ri.prototype._onDragFrame=function(){this._frameId=null;var t=this._lastMoveEvent;if(t){var e=this._map.transform,r=this._startPos,n=this._lastPos,i=.8*(r.x-n.x),o=-.5*(r.y-n.y),a=e.bearing-i,s=e.pitch-o,l=this._inertia,u=l[l.length-1];this._drainInertiaBuffer(),l.push([mt.browser.now(),this._map._normalizeBearing(a,u[1])]),e.bearing=a,this._pitchWithRotate&&(this._fireEvent("pitch",t),e.pitch=s),this._fireEvent("rotate",t),this._fireEvent("move",t),delete this._lastMoveEvent,this._startPos=this._lastPos}},Ri.prototype._onMouseUp=function(t){if(v.mouseButton(t)===this._eventButton)switch(this._state){case"active":this._state="enabled",v.suppressClick(),this._unbind(),this._deactivate(),this._inertialRotate(t);break;case"pending":this._state="enabled",this._unbind()}},Ri.prototype._onBlur=function(t){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend",t),this._pitchWithRotate&&this._fireEvent("pitchend",t),this._fireEvent("moveend",t);break;case"pending":this._state="enabled",this._unbind()}},Ri.prototype._unbind=function(){mt.window.document.removeEventListener("mousemove",this._onMouseMove,{capture:!0}),mt.window.document.removeEventListener("mouseup",this._onMouseUp),mt.window.removeEventListener("blur",this._onBlur),v.enableDrag()},Ri.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._lastPos},Ri.prototype._inertialRotate=function(t){var e=this;this._fireEvent("rotateend",t),this._drainInertiaBuffer();function r(){Math.abs(i)<e._bearingSnap?n.resetNorth({noMoveStart:!0},{originalEvent:t}):e._fireEvent("moveend",t),e._pitchWithRotate&&e._fireEvent("pitchend",t)}var n=this._map,i=n.getBearing(),o=this._inertia;if(o.length<2)r();else{var a=o[0],s=o[o.length-1],l=o[o.length-2],u=n._normalizeBearing(i,l[1]),c=s[1]-a[1],p=c<0?-1:1,h=(s[0]-a[0])/1e3;if(0!=c&&0!=h){var f=Math.abs(.25/h*c);180<f&&(f=180);var d=f/180;u+=p*f*(d/2),Math.abs(n._normalizeBearing(u,0))<this._bearingSnap&&(u=n._normalizeBearing(0,u)),n.rotateTo(u,{duration:1e3*d,easing:Fi,noMoveStart:!0},{originalEvent:t})}else r()}},Ri.prototype._fireEvent=function(t,e){return this._map.fire(new mt.Event(t,e?{originalEvent:e}:{}))},Ri.prototype._drainInertiaBuffer=function(){for(var t=this._inertia,e=mt.browser.now();0<t.length&&160<e-t[0][0];)t.shift()};function Bi(t,e){this._map=t,this._el=t.getCanvasContainer(),this._state="disabled",this._clickTolerance=e.clickTolerance||1,mt.bindAll(["_onMove","_onMouseUp","_onTouchEnd","_onBlur","_onDragFrame"],this)}var ji=mt.bezier(0,0,.3,1);Bi.prototype.isEnabled=function(){return"disabled"!==this._state},Bi.prototype.isActive=function(){return"active"===this._state},Bi.prototype.enable=function(){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-drag-pan"),this._state="enabled")},Bi.prototype.disable=function(){if(this.isEnabled())switch(this._el.classList.remove("mapboxgl-touch-drag-pan"),this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("dragend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},Bi.prototype.onMouseDown=function(t){"enabled"===this._state&&(t.ctrlKey||0!==v.mouseButton(t)||(v.addEventListener(mt.window.document,"mousemove",this._onMove,{capture:!0}),v.addEventListener(mt.window.document,"mouseup",this._onMouseUp),this._start(t)))},Bi.prototype.onTouchStart=function(t){"enabled"===this._state&&(1<t.touches.length||(v.addEventListener(mt.window.document,"touchmove",this._onMove,{capture:!0,passive:!1}),v.addEventListener(mt.window.document,"touchend",this._onTouchEnd),this._start(t)))},Bi.prototype._start=function(t){mt.window.addEventListener("blur",this._onBlur),this._state="pending",this._startPos=this._mouseDownPos=this._lastPos=v.mousePos(this._el,t),this._inertia=[[mt.browser.now(),this._startPos]]},Bi.prototype._onMove=function(t){t.preventDefault();var e=v.mousePos(this._el,t);this._lastPos.equals(e)||"pending"===this._state&&e.dist(this._mouseDownPos)<this._clickTolerance||(this._lastMoveEvent=t,this._lastPos=e,this._drainInertiaBuffer(),this._inertia.push([mt.browser.now(),this._lastPos]),"pending"===this._state&&(this._state="active",this._fireEvent("dragstart",t),this._fireEvent("movestart",t)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},Bi.prototype._onDragFrame=function(){this._frameId=null;var t=this._lastMoveEvent;if(t){var e=this._map.transform;e.setLocationAtPoint(e.pointLocation(this._startPos),this._lastPos),this._fireEvent("drag",t),this._fireEvent("move",t),this._startPos=this._lastPos,delete this._lastMoveEvent}},Bi.prototype._onMouseUp=function(t){if(0===v.mouseButton(t))switch(this._state){case"active":this._state="enabled",v.suppressClick(),this._unbind(),this._deactivate(),this._inertialPan(t);break;case"pending":this._state="enabled",this._unbind()}},Bi.prototype._onTouchEnd=function(t){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._inertialPan(t);break;case"pending":this._state="enabled",this._unbind()}},Bi.prototype._onBlur=function(t){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("dragend",t),this._fireEvent("moveend",t);break;case"pending":this._state="enabled",this._unbind()}},Bi.prototype._unbind=function(){v.removeEventListener(mt.window.document,"touchmove",this._onMove,{capture:!0,passive:!1}),v.removeEventListener(mt.window.document,"touchend",this._onTouchEnd),v.removeEventListener(mt.window.document,"mousemove",this._onMove,{capture:!0}),v.removeEventListener(mt.window.document,"mouseup",this._onMouseUp),v.removeEventListener(mt.window,"blur",this._onBlur)},Bi.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._mouseDownPos,delete this._lastPos},Bi.prototype._inertialPan=function(t){this._fireEvent("dragend",t),this._drainInertiaBuffer();var e=this._inertia;if(e.length<2)this._fireEvent("moveend",t);else{var r=e[e.length-1],n=e[0],i=r[1].sub(n[1]),o=(r[0]-n[0])/1e3;if(0==o||r[1].equals(n[1]))this._fireEvent("moveend",t);else{var a=i.mult(.3/o),s=a.mag();1400<s&&(s=1400,a._unit()._mult(s));var l=s/750,u=a.mult(-l/2);this._map.panBy(u,{duration:1e3*l,easing:ji,noMoveStart:!0},{originalEvent:t})}}},Bi.prototype._fireEvent=function(t,e){return this._map.fire(new mt.Event(t,e?{originalEvent:e}:{}))},Bi.prototype._drainInertiaBuffer=function(){for(var t=this._inertia,e=mt.browser.now();0<t.length&&160<e-t[0][0];)t.shift()};function Ni(t){this._map=t,this._el=t.getCanvasContainer(),mt.bindAll(["_onKeyDown"],this)}function Ui(t){return t*(2-t)}Ni.prototype.isEnabled=function(){return!!this._enabled},Ni.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)},Ni.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)},Ni.prototype._onKeyDown=function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=0,r=0,n=0,i=0,o=0;switch(t.keyCode){case 61:case 107:case 171:case 187:e=1;break;case 189:case 109:case 173:e=-1;break;case 37:t.shiftKey?r=-1:(t.preventDefault(),i=-1);break;case 39:t.shiftKey?r=1:(t.preventDefault(),i=1);break;case 38:t.shiftKey?n=1:(t.preventDefault(),o=-1);break;case 40:t.shiftKey?n=-1:(o=1,t.preventDefault());break;default:return}var a=this._map,s=a.getZoom(),l={duration:300,delayEndEvents:500,easing:Ui,zoom:e?Math.round(s)+e*(t.shiftKey?2:1):s,bearing:a.getBearing()+15*r,pitch:a.getPitch()+10*n,offset:[100*-i,100*-o],center:a.getCenter()};a.easeTo(l,{originalEvent:t})}};function Vi(t){this._map=t,mt.bindAll(["_onDblClick","_onZoomEnd"],this)}Vi.prototype.isEnabled=function(){return!!this._enabled},Vi.prototype.isActive=function(){return!!this._active},Vi.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Vi.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Vi.prototype.onTouchStart=function(t){var e=this;this.isEnabled()&&(1<t.points.length||(this._tapped?(clearTimeout(this._tapped),this._tapped=null,this._zoom(t)):this._tapped=setTimeout(function(){e._tapped=null},300)))},Vi.prototype.onDblClick=function(t){this.isEnabled()&&(t.originalEvent.preventDefault(),this._zoom(t))},Vi.prototype._zoom=function(t){this._active=!0,this._map.on("zoomend",this._onZoomEnd),this._map.zoomTo(this._map.getZoom()+(t.originalEvent.shiftKey?-1:1),{around:t.lngLat},t)},Vi.prototype._onZoomEnd=function(){this._active=!1,this._map.off("zoomend",this._onZoomEnd)};function qi(t){this._map=t,this._el=t.getCanvasContainer(),mt.bindAll(["_onMove","_onEnd","_onTouchFrame"],this)}var Zi=mt.bezier(0,0,.15,1);qi.prototype.isEnabled=function(){return!!this._enabled},qi.prototype.enable=function(t){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-zoom-rotate"),this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around)},qi.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-zoom-rotate"),this._enabled=!1)},qi.prototype.disableRotation=function(){this._rotationDisabled=!0},qi.prototype.enableRotation=function(){this._rotationDisabled=!1},qi.prototype.onStart=function(t){if(this.isEnabled()&&2===t.touches.length){var e=v.mousePos(this._el,t.touches[0]),r=v.mousePos(this._el,t.touches[1]),n=e.add(r).div(2);this._startVec=e.sub(r),this._startAround=this._map.transform.pointLocation(n),this._gestureIntent=void 0,this._inertia=[],v.addEventListener(mt.window.document,"touchmove",this._onMove,{passive:!1}),v.addEventListener(mt.window.document,"touchend",this._onEnd)}},qi.prototype._getTouchEventData=function(t){var e=v.mousePos(this._el,t.touches[0]),r=v.mousePos(this._el,t.touches[1]),n=e.sub(r);return{vec:n,center:e.add(r).div(2),scale:n.mag()/this._startVec.mag(),bearing:this._rotationDisabled?0:180*n.angleWith(this._startVec)/Math.PI}},qi.prototype._onMove=function(t){if(2===t.touches.length){var e=this._getTouchEventData(t),r=e.vec,n=e.scale,i=e.bearing;if(!this._gestureIntent){var o=this._rotationDisabled&&1!==n||.15<Math.abs(1-n);10<Math.abs(i)?this._gestureIntent="rotate":o&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._map.fire(new mt.Event(this._gestureIntent+"start",{originalEvent:t})),this._map.fire(new mt.Event("movestart",{originalEvent:t})),this._startVec=r)}this._lastTouchEvent=t,this._frameId||(this._frameId=this._map._requestRenderFrame(this._onTouchFrame)),t.preventDefault()}},qi.prototype._onTouchFrame=function(){this._frameId=null;var t=this._gestureIntent;if(t){var e=this._map.transform;this._startScale||(this._startScale=e.scale,this._startBearing=e.bearing);var r=this._getTouchEventData(this._lastTouchEvent),n=r.center,i=r.bearing,o=r.scale,a=e.pointLocation(n),s=e.locationPoint(a);"rotate"===t&&(e.bearing=this._startBearing+i),e.zoom=e.scaleZoom(this._startScale*o),e.setLocationAtPoint(this._startAround,s),this._map.fire(new mt.Event(t,{originalEvent:this._lastTouchEvent})),this._map.fire(new mt.Event("move",{originalEvent:this._lastTouchEvent})),this._drainInertiaBuffer(),this._inertia.push([mt.browser.now(),o,n])}},qi.prototype._onEnd=function(t){v.removeEventListener(mt.window.document,"touchmove",this._onMove,{passive:!1}),v.removeEventListener(mt.window.document,"touchend",this._onEnd);var e=this._gestureIntent,r=this._startScale;if(this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._gestureIntent,delete this._startScale,delete this._startBearing,delete this._lastTouchEvent,e){this._map.fire(new mt.Event(e+"end",{originalEvent:t})),this._drainInertiaBuffer();var n=this._inertia,i=this._map;if(n.length<2)i.snapToNorth({},{originalEvent:t});else{var o=n[n.length-1],a=n[0],s=i.transform.scaleZoom(r*o[1]),l=i.transform.scaleZoom(r*a[1]),u=s-l,c=(o[0]-a[0])/1e3,p=o[2];if(0!=c&&s!==l){var h=.15*u/c;2.5<Math.abs(h)&&(h=0<h?2.5:-2.5);var f=1e3*Math.abs(h/(12*.15)),d=s+h*f/2e3;d<0&&(d=0),i.easeTo({zoom:d,duration:f,easing:Zi,around:this._aroundCenter?i.getCenter():i.unproject(p),noMoveStart:!0},{originalEvent:t})}else i.snapToNorth({},{originalEvent:t})}}},qi.prototype._drainInertiaBuffer=function(){for(var t=this._inertia,e=mt.browser.now();2<t.length&&160<e-t[0][0];)t.shift()};function Gi(t){void 0===t&&(t={}),this.options=t,mt.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)}var Wi,Hi={scrollZoom:Mi,boxZoom:Di,dragRotate:Ri,dragPan:Bi,keyboard:Ni,doubleClickZoom:Vi,touchZoomRotate:qi},Xi=((Wi=mt.Evented)&&($i.__proto__=Wi),(($i.prototype=Object.create(Wi&&Wi.prototype)).constructor=$i).prototype.getCenter=function(){return new mt.LngLat(this.transform.center.lng,this.transform.center.lat)},$i.prototype.setCenter=function(t,e){return this.jumpTo({center:t},e)},$i.prototype.panBy=function(t,e,r){return t=mt.Point.convert(t).mult(-1),this.panTo(this.transform.center,mt.extend({offset:t},e),r)},$i.prototype.panTo=function(t,e,r){return this.easeTo(mt.extend({center:t},e),r)},$i.prototype.getZoom=function(){return this.transform.zoom},$i.prototype.setZoom=function(t,e){return this.jumpTo({zoom:t},e),this},$i.prototype.zoomTo=function(t,e,r){return this.easeTo(mt.extend({zoom:t},e),r)},$i.prototype.zoomIn=function(t,e){return this.zoomTo(this.getZoom()+1,t,e),this},$i.prototype.zoomOut=function(t,e){return this.zoomTo(this.getZoom()-1,t,e),this},$i.prototype.getBearing=function(){return this.transform.bearing},$i.prototype.setBearing=function(t,e){return this.jumpTo({bearing:t},e),this},$i.prototype.rotateTo=function(t,e,r){return this.easeTo(mt.extend({bearing:t},e),r)},$i.prototype.resetNorth=function(t,e){return this.rotateTo(0,mt.extend({duration:1e3},t),e),this},$i.prototype.snapToNorth=function(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this},$i.prototype.getPitch=function(){return this.transform.pitch},$i.prototype.setPitch=function(t,e){return this.jumpTo({pitch:t},e),this},$i.prototype.cameraForBounds=function(t,e){return t=mt.LngLatBounds.convert(t),this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),0,e)},$i.prototype._cameraForBoxAndBearing=function(t,e,r,n){if("number"==typeof(n=mt.extend({padding:{top:0,bottom:0,right:0,left:0},offset:[0,0],maxZoom:this.transform.maxZoom},n)).padding){var i=n.padding;n.padding={top:i,bottom:i,right:i,left:i}}if(mt.deepEqual(Object.keys(n.padding).sort(function(t,e){return t<e?-1:e<t?1:0}),["bottom","left","right","top"])){var o=this.transform,a=o.project(mt.LngLat.convert(t)),s=o.project(mt.LngLat.convert(e)),l=a.rotate(-r*Math.PI/180),u=s.rotate(-r*Math.PI/180),c=new mt.Point(Math.max(l.x,u.x),Math.max(l.y,u.y)),p=new mt.Point(Math.min(l.x,u.x),Math.min(l.y,u.y)),h=c.sub(p),f=(o.width-n.padding.left-n.padding.right)/h.x,d=(o.height-n.padding.top-n.padding.bottom)/h.y;if(!(d<0||f<0)){var m=Math.min(o.scaleZoom(o.scale*Math.min(f,d)),n.maxZoom),y=mt.Point.convert(n.offset),g=(n.padding.left-n.padding.right)/2,v=(n.padding.top-n.padding.bottom)/2,_=new mt.Point(y.x+g,y.y+v).mult(o.scale/o.zoomScale(m));return{center:o.unproject(a.add(s).div(2).sub(_)),zoom:m,bearing:r}}mt.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}else mt.warnOnce("options.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'")},$i.prototype.fitBounds=function(t,e,r){return this._fitInternal(this.cameraForBounds(t,e),e,r)},$i.prototype.fitScreenCoordinates=function(t,e,r,n,i){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(mt.Point.convert(t)),this.transform.pointLocation(mt.Point.convert(e)),r,n),n,i)},$i.prototype._fitInternal=function(t,e,r){return t?(e=mt.extend(t,e)).linear?this.easeTo(e,r):this.flyTo(e,r):this},$i.prototype.jumpTo=function(t,e){this.stop();var r=this.transform,n=!1,i=!1,o=!1;return"zoom"in t&&r.zoom!==+t.zoom&&(n=!0,r.zoom=+t.zoom),void 0!==t.center&&(r.center=mt.LngLat.convert(t.center)),"bearing"in t&&r.bearing!==+t.bearing&&(i=!0,r.bearing=+t.bearing),"pitch"in t&&r.pitch!==+t.pitch&&(o=!0,r.pitch=+t.pitch),this.fire(new mt.Event("movestart",e)).fire(new mt.Event("move",e)),n&&this.fire(new mt.Event("zoomstart",e)).fire(new mt.Event("zoom",e)).fire(new mt.Event("zoomend",e)),i&&this.fire(new mt.Event("rotatestart",e)).fire(new mt.Event("rotate",e)).fire(new mt.Event("rotateend",e)),o&&this.fire(new mt.Event("pitchstart",e)).fire(new mt.Event("pitch",e)).fire(new mt.Event("pitchend",e)),this.fire(new mt.Event("moveend",e))},$i.prototype.easeTo=function(t,o){var a=this;this.stop(),!1===(t=mt.extend({offset:[0,0],duration:500,easing:mt.ease},t)).animate&&(t.duration=0);var s=this.transform,l=this.getZoom(),u=this.getBearing(),c=this.getPitch(),p="zoom"in t?+t.zoom:l,h="bearing"in t?this._normalizeBearing(t.bearing,u):u,f="pitch"in t?+t.pitch:c,d=s.centerPoint.add(mt.Point.convert(t.offset)),e=s.pointLocation(d),r=mt.LngLat.convert(t.center||e);this._normalizeCenter(r);var m,y,g=s.project(e),v=s.project(r).sub(g),_=s.zoomScale(p-l);return t.around&&(m=mt.LngLat.convert(t.around),y=s.locationPoint(m)),this._zooming=p!==l,this._rotating=u!==h,this._pitching=f!==c,this._prepareEase(o,t.noMoveStart),clearTimeout(this._easeEndTimeoutID),this._ease(function(t){if(a._zooming&&(s.zoom=mt.number(l,p,t)),a._rotating&&(s.bearing=mt.number(u,h,t)),a._pitching&&(s.pitch=mt.number(c,f,t)),m)s.setLocationAtPoint(m,y);else{var e=s.zoomScale(s.zoom-l),r=l<p?Math.min(2,_):Math.max(.5,_),n=Math.pow(r,1-t),i=s.unproject(g.add(v.mult(t*n)).mult(e));s.setLocationAtPoint(s.renderWorldCopies?i.wrap():i,d)}a._fireMoveEvents(o)},function(){t.delayEndEvents?a._easeEndTimeoutID=setTimeout(function(){return a._afterEase(o)},t.delayEndEvents):a._afterEase(o)},t),this},$i.prototype._prepareEase=function(t,e){this._moving=!0,e||this.fire(new mt.Event("movestart",t)),this._zooming&&this.fire(new mt.Event("zoomstart",t)),this._rotating&&this.fire(new mt.Event("rotatestart",t)),this._pitching&&this.fire(new mt.Event("pitchstart",t))},$i.prototype._fireMoveEvents=function(t){this.fire(new mt.Event("move",t)),this._zooming&&this.fire(new mt.Event("zoom",t)),this._rotating&&this.fire(new mt.Event("rotate",t)),this._pitching&&this.fire(new mt.Event("pitch",t))},$i.prototype._afterEase=function(t){var e=this._zooming,r=this._rotating,n=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,e&&this.fire(new mt.Event("zoomend",t)),r&&this.fire(new mt.Event("rotateend",t)),n&&this.fire(new mt.Event("pitchend",t)),this.fire(new mt.Event("moveend",t))},$i.prototype.flyTo=function(t,i){var o=this;this.stop(),t=mt.extend({offset:[0,0],speed:1.2,curve:1.42,easing:mt.ease},t);var a=this.transform,s=this.getZoom(),l=this.getBearing(),u=this.getPitch(),c="zoom"in t?mt.clamp(+t.zoom,a.minZoom,a.maxZoom):s,p="bearing"in t?this._normalizeBearing(t.bearing,l):l,h="pitch"in t?+t.pitch:u,e=a.zoomScale(c-s),f=a.centerPoint.add(mt.Point.convert(t.offset)),r=a.pointLocation(f),d=mt.LngLat.convert(t.center||r);this._normalizeCenter(d);var m=a.project(r),y=a.project(d).sub(m),n=t.curve,g=Math.max(a.width,a.height),v=g/e,_=y.mag();if("minZoom"in t){var b=mt.clamp(Math.min(t.minZoom,s,c),a.minZoom,a.maxZoom),x=g/a.zoomScale(b-s);n=Math.sqrt(x/_*2)}var w=n*n;function E(t){var e=(v*v-g*g+(t?-1:1)*w*w*_*_)/(2*(t?v:g)*w*_);return Math.log(Math.sqrt(e*e+1)-e)}function S(t){return(Math.exp(t)-Math.exp(-t))/2}function k(t){return(Math.exp(t)+Math.exp(-t))/2}var C=E(0),T=function(t){return k(C)/k(C+n*t)},A=function(t){return g*((k(C)*(S(e=C+n*t)/k(e))-S(C))/w)/_;var e},P=(E(1)-C)/n;if(Math.abs(_)<1e-6||!isFinite(P)){if(Math.abs(g-v)<1e-6)return this.easeTo(t,i);var I=v<g?-1:1;P=Math.abs(Math.log(v/g))/n,A=function(){return 0},T=function(t){return Math.exp(I*n*t)}}if("duration"in t)t.duration=+t.duration;else{var M="screenSpeed"in t?t.screenSpeed/n:+t.speed;t.duration=1e3*P/M}return t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0),this._zooming=!0,this._rotating=l!==p,this._pitching=h!==u,this._prepareEase(i,!1),this._ease(function(t){var e=t*P,r=1/T(e);a.zoom=1===t?c:s+a.scaleZoom(r),o._rotating&&(a.bearing=mt.number(l,p,t)),o._pitching&&(a.pitch=mt.number(u,h,t));var n=1===t?d:a.unproject(m.add(y.mult(A(e))).mult(r));a.setLocationAtPoint(a.renderWorldCopies?n.wrap():n,f),o._fireMoveEvents(i)},function(){return o._afterEase(i)},t),this},$i.prototype.isEasing=function(){return!!this._easeFrameId},$i.prototype.stop=function(){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var t=this._onEaseEnd;delete this._onEaseEnd,t.call(this)}return this},$i.prototype._ease=function(t,e,r){!1===r.animate||0===r.duration?(t(1),e()):(this._easeStart=mt.browser.now(),this._easeOptions=r,this._onEaseFrame=t,this._onEaseEnd=e,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},$i.prototype._renderFrameCallback=function(){var t=Math.min((mt.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(t)),t<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},$i.prototype._normalizeBearing=function(t,e){t=mt.wrap(t,-180,180);var r=Math.abs(t-e);return Math.abs(t-360-e)<r&&(t-=360),Math.abs(t+360-e)<r&&(t+=360),t},$i.prototype._normalizeCenter=function(t){var e=this.transform;if(e.renderWorldCopies&&!e.lngRange){var r=t.lng-e.center.lng;t.lng+=180<r?-360:r<-180?360:0}},$i);function $i(t,e){Wi.call(this),this._moving=!1,this._zooming=!1,this.transform=t,this._bearingSnap=e.bearingSnap,mt.bindAll(["_renderFrameCallback"],this)}Gi.prototype.getDefaultPosition=function(){return"bottom-right"},Gi.prototype.onAdd=function(t){var e=this.options&&this.options.compact;return this._map=t,this._container=v.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=v.create("div","mapboxgl-ctrl-attrib-inner",this._container),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Gi.prototype.onRemove=function(){v.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0},Gi.prototype._updateEditLink=function(){var t=this._editLink;t=t||(this._editLink=this._container.querySelector(".mapbox-improve-map"));var n=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:mt.config.ACCESS_TOKEN}];if(t){var e=n.reduce(function(t,e,r){return e.value&&(t+=e.key+"="+e.value+(r<n.length-1?"&":"")),t},"?");t.href=mt.config.FEEDBACK_URL+"/"+e+(this._map._hash?this._map._hash.getHashString(!0):""),t.rel="noopener"}},Gi.prototype._updateData=function(t){!t||"metadata"!==t.sourceDataType&&"style"!==t.dataType||(this._updateAttributions(),this._updateEditLink())},Gi.prototype._updateAttributions=function(){if(this._map.style){var n=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?n=n.concat(this.options.customAttribution.map(function(t){return"string"!=typeof t?"":t})):"string"==typeof this.options.customAttribution&&n.push(this.options.customAttribution)),this._map.style.stylesheet){var t=this._map.style.stylesheet;this.styleOwner=t.owner,this.styleId=t.id}var e=this._map.style.sourceCaches;for(var r in e){var i=e[r];if(i.used){var o=i.getSource();o.attribution&&n.indexOf(o.attribution)<0&&n.push(o.attribution)}}n.sort(function(t,e){return t.length-e.length}),(n=n.filter(function(t,e){for(var r=e+1;r<n.length;r++)if(0<=n[r].indexOf(t))return!1;return!0})).length?(this._innerContainer.innerHTML=n.join(" | "),this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null}},Gi.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};function Ki(){mt.bindAll(["_updateLogo"],this),mt.bindAll(["_updateCompact"],this)}Ki.prototype.onAdd=function(t){this._map=t,this._container=v.create("div","mapboxgl-ctrl");var e=v.create("a","mapboxgl-ctrl-logo");return e.target="_blank",e.rel="noopener",e.href="https://www.mapbox.com/",e.setAttribute("aria-label","Mapbox logo"),e.setAttribute("rel","noopener"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Ki.prototype.onRemove=function(){v.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Ki.prototype.getDefaultPosition=function(){return"bottom-left"},Ki.prototype._updateLogo=function(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},Ki.prototype._logoRequired=function(){if(this._map.style){var t=this._map.style.sourceCaches;for(var e in t)if(t[e].getSource().mapbox_logo)return!0;return!1}},Ki.prototype._updateCompact=function(){var t=this._container.children;if(t.length){var e=t[0];this._map.getCanvasContainer().offsetWidth<250?e.classList.add("mapboxgl-compact"):e.classList.remove("mapboxgl-compact")}};function Ji(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}Ji.prototype.add=function(t){var e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e},Ji.prototype.remove=function(t){for(var e=this._currentlyRunning,r=0,n=e?this._queue.concat(e):this._queue;r<n.length;r+=1){var i=n[r];if(i.id===t)return void(i.cancelled=!0)}},Ji.prototype.run=function(){var t=this._currentlyRunning=this._queue;this._queue=[];for(var e=0,r=t;e<r.length;e+=1){var n=r[e];if(!n.cancelled&&(n.callback(),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Ji.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Yi=mt.window.HTMLImageElement,Qi=mt.window.HTMLElement,to={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:0,maxZoom:22,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,clickTolerance:3,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},eo=function(s){function t(t){var e=this;if(null!=(t=mt.extend({},to,t)).minZoom&&null!=t.maxZoom&&t.minZoom>t.maxZoom)throw new Error("maxZoom must be greater than minZoom");var r=new Ai(t.minZoom,t.maxZoom,t.renderWorldCopies);s.call(this,r,t),this._interactive=t.interactive,this._maxTileCacheSize=t.maxTileCacheSize,this._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=t.preserveDrawingBuffer,this._antialias=t.antialias,this._trackResize=t.trackResize,this._bearingSnap=t.bearingSnap,this._refreshExpiredTiles=t.refreshExpiredTiles,this._fadeDuration=t.fadeDuration,this._crossSourceCollisions=t.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=t.collectResourceTiming,this._renderTaskQueue=new Ji,this._controls=[],this._mapId=mt.uniqueId();var n=t.transformRequest;if(this._transformRequest=n?function(t,e){return n(t,e)||{url:t}}:function(t){return{url:t}},"string"==typeof t.container){if(this._container=mt.window.document.getElementById(t.container),!this._container)throw new Error("Container '"+t.container+"' not found.")}else{if(!(t.container instanceof Qi))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=t.container}if(t.maxBounds&&this.setMaxBounds(t.maxBounds),mt.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return e._update(!1)}),this.on("moveend",function(){return e._update(!1)}),this.on("zoom",function(){return e._update(!0)}),void 0!==mt.window&&(mt.window.addEventListener("online",this._onWindowOnline,!1),mt.window.addEventListener("resize",this._onWindowResize,!1)),function(r,n){var i=r.getCanvasContainer(),o=null,a=!1,s=null;for(var t in Hi)r[t]=new Hi[t](r,n),n.interactive&&n[t]&&r[t].enable(n[t]);v.addEventListener(i,"mouseout",function(t){r.fire(new zi("mouseout",r,t))}),v.addEventListener(i,"mousedown",function(t){a=!0,s=v.mousePos(i,t);var e=new zi("mousedown",r,t);r.fire(e),e.defaultPrevented||(n.interactive&&!r.doubleClickZoom.isActive()&&r.stop(),r.boxZoom.onMouseDown(t),r.boxZoom.isActive()||r.dragPan.isActive()||r.dragRotate.onMouseDown(t),r.boxZoom.isActive()||r.dragRotate.isActive()||r.dragPan.onMouseDown(t))}),v.addEventListener(i,"mouseup",function(t){var e=r.dragRotate.isActive();o&&!e&&r.fire(new zi("contextmenu",r,o)),o=null,a=!1,r.fire(new zi("mouseup",r,t))}),v.addEventListener(i,"mousemove",function(t){if(!r.dragPan.isActive()&&!r.dragRotate.isActive()){for(var e=t.target;e&&e!==i;)e=e.parentNode;e===i&&r.fire(new zi("mousemove",r,t))}}),v.addEventListener(i,"mouseover",function(t){for(var e=t.target;e&&e!==i;)e=e.parentNode;e===i&&r.fire(new zi("mouseover",r,t))}),v.addEventListener(i,"touchstart",function(t){var e=new Li("touchstart",r,t);r.fire(e),e.defaultPrevented||(n.interactive&&r.stop(),r.boxZoom.isActive()||r.dragRotate.isActive()||r.dragPan.onTouchStart(t),r.touchZoomRotate.onStart(t),r.doubleClickZoom.onTouchStart(e))},{passive:!1}),v.addEventListener(i,"touchmove",function(t){r.fire(new Li("touchmove",r,t))},{passive:!1}),v.addEventListener(i,"touchend",function(t){r.fire(new Li("touchend",r,t))}),v.addEventListener(i,"touchcancel",function(t){r.fire(new Li("touchcancel",r,t))}),v.addEventListener(i,"click",function(t){var e=v.mousePos(i,t);(e.equals(s)||e.dist(s)<n.clickTolerance)&&r.fire(new zi("click",r,t))}),v.addEventListener(i,"dblclick",function(t){var e=new zi("dblclick",r,t);r.fire(e),e.defaultPrevented||r.doubleClickZoom.onDblClick(e)}),v.addEventListener(i,"contextmenu",function(t){var e=r.dragRotate.isActive();a||e?a&&(o=t):r.fire(new zi("contextmenu",r,t)),(r.dragRotate.isEnabled()||r.listens("contextmenu"))&&t.preventDefault()}),v.addEventListener(i,"wheel",function(t){n.interactive&&r.stop();var e=new Oi("wheel",r,t);r.fire(e),e.defaultPrevented||r.scrollZoom.onWheel(t)},{passive:!1})}(this,t),this._hash=t.hash&&(new Ii).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),t.bounds&&(this.resize(),this.fitBounds(t.bounds,mt.extend({},t.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=t.localIdeographFontFamily,t.style&&this.setStyle(t.style,{localIdeographFontFamily:t.localIdeographFontFamily}),t.attributionControl&&this.addControl(new Gi({customAttribution:t.customAttribution})),this.addControl(new Ki,t.logoPosition),this.on("style.load",function(){e.transform.unmodified&&e.jumpTo(e.style.stylesheet)}),this.on("data",function(t){e._update("style"===t.dataType),e.fire(new mt.Event(t.dataType+"data",t))}),this.on("dataloading",function(t){e.fire(new mt.Event(t.dataType+"dataloading",t))})}s&&(t.__proto__=s);var e={showTileBoundaries:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0}};return((t.prototype=Object.create(s&&s.prototype)).constructor=t).prototype._getMapId=function(){return this._mapId},t.prototype.addControl=function(t,e){if(void 0===e&&t.getDefaultPosition&&(e=t.getDefaultPosition()),void 0===e&&(e="top-right"),!t||!t.onAdd)return this.fire(new mt.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var r=t.onAdd(this);this._controls.push(t);var n=this._controlPositions[e];return-1!==e.indexOf("bottom")?n.insertBefore(r,n.firstChild):n.appendChild(r),this},t.prototype.removeControl=function(t){if(!t||!t.onRemove)return this.fire(new mt.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var e=this._controls.indexOf(t);return-1<e&&this._controls.splice(e,1),t.onRemove(this),this},t.prototype.resize=function(t){var e=this._containerDimensions(),r=e[0],n=e[1];return this._resizeCanvas(r,n),this.transform.resize(r,n),this.painter.resize(r,n),this.fire(new mt.Event("movestart",t)).fire(new mt.Event("move",t)).fire(new mt.Event("resize",t)).fire(new mt.Event("moveend",t)),this},t.prototype.getBounds=function(){return this.transform.getBounds()},t.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},t.prototype.setMaxBounds=function(t){return this.transform.setMaxBounds(mt.LngLatBounds.convert(t)),this._update()},t.prototype.setMinZoom=function(t){if(0<=(t=null==t?0:t)&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between 0 and the current maxZoom, inclusive")},t.prototype.getMinZoom=function(){return this.transform.minZoom},t.prototype.setMaxZoom=function(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")},t.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},t.prototype.setRenderWorldCopies=function(t){return this.transform.renderWorldCopies=t,this._update()},t.prototype.getMaxZoom=function(){return this.transform.maxZoom},t.prototype.project=function(t){return this.transform.locationPoint(mt.LngLat.convert(t))},t.prototype.unproject=function(t){return this.transform.pointLocation(mt.Point.convert(t))},t.prototype.isMoving=function(){return this._moving||this.dragPan.isActive()||this.dragRotate.isActive()||this.scrollZoom.isActive()},t.prototype.isZooming=function(){return this._zooming||this.scrollZoom.isZooming()},t.prototype.isRotating=function(){return this._rotating||this.dragRotate.isActive()},t.prototype.on=function(n,i,o){var a=this;if(void 0===o)return s.prototype.on.call(this,n,i);var t=function(){var t;if("mouseenter"===n||"mouseover"===n){var r=!1;return{layer:i,listener:o,delegates:{mousemove:function(t){var e=a.getLayer(i)?a.queryRenderedFeatures(t.point,{layers:[i]}):[];e.length?r||(r=!0,o.call(a,new zi(n,a,t.originalEvent,{features:e}))):r=!1},mouseout:function(){r=!1}}}}if("mouseleave"!==n&&"mouseout"!==n)return{layer:i,listener:o,delegates:(t={},t[n]=function(t){var e=a.getLayer(i)?a.queryRenderedFeatures(t.point,{layers:[i]}):[];e.length&&(t.features=e,o.call(a,t),delete t.features)},t)};var e=!1;return{layer:i,listener:o,delegates:{mousemove:function(t){(a.getLayer(i)?a.queryRenderedFeatures(t.point,{layers:[i]}):[]).length?e=!0:e&&(e=!1,o.call(a,new zi(n,a,t.originalEvent)))},mouseout:function(t){e&&(e=!1,o.call(a,new zi(n,a,t.originalEvent)))}}}}();for(var e in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[n]=this._delegatedListeners[n]||[],this._delegatedListeners[n].push(t),t.delegates)this.on(e,t.delegates[e]);return this},t.prototype.off=function(t,e,r){if(void 0===r)return s.prototype.off.call(this,t,e);if(this._delegatedListeners&&this._delegatedListeners[t])for(var n=this._delegatedListeners[t],i=0;i<n.length;i++){var o=n[i];if(o.layer===e&&o.listener===r){for(var a in o.delegates)this.off(a,o.delegates[a]);return n.splice(i,1),this}}return this},t.prototype.queryRenderedFeatures=function(t,e){if(!this.style)return[];var r;if(void 0!==e||void 0===t||t instanceof mt.Point||Array.isArray(t)||(e=t,t=void 0),e=e||{},(t=t||[[0,0],[this.transform.width,this.transform.height]])instanceof mt.Point||"number"==typeof t[0])r=[mt.Point.convert(t)];else{var n=mt.Point.convert(t[0]),i=mt.Point.convert(t[1]);r=[n,new mt.Point(i.x,n.y),i,new mt.Point(n.x,i.y),n]}return this.style.queryRenderedFeatures(r,e,this.transform)},t.prototype.querySourceFeatures=function(t,e){return this.style.querySourceFeatures(t,e)},t.prototype.setStyle=function(t,e){return!1!==(e=mt.extend({},{localIdeographFontFamily:to.localIdeographFontFamily},e)).diff&&e.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&t?(this._diffStyle(t,e),this):(this._localIdeographFontFamily=e.localIdeographFontFamily,this._updateStyle(t,e))},t.prototype._updateStyle=function(t,e){return this.style&&(this.style.setEventedParent(null),this.style._remove()),t?(this.style=new dn(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t)):delete this.style,this},t.prototype._diffStyle=function(t,r){var n=this;if("string"==typeof t){var e=mt.normalizeStyleURL(t),i=this._transformRequest(e,mt.ResourceType.Style);mt.getJSON(i,function(t,e){t?n.fire(new mt.ErrorEvent(t)):e&&n._updateDiff(e,r)})}else"object"==typeof t&&this._updateDiff(t,r)},t.prototype._updateDiff=function(e,r){try{this.style.setState(e)&&this._update(!0)}catch(t){mt.warnOnce("Unable to perform style diff: "+(t.message||t.error||t)+".  Rebuilding the style from scratch."),this._updateStyle(e,r)}},t.prototype.getStyle=function(){if(this.style)return this.style.serialize()},t.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():mt.warnOnce("There is no style added to the map.")},t.prototype.addSource=function(t,e){return this.style.addSource(t,e),this._update(!0)},t.prototype.isSourceLoaded=function(t){var e=this.style&&this.style.sourceCaches[t];if(void 0!==e)return e.loaded();this.fire(new mt.ErrorEvent(new Error("There is no source with ID '"+t+"'")))},t.prototype.areTilesLoaded=function(){var t=this.style&&this.style.sourceCaches;for(var e in t){var r=t[e]._tiles;for(var n in r){var i=r[n];if("loaded"!==i.state&&"errored"!==i.state)return!1}}return!0},t.prototype.addSourceType=function(t,e,r){return this.style.addSourceType(t,e,r)},t.prototype.removeSource=function(t){return this.style.removeSource(t),this._update(!0)},t.prototype.getSource=function(t){return this.style.getSource(t)},t.prototype.addImage=function(t,e,r){void 0===r&&(r={});var n=r.pixelRatio;void 0===n&&(n=1);var i=r.sdf;if(void 0===i&&(i=!1),e instanceof Yi){var o=mt.browser.getImageData(e),a=o.width,s=o.height,l=o.data;this.style.addImage(t,{data:new mt.RGBAImage({width:a,height:s},l),pixelRatio:n,sdf:i,version:0})}else{if(void 0===e.width||void 0===e.height)return this.fire(new mt.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var u=e.width,c=e.height,p=e.data,h=e;this.style.addImage(t,{data:new mt.RGBAImage({width:u,height:c},new Uint8Array(p)),pixelRatio:n,sdf:i,version:0,userImage:h}),h.onAdd&&h.onAdd(this,t)}},t.prototype.updateImage=function(t,e){var r=this.style.getImage(t);if(!r)return this.fire(new mt.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var n=e instanceof Yi?mt.browser.getImageData(e):e,i=n.width,o=n.height,a=n.data;if(void 0===i||void 0===o)return this.fire(new mt.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(i!==r.data.width||o!==r.data.height)return this.fire(new mt.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));var s=!(e instanceof Yi);r.data.replace(a,s),this.style.updateImage(t,r)},t.prototype.hasImage=function(t){return t?!!this.style.getImage(t):(this.fire(new mt.ErrorEvent(new Error("Missing required image id"))),!1)},t.prototype.removeImage=function(t){this.style.removeImage(t)},t.prototype.loadImage=function(t,e){mt.getImage(this._transformRequest(t,mt.ResourceType.Image),e)},t.prototype.listImages=function(){return this.style.listImages()},t.prototype.addLayer=function(t,e){return this.style.addLayer(t,e),this._update(!0)},t.prototype.moveLayer=function(t,e){return this.style.moveLayer(t,e),this._update(!0)},t.prototype.removeLayer=function(t){return this.style.removeLayer(t),this._update(!0)},t.prototype.getLayer=function(t){return this.style.getLayer(t)},t.prototype.setFilter=function(t,e,r){return void 0===r&&(r={}),this.style.setFilter(t,e,r),this._update(!0)},t.prototype.setLayerZoomRange=function(t,e,r){return this.style.setLayerZoomRange(t,e,r),this._update(!0)},t.prototype.getFilter=function(t){return this.style.getFilter(t)},t.prototype.setPaintProperty=function(t,e,r,n){return void 0===n&&(n={}),this.style.setPaintProperty(t,e,r,n),this._update(!0)},t.prototype.getPaintProperty=function(t,e){return this.style.getPaintProperty(t,e)},t.prototype.setLayoutProperty=function(t,e,r,n){return void 0===n&&(n={}),this.style.setLayoutProperty(t,e,r,n),this._update(!0)},t.prototype.getLayoutProperty=function(t,e){return this.style.getLayoutProperty(t,e)},t.prototype.setLight=function(t,e){return void 0===e&&(e={}),this.style.setLight(t,e),this._update(!0)},t.prototype.getLight=function(){return this.style.getLight()},t.prototype.setFeatureState=function(t,e){return this.style.setFeatureState(t,e),this._update()},t.prototype.removeFeatureState=function(t,e){return this.style.removeFeatureState(t,e),this._update()},t.prototype.getFeatureState=function(t){return this.style.getFeatureState(t)},t.prototype.getContainer=function(){return this._container},t.prototype.getCanvasContainer=function(){return this._canvasContainer},t.prototype.getCanvas=function(){return this._canvas},t.prototype._containerDimensions=function(){var t=0,e=0;return this._container&&(t=this._container.clientWidth||400,e=this._container.clientHeight||300),[t,e]},t.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==mt.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&mt.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},t.prototype._setupContainer=function(){var t=this._container;t.classList.add("mapboxgl-map"),(this._missingCSSCanary=v.create("div","mapboxgl-canary",t)).style.visibility="hidden",this._detectMissingCSS();var e=this._canvasContainer=v.create("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=v.create("canvas","mapboxgl-canvas",e),this._canvas.style.position="absolute",this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var r=this._containerDimensions();this._resizeCanvas(r[0],r[1]);var n=this._controlContainer=v.create("div","mapboxgl-control-container",t),i=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(t){i[t]=v.create("div","mapboxgl-ctrl-"+t,n)})},t.prototype._resizeCanvas=function(t,e){var r=mt.window.devicePixelRatio||1;this._canvas.width=r*t,this._canvas.height=r*e,this._canvas.style.width=t+"px",this._canvas.style.height=e+"px"},t.prototype._setupPainter=function(){var t=mt.extend({},r.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),e=this._canvas.getContext("webgl",t)||this._canvas.getContext("experimental-webgl",t);e?(this.painter=new wi(e,this.transform),mt.webpSupported.testSupport(e)):this.fire(new mt.ErrorEvent(new Error("Failed to initialize WebGL")))},t.prototype._contextLost=function(t){t.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new mt.Event("webglcontextlost",{originalEvent:t}))},t.prototype._contextRestored=function(t){this._setupPainter(),this.resize(),this._update(),this.fire(new mt.Event("webglcontextrestored",{originalEvent:t}))},t.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},t.prototype._update=function(t){return this.style&&(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint()),this},t.prototype._requestRenderFrame=function(t){return this._update(),this._renderTaskQueue.add(t)},t.prototype._cancelRenderFrame=function(t){this._renderTaskQueue.remove(t)},t.prototype._render=function(){this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run();var t=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var e=this.transform.zoom,r=mt.browser.now();this.style.zoomHistory.update(e,r);var n=new mt.EvaluationParameters(e,{now:r,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),i=n.crossFadingFactor();1===i&&i===this._crossFadingFactor||(t=!0,this._crossFadingFactor=i),this.style.update(n)}return this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration}),this.fire(new mt.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new mt.Event("load"))),this.style&&(this.style.hasTransitions()||t)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this._sourcesDirty||this._repaint||this._styleDirty||this._placementDirty?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new mt.Event("idle")),this},t.prototype.remove=function(){this._hash&&this._hash.remove();for(var t=0,e=this._controls;t<e.length;t+=1)e[t].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.setStyle(null),void 0!==mt.window&&(mt.window.removeEventListener("resize",this._onWindowResize,!1),mt.window.removeEventListener("online",this._onWindowOnline,!1));var r=this.painter.context.gl.getExtension("WEBGL_lose_context");r&&r.loseContext(),ro(this._canvasContainer),ro(this._controlContainer),ro(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this.fire(new mt.Event("remove"))},t.prototype.triggerRepaint=function(){var t=this;this.style&&!this._frame&&(this._frame=mt.browser.frame(function(){t._frame=null,t._render()}))},t.prototype._onWindowOnline=function(){this._update()},t.prototype._onWindowResize=function(){this._trackResize&&this.resize()._update()},e.showTileBoundaries.get=function(){return!!this._showTileBoundaries},e.showTileBoundaries.set=function(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())},e.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},e.showCollisionBoxes.set=function(t){this._showCollisionBoxes!==t&&((this._showCollisionBoxes=t)?this.style._generateCollisionBoxes():this._update())},e.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},e.showOverdrawInspector.set=function(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())},e.repaint.get=function(){return!!this._repaint},e.repaint.set=function(t){this._repaint!==t&&(this._repaint=t,this.triggerRepaint())},e.vertices.get=function(){return!!this._vertices},e.vertices.set=function(t){this._vertices=t,this._update()},Object.defineProperties(t.prototype,e),t}(Xi);function ro(t){t.parentNode&&t.parentNode.removeChild(t)}function no(t){var e=this;this.options=mt.extend({},io,t),this._container=v.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this.options.showZoom&&(mt.bindAll(["_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-in","Zoom in",function(){return e._map.zoomIn()}),this._zoomOutButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-out","Zoom out",function(){return e._map.zoomOut()})),this.options.showCompass&&(mt.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-compass","Reset bearing to north",function(){return e._map.resetNorth()}),this._compassArrow=v.create("span","mapboxgl-ctrl-compass-arrow",this._compass))}var io={showCompass:!0,showZoom:!0};function oo(t,e,r){if(t=new mt.LngLat(t.lng,t.lat),e){var n=new mt.LngLat(t.lng-360,t.lat),i=new mt.LngLat(t.lng+360,t.lat),o=r.locationPoint(t).distSqr(e);r.locationPoint(n).distSqr(e)<o?t=n:r.locationPoint(i).distSqr(e)<o&&(t=i)}for(;180<Math.abs(t.lng-r.center.lng);){var a=r.locationPoint(t);if(0<=a.x&&0<=a.y&&a.x<=r.width&&a.y<=r.height)break;t.lng>r.center.lng?t.lng-=360:t.lng+=360}return t}no.prototype._updateZoomButtons=function(){var t=this._map.getZoom();this._zoomInButton.classList.toggle("mapboxgl-ctrl-icon-disabled",t===this._map.getMaxZoom()),this._zoomOutButton.classList.toggle("mapboxgl-ctrl-icon-disabled",t===this._map.getMinZoom())},no.prototype._rotateCompassArrow=function(){var t="rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassArrow.style.transform=t},no.prototype.onAdd=function(t){return this._map=t,this.options.showZoom&&(this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ri(t,{button:"left",element:this._compass}),v.addEventListener(this._compass,"mousedown",this._handler.onMouseDown),this._handler.enable()),this._container},no.prototype.onRemove=function(){v.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this._map.off("rotate",this._rotateCompassArrow),v.removeEventListener(this._compass,"mousedown",this._handler.onMouseDown),this._handler.disable(),delete this._handler),delete this._map},no.prototype._createButton=function(t,e,r){var n=v.create("button",t,this._container);return n.type="button",n.title=e,n.setAttribute("aria-label",e),n.addEventListener("click",r),n};var ao={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function so(t,e,r){var n=t.classList;for(var i in ao)n.remove("mapboxgl-"+r+"-anchor-"+i);n.add("mapboxgl-"+r+"-anchor-"+e)}var lo,uo,co=((uo=mt.Evented)&&(ho.__proto__=uo),((ho.prototype=Object.create(uo&&uo.prototype)).constructor=ho).prototype.addTo=function(t){return this.remove(),(this._map=t).getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},ho.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),delete this._map),v.remove(this._element),this._popup&&this._popup.remove(),this},ho.prototype.getLngLat=function(){return this._lngLat},ho.prototype.setLngLat=function(t){return this._lngLat=mt.LngLat.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},ho.prototype.getElement=function(){return this._element},ho.prototype.setPopup=function(t){if(this._popup&&(this._popup.remove(),this._popup=null),t){if(!("offset"in t.options)){var e=Math.sqrt(Math.pow(13.5,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[e,-1*(24.6+e)],"bottom-right":[-e,-1*(24.6+e)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat)}return this},ho.prototype._onMapClick=function(t){var e=t.originalEvent.target,r=this._element;this._popup&&(e===r||r.contains(e))&&this.togglePopup()},ho.prototype.getPopup=function(){return this._popup},ho.prototype.togglePopup=function(){var t=this._popup;return t&&(t.isOpen()?t.remove():t.addTo(this._map)),this},ho.prototype._update=function(t){this._map&&(this._map.transform.renderWorldCopies&&(this._lngLat=oo(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset),t&&"moveend"!==t.type||(this._pos=this._pos.round()),v.setTransform(this._element,ao[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px)"))},ho.prototype.getOffset=function(){return this._offset},ho.prototype.setOffset=function(t){return this._offset=mt.Point.convert(t),this._update(),this},ho.prototype._onMove=function(t){this._pos=t.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new mt.Event("dragstart"))),this.fire(new mt.Event("drag"))},ho.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new mt.Event("dragend")),this._state="inactive"},ho.prototype._addDragHandler=function(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},ho.prototype.setDraggable=function(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},ho.prototype.isDraggable=function(){return this._draggable},ho),po={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0};function ho(t,e){if(uo.call(this),(t instanceof mt.window.HTMLElement||e)&&(t=mt.extend({element:t},e)),mt.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick"],this),this._anchor=t&&t.anchor||"center",this._color=t&&t.color||"#3FB1CE",this._draggable=t&&t.draggable||!1,this._state="inactive",t&&t.element)this._element=t.element,this._offset=mt.Point.convert(t&&t.offset||[0,0]);else{this._defaultMarker=!0,this._element=v.create("div");var r=v.createNS("http://www.w3.org/2000/svg","svg");r.setAttributeNS(null,"display","block"),r.setAttributeNS(null,"height","41px"),r.setAttributeNS(null,"width","27px"),r.setAttributeNS(null,"viewBox","0 0 27 41");var n=v.createNS("http://www.w3.org/2000/svg","g");n.setAttributeNS(null,"stroke","none"),n.setAttributeNS(null,"stroke-width","1"),n.setAttributeNS(null,"fill","none"),n.setAttributeNS(null,"fill-rule","evenodd");var i=v.createNS("http://www.w3.org/2000/svg","g");i.setAttributeNS(null,"fill-rule","nonzero");var o=v.createNS("http://www.w3.org/2000/svg","g");o.setAttributeNS(null,"transform","translate(3.0, 29.0)"),o.setAttributeNS(null,"fill","#000000");for(var a=0,s=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];a<s.length;a+=1){var l=s[a],u=v.createNS("http://www.w3.org/2000/svg","ellipse");u.setAttributeNS(null,"opacity","0.04"),u.setAttributeNS(null,"cx","10.5"),u.setAttributeNS(null,"cy","5.80029008"),u.setAttributeNS(null,"rx",l.rx),u.setAttributeNS(null,"ry",l.ry),o.appendChild(u)}var c=v.createNS("http://www.w3.org/2000/svg","g");c.setAttributeNS(null,"fill",this._color);var p=v.createNS("http://www.w3.org/2000/svg","path");p.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),c.appendChild(p);var h=v.createNS("http://www.w3.org/2000/svg","g");h.setAttributeNS(null,"opacity","0.25"),h.setAttributeNS(null,"fill","#000000");var f=v.createNS("http://www.w3.org/2000/svg","path");f.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),h.appendChild(f);var d=v.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"transform","translate(6.0, 7.0)"),d.setAttributeNS(null,"fill","#FFFFFF");var m=v.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"transform","translate(8.0, 8.0)");var y=v.createNS("http://www.w3.org/2000/svg","circle");y.setAttributeNS(null,"fill","#000000"),y.setAttributeNS(null,"opacity","0.25"),y.setAttributeNS(null,"cx","5.5"),y.setAttributeNS(null,"cy","5.5"),y.setAttributeNS(null,"r","5.4999962");var g=v.createNS("http://www.w3.org/2000/svg","circle");g.setAttributeNS(null,"fill","#FFFFFF"),g.setAttributeNS(null,"cx","5.5"),g.setAttributeNS(null,"cy","5.5"),g.setAttributeNS(null,"r","5.4999962"),m.appendChild(y),m.appendChild(g),i.appendChild(o),i.appendChild(c),i.appendChild(h),i.appendChild(d),i.appendChild(m),r.appendChild(i),this._element.appendChild(r),this._offset=mt.Point.convert(t&&t.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(t){t.preventDefault()}),so(this._element,this._anchor,"marker"),this._popup=null}function fo(t){this.options=mt.extend({},go,t),mt.bindAll(["_onMove","setUnit"],this)}var mo,yo=((mo=mt.Evented)&&(vo.__proto__=mo),((vo.prototype=Object.create(mo&&mo.prototype)).constructor=vo).prototype.onAdd=function(t){var e;return this._map=t,this._container=v.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),e=this._setupUI,void 0!==lo?e(lo):void 0!==mt.window.navigator.permissions?mt.window.navigator.permissions.query({name:"geolocation"}).then(function(t){lo="denied"!==t.state,e(lo)}):(lo=!!mt.window.navigator.geolocation,e(lo)),this._container},vo.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(mt.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),v.remove(this._container),this._map=void 0},vo.prototype._onSuccess=function(t){if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(t),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new mt.Event("geolocate",t)),this._finish()},vo.prototype._updateCamera=function(t){var e=new mt.LngLat(t.coords.longitude,t.coords.latitude),r=t.coords.accuracy,n=this._map.getBearing(),i=mt.extend({bearing:n},this.options.fitBoundsOptions);this._map.fitBounds(e.toBounds(r),i,{geolocateSource:!0})},vo.prototype._updateMarker=function(t){t?this._userLocationDotMarker.setLngLat([t.coords.longitude,t.coords.latitude]).addTo(this._map):this._userLocationDotMarker.remove()},vo.prototype._onError=function(t){if(this.options.trackUserLocation)if(1===t.code)this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),void 0!==this._geolocationWatchID&&this._clearWatch();else switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new mt.Event("error",t)),this._finish()},vo.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},vo.prototype._setupUI=function(t){var e=this;!1!==t?(this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this._geolocateButton=v.create("button","mapboxgl-ctrl-icon mapboxgl-ctrl-geolocate",this._container),this._geolocateButton.type="button",this._geolocateButton.setAttribute("aria-label","Geolocate"),this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=v.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new co(this._dotElement),this.options.trackUserLocation&&(this._watchState="OFF")),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(t){t.geolocateSource||"ACTIVE_LOCK"!==e._watchState||(e._watchState="BACKGROUND",e._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),e._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),e.fire(new mt.Event("trackuserlocationend")))})):mt.warnOnce("Geolocation support is not available, the GeolocateControl will not be visible.")},vo.prototype.trigger=function(){if(!this._setup)return mt.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new mt.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new mt.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new mt.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}"OFF"===this._watchState&&void 0!==this._geolocationWatchID?this._clearWatch():void 0===this._geolocationWatchID&&(this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._geolocationWatchID=mt.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,this.options.positionOptions))}else mt.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},vo.prototype._clearWatch=function(){mt.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},vo),go={maxWidth:100,unit:"metric"};function vo(t){mo.call(this),this.options=mt.extend({},po,t),mt.bindAll(["_onSuccess","_onError","_finish","_setupUI","_updateCamera","_updateMarker"],this)}function _o(t,e,r){var n,i,o,a,s,l,u=r&&r.maxWidth||100,c=t._container.clientHeight/2,p=(n=t.unproject([0,c]),i=t.unproject([u,c]),o=Math.PI/180,a=n.lat*o,s=i.lat*o,l=Math.sin(a)*Math.sin(s)+Math.cos(a)*Math.cos(s)*Math.cos((i.lng-n.lng)*o),6371e3*Math.acos(Math.min(l,1)));if(r&&"imperial"===r.unit){var h=3.2808*p;5280<h?bo(e,u,h/5280,"mi"):bo(e,u,h,"ft")}else r&&"nautical"===r.unit?bo(e,u,p/1852,"nm"):bo(e,u,p,"m")}function bo(t,e,r,n){var i,o,a,s,l,u=(i=r,(o=Math.pow(10,(""+Math.floor(i)).length-1))*(a=10<=(a=i/o)?10:5<=a?5:3<=a?3:2<=a?2:1<=a?1:(s=a,l=Math.pow(10,Math.ceil(-Math.log(s)/Math.LN10)),Math.round(s*l)/l))),c=u/r;"m"===n&&1e3<=u&&(u/=1e3,n="km"),t.style.width=e*c+"px",t.innerHTML=u+n}fo.prototype.getDefaultPosition=function(){return"bottom-left"},fo.prototype._onMove=function(){_o(this._map,this._container,this.options)},fo.prototype.onAdd=function(t){return this._map=t,this._container=v.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},fo.prototype.onRemove=function(){v.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},fo.prototype.setUnit=function(t){this.options.unit=t,_o(this._map,this._container,this.options)};function xo(t){this._fullscreen=!1,t&&t.container&&(t.container instanceof mt.window.HTMLElement?this._container=t.container:mt.warnOnce("Full screen control 'container' must be a DOM element.")),mt.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in mt.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in mt.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in mt.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in mt.window.document&&(this._fullscreenchange="MSFullscreenChange"),this._className="mapboxgl-ctrl"}xo.prototype.onAdd=function(t){return this._map=t,this._container||(this._container=this._map.getContainer()),this._controlContainer=v.create("div",this._className+" mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",mt.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},xo.prototype.onRemove=function(){v.remove(this._controlContainer),this._map=null,mt.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},xo.prototype._checkFullscreenSupport=function(){return!!(mt.window.document.fullscreenEnabled||mt.window.document.mozFullScreenEnabled||mt.window.document.msFullscreenEnabled||mt.window.document.webkitFullscreenEnabled)},xo.prototype._setupUI=function(){(this._fullscreenButton=v.create("button",this._className+"-icon "+this._className+"-fullscreen",this._controlContainer)).type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),mt.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},xo.prototype._updateTitle=function(){var t=this._isFullscreen()?"Exit fullscreen":"Enter fullscreen";this._fullscreenButton.setAttribute("aria-label",t),this._fullscreenButton.title=t},xo.prototype._isFullscreen=function(){return this._fullscreen},xo.prototype._changeIcon=function(){(mt.window.document.fullscreenElement||mt.window.document.mozFullScreenElement||mt.window.document.webkitFullscreenElement||mt.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle(this._className+"-shrink"),this._fullscreenButton.classList.toggle(this._className+"-fullscreen"),this._updateTitle())},xo.prototype._onClickFullscreen=function(){this._isFullscreen()?mt.window.document.exitFullscreen?mt.window.document.exitFullscreen():mt.window.document.mozCancelFullScreen?mt.window.document.mozCancelFullScreen():mt.window.document.msExitFullscreen?mt.window.document.msExitFullscreen():mt.window.document.webkitCancelFullScreen&&mt.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var wo,Eo={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},So=((wo=mt.Evented)&&(ko.__proto__=wo),((ko.prototype=Object.create(wo&&wo.prototype)).constructor=ko).prototype.addTo=function(t){return this._map=t,this._map.on("move",this._update),this.options.closeOnClick&&this._map.on("click",this._onClickClose),this._map.on("remove",this.remove),this._update(),this.fire(new mt.Event("open")),this},ko.prototype.isOpen=function(){return!!this._map},ko.prototype.remove=function(){return this._content&&v.remove(this._content),this._container&&(v.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("click",this._onClickClose),this._map.off("remove",this.remove),delete this._map),this.fire(new mt.Event("close")),this},ko.prototype.getLngLat=function(){return this._lngLat},ko.prototype.setLngLat=function(t){return this._lngLat=mt.LngLat.convert(t),this._pos=null,this._update(),this},ko.prototype.setText=function(t){return this.setDOMContent(mt.window.document.createTextNode(t))},ko.prototype.setHTML=function(t){var e,r=mt.window.document.createDocumentFragment(),n=mt.window.document.createElement("body");for(n.innerHTML=t;e=n.firstChild;)r.appendChild(e);return this.setDOMContent(r)},ko.prototype.getMaxWidth=function(){return this._container.style.maxWidth},ko.prototype.setMaxWidth=function(t){return this.options.maxWidth=t,this._update(),this},ko.prototype.setDOMContent=function(t){return this._createContent(),this._content.appendChild(t),this._update(),this},ko.prototype._createContent=function(){this._content&&v.remove(this._content),this._content=v.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=v.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClickClose))},ko.prototype._update=function(){var e=this;if(this._map&&this._lngLat&&this._content){this._container||(this._container=v.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=v.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(t){return e._container.classList.add(t)})),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&(this._lngLat=oo(this._lngLat,this._pos,this._map.transform));var t=this._pos=this._map.project(this._lngLat),r=this.options.anchor,n=function t(e){if(e){if("number"==typeof e){var r=Math.round(Math.sqrt(.5*Math.pow(e,2)));return{center:new mt.Point(0,0),top:new mt.Point(0,e),"top-left":new mt.Point(r,r),"top-right":new mt.Point(-r,r),bottom:new mt.Point(0,-e),"bottom-left":new mt.Point(r,-r),"bottom-right":new mt.Point(-r,-r),left:new mt.Point(e,0),right:new mt.Point(-e,0)}}if(e instanceof mt.Point||Array.isArray(e)){var n=mt.Point.convert(e);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:mt.Point.convert(e.center||[0,0]),top:mt.Point.convert(e.top||[0,0]),"top-left":mt.Point.convert(e["top-left"]||[0,0]),"top-right":mt.Point.convert(e["top-right"]||[0,0]),bottom:mt.Point.convert(e.bottom||[0,0]),"bottom-left":mt.Point.convert(e["bottom-left"]||[0,0]),"bottom-right":mt.Point.convert(e["bottom-right"]||[0,0]),left:mt.Point.convert(e.left||[0,0]),right:mt.Point.convert(e.right||[0,0])}}return t(new mt.Point(0,0))}(this.options.offset);if(!r){var i,o=this._container.offsetWidth,a=this._container.offsetHeight;i=t.y+n.bottom.y<a?["top"]:t.y>this._map.transform.height-a?["bottom"]:[],t.x<o/2?i.push("left"):t.x>this._map.transform.width-o/2&&i.push("right"),r=0===i.length?"bottom":i.join("-")}var s=t.add(n[r]).round();v.setTransform(this._container,ao[r]+" translate("+s.x+"px,"+s.y+"px)"),so(this._container,r,"popup")}},ko.prototype._onClickClose=function(){this.remove()},ko);function ko(t){wo.call(this),this.options=mt.extend(Object.create(Eo),t),mt.bindAll(["_update","_onClickClose","remove"],this)}var Co={version:mt.version,supported:r,setRTLTextPlugin:mt.setRTLTextPlugin,Map:eo,NavigationControl:no,GeolocateControl:yo,AttributionControl:Gi,ScaleControl:fo,FullscreenControl:xo,Popup:So,Marker:co,Style:dn,LngLat:mt.LngLat,LngLatBounds:mt.LngLatBounds,Point:mt.Point,MercatorCoordinate:mt.MercatorCoordinate,Evented:mt.Evented,config:mt.config,get accessToken(){return mt.config.ACCESS_TOKEN},set accessToken(t){mt.config.ACCESS_TOKEN=t},get baseApiUrl(){return mt.config.API_URL},set baseApiUrl(t){mt.config.API_URL=t},get workerCount(){return cr.workerCount},set workerCount(t){cr.workerCount=t},get maxParallelImageRequests(){return mt.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(t){mt.config.MAX_PARALLEL_IMAGE_REQUESTS=t},workerUrl:""};return Co}),a}()},function(t,e,r){"use strict";var i=r(27),n=r(71),o=Object.prototype.toString;function a(t){return"[object Array]"===o.call(t)}function s(t){return null!==t&&"object"==typeof t}function l(t){return"[object Function]"===o.call(t)}function u(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),a(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}t.exports={isArray:a,isArrayBuffer:function(t){return"[object ArrayBuffer]"===o.call(t)},isBuffer:n,isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:s,isUndefined:function(t){return void 0===t},isDate:function(t){return"[object Date]"===o.call(t)},isFile:function(t){return"[object File]"===o.call(t)},isBlob:function(t){return"[object Blob]"===o.call(t)},isFunction:l,isStream:function(t){return s(t)&&l(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:u,merge:function r(){var n={};function t(t,e){"object"==typeof n[e]&&"object"==typeof t?n[e]=r(n[e],t):n[e]=t}for(var e=0,i=arguments.length;e<i;e++)u(arguments[e],t);return n},extend:function(r,t,n){return u(t,function(t,e){r[e]=n&&"function"==typeof t?i(t,n):t}),r},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(t,e,X){"use strict";X.r(e);function $(i,o,a){return Object.keys(i).reduce(function(t,e){var r=o[e];if(r){var n=function(t){r(a,t)};a.on(i[e],n),t[e]=n}return t},{})}var K=X(1),J=X(0),Y=function(){return(Y=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},Q={onResize:"resize",onDblClick:"dblclick",onClick:"click",onMouseMove:"mousemove",onMouseOut:"mouseout",onMoveStart:"movestart",onMove:"move",onMoveEnd:"moveend",onMouseUp:"mouseup",onMouseDown:"mousedown",onDragStart:"dragstart",onDrag:"drag",onDragEnd:"dragend",onZoomStart:"zoomstart",onZoom:"zoom",onZoomEnd:"zoomend",onPitch:"pitch",onPitchStart:"pitchstart",onPitchEnd:"pitchend",onWebGlContextLost:"webglcontextlost",onWebGlContextRestored:"webglcontextrestored",onRemove:"remove",onContextMenu:"contextmenu",onRender:"render",onError:"error",onSourceData:"sourcedata",onDataLoading:"dataloading",onStyleDataLoading:"styledataloading",onTouchCancel:"touchcancel",onData:"data",onSourceDataLoading:"sourcedataloading",onTouchMove:"touchmove",onTouchEnd:"touchend",onTouchStart:"touchstart",onStyleData:"styledata",onBoxZoomStart:"boxzoomstart",onBoxZoomEnd:"boxzoomend",onBoxZoomCancel:"boxzoomcancel",onRotateStart:"rotatestart",onRotate:"rotate",onRotateEnd:"rotateend"},n=function(){return(n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},tt=J.createContext(void 0);function r(r){return function(e){return J.createElement(tt.Consumer,null,function(t){return J.createElement(r,n({map:t},e))})}}function i(t){var e,r,f=t.accessToken,d=t.apiUrl,n=t.minZoom,m=void 0===n?0:n,i=t.maxZoom,y=void 0===i?20:i,o=t.hash,g=void 0!==o&&o,a=t.preserveDrawingBuffer,v=void 0!==a&&a,s=t.scrollZoom,_=void 0===s||s,l=t.interactive,b=void 0===l||l,u=t.dragRotate,x=void 0===u||u,c=t.attributionControl,w=void 0===c||c,E=t.customAttribution,p=t.logoPosition,S=void 0===p?"bottom-left":p,h=t.renderWorldCopies,k=void 0===h||h,C=t.trackResize,T=void 0===C||C,A=t.touchZoomRotate,P=void 0===A||A,I=t.doubleClickZoom,M=void 0===I||I,z=t.keyboard,L=void 0===z||z,O=t.dragPan,D=void 0===O||O,R=t.boxZoom,F=void 0===R||R,B=t.refreshExpiredTiles,j=void 0===B||B,N=t.failIfMajorPerformanceCaveat,U=void 0!==N&&N,V=t.bearingSnap,q=void 0===V?7:V,Z=t.injectCSS,G=void 0===Z||Z,W=t.transformRequest;return G&&X(56),r=J.Component,et(H,r),H.prototype.componentDidMount=function(){var e=this,t=this.props,r=t.style,n=t.onStyleLoad,i=t.center,o=t.pitch,a=t.zoom,s=t.fitBounds,l=t.fitBoundsOptions,u=t.bearing,c=t.maxBounds;if(K.accessToken=f,d&&(K.config.API_URL=d),!Array.isArray(a))throw new Error("zoom need to be an array type of length 1 for reliable update");var p={preserveDrawingBuffer:v,hash:g,zoom:a[0],minZoom:m,maxZoom:y,maxBounds:c,container:this.container,center:s&&i===ot?this.calcCenter(s):i,style:r,scrollZoom:_,attributionControl:w,customAttribution:E,interactive:b,dragRotate:x,renderWorldCopies:k,trackResize:T,touchZoomRotate:P,doubleClickZoom:M,keyboard:L,dragPan:D,boxZoom:F,refreshExpiredTiles:j,logoPosition:S,bearingSnap:q,failIfMajorPerformanceCaveat:U,transformRequest:W};if(u){if(!Array.isArray(u))throw new Error("bearing need to be an array type of length 1 for reliable update");p.bearing=u[0]}if(o){if(!Array.isArray(o))throw new Error("pitch need to be an array type of length 1 for reliable update");p.pitch=o[0]}var h=new K.Map(p);this.setState({map:h}),s&&h.fitBounds(s,l),h.on("load",function(t){e._isMounted&&e.setState({ready:!0}),n&&n(h,t)}),this.listeners=$(Q,this.props,h)},H.prototype.componentWillUnmount=function(){var t=this.state.map;this._isMounted=!1,t&&t.remove()},H.prototype.componentWillReceiveProps=function(n){var t=this.state.map;if(!t)return null;this.listeners=function(e,r,n){Object.keys(Q).filter(function(t){return e[t]&&"function"!=typeof r[t]}).forEach(function(t){n.off(Q[t],e[t]),delete e[t]});var t=Object.keys(Q).filter(function(t){return!e[t]&&"function"==typeof r[t]}).reduce(function(t,e){return t[e]=Q[e],t},{}),i=$(t,r,n);return Y({},e,i)}(this.listeners,n,t);var e=t.getCenter(),r=t.getZoom(),i=t.getBearing(),o=t.getPitch(),a=this.props.zoom!==n.zoom&&(n.zoom&&n.zoom[0])!==r,s=this.props.center!==n.center&&((n.center&&n.center[0])!==e.lng||(n.center&&n.center[1])!==e.lat),l=this.props.bearing!==n.bearing&&(n.bearing&&n.bearing[0])!==i,u=this.props.pitch!==n.pitch&&(n.pitch&&n.pitch[0])!==o;if(n.maxBounds&&this.props.maxBounds!==n.maxBounds&&t.setMaxBounds(n.maxBounds),n.fitBounds){var c=this.props.fitBounds;c===n.fitBounds&&n.fitBounds.length===(c&&c.length)&&!c.filter(function(t,e){var r=n.fitBounds&&n.fitBounds[e];return t[0]!==(r&&r[0])||t[1]!==(r&&r[1])})[0]&&nt(this.props.fitBoundsOptions,n.fitBoundsOptions)||t.fitBounds(n.fitBounds,n.fitBoundsOptions)}if(a||s||l||u){var p=n.movingMethod||"flyTo",h=n.flyToOptions,f=n.animationOptions;t[p](rt({},f,h,{zoom:a&&n.zoom?n.zoom[0]:r,center:s?n.center:e,bearing:l?n.bearing:i,pitch:u?n.pitch:o}))}return nt(this.props.style,n.style)||t.setStyle(n.style),null},H.prototype.render=function(){var t=this.props,e=t.containerStyle,r=t.className,n=t.children,i=this.state.ready;return J.createElement(tt.Provider,{value:this.state.map},J.createElement("div",{ref:this.setRef,className:r,style:rt({},e)},i&&n))},(e=H).defaultProps={onStyleLoad:function(t,e){return null},center:ot,zoom:it,bearing:0,movingMethod:"flyTo",pitch:0,containerStyle:{textAlign:"left"}},e;function H(){var e=null!==r&&r.apply(this,arguments)||this;return e.state={map:void 0,ready:!1},e.listeners={},e._isMounted=!0,e.calcCenter=function(t){return[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]},e.setRef=function(t){e.container=t},e}}var o,a,s,et=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),rt=function(){return(rt=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},nt=X(12),it=[11],ot=[-.2416815,51.5285582],f=function(e,r){var n={};return Array.from(new Set(Object.keys(e).concat(Object.keys(r)))).map(function(t){e[t]!==r[t]&&(n[t]=r[t])}),n},l=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),u=function(){return(u=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},d=X(12),y={mousemove:"onMouseMove",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousedown:"onMouseDown",mouseup:"onMouseUp",click:"onClick"};function c(){var m=null!==s&&s.apply(this,arguments)||this;return m.source=u({type:"geojson"},m.props.geoJSONSourceOptions,{data:{type:"FeatureCollection",features:[]}}),m.geometry=function(t){switch(m.props.type){case"symbol":case"circle":return{type:"Point",coordinates:t};case"fill":return 1<t.length?{type:"MultiPolygon",coordinates:t}:{type:"Polygon",coordinates:t};case"line":return{type:"LineString",coordinates:t};default:return{type:"Point",coordinates:t}}},m.makeFeature=function(t,e){return{type:"Feature",geometry:m.geometry(t.coordinates),properties:u({},t.properties,{id:e})}},m.initialize=function(){var t=m.props,e=t.type,r=t.layout,n=t.paint,i=t.sourceId,o=t.before,a=t.images,s=t.id,l=t.metadata,u=t.sourceLayer,c=t.minZoom,p=t.maxZoom,h=t.filter,f=m.props.map,d={id:s,source:i||s,type:e,layout:r,paint:n,metadata:l};u&&(d["source-layer"]=u),c&&(d.minzoom=c),p&&(d.maxzoom=p),h&&(d.filter=h),a&&(Array.isArray(a[0])?a:[a]).filter(function(t){return!f.hasImage(t[0])}).forEach(function(t){f.addImage(t[0],t[1],t[2])});i||f.getSource(s)||f.addSource(s,m.source),f.getLayer(s)||f.addLayer(d,o),Object.entries(y).forEach(function(t){var e=t[0],r=t[1],n=m.props[r];n&&f.on(e,s,n)})},m.onStyleDataChange=function(){m.props.map.getLayer(m.props.id)||(m.initialize(),m.forceUpdate())},m.getChildren=function(){var t=m.props.children;return t?Array.isArray(t)?t.reduce(function(t,e){return t.concat(e)},[]):[t]:[]},m}function p(){return g+=1}var h,m=(s=J.Component,l(c,s),c.prototype.componentWillMount=function(){var t=this.props.map;this.initialize(),t.on("styledata",this.onStyleDataChange)},c.prototype.componentWillUnmount=function(){var i=this,o=this.props.map,t=this.props,e=t.images,a=t.id;o&&o.getStyle()&&(o.getLayer(a)&&o.removeLayer(a),this.props.sourceId||o.removeSource(a),e&&(Array.isArray(e[0])?e:[e]).map(function(t){var e=t[0];return t.slice(1),e}).forEach(o.removeImage),o.off("styledata",this.onStyleDataChange),Object.entries(y).forEach(function(t){var e=t[0],r=t[1],n=i.props[r];n&&o.off(e,a,n)}))},c.prototype.componentWillReceiveProps=function(o){var a=this,t=this.props,e=t.paint,r=t.layout,n=t.before,i=t.filter,s=t.id,l=t.minZoom,u=t.maxZoom,c=this.props.map;if(!d(o.paint,e)){var p=f(e,o.paint);Object.keys(p).forEach(function(t){c.setPaintProperty(s,t,p[t])})}if(!d(o.layout,r)){var h=f(r,o.layout);Object.keys(h).forEach(function(t){c.setLayoutProperty(s,t,h[t])})}o.filter&&i&&!d(o.filter,i)&&c.setFilter(s,o.filter||[]),n!==o.before&&c.moveLayer(s,o.before),l===o.minZoom&&u===o.maxZoom||c.setLayerZoomRange(s,o.minZoom,o.maxZoom),Object.entries(y).forEach(function(t){var e=t[0],r=t[1],n=a.props[r],i=o[r];n!==i&&(n&&c.off(e,s,n),i&&c.on(e,s,i))})},c.prototype.render=function(){var n=this,t=this.props.map,e=this.props,r=e.sourceId,i=e.draggedChildren,o=this.getChildren();if(i){var a=i.map(function(t){return t.key});o=o.map(function(t){var e=a.indexOf(t.key);return-1!==e?i[e]:t})}var s=o.map(function(t,e){var r=t.props;return n.makeFeature(r,e)}).filter(Boolean),l=t.getSource(r||this.props.id);return l&&!r&&l.setData&&l.setData({type:"FeatureCollection",features:s}),null},c.defaultProps={type:"symbol",layout:{},paint:{}},c),g=0,v=(h=function(t,e){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}h(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),_=function(){return(_=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function b(t){return t.replace(/(?:^\w|[A-Z]|\b\w)/g,function(t,e){return 0===e?t.toLowerCase():t.toUpperCase()}).replace(/[\s+]|-/g,"")}var x,w,E=function(t){return r=J.Component,v(e,r),e.prototype.componentWillMount=function(){var t=this.props.map;t.on("click",this.id,this.onClick),t.on("mouseenter",this.id,this.onMouseEnter),t.on("mouseleave",this.id,this.onMouseLeave),t.on("mousedown",this.id,this.onMouseDown),t.on("touchstart",this.id,this.onTouchStart)},e.prototype.componentWillUnmount=function(){var t=this.props.map;t.off("click",this.onClick),t.off("mouseenter",this.onMouseEnter),t.off("mouseleave",this.onMouseLeave),t.off("mousedown",this.onMouseDown),t.off("touchstart",this.onTouchStart)},e.prototype.render=function(){return J.createElement(t,_({},this.props,{id:this.id,map:this.props.map,draggedChildren:this.draggedChildren}))},e;function e(){var l=null!==r&&r.apply(this,arguments)||this;return l.hover=[],l.draggedChildren=void 0,l.id=l.props.id||"layer-"+p(),l.getChildren=function(){return[].concat(l.props.children).filter(function(t){return void 0!==t})},l.getChildFromId=function(t,e){return t[e]},l.areFeaturesDraggable=function(e,t){return void 0===t&&(t=l.hover),!!t.map(function(t){return!!l.getChildFromId(e,t)&&l.getChildFromId(e,t).props.draggable}).filter(Boolean).length},l.onClick=function(i){var t=i.features,o=l.getChildren(),a=l.props.map;t&&t.forEach(function(t){var e=t.properties.id;if(o){var r=l.getChildFromId(o,e),n=r&&r.props.onClick;n&&n(_({},i,{feature:t,map:a}))}})},l.onMouseEnter=function(i){var o=l.getChildren(),a=l.props.map;l.hover=[],i.features.forEach(function(t){var e=t.properties.id,r=l.getChildFromId(o,e);l.hover.push(e);var n=r&&r.props.onMouseEnter;n&&n(_({},i,{feature:t,map:a}))}),l.areFeaturesDraggable(o)&&a.dragPan.disable()},l.onMouseLeave=function(n){var i=l.getChildren(),o=l.props.map;l.areFeaturesDraggable(i)&&o.dragPan.enable(),l.hover.forEach(function(t){var e=l.getChildFromId(i,t),r=e&&e.props.onMouseLeave;r&&r(_({},n,{map:o}))}),l.draggedChildren||(l.hover=[])},l.onMouseDown=function(){l.hover.length&&l.onFeatureDown("mousedown")},l.onTouchStart=function(t){l.hover=t.features.map(function(t){return t.properties.id}),l.hover.length&&l.onFeatureDown("touchstart")},l.onFeatureDown=function(t){var e="mousedown"===t?"mousemove":"touchmove",r="mousedown"===t?"mouseup":"touchend",n=l.props.map;n.once(e,l.onFeatureDragStart),n.on(e,l.onFeatureDrag),n.once(r,function(t){n.off(e,l.onFeatureDragStart),n.off(e,l.onFeatureDrag),l.onFeatureDragEnd(t)})},l.onFeatureDragStart=function(n){var i=l.props.map,o=l.getChildren();l.hover.forEach(function(t){var e=l.getChildFromId(o,t);if(!e||e.props.draggable){var r=e&&e.props.onDragStart;r&&r(_({},n,{map:i}))}})},l.onFeatureDrag=function(n){var i=l.getChildren(),o=l.props.map,t=n.lngLat,a=t.lng,s=t.lat;l.draggedChildren=[],l.hover.forEach(function(t){var e=l.getChildFromId(i,t),r=e&&e.props.onDrag;e&&e.props.draggable&&(l.draggedChildren.push(J.cloneElement(e,{coordinates:[a,s]})),r&&r(_({},n,{map:o})))}),l.forceUpdate()},l.onFeatureDragEnd=function(n){var i=l.props.map,o=l.getChildren();l.hover.forEach(function(t){var e=l.getChildFromId(o,t),r=e&&e.props.onDragEnd;r&&e.props.draggable&&l.draggedChildren&&r(_({},n,{map:i}))}),l.draggedChildren=void 0},l}var r},S=(x=function(t,e){return(x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}x(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),k=function(){return(k=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},C=X(12),T=["symbol","line","fill","fill-extrusion","circle"],A={mousemove:"OnMouseMove",mouseenter:"OnMouseEnter",mouseleave:"OnMouseLeave",mousedown:"OnMouseDown",mouseup:"OnMouseUp",click:"OnClick"};function P(){var u=null!==w&&w.apply(this,arguments)||this;return u.id=u.props.id||"geojson-"+p(),u.source=k({type:"geojson"},u.props.sourceOptions,{data:u.props.data}),u.layerIds=[],u.buildLayerId=function(t){return u.id+"-"+t},u.createLayer=function(t){var e=u.props,r=e.before,n=e.layerOptions,i=e.map,o=u.buildLayerId(t);u.layerIds.push(o);var a=u.props[b(t)+"Paint"]||{},s=Object.keys(a).length?"visible":"none",l=u.props[b(t)+"Layout"]||{visibility:s};i.addLayer(k({id:o,source:u.id,type:t,paint:a,layout:l},n),r),u.mapLayerMouseHandlers(t)},u.mapLayerMouseHandlers=function(r){var n=u.props.map,i=u.buildLayerId(r);Object.keys(A).forEach(function(t){var e=u.props[""+b(r)+A[t]]||null;e&&n.on(t,i,e)})},u.onStyleDataChange=function(){u.props.map.getSource(u.id)||(u.unbind(),u.initialize(),u.forceUpdate())},u.isGeoJSONSource=function(t){return!!t&&"function"==typeof t.setData},u}var I,M,z=r((w=J.Component,S(P,w),P.prototype.initialize=function(){this.props.map.addSource(this.id,this.source),this.createLayer("symbol"),this.createLayer("line"),this.createLayer("fill"),this.createLayer("fill-extrusion"),this.createLayer("circle")},P.prototype.unbind=function(){var n=this,i=this.props.map;if(i.getSource(this.id)){var t=i.getStyle().layers;t&&t.filter(function(t){return t.source===n.id}).forEach(function(t){return i.removeLayer(t.id)}),i.removeSource(this.id)}T.forEach(function(r){Object.keys(A).forEach(function(t){var e=b(r)+A[t];n.props[e]&&i.off(t,n.buildLayerId(r),n.props[e])})}),this.layerIds.forEach(function(t){i.getLayer(t)&&i.removeLayer(t)})},P.prototype.componentWillMount=function(){var t=this.props.map;this.initialize(),t.on("styledata",this.onStyleDataChange)},P.prototype.componentWillUnmount=function(){var t=this.props.map;t&&t.getStyle()&&(t.off("styledata",this.onStyleDataChange),this.unbind())},P.prototype.componentWillReceiveProps=function(a){var s=this,t=this.props,e=t.data,l=t.before,r=t.layerOptions,u=t.map,n=u.getSource(this.id);if(this.isGeoJSONSource(n)){a.data!==e&&(n.setData(a.data),this.source=k({type:"geojson"},a.sourceOptions,{data:a.data}));var c=a.layerOptions&&r&&!C(a.layerOptions.filter,r.filter);T.forEach(function(r){var n=s.buildLayerId(r);a.layerOptions&&c&&u.setFilter(n,a.layerOptions.filter||[]);var t=b(r)+"Paint";if(!C(a[t],s.props[t])){var e=f(s.props[t],a[t]);Object.keys(e).forEach(function(t){u.setPaintProperty(n,t,e[t])})}var i=b(r)+"Layout";if(!C(a[i],s.props[i])){var o=f(s.props[i],a[i]);Object.keys(o).forEach(function(t){u.setLayoutProperty(n,t,o[t])})}Object.keys(A).forEach(function(t){var e=b(r)+A[t];a[e]!==s.props[e]&&(s.props[e]&&u.off(t,n,s.props[e]),a[e]&&u.on(t,n,a[e]))}),l!==a.before&&u.moveLayer(n,a.before)})}},P.prototype.render=function(){return null},P)),L=(I=function(t,e){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}I(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function O(){return null!==M&&M.apply(this,arguments)||this}var D,R,F=(M=J.Component,L(O,M),O.prototype.render=function(){return null},O),B=(D=function(t,e){return(D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}D(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),j=function(){return(j=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},N={position:"absolute",zIndex:10,display:"flex",flexDirection:"column",boxShadow:"0px 1px 4px rgba(0, 0, 0, .3)",border:"1px solid rgba(0, 0, 0, 0.1)"},U={"top-right":{top:10,right:10,bottom:"auto",left:"auto"},"top-left":{top:10,left:10,bottom:"auto",right:"auto"},"bottom-right":{bottom:10,right:10,top:"auto",left:"auto"},"bottom-left":{bottom:10,left:10,top:"auto",right:"auto"}},V={backgroundColor:"#f9f9f9",opacity:.95,transition:"background-color 0.16s ease-out",cursor:"pointer",border:0,height:26,width:26,backgroundImage:"url('https://api.mapbox.com/mapbox.js/v2.4.0/images/icons-000000@2x.png')",backgroundPosition:"0px 0px",backgroundSize:"26px 260px",outline:0},q={backgroundColor:"#fff",opacity:1},Z={borderBottom:"1px solid rgba(0, 0, 0, 0.1)",borderTopLeftRadius:2,borderTopRightRadius:2},G={backgroundPosition:"0px -26px",borderBottomLeftRadius:2,borderBottomRightRadius:2},W=[0,1],H=W[0],at=W[1],st=Object.keys(U);function lt(){var t=null!==R&&R.apply(this,arguments)||this;return t.state={hover:void 0},t.onMouseOut=function(){t.setState({hover:void 0})},t.plusOver=function(){H!==t.state.hover&&t.setState({hover:H})},t.minusOver=function(){at!==t.state.hover&&t.setState({hover:at})},t.onClickPlus=function(){t.props.onControlClick(t.props.map,t.props.zoomDiff)},t.onClickMinus=function(){t.props.onControlClick(t.props.map,-t.props.zoomDiff)},t}function ut(t,e,r){var n=function(t,e){return t.project(K.LngLat.convert(e))}(e,t.coordinates),i=vt(t.offset),o=t.anchor||function(t,e,r,n){var i=void 0===n?yt:n,o=i.offsetHeight,a=i.offsetWidth,s=[];return r.y+e.bottom.y-o<0?s=[dt[1]]:r.y+e.top.y+o>t.transform.height&&(s=[dt[2]]),r.x<a/2?s.push(dt[3]):r.x>t.transform.width-a/2&&s.push(dt[4]),0===s.length?dt[2]:s.join("-")}(e,i,n,r);return{anchor:o,position:n,offset:i[o]}}function ct(t){return t?"translate("+t.x.toFixed(0)+"px, "+t.y.toFixed(0)+"px)":""}var pt,ht,ft=r((R=J.Component,B(lt,R),lt.prototype.render=function(){var t=this.props,e=t.position,r=t.style,n=t.className,i=t.tabIndex,o=this.state.hover,a=j({},V,Z,o===H?q:{}),s=j({},V,G,o===at?q:{});return J.createElement("div",{className:n,tabIndex:i,style:j({},N,U[e],r)},J.createElement("button",{id:"zoomIn",type:"button",style:a,"aria-label":"Zoom in",onMouseOver:this.plusOver,onMouseOut:this.onMouseOut,onClick:this.onClickPlus}),J.createElement("button",{id:"zoomOut",type:"button",style:s,"aria-label":"Zoom out",onMouseOver:this.minusOver,onMouseOut:this.onMouseOut,onClick:this.onClickMinus}))},lt.defaultProps={position:st[0],zoomDiff:.5,onControlClick:function(t,e){t.zoomTo(t.getZoom()+e)}},lt)),dt=["center","top","bottom","left","right","top-left","top-right","bottom-left","bottom-right"],mt={center:"translate(-50%, -50%)",top:"translate(-50%, 0)",left:"translate(0, -50%)",right:"translate(-100%, -50%)",bottom:"translate(-50%, -100%)","top-left":"translate(0, 0)","top-right":"translate(-100%, 0)","bottom-left":"translate(0, -100%)","bottom-right":"translate(-100%, -100%)"},yt={offsetWidth:0,offsetHeight:0},gt=[0,0],vt=function(r){if(!r)return vt(new K.Point(0,0));if("number"!=typeof r)return r instanceof K.Point||Array.isArray(r)?dt.reduce(function(t,e){return t[e]=K.Point.convert(r),t},{}):dt.reduce(function(t,e){return t[e]=K.Point.convert(r[e]||gt),t},{});var t=Math.round(Math.sqrt(.5*Math.pow(r,2)));return{center:new K.Point(r,r),top:new K.Point(0,r),bottom:new K.Point(0,-r),left:new K.Point(r,0),right:new K.Point(-r,0),"top-left":new K.Point(t,t),"top-right":new K.Point(-t,t),"bottom-left":new K.Point(t,-t),"bottom-right":new K.Point(-t,-t)}},_t=(pt=function(t,e){return(pt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}pt(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),bt=function(){return(bt=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},xt={zIndex:3};function wt(){var e=null!==ht&&ht.apply(this,arguments)||this;return e.container=void 0,e.prevent=!1,e.state={},e.setContainer=function(t){t&&(e.container=t)},e.handleMapMove=function(){e.prevent||e.setState(ut(e.props,e.props.map,e.container))},e}function Et(t,e){return e?e.split(" ").concat(t).join(" "):t.join(" ")}var St,kt,Ct=r((ht=J.Component,_t(wt,ht),wt.prototype.componentDidMount=function(){this.props.map.on("move",this.handleMapMove),this.handleMapMove()},wt.prototype.havePropsChanged=function(t,e){return t.coordinates[0]!==e.coordinates[0]||t.coordinates[1]!==e.coordinates[1]||t.offset!==e.offset||t.anchor!==e.anchor},wt.prototype.componentWillReceiveProps=function(t){this.havePropsChanged(this.props,t)&&this.setState(ut(t,this.props.map,this.container))},wt.prototype.componentWillUnmount=function(){var t=this.props.map;this.prevent=!0,t.off("move",this.handleMapMove)},wt.prototype.render=function(){var t=this.props,e=t.style,r=t.children,n=t.className,i=t.onClick,o=t.onDoubleClick,a=t.onMouseEnter,s=t.onMouseLeave,l=t.onScroll,u=t.onWheel,c=t.type,p=t.tabIndex,h=this.state.anchor,f=bt({},xt,e,{transform:function(t){var e=t.anchor,r=t.position,n=t.offset,i=[];return r&&i.push(ct(r)),n&&void 0!==n.x&&void 0!==n.y&&i.push(ct(n)),e&&i.push(mt[e]),i}(this.state).join(" ")}),d=h&&"popup"===c?"mapboxgl-popup-anchor-"+h:"";return J.createElement("div",{className:n+" "+d,onClick:i,onDoubleClick:o,onMouseEnter:a,onMouseLeave:s,onScroll:l,onWheel:u,style:f,ref:this.setContainer,tabIndex:p},r)},wt.defaultProps={offset:0,onClick:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t}},wt)),Tt=(St=function(t,e){return(St=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}St(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),At=function(){return(At=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},Pt=["mapboxgl-popup"];function It(){return null!==kt&&kt.apply(this,arguments)||this}var Mt,zt,Lt=(kt=J.Component,Tt(It,kt),It.prototype.render=function(){var t=this.props,e=t.children,r=t.className,n=At({},this.props,{children:void 0}),i=Et(Pt,r);return J.createElement(Ct,At({},n,{type:"popup",className:i}),J.createElement("div",{className:"mapboxgl-popup-tip"}),J.createElement("div",{className:"mapboxgl-popup-content"},e))},It),Ot=(Mt=function(t,e){return(Mt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Mt(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Dt=function(){return(Dt=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},Rt=[.01,.02,.05,.1,.2,.5,1,2,5,10,20,50,100,200,500,1e3,2e3,5e3,1e4],Ft={"top-right":{top:10,right:10,bottom:"auto",left:"auto"},"top-left":{top:10,left:10,bottom:"auto",right:"auto"},"bottom-right":{bottom:10,right:10,top:"auto",left:"auto"},"bottom-left":{bottom:10,left:10,top:"auto",right:"auto"}},Bt={position:"absolute",zIndex:10,boxShadow:"0px 1px 4px rgba(0, 0, 0, .3)",border:"1px solid rgba(0, 0, 0, 0.1)",right:50,backgroundColor:"#fff",opacity:.85,display:"flex",flexDirection:"row",alignItems:"baseline",padding:"3px 7px"},jt={border:"2px solid #7e8490",boxShadow:"0px 1px 4px rgba(0, 0, 0, .3)",borderTop:"none",height:7,borderBottomLeftRadius:1,borderBottomRightRadius:1},Nt=Object.keys(Ft),Ut=["km","mi"];function Vt(){var p=null!==zt&&zt.apply(this,arguments)||this;return p.state={chosenScale:0,scaleWidth:60},p.setScale=function(){var t=p.props,e=t.measurement,r=t.map,n=r._canvas.clientWidth,i=r.getBounds(),o=i._ne,a=i._sw,s=p._getDistanceTwoPoints([a.lng,o.lat],[o.lng,o.lat],e),l=s/n*60,u=Rt.reduce(function(t,e){return!t&&l<e?e:t},0),c=u/s*n;p.setState({chosenScale:u,scaleWidth:c})},p}function qt(t){return J.createElement(Ct,Ht({},Ht({},t),{type:"marker",className:Et(Xt,t.className)}))}var Zt,Gt,Wt=r((zt=J.Component,Ot(Vt,zt),Vt.prototype.componentWillMount=function(){this.setScale(),this.props.map.on("zoomend",this.setScale)},Vt.prototype.componentWillUnmount=function(){this.props.map&&this.props.map.off("zoomend",this.setScale)},Vt.prototype._getDistanceTwoPoints=function(t,e,r){void 0===r&&(r="km");var n=t[0],i=t[1],o=e[0],a=e[1],s="km"===r?6371:6371/1.60934,l=this._deg2rad(a-i),u=this._deg2rad(o-n),c=Math.sin(l/2)*Math.sin(l/2)+Math.cos(this._deg2rad(i))*Math.cos(this._deg2rad(a))*Math.sin(u/2)*Math.sin(u/2);return s*(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)))},Vt.prototype._deg2rad=function(t){return t*(Math.PI/180)},Vt.prototype._displayMeasurement=function(t,e){return 1<=e?e+" "+t:"mi"===t?Math.floor(5280*e)+" ft":Math.floor(1e3*e)+" m"},Vt.prototype.render=function(){var t=this.props,e=t.measurement,r=t.style,n=t.position,i=t.className,o=t.tabIndex,a=this.state,s=a.chosenScale,l=a.scaleWidth;return J.createElement("div",{tabIndex:o,style:Dt({},Bt,Ft[n],r),className:i},J.createElement("div",{style:Dt({},jt,{width:l})}),J.createElement("div",{style:{paddingLeft:10}},this._displayMeasurement(e,s)))},Vt.defaultProps={measurement:Ut[0],position:Nt[2]},Vt)),Ht=function(){return(Ht=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},Xt=["mapboxgl-marker"],$t=(Zt=function(t,e){return(Zt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Zt(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Kt=function(){return(Kt=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Jt(){var o=null!==Gt&&Gt.apply(this,arguments)||this;return o.id=o.props.id,o.onStyleDataChange=function(){o.props.map.getLayer(o.id)||(o.initialize(),o.forceUpdate())},o.initialize=function(){var t=o.props.map,e=o.props,r=e.geoJsonSource,n=e.tileJsonSource,i=e.onSourceAdded;t.getSource(o.id)||!r&&!n||(r?t.addSource(o.id,r):n&&t.addSource(o.id,n),t.on("sourcedata",o.onData),i&&i(t.getSource(o.id)))},o.onData=function(){var t=o.props.map,e=t.getSource(o.props.id);if(e&&t.isSourceLoaded(o.props.id)){var r=o.props.onSourceLoaded;e&&r&&r(e),e&&o.props.geoJsonSource&&o.props.geoJsonSource.data&&e.setData(o.props.geoJsonSource.data),t.off("sourcedata",o.onData)}},o}var Yt,Qt,te=r((Gt=J.Component,$t(Jt,Gt),Jt.prototype.componentWillMount=function(){this.props.map.on("styledata",this.onStyleDataChange),this.initialize()},Jt.prototype.removeSource=function(){var e=this,r=this.props.map;if(r.getSource(this.id)){var t=r.getStyle().layers,n=void 0===t?[]:t;return(n=n.map(function(t,e){var r=(n[e+1]||{id:void 0}).id;return Kt({},t,{before:r})}).filter(function(t){return t.source===e.id})).forEach(function(t){return r.removeLayer(t.id)}),r.removeSource(this.id),n.reverse()}return[]},Jt.prototype.componentWillUnmount=function(){var t=this.props.map;t&&t.getStyle()&&(t.off("styledata",this.onStyleDataChange),this.removeSource())},Jt.prototype.componentWillReceiveProps=function(t){var e=this.props,r=e.geoJsonSource,n=e.tileJsonSource,i=e.map;if(n&&t.tileJsonSource&&(n.url!==t.tileJsonSource.url||n.tiles!==t.tileJsonSource.tiles||n.minzoom!==t.tileJsonSource.minzoom||n.maxzoom!==t.tileJsonSource.maxzoom)){var o=this.removeSource();i.addSource(this.id,t.tileJsonSource),o.forEach(function(t){return i.addLayer(t,t.before)})}r&&t.geoJsonSource&&t.geoJsonSource.data!==r.data&&t.geoJsonSource.data&&i.getSource(this.id)&&i.getSource(this.id).setData(t.geoJsonSource.data)},Jt.prototype.render=function(){return null},Jt)),ee=X(35),re=X.n(ee),ne=X(20),ie=X(21),oe=(Yt=function(t,e){return(Yt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Yt(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function ae(){var d=null!==Qt&&Qt.apply(this,arguments)||this;return d.state={superC:re()({radius:d.props.radius,maxZoom:d.props.maxZoom,minZoom:d.props.minZoom,extent:d.props.extent,nodeSize:d.props.nodeSize,log:d.props.log}),clusterPoints:[]},d.featureClusterMap=new WeakMap,d.childrenChange=function(t){var e=d.state.superC;d.featureClusterMap=new WeakMap;var r=d.childrenToFeatures(t);e.load(r)},d.mapChange=function(t){void 0===t&&(t=!1);var e=d.props.map,r=d.state,n=r.superC,i=r.clusterPoints,o=e.getZoom(),a=e.getCanvas(),s=a.width,l=a.height,u=e.unproject([0,0]).toArray(),c=e.unproject([s,0]).toArray(),p=e.unproject([s,l]).toArray(),h=e.unproject([0,l]).toArray(),f=n.getClusters(ne(Object(ie.polygon)([[u,c,p,h,u]])),Math.round(o));f.length===i.length&&!t||d.setState({clusterPoints:f})},d.childrenToFeatures=function(t){return t.map(function(t){var e=d.feature(t&&t.props.coordinates);return d.featureClusterMap.set(e,t),e})},d.getLeaves=function(t,e,r){return d.state.superC.getLeaves(t.properties&&t.properties.cluster_id,e||1/0,r).map(function(t){return d.featureClusterMap.get(t)})},d.zoomToClusterBounds=function(t){var e=Array.prototype.slice.call(t.currentTarget.children),r=d.findMarkerElement(t.currentTarget,t.target),n=e.indexOf(r),i=d.state.clusterPoints[n];if(i.properties&&i.properties.cluster_id){var o=d.state.superC.getLeaves(i.properties&&i.properties.cluster_id,1/0),a=ne(Object(ie.featureCollection)(o));d.props.map.fitBounds(K.LngLatBounds.convert(a),{padding:d.props.zoomOnClickPadding})}},d}function se(){return J.createElement("svg",{viewBox:"0 0 20 20"},J.createElement("polygon",{fill:"#333333",points:"6,9 10,1 14,9"}),J.createElement("polygon",{fill:"#CCCCCC",points:"6,11 10,19 14,11"}))}var le,ue,ce=r((Qt=J.Component,oe(ae,Qt),ae.prototype.componentWillMount=function(){var t=this.props,e=t.children,r=t.map;e&&this.childrenChange(e),r.on("move",this.mapChange),r.on("zoom",this.mapChange),this.mapChange()},ae.prototype.componentWillUnmount=function(){var t=this.props.map;t.off("move",this.mapChange),t.off("zoom",this.mapChange)},ae.prototype.componentWillReceiveProps=function(t){this.props.children!==t.children&&t.children&&(this.childrenChange(t.children),this.mapChange(!0))},ae.prototype.feature=function(t){return{type:"Feature",geometry:{type:"Point",coordinates:t},properties:{}}},ae.prototype.findMarkerElement=function(t,e){return e.parentElement===t?e:this.findMarkerElement(t,e.parentElement)},ae.prototype.render=function(){var e=this,t=this.props,r=t.ClusterMarkerFactory,n=t.style,i=t.className,o=t.tabIndex,a=this.state.clusterPoints;return J.createElement("div",{style:n,className:i,tabIndex:o,onClick:this.props.zoomOnClick?this.zoomToClusterBounds:void 0},a.map(function(t){return t.properties&&t.properties.cluster?r(t.geometry.coordinates,t.properties.point_count,e.getLeaves.bind(e,t)):e.featureClusterMap.get(t)}))},ae.defaultProps={radius:60,minZoom:0,maxZoom:16,extent:512,nodeSize:64,log:!1,zoomOnClick:!1,zoomOnClickPadding:20},ae)),pe=(le=function(t,e){return(le=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}le(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),he=function(){return(he=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},fe={position:"absolute",zIndex:10,display:"flex",flexDirection:"column",boxShadow:"0px 1px 4px rgba(0, 0, 0, .3)",border:"1px solid rgba(0, 0, 0, 0.1)"},de={"top-right":{top:62,right:10,bottom:"auto",left:"auto"},"top-left":{top:62,left:10,bottom:"auto",right:"auto"},"bottom-right":{bottom:63,right:10,top:"auto",left:"auto"},"bottom-left":{bottom:63,left:10,top:"auto",right:"auto"}},me={backgroundColor:"#f9f9f9",opacity:.95,transition:"background-color 0.16s ease-out",cursor:"pointer",border:0,height:26,width:26,outline:0,padding:3},ye={backgroundColor:"#fff",opacity:1},ge={borderBottom:"1px solid rgba(0, 0, 0, 0.1)",borderTopLeftRadius:2,borderTopRightRadius:2,borderBottomLeftRadius:2,borderBottomRightRadius:2},ve={width:20,height:20,display:"inline-block"},_e=Object.keys(de);function be(){var e=null!==ue&&ue.apply(this,arguments)||this;return e.state={hover:void 0},e.compassIcon=null,e.onMouseOut=function(){e.state.hover||e.setState({hover:void 0})},e.onMouseIn=function(){0!==e.state.hover&&e.setState({hover:0})},e.onClickCompass=function(){e.props.map.resetNorth()},e.onMapRotate=function(){var t="rotate("+e.props.map.transform.angle*(180/Math.PI)+"deg)";e.compassIcon&&(e.compassIcon.style.transform=t)},e.assignRef=function(t){e.compassIcon=t},e}var xe,we,Ee=r((ue=J.Component,pe(be,ue),be.prototype.componentDidMount=function(){this.props.map.on("rotate",this.onMapRotate)},be.prototype.componentWillUnmount=function(){this.props.map.off("rotate",this.onMapRotate)},be.prototype.render=function(){var t=this.props,e=t.position,r=t.style,n=t.className,i=t.tabIndex,o=this.state.hover,a=he({},me,ge,0===o?ye:{});return J.createElement("div",{className:n,tabIndex:i,style:he({},fe,de[e],r)},J.createElement("button",{style:a,onMouseOver:this.onMouseIn,onMouseOut:this.onMouseOut,onClick:this.onClickCompass},J.createElement("span",{ref:this.assignRef,style:ve},J.createElement(se,null))))},be.defaultProps={position:_e[0]},be)),Se=(xe=function(t,e){return(xe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}xe(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function ke(){return null!==we&&we.apply(this,arguments)||this}var Ce=r((we=J.Component,Se(ke,we),ke.prototype.componentWillMount=function(){this.loadImage(this.props)},ke.prototype.componentWillUnmount=function(){ke.removeImage(this.props)},ke.prototype.componentWillReceiveProps=function(t){var e=this.props.id;t.map!==this.props.map&&ke.removeImage(this.props),t.map&&!t.map.hasImage(e)&&this.loadImage(t)},ke.prototype.render=function(){return null},ke.prototype.loadImage=function(t){var r=this,n=t.map,i=t.id,e=t.url,o=t.data,a=t.options,s=t.onError;o?(n.addImage(i,o,a),this.loaded()):e&&n.loadImage(e,function(t,e){t?s&&s(t):(n.addImage(i,e,a),r.loaded())})},ke.removeImage=function(t){var e=t.id,r=t.map;r&&r.removeImage(e)},ke.prototype.loaded=function(){var t=this.props.onLoaded;t&&t()},ke));X.d(e,"Layer",function(){return Te}),X.d(e,"Feature",function(){return F}),X.d(e,"GeoJSONLayer",function(){return z}),X.d(e,"Map",function(){return i}),X.d(e,"Popup",function(){return Lt}),X.d(e,"ZoomControl",function(){return ft}),X.d(e,"ScaleControl",function(){return Wt}),X.d(e,"Marker",function(){return qt}),X.d(e,"Source",function(){return te}),X.d(e,"Cluster",function(){return ce}),X.d(e,"RotationControl",function(){return Ee}),X.d(e,"Image",function(){return Ce});var Te=r(E(m));e.default=i},function(t,e,r){"use strict";var n,a=r(65),s=(n=l(a.mark(function t(e){var r,n;return a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e).catch(function(){return Promise.reject(new Error("Error fetching data"))});case 2:return r=t.sent,t.next=5,r.json().catch(function(){return p("Error parsing server response"),Promise.reject(new Error("Error parsing server response"))});case 5:if("OK"===(n=t.sent).status)return p(n),t.abrupt("return",n);t.next=9;break;case 9:return p("Server returned status code "+n.status,!0),t.abrupt("return",Promise.reject(new Error("Server returned status code "+n.status)));case 11:case"end":return t.stop()}},t,this)})),function(){return n.apply(this,arguments)});function l(t){return function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function e(t,r){try{var n=s[t](r),i=n.value}catch(t){return void a(t)}return n.done?void o(i):Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)})}("next")})}}Object.defineProperty(e,"__esModule",{value:!0});var i=!1,u=null,c="https://maps.google.com/maps/api/geocode/json";function p(t,e){i&&(1<arguments.length&&void 0!==e&&e?console.warn(t):console.log(t))}e.default={setApiKey:function(t){u=t},enableDebug:function(t){i=!(0<arguments.length&&void 0!==t)||t},fromLatLng:function(r,n,i){var o=this;return l(a.mark(function t(){var e;return a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r&&n){t.next=3;break}return p("Provided coordinates are invalid",!0),t.abrupt("return",Promise.reject(new Error("Provided coordinates are invalid")));case 3:return e=c+"?latlng="+encodeURI(r+","+n),(i||u)&&(e+="&key="+(u=i||u)),t.abrupt("return",s(e));case 7:case"end":return t.stop()}},t,o)}))()},fromAddress:function(r,n){var i=this;return l(a.mark(function t(){var e;return a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=3;break}return p("Provided address is invalid",!0),t.abrupt("return",Promise.reject(new Error("Provided address is invalid")));case 3:return e=c+"?address="+encodeURI(r),(n||u)&&(e+="&key="+(u=n||u)),t.abrupt("return",s(e));case 6:case"end":return t.stop()}},t,i)}))()}}},function(t,e,r){t.exports=r(43)()},function(t,e,r){t.exports=r(63)()},function(t,fe,de){"use strict";(function(t){var e=de(18),r=de.n(e),n=de(33),i=de.n(n),f=de(0),g=de.n(f),o=de(34),l=de(11),a=de(19),d=(de(51),de(8),de(38)),s=function(t,e){for(var r=[t[0]],n=0,i=e.length;n<i;n+=1)r.push(e[n],t[n+1]);return r},u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},p=function(t,e,r){return e&&h(t.prototype,e),r&&h(t,r),t};function h(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var v=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},m=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},_=function(t,e){var r={};for(var n in t)0<=e.indexOf(n)||Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r},y=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},b=function(t){return"object"===(void 0===t?"undefined":u(t))&&t.constructor===Object},x=Object.freeze([]),w=Object.freeze({});function E(t){return"function"==typeof t}function S(t){return t.displayName||t.name||"Component"}function k(t){return t&&"string"==typeof t.styledComponentId}var C=void 0!==t&&t.env.SC_ATTR||"data-styled",T="data-styled-version",A="data-styled-streamed",P="undefined"!=typeof window&&"HTMLElement"in window,I="boolean"==typeof SC_DISABLE_SPEEDY&&SC_DISABLE_SPEEDY||!1;var M,z=(M=Error,m(L,M),L);function L(t){c(this,L);for(var e=arguments.length,r=Array(1<e?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];var i=y(this,M.call(this,"An error occurred. See https://github.com/styled-components/styled-components/blob/master/src/utils/errors.md#"+t+" for more information. "+(r?"Additional arguments: "+r.join(", "):"")));return y(i)}function O(t){var o=""+(t||""),a=[];return o.replace(F,function(t,e,r){return a.push({componentId:e,matchIndex:r}),t}),a.map(function(t,e){var r=t.componentId,n=t.matchIndex,i=a[e+1];return{componentId:r,cssFromDOM:i?o.slice(n,i.matchIndex):o.slice(n)}})}function D(t){if(-2===t){var e=U;return U=[],e}}function R(t,e,r){return 0<e&&-1!==r.slice(0,e).indexOf(Z)&&r.slice(e-Z.length,e)!==Z?"."+q:t}var F=/^[^\S\n]*?\/\* sc-component-id:\s*(\S+)\s+\*\//gm,B=/^\s*\/\/.*$/gm,j=new r.a({global:!1,cascade:!0,keyframe:!1,prefix:!1,compress:!1,semicolon:!0}),N=new r.a({global:!1,cascade:!0,keyframe:!1,prefix:!0,compress:!1,semicolon:!1}),U=[],V=i()(function(t){U.push(t)}),q=void 0,Z=void 0,G=void 0;N.use([function(t,e,r){2===t&&r.length&&0<r[0].lastIndexOf(Z)&&(r[0]=r[0].replace(G,R))},V,D]),j.use([V,D]);function W(t,e,r,n){var i=3<arguments.length&&void 0!==n?n:"&",o=t.join("").replace(B,""),a=e&&r?r+" "+e+" { "+o+" }":o;return q=i,Z=e,G=new RegExp("\\"+Z+"\\b","g"),N(r||!e?"":e,a)}function H(){return de.nc}function X(t,e,r){r&&((t[e]||(t[e]=Object.create(null)))[r]=!0)}function $(t,e){t[e]=Object.create(null)}function K(r){return function(t,e){return void 0!==r[t]&&r[t][e]}}function J(t){var e="";for(var r in t)e+=Object.keys(t[r]).join(" ")+" ";return e.trim()}function Y(t){if(t.sheet)return t.sheet;for(var e=document.styleSheets.length,r=0;r<e;r+=1){var n=document.styleSheets[r];if(n.ownerNode===t)return n}throw new z(10)}function Q(t,e,r){if(!e)return!1;var n=t.cssRules.length;try{t.insertRule(e,r<=n?r:n)}catch(t){return!1}return!0}function tt(t){return"\n/* sc-component-id: "+t+" */\n"}function et(t,e){for(var r=0,n=0;n<=e;n+=1)r+=t[n];return r}function rt(r,n){return function(t){var e=H();return"<style "+[e&&'nonce="'+e+'"',C+'="'+J(n)+'"',T+'="4.1.3"',t].filter(Boolean).join(" ")+">"+r()+"</style>"}}function nt(n,i){return function(){var t,e=((t={})[C]=J(i),t[T]="4.1.3",t),r=H();return r&&(e.nonce=r),g.a.createElement("style",v({},e,{dangerouslySetInnerHTML:{__html:n()}}))}}function it(t){return function(){return Object.keys(t)}}function ot(h,f){function d(t){var e=s[t];return void 0!==e?e:(s[t]=y.length,y.push(0),$(m,t),s[t])}function t(){var t=Y(h).cssRules,e="";for(var r in s){e+=tt(r);for(var n=s[r],i=et(y,n),o=i-y[n];o<i;o+=1){var a=t[o];void 0!==a&&(e+=a.cssText)}}return e}var m=Object.create(null),s=Object.create(null),y=[],g=void 0!==f,v=!1;return{clone:function(){throw new z(5)},css:t,getIds:it(s),hasNameForId:K(m),insertMarker:d,insertRules:function(t,e,r){for(var n=d(t),i=Y(h),o=et(y,n),a=0,s=[],l=e.length,u=0;u<l;u+=1){var c=e[u],p=g;p&&-1!==c.indexOf("@import")?s.push(c):Q(i,c,o+a)&&(p=!1,a+=1)}g&&0<s.length&&(v=!0,f().insertRules(t+"-import",s)),y[n]+=a,X(m,t,r)},removeRules:function(t){var e=s[t];if(void 0!==e){var r=y[e];!function(t,e,r){for(var n=e-r,i=e;n<i;i-=1)t.deleteRule(i)}(Y(h),et(y,e)-1,r),y[e]=0,$(m,t),g&&v&&f().removeRules(t+"-import")}},sealed:!1,styleTag:h,toElement:nt(t,m),toHTML:rt(t,m)}}function at(t){return document.createTextNode(tt(t))}function st(n,c){function p(t){var e=i[t];return void 0!==e?e:(i[t]=at(t),n.appendChild(i[t]),h[t]=Object.create(null),i[t])}function t(){var t="";for(var e in i)t+=i[e].data;return t}var h=Object.create(null),i=Object.create(null),f=void 0!==c,d=!1;return{clone:function(){throw new z(5)},css:t,getIds:it(i),hasNameForId:K(h),insertMarker:p,insertRules:function(t,e,r){for(var n=p(t),i=[],o=e.length,a=0;a<o;a+=1){var s=e[a],l=f;if(l&&-1!==s.indexOf("@import"))i.push(s);else{l=!1;var u=a===o-1?"":" ";n.appendData(s+u)}}X(h,t,r),f&&0<i.length&&(d=!0,c().insertRules(t+"-import",i))},removeRules:function(t){var e=i[t];if(void 0!==e){var r=at(t);n.replaceChild(r,e),i[t]=r,$(h,t),f&&d&&c().removeRules(t+"-import")}},sealed:!1,styleTag:n,toElement:nt(t,h),toHTML:rt(t,h)}}function lt(t,e){function n(t){var e=o[t];return void 0!==e?e:o[t]=[""]}function r(){var t="";for(var e in o){var r=o[e][0];r&&(t+=tt(e)+r)}return t}var i=void 0===t?Object.create(null):t,o=void 0===e?Object.create(null):e;return{clone:function(){var t=function(t){var e=Object.create(null);for(var r in t)e[r]=v({},t[r]);return e}(i),e=Object.create(null);for(var r in o)e[r]=[o[r][0]];return lt(t,e)},css:r,getIds:it(o),hasNameForId:K(i),insertMarker:n,insertRules:function(t,e,r){n(t)[0]+=e.join(" "),X(i,t,r)},removeRules:function(t){var e=o[t];void 0!==e&&(e[0]="",$(i,t))},sealed:!1,styleTag:null,toElement:nt(r,i),toHTML:rt(r,i)}}function ut(t,e,r,n,i){if(!P||r)return lt();var o=function(t,e,r){var n=document.createElement("style");n.setAttribute(C,""),n.setAttribute(T,"4.1.3");var i=H();if(i&&n.setAttribute("nonce",i),n.appendChild(document.createTextNode("")),t&&!e)t.appendChild(n);else{if(!e||!t||!e.parentNode)throw new z(6);e.parentNode.insertBefore(n,r?e:e.nextSibling)}return n}(t,e,n);return I?st(o,i):ot(o,i)}var ct=/\s+/,pt=void 0;pt=P?I?40:1e3:-1;var ht=0,ft=void 0,dt=(mt.prototype.rehydrate=function(){if(!P||this.forceServer)return this;var t=[],e=[],r=!1,n=document.querySelectorAll("style["+C+"]["+T+'="4.1.3"]'),i=n.length;if(!i)return this;for(var o=0;o<i;o+=1){var a=n[o];r=r||!!a.getAttribute(A);for(var s,l=(a.getAttribute(C)||"").trim().split(ct),u=l.length,c=0;c<u;c+=1)s=l[c],this.rehydratedNames[s]=!0;e.push.apply(e,O(a.textContent)),t.push(a)}var p=e.length;if(!p)return this;var h=this.makeTag(null);!function(t,e,r){for(var n=0,i=r.length;n<i;n+=1){var o=r[n],a=o.componentId,s=o.cssFromDOM,l=j("",s);t.insertRules(a,l)}for(var u=0,c=e.length;u<c;u+=1){var p=e[u];p.parentNode&&p.parentNode.removeChild(p)}}(h,t,e),this.capacity=Math.max(1,pt-p),this.tags.push(h);for(var f=0;f<p;f+=1)this.tagMap[e[f].componentId]=h;return this},mt.reset=function(t){ft=new mt(void 0,0<arguments.length&&void 0!==t&&t).rehydrate()},mt.prototype.clone=function(){var i=new mt(this.target,this.forceServer);return this.clones.push(i),i.tags=this.tags.map(function(t){for(var e=t.getIds(),r=t.clone(),n=0;n<e.length;n+=1)i.tagMap[e[n]]=r;return r}),i.rehydratedNames=v({},this.rehydratedNames),i.deferred=v({},this.deferred),i},mt.prototype.sealAllTags=function(){this.capacity=1,this.tags.forEach(function(t){t.sealed=!0})},mt.prototype.makeTag=function(t){var e=t?t.styleTag:null;return ut(this.target,e,this.forceServer,!1,this.getImportRuleTag)},mt.prototype.getTagForId=function(t){var e=this.tagMap[t];if(void 0!==e&&!e.sealed)return e;var r=this.tags[this.tags.length-1];return this.capacity-=1,0===this.capacity&&(this.capacity=pt,r=this.makeTag(r),this.tags.push(r)),this.tagMap[t]=r},mt.prototype.hasId=function(t){return void 0!==this.tagMap[t]},mt.prototype.hasNameForId=function(t,e){if(void 0===this.ignoreRehydratedNames[t]&&this.rehydratedNames[e])return!0;var r=this.tagMap[t];return void 0!==r&&r.hasNameForId(t,e)},mt.prototype.deferredInject=function(t,e){if(void 0===this.tagMap[t]){for(var r=this.clones,n=0;n<r.length;n+=1)r[n].deferredInject(t,e);this.getTagForId(t).insertMarker(t),this.deferred[t]=e}},mt.prototype.inject=function(t,e,r){for(var n=this.clones,i=0;i<n.length;i+=1)n[i].inject(t,e,r);var o=this.getTagForId(t);if(void 0!==this.deferred[t]){var a=this.deferred[t].concat(e);o.insertRules(t,a,r),this.deferred[t]=void 0}else o.insertRules(t,e,r)},mt.prototype.remove=function(t){var e=this.tagMap[t];if(void 0!==e){for(var r=this.clones,n=0;n<r.length;n+=1)r[n].remove(t);e.removeRules(t),this.ignoreRehydratedNames[t]=!0,this.deferred[t]=void 0}},mt.prototype.toHTML=function(){return this.tags.map(function(t){return t.toHTML()}).join("")},mt.prototype.toReactElements=function(){var n=this.id;return this.tags.map(function(t,e){var r="sc-"+n+"-"+e;return Object(f.cloneElement)(t.toElement(),{key:r})})},p(mt,null,[{key:"master",get:function(){return ft=ft||(new mt).rehydrate()}},{key:"instance",get:function(){return mt.master}}]),mt);function mt(){var r=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:P?document.head:null,e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];c(this,mt),this.getImportRuleTag=function(){var t=r.importRuleTag;if(void 0!==t)return t;var e=r.tags[0];return r.importRuleTag=ut(r.target,e?e.styleTag:null,r.forceServer,!0)},ht+=1,this.id=ht,this.forceServer=e,this.target=e?null:t,this.tagMap={},this.deferred={},this.rehydratedNames={},this.ignoreRehydratedNames={},this.tags=[],this.capacity=1,this.clones=[]}var yt=(gt.prototype.getName=function(){return this.name},gt);function gt(t,e){var r=this;c(this,gt),this.inject=function(t){t.hasNameForId(r.id,r.name)||t.inject(r.id,r.rules,r.name)},this.toString=function(){throw new z(12,String(r.name))},this.name=t,this.rules=e,this.id="sc-keyframes-"+t}var vt=/([A-Z])/g,_t=/^ms-/;var bt=function(t){return null==t||!1===t||""===t},xt=function e(r,t){var n=Object.keys(r).filter(function(t){return!bt(r[t])}).map(function(t){return b(r[t])?e(r[t],t):function(t){return t.replace(vt,"-$1").toLowerCase().replace(_t,"-ms-")}(t)+": "+function(t,e){return null==e||"boolean"==typeof e||""===e?"":"number"!=typeof e||0===e||t in o.a?String(e).trim():e+"px"}(t,r[t])+";"}).join(" ");return t?t+" {\n  "+n+"\n}":n};function wt(t,e,r){if(Array.isArray(t)){for(var n,i=[],o=0,a=t.length;o<a;o+=1)null!==(n=wt(t[o],e,r))&&(Array.isArray(n)?i.push.apply(i,n):i.push(n));return i}if(bt(t))return null;if(k(t))return"."+t.styledComponentId;if(E(t)){if(e){var s=!1;try{Object(l.isElement)(new t(e))&&(s=!0)}catch(t){}if(s)throw new z(13,S(t));return wt(t(e),e,r)}return t}return t instanceof yt?r?(t.inject(r),t.getName()):t:b(t)?xt(t):t.toString()}function Et(t){for(var e=arguments.length,r=Array(1<e?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return E(t)||b(t)?wt(s(x,[t].concat(r))):wt(s(t,r))}function St(t){for(var e,r=0|t.length,n=0|r,i=0;4<=r;)e=1540483477*(65535&(e=255&t.charCodeAt(i)|(255&t.charCodeAt(++i))<<8|(255&t.charCodeAt(++i))<<16|(255&t.charCodeAt(++i))<<24))+((1540483477*(e>>>16)&65535)<<16),n=1540483477*(65535&n)+((1540483477*(n>>>16)&65535)<<16)^(e=1540483477*(65535&(e^=e>>>24))+((1540483477*(e>>>16)&65535)<<16)),r-=4,++i;switch(r){case 3:n^=(255&t.charCodeAt(i+2))<<16;case 2:n^=(255&t.charCodeAt(i+1))<<8;case 1:n=1540483477*(65535&(n^=255&t.charCodeAt(i)))+((1540483477*(n>>>16)&65535)<<16)}return((n=1540483477*(65535&(n^=n>>>13))+((1540483477*(n>>>16)&65535)<<16))^n>>>15)>>>0}var kt=52,Ct=function(t){return String.fromCharCode(t+(25<t?39:97))};function Tt(t){var e="",r=void 0;for(r=t;kt<r;r=Math.floor(r/kt))e=Ct(r%kt)+e;return Ct(r%kt)+e}function At(t,e){for(var r=0;r<t.length;r+=1){var n=t[r];if(Array.isArray(n)&&!At(n,e))return!1;if(E(n)&&!k(n))return!1}return!e.some(function(t){return E(t)||function(t){for(var e in t)if(E(t[e]))return!0;return!1}(t)})}function Pt(t){return Tt(St(t))}var It=(Mt.prototype.generateAndInjectStyles=function(t,e){var r=this.isStatic,n=this.componentId,i=this.lastClassName;if(P&&r&&"string"==typeof i&&e.hasNameForId(n,i))return i;var o=wt(this.rules,t,e),a=Pt(this.componentId+o.join(""));return e.hasNameForId(n,a)||e.inject(this.componentId,W(o,"."+a,void 0,n),a),this.lastClassName=a},Mt.generateName=function(t){return Pt(t)},Mt);function Mt(t,e,r){c(this,Mt),this.rules=t,this.isStatic=At(t,e),this.componentId=r,dt.master.hasId(r)||dt.master.deferredInject(r,[])}var zt,Lt=function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:w,n=!!r&&t.theme===r.theme;return t.theme&&!n?t.theme:e||r.theme},Ot=/[[\].#*$><+~=|^:(),"'`-]+/g,Dt=/(^-|-$)/g;function Rt(t){return t.replace(Ot,"-").replace(Dt,"")}function Ft(t){return"string"==typeof t&&!0}var Bt={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDerivedStateFromProps:!0,propTypes:!0,type:!0},jt={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Nt=((zt={})[l.ForwardRef]={$$typeof:!0,render:!0},zt),Ut=Object.defineProperty,Vt=Object.getOwnPropertyNames,qt=Object.getOwnPropertySymbols,Zt=void 0===qt?function(){return[]}:qt,Gt=Object.getOwnPropertyDescriptor,Wt=Object.getPrototypeOf,Ht=Object.prototype,Xt=Array.prototype;function $t(t,e,r){if("string"==typeof e)return t;var n=Wt(e);n&&n!==Ht&&$t(t,n,r);for(var i=Xt.concat(Vt(e),Zt(e)),o=Nt[t.$$typeof]||Bt,a=Nt[e.$$typeof]||Bt,s=i.length,l=void 0,u=void 0;s--;)if(u=i[s],!(jt[u]||r&&r[u]||a&&a[u]||o&&o[u])&&(l=Gt(e,u)))try{Ut(t,u,l)}catch(t){}return t}var Kt,Jt=Object(f.createContext)(),Yt=Jt.Consumer;Kt=f.Component,m(Qt,Kt),Qt.prototype.render=function(){return this.props.children?g.a.createElement(Jt.Consumer,null,this.renderInner):null},Qt.prototype.renderInner=function(t){var e=this.getContext(this.props.theme,t);return g.a.createElement(Jt.Provider,{value:e},g.a.Children.only(this.props.children))},Qt.prototype.getTheme=function(t,e){if(E(t))return t(e);if(null===t||Array.isArray(t)||"object"!==(void 0===t?"undefined":u(t)))throw new z(8);return v({},e,t)},Qt.prototype.getContext=function(t,e){return this.getTheme(t,e)};function Qt(t){c(this,Qt);var e=y(this,Kt.call(this,t));return e.getContext=Object(a.a)(e.getContext.bind(e)),e.renderInner=e.renderInner.bind(e),e}te.prototype.seal=function(){if(!this.sealed){var t=this.masterSheet.clones.indexOf(this.instance);this.masterSheet.clones.splice(t,1),this.sealed=!0}},te.prototype.collectStyles=function(t){if(this.sealed)throw new z(2);return g.a.createElement(ie,{sheet:this.instance},t)},te.prototype.getStyleTags=function(){return this.seal(),this.instance.toHTML()},te.prototype.getStyleElement=function(){return this.seal(),this.instance.toReactElements()},te.prototype.interleaveWithNodeStream=function(){throw new z(3)};function te(){c(this,te),this.masterSheet=dt.master,this.instance=this.masterSheet.clone(),this.sealed=!1}var ee,re=Object(f.createContext)(),ne=re.Consumer,ie=(ee=f.Component,m(oe,ee),oe.prototype.getContext=function(t,e){if(t)return t;if(e)return new dt(e);throw new z(4)},oe.prototype.render=function(){var t=this.props,e=t.children,r=t.sheet,n=t.target;return g.a.createElement(re.Provider,{value:this.getContext(r,n)},e)},oe);function oe(t){c(this,oe);var e=y(this,ee.call(this,t));return e.getContext=Object(a.a)(e.getContext),e}new Set;var ae={};var se,le=(se=f.Component,m(ue,se),ue.prototype.render=function(){return g.a.createElement(ne,null,this.renderOuter)},ue.prototype.renderOuter=function(t){var e=0<arguments.length&&void 0!==t?t:dt.master;return this.styleSheet=e,this.props.forwardedComponent.componentStyle.isStatic?this.renderInner():g.a.createElement(Yt,null,this.renderInner)},ue.prototype.renderInner=function(t){var e=this.props.forwardedComponent,r=e.componentStyle,n=e.defaultProps,i=(e.displayName,e.foldedComponentIds),o=e.styledComponentId,a=e.target,s=void 0;s=r.isStatic?this.generateAndInjectStyles(w,this.props):void 0!==t?this.generateAndInjectStyles(Lt(this.props,t,n),this.props):this.generateAndInjectStyles(this.props.theme||w,this.props);var l=this.props.as||this.attrs.as||a,u=Ft(l),c={},p=v({},this.attrs,this.props),h=void 0;for(h in p)"forwardedComponent"!==h&&"as"!==h&&("forwardedRef"===h?c.ref=p[h]:u&&!Object(d.a)(h)||(c[h]=p[h]));return this.props.style&&this.attrs.style&&(c.style=v({},this.attrs.style,this.props.style)),c.className=Array.prototype.concat(i,this.props.className,o,this.attrs.className,s).filter(Boolean).join(" "),Object(f.createElement)(l,c)},ue.prototype.buildExecutionContext=function(t,e,r){var a=this,s=v({},e,{theme:t});return r.length&&(this.attrs={},r.forEach(function(t){var e,r=t,n=!1,i=void 0,o=void 0;for(o in E(r)&&(r=r(s),n=!0),r)i=r[o],n||!E(i)||(e=i)&&e.prototype&&e.prototype.isReactComponent||k(i)||(i=i(s)),a.attrs[o]=i,s[o]=i})),s},ue.prototype.generateAndInjectStyles=function(t,e){var r=e.forwardedComponent,n=r.attrs,i=r.componentStyle;return r.warnTooManyClasses,i.isStatic&&!n.length?i.generateAndInjectStyles(w,this.styleSheet):i.generateAndInjectStyles(this.buildExecutionContext(t,e,n),this.styleSheet)},ue);function ue(){c(this,ue);var t=y(this,se.call(this));return t.attrs={},t.renderOuter=t.renderOuter.bind(t),t.renderInner=t.renderInner.bind(t),t}function ce(t,i,o){var e=k(t),r=!Ft(t),n=i.displayName,a=void 0===n?function(t){return Ft(t)?"styled."+t:"Styled("+S(t)+")"}(t):n,s=i.componentId,l=void 0===s?function(t,e,r){var n="string"!=typeof e?"sc":Rt(e),i=(ae[n]||0)+1;ae[n]=i;var o=n+"-"+t.generateName(n+i);return r?r+"-"+o:o}(It,i.displayName,i.parentComponentId):s,u=i.ParentComponent,c=void 0===u?le:u,p=i.attrs,h=void 0===p?x:p,f=i.displayName&&i.componentId?Rt(i.displayName)+"-"+i.componentId:i.componentId||l,d=e&&t.attrs?Array.prototype.concat(t.attrs,h).filter(Boolean):h,m=new It(e?t.componentStyle.rules.concat(o):o,d,f),y=g.a.forwardRef(function(t,e){return g.a.createElement(c,v({},t,{forwardedComponent:y,forwardedRef:e}))});return y.attrs=d,y.componentStyle=m,y.displayName=a,y.foldedComponentIds=e?Array.prototype.concat(t.foldedComponentIds,t.styledComponentId):x,y.styledComponentId=f,y.target=e?t.target:t,y.withComponent=function(t){var e=i.componentId,r=_(i,["componentId"]),n=e&&e+"-"+(Ft(t)?t:Rt(S(t)));return ce(t,v({},r,{attrs:d,componentId:n,ParentComponent:c}),o)},y.toString=function(){return"."+y.styledComponentId},r&&$t(y,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,styledComponentId:!0,target:!0,withComponent:!0}),y}function pe(t){return function e(r,n,t){var i=2<arguments.length&&void 0!==t?t:w;if(!Object(l.isValidElementType)(n))throw new z(1,String(n));function o(){return r(n,i,Et.apply(void 0,arguments))}return o.withConfig=function(t){return e(r,n,v({},i,t))},o.attrs=function(t){return e(r,n,v({},i,{attrs:Array.prototype.concat(i.attrs,t).filter(Boolean)}))},o}(ce,t)}["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach(function(t){pe[t]=pe(t)});he.prototype.createStyles=function(t,e){var r=W(wt(this.rules,t,e),"");e.inject(this.componentId,r)},he.prototype.removeStyles=function(t){var e=this.componentId;t.hasId(e)&&t.remove(e)},he.prototype.renderStyles=function(t,e){this.removeStyles(e),this.createStyles(t,e)};function he(t,e){c(this,he),this.rules=t,this.componentId=e,this.isStatic=At(t,x),dt.master.hasId(e)||dt.master.deferredInject(e,[])}P&&(window.scCGSHMRCache={});fe.a=pe}).call(this,de(25))},function(t,e,r){"use strict";(function t(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(t){console.error(t)}})(),t.exports=r(40)},function(t,e,r){"use strict";t.exports=function(t,e,r,n,i,o,a,s){if(0,!t){var l;if(void 0===e)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[r,n,i,o,a,s],c=0;(l=new Error(e.replace(/%s/g,function(){return u[c++]}))).name="Invariant Violation"}throw l.framesToPop=1,l}}},function(t,e,r){t.exports=function(){"use strict";var l="millisecond",f="second",d="minute",m="hour",y="day",g="week",v="month",u="quarter",_="year",i=/^(\d{4})-?(\d{1,2})-?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?.?(\d{1,3})?$/,b=/\[([^\]]+)]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,o=function(t,e,r){var n=String(t);return!n||n.length>=e?t:""+Array(e+1-n.length).join(r)+t},t={s:o,z:function(t){var e=-t.utcOffset(),r=Math.abs(e),n=Math.floor(r/60),i=r%60;return(e<=0?"+":"-")+o(n,2,"0")+":"+o(i,2,"0")},m:function(t,e){var r=12*(e.year()-t.year())+(e.month()-t.month()),n=t.clone().add(r,v),i=e-n<0,o=t.clone().add(r+(i?-1:1),v);return Number(-(r+(e-n)/(i?n-o:o-n))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:v,y:_,w:g,d:y,h:m,m:d,s:f,ms:l,Q:u}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},e={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},a="en",s={};s[a]=e;var c=function(t){return t instanceof h},n=function(t,e,r){var n;if(!t)return a;if("string"==typeof t)s[t]&&(n=t),e&&(s[t]=e,n=t);else{var i=t.name;s[i]=t,n=i}return r||(a=n),n},p=function(t,e,r){if(c(t))return t.clone();var n=e?"string"==typeof e?{format:e,pl:r}:e:{};return n.date=t,new h(n)},x=t;x.l=n,x.i=c,x.w=function(t,e){return p(t,{locale:e.$L,utc:e.$u})};var h=function(){function t(t){this.$L=this.$L||n(t.locale,null,!0),this.parse(t)}var e=t.prototype;return e.parse=function(t){this.$d=function(t){var e=t.date,r=t.utc;if(null===e)return new Date(NaN);if(x.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var n=e.match(i);if(n)return r?new Date(Date.UTC(n[1],n[2]-1,n[3]||1,n[4]||0,n[5]||0,n[6]||0,n[7]||0)):new Date(n[1],n[2]-1,n[3]||1,n[4]||0,n[5]||0,n[6]||0,n[7]||0)}return new Date(e)}(t),this.init()},e.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},e.$utils=function(){return x},e.isValid=function(){return!("Invalid Date"===this.$d.toString())},e.isSame=function(t,e){var r=p(t);return this.startOf(e)<=r&&r<=this.endOf(e)},e.isAfter=function(t,e){return p(t)<this.startOf(e)},e.isBefore=function(t,e){return this.endOf(e)<p(t)},e.$g=function(t,e,r){return x.u(t)?this[e]:this.set(r,t)},e.year=function(t){return this.$g(t,"$y",_)},e.month=function(t){return this.$g(t,"$M",v)},e.day=function(t){return this.$g(t,"$W",y)},e.date=function(t){return this.$g(t,"$D","date")},e.hour=function(t){return this.$g(t,"$H",m)},e.minute=function(t){return this.$g(t,"$m",d)},e.second=function(t){return this.$g(t,"$s",f)},e.millisecond=function(t){return this.$g(t,"$ms",l)},e.unix=function(){return Math.floor(this.valueOf()/1e3)},e.valueOf=function(){return this.$d.getTime()},e.startOf=function(t,e){var n=this,i=!!x.u(e)||e,r=x.p(t),o=function(t,e){var r=x.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return i?r:r.endOf(y)},a=function(t,e){return x.w(n.toDate()[t].apply(n.toDate(),(i?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},s=this.$W,l=this.$M,u=this.$D,c="set"+(this.$u?"UTC":"");switch(r){case _:return i?o(1,0):o(31,11);case v:return i?o(1,l):o(0,l+1);case g:var p=this.$locale().weekStart||0,h=(s<p?s+7:s)-p;return o(i?u-h:u+(6-h),l);case y:case"date":return a(c+"Hours",0);case m:return a(c+"Minutes",1);case d:return a(c+"Seconds",2);case f:return a(c+"Milliseconds",3);default:return this.clone()}},e.endOf=function(t){return this.startOf(t,!1)},e.$set=function(t,e){var r,n=x.p(t),i="set"+(this.$u?"UTC":""),o=(r={},r[y]=i+"Date",r.date=i+"Date",r[v]=i+"Month",r[_]=i+"FullYear",r[m]=i+"Hours",r[d]=i+"Minutes",r[f]=i+"Seconds",r[l]=i+"Milliseconds",r)[n],a=n===y?this.$D+(e-this.$W):e;if(n===v||n===_){var s=this.clone().set("date",1);s.$d[o](a),s.init(),this.$d=s.set("date",Math.min(this.$D,s.daysInMonth())).toDate()}else o&&this.$d[o](a);return this.init(),this},e.set=function(t,e){return this.clone().$set(t,e)},e.get=function(t){return this[x.p(t)]()},e.add=function(r,t){var e,n=this;r=Number(r);var i=x.p(t),o=function(t){var e=p(n);return x.w(e.date(e.date()+Math.round(t*r)),n)};if(i===v)return this.set(v,this.$M+r);if(i===_)return this.set(_,this.$y+r);if(i===y)return o(1);if(i===g)return o(7);var a=(e={},e[d]=6e4,e[m]=36e5,e[f]=1e3,e)[i]||1,s=this.valueOf()+r*a;return x.w(s,this)},e.subtract=function(t,e){return this.add(-1*t,e)},e.format=function(t){var i=this;if(!this.isValid())return"Invalid Date";var o=t||"YYYY-MM-DDTHH:mm:ssZ",r=x.z(this),e=this.$locale(),n=this.$H,a=this.$m,s=this.$M,l=e.weekdays,u=e.months,c=function(t,e,r,n){return t&&(t[e]||t(i,o))||r[e].substr(0,n)},p=function(t){return x.s(n%12||12,t,"0")},h=e.meridiem||function(t,e,r){var n=t<12?"AM":"PM";return r?n.toLowerCase():n},f={YY:String(this.$y).slice(-2),YYYY:this.$y,M:s+1,MM:x.s(s+1,2,"0"),MMM:c(e.monthsShort,s,u,3),MMMM:u[s]||u(this,o),D:this.$D,DD:x.s(this.$D,2,"0"),d:String(this.$W),dd:c(e.weekdaysMin,this.$W,l,2),ddd:c(e.weekdaysShort,this.$W,l,3),dddd:l[this.$W],H:String(n),HH:x.s(n,2,"0"),h:p(1),hh:p(2),a:h(n,a,!0),A:h(n,a,!1),m:String(a),mm:x.s(a,2,"0"),s:String(this.$s),ss:x.s(this.$s,2,"0"),SSS:x.s(this.$ms,3,"0"),Z:r};return o.replace(b,function(t,e){return e||f[t]||r.replace(":","")})},e.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},e.diff=function(t,e,r){var n,i=x.p(e),o=p(t),a=6e4*(o.utcOffset()-this.utcOffset()),s=this-o,l=x.m(this,o);return l=(n={},n[_]=l/12,n[v]=l,n[u]=l/3,n[g]=(s-a)/6048e5,n[y]=(s-a)/864e5,n[m]=s/36e5,n[d]=s/6e4,n[f]=s/1e3,n)[i]||s,r?l:x.a(l)},e.daysInMonth=function(){return this.endOf(v).$D},e.$locale=function(){return s[this.$L]},e.locale=function(t,e){if(!t)return this.$L;var r=this.clone();return r.$L=n(t,e,!0),r},e.clone=function(){return x.w(this.toDate(),this)},e.toDate=function(){return new Date(this.$d)},e.toJSON=function(){return this.isValid()?this.toISOString():null},e.toISOString=function(){return this.$d.toISOString()},e.toString=function(){return this.$d.toUTCString()},t}();return p.prototype=h.prototype,p.extend=function(t,e){return t(e,h,p),p},p.locale=n,p.isDayjs=c,p.unix=function(t){return p(1e3*t)},p.en=s[a],p.Ls=s,p}()},function(t,e,r){"use strict";t.exports=r(50)},function(t,e,r){var s=Array.prototype.slice,l=r(54),u=r(55),c=t.exports=function(t,e,r){return r=r||{},t===e||(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():!t||!e||"object"!=typeof t&&"object"!=typeof e?r.strict?t===e:t==e:function(t,e,r){var n,i;if(p(t)||p(e))return!1;if(t.prototype!==e.prototype)return!1;if(u(t))return!!u(e)&&(t=s.call(t),e=s.call(e),c(t,e,r));if(h(t)){if(!h(e))return!1;if(t.length!==e.length)return!1;for(n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}try{var o=l(t),a=l(e)}catch(t){return!1}if(o.length!=a.length)return!1;for(o.sort(),a.sort(),n=o.length-1;0<=n;n--)if(o[n]!=a[n])return!1;for(n=o.length-1;0<=n;n--)if(i=o[n],!c(t[i],e[i],r))return!1;return typeof t==typeof e}(t,e,r))};function p(t){return null==t}function h(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length)&&("function"==typeof t.copy&&"function"==typeof t.slice&&!(0<t.length&&"number"!=typeof t[0]))}},function(t,e,r){"use strict";t.exports=function(r){var a=[];return a.toString=function(){return this.map(function(t){var e=function(t,e){var r=t[1]||"",n=t[3];if(!n)return r;if(e&&"function"==typeof btoa){var i=function(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}(n),o=n.sources.map(function(t){return"/*# sourceURL="+n.sourceRoot+t+" */"});return[r].concat(o).concat([i]).join("\n")}return[r].join("\n")}(t,r);return t[2]?"@media "+t[2]+"{"+e+"}":e}).join("")},a.i=function(t,e){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},n=0;n<this.length;n++){var i=this[n][0];null!=i&&(r[i]=!0)}for(n=0;n<t.length;n++){var o=t[n];null!=o[0]&&r[o[0]]||(e&&!o[2]?o[2]=e:e&&(o[2]="("+o[2]+") and ("+e+")"),a.push(o))}},a}},function(t,e,n){var r,i,o,l={},u=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=r.apply(this,arguments)),i}),a=(o={},function(t,e){if("function"==typeof t)return t();if(void 0===o[t]){var r=function(t,e){return e?e.querySelector(t):document.querySelector(t)}.call(this,t,e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}o[t]=r}return o[t]}),s=null,c=0,p=[],h=n(69);function f(t,e){for(var r=0;r<t.length;r++){var n=t[r],i=l[n.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](n.parts[o]);for(;o<n.parts.length;o++)i.parts.push(_(n.parts[o],e))}else{var a=[];for(o=0;o<n.parts.length;o++)a.push(_(n.parts[o],e));l[n.id]={id:n.id,refs:1,parts:a}}}}function d(t,e){for(var r=[],n={},i=0;i<t.length;i++){var o=t[i],a=e.base?o[0]+e.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};n[a]?n[a].parts.push(s):r.push(n[a]={id:a,parts:[s]})}return r}function m(t,e){var r=a(t.insertInto);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=p[p.length-1];if("top"===t.insertAt)n?n.nextSibling?r.insertBefore(e,n.nextSibling):r.appendChild(e):r.insertBefore(e,r.firstChild),p.push(e);else if("bottom"===t.insertAt)r.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=a(t.insertAt.before,r);r.insertBefore(e,i)}}function y(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=p.indexOf(t);0<=e&&p.splice(e,1)}function g(t){var e=document.createElement("style");if(void 0===t.attrs.type&&(t.attrs.type="text/css"),void 0===t.attrs.nonce){var r=function(){0;return n.nc}();r&&(t.attrs.nonce=r)}return v(e,t.attrs),m(t,e),e}function v(e,r){Object.keys(r).forEach(function(t){e.setAttribute(t,r[t])})}function _(e,t){var r,n,i,o;if(t.transform&&e.css){if(!(o="function"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=o}if(t.singleton){var a=c++;r=s=s||g(t),n=w.bind(null,r,a,!1),i=w.bind(null,r,a,!0)}else i=e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",v(e,t.attrs),m(t,e),e}(t),n=function(t,e,r){var n=r.css,i=r.sourceMap,o=void 0===e.convertToAbsoluteUrls&&i;(e.convertToAbsoluteUrls||o)&&(n=h(n));i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([n],{type:"text/css"}),s=t.href;t.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,r,t),function(){y(r),r.href&&URL.revokeObjectURL(r.href)}):(r=g(t),n=function(t,e){var r=e.css,n=e.media;n&&t.setAttribute("media",n);if(t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}.bind(null,r),function(){y(r)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else i()}}t.exports=function(t,a){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(a=a||{}).attrs="object"==typeof a.attrs?a.attrs:{},a.singleton||"boolean"==typeof a.singleton||(a.singleton=u()),a.insertInto||(a.insertInto="head"),a.insertAt||(a.insertAt="bottom");var s=d(t,a);return f(s,a),function(t){for(var e=[],r=0;r<s.length;r++){var n=s[r];(i=l[n.id]).refs--,e.push(i)}t&&f(d(t,a),a);for(r=0;r<e.length;r++){var i;if(0===(i=e[r]).refs){for(var o=0;o<i.parts.length;o++)i.parts[o]();delete l[i.id]}}}};var b,x=(b=[],function(t,e){return b[t]=e,b.filter(Boolean).join("\n")});function w(t,e,r,n){var i=r?"":n.css;if(t.styleSheet)t.styleSheet.cssText=x(e,i);else{var o=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}},function(s,t,l){"use strict";(function(t){var r=l(2),n=l(73),e={"Content-Type":"application/x-www-form-urlencoded"};function i(t,e){!r.isUndefined(t)&&r.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var o,a={adapter:("undefined"!=typeof XMLHttpRequest?o=l(28):void 0!==t&&(o=l(28)),o),transformRequest:[function(t,e){return n(e,"Content-Type"),r.isFormData(t)||r.isArrayBuffer(t)||r.isBuffer(t)||r.isStream(t)||r.isFile(t)||r.isBlob(t)?t:r.isArrayBufferView(t)?t.buffer:r.isURLSearchParams(t)?(i(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):r.isObject(t)?(i(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return 200<=t&&t<300}};a.headers={common:{Accept:"application/json, text/plain, */*"}},r.forEach(["delete","get","head"],function(t){a.headers[t]={}}),r.forEach(["post","put","patch"],function(t){a.headers[t]=r.merge(e)}),s.exports=a}).call(this,l(25))},function(t,e,r){"use strict";var n=r(45),p={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},h={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},f={};f[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0};var d=Object.defineProperty,m=Object.getOwnPropertyNames,y=Object.getOwnPropertySymbols,g=Object.getOwnPropertyDescriptor,v=Object.getPrototypeOf,_=Object.prototype;t.exports=function t(e,r,n){if("string"==typeof r)return e;if(_){var i=v(r);i&&i!==_&&t(e,i,n)}var o=m(r);y&&(o=o.concat(y(r)));for(var a=f[e.$$typeof]||p,s=f[r.$$typeof]||p,l=0;l<o.length;++l){var u=o[l];if(!(h[u]||n&&n[u]||s&&s[u]||a&&a[u])){var c=g(r,u);try{d(e,u,c)}catch(t){}}}return e}},function(t,o,a){"use strict";(function(t,e){var r,n=a(32);r="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:e;var i=Object(n.a)(r);o.a=i}).call(this,a(24),a(49)(t))},function(t,e,r){t.exports=function s(t){"use strict";var O=/^\0+/g,D=/[\0\r\f]/g,l=/: */g,u=/zoo|gra/,c=/([,: ])(transform)/g,p=/,+\s*(?![^(]*[)])/g,h=/ +\s*(?![^(]*[)])/g,R=/ *[\0] */g,f=/,\r+?/g,a=/([\t\r\n ])*\f?&/g,d=/:global\(((?:[^\(\)\[\]]*|\[.*\]|\([^\(\)]*\))*)\)/g,m=/\W+/g,F=/@(k\w+)\s*(\S*)\s*/,B=/::(place)/g,j=/:(read-only)/g,y=/\s+(?=[{\];=:>])/g,g=/([[}=:>])\s+/g,v=/(\{[^{]+?);(?=\})/g,_=/\s{2,}/g,N=/([^\(])(:+) */g,b=/[svh]\w+-[tblr]{2}/,U=/\(\s*(.*)\s*\)/g,n=/([\s\S]*?);/g,x=/-self|flex-/g,o=/[^]*?(:[rp][el]a[\w-]+)[^]*/,w=/stretch|:\s*\w+\-(?:conte|avail)/,E=/([^-])(image-set\()/,V="-webkit-",q="-moz-",Z="-ms-",G=59,W=125,H=123,X=40,$=41,K=91,J=93,Y=10,Q=13,tt=9,et=64,rt=32,nt=38,it=45,S=95,ot=42,at=44,st=58,lt=39,ut=34,ct=47,pt=62,ht=43,ft=126,dt=0,mt=12,yt=11,gt=107,vt=109,_t=115,bt=112,xt=111,wt=105,Et=99,St=100,kt=112,Ct=1,Tt=1,At=0,Pt=1,It=1,Mt=1,k=0,zt=0,Lt=0,Ot=[],C=[],Dt=0,T=null,A=-2,P=-1,Rt=0,Ft=1,Bt=2,jt=3,Nt=0,Ut=1,Vt="",qt="",Zt="";function Gt(t,e,r,n,i){for(var o,a,s=0,l=0,u=0,c=0,p=0,h=0,f=0,d=0,m=0,y=0,g=0,v=0,_=0,b=0,x=0,w=0,E=0,S=0,k=0,C=r.length,T=C-1,A="",P="",I="",M="",z="",L="";x<C;){if(f=r.charCodeAt(x),x===T)if(l+c+u+s!==0){if(0!==l)f=l===ct?Y:ct;c=u=s=0,C++,T++}if(l+c+u+s===0){if(x===T){if(w>0)P=P.replace(D,"");if(P.trim().length>0){switch(f){case rt:case tt:case G:case Q:case Y:break;default:P+=r.charAt(x)}f=G}}if(1===E)switch(f){case H:case W:case G:case ut:case lt:case X:case $:case at:E=0;case tt:case Q:case Y:case rt:break;default:for(E=0,k=x,p=f,x--,f=G;k<C;)switch(r.charCodeAt(k++)){case Y:case Q:case G:++x,f=p,k=C;break;case st:if(w>0)++x,f=p;case H:k=C}}switch(f){case H:for(p=(P=P.trim()).charCodeAt(0),g=1,k=++x;x<C;){switch(f=r.charCodeAt(x)){case H:g++;break;case W:g--;break;case ct:switch(h=r.charCodeAt(x+1)){case ot:case ct:x=Jt(h,x,T,r)}break;case K:f++;case X:f++;case ut:case lt:for(;x++<T&&r.charCodeAt(x)!==f;);}if(0===g)break;x++}if(I=r.substring(k,x),p===dt)p=(P=P.replace(O,"").trim()).charCodeAt(0);switch(p){case et:if(w>0)P=P.replace(D,"");switch(h=P.charCodeAt(1)){case St:case vt:case _t:case it:o=e;break;default:o=Ot}if(k=(I=Gt(e,o,I,h,i+1)).length,Lt>0&&0===k)k=P.length;if(Dt>0)if(o=Wt(Ot,P,S),a=Kt(jt,I,o,e,Tt,Ct,k,h,i,n),P=o.join(""),void 0!==a)if(0===(k=(I=a.trim()).length))h=0,I="";if(k>0)switch(h){case _t:P=P.replace(U,$t);case St:case vt:case it:I=P+"{"+I+"}";break;case gt:if(I=(P=P.replace(F,"$1 $2"+(Ut>0?Vt:"")))+"{"+I+"}",1===It||2===It&&Xt("@"+I,3))I="@"+V+I+"@"+I;else I="@"+I;break;default:if(I=P+I,n===kt)M+=I,I=""}else I="";break;default:I=Gt(e,Wt(e,P,S),I,n,i+1)}z+=I,v=0,E=0,b=0,w=0,S=0,_=0,P="",I="",f=r.charCodeAt(++x);break;case W:case G:if((k=(P=(w>0?P.replace(D,""):P).trim()).length)>1){if(0===b)if((p=P.charCodeAt(0))===it||p>96&&p<123)k=(P=P.replace(" ",":")).length;if(Dt>0)if(void 0!==(a=Kt(Ft,P,e,t,Tt,Ct,M.length,n,i,n)))if(0===(k=(P=a.trim()).length))P="\0\0";switch(p=P.charCodeAt(0),h=P.charCodeAt(1),p){case dt:break;case et:if(h===wt||h===Et){L+=P+r.charAt(x);break}default:if(P.charCodeAt(k-1)===st)break;M+=Ht(P,p,h,P.charCodeAt(2))}}v=0,E=0,b=0,w=0,S=0,P="",f=r.charCodeAt(++x)}}switch(f){case Q:case Y:if(l+c+u+s+zt===0)switch(y){case $:case lt:case ut:case et:case ft:case pt:case ot:case ht:case ct:case it:case st:case at:case G:case H:case W:break;default:if(b>0)E=1}if(l===ct)l=0;else if(Pt+v===0&&n!==gt&&P.length>0)w=1,P+="\0";if(Dt*Nt>0)Kt(Rt,P,e,t,Tt,Ct,M.length,n,i,n);Ct=1,Tt++;break;case G:case W:if(l+c+u+s===0){Ct++;break}default:switch(Ct++,A=r.charAt(x),f){case tt:case rt:if(c+s+l===0)switch(d){case at:case st:case tt:case rt:A="";break;default:if(f!==rt)A=" "}break;case dt:A="\\0";break;case mt:A="\\f";break;case yt:A="\\v";break;case nt:if(c+l+s===0&&Pt>0)S=1,w=1,A="\f"+A;break;case 108:if(c+l+s+At===0&&b>0)switch(x-b){case 2:if(d===bt&&r.charCodeAt(x-3)===st)At=d;case 8:if(m===xt)At=m}break;case st:if(c+l+s===0)b=x;break;case at:if(l+u+c+s===0)w=1,A+="\r";break;case ut:case lt:if(0===l)c=c===f?0:0===c?f:c;break;case K:if(c+l+u===0)s++;break;case J:if(c+l+u===0)s--;break;case $:if(c+l+s===0)u--;break;case X:if(c+l+s===0){if(0===v)switch(2*d+3*m){case 533:break;default:g=0,v=1}u++}break;case et:if(l+u+c+s+b+_===0)_=1;break;case ot:case ct:if(c+s+u>0)break;switch(l){case 0:switch(2*f+3*r.charCodeAt(x+1)){case 235:l=ct;break;case 220:k=x,l=ot}break;case ot:if(f===ct&&d===ot&&k+2!==x){if(33===r.charCodeAt(k+2))M+=r.substring(k,x+1);A="",l=0}}}if(0===l){if(Pt+c+s+_===0&&n!==gt&&f!==G)switch(f){case at:case ft:case pt:case ht:case $:case X:if(0===v){switch(d){case tt:case rt:case Y:case Q:A+="\0";break;default:A="\0"+A+(f===at?"":"\0")}w=1}else switch(f){case X:if(b+7===x&&108===d)b=0;v=++g;break;case $:if(0==(v=--g))w=1,A+="\0"}break;case tt:case rt:switch(d){case dt:case H:case W:case G:case at:case mt:case tt:case rt:case Y:case Q:break;default:if(0===v)w=1,A+="\0"}}if(P+=A,f!==rt&&f!==tt)y=f}}m=d,d=f,x++}if(k=M.length,Lt>0)if(0===k&&0===z.length&&0===e[0].length==false)if(n!==vt||1===e.length&&(Pt>0?qt:Zt)===e[0])k=e.join(",").length+2;if(k>0){if(o=0===Pt&&n!==gt?function(t){for(var e,r,n=0,i=t.length,o=Array(i);n<i;++n){for(var a=t[n].split(R),s="",l=0,u=0,c=0,p=0,h=a.length;l<h;++l){if(0===(u=(r=a[l]).length)&&h>1)continue;if(c=s.charCodeAt(s.length-1),p=r.charCodeAt(0),e="",0!==l)switch(c){case ot:case ft:case pt:case ht:case rt:case X:break;default:e=" "}switch(p){case nt:r=e+qt;case ft:case pt:case ht:case rt:case $:case X:break;case K:r=e+r+qt;break;case st:switch(2*r.charCodeAt(1)+3*r.charCodeAt(2)){case 530:if(Mt>0){r=e+r.substring(8,u-1);break}default:if(l<1||a[l-1].length<1)r=e+qt+r}break;case at:e="";default:if(u>1&&r.indexOf(":")>0)r=e+r.replace(N,"$1"+qt+"$2");else r=e+r+qt}s+=r}o[n]=s.replace(D,"").trim()}return o}(e):e,Dt>0)if(void 0!==(a=Kt(Bt,M,o,t,Tt,Ct,k,n,i,n))&&0===(M=a).length)return L+M+z;if(M=o.join(",")+"{"+M+"}",It*At!=0){if(2===It&&!Xt(M,2))At=0;switch(At){case xt:M=M.replace(j,":"+q+"$1")+M;break;case bt:M=M.replace(B,"::"+V+"input-$1")+M.replace(B,"::"+q+"$1")+M.replace(B,":"+Z+"input-$1")+M}At=0}}return L+M+z}function Wt(t,e,r){var n=e.trim().split(f),i=n,o=n.length,a=t.length;switch(a){case 0:case 1:for(var s=0,l=0===a?"":t[0]+" ";s<o;++s)i[s]=I(l,i[s],r,a).trim();break;default:s=0;var u=0;for(i=[];s<o;++s)for(var c=0;c<a;++c)i[u++]=I(t[c]+" ",n[s],r,a).trim()}return i}function I(t,e,r,n){var i=e,o=i.charCodeAt(0);if(o<33)o=(i=i.trim()).charCodeAt(0);switch(o){case nt:switch(Pt+n){case 0:case 1:if(0===t.trim().length)break;default:return i.replace(a,"$1"+t.trim())}break;case st:switch(i.charCodeAt(1)){case 103:if(Mt>0&&Pt>0)return i.replace(d,"$1").replace(a,"$1"+Zt);break;default:return t.trim()+i.replace(a,"$1"+t.trim())}default:if(r*Pt>0&&i.indexOf("\f")>0)return i.replace(a,(t.charCodeAt(0)===st?"":"$1")+t.trim())}return t+i}function Ht(t,e,r,n){var i,o=0,a=t+";",s=2*e+3*r+4*n;if(944===s)return function(t){var e=t.length,r=t.indexOf(":",9)+1,n=t.substring(0,r).trim(),i=t.substring(r,e-1).trim();switch(t.charCodeAt(9)*Ut){case 0:break;case it:if(110!==t.charCodeAt(10))break;default:for(var o=i.split((i="",p)),a=0,r=0,e=o.length;a<e;r=0,++a){for(var s=o[a],l=s.split(h);s=l[r];){var u=s.charCodeAt(0);if(1===Ut&&(u>et&&u<90||u>96&&u<123||u===S||u===it&&s.charCodeAt(1)!==it))switch(isNaN(parseFloat(s))+(-1!==s.indexOf("("))){case 1:switch(s){case"infinite":case"alternate":case"backwards":case"running":case"normal":case"forwards":case"both":case"none":case"linear":case"ease":case"ease-in":case"ease-out":case"ease-in-out":case"paused":case"reverse":case"alternate-reverse":case"inherit":case"initial":case"unset":case"step-start":case"step-end":break;default:s+=Vt}}l[r++]=s}i+=(0===a?"":",")+l.join(" ")}}if(i=n+i+";",1===It||2===It&&Xt(i,1))return V+i+i;return i}(a);else if(0===It||2===It&&!Xt(a,1))return a;switch(s){case 1015:return 97===a.charCodeAt(10)?V+a+a:a;case 951:return 116===a.charCodeAt(3)?V+a+a:a;case 963:return 110===a.charCodeAt(5)?V+a+a:a;case 1009:if(100!==a.charCodeAt(4))break;case 969:case 942:return V+a+a;case 978:return V+a+q+a+a;case 1019:case 983:return V+a+q+a+Z+a+a;case 883:if(a.charCodeAt(8)===it)return V+a+a;if(a.indexOf("image-set(",11)>0)return a.replace(E,"$1"+V+"$2")+a;return a;case 932:if(a.charCodeAt(4)===it)switch(a.charCodeAt(5)){case 103:return V+"box-"+a.replace("-grow","")+V+a+Z+a.replace("grow","positive")+a;case 115:return V+a+Z+a.replace("shrink","negative")+a;case 98:return V+a+Z+a.replace("basis","preferred-size")+a}return V+a+Z+a+a;case 964:return V+a+Z+"flex-"+a+a;case 1023:if(99!==a.charCodeAt(8))break;return i=a.substring(a.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),V+"box-pack"+i+V+a+Z+"flex-pack"+i+a;case 1005:return u.test(a)?a.replace(l,":"+V)+a.replace(l,":"+q)+a:a;case 1e3:switch(o=(i=a.substring(13).trim()).indexOf("-")+1,i.charCodeAt(0)+i.charCodeAt(o)){case 226:i=a.replace(b,"tb");break;case 232:i=a.replace(b,"tb-rl");break;case 220:i=a.replace(b,"lr");break;default:return a}return V+a+Z+i+a;case 1017:if(-1===a.indexOf("sticky",9))return a;case 975:switch(o=(a=t).length-10,s=(i=(33===a.charCodeAt(o)?a.substring(0,o):a).substring(t.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|i.charCodeAt(7))){case 203:if(i.charCodeAt(8)<111)break;case 115:a=a.replace(i,V+i)+";"+a;break;case 207:case 102:a=a.replace(i,V+(s>102?"inline-":"")+"box")+";"+a.replace(i,V+i)+";"+a.replace(i,Z+i+"box")+";"+a}return a+";";case 938:if(a.charCodeAt(5)===it)switch(a.charCodeAt(6)){case 105:return i=a.replace("-items",""),V+a+V+"box-"+i+Z+"flex-"+i+a;case 115:return V+a+Z+"flex-item-"+a.replace(x,"")+a;default:return V+a+Z+"flex-line-pack"+a.replace("align-content","").replace(x,"")+a}break;case 973:case 989:if(a.charCodeAt(3)!==it||122===a.charCodeAt(4))break;case 931:case 953:if(true===w.test(t))if(115===(i=t.substring(t.indexOf(":")+1)).charCodeAt(0))return Ht(t.replace("stretch","fill-available"),e,r,n).replace(":fill-available",":stretch");else return a.replace(i,V+i)+a.replace(i,q+i.replace("fill-",""))+a;break;case 962:if(a=V+a+(102===a.charCodeAt(5)?Z+a:"")+a,r+n===211&&105===a.charCodeAt(13)&&a.indexOf("transform",10)>0)return a.substring(0,a.indexOf(";",27)+1).replace(c,"$1"+V+"$2")+a}return a}function Xt(t,e){var r=t.indexOf(1===e?":":"{"),n=t.substring(0,3!==e?r:10),i=t.substring(r+1,t.length-1);return T(2!==e?n:n.replace(o,"$1"),i,e)}function $t(t,e){var r=Ht(e,e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2));return r!==e+";"?r.replace(n," or ($1)").substring(4):"("+e+")"}function Kt(t,e,r,n,i,o,a,s,l,u){for(var c,p=0,h=e;p<Dt;++p)switch(c=C[p].call(M,t,h,r,n,i,o,a,s,l,u)){case void 0:case false:case true:case null:break;default:h=c}if(h!==e)return h}function Jt(t,e,r,n){for(var i=e+1;i<r;++i)switch(n.charCodeAt(i)){case ct:if(t===ot)if(n.charCodeAt(i-1)===ot&&e+2!==i)return i+1;break;case Y:if(t===ct)return i+1}return i}function i(t){for(var e in t){var r=t[e];switch(e){case"keyframe":Ut=0|r;break;case"global":Mt=0|r;break;case"cascade":Pt=0|r;break;case"compress":k=0|r;break;case"semicolon":zt=0|r;break;case"preserve":Lt=0|r;break;case"prefix":if(T=null,!r)It=0;else if("function"!=typeof r)It=1;else It=2,T=r}}return i}function M(t,e){if(void 0!==this&&this.constructor===M)return s(t);var r=t,n=r.charCodeAt(0);if(n<33)n=(r=r.trim()).charCodeAt(0);if(Ut>0)Vt=r.replace(m,n===K?"":"-");if(n=1,1===Pt)Zt=r;else qt=r;var i,o=[Zt];if(Dt>0)if(void 0!==(i=Kt(P,e,o,o,Tt,Ct,0,0,0,0))&&"string"==typeof i)e=i;var a=Gt(Ot,o,e,0,0);if(Dt>0)if(void 0!==(i=Kt(A,a,o,o,Tt,Ct,a.length,0,0,0))&&"string"!=typeof(a=i))n=0;return Vt="",Zt="",qt="",At=0,Tt=1,Ct=1,k*n==0?a:a.replace(D,"").replace(y,"").replace(g,"$1").replace(v,"$1").replace(_," ")}if(M.use=function t(e){switch(e){case void 0:case null:Dt=C.length=0;break;default:if("function"==typeof e)C[Dt++]=e;else if("object"==typeof e)for(var r=0,n=e.length;r<n;++r)t(e[r]);else Nt=0|!!e}return t},M.set=i,void 0!==t)i(t);return M}(null)},function(t,e,r){"use strict";function u(t,e){return t===e}e.a=function(n,r){var i;function o(t,e){return r(t,s[e],e)}void 0===r&&(r=u);var a,s=[],l=!1;return function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return l&&i===this&&e.length===s.length&&e.every(o)||(a=n.apply(this,e),l=!0,i=this,s=e),a}}},function(t,e,r){var n=r(61).coordEach;t.exports=function(t){var e=[1/0,1/0,-1/0,-1/0];return n(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}},function(t,e){function s(t,e,r,n){if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");if(r&&4!==r.length)throw new Error("bbox must be an Array of 4 numbers");if(n&&-1===["string","number"].indexOf(typeof n))throw new Error("id must be a number or a string");var i={type:"Feature"};return n&&(i.id=n),r&&(i.bbox=r),i.properties=e||{},i.geometry=t,i}function i(t,e,r,n){if(!t)throw new Error("No coordinates passed");if(void 0===t.length)throw new Error("Coordinates must be an array");if(t.length<2)throw new Error("Coordinates must be at least 2 numbers long");if(!d(t[0])||!d(t[1]))throw new Error("Coordinates must contain numbers");return s({type:"Point",coordinates:t},e,r,n)}function o(t,e,r,n){if(!t)throw new Error("No coordinates passed");for(var i=0;i<t.length;i++){var o=t[i];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++){if(0===i&&0===a&&!d(o[0][0])||!d(o[0][1]))throw new Error("Coordinates must contain numbers");if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}}return s({type:"Polygon",coordinates:t},e,r,n)}function a(t,e,r,n){if(!t)throw new Error("No coordinates passed");if(t.length<2)throw new Error("Coordinates must be an array of two or more positions");if(!d(t[0][1])||!d(t[0][1]))throw new Error("Coordinates must contain numbers");return s({type:"LineString",coordinates:t},e,r,n)}function l(t,e,r,n){if(!t)throw new Error("No coordinates passed");return s({type:"MultiLineString",coordinates:t},e,r,n)}function u(t,e,r,n){if(!t)throw new Error("No coordinates passed");return s({type:"MultiPoint",coordinates:t},e,r,n)}function c(t,e,r,n){if(!t)throw new Error("No coordinates passed");return s({type:"MultiPolygon",coordinates:t},e,r,n)}var n={miles:3960,nauticalmiles:3441.145,degrees:57.2957795,radians:1,inches:250905600,yards:6969600,meters:6373e3,metres:6373e3,centimeters:6373e5,centimetres:6373e5,kilometers:6373,kilometres:6373,feet:20908792.65},p={kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,centimetres:1e4,millimeter:1e6,acres:247105e-9,miles:386e-9,yards:1.195990046,feet:10.763910417,inches:1550.003100006};function h(t,e){if(null==t)throw new Error("radians is required");var r=n[e||"kilometers"];if(!r)throw new Error("units is invalid");return t*r}function f(t,e){if(null==t)throw new Error("distance is required");var r=n[e||"kilometers"];if(!r)throw new Error("units is invalid");return t/r}function r(t){if(null==t)throw new Error("radians is required");return 180*(t%(2*Math.PI))/Math.PI}function d(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}t.exports={feature:s,geometry:function(t,e,r){if(!t)throw new Error("type is required");if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(r&&4!==r.length)throw new Error("bbox must be an Array of 4 numbers");var n;switch(t){case"Point":n=i(e).geometry;break;case"LineString":n=a(e).geometry;break;case"Polygon":n=o(e).geometry;break;case"MultiPoint":n=u(e).geometry;break;case"MultiLineString":n=l(e).geometry;break;case"MultiPolygon":n=c(e).geometry;break;default:throw new Error(t+" is invalid")}return r&&(n.bbox=r),n},featureCollection:function(t,e,r){if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");if(e&&4!==e.length)throw new Error("bbox must be an Array of 4 numbers");if(r&&-1===["string","number"].indexOf(typeof r))throw new Error("id must be a number or a string");var n={type:"FeatureCollection"};return r&&(n.id=r),e&&(n.bbox=e),n.features=t,n},geometryCollection:function(t,e,r,n){if(!t)throw new Error("geometries is required");if(!Array.isArray(t))throw new Error("geometries must be an Array");return s({type:"GeometryCollection",geometries:t},e,r,n)},point:i,multiPoint:u,lineString:a,multiLineString:l,polygon:o,multiPolygon:c,radiansToDistance:h,distanceToRadians:f,distanceToDegrees:function(t,e){return r(f(t,e))},radians2degrees:r,degrees2radians:function(t){if(null==t)throw new Error("degrees is required");return t%360*Math.PI/180},bearingToAngle:function(t){if(null==t)throw new Error("bearing is required");var e=t%360;return e<0&&(e+=360),e},convertDistance:function(t,e,r){if(null==t)throw new Error("distance is required");if(!(0<=t))throw new Error("distance must be a positive number");return h(f(t,e),r||"kilometers")},convertArea:function(t,e,r){if(null==t)throw new Error("area is required");if(!(0<=t))throw new Error("area must be a positive number");var n=p[e||"meters"];if(!n)throw new Error("invalid original units");var i=p[r||"kilometers"];if(!i)throw new Error("invalid final units");return t/n*i},round:function(t,e){if(null==t||isNaN(t))throw new Error("num is required");if(e&&!(0<=e))throw new Error("precision must be a positive number");var r=Math.pow(10,e||0);return Math.round(t*r)/r},isNumber:d}},function(t,e){t.exports={GA_TRACKING_CODE:"UA-151335165-1",GOOGLE_API_KEY:"AIzaSyBz0JLljX7OrsksyT0KBwi_N5n1NzTm608",MAPBOX_ACCESS_TOKEN:"pk.eyJ1IjoibWF0dGhldzM1MCIsImEiOiJaTVFMUkUwIn0.wcM3Xc8BGC6PM-Oyrwjnhg",MAPBOX_STYLE_URL:"mapbox://styles/matthew350/cja41tijk27d62rqod7g0lx4b"}},function(t,e,r){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var l=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(t){n[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var r,n,i=function(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),o=1;o<arguments.length;o++){for(var a in r=Object(arguments[o]))u.call(r,a)&&(i[a]=r[a]);if(l){n=l(r);for(var s=0;s<n.length;s++)c.call(r,n[s])&&(i[n[s]]=r[n[s]])}}return i}},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e){var r,n,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(t){r=o}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(t){n=a}}();var l,u=[],c=!1,p=-1;function h(){c&&l&&(c=!1,l.length?u=l.concat(u):p=-1,u.length&&f())}function f(){if(!c){var t=s(h);c=!0;for(var e=u.length;e;){for(l=u,u=[];++p<e;)l&&l[p].run();p=-1,e=u.length}l=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function m(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];u.push(new d(t,e)),1!==u.length||c||s(f)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,r){var n=r(62),i={};function y(t){return i[t=t||256]||(i[t]=new n({size:t})),i[t]}t.exports.viewport=function(t,e,r,n,i,o){r=void 0===r?0:r,n=void 0===n?20:n;var a=y(i),s=n,l=a.px([t[0],t[1]],s),u=a.px([t[2],t[3]],s),c=u[0]-l[0],p=l[1]-u[1],h=[c/e[0],p/e[1]],f=[(t[0]+t[2])/2,(t[1]+t[3])/2],d=function(t,e,r){var n=Math.min(t-Math.log(e[0])/Math.log(2),t-Math.log(e[1])/Math.log(2));return r?n:Math.floor(n)}(s,h,o),m=Math.max(r,Math.min(n,d));return{center:f,zoom:m}},t.exports.bounds=function(t,e,r,n){void 0!==t.lon&&(t=[t.lon,t.lat]);var i=y(n),o=i.px(t,e),a=i.ll([o[0]-r[0]/2,o[1]-r[1]/2],e),s=i.ll([o[0]+r[0]/2,o[1]+r[1]/2],e);return[a[0],s[1],s[0],a[1]]}},function(t,e,r){"use strict";t.exports=function(r,n){return function(){for(var t=new Array(arguments.length),e=0;e<t.length;e++)t[e]=arguments[e];return r.apply(n,t)}}},function(t,e,h){"use strict";var f=h(2),d=h(74),m=h(76),y=h(77),g=h(78),v=h(29),_="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||h(79);t.exports=function(p){return new Promise(function(r,n){var i=p.data,o=p.headers;f.isFormData(i)&&delete o["Content-Type"];var a=new XMLHttpRequest,t="onreadystatechange",s=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in a||g(p.url)||(a=new window.XDomainRequest,t="onload",s=!0,a.onprogress=function(){},a.ontimeout=function(){}),p.auth){var e=p.auth.username||"",l=p.auth.password||"";o.Authorization="Basic "+_(e+":"+l)}if(a.open(p.method.toUpperCase(),m(p.url,p.params,p.paramsSerializer),!0),a.timeout=p.timeout,a[t]=function(){if(a&&(4===a.readyState||s)&&(0!==a.status||a.responseURL&&0===a.responseURL.indexOf("file:"))){var t="getAllResponseHeaders"in a?y(a.getAllResponseHeaders()):null,e={data:p.responseType&&"text"!==p.responseType?a.response:a.responseText,status:1223===a.status?204:a.status,statusText:1223===a.status?"No Content":a.statusText,headers:t,config:p,request:a};d(r,n,e),a=null}},a.onerror=function(){n(v("Network Error",p,null,a)),a=null},a.ontimeout=function(){n(v("timeout of "+p.timeout+"ms exceeded",p,"ECONNABORTED",a)),a=null},f.isStandardBrowserEnv()){var u=h(80),c=(p.withCredentials||g(p.url))&&p.xsrfCookieName?u.read(p.xsrfCookieName):void 0;c&&(o[p.xsrfHeaderName]=c)}if("setRequestHeader"in a&&f.forEach(o,function(t,e){void 0===i&&"content-type"===e.toLowerCase()?delete o[e]:a.setRequestHeader(e,t)}),p.withCredentials&&(a.withCredentials=!0),p.responseType)try{a.responseType=p.responseType}catch(t){if("json"!==p.responseType)throw t}"function"==typeof p.onDownloadProgress&&a.addEventListener("progress",p.onDownloadProgress),"function"==typeof p.onUploadProgress&&a.upload&&a.upload.addEventListener("progress",p.onUploadProgress),p.cancelToken&&p.cancelToken.promise.then(function(t){a&&(a.abort(),n(t),a=null)}),void 0===i&&(i=null),a.send(i)})}},function(t,e,r){"use strict";var a=r(75);t.exports=function(t,e,r,n,i){var o=new Error(t);return a(o,e,r,n,i)}},function(t,e,r){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(t,e,r){"use strict";function n(t){this.message=t}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,t.exports=n},function(t,e,r){"use strict";function n(t){var e,r=t.Symbol;return"function"==typeof r?r.observable?e=r.observable:(e=r("observable"),r.observable=e):e="@@observable",e}r.d(e,"a",function(){return n})},function(t,e,r){t.exports=function(){"use strict";return function(p){var h="/*|*/";var f=h+"}";function d(t){if(t)try{p(t+"}")}catch(t){}}return function t(e,r,n,i,o,a,s,l,u,c){switch(e){case 1:if(u===0&&r.charCodeAt(0)===64)return p(r+";"),"";break;case 2:if(l===0)return r+h;break;case 3:switch(l){case 102:case 112:return p(n[0]+r),"";default:return r+(c===0?h:"")}case-2:r.split(f).forEach(d)}}}}()},function(t,e,r){"use strict";e.a={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1}},function(t,e,r){"use strict";var c=r(57);function n(t){return new i(t)}function i(t){this.options=o(Object.create(this.options),t),this.trees=new Array(this.options.maxZoom+1)}function p(t){return{type:"Feature",properties:l(t),geometry:{type:"Point",coordinates:[function(t){return 360*(t-.5)}(t.x),function(t){var e=(180-360*t)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}(t.y)]}}}function l(t){var e=t.numPoints,r=1e4<=e?Math.round(e/1e3)+"k":1e3<=e?Math.round(e/100)/10+"k":e;return o(o({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:r})}function h(t){return t/360+.5}function f(t){var e=Math.sin(t*Math.PI/180),r=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return r<0?0:1<r?1:r}function o(t,e){for(var r in e)t[r]=e[r];return t}function d(t){return t.x}function m(t){return t.y}t.exports=n,t.exports.default=n,i.prototype={options:{minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,reduce:null,initial:function(){return{}},map:function(t){return t}},load:function(t){var e=this.options.log;e&&console.time("total time");var r="prepare "+t.length+" points";e&&console.time(r),this.points=t;for(var n,i,o,a=[],s=0;s<t.length;s++)t[s].geometry&&a.push((n=t[s],i=s,void 0,{x:h((o=n.geometry.coordinates)[0]),y:f(o[1]),zoom:1/0,id:i,parentId:-1}));this.trees[this.options.maxZoom+1]=c(a,d,m,this.options.nodeSize,Float32Array),e&&console.timeEnd(r);for(var l=this.options.maxZoom;l>=this.options.minZoom;l--){var u=+Date.now();a=this._cluster(a,l),this.trees[l]=c(a,d,m,this.options.nodeSize,Float32Array),e&&console.log("z%d: %d clusters in %dms",l,a.length,Date.now()-u)}return e&&console.timeEnd("total time"),this},getClusters:function(t,e){if(t[0]>t[2]){var r=this.getClusters([t[0],t[1],180,t[3]],e),n=this.getClusters([-180,t[1],t[2],t[3]],e);return r.concat(n)}for(var i=this.trees[this._limitZoom(e)],o=i.range(h(t[0]),f(t[3]),h(t[2]),f(t[1])),a=[],s=0;s<o.length;s++){var l=i.points[o[s]];a.push(l.numPoints?p(l):this.points[l.id])}return a},getChildren:function(t){var e=t>>5,r=t%32,n="No cluster with the specified id.",i=this.trees[r];if(!i)throw new Error(n);var o=i.points[e];if(!o)throw new Error(n);for(var a=this.options.radius/(this.options.extent*Math.pow(2,r-1)),s=i.within(o.x,o.y,a),l=[],u=0;u<s.length;u++){var c=i.points[s[u]];c.parentId===t&&l.push(c.numPoints?p(c):this.points[c.id])}if(0===l.length)throw new Error(n);return l},getLeaves:function(t,e,r){e=e||10,r=r||0;var n=[];return this._appendLeaves(n,t,e,r,0),n},getTile:function(t,e,r){var n=this.trees[this._limitZoom(t)],i=Math.pow(2,t),o=this.options.extent,a=this.options.radius/o,s=(r-a)/i,l=(r+1+a)/i,u={features:[]};return this._addTileFeatures(n.range((e-a)/i,s,(e+1+a)/i,l),n.points,e,r,i,u),0===e&&this._addTileFeatures(n.range(1-a/i,s,1,l),n.points,i,r,i,u),e===i-1&&this._addTileFeatures(n.range(0,s,a/i,l),n.points,-1,r,i,u),u.features.length?u:null},getClusterExpansionZoom:function(t){for(var e=t%32-1;e<this.options.maxZoom;){var r=this.getChildren(t);if(e++,1!==r.length)break;t=r[0].properties.cluster_id}return e},_appendLeaves:function(t,e,r,n,i){for(var o=this.getChildren(e),a=0;a<o.length;a++){var s=o[a].properties;if(s&&s.cluster?i+s.point_count<=n?i+=s.point_count:i=this._appendLeaves(t,s.cluster_id,r,n,i):i<n?i++:t.push(o[a]),t.length===r)break}return i},_addTileFeatures:function(t,e,r,n,i,o){for(var a=0;a<t.length;a++){var s=e[t[a]];o.features.push({type:1,geometry:[[Math.round(this.options.extent*(s.x*i-r)),Math.round(this.options.extent*(s.y*i-n))]],tags:s.numPoints?l(s):this.points[s.id].properties})}},_limitZoom:function(t){return Math.max(this.options.minZoom,Math.min(t,this.options.maxZoom+1))},_cluster:function(t,e){for(var r=[],n=this.options.radius/(this.options.extent*Math.pow(2,e)),i=0;i<t.length;i++){var o=t[i];if(!(o.zoom<=e)){o.zoom=e;var a=this.trees[e+1],s=a.within(o.x,o.y,n),l=o.numPoints||1,u=o.x*l,c=o.y*l,p=null;this.options.reduce&&(p=this.options.initial(),this._accumulate(p,o));for(var h=(i<<5)+(e+1),f=0;f<s.length;f++){var d=a.points[s[f]];if(!(d.zoom<=e)){d.zoom=e;var m=d.numPoints||1;u+=d.x*m,c+=d.y*m,l+=m,d.parentId=h,this.options.reduce&&this._accumulate(p,d)}}1===l?r.push(o):(o.parentId=h,r.push({x:u/l,y:c/l,zoom:1/0,id:h,parentId:-1,numPoints:l,properties:p}))}}return r},_accumulate:function(t,e){var r=e.numPoints?e.properties:this.options.map(this.points[e.id].properties);this.options.reduce(t,r)}}},function(t,e,r){t.exports=r(70)},function(t,e,r){var n;n=function(){return i={},n.m=r=[function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=e.SUCCESS_SUFFIX="_SUCCESS",c=e.ERROR_SUFFIX="_FAIL";e.getActionTypes=function(t,e){var r=1<arguments.length&&void 0!==e?e:{},n=r.errorSuffix,i=void 0===n?c:n,o=r.successSuffix,a=void 0===o?u:o,s=void 0;if(void 0!==t.type){var l=t.type;s=[l,""+l+a,""+l+i]}else{if(void 0===t.types)throw new Error('Action which matched axios middleware needs to have "type" or "types" key which is not null');s=t.types}return s}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.multiClientMiddleware=void 0;var g=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},v=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},o=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}}(r(2)),_=r(0);function b(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function x(t,e,r){if(e){var n="function"==typeof e?e:e.success,i=e&&e.error;t.use(n&&n.bind(null,r),i&&i.bind(null,r))}}function w(t){return t.reduxSourceAction}var a=e.multiClientMiddleware=function(d,t){var m=v({},o,t),y={};return function(t){var h=t.getState,f=t.dispatch;return function(p){return function(r){if(!m.isAxiosRequest(r))return p(r);var t=m.getClientName(r)||m.defaultClientName;if(!d[t])throw new Error('Client with name "'+t+'" has not been defined in middleware');if(!y[t]){var e=v({},m,d[t].options);if(e.interceptors){var n=m.interceptors,i=d[t].options&&d[t].options.interceptors,o={getState:h,dispatch:f,getSourceAction:w};!function(e,r,t,n){var i=2<arguments.length&&void 0!==t?t:{},o=3<arguments.length&&void 0!==n?n:{};[].concat(b(i.request||[]),b(o.request||[])).forEach(function(t){x(e.interceptors.request,t,r)}),[].concat(b(i.response||[]),b(o.response||[])).forEach(function(t){x(e.interceptors.response,t,r)})}(d[t].client,o,n,i)}y[t]={client:d[t].client,options:e}}var a=y[t],s=v({},a.options,a.options.getRequestOptions(r)),l=(0,_.getActionTypes)(r,s),u=g(l,1)[0];p(v({},r,{type:u}));var c=v({},s.getRequestConfig(r),{reduxSourceAction:r});return a.client.request(c).then(function(t){var e=s.onSuccess({action:r,next:p,response:t,getState:h,dispatch:f},s);return s.onComplete({action:e,next:p,getState:h,dispatch:f},s),e},function(t){var e=s.onError({action:r,next:p,error:t,getState:h,dispatch:f},s);return s.onComplete({action:e,next:p,getState:h,dispatch:f},s),s.returnRejectedPromiseOnError?Promise.reject(e):e})}}}};e.default=function(t,e,r){var n=v({},o,e),i=r||{};return a(function(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}({},n.defaultClientName,{client:t,options:i}),n)}},function(t,e,r){"use strict";(function(s){Object.defineProperty(e,"__esModule",{value:!0}),e.onComplete=e.onError=e.onSuccess=e.getRequestOptions=e.getClientName=e.getRequestConfig=e.isAxiosRequest=e.defaultClientName=e.returnRejectedPromiseOnError=void 0;var l=r(0);e.returnRejectedPromiseOnError=!1,e.defaultClientName="default",e.isAxiosRequest=function(t){return t.payload&&t.payload.request},e.getRequestConfig=function(t){return t.payload.request},e.getClientName=function(t){return t.payload.client},e.getRequestOptions=function(t){return t.payload.options},e.onSuccess=function(t,e){var r=t.action,n=t.next,i=t.response,o={type:(0,l.getActionTypes)(r,e)[1],payload:i,meta:{previousAction:r}};return n(o),o},e.onError=function(t,e){var r=t.action,n=t.next,i=t.error,o=void 0;i.response?o=i:(o={data:i.message,status:0},"production"!==s.env.NODE_ENV&&console.log("HTTP Failure in Axios",i));var a={type:(0,l.getActionTypes)(r,e)[2],error:o,meta:{previousAction:r}};return n(a),a},e.onComplete=function(){}}).call(e,r(3))},function(t,e){var r,n,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(t){r=o}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(t){n=a}}();var l,u=[],c=!1,p=-1;function h(){c&&l&&(c=!1,l.length?u=l.concat(u):p=-1,u.length&&f())}function f(){if(!c){var t=s(h);c=!0;for(var e=u.length;e;){for(l=u,u=[];++p<e;)l&&l[p].run();p=-1,e=u.length}l=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function m(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];u.push(new d(t,e)),1!==u.length||c||s(f)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1);Object.defineProperty(e,"default",{enumerable:!0,get:function(){return function(t){return t&&t.__esModule?t:{default:t}}(n).default}}),Object.defineProperty(e,"multiClientMiddleware",{enumerable:!0,get:function(){return n.multiClientMiddleware}});var i=r(0);Object.defineProperty(e,"getActionTypes",{enumerable:!0,get:function(){return i.getActionTypes}}),Object.defineProperty(e,"ERROR_SUFFIX",{enumerable:!0,get:function(){return i.ERROR_SUFFIX}}),Object.defineProperty(e,"SUCCESS_SUFFIX",{enumerable:!0,get:function(){return i.SUCCESS_SUFFIX}})}],n.c=i,n.i=function(t){return t},n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=4);function n(t){if(i[t])return i[t].exports;var e=i[t]={i:t,l:!1,exports:{}};return r[t].call(e.exports,e,e.exports,n),e.l=!0,e.exports}var r,i},t.exports=n()},function(t,e,r){"use strict";var n=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|default|defer|dir|disabled|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|itemProp|itemScope|itemType|itemID|itemRef|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,i=function(e){var r={};return function(t){return void 0===r[t]&&(r[t]=e(t)),r[t]}}(function(t){return n.test(t)||111===t.charCodeAt(0)&&110===t.charCodeAt(1)&&t.charCodeAt(2)<91});e.a=i},function(t,e,r){"use strict";
/** @license React v16.7.0
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c=r(23),n="function"==typeof Symbol&&Symbol.for,p=n?Symbol.for("react.element"):60103,u=n?Symbol.for("react.portal"):60106,i=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,l=n?Symbol.for("react.context"):60110,h=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,m=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,g="function"==typeof Symbol&&Symbol.iterator;function v(t){for(var e=arguments.length-1,r="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=0;n<e;n++)r+="&args[]="+encodeURIComponent(arguments[n+1]);!function(t,e,r,n,i,o,a,s){if(!t){if((t=void 0)===e)t=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[r,n,i,o,a,s],u=0;(t=Error(e.replace(/%s/g,function(){return l[u++]}))).name="Invariant Violation"}throw t.framesToPop=1,t}}(!1,"Minified React error #"+t+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",r)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b={};function x(t,e,r){this.props=t,this.context=e,this.refs=b,this.updater=r||_}function w(){}function E(t,e,r){this.props=t,this.context=e,this.refs=b,this.updater=r||_}x.prototype.isReactComponent={},x.prototype.setState=function(t,e){"object"!=typeof t&&"function"!=typeof t&&null!=t&&v("85"),this.updater.enqueueSetState(this,t,e,"setState")},x.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},w.prototype=x.prototype;var S=E.prototype=new w;S.constructor=E,c(S,x.prototype),S.isPureReactComponent=!0;var k={current:null,currentDispatcher:null},C=Object.prototype.hasOwnProperty,T={key:!0,ref:!0,__self:!0,__source:!0};function A(t,e,r){var n=void 0,i={},o=null,a=null;if(null!=e)for(n in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(o=""+e.key),e)C.call(e,n)&&!T.hasOwnProperty(n)&&(i[n]=e[n]);var s=arguments.length-2;if(1===s)i.children=r;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(n in s=t.defaultProps)void 0===i[n]&&(i[n]=s[n]);return{$$typeof:p,type:t,key:o,ref:a,props:i,_owner:k.current}}function P(t){return"object"==typeof t&&null!==t&&t.$$typeof===p}var I=/\/+/g,M=[];function z(t,e,r,n){if(M.length){var i=M.pop();return i.result=t,i.keyPrefix=e,i.func=r,i.context=n,i.count=0,i}return{result:t,keyPrefix:e,func:r,context:n,count:0}}function L(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,M.length<10&&M.push(t)}function O(t,e,r){return null==t?0:function t(e,r,n,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var a=!1;if(null===e)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case p:case u:a=!0}}if(a)return n(i,e,""===r?"."+D(e,0):r),1;if(a=0,r=""===r?".":r+":",Array.isArray(e))for(var s=0;s<e.length;s++){var l=r+D(o=e[s],s);a+=t(o,l,n,i)}else if("function"==typeof(l=null===e||"object"!=typeof e?null:"function"==typeof(l=g&&e[g]||e["@@iterator"])?l:null))for(e=l.call(e),s=0;!(o=e.next()).done;)a+=t(o=o.value,l=r+D(o,s++),n,i);else"object"===o&&v("31","[object Object]"==(n=""+e)?"object with keys {"+Object.keys(e).join(", ")+"}":n,"");return a}(t,"",e,r)}function D(t,e){return"object"==typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,function(t){return e[t]})}(t.key):e.toString(36)}function R(t,e){t.func.call(t.context,e,t.count++)}function F(t,e,r){var n=t.result,i=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?B(t,n,r,function(t){return t}):null!=t&&(P(t)&&(t=function(t,e){return{$$typeof:p,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(t,i+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(I,"$&/")+"/")+r)),n.push(t))}function B(t,e,r,n,i){var o="";null!=r&&(o=(""+r).replace(I,"$&/")+"/"),O(t,F,e=z(e,o,n,i)),L(e)}var j={Children:{map:function(t,e,r){if(null==t)return t;var n=[];return B(t,n,null,e,r),n},forEach:function(t,e,r){if(null==t)return t;O(t,R,e=z(null,null,e,r)),L(e)},count:function(t){return O(t,function(){return null},null)},toArray:function(t){var e=[];return B(t,e,null,function(t){return t}),e},only:function(t){return P(t)||v("143"),t}},createRef:function(){return{current:null}},Component:x,PureComponent:E,createContext:function(t,e){return void 0===e&&(e=null),(t={$$typeof:l,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:s,_context:t},t.Consumer=t},forwardRef:function(t){return{$$typeof:f,render:t}},lazy:function(t){return{$$typeof:y,_ctor:t,_status:-1,_result:null}},memo:function(t,e){return{$$typeof:m,type:t,compare:void 0===e?null:e}},Fragment:i,StrictMode:o,Suspense:d,createElement:A,cloneElement:function(t,e,r){null==t&&v("267",t);var n=void 0,i=c({},t.props),o=t.key,a=t.ref,s=t._owner;if(null!=e){void 0!==e.ref&&(a=e.ref,s=k.current),void 0!==e.key&&(o=""+e.key);var l=void 0;for(n in t.type&&t.type.defaultProps&&(l=t.type.defaultProps),e)C.call(e,n)&&!T.hasOwnProperty(n)&&(i[n]=void 0===e[n]&&void 0!==l?l[n]:e[n])}if(1===(n=arguments.length-2))i.children=r;else if(1<n){l=Array(n);for(var u=0;u<n;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:p,type:t.type,key:o,ref:a,props:i,_owner:s}},createFactory:function(t){var e=A.bind(null,t);return e.type=t,e},isValidElement:P,version:"16.7.0",unstable_ConcurrentMode:h,unstable_Profiler:a,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:k,assign:c}},N=j;t.exports=N.default||N},function(t,e,r){"use strict";
/** @license React v16.7.0
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=r(0),v=r(23),i=r(41);function R(t){for(var e=arguments.length-1,r="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=0;n<e;n++)r+="&args[]="+encodeURIComponent(arguments[n+1]);!function(t,e,r,n,i,o,a,s){if(!t){if((t=void 0)===e)t=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[r,n,i,o,a,s],u=0;(t=Error(e.replace(/%s/g,function(){return l[u++]}))).name="Invariant Violation"}throw t.framesToPop=1,t}}(!1,"Minified React error #"+t+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",r)}n||R("227");var c=!1,p=null,h=!1,f=null,u={onError:function(t){c=!0,p=t}};function d(t,e,r,n,i,o,a,s,l){c=!1,p=null,function(t,e,r,n,i,o,a,s,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(t){this.onError(t)}}.apply(u,arguments)}var m=null,y={};function o(){if(m)for(var t in y){var e=y[t],r=m.indexOf(t);if(-1<r||R("96",t),!_[r])for(var n in e.extractEvents||R("97",t),r=(_[r]=e).eventTypes){var i=void 0,o=r[n],a=e,s=n;b.hasOwnProperty(s)&&R("99",s);var l=(b[s]=o).phasedRegistrationNames;if(l){for(i in l)l.hasOwnProperty(i)&&g(l[i],a,s);i=!0}else i=!!o.registrationName&&(g(o.registrationName,a,s),!0);i||R("98",n,t)}}}function g(t,e,r){x[t]&&R("100",t),x[t]=e,l[t]=e.eventTypes[r].dependencies}var _=[],b={},x={},l={},a=null,s=null,w=null;function E(t,e,r){var n=t.type||"unknown-event";t.currentTarget=w(r),function(t,e,r,n,i,o,a,s,l){if(d.apply(this,arguments),c){if(c){var u=p;c=!1,p=null}else R("198"),u=void 0;h||(h=!0,f=u)}}(n,e,void 0,t),t.currentTarget=null}function S(t,e){return null==e&&R("30"),null==t?e:Array.isArray(t)?(Array.isArray(e)?t.push.apply(t,e):t.push(e),t):Array.isArray(e)?[t].concat(e):[t,e]}function k(t,e,r){Array.isArray(t)?t.forEach(e,r):t&&e.call(r,t)}var C=null;function T(t){if(t){var e=t._dispatchListeners,r=t._dispatchInstances;if(Array.isArray(e))for(var n=0;n<e.length&&!t.isPropagationStopped();n++)E(t,e[n],r[n]);else e&&E(t,e,r);t._dispatchListeners=null,t._dispatchInstances=null,t.isPersistent()||t.constructor.release(t)}}var A={injectEventPluginOrder:function(t){m&&R("101"),m=Array.prototype.slice.call(t),o()},injectEventPluginsByName:function(t){var e,r=!1;for(e in t)if(t.hasOwnProperty(e)){var n=t[e];y.hasOwnProperty(e)&&y[e]===n||(y[e]&&R("102",e),y[e]=n,r=!0)}r&&o()}};function P(t,e){var r=t.stateNode;if(!r)return null;var n=a(r);if(!n)return null;r=n[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(n=!n.disabled)||(n=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!n;break t;default:t=!1}return t?null:(r&&"function"!=typeof r&&R("231",e,typeof r),r)}function I(t){if(null!==t&&(C=S(C,t)),t=C,C=null,t&&(k(t,T),C&&R("95"),h))throw t=f,h=!1,f=null,t}var M=Math.random().toString(36).slice(2),z="__reactInternalInstance$"+M,L="__reactEventHandlers$"+M;function O(t){if(t[z])return t[z];for(;!t[z];){if(!t.parentNode)return null;t=t.parentNode}return 5===(t=t[z]).tag||6===t.tag?t:null}function D(t){return!(t=t[z])||5!==t.tag&&6!==t.tag?null:t}function F(t){if(5===t.tag||6===t.tag)return t.stateNode;R("33")}function B(t){return t[L]||null}function j(t){for(;(t=t.return)&&5!==t.tag;);return t||null}function N(t,e,r){(e=P(t,r.dispatchConfig.phasedRegistrationNames[e]))&&(r._dispatchListeners=S(r._dispatchListeners,e),r._dispatchInstances=S(r._dispatchInstances,t))}function U(t){if(t&&t.dispatchConfig.phasedRegistrationNames){for(var e=t._targetInst,r=[];e;)r.push(e),e=j(e);for(e=r.length;0<e--;)N(r[e],"captured",t);for(e=0;e<r.length;e++)N(r[e],"bubbled",t)}}function V(t,e,r){t&&r&&r.dispatchConfig.registrationName&&(e=P(t,r.dispatchConfig.registrationName))&&(r._dispatchListeners=S(r._dispatchListeners,e),r._dispatchInstances=S(r._dispatchInstances,t))}function q(t){t&&t.dispatchConfig.registrationName&&V(t._targetInst,null,t)}function Z(t){k(t,U)}var G=!("undefined"==typeof window||!window.document||!window.document.createElement);function W(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var H={animationend:W("Animation","AnimationEnd"),animationiteration:W("Animation","AnimationIteration"),animationstart:W("Animation","AnimationStart"),transitionend:W("Transition","TransitionEnd")},X={},$={};function K(t){if(X[t])return X[t];if(!H[t])return t;var e,r=H[t];for(e in r)if(r.hasOwnProperty(e)&&e in $)return X[t]=r[e];return t}G&&($=document.createElement("div").style,"AnimationEvent"in window||(delete H.animationend.animation,delete H.animationiteration.animation,delete H.animationstart.animation),"TransitionEvent"in window||delete H.transitionend.transition);var J=K("animationend"),Y=K("animationiteration"),Q=K("animationstart"),tt=K("transitionend"),et="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rt=null,nt=null,it=null;function ot(){if(it)return it;var t,e,r=nt,n=r.length,i="value"in rt?rt.value:rt.textContent,o=i.length;for(t=0;t<n&&r[t]===i[t];t++);var a=n-t;for(e=1;e<=a&&r[n-e]===i[o-e];e++);return it=i.slice(t,1<e?1-e:void 0)}function at(){return!0}function st(){return!1}function lt(t,e,r,n){for(var i in this.dispatchConfig=t,this._targetInst=e,this.nativeEvent=r,t=this.constructor.Interface)t.hasOwnProperty(i)&&((e=t[i])?this[i]=e(r):"target"===i?this.target=n:this[i]=r[i]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?at:st,this.isPropagationStopped=st,this}function ut(t,e,r,n){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,t,e,r,n),i}return new this(t,e,r,n)}function ct(t){t instanceof this||R("279"),t.destructor(),this.eventPool.length<10&&this.eventPool.push(t)}function pt(t){t.eventPool=[],t.getPooled=ut,t.release=ct}v(lt.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!=typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=at)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!=typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=at)},persist:function(){this.isPersistent=at},isPersistent:st,destructor:function(){var t,e=this.constructor.Interface;for(t in e)this[t]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=st,this._dispatchInstances=this._dispatchListeners=null}}),lt.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},lt.extend=function(t){function e(){}function r(){return n.apply(this,arguments)}var n=this;e.prototype=n.prototype;var i=new e;return v(i,r.prototype),((r.prototype=i).constructor=r).Interface=v({},n.Interface,t),r.extend=n.extend,pt(r),r},pt(lt);var ht=lt.extend({data:null}),ft=lt.extend({data:null}),dt=[9,13,27,32],mt=G&&"CompositionEvent"in window,yt=null;G&&"documentMode"in document&&(yt=document.documentMode);var gt=G&&"TextEvent"in window&&!yt,vt=G&&(!mt||yt&&8<yt&&yt<=11),_t=String.fromCharCode(32),bt={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},xt=!1;function wt(t,e){switch(t){case"keyup":return-1!==dt.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function Et(t){return"object"==typeof(t=t.detail)&&"data"in t?t.data:null}var St=!1;var kt={eventTypes:bt,extractEvents:function(t,e,r,n){var i=void 0,o=void 0;if(mt)t:{switch(t){case"compositionstart":i=bt.compositionStart;break t;case"compositionend":i=bt.compositionEnd;break t;case"compositionupdate":i=bt.compositionUpdate;break t}i=void 0}else St?wt(t,r)&&(i=bt.compositionEnd):"keydown"===t&&229===r.keyCode&&(i=bt.compositionStart);return o=i?(vt&&"ko"!==r.locale&&(St||i!==bt.compositionStart?i===bt.compositionEnd&&St&&(o=ot()):(nt="value"in(rt=n)?rt.value:rt.textContent,St=!0)),i=ht.getPooled(i,e,r,n),o?i.data=o:null!==(o=Et(r))&&(i.data=o),Z(i),i):null,(t=gt?function(t,e){switch(t){case"compositionend":return Et(e);case"keypress":return 32!==e.which?null:(xt=!0,_t);case"textInput":return(t=e.data)===_t&&xt?null:t;default:return null}}(t,r):function(t,e){if(St)return"compositionend"===t||!mt&&wt(t,e)?(t=ot(),it=nt=rt=null,St=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return vt&&"ko"!==e.locale?null:e.data;default:return null}}(t,r))?((e=ft.getPooled(bt.beforeInput,e,r,n)).data=t,Z(e)):e=null,null===o?e:null===e?o:[o,e]}},Ct=null,Tt=null,At=null;function Pt(t){if(t=s(t)){"function"!=typeof Ct&&R("280");var e=a(t.stateNode);Ct(t.stateNode,t.type,e)}}function It(t){Tt?At?At.push(t):At=[t]:Tt=t}function Mt(){if(Tt){var t=Tt,e=At;if(At=Tt=null,Pt(t),e)for(t=0;t<e.length;t++)Pt(e[t])}}function zt(t,e){return t(e)}function Lt(t,e,r){return t(e,r)}function Ot(){}var Dt=!1;function Rt(t,e){if(Dt)return t(e);Dt=!0;try{return zt(t,e)}finally{Dt=!1,null===Tt&&null===At||(Ot(),Mt())}}var Ft={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bt(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Ft[t.type]:"textarea"===e}function jt(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}function Nt(t){if(!G)return!1;var e=(t="on"+t)in document;return e||((e=document.createElement("div")).setAttribute(t,"return;"),e="function"==typeof e[t]),e}function Ut(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function Vt(t){t._valueTracker||(t._valueTracker=function(t){var e=Ut(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&void 0!==r&&"function"==typeof r.get&&"function"==typeof r.set){var i=r.get,o=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){n=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(t){n=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function qt(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=Ut(t)?t.checked?"true":"false":t.value),(t=n)!==r&&(e.setValue(t),!0)}var Zt=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Gt=/^(.*)[\\\/]/,Wt="function"==typeof Symbol&&Symbol.for,Ht=Wt?Symbol.for("react.element"):60103,Xt=Wt?Symbol.for("react.portal"):60106,$t=Wt?Symbol.for("react.fragment"):60107,Kt=Wt?Symbol.for("react.strict_mode"):60108,Jt=Wt?Symbol.for("react.profiler"):60114,Yt=Wt?Symbol.for("react.provider"):60109,Qt=Wt?Symbol.for("react.context"):60110,te=Wt?Symbol.for("react.concurrent_mode"):60111,ee=Wt?Symbol.for("react.forward_ref"):60112,re=Wt?Symbol.for("react.suspense"):60113,ne=Wt?Symbol.for("react.memo"):60115,ie=Wt?Symbol.for("react.lazy"):60116,oe="function"==typeof Symbol&&Symbol.iterator;function ae(t){return null===t||"object"!=typeof t?null:"function"==typeof(t=oe&&t[oe]||t["@@iterator"])?t:null}function se(t){if(null==t)return null;if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case te:return"ConcurrentMode";case $t:return"Fragment";case Xt:return"Portal";case Jt:return"Profiler";case Kt:return"StrictMode";case re:return"Suspense"}if("object"==typeof t)switch(t.$$typeof){case Qt:return"Context.Consumer";case Yt:return"Context.Provider";case ee:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case ne:return se(t.type);case ie:if(t=1===t._status?t._result:null)return se(t)}return null}function le(t){var e="";do{t:switch(t.tag){case 3:case 4:case 6:case 7:case 10:case 9:var r="";break t;default:var n=t._debugOwner,i=t._debugSource,o=se(t.type);r=null,n&&(r=se(n.type)),n=o,o="",i?o=" (at "+i.fileName.replace(Gt,"")+":"+i.lineNumber+")":r&&(o=" (created by "+r+")"),r="\n    in "+(n||"Unknown")+o}e+=r,t=t.return}while(t);return e}var ue=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ce=Object.prototype.hasOwnProperty,pe={},he={};function fe(t,e,r,n){if(null==e||function(t,e,r,n){if(null!==r&&0===r.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||e<1}return!1}function de(t,e,r,n,i){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e}var me={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){me[t]=new de(t,0,!1,t,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];me[e]=new de(e,1,!1,t[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){me[t]=new de(t,2,!1,t.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){me[t]=new de(t,2,!1,t,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){me[t]=new de(t,3,!1,t.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(t){me[t]=new de(t,3,!0,t,null)}),["capture","download"].forEach(function(t){me[t]=new de(t,4,!1,t,null)}),["cols","rows","size","span"].forEach(function(t){me[t]=new de(t,6,!1,t,null)}),["rowSpan","start"].forEach(function(t){me[t]=new de(t,5,!1,t.toLowerCase(),null)});var ye=/[\-:]([a-z])/g;function ge(t){return t[1].toUpperCase()}function ve(t,e,r,n){var i=me.hasOwnProperty(e)?me[e]:null;(null!==i?0!==i.type:n||(!(2<e.length)||"o"!==e[0]&&"O"!==e[0]||"n"!==e[1]&&"N"!==e[1]))&&(fe(e,r,i,n)&&(r=null),n||null===i?function(t){return!!ce.call(he,t)||!ce.call(pe,t)&&(ue.test(t)?he[t]=!0:!(pe[t]=!0))}(e)&&(null===r?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=null===r?3!==i.type&&"":r:(e=i.attributeName,n=i.attributeNamespace,null===r?t.removeAttribute(e):(r=3===(i=i.type)||4===i&&!0===r?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}function _e(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function be(t,e){var r=e.checked;return v({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:t._wrapperState.initialChecked})}function xe(t,e){var r=null==e.defaultValue?"":e.defaultValue,n=null!=e.checked?e.checked:e.defaultChecked;r=_e(null!=e.value?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function we(t,e){null!=(e=e.checked)&&ve(t,"checked",e,!1)}function Ee(t,e){we(t,e);var r=_e(e.value),n=e.type;if(null!=r)"number"===n?(0===r&&""===t.value||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if("submit"===n||"reset"===n)return void t.removeAttribute("value");e.hasOwnProperty("value")?ke(t,e.type,r):e.hasOwnProperty("defaultValue")&&ke(t,e.type,_e(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function Se(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!("submit"!==n&&"reset"!==n||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}""!==(r=t.name)&&(t.name=""),t.defaultChecked=!t.defaultChecked,t.defaultChecked=!!t._wrapperState.initialChecked,""!==r&&(t.name=r)}function ke(t,e,r){"number"===e&&t.ownerDocument.activeElement===t||(null==r?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ye,ge);me[e]=new de(e,1,!1,t,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ye,ge);me[e]=new de(e,1,!1,t,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ye,ge);me[e]=new de(e,1,!1,t,"http://www.w3.org/XML/1998/namespace")}),me.tabIndex=new de("tabIndex",1,!1,"tabindex",null);var Ce={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function Te(t,e,r){return(t=lt.getPooled(Ce.change,t,e,r)).type="change",It(r),Z(t),t}var Ae=null,Pe=null;function Ie(t){I(t)}function Me(t){if(qt(F(t)))return t}function ze(t,e){if("change"===t)return e}var Le=!1;function Oe(){Ae&&(Ae.detachEvent("onpropertychange",De),Pe=Ae=null)}function De(t){"value"===t.propertyName&&Me(Pe)&&Rt(Ie,t=Te(Pe,t,jt(t)))}function Re(t,e,r){"focus"===t?(Oe(),Pe=r,(Ae=e).attachEvent("onpropertychange",De)):"blur"===t&&Oe()}function Fe(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Me(Pe)}function Be(t,e){if("click"===t)return Me(e)}function je(t,e){if("input"===t||"change"===t)return Me(e)}G&&(Le=Nt("input")&&(!document.documentMode||9<document.documentMode));var Ne={eventTypes:Ce,_isInputEventSupported:Le,extractEvents:function(t,e,r,n){var i=e?F(e):window,o=void 0,a=void 0,s=i.nodeName&&i.nodeName.toLowerCase();if("select"===s||"input"===s&&"file"===i.type?o=ze:Bt(i)?Le?o=je:(o=Fe,a=Re):!(s=i.nodeName)||"input"!==s.toLowerCase()||"checkbox"!==i.type&&"radio"!==i.type||(o=Be),o=o&&o(t,e))return Te(o,r,n);a&&a(t,i,e),"blur"===t&&(t=i._wrapperState)&&t.controlled&&"number"===i.type&&ke(i,"number",i.value)}},Ue=lt.extend({view:null,detail:null}),Ve={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qe(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=Ve[t])&&!!e[t]}function Ze(){return qe}var Ge=0,We=0,He=!1,Xe=!1,$e=Ue.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Ze,button:null,buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)},movementX:function(t){if("movementX"in t)return t.movementX;var e=Ge;return Ge=t.screenX,He?"mousemove"===t.type?t.screenX-e:0:(He=!0,0)},movementY:function(t){if("movementY"in t)return t.movementY;var e=We;return We=t.screenY,Xe?"mousemove"===t.type?t.screenY-e:0:(Xe=!0,0)}}),Ke=$e.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Je={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Ye={eventTypes:Je,extractEvents:function(t,e,r,n){var i="mouseover"===t||"pointerover"===t,o="mouseout"===t||"pointerout"===t;if(i&&(r.relatedTarget||r.fromElement)||!o&&!i)return null;if(i=n.window===n?n:(i=n.ownerDocument)?i.defaultView||i.parentWindow:window,o?(o=e,e=(e=r.relatedTarget||r.toElement)?O(e):null):o=null,o===e)return null;var a=void 0,s=void 0,l=void 0,u=void 0;"mouseout"===t||"mouseover"===t?(a=$e,s=Je.mouseLeave,l=Je.mouseEnter,u="mouse"):"pointerout"!==t&&"pointerover"!==t||(a=Ke,s=Je.pointerLeave,l=Je.pointerEnter,u="pointer");var c=null==o?i:F(o);if(i=null==e?i:F(e),(t=a.getPooled(s,o,r,n)).type=u+"leave",t.target=c,t.relatedTarget=i,(r=a.getPooled(l,e,r,n)).type=u+"enter",r.target=i,r.relatedTarget=c,n=e,o&&n)t:{for(i=n,u=0,a=e=o;a;a=j(a))u++;for(a=0,l=i;l;l=j(l))a++;for(;0<u-a;)e=j(e),u--;for(;0<a-u;)i=j(i),a--;for(;u--;){if(e===i||e===i.alternate)break t;e=j(e),i=j(i)}e=null}else e=null;for(i=e,e=[];o&&o!==i&&(null===(u=o.alternate)||u!==i);)e.push(o),o=j(o);for(o=[];n&&n!==i&&(null===(u=n.alternate)||u!==i);)o.push(n),n=j(n);for(n=0;n<e.length;n++)V(e[n],"bubbled",t);for(n=o.length;0<n--;)V(o[n],"captured",r);return[t,r]}},Qe=Object.prototype.hasOwnProperty;function tr(t,e){return t===e?0!==t||0!==e||1/t==1/e:t!=t&&e!=e}function er(t,e){if(tr(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++)if(!Qe.call(e,r[n])||!tr(t[r[n]],e[r[n]]))return!1;return!0}function rr(t){var e=t;if(t.alternate)for(;e.return;)e=e.return;else{if(0!=(2&e.effectTag))return 1;for(;e.return;)if(0!=(2&(e=e.return).effectTag))return 1}return 3===e.tag?2:3}function nr(t){2!==rr(t)&&R("188")}function ir(t){if(!(t=function(t){var e=t.alternate;if(!e)return 3===(e=rr(t))&&R("188"),1===e?null:t;for(var r=t,n=e;;){var i=r.return,o=i?i.alternate:null;if(!i||!o)break;if(i.child===o.child){for(var a=i.child;a;){if(a===r)return nr(i),t;if(a===n)return nr(i),e;a=a.sibling}R("188")}if(r.return!==n.return)r=i,n=o;else{a=!1;for(var s=i.child;s;){if(s===r){a=!0,r=i,n=o;break}if(s===n){a=!0,n=i,r=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===r){a=!0,r=o,n=i;break}if(s===n){a=!0,n=o,r=i;break}s=s.sibling}a||R("189")}}r.alternate!==n&&R("190")}return 3!==r.tag&&R("188"),r.stateNode.current===r?t:e}(t)))return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e=(e.child.return=e).child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}var or=lt.extend({animationName:null,elapsedTime:null,pseudoElement:null}),ar=lt.extend({clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),sr=Ue.extend({relatedTarget:null});function lr(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}var ur={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pr=Ue.extend({key:function(t){if(t.key){var e=ur[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=lr(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?cr[t.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Ze,charCode:function(t){return"keypress"===t.type?lr(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?lr(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),hr=$e.extend({dataTransfer:null}),fr=Ue.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Ze}),dr=lt.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),mr=$e.extend({deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null}),yr=[["abort","abort"],[J,"animationEnd"],[Y,"animationIteration"],[Q,"animationStart"],["canplay","canPlay"],["canplaythrough","canPlayThrough"],["drag","drag"],["dragenter","dragEnter"],["dragexit","dragExit"],["dragleave","dragLeave"],["dragover","dragOver"],["durationchange","durationChange"],["emptied","emptied"],["encrypted","encrypted"],["ended","ended"],["error","error"],["gotpointercapture","gotPointerCapture"],["load","load"],["loadeddata","loadedData"],["loadedmetadata","loadedMetadata"],["loadstart","loadStart"],["lostpointercapture","lostPointerCapture"],["mousemove","mouseMove"],["mouseout","mouseOut"],["mouseover","mouseOver"],["playing","playing"],["pointermove","pointerMove"],["pointerout","pointerOut"],["pointerover","pointerOver"],["progress","progress"],["scroll","scroll"],["seeking","seeking"],["stalled","stalled"],["suspend","suspend"],["timeupdate","timeUpdate"],["toggle","toggle"],["touchmove","touchMove"],[tt,"transitionEnd"],["waiting","waiting"],["wheel","wheel"]],gr={},vr={};function _r(t,e){var r=t[0],n="on"+((t=t[1])[0].toUpperCase()+t.slice(1));e={phasedRegistrationNames:{bubbled:n,captured:n+"Capture"},dependencies:[r],isInteractive:e},gr[t]=e,vr[r]=e}[["blur","blur"],["cancel","cancel"],["click","click"],["close","close"],["contextmenu","contextMenu"],["copy","copy"],["cut","cut"],["auxclick","auxClick"],["dblclick","doubleClick"],["dragend","dragEnd"],["dragstart","dragStart"],["drop","drop"],["focus","focus"],["input","input"],["invalid","invalid"],["keydown","keyDown"],["keypress","keyPress"],["keyup","keyUp"],["mousedown","mouseDown"],["mouseup","mouseUp"],["paste","paste"],["pause","pause"],["play","play"],["pointercancel","pointerCancel"],["pointerdown","pointerDown"],["pointerup","pointerUp"],["ratechange","rateChange"],["reset","reset"],["seeked","seeked"],["submit","submit"],["touchcancel","touchCancel"],["touchend","touchEnd"],["touchstart","touchStart"],["volumechange","volumeChange"]].forEach(function(t){_r(t,!0)}),yr.forEach(function(t){_r(t,!1)});var br={eventTypes:gr,isInteractiveTopLevelEventType:function(t){return void 0!==(t=vr[t])&&!0===t.isInteractive},extractEvents:function(t,e,r,n){var i=vr[t];if(!i)return null;switch(t){case"keypress":if(0===lr(r))return null;case"keydown":case"keyup":t=pr;break;case"blur":case"focus":t=sr;break;case"click":if(2===r.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":t=$e;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":t=hr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":t=fr;break;case J:case Y:case Q:t=or;break;case tt:t=dr;break;case"scroll":t=Ue;break;case"wheel":t=mr;break;case"copy":case"cut":case"paste":t=ar;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":t=Ke;break;default:t=lt}return Z(e=t.getPooled(i,e,r,n)),e}},xr=br.isInteractiveTopLevelEventType,wr=[];function Er(t){var e=t.targetInst,r=e;do{if(!r){t.ancestors.push(r);break}var n;for(n=r;n.return;)n=n.return;if(!(n=3!==n.tag?null:n.stateNode.containerInfo))break;t.ancestors.push(r),r=O(n)}while(r);for(r=0;r<t.ancestors.length;r++){e=t.ancestors[r];var i=jt(t.nativeEvent);n=t.topLevelType;for(var o=t.nativeEvent,a=null,s=0;s<_.length;s++){var l=_[s];(l=l&&l.extractEvents(n,e,o,i))&&(a=S(a,l))}I(a)}}var Sr=!0;function kr(t,e){if(!e)return null;var r=(xr(t)?Tr:Ar).bind(null,t);e.addEventListener(t,r,!1)}function Cr(t,e){if(!e)return null;var r=(xr(t)?Tr:Ar).bind(null,t);e.addEventListener(t,r,!0)}function Tr(t,e){Lt(Ar,t,e)}function Ar(t,e){if(Sr){var r=jt(e);if(null===(r=O(r))||"number"!=typeof r.tag||2===rr(r)||(r=null),wr.length){var n=wr.pop();n.topLevelType=t,n.nativeEvent=e,n.targetInst=r,t=n}else t={topLevelType:t,nativeEvent:e,targetInst:r,ancestors:[]};try{Rt(Er,t)}finally{t.topLevelType=null,t.nativeEvent=null,t.targetInst=null,t.ancestors.length=0,wr.length<10&&wr.push(t)}}}var Pr={},Ir=0,Mr="_reactListenersID"+(""+Math.random()).slice(2);function zr(t){return Object.prototype.hasOwnProperty.call(t,Mr)||(t[Mr]=Ir++,Pr[t[Mr]]={}),Pr[t[Mr]]}function Lr(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Or(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Dr(t,e){var r,n=Or(t);for(t=0;n;){if(3===n.nodeType){if(r=t+n.textContent.length,t<=e&&e<=r)return{node:n,offset:e-t};t=r}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=Or(n)}}function Rr(){for(var t=window,e=Lr();e instanceof t.HTMLIFrameElement;){try{t=e.contentDocument.defaultView}catch(t){break}e=Lr(t.document)}return e}function Fr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}var Br=G&&"documentMode"in document&&document.documentMode<=11,jr={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Nr=null,Ur=null,Vr=null,qr=!1;function Zr(t,e){var r=e.window===e?e.document:9===e.nodeType?e:e.ownerDocument;return qr||null==Nr||Nr!==Lr(r)?null:(r="selectionStart"in(r=Nr)&&Fr(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},Vr&&er(Vr,r)?null:(Vr=r,(t=lt.getPooled(jr.select,Ur,t,e)).type="select",t.target=Nr,Z(t),t))}var Gr={eventTypes:jr,extractEvents:function(t,e,r,n){var i,o=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;if(!(i=!o)){t:{o=zr(o),i=l.onSelect;for(var a=0;a<i.length;a++){var s=i[a];if(!o.hasOwnProperty(s)||!o[s]){o=!1;break t}}o=!0}i=!o}if(i)return null;switch(o=e?F(e):window,t){case"focus":!Bt(o)&&"true"!==o.contentEditable||(Nr=o,Ur=e,Vr=null);break;case"blur":Vr=Ur=Nr=null;break;case"mousedown":qr=!0;break;case"contextmenu":case"mouseup":case"dragend":return qr=!1,Zr(r,n);case"selectionchange":if(Br)break;case"keydown":case"keyup":return Zr(r,n)}return null}};function Wr(t,e){return t=v({children:void 0},e),(e=function(t){var e="";return n.Children.forEach(t,function(t){null!=t&&(e+=t)}),e}(e.children))&&(t.children=e),t}function Hr(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+_e(r),e=null,i=0;i<t.length;i++){if(t[i].value===r)return t[i].selected=!0,void(n&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function Xr(t,e){return null!=e.dangerouslySetInnerHTML&&R("91"),v({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function $r(t,e){var r=e.value;null==r&&(r=e.defaultValue,null!=(e=e.children)&&(null!=r&&R("92"),Array.isArray(e)&&(e.length<=1||R("93"),e=e[0]),r=e),null==r&&(r="")),t._wrapperState={initialValue:_e(r)}}function Kr(t,e){var r=_e(e.value),n=_e(e.defaultValue);null!=r&&((r=""+r)!==t.value&&(t.value=r),null==e.defaultValue&&t.defaultValue!==r&&(t.defaultValue=r)),null!=n&&(t.defaultValue=""+n)}function Jr(t){var e=t.textContent;e===t._wrapperState.initialValue&&(t.value=e)}A.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),a=B,s=D,w=F,A.injectEventPluginsByName({SimpleEventPlugin:br,EnterLeaveEventPlugin:Ye,ChangeEventPlugin:Ne,SelectEventPlugin:Gr,BeforeInputEventPlugin:kt});var Yr={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function Qr(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function tn(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?Qr(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var en,rn=void 0,nn=(en=function(t,e){if(t.namespaceURI!==Yr.svg||"innerHTML"in t)t.innerHTML=e;else{for((rn=rn||document.createElement("div")).innerHTML="<svg>"+e+"</svg>",e=rn.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,r,n){MSApp.execUnsafeLocalFunction(function(){return en(t,e)})}:en);function on(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&3===r.nodeType)return void(r.nodeValue=e)}t.textContent=e}var an={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sn=["Webkit","ms","Moz","O"];function ln(t,e,r){return null==e||"boolean"==typeof e||""===e?"":r||"number"!=typeof e||0===e||an.hasOwnProperty(t)&&an[t]?(""+e).trim():e+"px"}function un(t,e){for(var r in t=t.style,e)if(e.hasOwnProperty(r)){var n=0===r.indexOf("--"),i=ln(r,e[r],n);"float"===r&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}Object.keys(an).forEach(function(e){sn.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),an[t]=an[e]})});var cn=v({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pn(t,e){e&&(cn[t]&&(null==e.children&&null==e.dangerouslySetInnerHTML||R("137",t,"")),null!=e.dangerouslySetInnerHTML&&(null!=e.children&&R("60"),"object"==typeof e.dangerouslySetInnerHTML&&"__html"in e.dangerouslySetInnerHTML||R("61")),null!=e.style&&"object"!=typeof e.style&&R("62",""))}function hn(t,e){if(-1===t.indexOf("-"))return"string"==typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function fn(t,e){var r=zr(t=9===t.nodeType||11===t.nodeType?t:t.ownerDocument);e=l[e];for(var n=0;n<e.length;n++){var i=e[n];if(!r.hasOwnProperty(i)||!r[i]){switch(i){case"scroll":Cr("scroll",t);break;case"focus":case"blur":Cr("focus",t),Cr("blur",t),r.blur=!0,r.focus=!0;break;case"cancel":case"close":Nt(i)&&Cr(i,t);break;case"invalid":case"submit":case"reset":break;default:-1===et.indexOf(i)&&kr(i,t)}r[i]=!0}}}function dn(){}var mn=null,yn=null;function gn(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function vn(t,e){return"textarea"===t||"option"===t||"noscript"===t||"string"==typeof e.children||"number"==typeof e.children||"object"==typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var _n="function"==typeof setTimeout?setTimeout:void 0,bn="function"==typeof clearTimeout?clearTimeout:void 0;function xn(t){for(t=t.nextSibling;t&&1!==t.nodeType&&3!==t.nodeType;)t=t.nextSibling;return t}function wn(t){for(t=t.firstChild;t&&1!==t.nodeType&&3!==t.nodeType;)t=t.nextSibling;return t}new Set;var En=[],Sn=-1;function kn(t){Sn<0||(t.current=En[Sn],En[Sn]=null,Sn--)}function Cn(t,e){En[++Sn]=t.current,t.current=e}var Tn={},An={current:Tn},Pn={current:!1},In=Tn;function Mn(t,e){var r=t.type.contextTypes;if(!r)return Tn;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in r)o[i]=e[i];return n&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function zn(t){return null!=(t=t.childContextTypes)}function Ln(){kn(Pn),kn(An)}function On(){kn(Pn),kn(An)}function Dn(t,e,r){An.current!==Tn&&R("168"),Cn(An,e),Cn(Pn,r)}function Rn(t,e,r){var n=t.stateNode;if(t=e.childContextTypes,"function"!=typeof n.getChildContext)return r;for(var i in n=n.getChildContext())i in t||R("108",se(e)||"Unknown",i);return v({},r,n)}function Fn(t){var e=t.stateNode;return e=e&&e.__reactInternalMemoizedMergedChildContext||Tn,In=An.current,Cn(An,e),Cn(Pn,Pn.current),!0}function Bn(t,e,r){var n=t.stateNode;n||R("169"),r?(e=Rn(t,e,In),n.__reactInternalMemoizedMergedChildContext=e,kn(Pn),kn(An),Cn(An,e)):kn(Pn),Cn(Pn,r)}var jn=null,Nn=null;function Un(e){return function(t){try{return e(t)}catch(t){}}}function Vn(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.firstContextDependency=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function qn(t,e,r,n){return new Vn(t,e,r,n)}function Zn(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Gn(t,e){var r=t.alternate;return null===r?((r=qn(t.tag,e,t.key,t.mode)).elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,(r.alternate=t).alternate=r):(r.pendingProps=e,r.effectTag=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.childExpirationTime=t.childExpirationTime,r.expirationTime=t.expirationTime,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,r.firstContextDependency=t.firstContextDependency,r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Wn(t,e,r,n,i,o){var a=2;if("function"==typeof(n=t))Zn(t)&&(a=1);else if("string"==typeof t)a=5;else t:switch(t){case $t:return Hn(r.children,i,o,e);case te:return Xn(r,3|i,o,e);case Kt:return Xn(r,2|i,o,e);case Jt:return(t=qn(12,r,e,4|i)).elementType=Jt,t.type=Jt,t.expirationTime=o,t;case re:return(t=qn(13,r,e,i)).elementType=re,t.type=re,t.expirationTime=o,t;default:if("object"==typeof t&&null!==t)switch(t.$$typeof){case Yt:a=10;break t;case Qt:a=9;break t;case ee:a=11;break t;case ne:a=14;break t;case ie:a=16,n=null;break t}R("130",null==t?t:typeof t,"")}return(e=qn(a,r,e,i)).elementType=t,e.type=n,e.expirationTime=o,e}function Hn(t,e,r,n){return(t=qn(7,t,n,e)).expirationTime=r,t}function Xn(t,e,r,n){return t=qn(8,t,n,e),e=0==(1&e)?Kt:te,t.elementType=e,t.type=e,t.expirationTime=r,t}function $n(t,e,r){return(t=qn(6,t,null,e)).expirationTime=r,t}function Kn(t,e,r){return(e=qn(4,null!==t.children?t.children:[],t.key,e)).expirationTime=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Jn(t,e){t.didError=!1;var r=t.earliestPendingTime;0===r?t.earliestPendingTime=t.latestPendingTime=e:r<e?t.earliestPendingTime=e:t.latestPendingTime>e&&(t.latestPendingTime=e),ti(e,t)}function Yn(t,e){t.didError=!1,t.latestPingedTime>=e&&(t.latestPingedTime=0);var r=t.earliestPendingTime,n=t.latestPendingTime;r===e?t.earliestPendingTime=n===e?t.latestPendingTime=0:n:n===e&&(t.latestPendingTime=r),r=t.earliestSuspendedTime,n=t.latestSuspendedTime,0===r?t.earliestSuspendedTime=t.latestSuspendedTime=e:r<e?t.earliestSuspendedTime=e:e<n&&(t.latestSuspendedTime=e),ti(e,t)}function Qn(t,e){var r=t.earliestPendingTime;return e<r&&(e=r),e<(t=t.earliestSuspendedTime)&&(e=t),e}function ti(t,e){var r=e.earliestSuspendedTime,n=e.latestSuspendedTime,i=e.earliestPendingTime,o=e.latestPingedTime;0===(i=0!==i?i:o)&&(0===t||n<t)&&(i=n),0!==(t=i)&&t<r&&(t=r),e.nextExpirationTimeToWorkOn=i,e.expirationTime=t}var ei=!1;function ri(t){return{baseState:t,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function ni(t){return{baseState:t.baseState,firstUpdate:t.firstUpdate,lastUpdate:t.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function ii(t){return{expirationTime:t,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function oi(t,e){null===t.lastUpdate?t.firstUpdate=t.lastUpdate=e:(t.lastUpdate.next=e,t.lastUpdate=e)}function ai(t,e){var r=t.alternate;if(null===r){var n=t.updateQueue,i=null;null===n&&(n=t.updateQueue=ri(t.memoizedState))}else n=t.updateQueue,i=r.updateQueue,null===n?null===i?(n=t.updateQueue=ri(t.memoizedState),i=r.updateQueue=ri(r.memoizedState)):n=t.updateQueue=ni(i):null===i&&(i=r.updateQueue=ni(n));null===i||n===i?oi(n,e):null===n.lastUpdate||null===i.lastUpdate?(oi(n,e),oi(i,e)):(oi(n,e),i.lastUpdate=e)}function si(t,e){var r=t.updateQueue;null===(r=null===r?t.updateQueue=ri(t.memoizedState):li(t,r)).lastCapturedUpdate?r.firstCapturedUpdate=r.lastCapturedUpdate=e:(r.lastCapturedUpdate.next=e,r.lastCapturedUpdate=e)}function li(t,e){var r=t.alternate;return null!==r&&e===r.updateQueue&&(e=t.updateQueue=ni(e)),e}function ui(t,e,r,n,i,o){switch(r.tag){case 1:return"function"==typeof(t=r.payload)?t.call(o,n,i):t;case 3:t.effectTag=-2049&t.effectTag|64;case 0:if(null==(i="function"==typeof(t=r.payload)?t.call(o,n,i):t))break;return v({},n,i);case 2:ei=!0}return n}function ci(t,e,r,n,i){ei=!1;for(var o=(e=li(t,e)).baseState,a=null,s=0,l=e.firstUpdate,u=o;null!==l;){var c=l.expirationTime;c<i?(null===a&&(a=l,o=u),s<c&&(s=c)):(u=ui(t,0,l,u,r,n),null!==l.callback&&(t.effectTag|=32,(l.nextEffect=null)===e.lastEffect?e.firstEffect=e.lastEffect=l:(e.lastEffect.nextEffect=l,e.lastEffect=l))),l=l.next}for(c=null,l=e.firstCapturedUpdate;null!==l;){var p=l.expirationTime;p<i?(null===c&&(c=l,null===a&&(o=u)),s<p&&(s=p)):(u=ui(t,0,l,u,r,n),null!==l.callback&&(t.effectTag|=32,(l.nextEffect=null)===e.lastCapturedEffect?e.firstCapturedEffect=e.lastCapturedEffect=l:(e.lastCapturedEffect.nextEffect=l,e.lastCapturedEffect=l))),l=l.next}null===a&&(e.lastUpdate=null),null===c?e.lastCapturedUpdate=null:t.effectTag|=32,null===a&&null===c&&(o=u),e.baseState=o,e.firstUpdate=a,e.firstCapturedUpdate=c,t.expirationTime=s,t.memoizedState=u}function pi(t,e,r){null!==e.firstCapturedUpdate&&(null!==e.lastUpdate&&(e.lastUpdate.next=e.firstCapturedUpdate,e.lastUpdate=e.lastCapturedUpdate),e.firstCapturedUpdate=e.lastCapturedUpdate=null),hi(e.firstEffect,r),e.firstEffect=e.lastEffect=null,hi(e.firstCapturedEffect,r),e.firstCapturedEffect=e.lastCapturedEffect=null}function hi(t,e){for(;null!==t;){var r=t.callback;if(null!==r){t.callback=null;var n=e;"function"!=typeof r&&R("191",r),r.call(n)}t=t.nextEffect}}function fi(t,e){return{value:t,source:e,stack:le(e)}}var di={current:null},mi=null,yi=null,gi=null;function vi(t,e){var r=t.type._context;Cn(di,r._currentValue),r._currentValue=e}function _i(t){var e=di.current;kn(di),t.type._context._currentValue=e}function bi(t){gi=yi=null,(mi=t).firstContextDependency=null}function xi(t,e){return gi!==t&&!1!==e&&0!==e&&("number"==typeof e&&1073741823!==e||(gi=t,e=1073741823),e={context:t,observedBits:e,next:null},null===yi?(null===mi&&R("293"),mi.firstContextDependency=yi=e):yi=yi.next=e),t._currentValue}var wi={},Ei={current:wi},Si={current:wi},ki={current:wi};function Ci(t){return t===wi&&R("174"),t}function Ti(t,e){Cn(ki,e),Cn(Si,t),Cn(Ei,wi);var r=e.nodeType;switch(r){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:tn(null,"");break;default:e=tn(e=(r=8===r?e.parentNode:e).namespaceURI||null,r=r.tagName)}kn(Ei),Cn(Ei,e)}function Ai(){kn(Ei),kn(Si),kn(ki)}function Pi(t){Ci(ki.current);var e=Ci(Ei.current),r=tn(e,t.type);e!==r&&(Cn(Si,t),Cn(Ei,r))}function Ii(t){Si.current===t&&(kn(Ei),kn(Si))}function Mi(t,e){if(t&&t.defaultProps)for(var r in e=v({},e),t=t.defaultProps)void 0===e[r]&&(e[r]=t[r]);return e}var zi=Zt.ReactCurrentOwner,Li=(new n.Component).refs;function Oi(t,e,r,n){r=null==(r=r(n,e=t.memoizedState))?e:v({},e,r),t.memoizedState=r,null!==(n=t.updateQueue)&&0===t.expirationTime&&(n.baseState=r)}var Di={isMounted:function(t){return!!(t=t._reactInternalFiber)&&2===rr(t)},enqueueSetState:function(t,e,r){t=t._reactInternalFiber;var n=Ta(),i=ii(n=Qo(n,t));i.payload=e,null!=r&&(i.callback=r),Xo(),ai(t,i),ra(t,n)},enqueueReplaceState:function(t,e,r){t=t._reactInternalFiber;var n=Ta(),i=ii(n=Qo(n,t));i.tag=1,i.payload=e,null!=r&&(i.callback=r),Xo(),ai(t,i),ra(t,n)},enqueueForceUpdate:function(t,e){t=t._reactInternalFiber;var r=Ta(),n=ii(r=Qo(r,t));n.tag=2,null!=e&&(n.callback=e),Xo(),ai(t,n),ra(t,r)}};function Ri(t,e,r,n,i,o,a){return"function"==typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(n,o,a):!e.prototype||!e.prototype.isPureReactComponent||(!er(r,n)||!er(i,o))}function Fi(t,e,r){var n=!1,i=Tn,o=e.contextType;return e=new e(r,o="object"==typeof o&&null!==o?zi.currentDispatcher.readContext(o):(i=zn(e)?In:An.current,(n=null!=(n=e.contextTypes))?Mn(t,i):Tn)),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=Di,(t.stateNode=e)._reactInternalFiber=t,n&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Bi(t,e,r,n){t=e.state,"function"==typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(r,n),"function"==typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Di.enqueueReplaceState(e,e.state,null)}function ji(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs=Li;var o=e.contextType;"object"==typeof o&&null!==o?i.context=zi.currentDispatcher.readContext(o):(o=zn(e)?In:An.current,i.context=Mn(t,o)),null!==(o=t.updateQueue)&&(ci(t,o,r,i,n),i.state=t.memoizedState),"function"==typeof(o=e.getDerivedStateFromProps)&&(Oi(t,e,o,r),i.state=t.memoizedState),"function"==typeof e.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(e=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&Di.enqueueReplaceState(i,i.state,null),null!==(o=t.updateQueue)&&(ci(t,o,r,i,n),i.state=t.memoizedState)),"function"==typeof i.componentDidMount&&(t.effectTag|=4)}var Ni=Array.isArray;function Ui(t,e,r){if(null!==(t=r.ref)&&"function"!=typeof t&&"object"!=typeof t){if(r._owner){r=r._owner;var n=void 0;r&&(1!==r.tag&&R("289"),n=r.stateNode),n||R("147",t);var i=""+t;return null!==e&&null!==e.ref&&"function"==typeof e.ref&&e.ref._stringRef===i?e.ref:((e=function(t){var e=n.refs;e===Li&&(e=n.refs={}),null===t?delete e[i]:e[i]=t})._stringRef=i,e)}"string"!=typeof t&&R("284"),r._owner||R("290",t)}return t}function Vi(t,e){"textarea"!==t.type&&R("31","[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e,"")}function qi(p){function h(t,e){if(p){var r=t.lastEffect;null!==r?(r.nextEffect=e,t.lastEffect=e):t.firstEffect=t.lastEffect=e,e.nextEffect=null,e.effectTag=8}}function f(t,e){if(!p)return null;for(;null!==e;)h(t,e),e=e.sibling;return null}function d(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function a(t,e){return(t=Gn(t,e)).index=0,t.sibling=null,t}function m(t,e,r){return t.index=r,p?null!==(r=t.alternate)?(r=r.index)<e?(t.effectTag=2,e):r:(t.effectTag=2,e):e}function s(t){return p&&null===t.alternate&&(t.effectTag=2),t}function o(t,e,r,n){return null===e||6!==e.tag?(e=$n(r,t.mode,n)).return=t:(e=a(e,r)).return=t,e}function l(t,e,r,n){return null!==e&&e.elementType===r.type?(n=a(e,r.props)).ref=Ui(t,e,r):(n=Wn(r.type,r.key,r.props,null,t.mode,n)).ref=Ui(t,e,r),n.return=t,n}function u(t,e,r,n){return null===e||4!==e.tag||e.stateNode.containerInfo!==r.containerInfo||e.stateNode.implementation!==r.implementation?(e=Kn(r,t.mode,n)).return=t:(e=a(e,r.children||[])).return=t,e}function c(t,e,r,n,i){return null===e||7!==e.tag?(e=Hn(r,t.mode,n,i)).return=t:(e=a(e,r)).return=t,e}function y(t,e,r){if("string"==typeof e||"number"==typeof e)return(e=$n(""+e,t.mode,r)).return=t,e;if("object"==typeof e&&null!==e){switch(e.$$typeof){case Ht:return(r=Wn(e.type,e.key,e.props,null,t.mode,r)).ref=Ui(t,null,e),r.return=t,r;case Xt:return(e=Kn(e,t.mode,r)).return=t,e}if(Ni(e)||ae(e))return(e=Hn(e,t.mode,r,null)).return=t,e;Vi(t,e)}return null}function g(t,e,r,n){var i=null!==e?e.key:null;if("string"==typeof r||"number"==typeof r)return null!==i?null:o(t,e,""+r,n);if("object"==typeof r&&null!==r){switch(r.$$typeof){case Ht:return r.key===i?r.type===$t?c(t,e,r.props.children,n,i):l(t,e,r,n):null;case Xt:return r.key===i?u(t,e,r,n):null}if(Ni(r)||ae(r))return null!==i?null:c(t,e,r,n,null);Vi(t,r)}return null}function v(t,e,r,n,i){if("string"==typeof n||"number"==typeof n)return o(e,t=t.get(r)||null,""+n,i);if("object"==typeof n&&null!==n){switch(n.$$typeof){case Ht:return t=t.get(null===n.key?r:n.key)||null,n.type===$t?c(e,t,n.props.children,i,n.key):l(e,t,n,i);case Xt:return u(e,t=t.get(null===n.key?r:n.key)||null,n,i)}if(Ni(n)||ae(n))return c(e,t=t.get(r)||null,n,i,null);Vi(e,n)}return null}return function(t,e,r,n){var i="object"==typeof r&&null!==r&&r.type===$t&&null===r.key;i&&(r=r.props.children);var o="object"==typeof r&&null!==r;if(o)switch(r.$$typeof){case Ht:t:{for(o=r.key,i=e;null!==i;){if(i.key===o){if(7===i.tag?r.type===$t:i.elementType===r.type){f(t,i.sibling),(e=a(i,r.type===$t?r.props.children:r.props)).ref=Ui(t,i,r),e.return=t,t=e;break t}f(t,i);break}h(t,i),i=i.sibling}t=r.type===$t?((e=Hn(r.props.children,t.mode,n,r.key)).return=t,e):((n=Wn(r.type,r.key,r.props,null,t.mode,n)).ref=Ui(t,e,r),n.return=t,n)}return s(t);case Xt:t:{for(i=r.key;null!==e;){if(e.key===i){if(4===e.tag&&e.stateNode.containerInfo===r.containerInfo&&e.stateNode.implementation===r.implementation){f(t,e.sibling),(e=a(e,r.children||[])).return=t,t=e;break t}f(t,e);break}h(t,e),e=e.sibling}(e=Kn(r,t.mode,n)).return=t,t=e}return s(t)}if("string"==typeof r||"number"==typeof r)return r=""+r,s(t=((e=null!==e&&6===e.tag?(f(t,e.sibling),a(e,r)):(f(t,e),$n(r,t.mode,n))).return=t,e));if(Ni(r))return function(e,t,r,n){for(var i=null,o=null,a=t,s=t=0,l=null;null!==a&&s<r.length;s++){a.index>s?(l=a,a=null):l=a.sibling;var u=g(e,a,r[s],n);if(null===u){null===a&&(a=l);break}p&&a&&null===u.alternate&&h(e,a),t=m(u,t,s),null===o?i=u:o.sibling=u,o=u,a=l}if(s===r.length)return f(e,a),i;if(null===a){for(;s<r.length;s++)(a=y(e,r[s],n))&&(t=m(a,t,s),null===o?i=a:o.sibling=a,o=a);return i}for(a=d(e,a);s<r.length;s++)(l=v(a,e,s,r[s],n))&&(p&&null!==l.alternate&&a.delete(null===l.key?s:l.key),t=m(l,t,s),null===o?i=l:o.sibling=l,o=l);return p&&a.forEach(function(t){return h(e,t)}),i}(t,e,r,n);if(ae(r))return function(e,t,r,n){var i=ae(r);"function"!=typeof i&&R("150"),null==(r=i.call(r))&&R("151");for(var o=i=null,a=t,s=t=0,l=null,u=r.next();null!==a&&!u.done;s++,u=r.next()){a.index>s?(l=a,a=null):l=a.sibling;var c=g(e,a,u.value,n);if(null===c){a=a||l;break}p&&a&&null===c.alternate&&h(e,a),t=m(c,t,s),null===o?i=c:o.sibling=c,o=c,a=l}if(u.done)return f(e,a),i;if(null===a){for(;!u.done;s++,u=r.next())null!==(u=y(e,u.value,n))&&(t=m(u,t,s),null===o?i=u:o.sibling=u,o=u);return i}for(a=d(e,a);!u.done;s++,u=r.next())null!==(u=v(a,e,s,u.value,n))&&(p&&null!==u.alternate&&a.delete(null===u.key?s:u.key),t=m(u,t,s),null===o?i=u:o.sibling=u,o=u);return p&&a.forEach(function(t){return h(e,t)}),i}(t,e,r,n);if(o&&Vi(t,r),void 0===r&&!i)switch(t.tag){case 1:case 0:R("152",(n=t.type).displayName||n.name||"Component")}return f(t,e)}}var Zi=qi(!0),Gi=qi(!1),Wi=null,Hi=null,Xi=!1;function $i(t,e){var r=qn(5,null,null,0);r.elementType="DELETED",r.type="DELETED",r.stateNode=e,r.return=t,r.effectTag=8,null!==t.lastEffect?(t.lastEffect.nextEffect=r,t.lastEffect=r):t.firstEffect=t.lastEffect=r}function Ki(t,e){switch(t.tag){case 5:var r=t.type;return null!==(e=1!==e.nodeType||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,!0);default:return!1}}function Ji(t){if(Xi){var e=Hi;if(e){var r=e;if(!Ki(t,e)){if(!(e=xn(r))||!Ki(t,e))return t.effectTag|=2,Xi=!1,void(Wi=t);$i(Wi,r)}Wi=t,Hi=wn(e)}else t.effectTag|=2,Xi=!1,Wi=t}}function Yi(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag;)t=t.return;Wi=t}function Qi(t){if(t!==Wi)return!1;if(!Xi)return Yi(t),!(Xi=!0);var e=t.type;if(5!==t.tag||"head"!==e&&"body"!==e&&!vn(e,t.memoizedProps))for(e=Hi;e;)$i(t,e),e=xn(e);return Yi(t),Hi=Wi?xn(t.stateNode):null,!0}function to(){Hi=Wi=null,Xi=!1}var eo=Zt.ReactCurrentOwner;function ro(t,e,r,n){e.child=null===t?Gi(e,null,r,n):Zi(e,t.child,r,n)}function no(t,e,r,n,i){r=r.render;var o=e.ref;return bi(e),n=r(n,o),e.effectTag|=1,ro(t,e,n,i),e.child}function io(t,e,r,n,i,o){if(null!==t)return a=t.child,i<o&&(i=a.memoizedProps,(r=null!==(r=r.compare)?r:er)(i,n)&&t.ref===e.ref)?ho(t,e,o):(e.effectTag|=1,(t=Gn(a,n)).ref=e.ref,(t.return=e).child=t);var a=r.type;return"function"!=typeof a||Zn(a)||void 0!==a.defaultProps||null!==r.compare||void 0!==r.defaultProps?((t=Wn(r.type,null,n,null,e.mode,o)).ref=e.ref,(t.return=e).child=t):(e.tag=15,e.type=a,oo(t,e,a,n,i,o))}function oo(t,e,r,n,i,o){return null!==t&&i<o&&er(t.memoizedProps,n)&&t.ref===e.ref?ho(t,e,o):so(t,e,r,n,o)}function ao(t,e){var r=e.ref;(null===t&&null!==r||null!==t&&t.ref!==r)&&(e.effectTag|=128)}function so(t,e,r,n,i){var o=zn(r)?In:An.current;return o=Mn(e,o),bi(e),r=r(n,o),e.effectTag|=1,ro(t,e,r,i),e.child}function lo(t,e,r,n,i){if(zn(r)){var o=!0;Fn(e)}else o=!1;if(bi(e),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),Fi(e,r,n),ji(e,r,n,i),n=!0;else if(null===t){var a=e.stateNode,s=e.memoizedProps;a.props=s;var l=a.context,u=r.contextType;u="object"==typeof u&&null!==u?zi.currentDispatcher.readContext(u):Mn(e,u=zn(r)?In:An.current);var c=r.getDerivedStateFromProps,p="function"==typeof c||"function"==typeof a.getSnapshotBeforeUpdate;p||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||s===n&&l===u||Bi(e,a,n,u),ei=!1;var h=e.memoizedState;l=a.state=h;var f=e.updateQueue;null!==f&&(ci(e,f,n,a,i),l=e.memoizedState),n=s!==n||h!==l||Pn.current||ei?("function"==typeof c&&(Oi(e,r,c,n),l=e.memoizedState),(s=ei||Ri(e,r,s,n,h,l,u))?(p||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(e.effectTag|=4)):("function"==typeof a.componentDidMount&&(e.effectTag|=4),e.memoizedProps=n,e.memoizedState=l),a.props=n,a.state=l,a.context=u,s):("function"==typeof a.componentDidMount&&(e.effectTag|=4),!1)}else a=e.stateNode,s=e.memoizedProps,a.props=e.type===e.elementType?s:Mi(e.type,s),l=a.context,u="object"==typeof(u=r.contextType)&&null!==u?zi.currentDispatcher.readContext(u):Mn(e,u=zn(r)?In:An.current),(p="function"==typeof(c=r.getDerivedStateFromProps)||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s===n&&l===u||Bi(e,a,n,u)),ei=!1,l=e.memoizedState,h=a.state=l,null!==(f=e.updateQueue)&&(ci(e,f,n,a,i),h=e.memoizedState),n=s!==n||l!==h||Pn.current||ei?("function"==typeof c&&(Oi(e,r,c,n),h=e.memoizedState),(c=ei||Ri(e,r,s,n,l,h,u))?(p||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(n,h,u),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(n,h,u)),"function"==typeof a.componentDidUpdate&&(e.effectTag|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(e.effectTag|=256)):("function"!=typeof a.componentDidUpdate||s===t.memoizedProps&&l===t.memoizedState||(e.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&l===t.memoizedState||(e.effectTag|=256),e.memoizedProps=n,e.memoizedState=h),a.props=n,a.state=h,a.context=u,c):("function"!=typeof a.componentDidUpdate||s===t.memoizedProps&&l===t.memoizedState||(e.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&l===t.memoizedState||(e.effectTag|=256),!1);return uo(t,e,r,n,o,i)}function uo(t,e,r,n,i,o){ao(t,e);var a=0!=(64&e.effectTag);if(!n&&!a)return i&&Bn(e,r,!1),ho(t,e,o);n=e.stateNode,eo.current=e;var s=a&&"function"!=typeof r.getDerivedStateFromError?null:n.render();return e.effectTag|=1,null!==t&&a?(e.child=Zi(e,t.child,null,o),e.child=Zi(e,null,s,o)):ro(t,e,s,o),e.memoizedState=n.state,i&&Bn(e,r,!0),e.child}function co(t){var e=t.stateNode;e.pendingContext?Dn(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Dn(0,e.context,!1),Ti(t,e.containerInfo)}function po(t,e,r){var n=e.mode,i=e.pendingProps,o=e.memoizedState;if(0==(64&e.effectTag)){o=null;var a=!1}else o={timedOutAt:null!==o?o.timedOutAt:0},a=!0,e.effectTag&=-65;if(null===t)if(a){var s=i.fallback;t=Hn(null,n,0,null),0==(1&e.mode)&&(t.child=null!==e.memoizedState?e.child.child:e.child),n=Hn(s,n,r,null),t.sibling=n,(r=t).return=n.return=e}else r=n=Gi(e,null,i.children,r);else null!==t.memoizedState?(s=(n=t.child).sibling,a?(r=i.fallback,i=Gn(n,n.pendingProps),0==(1&e.mode)&&((a=null!==e.memoizedState?e.child.child:e.child)!==n.child&&(i.child=a)),n=i.sibling=Gn(s,r,s.expirationTime),(r=i).childExpirationTime=0,r.return=n.return=e):r=n=Zi(e,n.child,i.children,r)):(s=t.child,a?(a=i.fallback,(i=Hn(null,n,0,null)).child=s,0==(1&e.mode)&&(i.child=null!==e.memoizedState?e.child.child:e.child),(n=i.sibling=Hn(a,n,r,null)).effectTag|=2,(r=i).childExpirationTime=0,r.return=n.return=e):n=r=Zi(e,s,i.children,r)),e.stateNode=t.stateNode;return e.memoizedState=o,e.child=r,n}function ho(t,e,r){if(null!==t&&(e.firstContextDependency=t.firstContextDependency),e.childExpirationTime<r)return null;if(null!==t&&e.child!==t.child&&R("153"),null!==e.child){for(r=Gn(t=e.child,t.pendingProps,t.expirationTime),(e.child=r).return=e;null!==t.sibling;)t=t.sibling,(r=r.sibling=Gn(t,t.pendingProps,t.expirationTime)).return=e;r.sibling=null}return e.child}function fo(t,e,r){var n=e.expirationTime;if(null!==t&&t.memoizedProps===e.pendingProps&&!Pn.current&&n<r){switch(e.tag){case 3:co(e),to();break;case 5:Pi(e);break;case 1:zn(e.type)&&Fn(e);break;case 4:Ti(e,e.stateNode.containerInfo);break;case 10:vi(e,e.memoizedProps.value);break;case 13:if(null!==e.memoizedState)return 0!==(n=e.child.childExpirationTime)&&r<=n?po(t,e,r):null!==(e=ho(t,e,r))?e.sibling:null}return ho(t,e,r)}switch(e.expirationTime=0,e.tag){case 2:n=e.elementType,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps;var i=Mn(e,An.current);if(bi(e),i=n(t,i),e.effectTag|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(e.tag=1,zn(n)){var o=!0;Fn(e)}else o=!1;e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null;var a=n.getDerivedStateFromProps;"function"==typeof a&&Oi(e,n,a,t),i.updater=Di,ji((e.stateNode=i)._reactInternalFiber=e,n,t,r),e=uo(null,e,n,!0,o,r)}else e.tag=0,ro(null,e,i,r),e=e.child;return e;case 16:switch(i=e.elementType,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),o=e.pendingProps,t=function(e){var t=e._result;switch(e._status){case 1:return t;case 2:case 0:throw t;default:throw e._status=0,(t=(t=e._ctor)()).then(function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)},function(t){0===e._status&&(e._status=2,e._result=t)}),e._result=t}}(i),e.type=t,i=e.tag=function(t){if("function"==typeof t)return Zn(t)?1:0;if(null!=t){if((t=t.$$typeof)===ee)return 11;if(t===ne)return 14}return 2}(t),o=Mi(t,o),a=void 0,i){case 0:a=so(null,e,t,o,r);break;case 1:a=lo(null,e,t,o,r);break;case 11:a=no(null,e,t,o,r);break;case 14:a=io(null,e,t,Mi(t.type,o),n,r);break;default:R("306",t,"")}return a;case 0:return n=e.type,i=e.pendingProps,so(t,e,n,i=e.elementType===n?i:Mi(n,i),r);case 1:return n=e.type,i=e.pendingProps,lo(t,e,n,i=e.elementType===n?i:Mi(n,i),r);case 3:return co(e),null===(n=e.updateQueue)&&R("282"),i=null!==(i=e.memoizedState)?i.element:null,ci(e,n,e.pendingProps,null,r),e=(n=e.memoizedState.element)===i?(to(),ho(t,e,r)):(i=e.stateNode,(i=(null===t||null===t.child)&&i.hydrate)&&(Hi=wn(e.stateNode.containerInfo),Wi=e,i=Xi=!0),i?(e.effectTag|=2,e.child=Gi(e,null,n,r)):(ro(t,e,n,r),to()),e.child);case 5:return Pi(e),null===t&&Ji(e),n=e.type,i=e.pendingProps,o=null!==t?t.memoizedProps:null,a=i.children,vn(n,i)?a=null:null!==o&&vn(n,o)&&(e.effectTag|=16),ao(t,e),e=1!==r&&1&e.mode&&i.hidden?(e.expirationTime=1,null):(ro(t,e,a,r),e.child);case 6:return null===t&&Ji(e),null;case 13:return po(t,e,r);case 4:return Ti(e,e.stateNode.containerInfo),n=e.pendingProps,null===t?e.child=Zi(e,null,n,r):ro(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,no(t,e,n,i=e.elementType===n?i:Mi(n,i),r);case 7:return ro(t,e,e.pendingProps,r),e.child;case 8:case 12:return ro(t,e,e.pendingProps.children,r),e.child;case 10:t:{if(n=e.type._context,i=e.pendingProps,a=e.memoizedProps,vi(e,o=i.value),null!==a){var s=a.value;if(0===(o=s===o&&(0!==s||1/s==1/o)||s!=s&&o!=o?0:0|("function"==typeof n._calculateChangedBits?n._calculateChangedBits(s,o):1073741823))){if(a.children===i.children&&!Pn.current){e=ho(t,e,r);break t}}else for(null!==(a=e.child)&&(a.return=e);null!==a;){if(null!==(s=a.firstContextDependency))do{if(s.context===n&&0!=(s.observedBits&o)){if(1===a.tag){var l=ii(r);l.tag=2,ai(a,l)}a.expirationTime<r&&(a.expirationTime=r),null!==(l=a.alternate)&&l.expirationTime<r&&(l.expirationTime=r);for(var u=a.return;null!==u;){if(l=u.alternate,u.childExpirationTime<r)u.childExpirationTime=r,null!==l&&l.childExpirationTime<r&&(l.childExpirationTime=r);else{if(!(null!==l&&l.childExpirationTime<r))break;l.childExpirationTime=r}u=u.return}}l=a.child,s=s.next}while(null!==s);else l=10===a.tag&&a.type===e.type?null:a.child;if(null!==l)l.return=a;else for(l=a;null!==l;){if(l===e){l=null;break}if(null!==(a=l.sibling)){a.return=l.return,l=a;break}l=l.return}a=l}}ro(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=(o=e.pendingProps).children,bi(e),n=n(i=xi(i,o.unstable_observedBits)),e.effectTag|=1,ro(t,e,n,r),e.child;case 14:return o=Mi(i=e.type,e.pendingProps),io(t,e,i,o=Mi(i.type,o),n,r);case 15:return oo(t,e,e.type,e.pendingProps,n,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Mi(n,i),null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),e.tag=1,zn(n)?(t=!0,Fn(e)):t=!1,bi(e),Fi(e,n,i),ji(e,n,i,r),uo(null,e,n,!0,t,r);default:R("156")}}function mo(t){t.effectTag|=4}var yo=void 0,go=void 0,vo=void 0,_o=void 0;yo=function(t,e){for(var r=e.child;null!==r;){if(5===r.tag||6===r.tag)t.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r=(r.child.return=r).child;continue}if(r===e)break;for(;null===r.sibling;){if(null===r.return||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},go=function(){},vo=function(t,e,r,n,i){var o=t.memoizedProps;if(o!==n){var a=e.stateNode;switch(Ci(Ei.current),t=null,r){case"input":o=be(a,o),n=be(a,n),t=[];break;case"option":o=Wr(a,o),n=Wr(a,n),t=[];break;case"select":o=v({},o,{value:void 0}),n=v({},n,{value:void 0}),t=[];break;case"textarea":o=Xr(a,o),n=Xr(a,n),t=[];break;default:"function"!=typeof o.onClick&&"function"==typeof n.onClick&&(a.onclick=dn)}pn(r,n),a=r=void 0;var s=null;for(r in o)if(!n.hasOwnProperty(r)&&o.hasOwnProperty(r)&&null!=o[r])if("style"===r){var l=o[r];for(a in l)l.hasOwnProperty(a)&&((s=s||{})[a]="")}else"dangerouslySetInnerHTML"!==r&&"children"!==r&&"suppressContentEditableWarning"!==r&&"suppressHydrationWarning"!==r&&"autoFocus"!==r&&(x.hasOwnProperty(r)?t=t||[]:(t=t||[]).push(r,null));for(r in n){var u=n[r];if(l=null!=o?o[r]:void 0,n.hasOwnProperty(r)&&u!==l&&(null!=u||null!=l))if("style"===r)if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||((s=s||{})[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&((s=s||{})[a]=u[a])}else s||(t=t||[]).push(r,s),s=u;else"dangerouslySetInnerHTML"===r?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(t=t||[]).push(r,""+u)):"children"===r?l===u||"string"!=typeof u&&"number"!=typeof u||(t=t||[]).push(r,""+u):"suppressContentEditableWarning"!==r&&"suppressHydrationWarning"!==r&&(x.hasOwnProperty(r)?(null!=u&&fn(i,r),t||l===u||(t=[])):(t=t||[]).push(r,u))}s&&(t=t||[]).push("style",s),i=t,(e.updateQueue=i)&&mo(e)}},_o=function(t,e,r,n){r!==n&&mo(e)};var bo="function"==typeof WeakSet?WeakSet:Set;function xo(t,e){var r=e.source,n=e.stack;null===n&&null!==r&&(n=le(r)),null!==r&&se(r.type),e=e.value,null!==t&&1===t.tag&&se(t.type);try{console.error(e)}catch(t){setTimeout(function(){throw t})}}function wo(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Yo(e,t)}else t.current=null}function Eo(e){switch("function"==typeof Nn&&Nn(e),e.tag){case 0:case 11:case 14:case 15:var t=e.updateQueue;if(null!==t&&null!==(t=t.lastEffect)){var r=t=t.next;do{var n=r.destroy;if(null!==n){var i=e;try{n()}catch(t){Yo(i,t)}}r=r.next}while(r!==t)}break;case 1:if(wo(e),"function"==typeof(t=e.stateNode).componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){Yo(e,t)}break;case 5:wo(e);break;case 4:Co(e)}}function So(t){return 5===t.tag||3===t.tag||4===t.tag}function ko(t){t:{for(var e=t.return;null!==e;){if(So(e)){var r=e;break t}e=e.return}R("160"),r=void 0}var n=e=void 0;switch(r.tag){case 5:e=r.stateNode,n=!1;break;case 3:case 4:e=r.stateNode.containerInfo,n=!0;break;default:R("161")}16&r.effectTag&&(on(e,""),r.effectTag&=-17);t:e:for(r=t;;){for(;null===r.sibling;){if(null===r.return||So(r.return)){r=null;break t}r=r.return}for(r.sibling.return=r.return,r=r.sibling;5!==r.tag&&6!==r.tag;){if(2&r.effectTag)continue e;if(null===r.child||4===r.tag)continue e;r=(r.child.return=r).child}if(!(2&r.effectTag)){r=r.stateNode;break t}}for(var i=t;;){if(5===i.tag||6===i.tag)if(r)if(n){var o=e,a=i.stateNode,s=r;8===o.nodeType?o.parentNode.insertBefore(a,s):o.insertBefore(a,s)}else e.insertBefore(i.stateNode,r);else n?(a=e,s=i.stateNode,8===a.nodeType?(o=a.parentNode).insertBefore(s,a):(o=a).appendChild(s),null!=(a=a._reactRootContainer)||null!==o.onclick||(o.onclick=dn)):e.appendChild(i.stateNode);else if(4!==i.tag&&null!==i.child){i=(i.child.return=i).child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function Co(t){for(var e=t,r=!1,n=void 0,i=void 0;;){if(!r){r=e.return;t:for(;;){switch(null===r&&R("160"),r.tag){case 5:n=r.stateNode,i=!1;break t;case 3:case 4:n=r.stateNode.containerInfo,i=!0;break t}r=r.return}r=!0}if(5===e.tag||6===e.tag){t:for(var o=e,a=o;;)if(Eo(a),null!==a.child&&4!==a.tag)a.child.return=a,a=a.child;else{if(a===o)break;for(;null===a.sibling;){if(null===a.return||a.return===o)break t;a=a.return}a.sibling.return=a.return,a=a.sibling}i?(o=n,a=e.stateNode,8===o.nodeType?o.parentNode.removeChild(a):o.removeChild(a)):n.removeChild(e.stateNode)}else if(4===e.tag?(n=e.stateNode.containerInfo,i=!0):Eo(e),null!==e.child){e=(e.child.return=e).child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return;4===(e=e.return).tag&&(r=!1)}e.sibling.return=e.return,e=e.sibling}}function To(t,r){switch(r.tag){case 0:case 11:case 14:case 15:case 1:break;case 5:var e=r.stateNode;if(null!=e){var n=r.memoizedProps;t=null!==t?t.memoizedProps:n;var i=r.type,o=r.updateQueue;(r.updateQueue=null)!==o&&function(t,e,r,n,i){t[L]=i,"input"===r&&"radio"===i.type&&null!=i.name&&we(t,i),hn(r,n),n=hn(r,i);for(var o=0;o<e.length;o+=2){var a=e[o],s=e[o+1];"style"===a?un(t,s):"dangerouslySetInnerHTML"===a?nn(t,s):"children"===a?on(t,s):ve(t,a,s,n)}switch(r){case"input":Ee(t,i);break;case"textarea":Kr(t,i);break;case"select":e=t._wrapperState.wasMultiple,t._wrapperState.wasMultiple=!!i.multiple,null!=(r=i.value)?Hr(t,!!i.multiple,r,!1):e!==!!i.multiple&&(null!=i.defaultValue?Hr(t,!!i.multiple,i.defaultValue,!0):Hr(t,!!i.multiple,i.multiple?[]:"",!1))}}(e,o,i,t,n)}break;case 6:null===r.stateNode&&R("162"),r.stateNode.nodeValue=r.memoizedProps;break;case 3:case 12:break;case 13:if(e=r.memoizedState,n=void 0,t=r,null===e?n=!1:(n=!0,t=r.child,0===e.timedOutAt&&(e.timedOutAt=Ta())),null!==t&&function(t,e){for(var r=t;;){if(5===r.tag){var n=r.stateNode;if(e)n.style.display="none";else{n=r.stateNode;var i=r.memoizedProps.style;i=null!=i&&i.hasOwnProperty("display")?i.display:null,n.style.display=ln("display",i)}}else if(6===r.tag)r.stateNode.nodeValue=e?"":r.memoizedProps;else{if(13===r.tag&&null!==r.memoizedState){(n=r.child.sibling).return=r,r=n;continue}if(null!==r.child){r=(r.child.return=r).child;continue}}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}(t,n),null!==(e=r.updateQueue)){r.updateQueue=null;var a=r.stateNode;null===a&&(a=r.stateNode=new bo),e.forEach(function(t){var e=function(t,e){var r=t.stateNode;null!==r&&r.delete(e),e=Qo(e=Ta(),t),null!==(t=ea(t,e))&&(Jn(t,e),0!==(e=t.expirationTime)&&Aa(t,e))}.bind(null,r,t);a.has(t)||(a.add(t),t.then(e,e))})}break;case 17:break;default:R("163")}}var Ao="function"==typeof WeakMap?WeakMap:Map;function Po(t,e,r){(r=ii(r)).tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Fa(n),xo(t,e)},r}function Io(r,n,t){(t=ii(t)).tag=3;var i=r.type.getDerivedStateFromError;if("function"==typeof i){var e=n.value;t.payload=function(){return i(e)}}var o=r.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(t.callback=function(){"function"!=typeof i&&(null===Wo?Wo=new Set([this]):Wo.add(this));var t=n.value,e=n.stack;xo(r,n),this.componentDidCatch(t,{componentStack:null!==e?e:""})}),t}function Mo(t){switch(t.tag){case 1:zn(t.type)&&Ln();var e=t.effectTag;return 2048&e?(t.effectTag=-2049&e|64,t):null;case 3:return Ai(),On(),0!=(64&(e=t.effectTag))&&R("285"),t.effectTag=-2049&e|64,t;case 5:return Ii(t),null;case 13:return 2048&(e=t.effectTag)?(t.effectTag=-2049&e|64,t):null;case 4:return Ai(),null;case 10:return _i(t),null;default:return null}}var zo={readContext:xi},Lo=Zt.ReactCurrentOwner,Oo=1073741822,Do=0,Ro=!1,Fo=null,Bo=null,jo=0,No=-1,Uo=!1,Vo=null,qo=!1,Zo=null,Go=null,Wo=null;function Ho(){if(null!==Fo)for(var t=Fo.return;null!==t;){var e=t;switch(e.tag){case 1:var r=e.type.childContextTypes;null!=r&&Ln();break;case 3:Ai(),On();break;case 5:Ii(e);break;case 4:Ai();break;case 10:_i(e)}t=t.return}jo=0,Uo=!(No=-1),Fo=Bo=null}function Xo(){null!==Go&&(i.unstable_cancelCallback(Zo),Go())}function $o(t){for(;;){var e=t.alternate,r=t.return,n=t.sibling;if(0==(1024&t.effectTag)){t:{var i=e,o=jo,a=(e=Fo=t).pendingProps;switch(e.tag){case 2:case 16:break;case 15:case 0:break;case 1:zn(e.type)&&Ln();break;case 3:Ai(),On(),(a=e.stateNode).pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),null!==i&&null!==i.child||(Qi(e),e.effectTag&=-3),go(e);break;case 5:Ii(e);var s=Ci(ki.current);if(o=e.type,null!==i&&null!=e.stateNode)vo(i,e,o,a,s),i.ref!==e.ref&&(e.effectTag|=128);else if(a){var l=Ci(Ei.current);if(Qi(e)){i=(a=e).stateNode;var u=a.type,c=a.memoizedProps,p=s;switch(i[z]=a,i[L]=c,o=void 0,s=u){case"iframe":case"object":kr("load",i);break;case"video":case"audio":for(u=0;u<et.length;u++)kr(et[u],i);break;case"source":kr("error",i);break;case"img":case"image":case"link":kr("error",i),kr("load",i);break;case"form":kr("reset",i),kr("submit",i);break;case"details":kr("toggle",i);break;case"input":xe(i,c),kr("invalid",i),fn(p,"onChange");break;case"select":i._wrapperState={wasMultiple:!!c.multiple},kr("invalid",i),fn(p,"onChange");break;case"textarea":$r(i,c),kr("invalid",i),fn(p,"onChange")}for(o in pn(s,c),u=null,c)c.hasOwnProperty(o)&&(l=c[o],"children"===o?"string"==typeof l?i.textContent!==l&&(u=["children",l]):"number"==typeof l&&i.textContent!==""+l&&(u=["children",""+l]):x.hasOwnProperty(o)&&null!=l&&fn(p,o));switch(s){case"input":Vt(i),Se(i,c,!0);break;case"textarea":Vt(i),Jr(i);break;case"select":case"option":break;default:"function"==typeof c.onClick&&(i.onclick=dn)}o=u,a.updateQueue=o,(a=null!==o)&&mo(e)}else{c=e,i=o,p=a,u=9===s.nodeType?s:s.ownerDocument,l===Yr.html&&(l=Qr(i)),l===Yr.html?"script"===i?((i=u.createElement("div")).innerHTML="<script><\/script>",u=i.removeChild(i.firstChild)):"string"==typeof p.is?u=u.createElement(i,{is:p.is}):(u=u.createElement(i),"select"===i&&p.multiple&&(u.multiple=!0)):u=u.createElementNS(l,i),(i=u)[z]=c,i[L]=a,yo(i,e,!1,!1),p=i;var h=s,f=hn(u=o,c=a);switch(u){case"iframe":case"object":kr("load",p),s=c;break;case"video":case"audio":for(s=0;s<et.length;s++)kr(et[s],p);s=c;break;case"source":kr("error",p),s=c;break;case"img":case"image":case"link":kr("error",p),kr("load",p),s=c;break;case"form":kr("reset",p),kr("submit",p),s=c;break;case"details":kr("toggle",p),s=c;break;case"input":xe(p,c),s=be(p,c),kr("invalid",p),fn(h,"onChange");break;case"option":s=Wr(p,c);break;case"select":p._wrapperState={wasMultiple:!!c.multiple},s=v({},c,{value:void 0}),kr("invalid",p),fn(h,"onChange");break;case"textarea":$r(p,c),s=Xr(p,c),kr("invalid",p),fn(h,"onChange");break;default:s=c}pn(u,s),l=void 0;var d=u,m=p,y=s;for(l in y)if(y.hasOwnProperty(l)){var g=y[l];"style"===l?un(m,g):"dangerouslySetInnerHTML"===l?null!=(g=g?g.__html:void 0)&&nn(m,g):"children"===l?"string"==typeof g?"textarea"===d&&""===g||on(m,g):"number"==typeof g&&on(m,""+g):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(x.hasOwnProperty(l)?null!=g&&fn(h,l):null!=g&&ve(m,l,g,f))}switch(u){case"input":Vt(p),Se(p,c,!1);break;case"textarea":Vt(p),Jr(p);break;case"option":null!=c.value&&p.setAttribute("value",""+_e(c.value));break;case"select":(s=p).multiple=!!c.multiple,null!=(p=c.value)?Hr(s,!!c.multiple,p,!1):null!=c.defaultValue&&Hr(s,!!c.multiple,c.defaultValue,!0);break;default:"function"==typeof s.onClick&&(p.onclick=dn)}(a=gn(o,a))&&mo(e),e.stateNode=i}null!==e.ref&&(e.effectTag|=128)}else null===e.stateNode&&R("166");break;case 6:i&&null!=e.stateNode?_o(i,e,i.memoizedProps,a):("string"==typeof a||null===e.stateNode&&R("166"),i=Ci(ki.current),Ci(Ei.current),Qi(e)?(o=(a=e).stateNode,i=a.memoizedProps,o[z]=a,(a=o.nodeValue!==i)&&mo(e)):(o=e,(a=(9===i.nodeType?i:i.ownerDocument).createTextNode(a))[z]=e,o.stateNode=a));break;case 11:break;case 13:if(a=e.memoizedState,0!=(64&e.effectTag)){e.expirationTime=o,Fo=e;break t}a=null!==a,o=null!==i&&null!==i.memoizedState,null!==i&&!a&&o&&(null!==(i=i.child.sibling)&&(null!==(s=e.firstEffect)?(e.firstEffect=i).nextEffect=s:(e.firstEffect=e.lastEffect=i,i.nextEffect=null),i.effectTag=8)),(a!==o||0==(1&e.effectTag)&&a)&&(e.effectTag|=4);break;case 7:case 8:case 12:break;case 4:Ai(),go(e);break;case 10:_i(e);break;case 9:case 14:break;case 17:zn(e.type)&&Ln();break;default:R("156")}Fo=null}if(e=t,1===jo||1!==e.childExpirationTime){for(a=0,o=e.child;null!==o;)a<(i=o.expirationTime)&&(a=i),a<(s=o.childExpirationTime)&&(a=s),o=o.sibling;e.childExpirationTime=a}if(null!==Fo)return Fo;null!==r&&0==(1024&r.effectTag)&&(null===r.firstEffect&&(r.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==r.lastEffect&&(r.lastEffect.nextEffect=t.firstEffect),r.lastEffect=t.lastEffect),1<t.effectTag&&(null!==r.lastEffect?r.lastEffect.nextEffect=t:r.firstEffect=t,r.lastEffect=t))}else{if(null!==(t=Mo(t)))return t.effectTag&=1023,t;null!==r&&(r.firstEffect=r.lastEffect=null,r.effectTag|=1024)}if(null!==n)return n;if(null===r)break;t=r}return null}function Ko(t){var e=fo(t.alternate,t,jo);return t.memoizedProps=t.pendingProps,null===e&&(e=$o(t)),Lo.current=null,e}function Jo(e,t){Ro&&R("243"),Xo(),Ro=!0,Lo.currentDispatcher=zo;var r=e.nextExpirationTimeToWorkOn;r===jo&&e===Bo&&null!==Fo||(Ho(),jo=r,Fo=Gn((Bo=e).current,null),e.pendingCommitExpirationTime=0);for(var n=!1;;){try{if(t)for(;null!==Fo&&!Ma();)Fo=Ko(Fo);else for(;null!==Fo;)Fo=Ko(Fo)}catch(t){if(gi=yi=mi=null,null===Fo)n=!0,Fa(t);else{null===Fo&&R("271");var i=Fo,o=i.return;if(null!==o){t:{var a=e,s=o,l=i,u=t;if(o=jo,l.effectTag|=1024,l.firstEffect=l.lastEffect=null,null!==u&&"object"==typeof u&&"function"==typeof u.then){var c=u;u=s;var p=-1,h=-1;do{if(13===u.tag){var f=u.alternate;if(null!==f&&null!==(f=f.memoizedState)){h=10*(1073741822-f.timedOutAt);break}"number"==typeof(f=u.pendingProps.maxDuration)&&(f<=0?p=0:(-1===p||f<p)&&(p=f))}u=u.return}while(null!==u);u=s;do{if((f=13===u.tag)&&(f=void 0!==u.memoizedProps.fallback&&null===u.memoizedState),f){if(null===(s=u.updateQueue)?u.updateQueue=new Set([c]):s.add(c),0==(1&u.mode)){u.effectTag|=64,l.effectTag&=-1957,1===l.tag&&(null===l.alternate?l.tag=17:((o=ii(1073741823)).tag=2,ai(l,o))),l.expirationTime=1073741823;break t}null===(l=a.pingCache)?(l=a.pingCache=new Ao,s=new Set,l.set(c,s)):void 0===(s=l.get(c))&&(s=new Set,l.set(c,s)),s.has(o)||(s.add(o),l=ta.bind(null,a,c,o),c.then(l,l)),0<=(a=-1===p?1073741823:(-1===h&&(h=10*(1073741822-Qn(a,o))-5e3),h+p))&&No<a&&(No=a),u.effectTag|=2048,u.expirationTime=o;break t}u=u.return}while(null!==u);u=Error((se(l.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+le(l))}Uo=!0,u=fi(u,l),a=s;do{switch(a.tag){case 3:a.effectTag|=2048,a.expirationTime=o,si(a,o=Po(a,u,o));break t;case 1:if(c=u,p=a.type,h=a.stateNode,0==(64&a.effectTag)&&("function"==typeof p.getDerivedStateFromError||null!==h&&"function"==typeof h.componentDidCatch&&(null===Wo||!Wo.has(h)))){a.effectTag|=2048,a.expirationTime=o,si(a,o=Io(a,c,o));break t}}a=a.return}while(null!==a)}Fo=$o(i);continue}n=!0,Fa(t)}}break}if(Ro=!1,gi=yi=mi=Lo.currentDispatcher=null,n)Bo=null,e.finishedWork=null;else if(null!==Fo)e.finishedWork=null;else{if(null===(n=e.current.alternate)&&R("281"),Bo=null,Uo){if(i=e.latestPendingTime,o=e.latestSuspendedTime,a=e.latestPingedTime,0!==i&&i<r||0!==o&&o<r||0!==a&&a<r)return Yn(e,r),void Ca(e,n,r,e.expirationTime,-1);if(!e.didError&&t)return e.didError=!0,r=e.nextExpirationTimeToWorkOn=r,t=e.expirationTime=1073741823,void Ca(e,n,r,t,-1)}t&&-1!==No?(Yn(e,r),(t=10*(1073741822-Qn(e,r)))<No&&(No=t),t=10*(1073741822-Ta()),t=No-t,Ca(e,n,r,e.expirationTime,t<0?0:t)):(e.pendingCommitExpirationTime=r,e.finishedWork=n)}}function Yo(t,e){for(var r=t.return;null!==r;){switch(r.tag){case 1:var n=r.stateNode;if("function"==typeof r.type.getDerivedStateFromError||"function"==typeof n.componentDidCatch&&(null===Wo||!Wo.has(n)))return ai(r,t=Io(r,t=fi(e,t),1073741823)),void ra(r,1073741823);break;case 3:return ai(r,t=Po(r,t=fi(e,t),1073741823)),void ra(r,1073741823)}r=r.return}3===t.tag&&(ai(t,r=Po(t,r=fi(e,t),1073741823)),ra(t,1073741823))}function Qo(t,e){return 0!==Do?t=Do:Ro?t=qo?1073741823:jo:1&e.mode?(t=ya?1073741822-10*(1+((1073741822-t+15)/10|0)):1073741822-25*(1+((1073741822-t+500)/25|0)),null!==Bo&&t===jo&&--t):t=1073741823,ya&&(0===pa||t<pa)&&(pa=t),t}function ta(t,e,r){var n=t.pingCache;null!==n&&n.delete(e),null!==Bo&&jo===r?Bo=null:(e=t.earliestSuspendedTime,n=t.latestSuspendedTime,0!==e&&r<=e&&n<=r&&(t.didError=!1,(0===(e=t.latestPingedTime)||r<e)&&(t.latestPingedTime=r),ti(r,t),0!==(r=t.expirationTime)&&Aa(t,r)))}function ea(t,e){t.expirationTime<e&&(t.expirationTime=e);var r=t.alternate;null!==r&&r.expirationTime<e&&(r.expirationTime=e);var n=t.return,i=null;if(null===n&&3===t.tag)i=t.stateNode;else for(;null!==n;){if(r=n.alternate,n.childExpirationTime<e&&(n.childExpirationTime=e),null!==r&&r.childExpirationTime<e&&(r.childExpirationTime=e),null===n.return&&3===n.tag){i=n.stateNode;break}n=n.return}return i}function ra(t,e){null!==(t=ea(t,e))&&(!Ro&&0!==jo&&jo<e&&Ho(),Jn(t,e),Ro&&!qo&&Bo===t||Aa(t,t.expirationTime),xa<wa&&(wa=0,R("185")))}function na(t,e,r,n,i){var o=Do;Do=1073741823;try{return t(e,r,n,i)}finally{Do=o}}var ia=null,oa=null,aa=0,sa=void 0,la=!1,ua=null,ca=0,pa=0,ha=!1,fa=null,da=!1,ma=!1,ya=!1,ga=null,va=i.unstable_now(),_a=1073741822-(va/10|0),ba=_a,xa=50,wa=0,Ea=null;function Sa(){_a=1073741822-((i.unstable_now()-va)/10|0)}function ka(t,e){if(0!==aa){if(e<aa)return;null!==sa&&i.unstable_cancelCallback(sa)}aa=e,t=i.unstable_now()-va,sa=i.unstable_scheduleCallback(za,{timeout:10*(1073741822-e)-t})}function Ca(t,e,r,n,i){t.expirationTime=n,0!==i||Ma()?0<i&&(t.timeoutHandle=_n(function(t,e,r){t.pendingCommitExpirationTime=r,t.finishedWork=e,Sa(),ba=_a,Oa(t,r)}.bind(null,t,e,r),i)):(t.pendingCommitExpirationTime=r,t.finishedWork=e)}function Ta(){return la||(Pa(),0!==ca&&1!==ca||(Sa(),ba=_a)),ba}function Aa(t,e){null===t.nextScheduledRoot?(t.expirationTime=e,null===oa?(ia=oa=t,t.nextScheduledRoot=t):(oa=oa.nextScheduledRoot=t).nextScheduledRoot=ia):e>t.expirationTime&&(t.expirationTime=e),la||(da?ma&&Da(ua=t,ca=1073741823,!1):1073741823===e?La(1073741823,!1):ka(t,e))}function Pa(){var t=0,e=null;if(null!==oa)for(var r=oa,n=ia;null!==n;){var i=n.expirationTime;if(0===i){if((null===r||null===oa)&&R("244"),n===n.nextScheduledRoot){ia=oa=n.nextScheduledRoot=null;break}if(n===ia)ia=i=n.nextScheduledRoot,oa.nextScheduledRoot=i,n.nextScheduledRoot=null;else{if(n===oa){(oa=r).nextScheduledRoot=ia,n.nextScheduledRoot=null;break}r.nextScheduledRoot=n.nextScheduledRoot,n.nextScheduledRoot=null}n=r.nextScheduledRoot}else{if(t<i&&(t=i,e=n),n===oa)break;if(1073741823===t)break;n=(r=n).nextScheduledRoot}}ua=e,ca=t}var Ia=!1;function Ma(){return!!Ia||!!i.unstable_shouldYield()&&(Ia=!0)}function za(){try{if(!Ma()&&null!==ia){Sa();var t=ia;do{var e=t.expirationTime;0!==e&&_a<=e&&(t.nextExpirationTimeToWorkOn=_a),t=t.nextScheduledRoot}while(t!==ia)}La(0,!0)}finally{Ia=!1}}function La(t,e){if(Pa(),e)for(Sa(),ba=_a;null!==ua&&0!==ca&&t<=ca&&!(Ia&&ca<_a);)Da(ua,ca,ca<_a),Pa(),Sa(),ba=_a;else for(;null!==ua&&0!==ca&&t<=ca;)Da(ua,ca,!1),Pa();if(e&&(aa=0,sa=null),0!==ca&&ka(ua,ca),wa=0,(Ea=null)!==ga)for(t=ga,ga=null,e=0;e<t.length;e++){var r=t[e];try{r._onComplete()}catch(t){ha||(ha=!0,fa=t)}}if(ha)throw t=fa,fa=null,ha=!1,t}function Oa(t,e){la&&R("253"),Da(ua=t,ca=e,!1),La(1073741823,!1)}function Da(t,e,r){if(la&&R("245"),la=!0,r){var n=t.finishedWork;null!==n?Ra(t,n,e):(t.finishedWork=null,-1!==(n=t.timeoutHandle)&&(t.timeoutHandle=-1,bn(n)),Jo(t,r),null!==(n=t.finishedWork)&&(Ma()?t.finishedWork=n:Ra(t,n,e)))}else null!==(n=t.finishedWork)?Ra(t,n,e):(t.finishedWork=null,-1!==(n=t.timeoutHandle)&&(t.timeoutHandle=-1,bn(n)),Jo(t,r),null!==(n=t.finishedWork)&&Ra(t,n,e));la=!1}function Ra(t,e,r){var n=t.firstBatch;if(null!==n&&n._expirationTime>=r&&(null===ga?ga=[n]:ga.push(n),n._defer))return t.finishedWork=e,void(t.expirationTime=0);t.finishedWork=null,t===Ea?wa++:(Ea=t,wa=0),qo=Ro=!0,t.current===e&&R("177"),0===(r=t.pendingCommitExpirationTime)&&R("261"),t.pendingCommitExpirationTime=0,n=e.expirationTime;var i=e.childExpirationTime;if(n=n<i?i:n,t.didError=!1,0===n?(t.earliestPendingTime=0,t.latestPendingTime=0,t.earliestSuspendedTime=0,t.latestSuspendedTime=0,t.latestPingedTime=0):(n<t.latestPingedTime&&(t.latestPingedTime=0),0!==(i=t.latestPendingTime)&&(n<i?t.earliestPendingTime=t.latestPendingTime=0:t.earliestPendingTime>n&&(t.earliestPendingTime=t.latestPendingTime)),0===(i=t.earliestSuspendedTime)?Jn(t,n):n<t.latestSuspendedTime?(t.earliestSuspendedTime=0,t.latestSuspendedTime=0,t.latestPingedTime=0,Jn(t,n)):i<n&&Jn(t,n)),ti(0,t),Lo.current=null,n=1<e.effectTag?null!==e.lastEffect?(e.lastEffect.nextEffect=e).firstEffect:e:e.firstEffect,mn=Sr,Fr(i=Rr())){if("selectionStart"in i)var o={start:i.selectionStart,end:i.selectionEnd};else t:{var a=(o=(o=i.ownerDocument)&&o.defaultView||window).getSelection&&o.getSelection();if(a&&0!==a.rangeCount){o=a.anchorNode;var s=a.anchorOffset,l=a.focusNode;a=a.focusOffset;try{o.nodeType,l.nodeType}catch(t){o=null;break t}var u=0,c=-1,p=-1,h=0,f=0,d=i,m=null;e:for(;;){for(var y;d!==o||0!==s&&3!==d.nodeType||(c=u+s),d!==l||0!==a&&3!==d.nodeType||(p=u+a),3===d.nodeType&&(u+=d.nodeValue.length),null!==(y=d.firstChild);)m=d,d=y;for(;;){if(d===i)break e;if(m===o&&++h===s&&(c=u),m===l&&++f===a&&(p=u),null!==(y=d.nextSibling))break;m=(d=m).parentNode}d=y}o=-1===c||-1===p?null:{start:c,end:p}}else o=null}o=o||{start:0,end:0}}else o=null;for(Sr=!(yn={focusedElem:i,selectionRange:o}),Vo=n;null!==Vo;){i=!1,o=void 0;try{for(;null!==Vo;){if(256&Vo.effectTag)t:{var g=Vo.alternate;switch((s=Vo).tag){case 0:case 11:case 15:break t;case 1:if(256&s.effectTag&&null!==g){var v=g.memoizedProps,_=g.memoizedState,b=s.stateNode,x=b.getSnapshotBeforeUpdate(s.elementType===s.type?v:Mi(s.type,v),_);b.__reactInternalSnapshotBeforeUpdate=x}break t;case 3:case 5:case 6:case 4:case 17:break t;default:R("163")}}Vo=Vo.nextEffect}}catch(t){i=!0,o=t}i&&(null===Vo&&R("178"),Yo(Vo,o),null!==Vo&&(Vo=Vo.nextEffect))}for(Vo=n;null!==Vo;){g=!1,v=void 0;try{for(;null!==Vo;){var w=Vo.effectTag;if(16&w&&on(Vo.stateNode,""),128&w){var E=Vo.alternate;if(null!==E){var S=E.ref;null!==S&&("function"==typeof S?S(null):S.current=null)}}switch(14&w){case 2:ko(Vo),Vo.effectTag&=-3;break;case 6:ko(Vo),Vo.effectTag&=-3,To(Vo.alternate,Vo);break;case 4:To(Vo.alternate,Vo);break;case 8:Co(_=Vo),_.return=null,_.child=null,_.memoizedState=null,_.updateQueue=null;var k=_.alternate;null!==k&&(k.return=null,k.child=null,k.memoizedState=null,k.updateQueue=null)}Vo=Vo.nextEffect}}catch(t){g=!0,v=t}g&&(null===Vo&&R("178"),Yo(Vo,v),null!==Vo&&(Vo=Vo.nextEffect))}if(S=yn,E=Rr(),w=S.focusedElem,g=S.selectionRange,E!==w&&w&&w.ownerDocument&&function t(e,r){return!(!e||!r)&&(e===r||(!e||3!==e.nodeType)&&(r&&3===r.nodeType?t(e,r.parentNode):"contains"in e?e.contains(r):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(r))))}(w.ownerDocument.documentElement,w)){null!==g&&Fr(w)&&(E=g.start,void 0===(S=g.end)&&(S=E),"selectionStart"in w?(w.selectionStart=E,w.selectionEnd=Math.min(S,w.value.length)):(S=(E=w.ownerDocument||document)&&E.defaultView||window).getSelection&&(S=S.getSelection(),v=w.textContent.length,k=Math.min(g.start,v),g=void 0===g.end?k:Math.min(g.end,v),!S.extend&&g<k&&(v=g,g=k,k=v),v=Dr(w,k),_=Dr(w,g),v&&_&&(1!==S.rangeCount||S.anchorNode!==v.node||S.anchorOffset!==v.offset||S.focusNode!==_.node||S.focusOffset!==_.offset)&&((E=E.createRange()).setStart(v.node,v.offset),S.removeAllRanges(),g<k?(S.addRange(E),S.extend(_.node,_.offset)):(E.setEnd(_.node,_.offset),S.addRange(E))))),E=[];for(S=w;S=S.parentNode;)1===S.nodeType&&E.push({element:S,left:S.scrollLeft,top:S.scrollTop});for("function"==typeof w.focus&&w.focus(),w=0;w<E.length;w++)(S=E[w]).element.scrollLeft=S.left,S.element.scrollTop=S.top}for(Sr=!!mn,mn=yn=null,t.current=e,Vo=n;null!==Vo;){n=!1,w=void 0;try{for(E=r;null!==Vo;){var C=Vo.effectTag;if(36&C){var T=Vo.alternate;switch(k=E,(S=Vo).tag){case 0:case 11:case 15:break;case 1:var A=S.stateNode;if(4&S.effectTag)if(null===T)A.componentDidMount();else{var P=S.elementType===S.type?T.memoizedProps:Mi(S.type,T.memoizedProps);A.componentDidUpdate(P,T.memoizedState,A.__reactInternalSnapshotBeforeUpdate)}var I=S.updateQueue;null!==I&&pi(0,I,A);break;case 3:var M=S.updateQueue;if(null!==M){if((g=null)!==S.child)switch(S.child.tag){case 5:g=S.child.stateNode;break;case 1:g=S.child.stateNode}pi(0,M,g)}break;case 5:var z=S.stateNode;null===T&&4&S.effectTag&&gn(S.type,S.memoizedProps)&&z.focus();break;case 6:case 4:case 12:case 13:case 17:break;default:R("163")}}if(128&C){var L=Vo.ref;if(null!==L){var O=Vo.stateNode;switch(Vo.tag){case 5:var D=O;break;default:D=O}"function"==typeof L?L(D):L.current=D}}Vo=Vo.nextEffect}}catch(t){n=!0,w=t}n&&(null===Vo&&R("178"),Yo(Vo,w),null!==Vo&&(Vo=Vo.nextEffect))}Ro=qo=!1,"function"==typeof jn&&jn(e.stateNode),0===(e=(C=e.expirationTime)<(e=e.childExpirationTime)?e:C)&&(Wo=null),t.expirationTime=e,t.finishedWork=null}function Fa(t){null===ua&&R("246"),ua.expirationTime=0,ha||(ha=!0,fa=t)}function Ba(t,e){var r=da;da=!0;try{return t(e)}finally{(da=r)||la||La(1073741823,!1)}}function ja(t,e){if(da&&!ma){ma=!0;try{return t(e)}finally{ma=!1}}return t(e)}function Na(t,e,r){if(ya)return t(e,r);da||la||0===pa||(La(pa,!1),pa=0);var n=ya,i=da;da=ya=!0;try{return t(e,r)}finally{ya=n,(da=i)||la||La(1073741823,!1)}}function Ua(t,e,r,n,i){var o=e.current;t:if(r){e:{2===rr(r=r._reactInternalFiber)&&1===r.tag||R("170");var a=r;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(zn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(null!==a);R("171"),a=void 0}if(1===r.tag){var s=r.type;if(zn(s)){r=Rn(r,s,a);break t}}r=a}else r=Tn;return null===e.context?e.context=r:e.pendingContext=r,e=i,(i=ii(n)).payload={element:t},null!==(e=void 0===e?null:e)&&(i.callback=e),Xo(),ai(o,i),ra(o,n),n}function Va(t,e,r,n){var i=e.current;return Ua(t,e,r,i=Qo(Ta(),i),n)}function qa(t){if(!(t=t.current).child)return null;switch(t.child.tag){case 5:default:return t.child.stateNode}}function Za(t){var e=1073741822-25*(1+((1073741822-Ta()+500)/25|0));Oo<=e&&(e=Oo-1),this._expirationTime=Oo=e,this._root=t,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function Ga(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function Wa(t,e,r){t={current:e=qn(3,null,null,e?3:0),containerInfo:t,pendingChildren:null,pingCache:null,earliestPendingTime:0,latestPendingTime:0,earliestSuspendedTime:0,latestSuspendedTime:0,latestPingedTime:0,didError:!1,pendingCommitExpirationTime:0,finishedWork:null,timeoutHandle:-1,context:null,pendingContext:null,hydrate:r,nextExpirationTimeToWorkOn:0,expirationTime:0,firstBatch:null,nextScheduledRoot:null},this._internalRoot=e.stateNode=t}function Ha(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Xa(t,e,r,n,i){Ha(r)||R("200");var o=r._reactRootContainer;if(o){if("function"==typeof i){var a=i;i=function(){var t=qa(o._internalRoot);a.call(t)}}null!=t?o.legacy_renderSubtreeIntoContainer(t,e,i):o.render(e,i)}else{if(o=r._reactRootContainer=function(t,e){if(e||(e=!(!(e=t?9===t.nodeType?t.documentElement:t.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var r;r=t.lastChild;)t.removeChild(r);return new Wa(t,!1,e)}(r,n),"function"==typeof i){var s=i;i=function(){var t=qa(o._internalRoot);s.call(t)}}ja(function(){null!=t?o.legacy_renderSubtreeIntoContainer(t,e,i):o.render(e,i)})}return qa(o._internalRoot)}function $a(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return Ha(e)||R("200"),function(t,e,r,n){var i=3<arguments.length&&void 0!==n?n:null;return{$$typeof:Xt,key:null==i?null:""+i,children:t,containerInfo:e,implementation:r}}(t,e,null,r)}Ct=function(t,e,r){switch(e){case"input":if(Ee(t,r),e=r.name,"radio"===r.type&&null!=e){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=B(n);i||R("90"),qt(n),Ee(n,i)}}}break;case"textarea":Kr(t,r);break;case"select":null!=(e=r.value)&&Hr(t,!!r.multiple,e,!1)}},Za.prototype.render=function(t){this._defer||R("250"),this._hasChildren=!0,this._children=t;var e=this._root._internalRoot,r=this._expirationTime,n=new Ga;return Ua(t,e,null,r,n._onCommit),n},Za.prototype.then=function(t){if(this._didComplete)t();else{var e=this._callbacks;null===e&&(e=this._callbacks=[]),e.push(t)}},Za.prototype.commit=function(){var t=this._root._internalRoot,e=t.firstBatch;if(this._defer&&null!==e||R("251"),this._hasChildren){var r=this._expirationTime;if(e!==this){this._hasChildren&&(r=this._expirationTime=e._expirationTime,this.render(this._children));for(var n=null,i=e;i!==this;)i=(n=i)._next;null===n&&R("251"),n._next=i._next,this._next=e,t.firstBatch=this}this._defer=!1,Oa(t,r),e=this._next,(this._next=null)!==(e=t.firstBatch=e)&&e._hasChildren&&e.render(e._children)}else this._next=null,this._defer=!1},Za.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var t=this._callbacks;if(null!==t)for(var e=0;e<t.length;e++)(0,t[e])()}},Ga.prototype.then=function(t){if(this._didCommit)t();else{var e=this._callbacks;null===e&&(e=this._callbacks=[]),e.push(t)}},Ga.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var t=this._callbacks;if(null!==t)for(var e=0;e<t.length;e++){var r=t[e];"function"!=typeof r&&R("191",r),r()}}},Wa.prototype.render=function(t,e){var r=this._internalRoot,n=new Ga;return null!==(e=void 0===e?null:e)&&n.then(e),Va(t,r,null,n._onCommit),n},Wa.prototype.unmount=function(t){var e=this._internalRoot,r=new Ga;return null!==(t=void 0===t?null:t)&&r.then(t),Va(null,e,null,r._onCommit),r},Wa.prototype.legacy_renderSubtreeIntoContainer=function(t,e,r){var n=this._internalRoot,i=new Ga;return null!==(r=void 0===r?null:r)&&i.then(r),Va(e,n,t,i._onCommit),i},Wa.prototype.createBatch=function(){var t=new Za(this),e=t._expirationTime,r=this._internalRoot,n=r.firstBatch;if(null===n)(r.firstBatch=t)._next=null;else{for(r=null;null!==n&&n._expirationTime>=e;)n=(r=n)._next;t._next=n,null!==r&&(r._next=t)}return t},Ot=function(){la||0===pa||(La(pa,!1),pa=0)};var Ka,Ja,Ya={createPortal:$a,findDOMNode:function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternalFiber;return void 0===e&&("function"==typeof t.render?R("188"):R("268",Object.keys(t))),t=null===(t=ir(e))?null:t.stateNode},hydrate:function(t,e,r){return Xa(null,t,e,!0,r)},render:function(t,e,r){return Xa(null,t,e,!1,r)},unstable_renderSubtreeIntoContainer:function(t,e,r,n){return null!=t&&void 0!==t._reactInternalFiber||R("38"),Xa(t,e,r,!1,n)},unmountComponentAtNode:function(t){return Ha(t)||R("40"),!!t._reactRootContainer&&(ja(function(){Xa(null,null,t,!1,function(){t._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return $a.apply(void 0,arguments)},unstable_batchedUpdates:zt=Ba,unstable_interactiveUpdates:Lt=Na,flushSync:function(t,e){la&&R("187");var r=da;da=!0;try{return na(t,e)}finally{da=r,La(1073741823,!1)}},unstable_createRoot:function(t,e){return Ha(t)||R("299","unstable_createRoot"),new Wa(t,!0,null!=e&&!0===e.hydrate)},unstable_flushControlled:function(t){var e=da;da=!0;try{na(t)}finally{(da=e)||la||La(1073741823,!1)}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[D,F,B,A.injectEventPluginsByName,b,Z,function(t){k(t,q)},It,Mt,Ar,I]}};Ja=(Ka={findFiberByHostInstance:O,bundleType:0,version:"16.7.0",rendererPackageName:"react-dom"}).findFiberByHostInstance,function(t){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return;var e=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(e.isDisabled||!e.supportsFiber)return;try{var r=e.inject(t);jn=Un(function(t){return e.onCommitFiberRoot(r,t)}),Nn=Un(function(t){return e.onCommitFiberUnmount(r,t)})}catch(t){}}(v({},Ka,{overrideProps:null,findHostInstanceByFiber:function(t){return null===(t=ir(t))?null:t.stateNode},findFiberByHostInstance:function(t){return Ja?Ja(t):null}}));var Qa=Ya;t.exports=Qa.default||Qa},function(t,e,r){"use strict";t.exports=r(42)},function(t,j,e){"use strict";(function(t){
/** @license React v0.12.0
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
Object.defineProperty(j,"__esModule",{value:!0});var a=null,n=!1,s=3,i=-1,l=-1,o=!1,u=!1;function c(){if(!o){var t=a.expirationTime;u?w():u=!0,x(e,t)}}function p(){var t=a,e=a.next;if(a===e)a=null;else{var r=a.previous;a=r.next=e,e.previous=r}t.next=t.previous=null,r=t.callback,e=t.expirationTime,t=t.priorityLevel;var n=s,i=l;s=t,l=e;try{var o=r()}finally{s=n,l=i}if("function"==typeof o)if(o={callback:o,priorityLevel:t,expirationTime:e,next:null,previous:null},null===a)a=o.next=o.previous=o;else{r=null,t=a;do{if(t.expirationTime>=e){r=t;break}t=t.next}while(t!==a);null===r?r=a:r===a&&(a=o,c()),(e=r.previous).next=r.previous=o,o.next=r,o.previous=e}}function h(){if(-1===i&&null!==a&&1===a.priorityLevel){o=!0;try{for(;p(),null!==a&&1===a.priorityLevel;);}finally{o=!1,null!==a?c():u=!1}}}function e(t){o=!0;var e=n;n=t;try{if(t)for(;null!==a;){var r=j.unstable_now();if(!(a.expirationTime<=r))break;for(;p(),null!==a&&a.expirationTime<=r;);}else if(null!==a)for(;p(),null!==a&&!E(););}finally{o=!1,n=e,null!==a?c():u=!1,h()}}var r,f,d=Date,m="function"==typeof setTimeout?setTimeout:void 0,y="function"==typeof clearTimeout?clearTimeout:void 0,g="function"==typeof requestAnimationFrame?requestAnimationFrame:void 0,v="function"==typeof cancelAnimationFrame?cancelAnimationFrame:void 0;function _(e){r=g(function(t){y(f),e(t)}),f=m(function(){v(r),e(j.unstable_now())},100)}if("object"==typeof performance&&"function"==typeof performance.now){var b=performance;j.unstable_now=function(){return b.now()}}else j.unstable_now=function(){return d.now()};var x,w,E,S=null;if("undefined"!=typeof window?S=window:void 0!==t&&(S=t),S&&S._schedMock){var k=S._schedMock;x=k[0],w=k[1],E=k[2],j.unstable_now=k[3]}else if("undefined"==typeof window||"function"!=typeof MessageChannel){var C=null,T=function(t){if(null!==C)try{C(t)}finally{C=null}};x=function(t){null!==C?setTimeout(x,0,t):(C=t,setTimeout(T,0,!1))},w=function(){C=null},E=function(){return!1}}else{"undefined"!=typeof console&&("function"!=typeof g&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof v&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"));var A=null,P=!1,I=-1,M=!1,z=!1,L=0,O=33,D=33;E=function(){return L<=j.unstable_now()};var R=new MessageChannel,F=R.port2;R.port1.onmessage=function(){P=!1;var t=A,e=I;A=null,I=-1;var r=j.unstable_now(),n=!1;if(L-r<=0){if(!(-1!==e&&e<=r))return M||(M=!0,_(B)),A=t,void(I=e);n=!0}if(null!==t){z=!0;try{t(n)}finally{z=!1}}};var B=function(t){if(null!==A){_(B);var e=t-L+D;e<D&&O<D?(e<8&&(e=8),D=e<O?O:e):O=e,L=t+D,P||(P=!0,F.postMessage(void 0))}else M=!1};x=function(t,e){A=t,I=e,z||e<0?F.postMessage(void 0):M||(M=!0,_(B))},w=function(){A=null,P=!1,I=-1}}j.unstable_ImmediatePriority=1,j.unstable_UserBlockingPriority=2,j.unstable_NormalPriority=3,j.unstable_IdlePriority=5,j.unstable_LowPriority=4,j.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var r=s,n=i;s=t,i=j.unstable_now();try{return e()}finally{s=r,i=n,h()}},j.unstable_scheduleCallback=function(t,e){var r=-1!==i?i:j.unstable_now();if("object"==typeof e&&null!==e&&"number"==typeof e.timeout)e=r+e.timeout;else switch(s){case 1:e=r+-1;break;case 2:e=r+250;break;case 5:e=r+1073741823;break;case 4:e=r+1e4;break;default:e=r+5e3}if(t={callback:t,priorityLevel:s,expirationTime:e,next:null,previous:null},null===a)a=t.next=t.previous=t,c();else{r=null;var n=a;do{if(n.expirationTime>e){r=n;break}n=n.next}while(n!==a);null===r?r=a:r===a&&(a=t,c()),(e=r.previous).next=r.previous=t,t.next=r,t.previous=e}return t},j.unstable_cancelCallback=function(t){var e=t.next;if(null!==e){if(e===t)a=null;else{t===a&&(a=e);var r=t.previous;(r.next=e).previous=r}t.next=t.previous=null}},j.unstable_wrapCallback=function(r){var n=s;return function(){var t=s,e=i;s=n,i=j.unstable_now();try{return r.apply(this,arguments)}finally{s=t,i=e,h()}}},j.unstable_getCurrentPriorityLevel=function(){return s},j.unstable_shouldYield=function(){return!n&&(null!==a&&a.expirationTime<l||E())},j.unstable_continueExecution=function(){null!==a&&c()},j.unstable_pauseExecution=function(){},j.unstable_getFirstCallbackNode=function(){return a}}).call(this,e(24))},function(t,e,r){"use strict";var s=r(44);function n(){}t.exports=function(){function t(t,e,r,n,i,o){if(o!==s){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function e(){return t}var r={array:t.isRequired=t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e};return r.checkPropTypes=n,r.PropTypes=r}},function(t,e,r){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,r){"use strict";t.exports=r(46)},function(t,e,r){"use strict";
/** @license React v16.7.0
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Object.defineProperty(e,"__esModule",{value:!0});var n="function"==typeof Symbol&&Symbol.for,i=n?Symbol.for("react.element"):60103,o=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,l=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,p=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,m=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116;function g(t){if("object"==typeof t&&null!==t){var e=t.$$typeof;switch(e){case i:switch(t=t.type){case p:case h:case a:case l:case s:case d:return t;default:switch(t=t&&t.$$typeof){case c:case f:case u:return t;default:return e}}case y:case m:case o:return e}}}function v(t){return g(t)===h}e.typeOf=g,e.AsyncMode=p,e.ConcurrentMode=h,e.ContextConsumer=c,e.ContextProvider=u,e.Element=i,e.ForwardRef=f,e.Fragment=a,e.Lazy=y,e.Memo=m,e.Portal=o,e.Profiler=l,e.StrictMode=s,e.Suspense=d,e.isValidElementType=function(t){return"string"==typeof t||"function"==typeof t||t===a||t===h||t===l||t===s||t===d||"object"==typeof t&&null!==t&&(t.$$typeof===y||t.$$typeof===m||t.$$typeof===u||t.$$typeof===c||t.$$typeof===f)},e.isAsyncMode=function(t){return v(t)||g(t)===p},e.isConcurrentMode=v,e.isContextConsumer=function(t){return g(t)===c},e.isContextProvider=function(t){return g(t)===u},e.isElement=function(t){return"object"==typeof t&&null!==t&&t.$$typeof===i},e.isForwardRef=function(t){return g(t)===f},e.isFragment=function(t){return g(t)===a},e.isLazy=function(t){return g(t)===y},e.isMemo=function(t){return g(t)===m},e.isPortal=function(t){return g(t)===o},e.isProfiler=function(t){return g(t)===l},e.isStrictMode=function(t){return g(t)===s},e.isSuspense=function(t){return g(t)===d}},function(t,e,r){"use strict";t.exports=r(48)},function(t,e,r){"use strict";
/** @license React v16.7.0
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Object.defineProperty(e,"__esModule",{value:!0});var n="function"==typeof Symbol&&Symbol.for,i=n?Symbol.for("react.element"):60103,o=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,l=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,p=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,m=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116;function g(t){if("object"==typeof t&&null!==t){var e=t.$$typeof;switch(e){case i:switch(t=t.type){case p:case h:case a:case l:case s:case d:return t;default:switch(t=t&&t.$$typeof){case c:case f:case u:return t;default:return e}}case y:case m:case o:return e}}}function v(t){return g(t)===h}e.typeOf=g,e.AsyncMode=p,e.ConcurrentMode=h,e.ContextConsumer=c,e.ContextProvider=u,e.Element=i,e.ForwardRef=f,e.Fragment=a,e.Lazy=y,e.Memo=m,e.Portal=o,e.Profiler=l,e.StrictMode=s,e.Suspense=d,e.isValidElementType=function(t){return"string"==typeof t||"function"==typeof t||t===a||t===h||t===l||t===s||t===d||"object"==typeof t&&null!==t&&(t.$$typeof===y||t.$$typeof===m||t.$$typeof===u||t.$$typeof===c||t.$$typeof===f)},e.isAsyncMode=function(t){return v(t)||g(t)===p},e.isConcurrentMode=v,e.isContextConsumer=function(t){return g(t)===c},e.isContextProvider=function(t){return g(t)===u},e.isElement=function(t){return"object"==typeof t&&null!==t&&t.$$typeof===i},e.isForwardRef=function(t){return g(t)===f},e.isFragment=function(t){return g(t)===a},e.isLazy=function(t){return g(t)===y},e.isMemo=function(t){return g(t)===m},e.isPortal=function(t){return g(t)===o},e.isProfiler=function(t){return g(t)===l},e.isStrictMode=function(t){return g(t)===s},e.isSuspense=function(t){return g(t)===d}},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(t,e,r){"use strict";
/** @license React v16.7.0
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Object.defineProperty(e,"__esModule",{value:!0});var n="function"==typeof Symbol&&Symbol.for,i=n?Symbol.for("react.element"):60103,o=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,l=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,p=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,m=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116;function g(t){if("object"==typeof t&&null!==t){var e=t.$$typeof;switch(e){case i:switch(t=t.type){case p:case h:case a:case l:case s:case d:return t;default:switch(t=t&&t.$$typeof){case c:case f:case u:return t;default:return e}}case y:case m:case o:return e}}}function v(t){return g(t)===h}e.typeOf=g,e.AsyncMode=p,e.ConcurrentMode=h,e.ContextConsumer=c,e.ContextProvider=u,e.Element=i,e.ForwardRef=f,e.Fragment=a,e.Lazy=y,e.Memo=m,e.Portal=o,e.Profiler=l,e.StrictMode=s,e.Suspense=d,e.isValidElementType=function(t){return"string"==typeof t||"function"==typeof t||t===a||t===h||t===l||t===s||t===d||"object"==typeof t&&null!==t&&(t.$$typeof===y||t.$$typeof===m||t.$$typeof===u||t.$$typeof===c||t.$$typeof===f)},e.isAsyncMode=function(t){return v(t)||g(t)===p},e.isConcurrentMode=v,e.isContextConsumer=function(t){return g(t)===c},e.isContextProvider=function(t){return g(t)===u},e.isElement=function(t){return"object"==typeof t&&null!==t&&t.$$typeof===i},e.isForwardRef=function(t){return g(t)===f},e.isFragment=function(t){return g(t)===a},e.isLazy=function(t){return g(t)===y},e.isMemo=function(t){return g(t)===m},e.isPortal=function(t){return g(t)===o},e.isProfiler=function(t){return g(t)===l},e.isStrictMode=function(t){return g(t)===s},e.isSuspense=function(t){return g(t)===d}},function(t,e,r){t.exports=r(52)()},function(t,e,r){"use strict";var s=r(53);function n(){}t.exports=function(){function t(t,e,r,n,i,o){if(o!==s){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function e(){return t}var r={array:t.isRequired=t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e};return r.checkPropTypes=n,r.PropTypes=r}},function(t,e,r){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e){function r(t){var e=[];for(var r in t)e.push(r);return e}(t.exports="function"==typeof Object.keys?Object.keys:r).shim=r},function(t,e){var r="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function n(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function i(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}(e=t.exports=r?n:i).supported=n,e.unsupported=i},function(t,e){},function(t,e,r){"use strict";var a=r(58),i=r(59),n=r(60);function o(t,e,r,n,i){e=e||s,r=r||l,i=i||Array,this.nodeSize=n||64,this.points=t,this.ids=new i(t.length),this.coords=new i(2*t.length);for(var o=0;o<t.length;o++)this.ids[o]=o,this.coords[2*o]=e(t[o]),this.coords[2*o+1]=r(t[o]);a(this.ids,this.coords,this.nodeSize,0,this.ids.length-1,0)}function s(t){return t[0]}function l(t){return t[1]}t.exports=function(t,e,r,n,i){return new o(t,e,r,n,i)},o.prototype={range:function(t,e,r,n){return i(this.ids,this.coords,t,e,r,n,this.nodeSize)},within:function(t,e,r){return n(this.ids,this.coords,t,e,r,this.nodeSize)}}},function(t,e,r){"use strict";function d(t,e,r,n,i,o){for(;n<i;){if(600<i-n){var a=i-n+1,s=r-n+1,l=Math.log(a),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(a-u)/a)*(s-a/2<0?-1:1);d(t,e,r,Math.max(n,Math.floor(r-s*u/a+c)),Math.min(i,Math.floor(r+(a-s)*u/a+c)),o)}var p=e[2*r+o],h=n,f=i;for(m(t,e,n,r),e[2*i+o]>p&&m(t,e,n,i);h<f;){for(m(t,e,h,f),h++,f--;e[2*h+o]<p;)h++;for(;e[2*f+o]>p;)f--}e[2*n+o]===p?m(t,e,n,f):m(t,e,++f,i),f<=r&&(n=f+1),r<=f&&(i=f-1)}}function m(t,e,r,n){i(t,r,n),i(e,2*r,2*n),i(e,2*r+1,2*n+1)}function i(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}t.exports=function t(e,r,n,i,o,a){if(o-i<=n)return;var s=Math.floor((i+o)/2);d(e,r,s,i,o,a%2);t(e,r,n,i,s-1,a+1);t(e,r,n,s+1,o,a+1)}},function(t,e,r){"use strict";t.exports=function(t,e,r,n,i,o,a){var s,l,u=[0,t.length-1,0],c=[];for(;u.length;){var p=u.pop(),h=u.pop(),f=u.pop();if(h-f<=a)for(var d=f;d<=h;d++)s=e[2*d],l=e[2*d+1],r<=s&&s<=i&&n<=l&&l<=o&&c.push(t[d]);else{var m=Math.floor((f+h)/2);s=e[2*m],l=e[2*m+1],r<=s&&s<=i&&n<=l&&l<=o&&c.push(t[m]);var y=(p+1)%2;(0===p?r<=s:n<=l)&&(u.push(f),u.push(m-1),u.push(y)),(0===p?s<=i:l<=o)&&(u.push(m+1),u.push(h),u.push(y))}}return c}},function(t,e,r){"use strict";function g(t,e,r,n){var i=t-r,o=e-n;return i*i+o*o}t.exports=function(t,e,r,n,i,o){var a=[0,t.length-1,0],s=[],l=i*i;for(;a.length;){var u=a.pop(),c=a.pop(),p=a.pop();if(c-p<=o)for(var h=p;h<=c;h++)g(e[2*h],e[2*h+1],r,n)<=l&&s.push(t[h]);else{var f=Math.floor((p+c)/2),d=e[2*f],m=e[2*f+1];g(d,m,r,n)<=l&&s.push(t[f]);var y=(u+1)%2;(0===u?r-i<=d:n-i<=m)&&(a.push(p),a.push(f-1),a.push(y)),(0===u?d<=r+i:m<=n+i)&&(a.push(f+1),a.push(c),a.push(y))}}return s}},function(t,e,r){"use strict";function x(t,e,r){if(null!==t){var n,i,o,a,s,l,u,c,p,h,f=0,d=0,m=t.type,y="FeatureCollection"===m,g="Feature"===m,v=y?t.features.length:1;for(n=0;n<v;n++)for(u=(h=!!(p=y?t.features[n].geometry:g?t.geometry:t)&&"GeometryCollection"===p.type)?p.geometries.length:1,i=0;i<u;i++){var _=0;if(null!==(l=h?p.geometries[i]:p)){c=l.coordinates;var b=l.type;switch(f=!r||"Polygon"!==b&&"MultiPolygon"!==b?0:1,b){case null:break;case"Point":e(c,d,n,_),d++,_++;break;case"LineString":case"MultiPoint":for(o=0;o<c.length;o++)e(c[o],d,n,_),d++,"MultiPoint"===b&&_++;"LineString"===b&&_++;break;case"Polygon":case"MultiLineString":for(o=0;o<c.length;o++){for(a=0;a<c[o].length-f;a++)e(c[o][a],d,n,_),d++;"MultiLineString"===b&&_++}"Polygon"===b&&_++;break;case"MultiPolygon":for(o=0;o<c.length;o++){for(a=0;a<c[o].length;a++)for(s=0;s<c[o][a].length-f;s++)e(c[o][a][s],d,n,_),d++;_++}break;case"GeometryCollection":for(o=0;o<l.geometries.length;o++)x(l.geometries[o],e,r);break;default:throw new Error("Unknown Geometry Type")}}}}}function l(t,i,o,e){var a=o;return x(t,function(t,e,r,n){a=0===e&&void 0===o?t:i(a,t,e,r,n)},e),a}function o(t,e){var r;switch(t.type){case"FeatureCollection":for(r=0;r<t.features.length;r++)e(t.features[r].properties,r);break;case"Feature":e(t.properties,0)}}function n(t,r,n){var i=n;return o(t,function(t,e){i=0===e&&void 0===n?t:r(i,t,e)}),i}function a(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var r=0;r<t.features.length;r++)e(t.features[r],r)}function i(t,r,n){var i=n;return a(t,function(t,e){i=0===e&&void 0===n?t:r(i,t,e)}),i}function s(t){var e=[];return x(t,function(t){e.push(t)}),e}function u(t,e){var r,n,i,o,a,s,l,u,c=0,p="FeatureCollection"===t.type,h="Feature"===t.type,f=p?t.features.length:1;for(r=0;r<f;r++){for(s=p?t.features[r].geometry:h?t.geometry:t,u=p?t.features[r].properties:h?t.properties:{},a=(l=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=l?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":e(o,c,u);break;case"GeometryCollection":for(n=0;n<o.geometries.length;n++)e(o.geometries[n],c,u);break;default:throw new Error("Unknown Geometry Type")}else e(null,c,u);c++}}function c(t,n,i){var o=i;return u(t,function(t,e,r){o=0===e&&void 0===i?t:n(o,t,e,r)}),o}function p(t,o){u(t,function(t,r,n){var i,e=null===t?null:t.type;switch(e){case null:case"Point":case"LineString":case"Polygon":return void o(m(t,n),r,0)}switch(e){case"MultiPoint":i="Point";break;case"MultiLineString":i="LineString";break;case"MultiPolygon":i="Polygon"}t.coordinates.forEach(function(t,e){o(m({type:i,coordinates:t},n),r,e)})})}function h(t,n,i){var o=i;return p(t,function(t,e,r){o=0===e&&0===r&&void 0===i?t:n(o,t,e,r)}),o}function f(t,s){p(t,function(n,i,o){var a=0;if(n.geometry){var t=n.geometry.type;"Point"!==t&&"MultiPoint"!==t&&l(n,function(t,e){var r=y([t,e],n.properties);return s(r,i,o,a),a++,e})}})}function d(t,i,o){var a=o,s=!1;return f(t,function(t,e,r,n){a=!1===s&&void 0===o?t:i(a,t,e,r,n),s=!0}),a}function m(t,e){if(void 0===t)throw new Error("No geometry passed");return{type:"Feature",properties:e||{},geometry:t}}function y(t,e){if(!t)throw new Error("No coordinates passed");if(t.length<2)throw new Error("Coordinates must be an array of two or more positions");return{type:"Feature",properties:e||{},geometry:{type:"LineString",coordinates:t}}}function g(t,e){if(!t)throw new Error("geojson is required");var r=t.geometry?t.geometry.type:t.type;if(!r)throw new Error("invalid geojson");if("FeatureCollection"===r)throw new Error("FeatureCollection is not supported");if("GeometryCollection"===r)throw new Error("GeometryCollection is not supported");var n=t.geometry?t.geometry.coordinates:t.coordinates;if(!n)throw new Error("geojson must contain coordinates");switch(r){case"LineString":return void e(n,0,0);case"Polygon":case"MultiLineString":for(var i=0,o=0;o<n.length;o++)"MultiLineString"===r&&(i=o),e(n[o],o,i);return;case"MultiPolygon":for(var a=0;a<n.length;a++)for(var s=0;s<n[a].length;s++)e(n[a][s],s,a);return;default:throw new Error(r+" geometry not supported")}}function v(t,n,i){var o=i;return g(t,function(t,e,r){o=0===e&&void 0===i?t:n(o,t,e,r)}),o}r.r(e),r.d(e,"coordEach",function(){return x}),r.d(e,"coordReduce",function(){return l}),r.d(e,"propEach",function(){return o}),r.d(e,"propReduce",function(){return n}),r.d(e,"featureEach",function(){return a}),r.d(e,"featureReduce",function(){return i}),r.d(e,"coordAll",function(){return s}),r.d(e,"geomEach",function(){return u}),r.d(e,"geomReduce",function(){return c}),r.d(e,"flattenEach",function(){return p}),r.d(e,"flattenReduce",function(){return h}),r.d(e,"segmentEach",function(){return f}),r.d(e,"segmentReduce",function(){return d}),r.d(e,"feature",function(){return m}),r.d(e,"lineString",function(){return y}),r.d(e,"lineEach",function(){return g}),r.d(e,"lineReduce",function(){return v})},function(t,e,r){var i,c,s,n,o,a=(i={},c=Math.PI/180,s=180/Math.PI,n=6378137,o=20037508.342789244,l.prototype.px=function(t,e){if(p(e)){var r=this.size*Math.pow(2,e),n=r/2,i=r/360,o=r/(2*Math.PI),a=r,s=Math.min(Math.max(Math.sin(c*t[1]),-.9999),.9999);return a<(l=n+t[0]*i)&&(l=a),a<(u=n+.5*Math.log((1+s)/(1-s))*-o)&&(u=a),[l,u]}n=this.zc[e],s=Math.min(Math.max(Math.sin(c*t[1]),-.9999),.9999);var l=Math.round(n+t[0]*this.Bc[e]),u=Math.round(n+.5*Math.log((1+s)/(1-s))*-this.Cc[e]);return l>this.Ac[e]&&(l=this.Ac[e]),u>this.Ac[e]&&(u=this.Ac[e]),[l,u]},l.prototype.ll=function(t,e){if(p(e)){var r=this.size*Math.pow(2,e),n=r/360,i=r/(2*Math.PI),o=r/2,a=(t[1]-o)/-i;return[(t[0]-o)/n,s*(2*Math.atan(Math.exp(a))-.5*Math.PI)]}return a=(t[1]-this.zc[e])/-this.Cc[e],[(t[0]-this.zc[e])/this.Bc[e],s*(2*Math.atan(Math.exp(a))-.5*Math.PI)]},l.prototype.bbox=function(t,e,r,n,i){n&&(e=Math.pow(2,r)-1-e);var o=[t*this.size,(+e+1)*this.size],a=[(+t+1)*this.size,e*this.size],s=this.ll(o,r).concat(this.ll(a,r));return"900913"===i?this.convert(s,"900913"):s},l.prototype.xyz=function(t,e,r,n){"900913"===n&&(t=this.convert(t,"WGS84"));var i=[t[0],t[1]],o=[t[2],t[3]],a=this.px(i,e),s=this.px(o,e),l=[Math.floor(a[0]/this.size),Math.floor((s[0]-1)/this.size)],u=[Math.floor(s[1]/this.size),Math.floor((a[1]-1)/this.size)],c={minX:Math.min.apply(Math,l)<0?0:Math.min.apply(Math,l),minY:Math.min.apply(Math,u)<0?0:Math.min.apply(Math,u),maxX:Math.max.apply(Math,l),maxY:Math.max.apply(Math,u)};if(r){var p={minY:Math.pow(2,e)-1-c.maxY,maxY:Math.pow(2,e)-1-c.minY};c.minY=p.minY,c.maxY=p.maxY}return c},l.prototype.convert=function(t,e){return"900913"===e?this.forward(t.slice(0,2)).concat(this.forward(t.slice(2,4))):this.inverse(t.slice(0,2)).concat(this.inverse(t.slice(2,4)))},l.prototype.forward=function(t){var e=[n*t[0]*c,n*Math.log(Math.tan(.25*Math.PI+.5*t[1]*c))];return e[0]>o&&(e[0]=o),e[0]<-o&&(e[0]=-o),e[1]>o&&(e[1]=o),e[1]<-o&&(e[1]=-o),e},l.prototype.inverse=function(t){return[t[0]*s/n,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/n)))*s]},l);function p(t){return Number(t)===t&&t%1!=0}function l(t){if(t=t||{},this.size=t.size||256,!i[this.size]){var e=this.size,r=i[this.size]={};r.Bc=[],r.Cc=[],r.zc=[],r.Ac=[];for(var n=0;n<30;n++)r.Bc.push(e/360),r.Cc.push(e/(2*Math.PI)),r.zc.push(e/2),r.Ac.push(e),e*=2}this.Bc=i[this.size].Bc,this.Cc=i[this.size].Cc,this.zc=i[this.size].zc,this.Ac=i[this.size].Ac}t.exports=a},function(t,e,r){"use strict";var s=r(64);function n(){}function i(){}i.resetWarningCache=n,t.exports=function(){function t(t,e,r,n,i,o){if(o!==s){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function e(){return t}var r={array:t.isRequired=t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:i,resetWarningCache:n};return r.PropTypes=r}},function(t,e,r){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,r){var n=function(){return this||"object"==typeof self&&self}()||Function("return this")(),i=n.regeneratorRuntime&&0<=Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime"),o=i&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,t.exports=r(66),i)n.regeneratorRuntime=o;else try{delete n.regeneratorRuntime}catch(t){n.regeneratorRuntime=void 0}},function(z,t){!function(t){"use strict";var l,e=Object.prototype,u=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",n=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag",a="object"==typeof z,s=t.regeneratorRuntime;if(s)a&&(z.exports=s);else{(s=t.regeneratorRuntime=a?z.exports:{}).wrap=_;var c="suspendedStart",p="suspendedYield",h="executing",f="completed",d={},m={};m[i]=function(){return this};var y=Object.getPrototypeOf,g=y&&y(y(I([])));g&&g!==e&&u.call(g,i)&&(m=g);var v=E.prototype=x.prototype=Object.create(m);w.prototype=v.constructor=E,E.constructor=w,E[o]=w.displayName="GeneratorFunction",s.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},s.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,E):(t.__proto__=E,o in t||(t[o]="GeneratorFunction")),t.prototype=Object.create(v),t},s.awrap=function(t){return{__await:t}},S(k.prototype),k.prototype[n]=function(){return this},s.AsyncIterator=k,s.async=function(t,e,r,n){var i=new k(_(t,e,r,n));return s.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},S(v),v[o]="Generator",v[i]=function(){return this},v.toString=function(){return"[object Generator]"},s.keys=function(r){var n=[];for(var t in r)n.push(t);return n.reverse(),function t(){for(;n.length;){var e=n.pop();if(e in r)return t.value=e,t.done=!1,t}return t.done=!0,t}},s.values=I,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach(A),!t)for(var e in this)"t"===e.charAt(0)&&u.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=l)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var n=this;function t(t,e){return o.type="throw",o.arg=r,n.next=t,e&&(n.method="next",n.arg=l),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var i=this.tryEntries[e],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=u.call(i,"catchLoc"),s=u.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;0<=r;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&u.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;A(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:I(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=l),d}}}function _(t,e,r,n){var i=e&&e.prototype instanceof x?e:x,o=Object.create(i.prototype),a=new P(n||[]);return o._invoke=function(o,a,s){var l=c;return function(t,e){if(l===h)throw new Error("Generator is already running");if(l===f){if("throw"===t)throw e;return M()}for(s.method=t,s.arg=e;;){var r=s.delegate;if(r){var n=C(r,s);if(n){if(n===d)continue;return n}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(l===c)throw l=f,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);l=h;var i=b(o,a,s);if("normal"===i.type){if(l=s.done?f:p,i.arg===d)continue;return{value:i.arg,done:s.done}}"throw"===i.type&&(l=f,s.method="throw",s.arg=i.arg)}}}(t,r,a),o}function b(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}function x(){}function w(){}function E(){}function S(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function k(l){var e;this._invoke=function(r,n){function t(){return new Promise(function(t,e){!function e(t,r,n,i){var o=b(l[t],l,r);if("throw"!==o.type){var a=o.arg,s=a.value;return s&&"object"==typeof s&&u.call(s,"__await")?Promise.resolve(s.__await).then(function(t){e("next",t,n,i)},function(t){e("throw",t,n,i)}):Promise.resolve(s).then(function(t){a.value=t,n(a)},function(t){return e("throw",t,n,i)})}i(o.arg)}(r,n,t,e)})}return e=e?e.then(t,t):t()}}function C(t,e){var r=t.iterator[e.method];if(r===l){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=l,C(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var n=b(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,d;var i=n.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=l),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function I(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(u.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=l,t.done=!0,t};return n.next=n}}return{next:M}}function M(){return{value:l,done:!0}}}(function(){return this||"object"==typeof self&&self}()||Function("return this")())},function(t,e,r){var n=r(68);"string"==typeof n&&(n=[[t.i,n,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};r(14)(n,i);n.locals&&(t.exports=n.locals)},function(t,e,r){(t.exports=r(13)(!1)).push([t.i,"@media screen and (max-width: 800px){.mobile-view-list .mob-map-area{position:absolute;width:1000px;height:1000px;opacity:0;left:-1000px;top:-1000px}.mobile-view-list .mob-list-area{flex-grow:1;width:100%}.mobile-view-map{flex-direction:column}.mobile-view-map .mob-list-area{height:auto;width:100%}.mobile-view-map .mob-list-area .event-list-container{display:none}}\n",""])},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var i=e.protocol+"//"+e.host,o=i+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var r,n=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(n)?t:(r=0===n.indexOf("//")?n:0===n.indexOf("/")?i+n:o+n.replace(/^\.\//,""),"url("+JSON.stringify(r)+")")})}},function(t,e,r){"use strict";var n=r(2),i=r(27),o=r(72),a=r(15);function s(t){var e=new o(t),r=i(o.prototype.request,e);return n.extend(r,o.prototype,e),n.extend(r,e),r}var l=s(a);l.Axios=o,l.create=function(t){return s(n.merge(a,t))},l.Cancel=r(31),l.CancelToken=r(86),l.isCancel=r(30),l.all=function(t){return Promise.all(t)},l.spread=r(87),t.exports=l,t.exports.default=l},function(t,e){function r(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
t.exports=function(t){return null!=t&&(r(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&r(t.slice(0,0))}(t)||!!t._isBuffer)}},function(t,e,r){"use strict";var i=r(15),o=r(2),n=r(81),a=r(82);function s(t){this.defaults=t,this.interceptors={request:new n,response:new n}}s.prototype.request=function(t,e){"string"==typeof t&&(t=o.merge({url:arguments[0]},e)),(t=o.merge(i,{method:"get"},this.defaults,t)).method=t.method.toLowerCase();var r=[a,void 0],n=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){r.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){r.push(t.fulfilled,t.rejected)});r.length;)n=n.then(r.shift(),r.shift());return n},o.forEach(["delete","get","head","options"],function(r){s.prototype[r]=function(t,e){return this.request(o.merge(e||{},{method:r,url:t}))}}),o.forEach(["post","put","patch"],function(n){s.prototype[n]=function(t,e,r){return this.request(o.merge(r||{},{method:n,url:t,data:e}))}}),t.exports=s},function(t,e,r){"use strict";var i=r(2);t.exports=function(r,n){i.forEach(r,function(t,e){e!==n&&e.toUpperCase()===n.toUpperCase()&&(r[n]=t,delete r[e])})}},function(t,e,r){"use strict";var i=r(29);t.exports=function(t,e,r){var n=r.config.validateStatus;r.status&&n&&!n(r.status)?e(i("Request failed with status code "+r.status,r.config,null,r.request,r)):t(r)}},function(t,e,r){"use strict";t.exports=function(t,e,r,n,i){return t.config=e,r&&(t.code=r),t.request=n,t.response=i,t}},function(t,e,r){"use strict";var o=r(2);function a(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,r){if(!e)return t;var n;if(r)n=r(e);else if(o.isURLSearchParams(e))n=e.toString();else{var i=[];o.forEach(e,function(t,e){null!=t&&(o.isArray(t)?e+="[]":t=[t],o.forEach(t,function(t){o.isDate(t)?t=t.toISOString():o.isObject(t)&&(t=JSON.stringify(t)),i.push(a(e)+"="+a(t))}))}),n=i.join("&")}return n&&(t+=(-1===t.indexOf("?")?"?":"&")+n),t}},function(t,e,r){"use strict";var o=r(2),a=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,r,n,i={};return t&&o.forEach(t.split("\n"),function(t){if(n=t.indexOf(":"),e=o.trim(t.substr(0,n)).toLowerCase(),r=o.trim(t.substr(n+1)),e){if(i[e]&&0<=a.indexOf(e))return;i[e]="set-cookie"===e?(i[e]?i[e]:[]).concat([r]):i[e]?i[e]+", "+r:r}}),i}},function(t,e,r){"use strict";var n,i,o,a=r(2);function s(t){var e=t;return i&&(o.setAttribute("href",e),e=o.href),o.setAttribute("href",e),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:"/"===o.pathname.charAt(0)?o.pathname:"/"+o.pathname}}t.exports=a.isStandardBrowserEnv()?(i=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a"),n=s(window.location.href),function(t){var e=a.isString(t)?s(t):t;return e.protocol===n.protocol&&e.host===n.host}):function(){return!0}},function(t,e,r){"use strict";function s(){this.message="String contains an invalid character"}(s.prototype=new Error).code=5,s.prototype.name="InvalidCharacterError",t.exports=function(t){for(var e,r,n=String(t),i="",o=0,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.charAt(0|o)||(a="=",o%1);i+=a.charAt(63&e>>8-o%1*8)){if(255<(r=n.charCodeAt(o+=.75)))throw new s;e=e<<8|r}return i}},function(t,e,r){"use strict";var s=r(2);t.exports=s.isStandardBrowserEnv()?{write:function(t,e,r,n,i,o){var a=[];a.push(t+"="+encodeURIComponent(e)),s.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),s.isString(n)&&a.push("path="+n),s.isString(i)&&a.push("domain="+i),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(t,e,r){"use strict";var n=r(2);function i(){this.handlers=[]}i.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},i.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},i.prototype.forEach=function(e){n.forEach(this.handlers,function(t){null!==t&&e(t)})},t.exports=i},function(t,e,r){"use strict";var n=r(2),i=r(83),o=r(30),a=r(15),s=r(84),l=r(85);function u(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(e){return u(e),e.baseURL&&!s(e.url)&&(e.url=l(e.baseURL,e.url)),e.headers=e.headers||{},e.data=i(e.data,e.headers,e.transformRequest),e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),n.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||a.adapter)(e).then(function(t){return u(e),t.data=i(t.data,t.headers,e.transformResponse),t},function(t){return o(t)||(u(e),t&&t.response&&(t.response.data=i(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(t,e,r){"use strict";var n=r(2);t.exports=function(e,r,t){return n.forEach(t,function(t){e=t(e,r)}),e}},function(t,e,r){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e,r){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e,r){"use strict";var n=r(31);function i(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(t){e=t});var r=this;t(function(t){r.reason||(r.reason=new n(t),e(r.reason))})}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var e;return{token:new i(function(t){e=t}),cancel:e}},t.exports=i},function(t,e,r){"use strict";t.exports=function(e){return function(t){return e.apply(null,t)}}},function(t,e,r){var n=r(89);"string"==typeof n&&(n=[[t.i,n,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};r(14)(n,i);n.locals&&(t.exports=n.locals)},function(t,e,r){(t.exports=r(13)(!1)).push([t.i,":root{--blue: #0f81e9;--lightgray: lightgray;--empgray: #D7D6D7;--gray: #ccced0;--bluish-gray: #eaedef;--darkgray: rgba(21, 35, 45, 0.8);--sans-serif: -apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif;--orange: #ffa902}.megamap-btn{display:inline-block;font-weight:400;text-align:center;white-space:nowrap;vertical-align:middle;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:6px 10px 6px;font-size:14px;line-height:1.5;border-radius:4px;transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}\n",""])},function(t,e,r){var n=r(91);"string"==typeof n&&(n=[[t.i,n,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};r(14)(n,i);n.locals&&(t.exports=n.locals)},function(t,e,r){(t.exports=r(13)(!1)).push([t.i,"html,body{height:100%;font-size:16px}ul,li{margin:0;padding:0;list-style-type:none}.btn.btn-primary{background-color:#40D7D4;border-color:#40D7D4;color:#fff;font-weight:bold}.btn.btn-primary:hover{background-color:#0F81E8}.btn.btn-secondary{background-color:transparent;border-color:#0F81E8;border-width:2px;border-style:solid;color:#0F81E8}.btn.btn-secondary:hover{color:#fff}.btn.btn-tertiary{background-color:#d4d6d7;border-color:#d4d6d7;border-width:1px;border-style:solid}.btn.btn-tertiary:hover{background-color:#c4c6c7}#stage{height:inherit;display:flex;flex-direction:column;width:1px;min-width:100%;*width:100%}#stage header.page-header{background-color:#eaedef;padding:1.5em 1.5em 0;border-bottom:1px solid rgba(0,0,0,0.13);z-index:10}#stage header.page-header nav{height:inherit;display:flex}#stage header.page-header nav a{white-space:nowrap}#stage header.page-header nav div.filters-form-area{flex-grow:1}#stage header.page-header nav div.filters-form-area .row{justify-content:space-between}#stage header.page-header nav div.filters-form-area div.filter-area{display:flex}#stage header.page-header nav div.filters-form-area div.filter-area div.filter-container{padding-top:5px;text-align:right;width:100%}#stage header.page-header nav div.filters-form-area div.filter-area div.filter-container span.multiselect-native-select .multiselect-container li label{padding:3px 40px 3px 0px;width:100%;font-size:13px;color:#333333}#stage header.page-header nav div.filters-form-area form{width:100%}#stage header.page-header nav div.filters-form-area form .search-wrapper{display:flex}#stage header.page-header nav div.filters-form-area form div.search-button{flex-grow:1;text-align:left}#stage header.page-header nav div.filters-form-area form div.search-button .btn{border-radius:0 4px 4px 0;left:-5px;position:relative;background-color:#0F81E8;color:white;text-transform:uppercase;font-family:-apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,\"Helvetica Neue\",Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\",\"Segoe UI Symbol\";font-size:13px;font-weight:600;padding:9px 15px}#stage header.page-header nav div.filters-form-area form .twitter-typeahead{width:100%}#stage header.page-header nav div.filters-form-area form .twitter-typeahead .tt-dropdown-menu{background-color:#fafeff;border:solid 1px lightgray;padding:5px 10px;width:100%;z-index:1000 !important}#stage header.page-header nav div.filters-form-area form .twitter-typeahead .tt-dropdown-menu .tt-dataset.tt-dataset-search-results{white-space:nowrap;text-overflow:ellipsis;width:100%;overflow:hidden}#stage header.page-header nav div.filters-form-area form .search-button{display:inline-block;width:70px}#stage header.page-header nav div.filters-form-area form button{cursor:pointer}#stage header.page-header nav div.filters-form-area form span.filter-item{margin-right:20px;display:inline-block}#stage header.page-header nav div.filters-form-area form span.filter-item input{visibility:hidden}#stage header.page-header nav div.filters-form-area form span.filter-item label{position:relative;cursor:pointer}#stage header.page-header nav div.filters-form-area form span.filter-item label:before{content:' ';width:18px;height:18px;position:absolute;left:-24px;top:2px;background-repeat:no-repeat;background-position:center center;z-index:1}#stage header.page-header nav div.filters-form-area form span.filter-item label:after{content:' ';width:1.3em;height:1.3em;position:absolute;background-color:lightgray;left:-1.5em;top:.15em;border-radius:50%}#stage header.page-header nav div.filters-form-area form span.filter-item input[value='events']:checked+label:after{background-color:#40D7D4}#stage header.page-header nav div.filters-form-area form span.filter-item input[value='groups']:checked+label:after{background-color:#0F81E8}#stage header.page-header nav div.cta-area{height:100%;width:200px}#stage header.page-header nav div.cta-area p{margin:0;font-style:italic;font-size:25px;margin-top:10px}#stage div.filter-container span.multiselect-native-select div.btn-group{display:block}#stage div.filter-container span.multiselect-native-select div.btn-group button{padding-left:0;width:100%;text-align:left;color:gray;border-radius:0}#stage div.filter-container span.multiselect-native-select div.btn-group ul.multiselect-container.dropdown-menu{position:relative !important;background:transparent !important;display:block !important;width:100% !important;transform:none !important;border:none !important;max-height:0;overflow:hidden;padding:0;transition:max-height 0.4s}@media (max-width: 600px){#stage div.filter-container span.multiselect-native-select div.btn-group ul.multiselect-container.dropdown-menu{transition:max-height 0.001s !important}}#stage div.filter-container span.multiselect-native-select div.btn-group.show button{border-bottom:1px solid gray}#stage div.filter-container span.multiselect-native-select div.btn-group.show ul.multiselect-container.dropdown-menu{max-height:1000vh !important;visibility:visible !important;display:block !important;overflow:visible !important}#stage div#activity-area{background-color:green;flex-grow:1;position:relative;display:flex;height:inherit}#stage div#activity-area section#map{flex-grow:1;background-color:whitesmoke;font-family:var(--sans-serif);font-size:1rem;z-index:0;position:relative}#stage div#activity-area section#map #show-hide-container{position:absolute;z-index:1000;left:28px;top:160px}#stage div#activity-area section#map #show-hide-container #show-hide-list-container{background-color:#003DAA;transform:rotate(90deg);transform-origin:left top;padding:5px 10px 5px;color:white;font-size:12px;text-transform:uppercase;font-weight:600;font-family:-apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,\"Helvetica Neue\",Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\",\"Segoe UI Symbol\";letter-spacing:1px;border-radius:4px 4px 0 0;display:inline-block}#stage div#activity-area section#map #show-hide-container #show-hide-list-container #hide-list-text{display:block}#stage div#activity-area section#map #show-hide-container #show-hide-list-container #show-list-text{display:none}#stage div#activity-area section#map div#map-proper{width:100%;height:100%}#stage div#activity-area section#map div#map-proper img.leaflet-marker-icon.annotation-popup.leaflet-zoom-animated.leaflet-interactive{z-index:10000 !important}#stage div#activity-area section#map div#map-proper img.leaflet-marker-icon.events.event-item-popup.event-past-event.leaflet-zoom-animated.leaflet-interactive{z-index:0 !important}#stage div#activity-area section#map .leaflet-container a.leaflet-popup-close-button{top:10px;right:10px}#stage div#activity-area section#map .leaflet-popup-content-wrapper,#stage div#activity-area section#map div.mapboxgl-popup{border-radius:5px;overflow:auto}#stage div#activity-area section#map .leaflet-popup-content-wrapper .popup-item.annotation iframe,#stage div#activity-area section#map div.mapboxgl-popup .popup-item.annotation iframe{width:100% !important}#stage div#activity-area section#map .event-date,#stage div#activity-area section#map .event-address,#stage div#activity-area section#map .group-location.location,#stage div#activity-area section#map .group-description{color:rgba(21,35,45,0.8);font-size:0.95em}#stage div#activity-area section#map .event-date,#stage div#activity-area section#map .group-location.location{font-weight:bold}#stage div#activity-area section#map div.leaflet-popup-content,#stage div#activity-area section#map div.mapboxgl-popup-content{font-size:0.85rem;line-height:1.5;min-width:350px;max-width:350px;padding:1rem 1.1rem}#stage div#activity-area section#map div.leaflet-popup-content button.mapboxgl-popup-close-button,#stage div#activity-area section#map div.mapboxgl-popup-content button.mapboxgl-popup-close-button{font-size:24px;padding-right:10px}#stage div#activity-area section#map div.leaflet-popup-content p,#stage div#activity-area section#map div.mapboxgl-popup-content p{margin-top:0}#stage div#activity-area section#map div.leaflet-popup-content ul.event-types-list,#stage div#activity-area section#map div.mapboxgl-popup-content ul.event-types-list{margin-bottom:8px}#stage div#activity-area section#map div.leaflet-popup-content ul.event-types-list li,#stage div#activity-area section#map div.mapboxgl-popup-content ul.event-types-list li{border-radius:4px;display:inline-block;background-color:lightgray;border:1px solid lightgray;margin-bottom:0.3em;padding:2px 5px 0;font-size:12px;letter-spacing:0.5px;text-transform:uppercase;font-size:10px}#stage div#activity-area section#map div.leaflet-popup-content h2,#stage div#activity-area section#map div.mapboxgl-popup-content h2{margin-bottom:0;line-height:1.2;font-weight:700;cursor:pointer}#stage div#activity-area section#map div.leaflet-popup-content a.btn.btn-primary,#stage div#activity-area section#map div.mapboxgl-popup-content a.btn.btn-primary{font-size:13px;padding:7px 12px 6px;font-weight:600}#stage div#activity-area section#map div.leaflet-popup-content div.type-event,#stage div#activity-area section#map div.mapboxgl-popup-content div.type-event{overflow-x:hidden}#stage div#activity-area section#map div.leaflet-popup-content div.type-event div.address-area,#stage div#activity-area section#map div.mapboxgl-popup-content div.type-event div.address-area{margin-bottom:5px}#stage div#activity-area section#map div.leaflet-popup-content div.type-event h2:before,#stage div#activity-area section#map div.mapboxgl-popup-content div.type-event h2:before{background-image:url(/img/human.svg)}#stage div#activity-area section#map div.leaflet-popup-content div.type-event h2:after,#stage div#activity-area section#map div.mapboxgl-popup-content div.type-event h2:after{background-color:#40D7D4}#stage div#activity-area section#map div.leaflet-popup-content div.type-group div.group-details-area,#stage div#activity-area section#map div.mapboxgl-popup-content div.type-group div.group-details-area{margin-bottom:5px}#stage div#activity-area section#map div.leaflet-popup-content div.type-group h2:after,#stage div#activity-area section#map div.mapboxgl-popup-content div.type-group h2:after{background-color:#0F81E8}#stage div#activity-area section#map div.leaflet-popup-content div.type-group h2:before,#stage div#activity-area section#map div.mapboxgl-popup-content div.type-group h2:before{background-image:url(/img/flag.svg)}#stage div#activity-area section#map div.leaflet-popup-content a.btn-primary,#stage div#activity-area section#map div.mapboxgl-popup-content a.btn-primary{color:white}#stage div#activity-area section#map div.leaflet-popup-content .event-title,#stage div#activity-area section#map div.leaflet-popup-content .group-header,#stage div#activity-area section#map div.mapboxgl-popup-content .event-title,#stage div#activity-area section#map div.mapboxgl-popup-content .group-header{margin-bottom:0.5rem}#stage div#activity-area section#map.zoomed-out img.local-groups,#stage div#activity-area section#map.zoomed-out img.fossil-free-groups,#stage div#activity-area section#map.zoomed-out img.regional-hubs{width:11px !important;height:11px !important;margin-top:0px !important;margin-left:-3px !important}#stage div#activity-area section#map.zoomed-out img.events{width:9px !important;height:9px !important;margin-top:0px !important;margin-left:0px !important}#stage div#activity-area section#map #slider-area{position:absolute;z-index:100;top:5px;left:5px;width:25px;display:flex;justify-content:center;flex-direction:column;align-items:center}#stage div#activity-area section#map #slider-area .slidecontainer{width:100%;text-align:center}#stage div#activity-area section#map #slider-area input[type=range][orient=vertical]{writing-mode:bt-lr;-webkit-appearance:slider-vertical;width:8px;height:110px;height:calc(100px + 5vh);padding:0 5px;margin-left:-2px}#stage div#activity-area section#map #slider-area .slider{-webkit-appearance:none;appearance:none;width:100%;height:25px;background:#d3d3d3;outline:none;opacity:0.7;-webkit-transition:.2s;transition:opacity .2s}#stage div#activity-area section#map #slider-area .slider:hover{opacity:1}#stage div#activity-area section#map #slider-area a.zm-butt{align-items:center;height:24px;width:24px;color:#333;background-color:whitesmoke;border-radius:2px;display:flex;font-size:11px;justify-content:center;padding:2px 0 0 1px;text-align:center;box-shadow:1px 0 2px rgba(0,0,0,0.1);border:1px solid lightgray;position:relative}#stage div#activity-area section#map #slider-area a.zm-out{margin-top:-7px}#stage div#activity-area section#events-list-container{width:400px;height:inherit;background-color:whitesmoke;border-right:1px solid rgba(0,0,0,0.3);position:relative;display:flex;flex-direction:column;overflow:hidden;max-width:400px;transition:max-width 0.4s}#stage div#activity-area section#events-list-container header.events-header{text-transform:uppercase;font-size:32px;font-weight:600;text-align:center;background:orange;color:white;width:100%}#stage div#activity-area section#events-list-container div#events-list{flex-grow:1;overflow:auto;height:inherit}#stage div#activity-area section#events-list-container div#events-list .event-date,#stage div#activity-area section#events-list-container div#events-list .event-address{color:rgba(21,35,45,0.8);font-size:0.95em}#stage div#activity-area section#events-list-container div#events-list .event-date{font-weight:bold}#stage div#activity-area section#events-list-container div#events-list>ul>li{border-bottom:1px dashed gray}#stage div#activity-area section#events-list-container div#events-list>ul>li ul.event-types-list{margin-bottom:8px}#stage div#activity-area section#events-list-container div#events-list>ul>li ul.event-types-list li{border-radius:4px;display:inline-block;background-color:lightgray;border:1px solid lightgray;margin-bottom:0.3em;padding:2px 5px 0;font-size:12px;letter-spacing:0.5px;text-transform:uppercase;font-size:10px}#stage div#activity-area section#events-list-container div#events-list>ul>li h2{margin-bottom:0;line-height:1.2;font-weight:700;cursor:pointer}#stage div#activity-area section#events-list-container div#events-list>ul>li a.btn.btn-primary{font-size:13px;padding:7px 12px 6px;font-weight:600}#stage div#activity-area section#events-list-container div#events-list>ul>li div.type-event{overflow-x:hidden}#stage div#activity-area section#events-list-container div#events-list>ul>li div.type-event div.address-area{margin-bottom:5px}#stage div#activity-area section#events-list-container div#events-list>ul>li div.type-event h2:before{background-image:url(/img/human.svg)}#stage div#activity-area section#events-list-container div#events-list>ul>li div.type-event h2:after{background-color:#40D7D4}#stage div#activity-area section#events-list-container div#events-list>ul>li div.type-group div.group-details-area{margin-bottom:5px}#stage div#activity-area section#events-list-container div#events-list>ul>li div.type-group h2:after{background-color:#0F81E8}#stage div#activity-area section#events-list-container div#events-list>ul>li div.type-group h2:before{background-image:url(/img/flag.svg)}#stage div#activity-area section#events-list-container div#events-list>ul>li>div{padding:20px}#stage div#activity-area section#events-list-container div#events-list>ul>li>div.type-group{background-color:#e9eaef}#stage div#activity-area section#events-list-container div#events-list>ul>li:last-child{border-bottom:none}#stage div#activity-area section#events-list-container div#events-list #is-empty-msg{padding:20px}#stage div#activity-area section#events-list-container div#events-list #is-empty-msg button{margin-top:20px;display:block}#stage div#activity-area section#events-list-container div#events-list:not(.is-empty) #is-empty-msg{position:absolute;overflow:hidden;clip:rect(0 0 0 0);height:1px;width:1px;margin:-1px;padding:0;border:0}#stage div#activity-area #embed-area{width:100%;position:relative}#stage div#activity-area #embed-area button.btn.more-items{position:absolute;top:-38px;right:15px;color:white;background-color:lightgray;border-radius:0.25rem 0.25rem 0 0;cursor:pointer;outline:0}#stage div#activity-area #embed-area button.btn.more-items:focus{outline:none !important}#stage div#activity-area #embed-area button.btn.more-items i{color:#333;transition:transform 0.5s}#stage div#activity-area #embed-area button{cursor:pointer}#stage div#activity-area #embed-area div.viewport{max-height:0;transition:max-height 0.5s}#stage div#activity-area #embed-area div.viewport div#language-options{position:absolute;top:10px;right:10px}#stage div#activity-area #embed-area div.viewport div.btn-group button.lang-but{white-space:nowrap;font-size:18px;margin-bottom:0}#stage div#activity-area #embed-area div.viewport div.btn-group button.lang-but span{display:inline-block;width:100px;text-align:left}#stage div#activity-area #embed-area div.viewport div.btn-group button.lang-but img{width:24px}#stage div#activity-area #embed-area div.viewport div.btn-group button.lang-but *{vertical-align:top;margin-top:2px}#stage div#activity-area #embed-area div.viewport div.btn-group ul.multiselect-container{min-width:8rem}#stage div#activity-area #embed-area div.viewport div.btn-group ul.multiselect-container li.lang-opt.lang-sel label{font-weight:bold}#stage div#activity-area #embed-area div.viewport div.btn-group ul.multiselect-container li.lang-opt label{padding:5px 5px 5px 10px;white-space:nowrap;font-size:16px;color:#333333;width:100%}#stage div#activity-area #embed-area div.viewport div.btn-group ul.multiselect-container li.lang-opt label img{width:20px}#stage div#activity-area #embed-area div.viewport div.btn-group ul.multiselect-container li.lang-opt label input{position:absolute;left:-9000px;top:-9000px}#stage div#activity-area #embed-area div.viewport div.btn-group ul.multiselect-container li.lang-opt label *{vertical-align:top;margin-top:2px}#stage div#activity-area #embed-area div.viewport div.content{background-color:lightgray;width:100%;padding:10px}#stage div#activity-area #embed-area div.viewport div.content h4{color:#333333;font-weight:bold}#stage div#activity-area #embed-area div.viewport div.content p{padding:0;color:#333333}#stage div#activity-area #embed-area div.viewport div.content #embed-form{display:flex}#stage div#activity-area #embed-area div.viewport div.content #embed-form input[name='embed']{flex-grow:1;margin-right:10px}#stage div#activity-area #embed-area.open i.fa-chevron-up{transform:rotate(180deg)}#stage div#activity-area #embed-area.open div.viewport{max-height:200px}#stage div#activity-area #events-list-container #events-list{overflow-y:scroll;-webkit-overflow-scrolling:touch}#stage div#activity-area #events-list-container #events-list li.group-obj{display:block}#stage div#activity-area #events-list-container #events-list.events li.event-obj{display:block}@media (min-width: 600px){body.filter-collapsed #stage div#activity-area section#events-list-container{max-width:0}body.filter-collapsed #stage #map #show-hide-list-container{left:-32px !important}body.filter-collapsed #stage #map #show-hide-list-container #hide-list-text{display:none !important}body.filter-collapsed #stage #map #show-hide-list-container #show-list-text{display:block !important}}#show-hide-map{display:none}@media (max-width: 600px){body #show-hide-map{display:block}body #show-hide-map .show-map{display:block}body #show-hide-map .show-list{display:none}body.map-view #show-hide-map .show-list{display:block}body.map-view #show-hide-map .show-map{display:none}body.map-view div#activity-area{flex-grow:1}body.map-view div#activity-area section#map{visibility:visible !important;z-index:100 !important}body div#stage{display:flex;flex-direction:column}body div#stage header.page-header{height:auto;padding:5px}body div#stage header.page-header nav{display:flex;flex-direction:column;border-bottom:none}body div#stage header.page-header nav div.logo-area{text-align:center;width:100%}body div#stage header.page-header nav div.filters-form-area{padding-top:0;padding:0 10px 5px}body div#stage header.page-header nav div.filters-form-area .input-text{background-color:none;margin-top:10px}body div#stage header.page-header nav div.filters-form-area .input-text span.twitter-typeahead{display:block;flex-grow:1;flex:0 1 100%}body div#stage header.page-header nav div.filters-form-area .input-text div.search-button{flex-grow:0}body div#stage header.page-header nav div.filters-form-area .filter-area{flex-direction:column}body div#stage header.page-header nav div.filters-form-area .filter-area div.filter-container{display:flex;margin:0;margin-top:10px;padding:0}body div#stage header.page-header nav div.filters-form-area .filter-area div.filter-container button span{display:inline-block;text-align:left;margin:0;margin-left:10px}body div#stage header.page-header nav div.filters-form-area .filter-area div.filter-container button span label{display:inline-block;max-width:calc(100% - 50px);font-size:14px}body div#stage header.page-header nav div.filters-form-area button#show-hide-map{margin-top:10px}body div#stage header.page-header nav div.cta-area{width:100%;text-align:center;display:none}body div#stage header.page-header nav div.cta-area p{font-size:14px;font-weight:bold;color:gray}body div#stage div#activity-area{flex-grow:1;display:flex;position:relative}body div#stage div#activity-area section#map{visibility:hidden;z-index:-1;position:absolute !important;width:100%;height:calc(100% - 157px);bottom:0;left:0}body div#stage div#activity-area section#map #show-hide-list-container{display:none !important}body div#stage div#activity-area section#events-list-container{border-right:none;visibility:visible;border-left:none;width:100%;max-width:none !important}body div#stage div#activity-area section#events-list-container header.events-header{font-size:24px;padding-top:5px}body div#stage div#activity-area #embed-area div.viewport div.content h4{font-size:18px}}div.filter-container span.multiselect-native-select div.btn-group{text-align:right}div.filter-container span.multiselect-native-select div.btn-group button.multiselect.dropdown-toggle{font-size:12px;background:transparent}div.filter-container span.multiselect-native-select div.btn-group button.multiselect.dropdown-toggle img{width:16px}div.filter-container span.multiselect-native-select div.btn-group button.multiselect.dropdown-toggle:after{display:none}div.filter-container span.multiselect-native-select div.btn-group ul.multiselect-container.dropdown-menu{left:auto !important;right:0 !important}@media (max-width: 600px){div.filter-container span.multiselect-native-select div.btn-group ul.multiselect-container.dropdown-menu{left:0 !important;right:auto !important}}div.filter-container span.multiselect-native-select div.btn-group ul.multiselect-container.dropdown-menu li img{width:15px;height:15px;margin-left:5px}.loader-ctn{display:flex;width:100%;height:100%;justify-content:center;align-items:center;background:#fff}.loader-ctn.overlay{background:rgba(255,255,255,0.7);z-index:3;position:absolute}.lds-default{display:inline-block;position:relative;width:64px;height:64px}.lds-default div{position:absolute;width:5px;height:5px;background:#0F81e9;border-radius:50%;animation:lds-default 1.2s linear infinite}.lds-default div:nth-child(1){animation-delay:0s;top:29px;left:53px}.lds-default div:nth-child(2){animation-delay:-0.1s;top:18px;left:50px}.lds-default div:nth-child(3){animation-delay:-0.2s;top:9px;left:41px}.lds-default div:nth-child(4){animation-delay:-0.3s;top:6px;left:29px}.lds-default div:nth-child(5){animation-delay:-0.4s;top:9px;left:18px}.lds-default div:nth-child(6){animation-delay:-0.5s;top:18px;left:9px}.lds-default div:nth-child(7){animation-delay:-0.6s;top:29px;left:6px}.lds-default div:nth-child(8){animation-delay:-0.7s;top:41px;left:9px}.lds-default div:nth-child(9){animation-delay:-0.8s;top:50px;left:18px}.lds-default div:nth-child(10){animation-delay:-0.9s;top:53px;left:29px}.lds-default div:nth-child(11){animation-delay:-1s;top:50px;left:41px}.lds-default div:nth-child(12){animation-delay:-1.1s;top:41px;left:50px}@keyframes lds-default{0%,20%,80%,100%{transform:scale(1)}50%{transform:scale(1.5)}}#map-embed-350org .search-container{background-color:var(--bluish-gray);border-bottom:1px solid var(--gray);font-family:var(--sans-serif)}#map-embed-350org .search-viewport{padding:10px;position:relative}#map-embed-350org .search-form{align-items:stretch;display:flex}#map-embed-350org .search-form .search-input{position:relative;flex-grow:1}#map-embed-350org .search-text{display:block;width:100%;padding:5px 10px;font-size:14px;line-height:1.5;color:var(--dark-gray);background-color:#fff;background-image:none;background-clip:padding-box;border:1px solid var(--lightgray);border-radius:4px 0 0 4px;font-family:var(--sans-serif);margin:0}#map-embed-350org .search-btn{border-radius:0 4px 4px 0;background-color:var(--blue);color:white;padding:6px 10px;text-decoration:none;font-size:12px;font-weight:600;justify-content:center;align-items:center;text-transform:uppercase;display:flex;border:1px solid var(--blue)}#map-embed-350org .search-btn:hover{color:white}#map-embed-350org .mobile-view-toggle a{display:none}@media screen and (max-width: 800px){#map-embed-350org .mobile-view-toggle a{display:inline-block;width:100%;margin-top:10px;padding:12px 0 10px;text-align:center;background-color:var(--orange);text-transform:uppercase;color:white;text-decoration:none;letter-spacing:2px;font-weight:bold;border-radius:20px}}#map-embed-350org .search-suggestion-container{position:absolute;z-index:1000;top:44px;width:calc(100% - 101px);padding:0px;background-color:white;border:1px solid var(--lightgray);border-top:1px solid var(--bluish-gray);border-radius:0 0 4px 4px;font-size:12px;color:#333;cursor:pointer}#map-embed-350org .search-suggestion-list{list-style-type:none;padding:0;margin:0}#map-embed-350org .search-suggestion-list li{list-style:none}#map-embed-350org .search-suggestion-list li:hover{background-color:whitesmoke}#map-embed-350org .search-suggestion-container a{color:#333;text-decoration:none;width:100%;border-bottom:none !important;display:block;padding:10px}#map-embed-350org .filter-form ul{list-style-type:none;list-style:none;padding:0;margin:0}#map-embed-350org .filter-form ul li{display:flex;float:left;margin:5px 5px 5px 0px;border-radius:2px;border:1px solid var(--lightgray);padding:5px;list-style-type:none;list-style:none}#map-embed-350org[data-src-campaign-names*=\"globalclimatestrike\"] .filter-form ul li:nth-child(2),#map-embed-350org[data-src-campaign-names*=\"globalclimatestrike\"] .filter-form li:nth-child(3){display:none}#map-embed-350org .filter-form ul li label{font-size:10px;text-transform:uppercase;font-family:var(--sans-serif);display:flex;justify-content:center;align-items:center;cursor:pointer;white-space:nowrap}.filter-form ul li label img{height:14px !important;margin-right:4px;filter:grayscale(100%);-webkit-filter:grayscale(100%);opacity:0.5}#map-embed-350org .filter-form ul li input{display:none}#map-embed-350org .filter-form ul li input:checked+label{font-weight:600}#map-embed-350org .filter-form ul li input:checked+label img{filter:grayscale(0%);-webkit-filter:grayscale(0%);opacity:1}#map-embed-350org .map-area .map-range-container{position:absolute;top:0px;left:10px;z-index:1000;display:flex;flex-direction:column;align-content:center;justify-content:center;text-align:center;padding-top:20px}#map-embed-350org .map-area .map-range-container .map-range{align-self:center;writing-mode:bt-lr;-webkit-appearance:slider-vertical;width:8px;height:175px;padding:0;margin-top:25px;margin-bottom:4px;width:20px}#map-embed-350org .map-area .map-range-container .map-range-button{border:0 none !important;position:relative;color:gray}#map-embed-350org .map-area .map-range-container .map-range-button>span{z-index:10000;position:absolute;top:50%;left:50%;transform:translate(-50%, 15%)}#map-embed-350org .map-area .map-range-container .map-range-button::after{position:absolute;top:50%;left:50%;transform:translate(-50%, 0%);content:'';width:20px;height:20px;border-radius:20px;background-color:whitesmoke;border-bottom:1px solid rgba(0,0,0,0.4);border-top:1px solid rgba(255,255,255,0.2)}#map-embed-350org .map-area .map-range-container .map-range-button::before{background-size:100% 100%;content:'';z-index:10000;position:absolute;width:10px;height:10px;left:7px;top:6px}#map-embed-350org .map-area .map-range-container .map-range-plus::before{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIzLjAuNCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCAxMDAgMTAwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAxMDAgMTAwOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6Izk5OTk5OTt9Cjwvc3R5bGU+CjxnPgoJPHJlY3QgeT0iNDAiIGNsYXNzPSJzdDAiIHdpZHRoPSIxMDAiIGhlaWdodD0iMjAiLz4KPC9nPgo8Zz4KCTxyZWN0IHg9IjQwIiBjbGFzcz0ic3QwIiB3aWR0aD0iMjAiIGhlaWdodD0iMTAwIi8+CjwvZz4KPC9zdmc+Cg==)}#map-embed-350org .map-area .map-range-container .map-range-minus::before{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIzLjAuNCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCAxMDAgMTAwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAxMDAgMTAwOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6Izk5OTk5OTt9Cjwvc3R5bGU+CjxnPgoJPHJlY3QgeT0iNDAiIGNsYXNzPSJzdDAiIHdpZHRoPSIxMDAiIGhlaWdodD0iMjAiLz4KPC9nPgo8L3N2Zz4K)}#map-embed-350org .map-area{flex-grow:1;background-color:var(--bluish-gray);height:100%;position:relative}.mapboxgl-canvas{left:0}#map-embed-350org .popup-item{max-width:450px;min-width:250px}#map-embed-350org .popup-item .event-list-item-container{padding:10px}#map-embed-350org .popup-item .popup-close{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIzLjAuNCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCAxMDAgMTAwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAxMDAgMTAwOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+Cjxwb2x5Z29uIHBvaW50cz0iOTcuOSwxMiA4OCwyLjEgNDkuOSw0MC4yIDExLjgsMi4xIDEuOSwxMiA0MCw1MC4xIDEuOSw4OC4yIDExLjgsOTguMSA0OS45LDYwIDg4LDk4LjEgOTcuOSw4OC4yIDU5LjgsNTAuMSAiLz4KPC9zdmc+Cg==);background-size:contain;background-repeat:no-repeat;border:0 none !important;height:16px;position:absolute;right:10px;text-decoration:none !important;top:10px;width:16px}@media screen and (max-width: 800px){#map-embed-350org .popup-item{max-width:300px}}#map-embed-350org .event-list-container{flex-grow:1;background-color:whitesmoke;overflow-y:scroll;-webkit-overflow-scrolling:touch}#map-embed-350org .event-list-container .event-list{padding:0;list-style:none;list-style-type:none}#map-embed-350org .event-empty{padding:20px}#map-embed-350org .event-empty p{font-family:var(--sans-serif);font-weight:400;line-height:1.5;color:var(--darkgray)}#map-embed-350org .event-empty a{display:inline-block;font-family:var(--sans-serif);font-weight:600;line-height:1.5;background-color:var(--empgray);border-radius:4px;color:var(--darkgray);padding:5px 16px;text-decoration:none}#map-embed-350org .event-empty a:hover{background-color:var(--lightgray)}#map-embed-350org{font-family:var(--sans-serif);font-size:17px;line-height:1.4}#map-embed-350org .event-list-item{border-bottom:1px dashed gray}#map-embed-350org .event-list-item-container{padding:20px}#map-embed-350org .event-list-item-title{margin-top:6px;margin-bottom:6px}#map-embed-350org .event-list-item-title a{text-decoration:none}#map-embed-350org .event-list-item-description{font-size:14px;margin-top:10px;margin-bottom:10px;color:var(--darkgray)}#map-embed-350org .event-list-item-type span{border-radius:4px;display:inline-block;background-color:var(--lightgray);border:1px solid var(--lightgray);padding:4px 5px;letter-spacing:0.5px;line-height:1;text-transform:uppercase;font-size:10px;color:var(--darkgray)}#map-embed-350org .event-list-item-date{font-weight:600}#map-embed-350org .event-list-item-date,#map-embed-350org .event-list-item-location{color:var(--darkgray);font-size:14px;font-style:italic;margin:5px 0}#map-embed-350org .event-list-item-cta a.event-list-item-cta-btn{background-color:transparent;border-color:inherit;border-width:2px;border-style:solid;color:inherit;text-decoration:none;margin-top:5px;text-transform:uppercase;font-size:11px;font-weight:600;letter-spacing:1px}#map-embed-350org .event-list-item-cta a.event-list-item-cta-btn:hover{color:white;background-color:var(--blue)}.mapboxgl-map{font:12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mapboxgl-map:-webkit-full-screen{width:100%;height:100%}.mapboxgl-canary{background-color:salmon}.mapboxgl-canvas-container.mapboxgl-interactive,.mapboxgl-ctrl-group>button.mapboxgl-ctrl-compass{cursor:-webkit-grab;cursor:-moz-grab;cursor:grab;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-canvas-container.mapboxgl-interactive:active,.mapboxgl-ctrl-group>button.mapboxgl-ctrl-compass:active{cursor:-webkit-grabbing;cursor:-moz-grabbing;cursor:grabbing}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate .mapboxgl-canvas{touch-action:pan-x pan-y}.mapboxgl-canvas-container.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-drag-pan .mapboxgl-canvas{touch-action:pinch-zoom}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan .mapboxgl-canvas{touch-action:none}.mapboxgl-ctrl-top-left,.mapboxgl-ctrl-top-right,.mapboxgl-ctrl-bottom-left,.mapboxgl-ctrl-bottom-right{position:absolute;pointer-events:none;z-index:2}.mapboxgl-ctrl-top-left{top:0;left:0}.mapboxgl-ctrl-top-right{top:0;right:0}.mapboxgl-ctrl-bottom-left{bottom:0;left:0}.mapboxgl-ctrl-bottom-right{right:0;bottom:0}.mapboxgl-ctrl{clear:both;pointer-events:auto;transform:translate(0, 0)}.mapboxgl-ctrl-top-left .mapboxgl-ctrl{margin:10px 0 0 10px;float:left}.mapboxgl-ctrl-top-right .mapboxgl-ctrl{margin:10px 10px 0 0;float:right}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl{margin:0 0 10px 10px;float:left}.mapboxgl-ctrl-bottom-right .mapboxgl-ctrl{margin:0 10px 10px 0;float:right}.mapboxgl-ctrl-group{border-radius:4px;overflow:hidden;background:#fff}.mapboxgl-ctrl-group:not(:empty){-moz-box-shadow:0 0 2px rgba(0,0,0,0.1);-webkit-box-shadow:0 0 2px rgba(0,0,0,0.1);box-shadow:0 0 0 2px rgba(0,0,0,0.1)}.mapboxgl-ctrl-group>button{width:30px;height:30px;display:block;padding:0;outline:none;border:0;box-sizing:border-box;background-color:transparent;cursor:pointer}.mapboxgl-ctrl-group>button+button{border-top:1px solid #ddd}.mapboxgl-ctrl>button::-moz-focus-inner{border:0;padding:0}.mapboxgl-ctrl>button:hover{background-color:rgba(0,0,0,0.05)}.mapboxgl-ctrl-icon,.mapboxgl-ctrl-icon>.mapboxgl-ctrl-compass-arrow{speak:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.mapboxgl-ctrl-icon{padding:5px}.mapboxgl-ctrl-icon.mapboxgl-ctrl-icon-disabled{opacity:0.25;border-color:#373737}.mapboxgl-ctrl-icon.mapboxgl-ctrl-zoom-out{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E %3Cpath style='fill:%23333333;' d='m 7,9 c -0.554,0 -1,0.446 -1,1 0,0.554 0.446,1 1,1 l 6,0 c 0.554,0 1,-0.446 1,-1 0,-0.554 -0.446,-1 -1,-1 z'/%3E %3C/svg%3E\")}.mapboxgl-ctrl-icon.mapboxgl-ctrl-zoom-in{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E %3Cpath style='fill:%23333333;' d='M 10 6 C 9.446 6 9 6.4459904 9 7 L 9 9 L 7 9 C 6.446 9 6 9.446 6 10 C 6 10.554 6.446 11 7 11 L 9 11 L 9 13 C 9 13.55401 9.446 14 10 14 C 10.554 14 11 13.55401 11 13 L 11 11 L 13 11 C 13.554 11 14 10.554 14 10 C 14 9.446 13.554 9 13 9 L 11 9 L 11 7 C 11 6.4459904 10.554 6 10 6 z'/%3E %3C/svg%3E\")}.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E %3Cpath d='M10 4C9 4 9 5 9 5L9 5.1A5 5 0 0 0 5.1 9L5 9C5 9 4 9 4 10 4 11 5 11 5 11L5.1 11A5 5 0 0 0 9 14.9L9 15C9 15 9 16 10 16 11 16 11 15 11 15L11 14.9A5 5 0 0 0 14.9 11L15 11C15 11 16 11 16 10 16 9 15 9 15 9L14.9 9A5 5 0 0 0 11 5.1L11 5C11 5 11 4 10 4zM10 6.5A3.5 3.5 0 0 1 13.5 10 3.5 3.5 0 0 1 10 13.5 3.5 3.5 0 0 1 6.5 10 3.5 3.5 0 0 1 10 6.5zM10 8.3A1.8 1.8 0 0 0 8.3 10 1.8 1.8 0 0 0 10 11.8 1.8 1.8 0 0 0 11.8 10 1.8 1.8 0 0 0 10 8.3z'/%3E %3C/svg%3E\")}.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate:disabled{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23aaa'%3E %3Cpath d='M10 4C9 4 9 5 9 5L9 5.1A5 5 0 0 0 5.1 9L5 9C5 9 4 9 4 10 4 11 5 11 5 11L5.1 11A5 5 0 0 0 9 14.9L9 15C9 15 9 16 10 16 11 16 11 15 11 15L11 14.9A5 5 0 0 0 14.9 11L15 11C15 11 16 11 16 10 16 9 15 9 15 9L14.9 9A5 5 0 0 0 11 5.1L11 5C11 5 11 4 10 4zM10 6.5A3.5 3.5 0 0 1 13.5 10 3.5 3.5 0 0 1 10 13.5 3.5 3.5 0 0 1 6.5 10 3.5 3.5 0 0 1 10 6.5zM10 8.3A1.8 1.8 0 0 0 8.3 10 1.8 1.8 0 0 0 10 11.8 1.8 1.8 0 0 0 11.8 10 1.8 1.8 0 0 0 10 8.3z'/%3E %3C/svg%3E\")}.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E %3Cpath d='M10 4C9 4 9 5 9 5L9 5.1A5 5 0 0 0 5.1 9L5 9C5 9 4 9 4 10 4 11 5 11 5 11L5.1 11A5 5 0 0 0 9 14.9L9 15C9 15 9 16 10 16 11 16 11 15 11 15L11 14.9A5 5 0 0 0 14.9 11L15 11C15 11 16 11 16 10 16 9 15 9 15 9L14.9 9A5 5 0 0 0 11 5.1L11 5C11 5 11 4 10 4zM10 6.5A3.5 3.5 0 0 1 13.5 10 3.5 3.5 0 0 1 10 13.5 3.5 3.5 0 0 1 6.5 10 3.5 3.5 0 0 1 10 6.5zM10 8.3A1.8 1.8 0 0 0 8.3 10 1.8 1.8 0 0 0 10 11.8 1.8 1.8 0 0 0 11.8 10 1.8 1.8 0 0 0 10 8.3z'/%3E %3C/svg%3E\")}.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E %3Cpath d='M10 4C9 4 9 5 9 5L9 5.1A5 5 0 0 0 5.1 9L5 9C5 9 4 9 4 10 4 11 5 11 5 11L5.1 11A5 5 0 0 0 9 14.9L9 15C9 15 9 16 10 16 11 16 11 15 11 15L11 14.9A5 5 0 0 0 14.9 11L15 11C15 11 16 11 16 10 16 9 15 9 15 9L14.9 9A5 5 0 0 0 11 5.1L11 5C11 5 11 4 10 4zM10 6.5A3.5 3.5 0 0 1 13.5 10 3.5 3.5 0 0 1 10 13.5 3.5 3.5 0 0 1 6.5 10 3.5 3.5 0 0 1 10 6.5zM10 8.3A1.8 1.8 0 0 0 8.3 10 1.8 1.8 0 0 0 10 11.8 1.8 1.8 0 0 0 11.8 10 1.8 1.8 0 0 0 10 8.3z'/%3E %3C/svg%3E\")}.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E %3Cpath d='M 10,4 C 9,4 9,5 9,5 L 9,5.1 C 7.0357113,5.5006048 5.5006048,7.0357113 5.1,9 L 5,9 c 0,0 -1,0 -1,1 0,1 1,1 1,1 l 0.1,0 c 0.4006048,1.964289 1.9357113,3.499395 3.9,3.9 L 9,15 c 0,0 0,1 1,1 1,0 1,-1 1,-1 l 0,-0.1 c 1.964289,-0.400605 3.499395,-1.935711 3.9,-3.9 l 0.1,0 c 0,0 1,0 1,-1 C 16,9 15,9 15,9 L 14.9,9 C 14.499395,7.0357113 12.964289,5.5006048 11,5.1 L 11,5 c 0,0 0,-1 -1,-1 z m 0,2.5 c 1.932997,0 3.5,1.5670034 3.5,3.5 0,1.932997 -1.567003,3.5 -3.5,3.5 C 8.0670034,13.5 6.5,11.932997 6.5,10 6.5,8.0670034 8.0670034,6.5 10,6.5 Z'/%3E %3C/svg%3E\")}.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E %3Cpath d='M 10,4 C 9,4 9,5 9,5 L 9,5.1 C 7.0357113,5.5006048 5.5006048,7.0357113 5.1,9 L 5,9 c 0,0 -1,0 -1,1 0,1 1,1 1,1 l 0.1,0 c 0.4006048,1.964289 1.9357113,3.499395 3.9,3.9 L 9,15 c 0,0 0,1 1,1 1,0 1,-1 1,-1 l 0,-0.1 c 1.964289,-0.400605 3.499395,-1.935711 3.9,-3.9 l 0.1,0 c 0,0 1,0 1,-1 C 16,9 15,9 15,9 L 14.9,9 C 14.499395,7.0357113 12.964289,5.5006048 11,5.1 L 11,5 c 0,0 0,-1 -1,-1 z m 0,2.5 c 1.932997,0 3.5,1.5670034 3.5,3.5 0,1.932997 -1.567003,3.5 -3.5,3.5 C 8.0670034,13.5 6.5,11.932997 6.5,10 6.5,8.0670034 8.0670034,6.5 10,6.5 Z'/%3E %3C/svg%3E\")}.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-waiting{-webkit-animation:mapboxgl-spin 2s infinite linear;-moz-animation:mapboxgl-spin 2s infinite linear;-o-animation:mapboxgl-spin 2s infinite linear;-ms-animation:mapboxgl-spin 2s infinite linear;animation:mapboxgl-spin 2s infinite linear}@-webkit-keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg)}}@-moz-keyframes mapboxgl-spin{0%{-moz-transform:rotate(0deg)}100%{-moz-transform:rotate(360deg)}}@-o-keyframes mapboxgl-spin{0%{-o-transform:rotate(0deg)}100%{-o-transform:rotate(360deg)}}@-ms-keyframes mapboxgl-spin{0%{-ms-transform:rotate(0deg)}100%{-ms-transform:rotate(360deg)}}@keyframes mapboxgl-spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}.mapboxgl-ctrl-icon.mapboxgl-ctrl-fullscreen{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E %3Cpath d='M 5 4 C 4.5 4 4 4.5 4 5 L 4 6 L 4 9 L 4.5 9 L 5.7773438 7.296875 C 6.7771319 8.0602131 7.835765 8.9565728 8.890625 10 C 7.8257121 11.0633 6.7761791 11.951675 5.78125 12.707031 L 4.5 11 L 4 11 L 4 15 C 4 15.5 4.5 16 5 16 L 9 16 L 9 15.5 L 7.2734375 14.205078 C 8.0428931 13.187886 8.9395441 12.133481 9.9609375 11.068359 C 11.042371 12.14699 11.942093 13.2112 12.707031 14.21875 L 11 15.5 L 11 16 L 14 16 L 15 16 C 15.5 16 16 15.5 16 15 L 16 14 L 16 11 L 15.5 11 L 14.205078 12.726562 C 13.177985 11.949617 12.112718 11.043577 11.037109 10.009766 C 12.151856 8.981061 13.224345 8.0798624 14.228516 7.3046875 L 15.5 9 L 16 9 L 16 5 C 16 4.5 15.5 4 15 4 L 11 4 L 11 4.5 L 12.703125 5.7773438 C 11.932647 6.7864834 11.026693 7.8554712 9.9707031 8.9199219 C 8.9584739 7.8204943 8.0698767 6.7627188 7.3046875 5.7714844 L 9 4.5 L 9 4 L 6 4 L 5 4 z '/%3E %3C/svg%3E\")}.mapboxgl-ctrl-icon.mapboxgl-ctrl-shrink{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E %3Cpath style='fill:%23000000;' d='M 4.2421875 3.4921875 A 0.750075 0.750075 0 0 0 3.71875 4.78125 L 5.9648438 7.0273438 L 4 8.5 L 4 9 L 8 9 C 8.500001 8.9999988 9 8.4999992 9 8 L 9 4 L 8.5 4 L 7.0175781 5.9550781 L 4.78125 3.71875 A 0.750075 0.750075 0 0 0 4.2421875 3.4921875 z M 15.734375 3.4921875 A 0.750075 0.750075 0 0 0 15.21875 3.71875 L 12.984375 5.953125 L 11.5 4 L 11 4 L 11 8 C 11 8.4999992 11.499999 8.9999988 12 9 L 16 9 L 16 8.5 L 14.035156 7.0273438 L 16.28125 4.78125 A 0.750075 0.750075 0 0 0 15.734375 3.4921875 z M 4 11 L 4 11.5 L 5.9648438 12.972656 L 3.71875 15.21875 A 0.75130096 0.75130096 0 1 0 4.78125 16.28125 L 7.0273438 14.035156 L 8.5 16 L 9 16 L 9 12 C 9 11.500001 8.500001 11.000001 8 11 L 4 11 z M 12 11 C 11.499999 11.000001 11 11.500001 11 12 L 11 16 L 11.5 16 L 12.972656 14.035156 L 15.21875 16.28125 A 0.75130096 0.75130096 0 1 0 16.28125 15.21875 L 14.035156 12.972656 L 16 11.5 L 16 11 L 12 11 z '/%3E %3C/svg%3E\")}.mapboxgl-ctrl-icon.mapboxgl-ctrl-compass>.mapboxgl-ctrl-compass-arrow{width:20px;height:20px;margin:5px;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E %3Cpolygon fill='%23333333' points='6,9 10,1 14,9'/%3E %3Cpolygon fill='%23CCCCCC' points='6,11 10,19 14,11 '/%3E %3C/svg%3E\");background-repeat:no-repeat;display:inline-block}a.mapboxgl-ctrl-logo{width:85px;height:21px;margin:0 0 -3px -3px;display:block;background-repeat:no-repeat;cursor:pointer;background-image:url(\"data:image/svg+xml;charset=utf-8,%3C?xml version='1.0' encoding='utf-8'?%3E%3Csvg version='1.1' id='Layer_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 84.49 21' style='enable-background:new 0 0 84.49 21;' xml:space='preserve'%3E%3Cg%3E %3Cpath class='st0' style='opacity:0.9; fill: %23FFFFFF; enable-background: new;' d='M83.25,14.26c0,0.12-0.09,0.21-0.21,0.21h-1.61c-0.13,0-0.24-0.06-0.3-0.17l-1.44-2.39l-1.44,2.39 c-0.06,0.11-0.18,0.17-0.3,0.17h-1.61c-0.04,0-0.08-0.01-0.12-0.03c-0.09-0.06-0.13-0.19-0.06-0.28l0,0l2.43-3.68L76.2,6.84 c-0.02-0.03-0.03-0.07-0.03-0.12c0-0.12,0.09-0.21,0.21-0.21h1.61c0.13,0,0.24,0.06,0.3,0.17l1.41,2.36l1.4-2.35 c0.06-0.11,0.18-0.17,0.3-0.17H83c0.04,0,0.08,0.01,0.12,0.03c0.09,0.06,0.13,0.19,0.06,0.28l0,0l-2.37,3.63l2.43,3.67 C83.24,14.18,83.25,14.22,83.25,14.26z'/%3E %3Cpath class='st0' style='opacity:0.9; fill: %23FFFFFF; enable-background: new;' d='M66.24,9.59c-0.39-1.88-1.96-3.28-3.84-3.28c-1.03,0-2.03,0.42-2.73,1.18V3.51c0-0.13-0.1-0.23-0.23-0.23h-1.4 c-0.13,0-0.23,0.11-0.23,0.23v10.72c0,0.13,0.1,0.23,0.23,0.23h1.4c0.13,0,0.23-0.11,0.23-0.23V13.5c0.71,0.75,1.7,1.18,2.73,1.18 c1.88,0,3.45-1.41,3.84-3.29C66.37,10.79,66.37,10.18,66.24,9.59L66.24,9.59z M62.08,13c-1.32,0-2.39-1.11-2.41-2.48v-0.06 c0.02-1.38,1.09-2.48,2.41-2.48s2.42,1.12,2.42,2.51S63.41,13,62.08,13z'/%3E %3Cpath class='st0' style='opacity:0.9; fill: %23FFFFFF; enable-background: new;' d='M71.67,6.32c-1.98-0.01-3.72,1.35-4.16,3.29c-0.13,0.59-0.13,1.19,0,1.77c0.44,1.94,2.17,3.32,4.17,3.3 c2.35,0,4.26-1.87,4.26-4.19S74.04,6.32,71.67,6.32z M71.65,13.01c-1.33,0-2.42-1.12-2.42-2.51s1.08-2.52,2.42-2.52 c1.33,0,2.42,1.12,2.42,2.51S72.99,13,71.65,13.01L71.65,13.01z'/%3E %3Cpath class='st1' style='opacity:0.35; enable-background:new;' d='M62.08,7.98c-1.32,0-2.39,1.11-2.41,2.48v0.06C59.68,11.9,60.75,13,62.08,13s2.42-1.12,2.42-2.51 S63.41,7.98,62.08,7.98z M62.08,11.76c-0.63,0-1.14-0.56-1.17-1.25v-0.04c0.01-0.69,0.54-1.25,1.17-1.25 c0.63,0,1.17,0.57,1.17,1.27C63.24,11.2,62.73,11.76,62.08,11.76z'/%3E %3Cpath class='st1' style='opacity:0.35; enable-background:new;' d='M71.65,7.98c-1.33,0-2.42,1.12-2.42,2.51S70.32,13,71.65,13s2.42-1.12,2.42-2.51S72.99,7.98,71.65,7.98z M71.65,11.76c-0.64,0-1.17-0.57-1.17-1.27c0-0.7,0.53-1.26,1.17-1.26s1.17,0.57,1.17,1.27C72.82,11.21,72.29,11.76,71.65,11.76z'/%3E %3Cpath class='st0' style='opacity:0.9; fill: %23FFFFFF; enable-background: new;' d='M45.74,6.53h-1.4c-0.13,0-0.23,0.11-0.23,0.23v0.73c-0.71-0.75-1.7-1.18-2.73-1.18 c-2.17,0-3.94,1.87-3.94,4.19s1.77,4.19,3.94,4.19c1.04,0,2.03-0.43,2.73-1.19v0.73c0,0.13,0.1,0.23,0.23,0.23h1.4 c0.13,0,0.23-0.11,0.23-0.23V6.74c0-0.12-0.09-0.22-0.22-0.22C45.75,6.53,45.75,6.53,45.74,6.53z M44.12,10.53 C44.11,11.9,43.03,13,41.71,13s-2.42-1.12-2.42-2.51s1.08-2.52,2.4-2.52c1.33,0,2.39,1.11,2.41,2.48L44.12,10.53z'/%3E %3Cpath class='st1' style='opacity:0.35; enable-background:new;' d='M41.71,7.98c-1.33,0-2.42,1.12-2.42,2.51S40.37,13,41.71,13s2.39-1.11,2.41-2.48v-0.06 C44.1,9.09,43.03,7.98,41.71,7.98z M40.55,10.49c0-0.7,0.52-1.27,1.17-1.27c0.64,0,1.14,0.56,1.17,1.25v0.04 c-0.01,0.68-0.53,1.24-1.17,1.24C41.08,11.75,40.55,11.19,40.55,10.49z'/%3E %3Cpath class='st0' style='opacity:0.9; fill: %23FFFFFF; enable-background: new;' d='M52.41,6.32c-1.03,0-2.03,0.42-2.73,1.18V6.75c0-0.13-0.1-0.23-0.23-0.23h-1.4c-0.13,0-0.23,0.11-0.23,0.23 v10.72c0,0.13,0.1,0.23,0.23,0.23h1.4c0.13,0,0.23-0.1,0.23-0.23V13.5c0.71,0.75,1.7,1.18,2.74,1.18c2.17,0,3.94-1.87,3.94-4.19 S54.58,6.32,52.41,6.32z M52.08,13.01c-1.32,0-2.39-1.11-2.42-2.48v-0.07c0.02-1.38,1.09-2.49,2.4-2.49c1.32,0,2.41,1.12,2.41,2.51 S53.4,13,52.08,13.01L52.08,13.01z'/%3E %3Cpath class='st1' style='opacity:0.35; enable-background:new;' d='M52.08,7.98c-1.32,0-2.39,1.11-2.42,2.48v0.06c0.03,1.38,1.1,2.48,2.42,2.48s2.41-1.12,2.41-2.51 S53.4,7.98,52.08,7.98z M52.08,11.76c-0.63,0-1.14-0.56-1.17-1.25v-0.04c0.01-0.69,0.54-1.25,1.17-1.25c0.63,0,1.17,0.58,1.17,1.27 S52.72,11.76,52.08,11.76z'/%3E %3Cpath class='st0' style='opacity:0.9; fill: %23FFFFFF; enable-background: new;' d='M36.08,14.24c0,0.13-0.1,0.23-0.23,0.23h-1.41c-0.13,0-0.23-0.11-0.23-0.23V9.68c0-0.98-0.74-1.71-1.62-1.71 c-0.8,0-1.46,0.7-1.59,1.62l0.01,4.66c0,0.13-0.11,0.23-0.23,0.23h-1.41c-0.13,0-0.23-0.11-0.23-0.23V9.68 c0-0.98-0.74-1.71-1.62-1.71c-0.85,0-1.54,0.79-1.6,1.8v4.48c0,0.13-0.1,0.23-0.23,0.23h-1.4c-0.13,0-0.23-0.11-0.23-0.23V6.74 c0.01-0.13,0.1-0.22,0.23-0.22h1.4c0.13,0,0.22,0.11,0.23,0.22V7.4c0.5-0.68,1.3-1.09,2.16-1.1h0.03c1.09,0,2.09,0.6,2.6,1.55 c0.45-0.95,1.4-1.55,2.44-1.56c1.62,0,2.93,1.25,2.9,2.78L36.08,14.24z'/%3E %3Cpath class='st1' style='opacity:0.35; enable-background:new;' d='M84.34,13.59l-0.07-0.13l-1.96-2.99l1.94-2.95c0.44-0.67,0.26-1.56-0.41-2.02c-0.02,0-0.03,0-0.04-0.01 c-0.23-0.15-0.5-0.22-0.78-0.22h-1.61c-0.56,0-1.08,0.29-1.37,0.78L79.72,6.6l-0.34-0.56C79.09,5.56,78.57,5.27,78,5.27h-1.6 c-0.6,0-1.13,0.37-1.35,0.92c-2.19-1.66-5.28-1.47-7.26,0.45c-0.35,0.34-0.65,0.72-0.89,1.14c-0.9-1.62-2.58-2.72-4.5-2.72 c-0.5,0-1.01,0.07-1.48,0.23V3.51c0-0.82-0.66-1.48-1.47-1.48h-1.4c-0.81,0-1.47,0.66-1.47,1.47v3.75 c-0.95-1.36-2.5-2.18-4.17-2.19c-0.74,0-1.46,0.16-2.12,0.47c-0.24-0.17-0.54-0.26-0.84-0.26h-1.4c-0.45,0-0.87,0.21-1.15,0.56 c-0.02-0.03-0.04-0.05-0.07-0.08c-0.28-0.3-0.68-0.47-1.09-0.47h-1.39c-0.3,0-0.6,0.09-0.84,0.26c-0.67-0.3-1.39-0.46-2.12-0.46 c-1.83,0-3.43,1-4.37,2.5c-0.2-0.46-0.48-0.89-0.83-1.25c-0.8-0.81-1.89-1.25-3.02-1.25h-0.01c-0.89,0.01-1.75,0.33-2.46,0.88 c-0.74-0.57-1.64-0.88-2.57-0.88H28.1c-0.29,0-0.58,0.03-0.86,0.11c-0.28,0.06-0.56,0.16-0.82,0.28c-0.21-0.12-0.45-0.18-0.7-0.18 h-1.4c-0.82,0-1.47,0.66-1.47,1.47v7.5c0,0.82,0.66,1.47,1.47,1.47h1.4c0.82,0,1.48-0.66,1.48-1.48l0,0V9.79 c0.03-0.36,0.23-0.59,0.36-0.59c0.18,0,0.38,0.18,0.38,0.47v4.57c0,0.82,0.66,1.47,1.47,1.47h1.41c0.82,0,1.47-0.66,1.47-1.47 l-0.01-4.57c0.06-0.32,0.25-0.47,0.35-0.47c0.18,0,0.38,0.18,0.38,0.47v4.57c0,0.82,0.66,1.47,1.47,1.47h1.41 c0.82,0,1.47-0.66,1.47-1.47v-0.38c0.96,1.29,2.46,2.06,4.06,2.06c0.74,0,1.46-0.16,2.12-0.47c0.24,0.17,0.54,0.26,0.84,0.26h1.39 c0.3,0,0.6-0.09,0.84-0.26v2.01c0,0.82,0.66,1.47,1.47,1.47h1.4c0.82,0,1.47-0.66,1.47-1.47v-1.77c0.48,0.15,0.99,0.23,1.49,0.22 c1.7,0,3.22-0.87,4.17-2.2v0.52c0,0.82,0.66,1.47,1.47,1.47h1.4c0.3,0,0.6-0.09,0.84-0.26c0.66,0.31,1.39,0.47,2.12,0.47 c1.92,0,3.6-1.1,4.49-2.73c1.54,2.65,4.95,3.53,7.58,1.98c0.18-0.11,0.36-0.22,0.53-0.36c0.22,0.55,0.76,0.91,1.35,0.9H78 c0.56,0,1.08-0.29,1.37-0.78l0.37-0.61l0.37,0.61c0.29,0.48,0.81,0.78,1.38,0.78h1.6c0.81,0,1.46-0.66,1.45-1.46 C84.49,14.02,84.44,13.8,84.34,13.59L84.34,13.59z M35.86,14.47h-1.41c-0.13,0-0.23-0.11-0.23-0.23V9.68 c0-0.98-0.74-1.71-1.62-1.71c-0.8,0-1.46,0.7-1.59,1.62l0.01,4.66c0,0.13-0.1,0.23-0.23,0.23h-1.41c-0.13,0-0.23-0.11-0.23-0.23 V9.68c0-0.98-0.74-1.71-1.62-1.71c-0.85,0-1.54,0.79-1.6,1.8v4.48c0,0.13-0.1,0.23-0.23,0.23h-1.4c-0.13,0-0.23-0.11-0.23-0.23 V6.74c0.01-0.13,0.11-0.22,0.23-0.22h1.4c0.13,0,0.22,0.11,0.23,0.22V7.4c0.5-0.68,1.3-1.09,2.16-1.1h0.03 c1.09,0,2.09,0.6,2.6,1.55c0.45-0.95,1.4-1.55,2.44-1.56c1.62,0,2.93,1.25,2.9,2.78l0.01,5.16C36.09,14.36,35.98,14.46,35.86,14.47 L35.86,14.47z M45.97,14.24c0,0.13-0.1,0.23-0.23,0.23h-1.4c-0.13,0-0.23-0.11-0.23-0.23V13.5c-0.7,0.76-1.69,1.18-2.72,1.18 c-2.17,0-3.94-1.87-3.94-4.19s1.77-4.19,3.94-4.19c1.03,0,2.02,0.43,2.73,1.18V6.74c0-0.13,0.1-0.23,0.23-0.23h1.4 c0.12-0.01,0.22,0.08,0.23,0.21c0,0.01,0,0.01,0,0.02v7.51h-0.01V14.24z M52.41,14.67c-1.03,0-2.02-0.43-2.73-1.18v3.97 c0,0.13-0.1,0.23-0.23,0.23h-1.4c-0.13,0-0.23-0.1-0.23-0.23V6.75c0-0.13,0.1-0.22,0.23-0.22h1.4c0.13,0,0.23,0.11,0.23,0.23v0.73 c0.71-0.76,1.7-1.18,2.73-1.18c2.17,0,3.94,1.86,3.94,4.18S54.58,14.67,52.41,14.67z M66.24,11.39c-0.39,1.87-1.96,3.29-3.84,3.29 c-1.03,0-2.02-0.43-2.73-1.18v0.73c0,0.13-0.1,0.23-0.23,0.23h-1.4c-0.13,0-0.23-0.11-0.23-0.23V3.51c0-0.13,0.1-0.23,0.23-0.23 h1.4c0.13,0,0.23,0.11,0.23,0.23v3.97c0.71-0.75,1.7-1.18,2.73-1.17c1.88,0,3.45,1.4,3.84,3.28C66.37,10.19,66.37,10.8,66.24,11.39 L66.24,11.39L66.24,11.39z M71.67,14.68c-2,0.01-3.73-1.35-4.17-3.3c-0.13-0.59-0.13-1.19,0-1.77c0.44-1.94,2.17-3.31,4.17-3.3 c2.36,0,4.26,1.87,4.26,4.19S74.03,14.68,71.67,14.68L71.67,14.68z M83.04,14.47h-1.61c-0.13,0-0.24-0.06-0.3-0.17l-1.44-2.39 l-1.44,2.39c-0.06,0.11-0.18,0.17-0.3,0.17h-1.61c-0.04,0-0.08-0.01-0.12-0.03c-0.09-0.06-0.13-0.19-0.06-0.28l0,0l2.43-3.68 L76.2,6.84c-0.02-0.03-0.03-0.07-0.03-0.12c0-0.12,0.09-0.21,0.21-0.21h1.61c0.13,0,0.24,0.06,0.3,0.17l1.41,2.36l1.41-2.36 c0.06-0.11,0.18-0.17,0.3-0.17h1.61c0.04,0,0.08,0.01,0.12,0.03c0.09,0.06,0.13,0.19,0.06,0.28l0,0l-2.38,3.64l2.43,3.67 c0.02,0.03,0.03,0.07,0.03,0.12C83.25,14.38,83.16,14.47,83.04,14.47L83.04,14.47L83.04,14.47z'/%3E %3Cpath class='st0' style='opacity:0.9; fill: %23FFFFFF; enable-background: new;' d='M10.5,1.24c-5.11,0-9.25,4.15-9.25,9.25s4.15,9.25,9.25,9.25s9.25-4.15,9.25-9.25 C19.75,5.38,15.61,1.24,10.5,1.24z M14.89,12.77c-1.93,1.93-4.78,2.31-6.7,2.31c-0.7,0-1.41-0.05-2.1-0.16c0,0-1.02-5.64,2.14-8.81 c0.83-0.83,1.95-1.28,3.13-1.28c1.27,0,2.49,0.51,3.39,1.42C16.59,8.09,16.64,11,14.89,12.77z'/%3E %3Cpath class='st1' style='opacity:0.35; enable-background:new;' d='M10.5-0.01C4.7-0.01,0,4.7,0,10.49s4.7,10.5,10.5,10.5S21,16.29,21,10.49C20.99,4.7,16.3-0.01,10.5-0.01z M10.5,19.74c-5.11,0-9.25-4.15-9.25-9.25s4.14-9.26,9.25-9.26s9.25,4.15,9.25,9.25C19.75,15.61,15.61,19.74,10.5,19.74z'/%3E %3Cpath class='st1' style='opacity:0.35; enable-background:new;' d='M14.74,6.25C12.9,4.41,9.98,4.35,8.23,6.1c-3.16,3.17-2.14,8.81-2.14,8.81s5.64,1.02,8.81-2.14 C16.64,11,16.59,8.09,14.74,6.25z M12.47,10.34l-0.91,1.87l-0.9-1.87L8.8,9.43l1.86-0.9l0.9-1.87l0.91,1.87l1.86,0.9L12.47,10.34z'/%3E %3Cpolygon class='st0' style='opacity:0.9; fill: %23FFFFFF; enable-background: new;' points='14.33,9.43 12.47,10.34 11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 '/%3E%3C/g%3E%3C/svg%3E\")}a.mapboxgl-ctrl-logo.mapboxgl-compact{width:21px;height:21px;background-image:url(\"data:image/svg+xml;charset=utf-8,%3C?xml version='1.0' encoding='utf-8'?%3E %3Csvg version='1.1' id='Layer_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 21 21' style='enable-background:new 0 0 21 21;' xml:space='preserve'%3E%3Cg transform='translate(0,0.01)'%3E%3Cpath d='m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z' style='opacity:0.9;fill:%23ffffff;enable-background:new' class='st0'/%3E%3Cpath d='M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z' style='opacity:0.35;enable-background:new' class='st1'/%3E%3Cpath d='M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z' style='opacity:0.35;enable-background:new' class='st1'/%3E%3Cpolygon points='11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 ' style='opacity:0.9;fill:%23ffffff;enable-background:new' class='st0'/%3E%3C/g%3E%3C/svg%3E\")}.mapboxgl-ctrl.mapboxgl-ctrl-attrib{padding:0 5px;background-color:rgba(255,255,255,0.5);margin:0}@media screen{.mapboxgl-ctrl-attrib.mapboxgl-compact{min-height:20px;padding:0;margin:10px;position:relative;background-color:#fff;border-radius:3px 12px 12px 3px}.mapboxgl-ctrl-attrib.mapboxgl-compact:hover{padding:2px 24px 2px 4px;visibility:visible;margin-top:6px}.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:hover,.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:hover{padding:2px 4px 2px 24px;border-radius:12px 3px 3px 12px}.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner{display:none}.mapboxgl-ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner{display:block}.mapboxgl-ctrl-attrib.mapboxgl-compact::after{content:'';cursor:pointer;position:absolute;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E %3Cpath fill='%23333333' fill-rule='evenodd' d='M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0'/%3E %3C/svg%3E\");background-color:rgba(255,255,255,0.5);width:24px;height:24px;box-sizing:border-box;border-radius:12px}.mapboxgl-ctrl-bottom-right>.mapboxgl-ctrl-attrib.mapboxgl-compact::after{bottom:0;right:0}.mapboxgl-ctrl-top-right>.mapboxgl-ctrl-attrib.mapboxgl-compact::after{top:0;right:0}.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact::after{top:0;left:0}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact::after{bottom:0;left:0}}.mapboxgl-ctrl-attrib a{color:rgba(0,0,0,0.75);text-decoration:none}.mapboxgl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.mapboxgl-ctrl-attrib .mapbox-improve-map{font-weight:bold;margin-left:2px}.mapboxgl-attrib-empty{display:none}.mapboxgl-ctrl-scale{background-color:rgba(255,255,255,0.75);font-size:10px;border-width:medium 2px 2px;border-style:none solid solid;border-color:#333;padding:0 5px;color:#333;box-sizing:border-box}.mapboxgl-popup{position:absolute;top:0;left:0;display:-webkit-flex;display:flex;will-change:transform;pointer-events:none}.mapboxgl-popup-anchor-top,.mapboxgl-popup-anchor-top-left,.mapboxgl-popup-anchor-top-right{-webkit-flex-direction:column;flex-direction:column}.mapboxgl-popup-anchor-bottom,.mapboxgl-popup-anchor-bottom-left,.mapboxgl-popup-anchor-bottom-right{-webkit-flex-direction:column-reverse;flex-direction:column-reverse}.mapboxgl-popup-anchor-left{-webkit-flex-direction:row;flex-direction:row}.mapboxgl-popup-anchor-right{-webkit-flex-direction:row-reverse;flex-direction:row-reverse}.mapboxgl-popup-tip{width:0;height:0;border:10px solid transparent;z-index:1}.mapboxgl-popup-anchor-top .mapboxgl-popup-tip{-webkit-align-self:center;align-self:center;border-top:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip{-webkit-align-self:flex-start;align-self:flex-start;border-top:none;border-left:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip{-webkit-align-self:flex-end;align-self:flex-end;border-top:none;border-right:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip{-webkit-align-self:center;align-self:center;border-bottom:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip{-webkit-align-self:flex-start;align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip{-webkit-align-self:flex-end;align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.mapboxgl-popup-anchor-left .mapboxgl-popup-tip{-webkit-align-self:center;align-self:center;border-left:none;border-right-color:#fff}.mapboxgl-popup-anchor-right .mapboxgl-popup-tip{-webkit-align-self:center;align-self:center;border-right:none;border-left-color:#fff}.mapboxgl-popup-close-button{position:absolute;right:0;top:0;border:0;border-radius:0 3px 0 0;cursor:pointer;background-color:transparent}.mapboxgl-popup-close-button:hover{background-color:rgba(0,0,0,0.05)}.mapboxgl-popup-content{position:relative;background:#fff;border-radius:3px;box-shadow:0 1px 2px rgba(0,0,0,0.1);padding:10px 10px 15px;pointer-events:auto}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-content{border-top-left-radius:0}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-content{border-top-right-radius:0}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-content{border-bottom-left-radius:0}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-content{border-bottom-right-radius:0}.mapboxgl-marker{position:absolute;top:0;left:0;will-change:transform}.mapboxgl-user-location-dot{background-color:#1da1f2;width:15px;height:15px;border-radius:50%;box-shadow:0 0 2px rgba(0,0,0,0.25)}.mapboxgl-user-location-dot::before{background-color:#1da1f2;content:'';width:15px;height:15px;border-radius:50%;position:absolute;-webkit-animation:mapboxgl-user-location-dot-pulse 2s infinite;-moz-animation:mapboxgl-user-location-dot-pulse 2s infinite;-ms-animation:mapboxgl-user-location-dot-pulse 2s infinite;animation:mapboxgl-user-location-dot-pulse 2s infinite}.mapboxgl-user-location-dot::after{border-radius:50%;border:2px solid #fff;content:'';height:19px;left:-2px;position:absolute;top:-2px;width:19px;box-sizing:border-box}@-webkit-keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);opacity:0}100%{-webkit-transform:scale(1);opacity:0}}@-ms-keyframes mapboxgl-user-location-dot-pulse{0%{-ms-transform:scale(1);opacity:1}70%{-ms-transform:scale(3);opacity:0}100%{-ms-transform:scale(1);opacity:0}}@keyframes mapboxgl-user-location-dot-pulse{0%{transform:scale(1);opacity:1}70%{transform:scale(3);opacity:0}100%{transform:scale(1);opacity:0}}.mapboxgl-user-location-dot-stale{background-color:#aaa}.mapboxgl-user-location-dot-stale::after{display:none}.mapboxgl-crosshair,.mapboxgl-crosshair .mapboxgl-interactive,.mapboxgl-crosshair .mapboxgl-interactive:active{cursor:crosshair}.mapboxgl-boxzoom{position:absolute;top:0;left:0;width:0;height:0;background:#fff;border:2px dotted #202020;opacity:0.5}@media print{.mapbox-improve-map{display:none}}\n",""])},function(t,e,r){"use strict";r.r(e);var n={};r.r(n),r.d(n,"initialize",function(){return Wt}),r.d(n,"ga",function(){return Ht}),r.d(n,"set",function(){return Xt}),r.d(n,"send",function(){return $t}),r.d(n,"pageview",function(){return Kt}),r.d(n,"modalview",function(){return Jt}),r.d(n,"timing",function(){return Yt}),r.d(n,"event",function(){return Qt}),r.d(n,"exception",function(){return te}),r.d(n,"plugin",function(){return ee}),r.d(n,"outboundLink",function(){return re}),r.d(n,"testModeAPI",function(){return ne}),r.d(n,"default",function(){return ie});var w=r(0),E=r.n(w),i=r(8),o=r.n(i);function S(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}var a=r(5),s=r.n(a),k=E.a.createContext(null),l=function(n){function t(t){var e;e=n.call(this,t)||this;var r=t.store;return e.state={storeState:r.getState(),store:r},e}S(t,n);var e=t.prototype;return e.componentDidMount=function(){this._isMounted=!0,this.subscribe()},e.componentWillUnmount=function(){this.unsubscribe&&this.unsubscribe(),this._isMounted=!1},e.componentDidUpdate=function(t){this.props.store!==t.store&&(this.unsubscribe&&this.unsubscribe(),this.subscribe())},e.subscribe=function(){var t=this,r=this.props.store;this.unsubscribe=r.subscribe(function(){var e=r.getState();t._isMounted&&t.setState(function(t){return t.storeState===e?null:{storeState:e}})});var e=r.getState();e!==this.state.storeState&&this.setState({storeState:e})},e.render=function(){var t=this.props.context||k;return E.a.createElement(t.Provider,{value:this.state},this.props.children)},t}(w.Component);l.propTypes={store:s.a.shape({subscribe:s.a.func.isRequired,dispatch:s.a.func.isRequired,getState:s.a.func.isRequired}),context:s.a.object,children:s.a.any};var u=l;function C(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function T(){return(T=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function A(t,e){if(null==t)return{};var r,n,i={},o=Object.keys(t);for(n=0;n<o.length;n++)r=o[n],0<=e.indexOf(r)||(i[r]=t[r]);return i}var c=r(16),P=r.n(c),p=r(9),I=r.n(p);r(47);function h(p,t){void 0===t&&(t={});var e=t,r=e.getDisplayName,s=void 0===r?function(t){return"ConnectAdvanced("+t+")"}:r,n=e.methodName,l=void 0===n?"connectAdvanced":n,i=e.renderCountProp,h=void 0===i?void 0:i,o=e.shouldHandleStateChanges,f=void 0===o||o,a=e.storeKey,d=void 0===a?"store":a,u=e.withRef,c=void 0!==u&&u,m=e.forwardRef,y=void 0!==m&&m,g=e.context,v=void 0===g?k:g,_=A(e,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"]);I()(void 0===h,"renderCountProp is removed. render counting is built into the latest React dev tools profiling extension"),I()(!c,"withRef is removed. To access the wrapped instance, use a ref on the connected component");var b="To use a custom Redux store for specific components,  create a custom React context with React.createContext(), and pass the context object to React-Redux's Provider and specific components like:  <Provider context={MyContext}><ConnectedComponent context={MyContext} /></Provider>. You may also pass a {context : MyContext} option to connect";I()("store"===d,"storeKey has been removed and does not do anything. "+b);var x=v;return function(t){var e=t.displayName||t.name||"Component",a=s(e),u=T({},_,{getDisplayName:s,methodName:l,renderCountProp:h,shouldHandleStateChanges:f,storeKey:d,displayName:a,wrappedComponentName:e,WrappedComponent:t}),c=_.pure,r=w.Component,o=t;c&&(r=w.PureComponent);var n=function(r){function t(t){var e;return e=r.call(this,t)||this,I()(y?!t.wrapperProps[d]:!t[d],"Passing redux store in props has been removed and does not do anything. "+b),e.selectDerivedProps=function(){var i,o,a,s,l;return function(t,e,r){if(c&&i===e&&o===t)return a;r!==s&&(l=p((s=r).dispatch,u));var n=l(o=t,i=e);return a===n?a:a=n}}(),e.selectChildElement=function(){var r,n,i;return function(t,e){return t===r&&e===n||(r=t,n=e,i=E.a.createElement(o,T({},t,{ref:e}))),i}}(),e.renderWrappedComponent=e.renderWrappedComponent.bind(C(C(e))),e}S(t,r);var e=t.prototype;return e.renderWrappedComponent=function(t){I()(t,'Could not find "store" in the context of "'+a+'". Either wrap the root component in a <Provider>, or pass a custom React context provider to <Provider> and the corresponding React context consumer to '+a+" in connect options.");var e,r=t.storeState,n=t.store,i=this.props;y&&(i=this.props.wrapperProps,e=this.props.forwardedRef);var o=this.selectDerivedProps(r,i,n);return this.selectChildElement(o,e)},e.render=function(){var t=this.props.context||x;return E.a.createElement(t.Consumer,null,this.renderWrappedComponent)},t}(r);if(n.WrappedComponent=t,n.displayName=a,y){var i=E.a.forwardRef(function(t,e){return E.a.createElement(n,{wrapperProps:t,forwardedRef:e})});return i.displayName=a,i.WrappedComponent=t,P()(i,t)}return P()(n,t)}}var f=Object.prototype.hasOwnProperty;function d(t,e){return t===e?0!==t||0!==e||1/t==1/e:t!=t&&e!=e}function _(t,e){if(d(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(var i=0;i<r.length;i++)if(!f.call(e,r[i])||!d(t[r[i]],e[r[i]]))return!1;return!0}function m(){return Math.random().toString(36).substring(7).split("").join(".")}var y=r(17),g={INIT:"@@redux/INIT"+m(),REPLACE:"@@redux/REPLACE"+m(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+m()}};function v(t){if("object"!=typeof t||null===t)return!1;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function b(t,e){return function(){return e(t.apply(this,arguments))}}function x(i){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},e=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(o).filter(function(t){return Object.getOwnPropertyDescriptor(o,t).enumerable}))),e.forEach(function(t){var e,r,n;e=i,n=o[r=t],r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n})}return i}function M(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return 0===e.length?function(t){return t}:1===e.length?e[0]:e.reduce(function(t,e){return function(){return t(e.apply(void 0,arguments))}})}function z(i){return function(t,e){var r=i(t,e);function n(){return r}return n.dependsOnOwnProps=!1,n}}function L(t){return null!==t.dependsOnOwnProps&&void 0!==t.dependsOnOwnProps?Boolean(t.dependsOnOwnProps):1!==t.length}function O(i){return function(t,e){e.displayName;var n=function(t,e){return n.dependsOnOwnProps?n.mapToProps(t,e):n.mapToProps(t)};return n.dependsOnOwnProps=!0,n.mapToProps=function(t,e){n.mapToProps=i,n.dependsOnOwnProps=L(i);var r=n(t,e);return"function"==typeof r&&(n.mapToProps=r,n.dependsOnOwnProps=L(r),r=n(t,e)),r},n}}var D=[function(t){return"function"==typeof t?O(t):void 0},function(t){return t?void 0:z(function(t){return{dispatch:t}})},function(e){return e&&"object"==typeof e?z(function(t){return function(t,e){if("function"==typeof t)return b(t,e);if("object"!=typeof t||null===t)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===t?"null":typeof t)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var r=Object.keys(t),n={},i=0;i<r.length;i++){var o=r[i],a=t[o];"function"==typeof a&&(n[o]=b(a,e))}return n}(e,t)}):void 0}];var R=[function(t){return"function"==typeof t?O(t):void 0},function(t){return t?void 0:z(function(){return{}})}];function F(t,e,r){return T({},r,t,e)}var B=[function(t){return"function"==typeof t?function(l){return function(t,e){e.displayName;var i,o=e.pure,a=e.areMergedPropsEqual,s=!1;return function(t,e,r){var n=l(t,e,r);return s?o&&a(n,i)||(i=n):(s=!0,i=n),i}}}(t):void 0},function(t){return t?void 0:function(){return F}}];function j(r,n,i,o){return function(t,e){return i(r(t,e),n(o,e),e)}}function N(i,o,a,s,t){var l,u,c,p,h,f=t.areStatesEqual,d=t.areOwnPropsEqual,m=t.areStatePropsEqual,r=!1;function n(t,e){var r=!d(e,u),n=!f(t,l);return l=t,u=e,r&&n?(c=i(l,u),o.dependsOnOwnProps&&(p=o(s,u)),h=a(c,p,u)):r?(i.dependsOnOwnProps&&(c=i(l,u)),o.dependsOnOwnProps&&(p=o(s,u)),h=a(c,p,u)):n?function(){var t=i(l,u),e=!m(t,c);return c=t,e&&(h=a(c,p,u)),h}():h}return function(t,e){return r?n(t,e):function(t,e){return c=i(l=t,u=e),p=o(s,u),h=a(c,p,u),r=!0,h}(t,e)}}function U(t,e){var r=e.initMapStateToProps,n=e.initMapDispatchToProps,i=e.initMergeProps,o=A(e,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),a=r(t,o),s=n(t,o),l=i(t,o);return(o.pure?N:j)(a,s,l,t,o)}function V(r,t,n){for(var e=t.length-1;0<=e;e--){var i=t[e](r);if(i)return i}return function(t,e){throw new Error("Invalid value of type "+typeof r+" for "+n+" argument when connecting component "+e.wrappedComponentName+".")}}function q(t,e){return t===e}var Z,G,W,H,X,$,K,J,Y,Q,tt,et,rt=(W=(G=void 0===Z?{}:Z).connectHOC,H=void 0===W?h:W,X=G.mapStateToPropsFactories,$=void 0===X?R:X,K=G.mapDispatchToPropsFactories,J=void 0===K?D:K,Y=G.mergePropsFactories,Q=void 0===Y?B:Y,tt=G.selectorFactory,et=void 0===tt?U:tt,function(t,e,r,n){void 0===n&&(n={});var i=n,o=i.pure,a=void 0===o||o,s=i.areStatesEqual,l=void 0===s?q:s,u=i.areOwnPropsEqual,c=void 0===u?_:u,p=i.areStatePropsEqual,h=void 0===p?_:p,f=i.areMergedPropsEqual,d=void 0===f?_:f,m=A(i,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),y=V(t,$,"mapStateToProps"),g=V(e,J,"mapDispatchToProps"),v=V(r,Q,"mergeProps");return H(et,T({methodName:"connect",getDisplayName:function(t){return"Connect("+t+")"},shouldHandleStateChanges:Boolean(t),initMapStateToProps:y,initMapDispatchToProps:g,initMergeProps:v,pure:a,areStatesEqual:l,areOwnPropsEqual:c,areStatePropsEqual:h,areMergedPropsEqual:d},m))}),nt=r(7);function it(){var t=function(t,e){e=e||t.slice(0);return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(["\n    width: 400px;\n    height: 100%;\n    background-color: blue;\n    display: flex;\n    flex-direction: column;\n"]);return it=function(){return t},t}var ot=nt.a.section(it());function at(){var t=function(t,e){e=e||t.slice(0);return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(["\n    flex-basis: 0;\n    flex-grow: 1;\n    background-color: green;\n"]);return at=function(){return t},t}var st=nt.a.section(at());function lt(){var t=function(t,e){e=e||t.slice(0);return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(["\n    width: 100%;\n    height: 100%;\n    display: flex;\n    flex-direction: row;\n"]);return lt=function(){return t},t}var ut=nt.a.div(lt()),ct=r(10),pt=r.n(ct),ht=r(6),ft=r.n(ht);function dt(t){console.warn("[react-ga]",t)}function mt(t){return(mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function gt(t,e){if(null==t)return{};var r,n,i=function(t,e){if(null==t)return{};var r,n,i={},o=Object.keys(t);for(n=0;n<o.length;n++)r=o[n],0<=e.indexOf(r)||(i[r]=t[r]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)r=o[n],0<=e.indexOf(r)||Object.prototype.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function vt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _t(t){return(_t=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function bt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xt(t,e){return(xt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function wt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Et=function(){function p(){var t,c;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return wt(bt(c=function(t,e){return!e||"object"!==mt(e)&&"function"!=typeof e?bt(t):e}(this,(t=_t(p)).call.apply(t,[this].concat(r)))),"handleClick",function(t){var e=c.props,r=e.target,n=e.eventLabel,i=e.to,o=e.onClick,a=e.trackerNames,s={label:n},l="_blank"!==r,u=!(t.ctrlKey||t.shiftKey||t.metaKey||1===t.button);l&&u?(t.preventDefault(),p.trackLink(s,function(){window.location.href=i},a)):p.trackLink(s,function(){},a),o&&o(t)}),c}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xt(t,e)}(p,w["Component"]),function(t,e,r){e&&vt(t.prototype,e),r&&vt(t,r)}(p,[{key:"render",value:function(){var t=this.props,e=t.to,r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yt(r,!0).forEach(function(t){wt(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yt(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},gt(t,["to"]),{href:e,onClick:this.handleClick});return"_blank"===this.props.target&&(r.rel="noopener noreferrer"),delete r.eventLabel,delete r.trackerNames,E.a.createElement("a",r)}}]),p}();function St(t){return t.replace(/^\s+|\s+$/g,"")}wt(Et,"trackLink",function(){dt("ga tracking not enabled")}),wt(Et,"propTypes",{eventLabel:ft.a.string.isRequired,target:ft.a.string,to:ft.a.string,onClick:ft.a.func,trackerNames:ft.a.arrayOf(ft.a.string)}),wt(Et,"defaultProps",{target:null,to:null,onClick:null,trackerNames:null});var kt=/^(a|an|and|as|at|but|by|en|for|if|in|nor|of|on|or|per|the|to|vs?\.?|via)$/i;var Ct="REDACTED (Potential Email Address)";function Tt(t,e){return function(t){return"string"==typeof t&&-1!==t.indexOf("@")}(t)?(dt("This arg looks like an email address, redacting."),Ct):e?function(t){return St(t).replace(/[A-Za-z0-9\u00C0-\u00FF]+[^\s-]*/g,function(t,e,r){return 0<e&&e+t.length!==r.length&&-1<t.search(kt)&&":"!==r.charAt(e-2)&&("-"!==r.charAt(e+t.length)||"-"===r.charAt(e-1))&&r.charAt(e-1).search(/[^\s-]/)<0?t.toLowerCase():-1<t.substr(1).search(/[A-Z]|\../)?t:t.charAt(0).toUpperCase()+t.substr(1)})}(t):t}var At=function(t){var e,r,n,i,o,a="https://www.google-analytics.com/analytics.js";t&&t.gaAddress?a=t.gaAddress:t&&t.debug&&(a="https://www.google-analytics.com/analytics_debug.js"),e=window,r=document,n=a,e.GoogleAnalyticsObject="ga",e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,i=r.createElement("script"),o=r.getElementsByTagName("script")[0],i.async=1,i.src=n,o.parentNode.insertBefore(i,o)};function Pt(t){console.info("[react-ga]",t)}var It=[],Mt={calls:It,ga:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];It.push([].concat(e))},resetCalls:function(){It.length=0}};function zt(t,e){if(null==t)return{};var r,n,i=function(t,e){if(null==t)return{};var r,n,i={},o=Object.keys(t);for(n=0;n<o.length;n++)r=o[n],0<=e.indexOf(r)||(i[r]=t[r]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)r=o[n],0<=e.indexOf(r)||Object.prototype.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function Lt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ot(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Dt(t){return(Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rt(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Ft="undefined"==typeof window||"undefined"==typeof document,Bt=!1,jt=!0,Nt=!1,Ut=!0,Vt=function(){var t;return Nt?Mt.ga.apply(Mt,arguments):!Ft&&(window.ga?(t=window).ga.apply(t,arguments):dt("ReactGA.initialize must be called first or GoogleAnalytics should be loaded manually"))};function qt(t){return Tt(t,jt)}function Zt(t){for(var e=arguments.length,r=new Array(1<e?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];var i=r[0];if("function"==typeof Vt){if("string"!=typeof i)return void dt("ga command must be a string");!Ut&&Array.isArray(t)||Vt.apply(void 0,r),Array.isArray(t)&&t.forEach(function(t){Vt.apply(void 0,Rt(["".concat(t,".").concat(i)].concat(r.slice(1))))})}}function Gt(t,e){t?e&&(e.debug&&!0===e.debug&&(Bt=!0),!1===e.titleCase&&(jt=!1),e.useExistingGa)||(e&&e.gaOptions?Vt("create",t,e.gaOptions):Vt("create",t,"auto")):dt("gaTrackingID is required in initialize()")}function Wt(t,e){if(e&&!0===e.testMode)Nt=!0;else{if(Ft)return!1;e&&!0===e.standardImplementation||At(e)}return Ut=!e||"boolean"!=typeof e.alwaysSendToDefaultTracker||e.alwaysSendToDefaultTracker,Array.isArray(t)?t.forEach(function(t){"object"===Dt(t)?Gt(t.trackingId,t):dt("All configs must be an object")}):Gt(t,e),!0}function Ht(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return 0<e.length&&(Vt.apply(void 0,e),Bt&&(Pt("called ga('arguments');"),Pt("with arguments: ".concat(JSON.stringify(e))))),window.ga}function Xt(t,e){t?"object"===Dt(t)?(0===Object.keys(t).length&&dt("empty `fieldsObject` given to .set()"),Zt(e,"set",t),Bt&&(Pt("called ga('set', fieldsObject);"),Pt("with fieldsObject: ".concat(JSON.stringify(t))))):dt("Expected `fieldsObject` arg to be an Object"):dt("`fieldsObject` is required in .set()")}function $t(t,e){Zt(e,"send",t),Bt&&(Pt("called ga('send', fieldObject);"),Pt("with fieldObject: ".concat(JSON.stringify(t))),Pt("with trackers: ".concat(JSON.stringify(e))))}function Kt(t,e,r){if(t){var n=St(t);if(""!==n){var i={};if(r&&(i.title=r),1,Zt(e,"send",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Lt(r,!0).forEach(function(t){Ot(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lt(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({hitType:"pageview",page:n},i)),Bt){Pt("called ga('send', 'pageview', path);");var o="";r&&(o=" and title: ".concat(r)),Pt("with path: ".concat(n).concat(o))}}else dt("path cannot be an empty string in .pageview()")}else dt("path is required in .pageview()")}function Jt(t,e){if(t){var r=function(t){return"/"===t.substring(0,1)?t.substring(1):t}(St(t));if(""!==r){var n="/modal/".concat(r);Zt(e,"send","pageview",n),Bt&&(Pt("called ga('send', 'pageview', path);"),Pt("with path: ".concat(n)))}else dt("modalName cannot be an empty string or a single / in .modalview()")}else dt("modalName is required in .modalview(modalName)")}function Yt(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.category,r=t.variable,n=t.value,i=t.label,o=1<arguments.length?arguments[1]:void 0;if(e&&r&&n&&"number"==typeof n){var a={hitType:"timing",timingCategory:qt(e),timingVar:qt(r),timingValue:n};i&&(a.timingLabel=qt(i)),$t(a,o)}else dt("args.category, args.variable AND args.value are required in timing() AND args.value has to be a number")}function Qt(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.category,r=t.action,n=t.label,i=t.value,o=t.nonInteraction,a=t.transport,s=zt(t,["category","action","label","value","nonInteraction","transport"]),l=1<arguments.length?arguments[1]:void 0;if(e&&r){var u={hitType:"event",eventCategory:qt(e),eventAction:qt(r)};n&&(u.eventLabel=qt(n)),void 0!==i&&("number"!=typeof i?dt("Expected `args.value` arg to be a Number."):u.eventValue=i),void 0!==o&&("boolean"!=typeof o?dt("`args.nonInteraction` must be a boolean."):u.nonInteraction=o),void 0!==a&&("string"!=typeof a?dt("`args.transport` must be a string."):(-1===["beacon","xhr","image"].indexOf(a)&&dt("`args.transport` must be either one of these values: `beacon`, `xhr` or `image`"),u.transport=a)),Object.keys(s).filter(function(t){return"dimension"===t.substr(0,"dimension".length)}).forEach(function(t){u[t]=s[t]}),Object.keys(s).filter(function(t){return"metric"===t.substr(0,"metric".length)}).forEach(function(t){u[t]=s[t]}),$t(u,l)}else dt("args.category AND args.action are required in event()")}function te(t,e){var r=t.description,n=t.fatal,i={hitType:"exception"};r&&(i.exDescription=qt(r)),void 0!==n&&("boolean"!=typeof n?dt("`args.fatal` must be a boolean."):i.exFatal=n),$t(i,e)}var ee={require:function(t,e,r){if(t){var n=St(t);if(""!==n){var i=r?"".concat(r,".require"):"require";if(e){if("object"!==Dt(e))return void dt("Expected `options` arg to be an Object");0===Object.keys(e).length&&dt("Empty `options` given to .require()"),Ht(i,n,e),Bt&&Pt("called ga('require', '".concat(n,"', ").concat(JSON.stringify(e)))}else Ht(i,n),Bt&&Pt("called ga('require', '".concat(n,"');"))}else dt("`name` cannot be an empty string in .require()")}else dt("`name` is required in .require()")},execute:function(t,e,r,n){var i,o;if(i=1==(arguments.length<=2?0:arguments.length-2)?arguments.length<=2?void 0:r:(o=arguments.length<=2?void 0:r,arguments.length<=3?void 0:n),1,"string"!=typeof t)dt("Expected `pluginName` arg to be a String.");else if("string"!=typeof e)dt("Expected `action` arg to be a String.");else{var a="".concat(t,":").concat(e);i=i||null,o&&i?(Ht(a,o,i),Bt&&(Pt("called ga('".concat(a,"');")),Pt('actionType: "'.concat(o,'" with payload: ').concat(JSON.stringify(i))))):i?(Ht(a,i),Bt&&(Pt("called ga('".concat(a,"');")),Pt("with payload: ".concat(JSON.stringify(i))))):(Ht(a),Bt&&Pt("called ga('".concat(a,"');")))}}};function re(t,e,r){if("function"==typeof e)if(t&&t.label){var n={hitType:"event",eventCategory:"Outbound",eventAction:"Click",eventLabel:qt(t.label)},i=!1,o=setTimeout(function(){i=!0,e()},250);n.hitCallback=function(){clearTimeout(o),i||e()},$t(n,r)}else dt("args.label is required in outboundLink()");else dt("hitCallback function is required")}var ne=Mt,ie={initialize:Wt,ga:Ht,set:Xt,send:$t,pageview:Kt,modalview:Jt,timing:Yt,event:Qt,exception:te,plugin:ee,outboundLink:re,testModeAPI:Mt};function oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ae(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}Et.origTrackLink=Et.trackLink,Et.trackLink=re;var se=Et,le=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oe(r,!0).forEach(function(t){ae(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oe(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},n,{OutboundLink:se}),ue=["en","fr","pt","de","es","ru","tr"],ce=["http://act.350.org","https://act.350.org","act.350.org"],pe="DD MMM YYYY @ hh:mma",he="SEARCH",fe="ZOOM",de="PERFORMS_SEARCH",me="GETS_RESULT_FROM_SEARCH",ye="GETS_NO_RESULT_FROM_SEARCH",ge="ZOOM_IN",ve="ZOOM_OUT",_e="ZOOOM_SLIDER",be="ON_LIST_VIEW",xe="ON_MAP_VIEW";function we(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Ee(t){return t?t.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,""):t}function Se(i,o,t){var a=2<arguments.length&&void 0!==t?t:2;return{width:i+2*a,height:i+2*a,data:new Uint8Array((i+2*a)*(i+2*a)*4),onAdd:function(){var t=document.createElement("canvas");t.width=this.width,t.height=this.height,this.context=t.getContext("2d")},render:function(){var t=this.context,e=this.width/2,r=this.height/2,n=i/2;return t.beginPath(),t.arc(e,r,n,0,2*Math.PI,!1),t.fillStyle="rgba(".concat(o.red,", ").concat(o.green,", ").concat(o.blue,", 1)"),t.fill(),t.lineWidth=a,t.strokeStyle="rgba(255,255,255,0.8)",t.stroke(),this.data=t.getImageData(0,0,this.width,this.height).data,!0}}}function ke(t){return!t||t.startsWith("https://")||t.startsWith("http://")?t:"//".concat(t)}function Ce(t,e){if(!ue.includes(t))return e;if(t===ue[0])return e;var r=e.split("/");return ce.includes(r[0].toLowerCase())?(r[r.length-2]="globalclimatestrike_attend_".concat(t),r.join("/")):void 0}function Te(t){var e=t.popup_url,r=t.handleClosePopup,n=t.i18n,i=t.popup,o=i.event_type,a=i.supergroup,s=i.campaign_title,l=(i.url,i.website,i.name),u=i.title,c=i.start_datetime,p=i.location,h=i.venue,f=i.description;return E.a.createElement("div",{className:"popup-item"},E.a.createElement("a",{className:"popup-close",onClick:function(){return r()}}),E.a.createElement("div",{className:"event-list-item-container"},E.a.createElement("div",{className:"event-list-item-type"},E.a.createElement("span",null,"group"==o?n(Ee(a)):n(Ee(s))||s||n("show-events"))),E.a.createElement("h2",{className:"event-list-item-title text-size-h2"},E.a.createElement(se,{eventLabel:xe,to:"".concat(ke(e)),target:"_blank",className:"event-list-item-link"},l||u)),c&&E.a.createElement("div",{className:"event-list-item-date"},pt()(String(c)).format(pe)),E.a.createElement("div",{className:"event-list-item-location"},p||h),E.a.createElement("div",{className:"event-list-item-description"},f||""),E.a.createElement("div",{className:"event-list-item-cta"},E.a.createElement(se,{eventLabel:xe,to:"".concat(ke(e)),target:"_blank",className:"event-list-item-cta-btn megamap-btn button"},"group"==o?n("get-involved"):"RSVP"))))}function Ae(t,e,r,n){var i=3<arguments.length&&void 0!==n?n:0;le.event({category:t,action:e,label:r,value:i})}function Pe(t){var e=t.handleZoomChange,r=t.initZoom,n=t.mapZoom,i=t.handleZoomIn,o=t.handleZoomOut;return E.a.createElement("div",{className:"map-range-container"},E.a.createElement("a",{onClick:i,className:"map-range-button map-range-plus"}),E.a.createElement("input",{type:"range",orient:"vertical",className:"map-range",onChange:e,min:1,max:11,step:.1,value:n||r&&[parseFloat(r)]||[1.2]}),E.a.createElement("a",{onClick:o,className:"map-range-button map-range-minus"}))}function Ie(t){var e="loader-ctn";return t.showOverlay&&(e+=" overlay"),E.a.createElement("div",{className:e},E.a.createElement("div",{className:"lds-default"},E.a.createElement("div",null),E.a.createElement("div",null),E.a.createElement("div",null),E.a.createElement("div",null),E.a.createElement("div",null),E.a.createElement("div",null),E.a.createElement("div",null),E.a.createElement("div",null),E.a.createElement("div",null),E.a.createElement("div",null),E.a.createElement("div",null),E.a.createElement("div",null)))}var Me,ze,Le=(Me=[],function(t,e,r){var n=JSON.stringify({ne:t,sw:e,lnglat:r});if(void 0!==Me[n])return Me[n];var i=(r.lng-t.lng)*(r.lng-e.lng)<0,o=(r.lat-t.lat)*(r.lat-e.lat)<0,a=i&&o;return Me[n]=a,Me[n]}),Oe=(ze=[],function(t,e,r){var n,i=2<arguments.length&&void 0!==r?r:"M",o=JSON.stringify({p1:t,p2:e,unit:i});if(void 0!==ze[o])return ze[o];if(t.lat==e.lat&&t.lng==e.lng)n=0;else{var a=Math.PI*t.lat/180,s=Math.PI*e.lat/180,l=t.lng-e.lng,u=Math.PI*l/180;1<(n=Math.sin(a)*Math.sin(s)+Math.cos(a)*Math.cos(s)*Math.cos(u))&&(n=1),n=60*(n=180*(n=Math.acos(n))/Math.PI)*1.1515,"K"==i&&(n*=1.609344),"N"==i&&(n*=.8684)}return ze[o]=n,ze[o]}),De=r(3),Re=r(22);function Fe(t){return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Be(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function je(t){return(je=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ne(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ue(t,e){return(Ue=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ve(t){var e=t.showRegional,r=t.regionalHubs,n=t.handleToggleHover,i=t.handleFeatureClick;return r&&r.length?E.a.createElement(De.Layer,{type:"symbol",id:"regional-hubs",interactive:!0,layout:{visibility:e?"visible":"none","icon-allow-overlap":!0,"icon-ignore-placement":!0,"text-ignore-placement":!0,"text-allow-overlap":!0,"icon-image":"regional-icon","icon-size":["interpolate",["linear"],["zoom"],5,.09,11,.15]}},r.map(function(t,e){return E.a.createElement(De.Feature,{key:e,coordinates:[t.lng,t.lat],onMouseEnter:function(){n("pointer")},onMouseLeave:function(){n("")},onClick:function(){i(t)}})})):null}function qe(t){var e=t.showEvents,r=t.events,n=t.handleToggleHover,i=t.handleFeatureClick;return r&&r.length?E.a.createElement(De.Layer,{type:"symbol",id:"events",interactive:!0,layout:{visibility:e?"visible":"none","icon-image":["case",["==",["get","eventPeriod"],"today"],"today-event-marker",["==",["get","eventPeriod"],"future"],"future-event-marker",["==",["get","eventPeriod"],"past"],"past-event-marker","past-event-marker"],"icon-size":["interpolate",["linear"],["zoom"],5,1,11,2]}},r.map(function(t,e){return E.a.createElement(De.Feature,{key:e,coordinates:[t.lng,t.lat],properties:{eventPeriod:t.event_period},onMouseEnter:function(){n("pointer")},onMouseLeave:function(){n("")},onClick:function(){i(t)}})})):null}function Ze(t){var e=t.showLocal,r=t.localGroups,n=t.handleToggleHover,i=t.handleFeatureClick;return r&&r.length?E.a.createElement(De.Layer,{type:"symbol",id:"local-groups",interactive:!0,layout:{visibility:e?"visible":"none","icon-allow-overlap":!0,"icon-ignore-placement":!0,"text-ignore-placement":!0,"text-allow-overlap":!0,"icon-image":"group-icon","icon-size":["interpolate",["linear"],["zoom"],5,.09,11,.15]}},r.map(function(t,e){return E.a.createElement(De.Feature,{key:e,coordinates:[t.lng,t.lat],onMouseEnter:function(){n("pointer")},onMouseLeave:function(){n("auto")},onClick:function(){i(t)}})})):null}var Ge=r(3),We=r(26),He=Ge.Popup,Xe=Ge.Map({accessToken:Re.MAPBOX_ACCESS_TOKEN}),$e=function(){function r(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(e=function(t,e){return!e||"object"!==Fe(e)&&"function"!=typeof e?Ne(t):e}(this,je(r).call(this,t))).state={localGroupIconLoaded:!1,regionalHubIconLoaded:!1,mapLoadedCheck:!1,zoomFromDefaultSearch:void 0,mapFullyLoaded:!1,zoomValue:0},e.processDefaultSearch=!0,e.handleStyleLoad=e.handleStyleLoad.bind(Ne(e)),e.handleToggleHover=e.handleToggleHover.bind(Ne(e)),e.map=null,e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ue(t,e)}(r,E.a.Component),function(t,e,r){e&&Be(t.prototype,e),r&&Be(t,r)}(r,[{key:"componentDidMount",value:function(){var t=this;setTimeout(function(){t.setState({mapLoadedCheck:!0})},5500)}},{key:"componentDidUpdate",value:function(){11<parseFloat(this.props.mapZoom)&&this.map.state.map.setZoom(11)}},{key:"handleStyleLoad",value:function(r){var n=this;r.on("sourcedata",function(t){t.isSourceLoaded&&n.setState({mapFullyLoaded:!0})});var t=Se(15,{red:158,green:198,blue:200}),e=function(i,o,a,s){return{width:o,height:o,data:new Uint8Array(o*o*4),onAdd:function(){var t=document.createElement("canvas");t.width=this.width,t.height=this.height,this.context=t.getContext("2d")},render:function(){var t=performance.now()%1e3/1e3,e=o/2*.3,r=o/2*.7*t+e,n=this.context;return n.clearRect(0,0,this.width,this.height),n.beginPath(),n.arc(this.width/2,this.height/2,r,0,2*Math.PI),n.fillStyle="rgba(".concat(a.red,", ").concat(a.green,", ").concat(a.blue,", ").concat(1-t,")"),n.fill(),n.beginPath(),n.arc(this.width/2,this.height/2,e,0,2*Math.PI),n.fillStyle="rgba(".concat(s.red,", ").concat(s.green,", ").concat(s.blue,", 1)"),n.strokeStyle="white",n.lineWidth=2+4*(1-t),n.fill(),n.stroke(),this.data=n.getImageData(0,0,this.width,this.height).data,i.triggerRepaint(),!0}}}(r,50,{red:0,green:109,blue:116},{red:80,green:159,blue:116}),i=Se(15,{red:0,green:109,blue:116});if(r.addImage("past-event-marker",t,{pixelRatio:2}),r.addImage("today-event-marker",e,{pixelRatio:2}),r.addImage("future-event-marker",i,{pixelRatio:2}),r.loadImage("https://dkaroyc5da26m.cloudfront.net/images/group.png",function(t,e){r.addImage("group-icon",e),n.setState({localGroupIconLoaded:!0})}),r.loadImage("https://dkaroyc5da26m.cloudfront.net/images/flag.png",function(t,e){r.addImage("regional-icon",e),n.setState({regionalHubIconLoaded:!0})}),r.scrollZoom.disable(),r.on("dragend",function(t){n.props.handleMapChange(r.getBounds(),r.getCenter(),r.getZoom().toPrecision(2))}),r.on("zoomend",function(t){n.props.mapZoom!=r.getZoom().toPrecision(2)&&n.props.handleMapChange(r.getBounds(),r.getCenter(),r.getZoom().toPrecision(2))}),this.props.handleMapChange(r.getBounds(),r.getCenter(),r.getZoom().toPrecision(2)),this.map=r,this.props.handleMapLoad(r),this.props.initBounds){var o=this.props.initBounds,a=We.viewport([o.southwest.lng,o.southwest.lat,o.northeast.lng,o.northeast.lat],[r.getContainer().clientWidth,r.getContainer().clientHeight]);isNaN(a.zoom)||this.setState({zoomFromDefaultSearch:[a.zoom]})}}},{key:"handleToggleHover",value:function(t){this.map.state.map.getCanvas().style.cursor=t}},{key:"handleZoomChange",value:function(t){var e=t.target.value;this.map.state.map.setZoom(e),this.setState({zoomValue:e}),Ae(fe,_e,xe,Number(e))}},{key:"handleZoomOut",value:function(){this.map.state.map.zoomOut({animate:!1}),Ae(fe,ve,xe,Number(this.state.zoomValue))}},{key:"handleZoomIn",value:function(){this.map.state.map.zoomIn({animate:!1}),Ae(fe,ge,xe,Number(this.state.zoomValue))}},{key:"renderPopup",value:function(){var t=this.props.clickedItem,e=t.website,r=t.url,n=(e||r)+"?"+[this.props.referrer&&"referrer=".concat(this.props.referrer),this.props.source&&"source=".concat(this.props.source)].filter(function(t){return t}).join("&");return n=Ce(this.props.language,n),E.a.createElement(He,{coordinates:[t.lng,t.lat]},E.a.createElement(Te,{popup:t,handleClosePopup:this.props.handleClosePopup,i18n:this.props.i18n,referrer:this.props.referrer,source:this.props.source,popup_url:n}))}},{key:"render",value:function(){var e=this,t=this.props.mapZoom||this.props.initZoom,r=this.props.mapCenter||this.props.initLatLng;this.processDefaultSearch&&this.props.initBounds&&this.state.zoomFromDefaultSearch&&(r=this.props.initLatLng,t=this.state.zoomFromDefaultSearch,this.processDefaultSearch=!1);var n=null;return this.state.mapFullyLoaded||(n=E.a.createElement(Ie,{showOverlay:!0})),E.a.createElement("div",{className:"map-area"},n,E.a.createElement(Pe,{mapZoom:this.props.mapZoom,initZoom:this.props.initZoom,handleZoomChange:this.handleZoomChange.bind(this),handleZoomIn:this.handleZoomIn.bind(this),handleZoomOut:this.handleZoomOut.bind(this)}),this.state.mapLoadedCheck&&!this.props.mapLoaded&&E.a.createElement("h1",{style:{textAlign:"center"}},"Please disable any script/ad blocker for the map to load properly."),E.a.createElement(Xe,{ref:function(t){e.map=t},onStyleLoad:this.handleStyleLoad,style:Re.MAPBOX_STYLE_URL,className:"map-view-container",center:r,zoom:t,search:this.props.search,interactive:!1,animationOptions:{animate:!1},doubleClickZoom:!1,containerStyle:{height:"100%",width:"100%"}},E.a.createElement(qe,{showEvents:this.props.showEvents,events:this.props.events,handleToggleHover:this.handleToggleHover,handleFeatureClick:this.props.handleFeatureClick}),this.state.localGroupIconLoaded&&E.a.createElement(Ze,{showLocal:this.props.showLocal,localGroups:this.props.localGroups,handleToggleHover:this.handleToggleHover,handleFeatureClick:this.props.handleFeatureClick}),this.state.regionalHubIconLoaded&&E.a.createElement(Ve,{showRegional:this.props.showRegional,regionalHubs:this.props.regionalHubs,handleToggleHover:this.handleToggleHover,handleFeatureClick:this.props.handleFeatureClick}),this.props.clickedItem&&this.renderPopup()))}}]),r}();function Ke(t){return(Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Je(){return(Je=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function Ye(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Qe(t){return(Qe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function tr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function er(t,e){return(er=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var rr=function(t){var e=function(){function r(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(e=function(t,e){return!e||"object"!==Ke(e)&&"function"!=typeof e?tr(t):e}(this,Qe(r).call(this,t)))._i18n=e.i18n.bind(tr(e)),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&er(t,e)}(r,E.a.Component),function(t,e,r){e&&Ye(t.prototype,e),r&&Ye(t,r)}(r,[{key:"i18n",value:function(t){var e=this,r=this.props.data.filter(function(t){return t.lang==e.props.activeLanguage});return r&&r[0]&&r[0][t]||""}},{key:"render",value:function(){return E.a.createElement(t,Je({i18n:this._i18n},this.props))}}]),r}();return rt(function(t){var e=t.language;return{data:e.data,activeLanguage:e.activeLanguage,languageSet:e.i18nSet}})(e)},nr="SEARCH_SET_FILTERS",ir="SEARCH_SET_RESULTS",or="SEARCH_SET_SELECTED_RESULT",ar="SEARCH_SET_QUERY",sr="EVENTS_LOAD_EVENTS",lr=r(4),ur=r.n(lr);ur.a.setApiKey("AIzaSyBz0JLljX7OrsksyT0KBwi_N5n1NzTm608"),ur.a.enableDebug();var cr=function(t){return{type:"SEARCH_MAP_IS_LOADED",data:t}},pr=function(t,e,r){return{type:"SEARCH_UPDATE_MAP_INFORMATION",data:{bounds:0<arguments.length&&void 0!==t?t:null,center:1<arguments.length&&void 0!==e?e:null,zoom:2<arguments.length&&void 0!==r?r:null}}},hr=function(t){return{type:nr,data:{filters:t}}},fr=function(t){return function(e){e({type:ar,data:t}),ur.a.fromAddress(t).then(function(t){return e({type:ir,data:t})},function(t){return e({type:"SEARCH_ERROR_RESULTS",data:t})})}},dr=function(){return{type:ir,data:{}}},mr=function(t){return{type:or,data:t}},yr=function(t){return{type:"SEARCH_SET_MOBILE_VIEW",data:{mobileView:t}}};function gr(t){return(gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _r(t,e){return!e||"object"!==gr(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function br(t){return(br=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function xr(t,e){return(xr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function wr(t){var e=t.popup_url,r=t.i18n,n=t.data,i=n.title,o=(n.url,n.venue),a=n.event_type,s=n.description,l=n.location,u=n.start_datetime,c=n.supergroup,p=n.campaign_title,h=n.name;return n.website,n.group,n.group_url,E.a.createElement("li",{className:"event-list-item"},E.a.createElement("div",{className:"event-list-item-container"},E.a.createElement("div",{className:"event-list-item-type"},E.a.createElement("span",null,"group"==a?r(Ee(c)):r(Ee(p))||p||r("show-events"))),E.a.createElement("h3",{className:"event-list-item-title text-size-h3"},E.a.createElement(le.OutboundLink,{eventLabel:be,to:"".concat(ke(e)),target:"_blank",className:"event-list-item-link"},h||i)),u&&E.a.createElement("div",{className:"event-list-item-date"},pt()(String(u)).format(pe)),E.a.createElement("div",{className:"event-list-item-location"},l||o),E.a.createElement("div",{className:"event-list-item-description"},s||""),E.a.createElement("div",{className:"event-list-item-cta event-list-get-involved"},E.a.createElement(le.OutboundLink,{eventLabel:be,to:"".concat(ke(e)),target:"_blank",className:"event-list-item-cta-btn megamap-btn button"},"group"==a?r("get-involved"):"RSVP"))))}function Er(t){var e=t.eventsData,i=t.showLocal,o=t.showEvents,a=t.showRegional,s=t.i18n,l=t.referrer,u=t.source,c=t.activeLanguage;return E.a.createElement("div",{className:"event-list-container"},E.a.createElement("ul",{className:"event-list"},e.map(function(t){if(i&&"group"==t.event_type&&"Local Groups"==t.supergroup||a&&"group"==t.event_type&&"Regional Hubs"==t.supergroup||o&&"group"!==t.event_type){var e=t.website,r=t.url,n=(e||r)+"?"+[l&&"referrer=".concat(l),u&&"source=".concat(u)].filter(function(t){return t}).join("&");return n=Ce(c,n),E.a.createElement(wr,{popup_url:n,i18n:s,data:t,key:"".concat(t.name,"--").concat(t.url||t.website,"-").concat(t.lat,"-").concat(t.lng)})}})))}function Sr(t){var e=t.handleZoomOut;return E.a.createElement("div",{className:"event-list-container"},E.a.createElement("div",{className:"event-empty"},E.a.createElement("p",null,"Nothing found in this area. Try a different search, or zoom out to find the closest local 350 group or event."),E.a.createElement("a",{onClick:e},"Zoom Out")))}var kr=function(){function r(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(e=_r(this,br(r).call(this,t))).state={clickedItem:null},e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xr(t,e)}(r,E.a.Component),function(t,e,r){e&&vr(t.prototype,e),r&&vr(t,r)}(r,[{key:"handleFeatureClick",value:function(t){this.setState({clickedItem:t})}},{key:"handleClosePopup",value:function(){this.setState({clickedItem:null})}},{key:"handleMapChange",value:function(t,e,r){this.props.updateMap({northeast:t.getNorthEast(),southwest:t.getSouthWest()},[e.lng,e.lat],[r])}},{key:"handleMapLoad",value:function(t){this.props.setMap(t)}},{key:"render",value:function(){return E.a.createElement($e,{events:this.props.events,regionalHubs:this.props.regionalHubs,localGroups:this.props.localGroups,handleFeatureClick:this.handleFeatureClick.bind(this),handleMapChange:this.handleMapChange.bind(this),handleMapLoad:this.handleMapLoad.bind(this),handleClosePopup:this.handleClosePopup.bind(this),clickedItem:this.state.clickedItem,showLocal:this.props.showLocal,showEvents:this.props.showEvents,showRegional:this.props.showRegional,mapLoaded:this.props.mapLoaded,mapZoom:this.props.mapZoom,mapBounds:this.props.mapBounds,mapCenter:this.props.mapCenter,i18n:this.props.i18n,initZoom:this.props.initZoom,initLatLng:this.props.initLatLng,search:this.props.search,initBounds:this.props.initBounds,referrer:this.props.referrer,source:this.props.source,language:this.props.language})}}]),r}(),Cr=rr(rt(function(t){var e=t.events,r=t.search;return{languageLoading:t.language.loading,mapLoaded:!!r.map,mapZoom:r.zoom,mapBounds:r.bounds,mapCenter:r.center,events:e.typeEvents,regionalHubs:e.typeRegionalHubs,localGroups:e.typeLocalGroups,showLocal:r.activeFilters.includes("local-groups"),showRegional:r.activeFilters.includes("regional-groups"),showEvents:r.activeFilters.includes("events")}},function(n){return{updateMap:function(t,e,r){n(pr(t,e,r))},setMap:function(t){n(cr(t))}}})(kr));function Tr(t){return(Tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ar(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Pr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ir(t,e){return!e||"object"!==Tr(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function Mr(t){return(Mr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zr(t,e){return(zr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Lr(t){var e=t.searchResults,r=t.selectResult;return E.a.createElement("div",{className:"search-suggestion-container"},E.a.createElement("div",{className:"search-suggestion-viewport"},E.a.createElement("ul",{className:"search-suggestion-list"},e.map(function(t){return E.a.createElement("li",{key:t.place_id},E.a.createElement("a",{onClick:function(){return r(t)}},t.formatted_address))}))))}function Or(t){var e=t.handleFilterChange,r=t.showLocal,n=t.showRegional,i=t.showEvents,o=t.i18n;return E.a.createElement("form",{className:"filter-form"},E.a.createElement("ul",null,E.a.createElement("li",null,E.a.createElement("input",{type:"checkbox",name:"f[]",value:"events",id:"events",onChange:e,checked:!!i&&"checked"}),E.a.createElement("label",{htmlFor:"events"},E.a.createElement("img",{src:"https://new-map.350.org/assets/images/event.png"}),E.a.createElement("span",null,o("show-events")))),E.a.createElement("li",null,E.a.createElement("input",{type:"checkbox",name:"f[]",value:"local-groups",id:"local-groups",onChange:e,checked:!!r&&"checked"}),E.a.createElement("label",{htmlFor:"local-groups"},E.a.createElement("img",{src:"https://new-map.350.org/assets/images/group.png"}),E.a.createElement("span",null,o("local-groups")))),E.a.createElement("li",null,E.a.createElement("input",{type:"checkbox",name:"f[]",value:"regional-groups",id:"regional-groups",onChange:e,checked:!!n&&"checked"}),E.a.createElement("label",{htmlFor:"regional-groups"},E.a.createElement("img",{src:"https://new-map.350.org/assets/images/flag.png"}),E.a.createElement("span",null,o("regional-hubs"))))))}function Dr(t){var e=t.handleSearch,r=t.searchResults,n=t.selectResult,i=t.handleKeyPress,o=t.searchQuery,a=(t.activeFilters,t.handleFilterChange),s=t.showRegional,l=t.showLocal,u=t.showEvents,c=t.i18n,p=t.mobileView,h=t.handleToggleMobileView;return E.a.createElement("div",{className:"search-container"},E.a.createElement("div",{className:"search-viewport"},E.a.createElement("form",{className:"search-form",onSubmit:function(){return!1}},E.a.createElement("input",{type:"text",className:"search-text",placeholder:c("search"),onChange:e,onKeyPress:i,value:o}),E.a.createElement("a",{className:"search-btn button"},c("search-button"))),E.a.createElement(Or,{handleFilterChange:a,showEvents:u,showLocal:l,showRegional:s,i18n:c}),E.a.createElement("div",{className:"mobile-view-toggle"},E.a.createElement("a",{onClick:function(){return h()}},"View ","list"==p?"map":"list")),r&&E.a.createElement(Lr,{selectResult:n,searchResults:r})))}var Rr=function(){function r(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(e=Ir(this,Mr(r).call(this,t))).interval=null,e.filteredData=[],e.state={eventsData:[],dataLoaded:!1},e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zr(t,e)}(r,E.a.Component),function(t,e,r){e&&Pr(t.prototype,e),r&&Pr(t,r)}(r,[{key:"componentDidUpdate",value:function(t){var e=this.props.eventsData;e.length!==t.eventsData.length&&this.setState({dataLoaded:!0,eventsData:e})}},{key:"filterData",value:function(t){var i=this,e=t.eventsData,r=t.showLocal,n=t.showRegional,o=t.showEvents,a=[];return r&&a.push("local_group"),n&&a.push("regional_hub"),o&&a.push("event"),e.filter(function(t){return!!a.includes(t.category)&&Le(i.props.mapBounds.northeast,i.props.mapBounds.southwest,{lng:t.lng,lat:t.lat})}).sort(function(t,e){if(i.props.center){var r=Ar(i.props.center,2),n={lng:r[0],lat:r[1]};return Oe(t,n)-Oe(e,n)}return 0})}},{key:"handleZoomOut",value:function(){var t=this;this.interval=setInterval(function(){0<t.filteredData.length?clearInterval(t.interval):t.props.map.zoomOut({duration:100})},200)}},{key:"render",value:function(){var t=this.state.dataLoaded;if(this.filteredData=this.props.mapBounds?this.filterData(this.props):this.props.eventsData,this.props.map&&0==this.filteredData.length&&t)return E.a.createElement(Sr,{handleZoomOut:this.handleZoomOut.bind(this)});var e=this.props,r=e.showLocal,n=e.showRegional,i=e.showEvents,o=e.i18n,a=e.activeLanguage,s=e.referrer,l=e.source;return t?E.a.createElement(Er,{eventsData:this.filteredData,showLocal:r,showRegional:n,showEvents:i,i18n:o,activeLanguage:a,referrer:s,source:l}):E.a.createElement(Ie,null)}}]),r}(),Fr=rr(rt(function(t){var e=t.events,r=t.search;return{languageLoading:t.language.loading,map:r.map,mapBounds:r.bounds,mapZoom:r.zoom,center:r.center,eventsData:e.eventsData,showLocal:r.activeFilters.includes("local-groups"),showRegional:r.activeFilters.includes("regional-groups"),showEvents:r.activeFilters.includes("events")}},function(e){return{updateZoom:function(t){e(pr(null,null,t))}}})(Rr));function Br(t){return(Br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jr(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Nr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ur(t,e){return!e||"object"!==Br(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function Vr(t){return(Vr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qr(t,e){return(qr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Zr=function(){function r(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(e=Ur(this,Vr(r).call(this,t))).geocodeTimeout=null,e.state={searchQuery:e.props.defaultSearch},e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qr(t,e)}(r,E.a.Component),function(t,e,r){e&&Nr(t.prototype,e),r&&Nr(t,r)}(r,[{key:"componentDidMount",value:function(){this.props.initFilters&&this.props.setFilters(this.props.initFilters)}},{key:"componentDidUpdate",value:function(t){t.searchQuery!=this.props.searchQuery&&this.setState({searchQuery:this.props.searchQuery})}},{key:"handleToggleMobileView",value:function(){var t=this;"map"==this.props.mobileView?this.props.setMobileView("list"):(this.props.setMobileView("map"),setTimeout(function(){t.props.map.resize()},100))}},{key:"handleSearch",value:function(t){var e=t.target.value;this.props.clearSearchResults(),clearTimeout(this.geocodeTimeout),0<e.trim().length&&(this.setState({searchQuery:e},this.queryGoogleAPI()),Ae(he,"Action:".concat(de,", Search Query: ").concat(e),be))}},{key:"queryGoogleAPI",value:function(){var t=this;this.geocodeTimeout=setTimeout(function(){t.props.searchLocation(t.state.searchQuery)},500)}},{key:"handleFilterChange",value:function(t){var e=t.target.value;this.props.activeFilters.includes(e)?this.props.setFilters(this.props.activeFilters.filter(function(t){return t!==e})):this.props.setFilters([].concat(jr(this.props.activeFilters),[e]))}},{key:"handleKeyPress",value:function(t){if("Enter"==t.key)return this.selectFirstSearchResult(),this.props.clearSearchResults(),t.preventDefault(),!1}},{key:"selectFirstSearchResult",value:function(){var t=ye;void 0!==this.props.searchResults&&this.props.searchResults&&Array.isArray(this.props.searchResults)&&0<this.props.searchResults.length?(this.setState({searchQuery:this.props.searchResults[0].formatted_address}),this.props.selectResult(this.props.searchResults[0])):t=me,Ae(he,t,be)}},{key:"handleSelect",value:function(t){this.props.selectResult(t)}},{key:"render",value:function(){return E.a.createElement(Dr,{searchQuery:this.state.searchQuery,activeFilters:this.props.activeFilters,zoomLevel:this.props.zoomLevel,center:this.props.center,handleSearch:this.handleSearch.bind(this),handleKeyPress:this.handleKeyPress.bind(this),searchResults:this.props.searchResults,selectResult:this.handleSelect.bind(this),handleFilterChange:this.handleFilterChange.bind(this),handleToggleMobileView:this.handleToggleMobileView.bind(this),mobileView:this.props.mobileView,showRegional:this.props.activeFilters.includes("regional-groups"),showEvents:this.props.activeFilters.includes("events"),showLocal:this.props.activeFilters.includes("local-groups"),i18n:this.props.i18n})}}]),r}(),Gr=rr(rt(function(t){var e=t.search;return{languageLoading:t.language.loading,searchQuery:e.searchQuery,activeFilters:e.activeFilters,zoomLevel:e.zoomLevel,center:e.center,searchResults:e.searchResults.results,chosenResult:e.chosenResult,bounds:e.bounds,mobileView:e.mobileView,map:e.map}},function(e){return{setFilters:function(t){e(hr(t))},searchLocation:function(t){e(fr(t))},clearSearchResults:function(){e(dr())},selectResult:function(t){e(mr(t))},setMobileView:function(t){e(yr(t))}}})(Zr)),Wr=function(t){return{type:sr,configAttrs:t,payload:{request:{url:"/raw/350org-annotated.json",type:"GET"}}}},Hr=function(t){return{language:t,type:"LOAD_LANGUAGE",payload:{request:{url:"/data/lang.json",type:"GET"}}}};r(67);function Xr(t){return(Xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Kr(t,e){return!e||"object"!==Xr(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function Jr(t){return(Jr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Yr(t,e){return(Yr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Qr=function(){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Kr(this,Jr(e).call(this,t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Yr(t,e)}(e,E.a.Component),function(t,e,r){e&&$r(t.prototype,e),r&&$r(t,r)}(e,[{key:"componentDidMount",value:function(){this.props.loadEvents({eventsPeriod:this.props.showEventsPeriod.split(","),dateRangeStart:this.props.dateRangeStart,dateRangeEnd:this.props.dateRangeEnd,campaignNames:this.props.campaignNames?this.props.campaignNames.split(","):void 0,eventSources:this.props.eventSources?this.props.eventSources.split(","):void 0}),this.props.loadLanguage(this.props.language)}},{key:"render",value:function(){return E.a.createElement(ut,{className:"mobile-view-".concat(this.props.mobileView)},E.a.createElement(ot,{className:"mob-list-area"},E.a.createElement(Gr,{defaultSearch:this.props.search,initFilters:this.props.filters&&this.props.filters.split(",")}),E.a.createElement(Fr,{referrer:this.props.referrer,source:this.props.source,language:this.props.language})),E.a.createElement(st,{className:"mob-map-area"},E.a.createElement(Cr,{initLatLng:this.props.latLng,initZoom:this.props.zoom,search:this.props.search,referrer:this.props.referrer,source:this.props.source,initBounds:this.props.bounds,language:this.props.language})))}}]),e}(),tn=rt(function(t){return{mobileView:t.search.mobileView}},function(e){return{loadEvents:function(t){e(Wr(t))},loadLanguage:function(t){e(Hr(t))}}})(Qr);function en(i){return function(t){var r=t.dispatch,n=t.getState;return function(e){return function(t){return"function"==typeof t?t(r,n,i):e(t)}}}}var rn=en();rn.withExtraArgument=en;var nn=rn,on=r(36),an=r.n(on),sn=r(37),ln=r.n(sn);function un(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.forEach(function(t){cn(e,t,r[t])})}return e}function cn(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var pn={activeLanguage:"fr",i18nSet:{cta:{en:"Sign up",fr:"Reponder"},search:{en:"Search",fr:"Chercher"}},loading:!1,error:!1,data:[{lang:"en",key:"value_en"},{lang:"fr",key:"value_fr"}]};function hn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.forEach(function(t){fn(e,t,r[t])})}return e}function fn(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var dn=r(26),mn={searchQuery:"",activeFilters:["events","local-groups","regional-groups"],zoom:null,center:null,bounds:{northeast:{lng:180,lat:89.45016124669523},southwest:{lng:-180,lat:-87.71179927260242}},searchResults:[],chosenResult:null,mobileView:"list",map:null};function yn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.forEach(function(t){gn(e,t,r[t])})}return e}function gn(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var vn={eventsData:[]},_n=function(t){for(var e=Object.keys(t),f={},r=0;r<e.length;r++){var n=e[r];0,"function"==typeof t[n]&&(f[n]=t[n])}var d,m=Object.keys(f);try{!function(r){Object.keys(r).forEach(function(t){var e=r[t];if(void 0===e(void 0,{type:g.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===e(void 0,{type:g.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+g.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}(f)}catch(t){d=t}return function(t,e){if(void 0===t&&(t={}),d)throw d;for(var r,n,i,o=!1,a={},s=0;s<m.length;s++){var l=m[s],u=f[l],c=t[l],p=u(c,e);if(void 0===p){var h=(r=l,void 0,"Given "+((i=(n=e)&&n.type)&&'action "'+String(i)+'"'||"an action")+', reducer "'+r+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.');throw new Error(h)}a[l]=p,o=o||p!==c}return o?a:t}}({language:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:pn,e=1<arguments.length?arguments[1]:void 0;switch(e.type){case"LOAD_LANGUAGE":return un({},t,{loading:!0,activeLanguage:e.language});case"LOAD_LANGUAGE_SUCCESS":return un({},t,{loading:!1,data:e.payload.data.rows});case"LOAD_LANGUAGE_FAILURE":return un({},t,{loading:!1});default:return t}},search:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:mn,e=1<arguments.length?arguments[1]:void 0;switch(e.type){case"SEARCH_MAP_IS_LOADED":return hn({},t,{map:e.data});case"SEARCH_UPDATE_MAP_INFORMATION":return hn({},t,{zoom:e.data.zoom||t.zoom,center:e.data.center||t.center,bounds:e.data.bounds||t.bounds});case"SEARCH_SET_MOBILE_VIEW":return hn({},t,{mobileView:e.data.mobileView});case ar:return hn({},t,{searchQuery:e.data});case nr:return hn({},t,{activeFilters:e.data.filters});case ir:return hn({},t,{searchResults:e.data});case or:var r=e.data.geometry.viewport?e.data.geometry.viewport:e.data.geometry.bounds;return hn({},t,{chosenResult:e.data.formatted_address,searchQuery:e.data.formatted_address,bounds:r,center:[e.data.geometry.location.lng,e.data.geometry.location.lat],searchResults:[],zoom:function(t,e){if(null!=t&&void 0!==t.getContainer){var r=dn.viewport([e.southwest.lng,e.southwest.lat,e.northeast.lng,e.northeast.lat],[t.getContainer().clientWidth,t.getContainer().clientHeight]);return isNaN(r.zoom)?void 0:[r.zoom]}}(t.map,r)});default:return t}},events:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:vn,e=1<arguments.length?arguments[1]:void 0;switch(e.type){case sr:case"EVENTS_LOAD_EVENTS_FAIL":return yn({},t);case"EVENTS_LOAD_EVENTS_SUCCESS":var r=function(t,e){var r=e.eventsPeriod,n=e.dateRangeStart,i=e.dateRangeEnd,o=e.campaignNames,a=e.eventSources;return t.map(function(t){if(t.url||t.website)return t}).filter(function(t){if(void 0===t)return!1;if("event"==t.category){if(!r.includes(t.event_period))return!1;if(n||i){var e=new Date(t.start_datetime).setHours(0,0,0,0);if(n&&e-new Date(n).setHours(0,0,0,0)<0)return!1;if(i&&0<e-new Date(i).setHours(0,0,0,0))return!1}if(o&&!o.includes(t.campaign_name))return!1;if(a&&!a.includes(t.source))return!1}return!0})}(e.payload.data.data,e.payload.config.reduxSourceAction.configAttrs);return yn({},t,{eventsData:r,typeEvents:r.filter(function(t){return"event"===t.category}),typeRegionalHubs:r.filter(function(t){return"regional_hub"===t.category}),typeLocalGroups:r.filter(function(t){return"local_group"===t.category})});default:return t}}}),bn=an.a.create({baseURL:"https://new-map.350.org/"}),xn=function t(e,r,n){var i;if("function"==typeof r&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function");if("function"==typeof r&&void 0===n&&(n=r,r=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(t)(e,r)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var o=e,a=r,s=[],l=s,u=!1;function c(){l===s&&(l=s.slice())}function p(){if(u)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return a}function h(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(u)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");var r=!0;return c(),l.push(e),function(){if(r){if(u)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");r=!1,c();var t=l.indexOf(e);l.splice(t,1)}}}function f(t){if(!v(t))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===t.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(u)throw new Error("Reducers may not dispatch actions.");try{u=!0,a=o(a,t)}finally{u=!1}for(var e=s=l,r=0;r<e.length;r++)(0,e[r])();return t}return f({type:g.INIT}),(i={dispatch:f,subscribe:h,getState:p,replaceReducer:function(t){if("function"!=typeof t)throw new Error("Expected the nextReducer to be a function.");o=t,f({type:g.REPLACE})}})[y.a]=function(){var t,r=h;return(t={subscribe:function(t){if("object"!=typeof t||null===t)throw new TypeError("Expected the observer to be an object.");function e(){t.next&&t.next(p())}return e(),{unsubscribe:r(e)}}})[y.a]=function(){return this},t},i}(_n,(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||M)(function(){for(var t=arguments.length,o=new Array(t),e=0;e<t;e++)o[e]=arguments[e];return function(i){return function(){var t=i.apply(void 0,arguments),e=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},r={getState:t.getState,dispatch:function(){return e.apply(void 0,arguments)}},n=o.map(function(t){return t(r)});return x({},t,{dispatch:e=M.apply(void 0,n)(t.dispatch)})}}}(nn,ln()(bn,{interceptors:{response:[{error:function(t,e){(0,t.getSourceAction)(e.config),e.response&&e.response.status;return Promise.reject(e)},success:function(t,e){(0,t.getSourceAction)(e.config);return Promise.resolve(e)}}]},returnRejectedPromiseOnError:!0}))));r(88),r(90);function wn(t){return(wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function En(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Sn(t,e){return!e||"object"!==wn(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function kn(t){return(kn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Cn(t,e){return(Cn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Tn=function(){function t(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Sn(this,kn(t).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Cn(t,e)}(t,E.a.Component),function(t,e,r){e&&En(t.prototype,e),r&&En(t,r)}(t,[{key:"componentDidMount",value:function(){!function(t){le.initialize(t)}("UA-151335165-1"),le.pageview(window.location.pathname+window.location.search)}},{key:"render",value:function(){return E.a.createElement(u,{store:xn},E.a.createElement(tn,this.props))}}]),t}();var An,Pn,In=window.location.search.replace("?","").split("&").reduce(function(t,e){var r=we(e.split("="),2),n=r[0],i=r[1];return n&&i?Object.assign({},t,function(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}({},n,i)):t},{}),Mn=document.getElementById("map-embed-350org"),zn=Mn.getAttribute("data-src-lang")||"en",Ln=Mn.getAttribute("data-src-layers"),On=Mn.getAttribute("data-src-latlong"),Dn=Mn.getAttribute("data-src-zoom"),Rn=Mn.getAttribute("data-src-search")||"",Fn=Mn.getAttribute("data-src-referrer")||In.referrer,Bn=Mn.getAttribute("data-src-source")||In.source,jn=Mn.getAttribute("data-src-show-events-period")||"today,future",Nn=Mn.getAttribute("data-src-date-range-start"),Un=Mn.getAttribute("data-src-date-range-end"),Vn=Mn.getAttribute("data-src-campaign-names"),qn=Mn.getAttribute("data-src-event-sources"),Zn=void 0;if(ur.a.setApiKey("AIzaSyBz0JLljX7OrsksyT0KBwi_N5n1NzTm608"),On&&Dn&&Rn&&(Rn=""),On){var Gn=On.split(","),Wn=(Pn=2,function(t){if(Array.isArray(t))return t}(An=Gn)||function(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(An,Pn)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()),Hn=Wn[0],Xn=Wn[1];On=[Xn,Hn]}else On=[0,0];function $n(t,e){return E.a.createElement(Tn,{language:zn,filters:Ln,latLng:t,zoom:Dn,search:Rn,bounds:e,referrer:Fn,source:Bn,showEventsPeriod:jn,dateRangeStart:Nn,dateRangeEnd:Un,campaignNames:Vn,eventSources:qn})}Dn=Dn?[Dn]:[1],Rn?ur.a.fromAddress(Rn).then(function(t){var e=t.results[0],r=e.geometry.location,n=r.lat,i=r.lng;On=[i,n],Zn=e.geometry.bounds,o.a.render($n(On,Zn),Mn)},function(t){o.a.render($n(On,Zn),Mn)}):o.a.render($n(On,Zn),Mn)}]);